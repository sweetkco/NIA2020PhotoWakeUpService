function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){n.push(s.value);if(t&&n.length===t)break}}catch(e){i=!0;r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);return"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}this.createjs=this.createjs||{},function(){"use strict";var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="1.0.0",e.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var n=e.prototype,o=Object.getPrototypeOf&&Object.getPrototypeOf(n)||n.__proto__;if(o){n[(t+="_")+"constructor"]=o.constructor;for(var i in o)n.hasOwnProperty(i)&&"function"==typeof o[i]&&(n[t+i]=o[i])}return e},this.createjs=this.createjs||{},createjs.deprecate=function(t,n){"use strict";return function(){var e="Deprecated property or method '"+n+"'. See docs for info.";return console&&(console.warn?console.warn(e):console.log(e)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var n=0,o=e.length;n<o;n++)if(t===e[n])return n;return-1},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!n,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.Event_constructor("error"),this.title=e,this.message=t,this.data=n}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,n){var o=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{},i=o[e];return i&&this.removeEventListener(e,t,n),(i=o[e])?i.push(t):o[e]=[t],t},t.on=function(e,t,n,o,i,r){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),o&&e.remove()},r)},t.removeEventListener=function(e,t,n){var o=n?this._captureListeners:this._listeners;if(o){var i=o[e];if(i)for(var r=0,s=i.length;r<s;r++)if(i[r]==t){1==s?delete o[e]:i.splice(r,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t,n){if("string"==typeof e){var o=this._listeners;if(!(t||o&&o[e]))return!0;e=new createjs.Event(e,t,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(e){}if(e.bubbles&&this.parent){for(var i=this,r=[i];i.parent;)r.push(i=i.parent);for(var s=r.length,a=s-1;0<=a&&!e.propagationStopped;a--)r[a]._dispatchEvent(e,1+(0==a));for(a=1;a<s&&!e.propagationStopped;a++)r[a]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,o,i=t<=2?this._captureListeners:this._listeners;if(e&&i&&(o=i[e.type])&&(n=o.length)){try{e.currentTarget=this}catch(e){}try{e.eventPhase=0|t}catch(e){}e.removed=!1,o=o.slice();for(var r=0;r<n&&!e.immediatePropagationStopped;r++){var s=o[r];s.handleEvent?s.handleEvent(e):s(e),e.removed&&(this.off(e.type,s,1==t),e.removed=!1)}}2===t&&this._dispatchEvent(e,2.1)},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function x(e,l){function c(e){if(c[e]!==S)return c[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=c("json-stringify")&&c("json-parse");else{var n,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=l.stringify,r="function"==typeof i&&p;if(r){(n=function(){return 1}).toJSON=n;try{r="0"===i(0)&&"0"===i(new u)&&'""'==i(new d)&&i(E)===S&&i(S)===S&&i()===S&&"1"===i(n)&&"[1]"==i([n])&&"[null]"==i([S])&&"null"==i(null)&&"[null,null,null]"==i([S,E,null])&&i({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==o&&"1"===i(null,n)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new h(-1))}catch(e){r=!1}}t=r}if("json-parse"==e){var s=l.parse;if("function"==typeof s)try{if(0===s("0")&&!s(!1)){var a=5==(n=s(o)).a.length&&1===n.a[0];if(a){try{a=!s('"\t"')}catch(e){}if(a)try{a=1!==s("01")}catch(e){}if(a)try{a=1!==s("1.")}catch(e){}}}}catch(e){a=!1}t=a}}return c[e]=!!t}e=e||F.Object(),l=l||F.Object();var u=e.Number||F.Number,d=e.String||F.String,t=e.Object||F.Object,h=e.Date||F.Date,n=e.SyntaxError||F.SyntaxError,C=e.TypeError||F.TypeError,o=e.Math||F.Math,e=e.JSON||F.JSON;"object"==typeof e&&e&&(l.stringify=e.stringify,l.parse=e.parse);var A,T,S,t=t.prototype,E=t.toString,p=new h(-0xc782b5b800cec);try{p=-109252==p.getUTCFullYear()&&0===p.getUTCMonth()&&1===p.getUTCDate()&&10==p.getUTCHours()&&37==p.getUTCMinutes()&&6==p.getUTCSeconds()&&708==p.getUTCMilliseconds()}catch(e){}if(!c("json")){var I,i,k,g="[object Function]",O="[object Number]",w="[object String]",N="[object Array]",a=c("bug-string-char-index");p||(I=o.floor,i=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(e,t){return i[t]+365*(e-1970)+I((e-1969+(t=+(1<t)))/4)-I((e-1901+t)/100)+I((e-1601+t)/400)});if((A=t.hasOwnProperty)||(A=function(e){var n,t={};return A=(t.__proto__=null,t.__proto__={toString:1},t).toString!=E?function(e){var t=this.__proto__,e=e in(this.__proto__=null,this);return this.__proto__=t,e}:(n=t.constructor,function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,A.call(this,e)}),T=function(e,t){var n,s,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0;for(o in s=new n)A.call(s,o)&&i++;return n=s=null,(T=i?2==i?function(e,t){var n,o={},i=E.call(e)==g;for(n in e)i&&"prototype"==n||A.call(o,n)||!(o[n]=1)||!A.call(e,n)||t(n)}:function(e,t){var n,o,i=E.call(e)==g;for(n in e)i&&"prototype"==n||!A.call(e,n)||(o="constructor"===n)||t(n);(o||A.call(e,n="constructor"))&&t(n)}:(s=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(e,t){var n,o,i=E.call(e)==g,r=!i&&"function"!=typeof e.constructor&&P[typeof e.hasOwnProperty]&&e.hasOwnProperty||A;for(n in e)i&&"prototype"==n||!r.call(e,n)||t(n);for(o=s.length;n=s[--o];r.call(e,n)&&t(n));}))(e,t)},!c("json-stringify")){function R(e,t){return("000000"+(t||0)).slice(-e)}function L(e){for(var t='"',n=0,o=e.length,i=!a||10<o,r=i&&(a?e.split(""):e);n<o;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=f[s];break;default:if(s<32){t+="\\u00"+R(2,s.toString(16));break}t+=i?r[n]:e.charAt(n)}}return t+'"'}var f={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D=function(e,t,n,o,i,r,s){var a,l,c,u,d,h,p,g,f,m,v,_,b,y;try{a=t[e]}catch(e){}if("object"==typeof a&&a)if("[object Date]"!=(l=E.call(a))||A.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=O&&l!=w&&l!=N||A.call(a,"toJSON"))&&(a=a.toJSON(e));else if(-1/0<a&&a<1/0){if(k){for(d=I(a/864e5),c=I(d/365.2425)+1970-1;k(c+1,0)<=d;c++);for(u=I((d-k(c,0))/30.42);k(c,u+1)<=d;u++);d=1+d-k(c,u),h=I((b=(a%864e5+864e5)%864e5)/36e5)%24,p=I(b/6e4)%60,g=I(b/1e3)%60,b=b%1e3}else c=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),h=a.getUTCHours(),p=a.getUTCMinutes(),g=a.getUTCSeconds(),b=a.getUTCMilliseconds();a=(c<=0||1e4<=c?(c<0?"-":"+")+R(6,c<0?-c:c):R(4,c))+"-"+R(2,u+1)+"-"+R(2,d)+"T"+R(2,h)+":"+R(2,p)+":"+R(2,g)+"."+R(3,b)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if("[object Boolean]"==(l=E.call(a)))return""+a;if(l==O)return-1/0<a&&a<1/0?""+a:"null";if(l==w)return L(""+a);if("object"==typeof a){for(_=s.length;_--;)if(s[_]===a)throw C();if(s.push(a),f=[],b=r,r+=i,l==N){for(v=0,_=a.length;v<_;v++)m=D(v,a,n,o,i,r,s),f.push(m===S?"null":m);y=f.length?i?"[\n"+r+f.join(",\n"+r)+"\n"+b+"]":"["+f.join(",")+"]":"[]"}else T(o||a,function(e){var t=D(e,a,n,o,i,r,s);t!==S&&f.push(L(e)+":"+(i?" ":"")+t)}),y=f.length?i?"{\n"+r+f.join(",\n"+r)+"\n"+b+"}":"{"+f.join(",")+"}":"{}";return s.pop(),y}};l.stringify=function(e,t,n){var o,i,r,s;if(P[typeof t]&&t)if((s=E.call(t))==g)i=t;else if(s==N){r={};for(var a,l=0,c=t.length;l<c;a=t[l++],(s=E.call(a))!=w&&s!=O||(r[a]=1));}if(n)if((s=E.call(n))==O){if(0<(n-=n%1))for(o="",10<n&&(n=10);o.length<n;o+=" ");}else s==w&&(o=n.length<=10?n:n.slice(0,10));return D("",((a={})[""]=e,a),i,r,o,"",[])}}if(!c("json-parse")){function m(){throw v=_=null,n()}function r(){for(var e,t,n,o,i,r=_,s=r.length;v<s;)switch(i=r.charCodeAt(v)){case 9:case 10:case 13:case 32:v++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=a?r.charAt(v):r[v],v++,e;case 34:for(e="@",v++;v<s;)if((i=r.charCodeAt(v))<32)m();else if(92==i)switch(i=r.charCodeAt(++v)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=y[i],v++;break;case 117:for(t=++v,n=v+4;v<n;v++)48<=(i=r.charCodeAt(v))&&i<=57||97<=i&&i<=102||65<=i&&i<=70||m();e+=b("0x"+r.slice(t,v));break;default:m()}else{if(34==i)break;for(i=r.charCodeAt(v),t=v;32<=i&&92!=i&&34!=i;)i=r.charCodeAt(++v);e+=r.slice(t,v)}if(34==r.charCodeAt(v))return v++,e;m();default:if(t=v,45==i&&(o=!0,i=r.charCodeAt(++v)),48<=i&&i<=57){for(48==i&&(48<=(i=r.charCodeAt(v+1))&&i<=57)&&m(),o=!1;v<s&&(48<=(i=r.charCodeAt(v))&&i<=57);v++);if(46==r.charCodeAt(v)){for(n=++v;n<s&&(48<=(i=r.charCodeAt(n))&&i<=57);n++);n==v&&m(),v=n}if(101==(i=r.charCodeAt(v))||69==i){for(43!=(i=r.charCodeAt(++v))&&45!=i||v++,n=v;n<s&&(48<=(i=r.charCodeAt(n))&&i<=57);n++);n==v&&m(),v=n}return+r.slice(t,v)}if(o&&m(),"true"==r.slice(v,v+4))return v+=4,!0;if("false"==r.slice(v,v+5))return v+=5,!1;if("null"==r.slice(v,v+4))return v+=4,null;m()}return"$"}function s(e,t,n){n=B(e,t,n);n===S?delete e[t]:e[t]=n}var v,_,b=d.fromCharCode,y={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(e){var t,n;if("$"==e&&m(),"string"==typeof e){if("@"==(a?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=r());n=n||!0)n&&(","==e?"]"==(e=r())&&m():m()),","==e&&m(),t.push(M(e));return t}if("{"==e){for(t={};"}"!=(e=r());n=n||!0)n&&(","==e?"}"==(e=r())&&m():m()),","!=e&&"string"==typeof e&&"@"==(a?e.charAt(0):e[0])&&":"==r()||m(),t[e.slice(1)]=M(r());return t}m()}return e},B=function(e,t,n){var o,i=e[t];if("object"==typeof i&&i)if(E.call(i)==N)for(o=i.length;o--;)s(i,o,n);else T(i,function(e){s(i,e,n)});return n.call(e,t,i)};l.parse=function(e,t){var n;return v=0,_=""+e,n=M(r()),"$"!=r()&&m(),v=_=null,t&&E.call(t)==g?B(((e={})[""]=n,e),"",t):n}}}return l.runInContext=x,l}var e="function"==typeof define&&define.amd,P={function:!0,object:!0},t=P[typeof exports]&&exports&&!exports.nodeType&&exports,F=P[typeof window]&&window||this,n=t&&P[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!n||n.global!==n&&n.window!==n&&n.self!==n||(F=n),t&&!e)x(F,t);else{var o=F.JSON,i=F.JSON3,r=!1,s=x(F,F.JSON3={noConflict:function(){return r||(r=!0,F.JSON=o,F.JSON3=i,o=i=null),s}});F.JSON={parse:s.parse,stringify:s.stringify}}e&&define(function(){return s})}.call(this),function(){var e={a:function(){return e.el("a")},svg:function(){return e.el("svg")},object:function(){return e.el("object")},image:function(){return e.el("image")},img:function(){return e.el("img")},style:function(){return e.el("style")},link:function(){return e.el("link")},script:function(){return e.el("script")},audio:function(){return e.el("audio")},video:function(){return e.el("video")},text:function(e){return document.createTextNode(e)},el:function(e){return document.createElement(e)}};createjs.Elements=e}(),function(){var r={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[.\/]*?\//i,EXTENSION_PATT:/\/?[^\/]+\.(\w{1,5})$/i,parseURI:function(e){var t={absolute:!1,relative:!1,protocol:null,hostname:null,port:null,pathname:null,search:null,hash:null,host:null};if(null==e)return t;var n,o=createjs.Elements.a();o.href=e;for(n in t)n in o&&(t[n]=o[n]);var i=e.indexOf("?");-1<i&&(e=e.substr(0,i));return r.ABSOLUTE_PATT.test(e)?t.absolute=!0:r.RELATIVE_PATT.test(e)&&(t.relative=!0),(e=e.match(r.EXTENSION_PATT))&&(t.extension=e[1].toLowerCase()),t},formatQueryString:function(e,t){if(null==e)throw new Error("You must specify data.");var n,o=[];for(n in e)o.push(n+"="+escape(e[n]));return t&&(o=o.concat(t)),o.join("&")},buildURI:function(e,t){if(null==t)return e;var n,o=[],i=e.indexOf("?");-1!=i&&(n=e.slice(i+1),o=o.concat(n.split("&")));return-1!=i?e.slice(0,i)+"?"+this.formatQueryString(t,o):e+"?"+this.formatQueryString(t,o)},isCrossDomain:function(e){var t=createjs.Elements.a();t.href=e.src;e=createjs.Elements.a();e.href=location.href;return""!=t.hostname&&(t.port!=e.port||t.protocol!=e.protocol||t.hostname!=e.hostname)},isLocal:function(e){var t=createjs.Elements.a();return t.href=e.src,""==t.hostname&&"file:"==t.protocol}};createjs.URLUtils=r}(),function(){var n={container:null,appendToHead:function(e){n.getHead().appendChild(e)},appendToBody:function(e){if(null==n.container){n.container=document.createElement("div"),n.container.id="preloadjs-container";var t=n.container.style;t.visibility="hidden",t.position="absolute",t.width=n.container.style.height="10px",t.overflow="hidden",t.transform=t.msTransform=t.webkitTransform=t.oTransform="translate(-10px, -10px)",n.getBody().appendChild(n.container)}n.container.appendChild(e)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]},removeChild:function(e){e.parent&&e.parent.removeChild(e)},isImageTag:function(e){return e instanceof HTMLImageElement},isAudioTag:function(e){return!!window.HTMLAudioElement&&e instanceof HTMLAudioElement},isVideoTag:function(e){return!!window.HTMLVideoElement&&e instanceof HTMLVideoElement}};createjs.DomUtils=n}(),function(){var e={parseXML:function(e){var t=null;try{window.DOMParser&&(t=(new DOMParser).parseFromString(e,"text/xml"))}catch(e){}if(!t)try{(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)}catch(e){t=null}return t},parseJSON:function(e){if(null==e)return null;try{return JSON.parse(e)}catch(e){throw e}}};createjs.DataUtils=e}(),this.createjs=this.createjs||{},function(){var e={BINARY:"binary",CSS:"css",FONT:"font",FONTCSS:"fontcss",IMAGE:"image",JAVASCRIPT:"javascript",JSON:"json",JSONP:"jsonp",MANIFEST:"manifest",SOUND:"sound",VIDEO:"video",SPRITESHEET:"spritesheet",SVG:"svg",TEXT:"text",XML:"xml"};createjs.Types=e}(),this.createjs=this.createjs||{},function(){var e={POST:"POST",GET:"GET"};createjs.Methods=e}(),this.createjs=this.createjs||{},function(){"use strict";function n(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.Methods.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=o.LOAD_TIMEOUT_DEFAULT}var e=n.prototype={},o=n;o.LOAD_TIMEOUT_DEFAULT=8e3,o.create=function(e){if("string"==typeof e){var t=new n;return t.src=e,t}if(e instanceof o)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=o.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=o}(),function(){var e={isBinary:function(e){switch(e){case createjs.Types.IMAGE:case createjs.Types.BINARY:return!0;default:return!1}},isText:function(e){switch(e){case createjs.Types.TEXT:case createjs.Types.JSON:case createjs.Types.MANIFEST:case createjs.Types.XML:case createjs.Types.CSS:case createjs.Types.SVG:case createjs.Types.JAVASCRIPT:case createjs.Types.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(e){if(null==e)return createjs.Types.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.Types.IMAGE;case"ogg":case"mp3":case"webm":return createjs.Types.SOUND;case"mp4":case"webm":case"ts":return createjs.Types.VIDEO;case"json":return createjs.Types.JSON;case"xml":return createjs.Types.XML;case"css":return createjs.Types.CSS;case"js":return createjs.Types.JAVASCRIPT;case"svg":return createjs.Types.SVG;default:return createjs.Types.TEXT}}};createjs.RequestUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=n,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),n=e;try{Object.defineProperties(n,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch(e){}t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,!isNaN(this.progress)&&1/0!=this.progress||(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this);t instanceof Function?t.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+e.type.toUpperCase()+"_ERROR"))}},t._resultFormatSuccess=function(e){this._result=e,this._sendComplete()},t._resultFormatFailed=function(e){this._sendError(e)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(e,t,n),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._updateXHR=function(e){e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var t=window.URL||window.webkitURL,n=e.getResult(!0);e.getTag().src=t.createObjectURL(n)}return e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this._item=e}var t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(createjs.DomUtils.appendToBody(this._tag),this._addedToDOM=!0)},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;"loaded"!=e.readyState&&"complete"!=e.readyState||this._handleTagComplete()},t._handleError=function(){this._clean(),this.dispatchEvent("error")},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this.dispatchEvent("complete")},t._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=n,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){var e=createjs.proxy(this._handleStalled,this);this._stalledCallback=e;var t=createjs.proxy(this._handleProgress,this);this._handleProgress=t,this._tag.addEventListener("stalled",e),this._tag.addEventListener("progress",t),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;"loaded"!=e.readyState&&"complete"!=e.readyState||this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(0<e.loaded&&0==e.total)){e=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(e)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values?this._request.send(createjs.URLUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}}else this._handleError()},t.setResponseType=function(e){"blob"===e&&(e=window.URL?"blob":"arraybuffer",this._responseType=e),this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(0<e.loaded&&0==e.total)){e=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(e)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var t=this._checkError();if(t)this._handleError(t);else{if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(e){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===e.name&&window.BlobBuilder){t=new BlobBuilder;t.append(this._response),this._response=t.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);return 400<=e&&e<=599?new Error(e):0==e&&/^https?:/.test(location.protocol)?new Error(0):null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.URLUtils.isCrossDomain(e),n={},o=null;if(window.XMLHttpRequest)o=new XMLHttpRequest,t&&void 0===o.withCredentials&&window.XDomainRequest&&(o=new XDomainRequest);else{for(var i=0,r=s.ACTIVEX_VERSIONS.length;i<r;i++){var a=s.ACTIVEX_VERSIONS[i];try{o=new ActiveXObject(a);break}catch(e){}}if(null==o)return!1}null==e.mimeType&&createjs.RequestUtils.isText(e.type)&&(e.mimeType="text/plain; charset=utf-8"),e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof o.responseType?2:1;var l=e.method==createjs.Methods.GET?createjs.URLUtils.buildURI(e.src,e.values):e.src;if(o.open(e.method||createjs.Methods.GET,l,!0),t&&o instanceof XMLHttpRequest&&1==this._xhrLevel&&(n.Origin=location.origin),e.values&&e.method==createjs.Methods.POST&&(n["Content-Type"]="application/x-www-form-urlencoded"),t||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var c in e.headers)n[c]=e.headers[c];for(c in n)o.setRequestHeader(c,n[c]);return o instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(o.withCredentials=e.withCredentials),this._request=o,!0},t._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,n){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.FontLoader,createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(e,t,n)}var t=createjs.extend(e,createjs.AbstractLoader),l=e;try{Object.defineProperties(l,{POST:{get:createjs.deprecate(function(){return createjs.Methods.POST},"AbstractLoader.POST")},GET:{get:createjs.deprecate(function(){return createjs.Methods.GET},"AbstractLoader.GET")},BINARY:{get:createjs.deprecate(function(){return createjs.Types.BINARY},"AbstractLoader.BINARY")},CSS:{get:createjs.deprecate(function(){return createjs.Types.CSS},"AbstractLoader.CSS")},FONT:{get:createjs.deprecate(function(){return createjs.Types.FONT},"AbstractLoader.FONT")},FONTCSS:{get:createjs.deprecate(function(){return createjs.Types.FONTCSS},"AbstractLoader.FONTCSS")},IMAGE:{get:createjs.deprecate(function(){return createjs.Types.IMAGE},"AbstractLoader.IMAGE")},JAVASCRIPT:{get:createjs.deprecate(function(){return createjs.Types.JAVASCRIPT},"AbstractLoader.JAVASCRIPT")},JSON:{get:createjs.deprecate(function(){return createjs.Types.JSON},"AbstractLoader.JSON")},JSONP:{get:createjs.deprecate(function(){return createjs.Types.JSONP},"AbstractLoader.JSONP")},MANIFEST:{get:createjs.deprecate(function(){return createjs.Types.MANIFEST},"AbstractLoader.MANIFEST")},SOUND:{get:createjs.deprecate(function(){return createjs.Types.SOUND},"AbstractLoader.SOUND")},VIDEO:{get:createjs.deprecate(function(){return createjs.Types.VIDEO},"AbstractLoader.VIDEO")},SPRITESHEET:{get:createjs.deprecate(function(){return createjs.Types.SPRITESHEET},"AbstractLoader.SPRITESHEET")},SVG:{get:createjs.deprecate(function(){return createjs.Types.SVG},"AbstractLoader.SVG")},TEXT:{get:createjs.deprecate(function(){return createjs.Types.TEXT},"AbstractLoader.TEXT")},XML:{get:createjs.deprecate(function(){return createjs.Types.XML},"AbstractLoader.XML")}})}catch(e){}t.init=function(e,t,n){this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(e),this._paused=!1,this._basePath=t,this._crossOrigin=n,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},t.registerLoader=function(e){if(!e||!e.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(e))throw new Error("loader already exists.");this._availableLoaders.unshift(e)},t.unregisterLoader=function(e){e=this._availableLoaders.indexOf(e);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},t.setPreferXHR=function(e){return this.preferXHR=0!=e&&null!=window.XMLHttpRequest,this.preferXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(e&&!Array.isArray(e))t=[e];else if(e)t=e;else if(0<arguments.length)return;var n=!1;if(t){for(;t.length;){for(var o=t.pop(),i=this.getResult(o),r=this._loadQueue.length-1;0<=r;r--)if((s=this._loadQueue[r].getItem()).id==o||s.src==o){this._loadQueue.splice(r,1)[0].cancel();break}for(r=this._loadQueueBackup.length-1;0<=r;r--)if((s=this._loadQueueBackup[r].getItem()).id==o||s.src==o){this._loadQueueBackup.splice(r,1)[0].cancel();break}if(i)this._disposeItem(this.getItem(o));else for(var r=this._currentLoads.length-1;0<=r;r--){var s=this._currentLoads[r].getItem();if(s.id==o||s.src==o){this._currentLoads.splice(r,1)[0].cancel(),n=!0;break}}}n&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);for(var t=[],n=0,o=this._loadQueueBackup.length;n<o;n++)t.push(this._loadQueueBackup[n].getItem());this.loadManifest(t,!1)},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){this._plugins.push(e);var t=e.getPreloadHandlers();if(t.scope=e,null!=t.types)for(var n=0,o=t.types.length;n<o;n++)this._typeCallbacks[t.types[n]]=t;if(null!=t.extensions)for(n=0,o=t.extensions.length;n<o;n++)this._extensionCallbacks[t.extensions[n]]=t}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&0<this._loadQueue.length&&this._loadNext()},t.loadFile=function(e,t,n){if(null!=e)this._addItem(e,null,n),this.setPaused(!1===t);else{t=new createjs.ErrorEvent("PRELOAD_NO_FILE");this._sendError(t)}},t.loadManifest=function(e,t,n){var o=null,i=null;if(Array.isArray(e)){if(0==e.length){var r=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(r)}o=e}else if("string"==typeof e)o=[{src:e,type:l.MANIFEST}];else{if("object"!=typeof e){r=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(r)}if(void 0!==e.src){if(null==e.type)e.type=l.MANIFEST;else if(e.type!=l.MANIFEST){r=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(r)}o=[e]}else void 0!==e.manifest&&(o=e.manifest,i=e.path)}for(var s=0,a=o.length;s<a;s++)this._addItem(o[s],i,n);this.setPaused(!1===t)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){e=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==e)return null;e=e.id;return(t&&this._loadedRawResults[e]?this._loadedRawResults:this._loadedResults)[e]},t.getItems=function(e){var t,n=[];for(t in this._loadItemsById){var o=this._loadItemsById[t],i=this.getResult(t);!0===e&&null==i||n.push({item:o,result:i,rawResult:this.getResult(t,!0)})}return n},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},t._addItem=function(e,t,n){t=this._createLoadItem(e,t,n);if(null!=t){n=this._createLoader(t);null!=n&&("plugins"in n&&(n.plugins=this._plugins),t._loader=n,this._loadQueue.push(n),this._loadQueueBackup.push(n),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&t.type==createjs.Types.JAVASCRIPT||!0===t.maintainOrder)&&(this._scriptOrder.push(t),this._loadedScripts.push(null)))}},t._createLoadItem=function(e,t,n){var o=createjs.LoadItem.create(e);if(null==o)return null;e="",n=n||this._basePath;if(o.src instanceof Object){if(!o.type)return null;if(t){e=t;var i=createjs.URLUtils.parseURI(t);null==n||i.absolute||i.relative||(e=n+e)}else null!=n&&(e=n)}else{var r=createjs.URLUtils.parseURI(o.src);r.extension&&(o.ext=r.extension),null==o.type&&(o.type=createjs.RequestUtils.getTypeByExtension(o.ext));var s=o.src;if(!r.absolute&&!r.relative)if(t){e=t;i=createjs.URLUtils.parseURI(t),s=t+s;null==n||i.absolute||i.relative||(e=n+e)}else null!=n&&(e=n);o.src=e+o.src}o.path=e,void 0!==o.id&&null!==o.id&&""!==o.id||(o.id=s);s=this._typeCallbacks[o.type]||this._extensionCallbacks[o.ext];if(s){s=s.callback.call(s.scope,o,this);if(!1===s)return null;!0===s||null!=s&&(o._loader=s),null!=(r=createjs.URLUtils.parseURI(o.src)).extension&&(o.ext=r.extension)}return this._loadItemsById[o.id]=o,null==(this._loadItemsBySrc[o.src]=o).crossOrigin&&(o.crossOrigin=this._crossOrigin),o},t._createLoader=function(e){if(null!=e._loader)return e._loader;for(var t=this.preferXHR,n=0;n<this._availableLoaders.length;n++){var o=this._availableLoaders[n];if(o&&o.canLoadItem(e))return new o(e,t)}return null},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];this._canStartLoad(t)&&(this._loadQueue.splice(e,1),e--,this._loadItem(t))}}},t._loadItem=function(e){e.on("fileload",this._handleFileLoad,this),e.on("progress",this._handleProgress,this),e.on("complete",this._handleFileComplete,this),e.on("error",this._handleError,this),e.on("fileerror",this._handleFileError,this),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleFileError=function(e){e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.item);this._sendError(e)},t._handleError=function(e){var t=e.target;this._numItemsLoaded++,this._finishOrderedItem(t,!0),this._updateProgress();e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.getItem());this._sendError(e),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(t),this._cleanLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,n=t.getItem(),o=t.getResult();this._loadedResults[n.id]=o;e=t.getResult(!0);null!=e&&e!==o&&(this._loadedRawResults[n.id]=e),this._saveLoadedItems(t),this._removeLoadItem(t),this._finishOrderedItem(t)||this._processFinishedLoad(n,t),this._cleanLoadItem(t)},t._saveLoadedItems=function(e){var t=e.getLoadedItems();if(null!==t)for(var n=0;n<t.length;n++){var o=t[n].item;this._loadItemsBySrc[o.src]=o,this._loadItemsById[o.id]=o,this._loadedResults[o.id]=t[n].result,this._loadedRawResults[o.id]=t[n].rawResult}},t._finishOrderedItem=function(e,t){var n=e.getItem();if(this.maintainScriptOrder&&n.type==createjs.Types.JAVASCRIPT||n.maintainOrder){e instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);e=createjs.indexOf(this._scriptOrder,n);return-1!=e&&(this._loadedScripts[e]=!0===t||n,this._checkScriptLoadOrder(),!0)}return!1},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;t<e;t++){var n=this._loadedScripts[t];if(null===n)break;if(!0!==n){var o=this._loadedResults[n.id];n.type==createjs.Types.JAVASCRIPT&&createjs.DomUtils.appendToHead(o);o=n._loader;this._processFinishedLoad(n,o),this._loadedScripts[t]=!0}}},t._processFinishedLoad=function(e,t){if(this._numItemsLoaded++,!this.maintainScriptOrder&&e.type==createjs.Types.JAVASCRIPT){var n=t.getTag();createjs.DomUtils.appendToHead(n)}this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._canStartLoad=function(e){if(!this.maintainScriptOrder||e.preferXHR)return!0;e=e.getItem();if(e.type!=createjs.Types.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var t=this._scriptOrder.indexOf(e),n=0;n<t;){if(null==this._loadedScripts[n])return!1;n++}return this._currentlyLoadingScript=!0},t._removeLoadItem=function(e){for(var t=this._currentLoads.length,n=0;n<t;n++)if(this._currentLoads[n]==e){this._currentLoads.splice(n,1);break}},t._cleanLoadItem=function(e){e=e.getItem();e&&delete e._loader},t._handleProgress=function(e){e=e.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(0<t){for(var n=0,o=0,i=this._currentLoads.length;o<i;o++)n+=this._currentLoads[o].progress;e+=n/t*(t/this._numItems)}this._lastProgress!=e&&(this._sendProgress(e),this._lastProgress=e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._sendFileProgress=function(e,t){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var n=new createjs.Event("fileprogress");n.progress=t,n.loaded=t,n.total=1,n.item=e,this.dispatchEvent(n)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()&&!this._paused){var n=new createjs.Event("fileload");n.loader=t,n.item=e,n.result=this._loadedResults[e.id],n.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(n),this.hasEventListener("fileload")&&this.dispatchEvent(n)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.Types.TEXT)}(createjs.extend(e,createjs.AbstractLoader),e).canLoadItem=function(e){return e.type==createjs.Types.TEXT},createjs.TextLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.Types.BINARY),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.BINARY},t._updateXHR=function(e){e.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=t?createjs.Elements.style():createjs.Elements.link(),this._tag.rel="stylesheet",this._tag.type="text/css"}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.CSS},t._formatResult=function(e){if(this._preferXHR){var t=e.getTag();if(t.styleSheet)t.styleSheet.cssText=e.getResult(!0);else{e=createjs.Elements.text(e.getResult(!0));t.appendChild(e)}}else t=this._tag;return createjs.DomUtils.appendToHead(t),t},createjs.CSSLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function l(e,t){this.AbstractLoader_constructor(e,t,e.type),this._faces={},this._watched=[],this._count=0,this._watchInterval=null,this._loadTimeout=null,this._injectCSS=void 0===e.injectCSS||e.injectCSS,this.dispatchEvent("initialize")}var e=createjs.extend(l,createjs.AbstractLoader);l.canLoadItem=function(e){return e.type==createjs.Types.FONT||e.type==createjs.Types.FONTCSS},l.sampleText="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ",l._ctx=document.createElement("canvas").getContext("2d"),l._referenceFonts=["serif","monospace"],l.WEIGHT_REGEX=/[- ._]*(thin|normal|book|regular|medium|black|heavy|[1-9]00|(?:extra|ultra|semi|demi)?[- ._]*(?:light|bold))[- ._]*/gi,l.STYLE_REGEX=/[- ._]*(italic|oblique)[- ._]*/gi,l.FONT_FORMAT={woff2:"woff2",woff:"woff",ttf:"truetype",otf:"truetype"},l.FONT_WEIGHT={thin:100,extralight:200,ultralight:200,light:300,semilight:300,demilight:300,book:"normal",regular:"normal",semibold:600,demibold:600,extrabold:800,ultrabold:800,black:900,heavy:900},l.WATCH_DURATION=10,e.load=function(){if(this.type==createjs.Types.FONTCSS){if(!this._watchCSS())return void this.AbstractLoader_load()}else if(this._item.src instanceof Array)this._watchFontArray();else{var e=this._defFromSrc(this._item.src);this._watchFont(e),this._injectStyleTag(this._cssFromDef(e))}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this.dispatchEvent("loadstart")},e._handleTimeout=function(){this._stopWatching(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT"))},e._createRequest=function(){return this._request},e.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response,this._result=!0,this._parseCSS(this._rawResult);break;case"error":this._stopWatching(),this.AbstractLoader_handleEvent(e)}},e._watchCSS=function(){var e=this._item.src;return e instanceof HTMLStyleElement&&(this._injectCSS&&!e.parentNode&&(document.head||document.getElementsByTagName("head")[0]).appendChild(e),this._injectCSS=!1,e="\n"+e.textContent),-1!==e.search(/\n|\r|@font-face/i)?(this._parseCSS(e),!0):(this._request=new createjs.XHRRequest(this._item),!1)},e._parseCSS=function(e){for(var t=/@font-face\s*\{([^}]+)}/g;;){var n=t.exec(e);if(!n)break;this._watchFont(this._parseFontFace(n[1]))}this._injectStyleTag(e)},e._watchFontArray=function(){for(var e=this._item.src,t="",n=e.length-1;0<=n;n--){var o=e[n],o="string"==typeof o?this._defFromSrc(o):this._defFromObj(o);this._watchFont(o),t+=this._cssFromDef(o)+"\n"}this._injectStyleTag(t)},e._injectStyleTag=function(e){if(this._injectCSS){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}},e._parseFontFace=function(e){var t=this._getCSSValue(e,"font-family"),n=this._getCSSValue(e,"src");return t&&n?this._defFromObj({family:t,src:n,style:this._getCSSValue(e,"font-style"),weight:this._getCSSValue(e,"font-weight")}):null},e._watchFont=function(e){e&&!this._faces[e.id]&&(this._faces[e.id]=e,this._watched.push(e),this._count++,this._calculateReferenceSizes(e),this._startWatching())},e._startWatching=function(){null==this._watchInterval&&(this._watchInterval=setInterval(createjs.proxy(this._watch,this),l.WATCH_DURATION))},e._stopWatching=function(){clearInterval(this._watchInterval),clearTimeout(this._loadTimeout),this._watchInterval=null},e._watch=function(){for(var e=this._watched,t=l._referenceFonts,n=e.length,o=n-1;0<=o;o--)for(var i=e[o],r=i.refs,s=r.length-1;0<=s;s--)if(this._getTextWidth(i.family+","+t[s],i.weight,i.style)!=r[s]){var a=new createjs.Event("fileload");i.type="font-family",a.item=i,this.dispatchEvent(a),e.splice(o,1);break}if(n!==e.length){a=new createjs.ProgressEvent(this._count-e.length,this._count);this.dispatchEvent(a)}0===n&&(this._stopWatching(),this._sendComplete())},e._calculateReferenceSizes=function(e){for(var t=l._referenceFonts,n=e.refs=[],o=0;o<t.length;o++)n[o]=this._getTextWidth(t[o],e.weight,e.style)},e._defFromSrc=function(e){var t=/[- ._]+/g,n=e,o=null,i=n.search(/[?#]/);-1!==i&&(n=n.substr(0,i)),-1!==(i=n.lastIndexOf("."))&&(o=n.substr(i+1),n=n.substr(0,i)),-1!==(i=n.lastIndexOf("/"))&&(n=n.substr(i+1));var r=n,s=r.match(l.WEIGHT_REGEX);s&&(s=s[0],r=r.replace(s,""),s=s.replace(t,"").toLowerCase());i=n.match(l.STYLE_REGEX);i&&(r=r.replace(i[0],""),i="italic"),r=r.replace(t,"");e="local('"+n.replace(t," ")+"'), url('"+e+"')",o=l.FONT_FORMAT[o];return o&&(e+=" format('"+o+"')"),this._defFromObj({family:r,weight:l.FONT_WEIGHT[s]||s,style:i,src:e})},e._defFromObj=function(e){e={family:e.family,src:e.src,style:e.style||"normal",weight:e.weight||"normal"};return e.id=e.family+";"+e.style+";"+e.weight,e},e._cssFromDef=function(e){return"@font-face {\n\tfont-family: '"+e.family+"';\n\tfont-style: "+e.style+";\n\tfont-weight: "+e.weight+";\n\tsrc: "+e.src+";\n}"},e._getTextWidth=function(e,t,n){var o=l._ctx;return o.font=n+" "+t+" 72px "+e,o.measureText(l.sampleText).width},e._getCSSValue=function(e,t){e=new RegExp(t+":s*([^;}]+?)s*[;}]").exec(e);return e&&e[1]?e[1]:null},createjs.FontLoader=createjs.promote(l,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.DomUtils.isImageTag(e)?this._tag=e:createjs.DomUtils.isImageTag(e.src)?this._tag=e.src:createjs.DomUtils.isImageTag(e.tag)&&(this._tag=e.tag),null!=this._tag?this._preferXHR=!1:this._tag=createjs.Elements.img(),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.IMAGE},t.load=function(){if(""!=this._tag.src&&this._tag.complete)this._sendComplete();else{var e=this._item.crossOrigin;1==e&&(e="Anonymous"),null==e||createjs.URLUtils.isLocal(this._item)||(this._tag.crossOrigin=e),this.AbstractLoader_load()}},t._updateXHR=function(e){e.loader.mimeType="text/plain; charset=x-user-defined-binary",e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(){return this._formatImage},t._formatImage=function(e,t){var n=this._tag,o=window.URL||window.webkitURL;if(this._preferXHR)if(o){o=o.createObjectURL(this.getResult(!0));n.src=o,n.addEventListener("load",this._cleanUpURL,!1),n.addEventListener("error",this._cleanUpURL,!1)}else n.src=this._item.src;n.complete?e(n):(n.onload=createjs.proxy(function(){e(this._tag),n.onload=n.onerror=null},this),n.onerror=createjs.proxy(function(e){t(new createjs.ErrorEvent("IMAGE_FORMAT",null,e)),n.onload=n.onerror=null},this))},t._cleanUpURL=function(e){(window.URL||window.webkitURL).revokeObjectURL(e.target.src)},createjs.ImageLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(createjs.Elements.script())}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.JAVASCRIPT},t._formatResult=function(e){var t=e.getTag();return this._preferXHR&&(t.text=e.getResult(!0)),t},createjs.JavaScriptLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.Types.JSON),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.JSON},t._formatResult=function(e){var t=null;try{t=createjs.DataUtils.parseJSON(e.getResult(!0))}catch(e){var n=new createjs.ErrorEvent("JSON_FORMAT",null,e);return this._sendError(n),e}return t},createjs.JSONLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!1,createjs.Types.JSONP),this.setTag(createjs.Elements.script()),this.getTag().type="text/javascript"}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.JSONP},t.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},t.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),createjs.DomUtils.appendToBody(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},t._handleLoad=function(e){this._result=this._rawResult=e,this._sendComplete(),this._dispose()},t._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},t._dispose=function(){createjs.DomUtils.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.MANIFEST),this.plugins=null,this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.MANIFEST_PROGRESS=.25,n.canLoadItem=function(e){return e.type==createjs.Types.MANIFEST},t.load=function(){this.AbstractLoader_load()},t._createRequest=function(){var e=this._item.callback;this._request=new(null!=e?createjs.JSONPLoader:createjs.JSONLoader)(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(n.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=n.MANIFEST_PROGRESS,this.progress=e.loaded/e.total,!isNaN(this.progress)&&1/0!=this.progress||(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},t._loadManifest=function(e){if(e&&e.manifest){var t=this._manifestQueue=new createjs.LoadQueue(this._preferXHR);t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("complete",this._handleManifestComplete,this,!0),t.on("error",this._handleManifestError,this,!0);for(var n=0,o=this.plugins.length;n<o;n++)t.installPlugin(this.plugins[n]);t.loadManifest(e)}else this._sendComplete()},t._handleManifestFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-n.MANIFEST_PROGRESS)+n.MANIFEST_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.ManifestLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.Types.SOUND),createjs.DomUtils.isAudioTag(e)||createjs.DomUtils.isAudioTag(e.src)?this._tag=e:createjs.DomUtils.isAudioTag(e.tag)&&(this._tag=createjs.DomUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader);e.canLoadItem=function(e){return e.type==createjs.Types.SOUND},t._createTag=function(e){var t=createjs.Elements.audio();return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.Types.VIDEO),createjs.DomUtils.isVideoTag(e)||createjs.DomUtils.isVideoTag(e.src)?(this.setTag(createjs.DomUtils.isVideoTag(e)?e:e.src),this._preferXHR=!1):this.setTag(this._createTag())}var t=e;createjs.extend(e,createjs.AbstractMediaLoader)._createTag=function(){return createjs.Elements.video()},t.canLoadItem=function(e){return e.type==createjs.Types.VIDEO},createjs.VideoLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.SPRITESHEET),this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),n=e;n.SPRITESHEET_PROGRESS=.25,n.canLoadItem=function(e){return e.type==createjs.Types.SPRITESHEET},t.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},t._createRequest=function(){var e=this._item.callback;this._request=new(null!=e?createjs.JSONPLoader:createjs.JSONLoader)(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(n.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=n.SPRITESHEET_PROGRESS,this.progress=e.loaded/e.total,!isNaN(this.progress)&&1/0!=this.progress||(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t._loadManifest=function(e){if(e&&e.images){var t=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);t.on("complete",this._handleManifestComplete,this,!0),t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("error",this._handleManifestError,this,!0),t.loadManifest(e.images)}},t._handleManifestFileLoad=function(e){var t=e.result;if(null!=t){var n=this.getResult().images,e=n.indexOf(e.item.src);n[e]=t}},t._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-n.SPRITESHEET_PROGRESS)+n.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.SpriteSheetLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.Types.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",t?this.setTag(createjs.Elements.svg()):(this.setTag(createjs.Elements.object()),this.getTag().type="image/svg+xml")}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.SVG},t._formatResult=function(e){var t=createjs.DataUtils.parseXML(e.getResult(!0)),e=e.getTag();if(!this._preferXHR&&document.body.contains(e)&&document.body.removeChild(e),null==t.documentElement)return t;t=t.documentElement;return document.importNode&&(t=document.importNode(t,!0)),e.appendChild(t),e},createjs.SVGLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.Types.XML),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader);e.canLoadItem=function(e){return e.type==createjs.Types.XML},t._formatResult=function(e){return createjs.DataUtils.parseXML(e.getResult(!0))},createjs.XMLLoader=createjs.promote(e,"AbstractLoader")}();!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).interact=e()}(function(){var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.init=e,h.getWindow=function(e){return(0,t.default)(e)?e:(e.ownerDocument||e).defaultView||o.window};var n=h.window=h.realWindow=void 0;h.realWindow=n;var o=void 0;function e(e){var t=(h.realWindow=n=e).document.createTextNode("");t.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(t)===t&&(e=e.wrap(e)),h.window=o=e}h.window=o,"undefined"!=typeof window&&window&&e(window);var S={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(S,"__esModule",{value:!0}),S.default=void 0;function r(e){return!!e&&"object"===i(e)}function s(e){return"function"==typeof e}var a={window:function(e){return e===h.window||(0,t.default)(e)},docFrag:function(e){return r(e)&&11===e.nodeType},object:r,func:s,number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==i(e))return!1;var t=h.getWindow(e)||h.window;return/object|function/.test(i(t.Element))?e instanceof t.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return r(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return r(e)&&void 0!==e.length&&s(e.splice)}};S.default=a;var l={};function c(e){var t=e.interaction;if("drag"===t.prepared.name){e=t.prepared.axis;"x"===e?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===e&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function u(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){e=n.prepared.axis;if("x"===e||"y"===e){e="x"===e?"y":"x";t.page[e]=n.coords.start.page[e],t.client[e]=n.coords.start.client[e],t.delta[e]=0}}}Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var d={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,e=e.defaults;n.prototype.draggable=d.draggable,t.map.drag=d,t.methodDict.drag="draggable",e.actions.drag=d.defaults},listeners:{"interactions:before-action-move":c,"interactions:action-resume":c,"interactions:action-move":u,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,o=e.buttons,i=n.options.drag;if(i&&i.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(o&n.options.drag.mouseButtons)))return!(e.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis})}},draggable:function(e){return S.default.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):S.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:c,move:u,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}};l.default=d;var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=void 0;var g={init:function(e){g.document=e.document,g.DocumentFragment=e.DocumentFragment||f,g.SVGElement=e.SVGElement||f,g.SVGSVGElement=e.SVGSVGElement||f,g.SVGElementInstance=e.SVGElementInstance||f,g.Element=e.Element||f,g.HTMLElement=e.HTMLElement||g.Element,g.Event=e.Event,g.Touch=e.Touch||f,g.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function f(){}p.default=g;var y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var m={init:function(e){var t=p.default.Element,n=h.window.navigator;m.supportsTouch="ontouchstart"in e||S.default.func(e.DocumentTouch)&&p.default.document instanceof e.DocumentTouch,m.supportsPointerEvent=!1!==n.pointerEnabled&&!!p.default.PointerEvent,m.isIOS=/iP(hone|od|ad)/.test(n.platform),m.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),m.isIe9=/MSIE 9/.test(n.userAgent),m.isOperaMobile="Opera"===n.appName&&m.supportsTouch&&/Presto/.test(n.userAgent),m.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",m.pEventTypes=m.supportsPointerEvent?p.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,m.wheelEvent="onmousewheel"in p.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null};y.default=m;var b={};function v(e){var t=e.parentNode;if(S.default.docFrag(t)){for(;(t=t.host)&&S.default.docFrag(t););return t}return t}function _(e,t){return h.window!==h.realWindow&&(t=t.replace(/\/deep\//g," ")),e[y.default.prefixedMatchesSelector](t)}Object.defineProperty(b,"__esModule",{value:!0}),b.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},b.closest=function(e,t){for(;S.default.element(e);){if(_(e,t))return e;e=v(e)}return null},b.parentNode=v,b.matchesSelector=_,b.indexOfDeepestElement=function(e){for(var t,n=[],o=0;o<e.length;o++){var i=e[o],r=e[t];if(i&&o!==t)if(r){var s=C(i),a=C(r);if(s!==i.ownerDocument)if(a!==i.ownerDocument)if(s!==a){n=n.length?n:A(r);s=void 0;if(r instanceof p.default.HTMLElement&&i instanceof p.default.SVGElement&&!(i instanceof p.default.SVGSVGElement)){if(i===a)continue;s=i.ownerSVGElement}else s=i;for(var l=A(s,r.ownerDocument),c=0;l[c]&&l[c]===n[c];)c++;for(var u=[l[c-1],l[c],n[c]],d=u[0].lastChild;d;){if(d===u[1]){t=o,n=l;break}if(d===u[2])break;d=d.previousSibling}}else i=i,r=r,(parseInt(h.getWindow(i).getComputedStyle(i).zIndex,10)||0)>=(parseInt(h.getWindow(r).getComputedStyle(r).zIndex,10)||0)&&(t=o);else t=o}else t=o}return t},b.matchesUpTo=function(e,t,n){for(;S.default.element(e);){if(_(e,t))return!0;if((e=v(e))===n)return _(e,t)}return!1},b.getActualElement=function(e){return e.correspondingUseElement||e},b.getScrollXY=T,b.getElementClientRect=E,b.getElementRect=function(e){var t=E(e);if(!y.default.isIOS7&&t){e=T(h.getWindow(e));t.left+=e.x,t.right+=e.x,t.top+=e.y,t.bottom+=e.y}return t},b.getPath=function(e){for(var t=[];e;)t.push(e),e=v(e);return t},b.trySelector=function(e){return!!S.default.string(e)&&(p.default.document.querySelector(e),!0)};var C=function(e){return e.parentNode||e.host};function A(e,t){for(var n,o=[],i=e;(n=C(i))&&i!==t&&n!==i.ownerDocument;)o.unshift(i),i=n;return o}function T(e){return{x:(e=e||h.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function E(e){e=e instanceof p.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var I={};Object.defineProperty(I,"__esModule",{value:!0}),I.default=function(e,t){for(var n in t)e[n]=t[n];return e};var k={};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function w(e,t,n){return"parent"===e?(0,b.parentNode)(n):"self"===e?t.getRect(n):(0,b.closest)(n,e)}Object.defineProperty(k,"__esModule",{value:!0}),k.getStringOptionResult=w,k.resolveRectLike=function(e,t,n,o){return S.default.string(e)?e=w(e,t,n):S.default.func(e)&&(e=e.apply(void 0,function(e){if(Array.isArray(e))return O(e)}(o=o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e){if(e){if("string"==typeof e)return O(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?O(e,void 0):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),S.default.element(e)&&(e=(0,b.getElementRect)(e)),e},k.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},k.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,I.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e},k.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,I.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},k.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(e,t,n){n=e.options[n],n=n&&n.origin||e.options.origin,t=(0,k.resolveRectLike)(n,e,t,[e&&t]);return(0,k.rectToXY)(t)||{x:0,y:0}};var R={};function L(e){return e.trim().split(/ +/)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=function n(t,o,i){if(i=i||{},S.default.string(t)&&-1!==t.search(" ")&&(t=L(t)),S.default.array(t))return t.reduce(function(e,t){return(0,I.default)(e,n(t,o,i))},i);if(S.default.object(t)&&(o=t,t=""),S.default.func(o))i[t]=i[t]||[],i[t].push(o);else if(S.default.array(o))for(var e=0;e<o.length;e++){var r=o[e];n(t,r,i)}else if(S.default.object(o))for(var s in o){var a=L(s).map(function(e){return"".concat(t).concat(e)});n(a,o[s],i)}return i};var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0,D.default=function(e,t){return Math.sqrt(e*e+t*t)};var M={};function B(e,t){for(var n in t){var o,i=B.prefixedPropREs,r=!1;for(o in i)if(0===n.indexOf(o)&&i[o].test(n)){r=!0;break}r||"function"==typeof t[n]||(e[n]=t[n])}return e}Object.defineProperty(M,"__esModule",{value:!0}),M.default=void 0,B.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};M.default=B;var x={};function P(e){return e instanceof p.default.Event||e instanceof p.default.Touch}function F(e,t,n){return(n=n||{}).x=t[(e=e||"page")+"X"],n.y=t[e+"Y"],n}function H(e,t){return t=t||{x:0,y:0},y.default.isOperaMobile&&P(e)?(F("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):F("page",e,t),t}function J(e,t){return t=t||{},y.default.isOperaMobile&&P(e)?F("screen",e,t):F("client",e,t),t}function j(e){var t=[];return S.default.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function z(e){for(var t,n={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},o=0;o<e.length;o++){var i,r=e[o];for(i in n)n[i]+=r[i]}for(t in n)n[t]/=e.length;return n}Object.defineProperty(x,"__esModule",{value:!0}),x.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},x.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},x.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},x.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},x.isNativePointer=P,x.getXY=F,x.getPageXY=H,x.getClientXY=J,x.getPointerId=function(e){return S.default.number(e.pointerId)?e.pointerId:e.identifier},x.setCoords=function(e,t,n){t=1<t.length?z(t):t[0];H(t,e.page),J(t,e.client),e.timeStamp=n},x.getTouchPair=j,x.pointerAverage=z,x.touchBBox=function(e){if(!e.length)return null;var t=j(e),n=Math.min(t[0].pageX,t[1].pageX),o=Math.min(t[0].pageY,t[1].pageY),e=Math.max(t[0].pageX,t[1].pageX),t=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:o,left:n,top:o,right:e,bottom:t,width:e-n,height:t-o}},x.touchDistance=function(e,t){var n=t+"X",t=t+"Y",e=j(e),n=e[0][n]-e[1][n],t=e[0][t]-e[1][t];return(0,D.default)(n,t)},x.touchAngle=function(e,t){var n=t+"X",t=t+"Y",e=j(e),n=e[1][n]-e[0][n],t=e[1][t]-e[0][t];return 180*Math.atan2(t,n)/Math.PI},x.getPointerType=function(e){return S.default.string(e.pointerType)?e.pointerType:S.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type)||e instanceof p.default.Touch?"touch":"mouse"},x.getEventTargets=function(e){var t=S.default.func(e.composedPath)?e.composedPath():e.path;return[b.getActualElement(t?t[0]:e.target),b.getActualElement(e.currentTarget)]},x.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},x.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(x,"pointerExtend",{enumerable:!0,get:function(){return M.default}});var W={};Object.defineProperty(W,"__esModule",{value:!0}),W.BaseEvent=void 0;var V=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Y.prototype,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),Y);function Y(e){!function(e){if(!(e instanceof Y))throw new TypeError("Cannot call a class as a function")}(this),this.type=void 0,this.target=void 0,this.currentTarget=void 0,this.interactable=void 0,this._interaction=void 0,this.timeStamp=void 0,this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=e}W.BaseEvent=V,Object.defineProperty(V.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.find=G.findIndex=G.from=G.merge=G.remove=G.contains=void 0,G.contains=function(e,t){return-1!==e.indexOf(t)},G.remove=function(e,t){return e.splice(e.indexOf(t),1)};function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];e.push(o)}return e}G.merge=U,G.from=function(e){return U([],e)};function X(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}G.findIndex=X,G.find=function(e,t){return e[X(e,t)]};var K={};function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(K,"__esModule",{value:!0}),K.DropEvent=void 0;var Q=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(s,W.BaseEvent);var n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=$(n);e=o?(e=$(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return t=this,!(e=e)||"object"!==q(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e});function s(e,t,n){var o;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(o=r.call(this,t._interaction)).target=void 0,o.dropzone=void 0,o.dragEvent=void 0,o.relatedTarget=void 0,o.draggable=void 0,o.timeStamp=void 0,o.propagationStopped=!1,o.immediatePropagationStopped=!1;var i="dragleave"===n?e.prev:e.cur,e=i.element,i=i.dropzone;return o.type=n,o.target=e,o.currentTarget=e,o.dropzone=i,o.dragEvent=t,o.relatedTarget=t.target,o.draggable=t.interactable,o.timeStamp=t.timeStamp,o}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(s.prototype,[{key:"reject",value:function(){var n=this,e=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&e.cur.dropzone===this.dropzone&&e.cur.element===this.target)if(e.prev.dropzone=this.dropzone,e.prev.element=this.target,e.rejected=!0,e.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var t=e.activeDrops,t=G.findIndex(t,function(e){var t=e.dropzone,e=e.element;return t===n.dropzone&&e===n.target});e.activeDrops.splice(t,1);t=new s(e,this.dragEvent,"dropdeactivate");t.dropzone=this.dropzone,t.target=this.target,this.dropzone.fire(t)}else this.dropzone.fire(new s(e,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),s}();K.DropEvent=Q;var ee={};function te(e,t){for(var n=0;n<e.slice().length;n++){var o=e.slice()[n],i=o.dropzone,o=o.element;t.dropzone=i,t.target=o,i.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function ne(c,e){for(var t=function(e){for(var t=c.interactables,n=[],o=0;o<t.list.length;o++){var i=t.list[o];if(i.options.drop.enabled){var r=i.options.drop.accept;if(!(S.default.element(r)&&r!==e||S.default.string(r)&&!b.matchesSelector(e,r)||S.default.func(r)&&!r({dropzone:i,draggableElement:e})))for(var s=S.default.string(i.target)?i._context.querySelectorAll(i.target):S.default.array(i.target)?i.target:[i.target],a=0;a<s.length;a++){var l=s[a];l!==e&&n.push({dropzone:i,element:l})}}}return n}(e),n=0;n<t.length;n++){var o=t[n];o.rect=o.dropzone.getRect(o.element)}return t}function oe(e,t,n){for(var o=e.dropState,i=e.interactable,r=e.element,s=[],a=0;a<o.activeDrops.length;a++){var l=o.activeDrops[a],c=l.dropzone,u=l.element,l=l.rect;s.push(c.dropCheck(t,n,i,r,u,l)?u:null)}e=b.indexOfDeepestElement(s);return o.activeDrops[e]||null}function ie(e,t,n){var o=e.dropState,e={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(e.activate=new K.DropEvent(o,n,"dropactivate"),e.activate.target=null,e.activate.dropzone=null),"dragend"===n.type&&(e.deactivate=new K.DropEvent(o,n,"dropdeactivate"),e.deactivate.target=null,e.deactivate.dropzone=null),o.rejected||(o.cur.element!==o.prev.element&&(o.prev.dropzone&&(e.leave=new K.DropEvent(o,n,"dragleave"),n.dragLeave=e.leave.target=o.prev.element,n.prevDropzone=e.leave.dropzone=o.prev.dropzone),o.cur.dropzone&&(e.enter=new K.DropEvent(o,n,"dragenter"),n.dragEnter=o.cur.element,n.dropzone=o.cur.dropzone)),"dragend"===n.type&&o.cur.dropzone&&(e.drop=new K.DropEvent(o,n,"drop"),n.dropzone=o.cur.dropzone,n.relatedTarget=o.cur.element),"dragmove"===n.type&&o.cur.dropzone&&(e.move=new K.DropEvent(o,n,"dropmove"),(e.move.dragmove=n).dropzone=o.cur.dropzone)),e}function re(e,t){var n=e.dropState,o=n.activeDrops,i=n.cur,e=n.prev;t.leave&&e.dropzone.fire(t.leave),t.enter&&i.dropzone.fire(t.enter),t.move&&i.dropzone.fire(t.move),t.drop&&i.dropzone.fire(t.drop),t.deactivate&&te(o,t.deactivate),n.prev.dropzone=i.dropzone,n.prev.element=i.element}function se(e,t){var n=e.interaction,o=e.iEvent,i=e.event;if("dragmove"===o.type||"dragend"===o.type){e=n.dropState;t.dynamicDrop&&(e.activeDrops=ne(t,n.element));o=o,i=oe(n,o,i);e.rejected=e.rejected&&!!i&&i.dropzone===e.cur.dropzone&&i.element===e.cur.element,e.cur.dropzone=i&&i.dropzone,e.cur.element=i&&i.element,e.events=ie(n,0,o)}}Object.defineProperty(ee,"__esModule",{value:!0}),ee.default=void 0;var ae={id:"actions/drop",install:function(t){var e=t.actions,n=t.interactStatic,o=t.Interactable,i=t.defaults;t.usePlugin(l.default),o.prototype.dropzone=function(e){return function(e,t){if(S.default.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=(0,R.default)(t.listeners),o=Object.keys(n).reduce(function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e},{});e.off(e.options.drop.listeners),e.on(o),e.options.drop.listeners=o}return S.default.func(t.ondrop)&&e.on("drop",t.ondrop),S.default.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),S.default.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),S.default.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),S.default.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),S.default.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:S.default.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return S.default.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},o.prototype.dropCheck=function(e,t,n,o,i,r){return function(e,t,n,o,i,r,s){var a=!1;if(!(s=s||e.getRect(r)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,a,e,r,o,i);var l=e.options.drop.overlap;if("pointer"===l){var c=(0,N.default)(o,i,"drag"),u=x.getPageXY(t);u.x+=c.x,u.y+=c.y;var d=u.x>s.left&&u.x<s.right,c=u.y>s.top&&u.y<s.bottom,a=d&&c}u=o.getRect(i);if(u&&"center"===l){d=u.left+u.width/2,c=u.top+u.height/2;a=d>=s.left&&d<=s.right&&c>=s.top&&c<=s.bottom}u&&S.default.number(l)&&(a=Math.max(0,Math.min(s.right,u.right)-Math.max(s.left,u.left))*Math.max(0,Math.min(s.bottom,u.bottom)-Math.max(s.top,u.top))/(u.width*u.height)>=l);return e.options.drop.checker&&(a=e.options.drop.checker(t,n,a,e,r,o,i)),a}(this,e,t,n,o,i,r)},n.dynamicDrop=function(e){return S.default.bool(e)?(t.dynamicDrop=e,n):t.dynamicDrop},(0,I.default)(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=ae.defaults},listeners:{"interactions:before-action-start":function(e){e=e.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,o=(e.event,e.iEvent);if("drag"===n.prepared.name){e=n.dropState;e.activeDrops=null,e.events=null,e.activeDrops=ne(t,n.element),e.events=ie(n,0,o),e.events.activate&&(te(e.activeDrops,e.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:o}))}},"interactions:action-move":se,"interactions:after-action-move":function(e,t){var n=e.interaction,e=e.iEvent;"drag"===n.prepared.name&&(re(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:e}),n.dropState.events={})},"interactions:action-end":function(e,t){if("drag"===e.interaction.prepared.name){var n=e.interaction,o=e.iEvent;se(e,t),re(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:o})}},"interactions:stop":function(e){e=e.interaction;if("drag"===e.prepared.name){e=e.dropState;e&&(e.activeDrops=null,e.events=null,e.cur.dropzone=null,e.cur.element=null,e.prev.dropzone=null,e.prev.element=null,e.rejected=!1)}}},getActiveDrops:ne,getDrop:oe,getDropEvents:ie,fireDropEvents:re,defaults:{enabled:!1,accept:null,overlap:"pointer"}};ee.default=ae;var le={};function ce(e){var t=e.interaction,n=e.iEvent,o=e.phase;if("gesture"===t.prepared.name){var i=t.pointers.map(function(e){return e.pointer}),r="start"===o,e="end"===o,o=t.interactable.options.deltaSource;if(n.touches=[i[0],i[1]],r)n.distance=x.touchDistance(i,o),n.box=x.touchBBox(i),n.scale=1,n.ds=0,n.angle=x.touchAngle(i,o),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(e){e=t.prevEvent;n.distance=e.distance,n.box=e.box,n.scale=e.scale,n.ds=0,n.angle=e.angle,n.da=0}else n.distance=x.touchDistance(i,o),n.box=x.touchBBox(i),n.scale=n.distance/t.gesture.startDistance,n.angle=x.touchAngle(i,o),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,S.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(le,"__esModule",{value:!0}),le.default=void 0;var ue={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,e=e.defaults;n.prototype.gesturable=function(e){return S.default.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):S.default.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=ue,t.methodDict.gesture="gesturable",e.actions.gesture=ue.defaults},listeners:{"interactions:action-start":ce,"interactions:action-move":ce,"interactions:action-end":ce,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return!(e.action={name:"gesture"})}}},defaults:{},getCursor:function(){return""}};le.default=ue;var de={};function he(e){var t=e.iEvent,e=e.interaction;if("resize"===e.prepared.name&&e.resizeAxes){t=t;e.interactable.options.resize.square?("y"===e.resizeAxes?t.delta.x=t.delta.y:t.delta.y=t.delta.x,t.axes="xy"):(t.axes=e.resizeAxes,"x"===e.resizeAxes?t.delta.y=0:"y"===e.resizeAxes&&(t.delta.x=0))}}Object.defineProperty(de,"__esModule",{value:!0}),de.default=void 0;var pe={id:"actions/resize",before:["actions/drag"],install:function(o){var e=o.actions,t=o.browser,n=o.Interactable,i=o.defaults;pe.cursors=t.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},pe.defaultMargin=t.supportsTouch||t.supportsPointerEvent?20:10,n.prototype.resizable=function(e){return t=this,n=e,e=o,S.default.object(n)?(t.options.resize.enabled=!1!==n.enabled,t.setPerAction("resize",n),t.setOnEvents("resize",n),S.default.string(n.axis)&&/^x$|^y$|^xy$/.test(n.axis)?t.options.resize.axis=n.axis:null===n.axis&&(t.options.resize.axis=e.defaults.actions.resize.axis),S.default.bool(n.preserveAspectRatio)?t.options.resize.preserveAspectRatio=n.preserveAspectRatio:S.default.bool(n.square)&&(t.options.resize.square=n.square),t):S.default.bool(n)?(t.options.resize.enabled=n,t):t.options.resize;var t,n},e.map.resize=pe,e.methodDict.resize="resizable",i.actions.resize=pe.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(o){!function(){var e=o.iEvent,t=o.interaction;if("resize"===t.prepared.name&&t.prepared.edges){var n=e,e=t.rect;t._rects={start:(0,I.default)({},e),corrected:(0,I.default)({},e),previous:(0,I.default)({},e),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},n.edges=t.prepared.edges,n.rect=t._rects.corrected,n.deltaRect=t._rects.delta}}(),he(o)},"interactions:action-move":function(h){!function(){var e=h.iEvent,t=h.interaction;if("resize"===t.prepared.name&&t.prepared.edges){var n,o=e,i=t.interactable.options.resize.invert,r="reposition"===i||"negate"===i,s=t.rect,a=t._rects,e=a.start,l=a.corrected,c=a.delta,u=a.previous;if((0,I.default)(u,l),r){if((0,I.default)(l,s),"reposition"===i){if(l.top>l.bottom){var d=l.top;l.top=l.bottom,l.bottom=d}if(l.left>l.right){d=l.left;l.left=l.right,l.right=d}}}else l.top=Math.min(s.top,e.bottom),l.bottom=Math.max(s.bottom,e.top),l.left=Math.min(s.left,e.right),l.right=Math.max(s.right,e.left);for(n in l.width=l.right-l.left,l.height=l.bottom-l.top,l)c[n]=l[n]-u[n];o.edges=t.prepared.edges,o.rect=l,o.deltaRect=c}}(),he(h)},"interactions:action-end":function(e){var t=e.iEvent,e=e.interaction;if("resize"===e.prepared.name&&e.prepared.edges){t=t;t.edges=e.prepared.edges,t.rect=e._rects.corrected,t.deltaRect=e._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,o=e.element,i=e.rect,r=e.buttons;if(i){var s=(0,I.default)({},t.coords.cur.page),a=n.options.resize;if(a&&a.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(r&a.mouseButtons))){if(S.default.object(a.edges)){var l,c={left:!1,right:!1,top:!1,bottom:!1};for(l in c)c[l]=function(e,t,n,o,i,r,s){if(!t)return!1;if(!0===t){var a=S.default.number(r.width)?r.width:r.right-r.left,l=S.default.number(r.height)?r.height:r.bottom-r.top;if(s=Math.min(s,Math.abs(("left"===e||"right"===e?a:l)/2)),a<0&&("left"===e?e="right":"right"===e&&(e="left")),l<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e)return n.x<(0<=a?r.left:r.right)+s;if("top"===e)return n.y<(0<=l?r.top:r.bottom)+s;if("right"===e)return n.x>(0<=a?r.right:r.left)-s;if("bottom"===e)return n.y>(0<=l?r.bottom:r.top)-s}return!!S.default.element(o)&&(S.default.element(t)?t===o:b.matchesUpTo(o,t,i))}(l,a.edges[l],s,t._latestPointer.eventTarget,o,i,a.margin||pe.defaultMargin);c.left=c.left&&!c.right,c.top=c.top&&!c.bottom,(c.left||c.right||c.top||c.bottom)&&(e.action={name:"resize",edges:c})}else{n="y"!==a.axis&&s.x>i.right-pe.defaultMargin,r="x"!==a.axis&&s.y>i.bottom-pe.defaultMargin;(n||r)&&(e.action={name:"resize",axes:(n?"x":"")+(r?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,o=e.name,i=pe.cursors,e=null;if(n)e=i[o+n];else if(t){for(var r="",s=["top","bottom","left","right"],a=0;a<s.length;a++){var l=s[a];t[l]&&(r+=l)}e=i[r]}return e},defaultMargin:null};de.default=pe;var ge={};Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var fe={id:"actions",install:function(e){e.usePlugin(le.default),e.usePlugin(de.default),e.usePlugin(l.default),e.usePlugin(ee.default)}};ge.default=fe;var me={};Object.defineProperty(me,"__esModule",{value:!0}),me.default=void 0,me.default={};var ve={};Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var _e,be,ye=0,Ce={request:function(e){return _e(e)},cancel:function(e){return be(e)},init:function(i){if(_e=i.requestAnimationFrame,be=i.cancelAnimationFrame,!_e)for(var e=["ms","moz","webkit","o"],t=0;t<e.length;t++){var n=e[t];_e=i["".concat(n,"RequestAnimationFrame")],be=i["".concat(n,"CancelAnimationFrame")]||i["".concat(n,"CancelRequestAnimationFrame")]}_e=_e&&_e.bind(i),be=be&&be.bind(i),_e||(_e=function(e){var t=Date.now(),n=Math.max(0,16-(t-ye)),o=i.setTimeout(function(){e(t+n)},n);return ye=t+n,o},be=function(e){return clearTimeout(e)})}};ve.default=Ce;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getContainer=Se,Ae.getScroll=Ee,Ae.getScrollSize=function(e){return S.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},Ae.getScrollSizeDelta=function(e,t){var n=e.interaction,o=e.element,e=n&&n.interactable.options[n.prepared.name].autoScroll;if(!e||!e.enabled)return t(),{x:0,y:0};n=Se(e.container,n.interactable,o),o=Ee(n);t();n=Ee(n);return{x:n.x-o.x,y:n.y-o.y}},Ae.default=void 0;var Te={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){Te.isScrolling=!0,ve.default.cancel(Te.i),(e.autoScroll=Te).interaction=e,Te.prevTime=Te.now(),Te.i=ve.default.request(Te.scroll)},stop:function(){Te.isScrolling=!1,Te.interaction&&(Te.interaction.autoScroll=null),ve.default.cancel(Te.i)},scroll:function(){var e=Te.interaction,t=e.interactable,n=e.element,o=e.prepared.name,i=t.options[o].autoScroll,r=Se(i.container,t,n),s=Te.now(),o=(s-Te.prevTime)/1e3,i=i.speed*o;if(1<=i){o={x:Te.x*i,y:Te.y*i};if(o.x||o.y){i=Ee(r);S.default.window(r)?r.scrollBy(o.x,o.y):r&&(r.scrollLeft+=o.x,r.scrollTop+=o.y);o=Ee(r),i={x:o.x-i.x,y:o.y-i.y};(i.x||i.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:i,interaction:e,container:r})}Te.prevTime=s}Te.isScrolling&&(ve.default.cancel(Te.i),Te.i=ve.default.request(Te.scroll))},check:function(e,t){e=e.options;return e[t].autoScroll&&e[t].autoScroll.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&Te.check(t.interactable,t.prepared.name))if(t.simulation)Te.x=Te.y=0;else{var o,i,r,s,a=t.interactable,l=t.element,e=t.prepared.name,e=a.options[e].autoScroll,l=Se(e.container,a,l);s=S.default.window(l)?(o=n.clientX<Te.margin,i=n.clientY<Te.margin,r=n.clientX>l.innerWidth-Te.margin,n.clientY>l.innerHeight-Te.margin):(s=b.getElementClientRect(l),o=n.clientX<s.left+Te.margin,i=n.clientY<s.top+Te.margin,r=n.clientX>s.right-Te.margin,n.clientY>s.bottom-Te.margin);Te.x=r?1:o?-1:0,Te.y=s?1:i?-1:0,Te.isScrolling||(Te.margin=e.margin,Te.speed=e.speed,Te.start(t))}}};function Se(e,t,n){return(S.default.string(e)?(0,k.getStringOptionResult)(e,t,n):e)||(0,h.getWindow)(n)}function Ee(e){return S.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var Ie={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;(e.autoScroll=Te).now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=Te.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,Te.stop(),Te.interaction&&(Te.interaction=null)},"interactions:stop":Te.stop,"interactions:action-move":function(e){return Te.onInteractionMove(e)}}};Ae.default=Ie;var ke={};Object.defineProperty(ke,"__esModule",{value:!0}),ke.warnOnce=function(e,t){var n=!1;return function(){return n||(h.window.console.warn(t),n=!0),e.apply(this,arguments)}},ke.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e};var Oe={};function we(e){return S.default.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function Ne(e){return S.default.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var Re={id:"auto-start/interactableMethods",install:function(u){var e=u.Interactable;e.prototype.getAction=function(e,t,n,o){var i,r,s,a,l,c,r=(r=t,s=n,a=o,l=u,c=(i=this).getRect(a),r={action:null,interactable:i,interaction:s,element:a,rect:c,buttons:r.buttons||{0:1,1:4,3:8,4:16}[r.button]},l.fire("auto-start:check",r),r.action);return this.options.actionChecker?this.options.actionChecker(e,t,r,this,o,n):r},e.prototype.ignoreFrom=(0,ke.warnOnce)(function(e){return this._backCompatOption("ignoreFrom",e)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,ke.warnOnce)(function(e){return this._backCompatOption("allowFrom",e)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=Ne,e.prototype.styleCursor=we}};Oe.default=Re;var Le={};function De(e,t,n,o,i){return t.testIgnoreAllow(t.options[e.name],n,o)&&t.options[e.name].enabled&&xe(t,n,e,i)?e:null}function Me(e,t,n,o,i){var r=[],s=[],a=o;function l(e){r.push(e),s.push(a)}for(;S.default.element(a);){r=[],s=[],i.interactables.forEachMatch(a,l);var c=function(e,t,n,o,i,r,s){for(var a=0,l=o.length;a<l;a++){var c=o[a],u=i[a],d=c.getAction(t,n,e,u);if(d){d=De(d,c,u,r,s);if(d)return{action:d,interactable:c,element:u}}}return{action:null,interactable:null,element:null}}(e,t,n,r,s,o,i);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;a=b.parentNode(a)}return{action:null,interactable:null,element:null}}function Be(e,t,n){var o=t.action,i=t.interactable,t=t.element,o=o||{name:null};e.interactable=i,e.element=t,(0,ke.copyAction)(e.prepared,o),e.rect=i&&o.name?i.getRect(t):null,He(e,n),n.fire("autoStart:prepared",{interaction:e})}function xe(e,t,n,o){var i=e.options,r=i[n.name].max,s=i[n.name].maxPerElement,a=o.autoStart.maxInteractions,l=0,c=0,u=0;if(!(r&&s&&a))return!1;for(var d=0;d<o.interactions.list.length;d++){var h=o.interactions.list[d],p=h.prepared.name;if(h.interacting()){if(++l>=a)return!1;if(h.interactable===e){if((c+=p===n.name?1:0)>=r)return!1;if(h.element===t&&(u++,p===n.name&&s<=u))return!1}}}return 0<a}function Pe(e,t){return S.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function Fe(e,t,n){var o=n.autoStart.cursorElement;o&&o!==e&&(o.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function He(e,t){var n=e.interactable,o=e.element,i=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var r,s="";i.name&&(r=n.options[i.name].cursorChecker,s=S.default.func(r)?r(i,n,o,e._interacting):t.actions.map[i.name].getCursor(i));Fe(e.element,s||"",t)}else t.autoStart.cursorElement&&Fe(t.autoStart.cursorElement,"",t)}Object.defineProperty(Le,"__esModule",{value:!0}),Le.default=void 0;var Je={id:"auto-start/base",before:["actions"],install:function(t){var e=t.interactStatic,n=t.defaults;t.usePlugin(Oe.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,I.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return Pe(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:xe,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,o=e.pointer,i=e.event,e=e.eventTarget;n.interacting()||Be(n,Me(n,o,i,e,t),t)},"interactions:move":function(e,t){n=t,o=e.interaction,i=e.pointer,r=e.event,s=e.eventTarget,"mouse"!==o.pointerType||o.pointerIsDown||o.interacting()||Be(o,Me(o,i,r,s,n),n),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var o=n.interactable,e=n.prepared.name;e&&o&&(o.options[e].manualStart||!xe(o,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,o,n.element),He(n,t)))}}(e,t);var n,o,i,r,s},"interactions:stop":function(e,t){var n=e.interaction,e=n.interactable;e&&e.options.styleCursor&&Fe(n.element,"",t)}},maxInteractions:Pe,withinInteractionLimit:xe,validateAction:De};Le.default=Je;var je={};Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var ze={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,n){var o=e.interaction,i=e.eventTarget,t=e.dx,r=e.dy;if("drag"===o.prepared.name){var s=Math.abs(t),e=Math.abs(r),t=o.interactable.options.drag,r=t.startAxis,a=e<s?"x":s<e?"y":"xy";if(o.prepared.axis="start"===t.lockAxis?a[0]:t.lockAxis,"xy"!=a&&"xy"!==r&&r!==a){o.prepared.name=null;function l(e){if(e!==o.interactable){var t=o.interactable.options.drag;if(!t.manualStart&&e.testIgnoreAllow(t,c,i)){t=e.getAction(o.downPointer,o.downEvent,o,c);if(t&&"drag"===t.name&&function(e,t){if(t){t=t.options.drag.startAxis;return"xy"==e||"xy"===t||t===e}}(a,e)&&Le.default.validateAction(t,e,c,i,n))return e}}}for(var c=i;S.default.element(c);){var u=n.interactables.forEachMatch(c,l);if(u){o.prepared.name="drag",o.interactable=u,o.element=c;break}c=(0,b.parentNode)(c)}}}}}};je.default=ze;var We={};function Ve(e){var t=e.prepared&&e.prepared.name;if(!t)return null;e=e.interactable.options;return e[t].hold||e[t].delay}Object.defineProperty(We,"__esModule",{value:!0}),We.default=void 0;var Ye={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(Le.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,e=Ve(t);0<e&&(t.autoStartHoldTimer=setTimeout(function(){t.start(t.prepared,t.interactable,t.element)},e))},"interactions:move":function(e){var t=e.interaction,e=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!e&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){e=e.interaction;0<Ve(e)&&(e.prepared.name=null)}},getHoldDuration:Ve};We.default=Ye;var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.default=void 0;var Ue={id:"auto-start",install:function(e){e.usePlugin(Le.default),e.usePlugin(We.default),e.usePlugin(je.default)}};Ge.default=Ue;a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,a.default={};var Xe={};function Ke(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):S.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function qe(e){var t=e.interaction,e=e.event;t.interactable&&t.interactable.checkAndPreventDefault(e)}function Ze(o){var e=o.Interactable;e.prototype.preventDefault=Ke,e.prototype.checkAndPreventDefault=function(e){return function(e,t,n){e=e.options.preventDefault;if("never"!==e)if("always"!==e){if(t.events.supportsPassive&&/^touch(start|move)$/.test(n.type)){e=(0,h.getWindow)(n.target).document,e=t.getDocOptions(e);if(!e||!e.events||!1!==e.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(n.type)||S.default.element(n.target)&&(0,b.matchesSelector)(n.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||n.preventDefault()}else n.preventDefault()}(this,o,e)},o.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var t=0;t<o.interactions.list.length;t++){var n=o.interactions.list[t];if(n.element&&(n.element===e.target||(0,b.nodeContains)(n.element,e.target)))return void n.interactable.checkAndPreventDefault(e)}}})}Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.install=Ze,Xe.default=void 0;V={id:"core/interactablePreventDefault",install:Ze,listeners:["down","move","up","cancel"].reduce(function(e,t){return e["interactions:".concat(t)]=qe,e},{})};Xe.default=V;Q={};function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=void 0,(fe=Rt=Rt||{}).touchAction="touchAction",fe.boxSizing="boxSizing",fe.noListeners="noListeners";var Qe={touchAction:"https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action",boxSizing:"https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing"},et=[{name:Rt.touchAction,perform:function(n){return!function(e){for(var t=n.element;S.default.element(t);){if(tt(t,"touchAction",e))return 1;t=(0,b.parentNode)(t)}}(/pan-|pinch|none/)},getInfo:function(e){return[e.element,Qe.touchAction]},text:'Consider adding CSS "touch-action: none" to this element\n'},{name:Rt.boxSizing,perform:function(e){var t=e.element;return"resize"===e.prepared.name&&t instanceof p.default.HTMLElement&&!tt(t,"boxSizing",/border-box/)},text:'Consider adding CSS "box-sizing: border-box" to this resizable element',getInfo:function(e){return[e.element,Qe.boxSizing]}},{name:Rt.noListeners,perform:function(e){var t=e.prepared.name;return!(e.interactable.events.types["".concat(t,"move")]||[]).length},getInfo:function(e){return[e.prepared.name,e.interactable]},text:"There are no listeners set for this action"}];function tt(e,t,n){t=e.style[t]||h.window.getComputedStyle(e)[t];return n.test((t||"").toString())}Ce={id:"dev-tools",install:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).logger,n=e.Interactable,o=e.defaults;e.logger=t||console,o.base.devTools={ignore:{}},n.prototype.devTools=function(e){return e?((0,I.default)(this.options.devTools,e),this):this.options.devTools}},listeners:{"interactions:action-start":function(e,t){for(var n=e.interaction,o=0;o<et.length;o++){var i=et[o],r=n.interactable&&n.interactable.options;r&&r.devTools&&r.devTools.ignore[i.name]||!i.perform(n)||(r=t.logger).warn.apply(r,["[interact.js] "+i.text].concat(function(e){if(Array.isArray(e))return $e(e)}(i=i.getInfo(n))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(i)||function(e){if(e){if("string"==typeof e)return $e(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$e(e,void 0):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}},checks:et,CheckName:Rt,links:Qe,prefix:"[interact.js] "};Q.default=Ce;Ie={};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.default=void 0,Ie.default={};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.default=function e(t){var n,o={};for(n in t){var i=t[n];S.default.plainObject(i)?o[n]=e(i):S.default.array(i)?o[n]=G.from(i):o[n]=i}return o};var ot={};function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(ot,"__esModule",{value:!0}),ot.getRectOffset=lt,ot.default=void 0;Re=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(st.prototype,[{key:"start",value:function(e,t){var n,o=e.phase,i=this.interaction,e=(n=i.interactable.options[i.prepared.name],(e=n.modifiers)&&e.length?e:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(e){e=n[e];return e&&e.enabled&&{options:e,methods:e._methods}}).filter(function(e){return!!e}));this.prepareStates(e),this.edges=(0,I.default)({},i.edges),this.startOffset=lt(i.rect,t);t={phase:o,pageCoords:t,preEnd:!(this.startDelta={x:0,y:0})};return this.result=at(),this.startAll(t),this.result=this.setAll(t)}},{key:"fillArg",value:function(e){var t=this.interaction;e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset}},{key:"startAll",value:function(e){this.fillArg(e);for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n).methods.start(e)}}},{key:"setAll",value:function(e){this.fillArg(e);var t=e.phase,n=e.preEnd,o=e.skipModifiers,i=e.rect;e.coords=(0,I.default)({},e.pageCoords),e.rect=(0,I.default)({},i);for(var r=o?this.states.slice(o):this.states,s=at(e.coords,e.rect),a=0;a<r.length;a++){var l=r[a],c=l.options,u=(0,I.default)({},e.coords),d=null;l.methods.set&&this.shouldDo(c,n,t)&&(d=(e.state=l).methods.set(e),k.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-u.x,y:e.coords.y-u.y})),s.eventProps.push(d)}s.delta.x=e.coords.x-e.pageCoords.x,s.delta.y=e.coords.y-e.pageCoords.y,s.rectDelta.left=e.rect.left-i.left,s.rectDelta.right=e.rect.right-i.right,s.rectDelta.top=e.rect.top-i.top,s.rectDelta.bottom=e.rect.bottom-i.bottom;o=this.result.coords,i=this.result.rect;if(o&&i){i=s.rect.left!==i.left||s.rect.right!==i.right||s.rect.top!==i.top||s.rect.bottom!==i.bottom;s.changed=i||o.x!==s.coords.x||o.y!==s.coords.y}return s}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,o=t.coords.cur,i=t.coords.start,r=this.result,s=this.startDelta,a=r.delta;"start"===n&&(0,I.default)(this.startDelta,r.delta);for(var l=[[i,s],[o,a]],c=0;c<l.length;c++){var u=it(l[c],2),d=u[0],u=u[1];d.page.x+=u.x,d.page.y+=u.y,d.client.x+=u.x,d.client.y+=u.y}a=this.result.rectDelta,t=e.rect||t.rect;t.left+=a.left,t.right+=a.right,t.top+=a.top,t.bottom+=a.bottom,t.width=t.right-t.left,t.height=t.bottom-t.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,o=e.preEnd,i=e.skipModifiers,n=this.setAll({preEnd:o,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page});if(!(this.result=n).changed&&(!i||i<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){i=t.coords.cur.page,t=e.modifiedCoords.x-i.x,i=e.modifiedCoords.y-i.y;n.coords.x+=t,n.coords.y+=i,n.delta.x+=t,n.delta.y+=i}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,o=this.states;if(o&&o.length){for(var i=!1,r=0;r<o.length;r++){var s=o[r],a=(e.state=s).options,s=s.methods,s=s.beforeEnd&&s.beforeEnd(e);if(s)return this.endResult=s,!1;i=i||!i&&this.shouldDo(a,!0,e.phase,!0)}i&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,I.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var o=0;o<this.states.length;o++){var i=this.states[o];(n.state=i).methods.stop&&i.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],o=n.options,i=n.methods,n=n.name;this.states.push({options:o,methods:i,index:t,name:n})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,o=t.rect,i=t.modification;if(i.result){for(var e=i.startDelta,t=i.result,i=t.delta,t=t.rectDelta,r=[[n.start,e],[n.cur,i]],s=0;s<r.length;s++){var a=it(r[s],2),l=a[0],a=a[1];l.page.x-=a.x,l.page.y-=a.y,l.client.x-=a.x,l.client.y-=a.y}o.left-=t.left,o.right-=t.right,o.top-=t.top,o.bottom-=t.bottom}}},{key:"shouldDo",value:function(e,t,n,o){return!(!e||!1===e.enabled||o&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map(function(e){return(0,nt.default)(e)}),this.result=at((0,I.default)({},e.result.coords),(0,I.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}]),st);function st(e){!function(e){if(!(e instanceof st))throw new TypeError("Cannot call a class as a function")}(this),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=null,this.result=null,this.endResult=null,this.edges=void 0,this.interaction=void 0,this.interaction=e,this.result=at()}function at(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function lt(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}ot.default=Re;var ct={};function ut(e){var t=e.iEvent,e=e.interaction.modification.result;e&&(t.modifiers=e.eventProps)}Object.defineProperty(ct,"__esModule",{value:!0}),ct.makeModifier=function(e,i){var r=e.defaults,s={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},e=function(e){var t,n=e||{};for(t in n.enabled=!1!==n.enabled,r)t in n||(n[t]=r[t]);var o={options:n,methods:s,name:i,enable:function(){return n.enabled=!0,o},disable:function(){return n.enabled=!1,o}};return o};return i&&"string"==typeof i&&(e._defaults=r,e._methods=s),e},ct.addEventModifiers=ut,ct.default=void 0;Je={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){e=e.interaction;e.modification=new ot.default(e)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":ut,"interactions:action-move":ut,"interactions:action-end":ut,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}};ct.default=Je;var dt={};Object.defineProperty(dt,"__esModule",{value:!0}),dt.defaults=void 0,dt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var ht={};function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mt(e){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(ht,"__esModule",{value:!0}),ht.InteractEvent=void 0;ze=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(m,W.BaseEvent);var n,o,f=(n=m,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=mt(n);e=o?(e=mt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return t=this,!(e=e)||"object"!==pt(e)&&"function"!=typeof e?ft(t):e});function m(e,t,n,o,i,r,s){var a;!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this),(a=f.call(this,e)).target=void 0,a.currentTarget=void 0,a.relatedTarget=null,a.screenX=void 0,a.screenY=void 0,a.button=void 0,a.buttons=void 0,a.ctrlKey=void 0,a.shiftKey=void 0,a.altKey=void 0,a.metaKey=void 0,a.page=void 0,a.client=void 0,a.delta=void 0,a.rect=void 0,a.x0=void 0,a.y0=void 0,a.t0=void 0,a.dt=void 0,a.duration=void 0,a.clientX0=void 0,a.clientY0=void 0,a.velocity=void 0,a.speed=void 0,a.swipe=void 0,a.timeStamp=void 0,a.dragEnter=void 0,a.dragLeave=void 0,a.axes=void 0,a.preEnd=void 0,i=i||e.element;var l=e.interactable,c=(l&&l.options||dt.defaults).deltaSource,u=(0,N.default)(l,i,n),d="start"===o,h="end"===o,p=d?ft(a):e.prevEvent,g=d?e.coords.start:h?{page:p.page,client:p.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return a.page=(0,I.default)({},g.page),a.client=(0,I.default)({},g.client),a.rect=(0,I.default)({},e.rect),a.timeStamp=g.timeStamp,h||(a.page.x-=u.x,a.page.y-=u.y,a.client.x-=u.x,a.client.y-=u.y),a.ctrlKey=t.ctrlKey,a.altKey=t.altKey,a.shiftKey=t.shiftKey,a.metaKey=t.metaKey,a.button=t.button,a.buttons=t.buttons,a.target=i,a.currentTarget=i,a.preEnd=r,a.type=s||n+(o||""),a.interactable=l,a.t0=d?e.pointers[e.pointers.length-1].downTime:p.t0,a.x0=e.coords.start.page.x-u.x,a.y0=e.coords.start.page.y-u.y,a.clientX0=e.coords.start.client.x-u.x,a.clientY0=e.coords.start.client.y-u.y,a.delta=d||h?{x:0,y:0}:{x:a[c].x-p[c].x,y:a[c].y-p[c].y},a.dt=e.coords.delta.timeStamp,a.duration=a.timeStamp-a.t0,a.velocity=(0,I.default)({},e.coords.velocity[c]),a.speed=(0,D.default)(a.velocity.x,a.velocity.y),a.swipe=h||"inertiastart"===o?a.getSwipe():null,a}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(m.prototype,[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||150<this.timeStamp-e.prevEvent.timeStamp)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,o=202.5<=t&&t<337.5;return{up:o,down:!o&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),m}();ht.InteractEvent=ze,Object.defineProperties(ze.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.PointerInfo=void 0,vt.PointerInfo=function t(e,n,o,i,r){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=e,this.pointer=n,this.event=o,this.downTime=i,this.downTarget=r};var _t,bt,yt={};function Ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function At(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),e}Object.defineProperty(yt,"__esModule",{value:!0}),Object.defineProperty(yt,"PointerInfo",{enumerable:!0,get:function(){return vt.PointerInfo}}),yt.default=yt.Interaction=yt._ProxyMethods=yt._ProxyValues=void 0,yt._ProxyValues=_t,(Ye=_t||(yt._ProxyValues=_t={})).interactable="",Ye.element="",Ye.prepared="",Ye.pointerIsDown="",Ye.pointerWasMoved="",Ye._proxy="",yt._ProxyMethods=bt,(Ue=bt||(yt._ProxyMethods=bt={})).start="",Ue.move="",Ue.end="",Ue.stop="",Ue.interacting="";var Tt=0,V=(At(St,[{key:"pointerMoveTolerance",get:function(){return 1}}]),At(St,[{key:"pointerDown",value:function(e,t,n){var o=this.updatePointer(e,t,n,!0),i=this.pointers[o];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:o,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&((0,ke.copyAction)(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?(0,I.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var o,i=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(o=this.coords.cur.client.x-this.coords.start.client.x,s=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,D.default)(o,s)>this.pointerMoveTolerance);var r=this.getPointerIndex(e),s={pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:t,type:"move",eventTarget:n,dx:o,dy:s,duplicate:i,interaction:this};i||x.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),i||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&x.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||x.setZeroCoords(this.coords.delta),(e=(0,I.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,o){var i=this.getPointerIndex(e);-1===i&&(i=this.updatePointer(e,t,n,!1));var r=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(r),{pointer:e,pointerIndex:i,pointerInfo:this.pointers[i],event:t,eventTarget:n,type:r,curEventTarget:o,interaction:this}),this.simulation||this.end(t),this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),!(this._ending=!1)===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=x.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:G.findIndex(this.pointers,function(e){return e.id===t})}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,o){var i=x.getPointerId(e),r=this.getPointerIndex(e),s=this.pointers[r];return o=!1!==o&&(o||/(down|start)$/i.test(t.type)),s?s.pointer=e:(s=new vt.PointerInfo(i,e,t,null,null),r=this.pointers.length,this.pointers.push(s)),x.setCoords(this.coords.cur,this.pointers.map(function(e){return e.pointer}),this._now()),x.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),o&&(this.pointerIsDown=!0,s.downTime=this.coords.cur.timeStamp,s.downTarget=n,x.pointerExtend(this.downPointer,e),this.interacting()||(x.copyCoords(this.coords.start,this.coords.cur),x.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:o,pointerInfo:s,pointerIndex:r,interaction:this}),r}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var o=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:o,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,o){return new ht.InteractEvent(this,e,this.prepared.name,t,this.element,n,o)}},{key:"_fireEvent",value:function(e){this.interactable.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,o=e.preEnd,i=e.type,r=this.rect;if(r&&"move"===n&&(k.addEdges(this.edges,r,this.coords.delta[this.interactable.options.deltaSource]),r.width=r.right-r.left,r.height=r.bottom-r.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;i=e.iEvent=this._createPreparedEvent(t,n,o,i);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=i),this._fireEvent(i),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}]),St);function St(e){var t=this,n=e.pointerType,e=e.scopeFire;!function(e){if(!(e instanceof St))throw new TypeError("Cannot call a class as a function")}(this),this.interactable=null,this.element=null,this.rect=void 0,this._rects=void 0,this.edges=void 0,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=null,this.simulation=null,this.doMove=(0,ke.warnOnce)(function(e){this.move(e)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:x.newCoords(),prev:x.newCoords(),cur:x.newCoords(),delta:x.newCoords(),velocity:x.newCoords()},this._id=Tt++,this._scopeFire=e,this.pointerType=n;var o=this;this._proxy={};for(var i in _t)!function(e){Object.defineProperty(t._proxy,e,{get:function(){return o[e]}})}(i);for(var r in bt)!function(e){Object.defineProperty(t._proxy,e,{value:function(){return o[e].apply(o,arguments)}})}(r);this._scopeFire("interactions:new",{interaction:this})}yt.Interaction=V;yt.default=V;var Et={};function It(e){e.pointerIsDown&&(Nt(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function kt(e){Ot(e.interaction)}function Ot(e){if(!e.offset.pending.x&&!e.offset.pending.y)return!1;var t=e.offset.pending;return Nt(e.coords.cur,t),Nt(e.coords.delta,t),k.addEdges(e.edges,e.rect,t),t.x=0,!(t.y=0)}function wt(e){var t=e.x,e=e.y;this.offset.pending.x+=t,this.offset.pending.y+=e,this.offset.total.x+=t,this.offset.total.y+=e}function Nt(e,t){var n=e.page,o=e.client,e=t.x,t=t.y;n.x+=e,n.y+=t,o.x+=e,o.y+=t}Object.defineProperty(Et,"__esModule",{value:!0}),Et.addTotal=It,Et.applyPending=Ot,Et.default=void 0,yt._ProxyMethods.offsetBy="";fe={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=wt},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return It(e.interaction)},"interactions:before-action-start":kt,"interactions:before-action-move":kt,"interactions:before-action-end":function(e){e=e.interaction;if(Ot(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(e){e=e.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}};Et.default=fe;var Rt={};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.default=Rt.InertiaState=void 0;var Lt=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Dt.prototype,[{key:"start",value:function(e){var t=this.interaction,n=Mt(t);if(!n||!n.enabled)return!1;var o=t.coords.velocity.client,i=(0,D.default)(o.x,o.y),o=this.modification||(this.modification=new ot.default(t));if(o.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg={interaction:t,interactable:t.interactable,element:t.element,rect:t.rect,edges:t.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-t.coords.cur.timeStamp<50&&i>n.minSpeed&&i>n.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=Mt(this.interaction),o=n.resistance,i=-Math.log(n.endSpeed/this.v0)/o;this.targetOffset={x:(t.x-i)/o,y:(t.y-i)/o},this.te=i,this.lambda_v0=o/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;o=this.modification,n=this.modifierArg;n.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(n),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.onNextFrame(function(){return e.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return e.smoothEndTick()})}},{key:"onNextFrame",value:function(e){var t=this;this.timeout=ve.default.request(function(){t.active&&e()})}},{key:"inertiaTick",value:function(){var e,t,n,o=this,i=this.interaction,r=Mt(i).resistance,s=(i._now()-this.t0)/1e3;if(s<this.te){var a=1-(Math.exp(-r*s)-this.lambda_v0)/this.one_ve_v0,a=this.isModified?(e=this.targetOffset.x,t=this.targetOffset.y,n=this.modifiedOffset.x,r=this.modifiedOffset.y,{x:Bt(s=a,0,e,n),y:Bt(s,0,t,r)}):{x:this.targetOffset.x*a,y:this.targetOffset.y*a},a={x:a.x-this.currentOffset.x,y:a.y-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,i.offsetBy(a),i.move(),this.onNextFrame(function(){return o.inertiaTick()})}else i.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,o=Mt(t).smoothEndDuration;if(n<o){var i=xt(n,0,this.targetOffset.x,o),o=xt(n,0,this.targetOffset.y,o),o={x:i-this.currentOffset.x,y:o-this.currentOffset.y};this.currentOffset.x+=o.x,this.currentOffset.y+=o.y,t.offsetBy(o),t.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return e.smoothEndTick()})}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,o=e.eventTarget,e=this.interaction;e.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),e.updatePointer(t,n,o,!0),e._doPhase({interaction:e,event:n,phase:"resume"}),(0,x.copyCoords)(e.coords.prev,e.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ve.default.cancel(this.timeout)}}]),Dt);function Dt(e){!function(e){if(!(e instanceof Dt))throw new TypeError("Cannot call a class as a function")}(this),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=null,this.modifierCount=0,this.modifierArg=null,this.startCoords=null,this.t0=0,this.v0=0,this.te=0,this.targetOffset=null,this.modifiedOffset=null,this.currentOffset=null,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=null,this.interaction=void 0,this.interaction=e}function Mt(e){var t=e.interactable,e=e.prepared;return t&&t.options&&e.name&&t.options[e.name].inertia}function Bt(e,t,n,o){var i=1-e;return i*i*t+2*i*e*n+e*e*o}function xt(e,t,n,o){return-n*(e/=o)*(e-2)+t}Rt.InertiaState=Lt;Ce={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Et.default),e.usePlugin(ct.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){e=e.interaction;e.inertia=new Lt(e)},"interactions:before-action-end":function(e){var t=e.interaction,e=e.event;return(!t._interacting||t.simulation||!t.inertia.start(e))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,o=t.inertia;if(o.active)for(var i=n;S.default.element(i);){if(i===t.element){o.resume(e);break}i=b.parentNode(i)}},"interactions:stop":function(e){e=e.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":ct.addEventModifiers,"interactions:action-inertiastart":ct.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};Rt.default=Ce;var Pt={};function Ft(e,t){for(var n=0;n<t.length;n++){var o=t[n];if(e.immediatePropagationStopped)break;o(e)}}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.Eventable=void 0;Re=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Ht.prototype,[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&Ft(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&Ft(e,t)}},{key:"on",value:function(e,t){var n=(0,R.default)(e,t);for(e in n)this.types[e]=G.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,R.default)(e,t);for(e in n){var o=this.types[e];if(o&&o.length)for(var i=0;i<n[e].length;i++){var r=n[e][i],r=o.indexOf(r);-1!==r&&o.splice(r,1)}}}},{key:"getRect",value:function(e){return null}}]),Ht);function Ht(e){!function(e){if(!(e instanceof Ht))throw new TypeError("Cannot call a class as a function")}(this),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=(0,I.default)({},e||{})}Pt.Eventable=Re;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1};var jt={};function zt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Wt(e,t,n){return t&&zt(e.prototype,t),n&&zt(e,n),e}Object.defineProperty(jt,"__esModule",{value:!0}),jt.Interactable=void 0;Je=(Wt(Vt,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}]),Wt(Vt,[{key:"setOnEvents",value:function(e,t){return S.default.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),S.default.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),S.default.func(t.onend)&&this.on("".concat(e,"end"),t.onend),S.default.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(S.default.array(t)||S.default.object(t))&&this.off(e,t),(S.default.array(n)||S.default.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n,o=this._defaults;for(n in t){var i=n,r=this.options[e],s=t[i];"listeners"===i&&this.updatePerActionListeners(e,r.listeners,s),S.default.array(s)?r[i]=G.from(s):S.default.plainObject(s)?(r[i]=(0,I.default)(r[i]||{},(0,nt.default)(s)),S.default.object(o.perAction[i])&&"enabled"in o.perAction[i]&&(r[i].enabled=!1!==s.enabled)):S.default.bool(s)&&S.default.object(o.perAction[i])?r[i].enabled=s:r[i]=s}}},{key:"getRect",value:function(e){return e=e||(S.default.element(this.target)?this.target:null),S.default.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,b.getElementRect)(e)}},{key:"rectChecker",value:function(e){var t=this;return S.default.func(e)?(this._rectChecker=e,this.getRect=function(e){e=(0,I.default)({},t._rectChecker(e));return"width"in e||(e.width=e.right-e.left,e.height=e.bottom-e.top),e},this):null===e?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,b.trySelector)(t)||S.default.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,b.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!S.default.element(n)&&(S.default.string(e)?(0,b.matchesUpTo)(n,e,t):!!S.default.element(e)&&(0,b.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!S.default.element(n))&&(S.default.string(e)?(0,b.matchesUpTo)(n,e,t):!!S.default.element(e)&&(0,b.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,o){S.default.object(t)&&!S.default.array(t)&&(o=n,n=null);var i,r="on"===e?"add":"remove",s=(0,R.default)(t,n);for(i in s){"wheel"===i&&(i=y.default.wheelEvent);for(var a=0;a<s[i].length;a++){var l=s[i][a];(0,Jt.default)(i,this._actions)?this.events[e](i,l):S.default.string(this.target)?this._scopeEvents["".concat(r,"Delegate")](this.target,this._context,i,l,o):this._scopeEvents[r](this.target,i,l,o)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t,n,o=this._defaults;for(t in S.default.object(e)||(e={}),this.options=(0,nt.default)(o.base),this._actions.methodDict){var i=t,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,I.default)((0,I.default)({},o.perAction),o.actions[i])),this[r](e[i])}for(n in e)S.default.func(this[n])&&this[n](e[n]);return this}},{key:"unset",value:function(){if(S.default.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;0<=n;n--){var o=t[n],i=o.selector,r=o.context,s=o.listeners;i===this.target&&r===this._context&&t.splice(n,1);for(var a=s.length-1;0<=a;a--)this._scopeEvents.removeDelegate(this.target,this._context,e,s[a][0],s[a][1])}else this._scopeEvents.remove(this.target,"all")}}]),Vt);function Vt(e,t,n,o){!function(e){if(!(e instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this),this.options=void 0,this._actions=void 0,this.target=void 0,this.events=new Pt.Eventable,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._rectChecker=void 0,this._actions=t.actions,this.target=e,this._context=t.context||n,this._win=(0,h.getWindow)((0,b.trySelector)(e)?this._context:e),this._doc=this._win.document,this._scopeEvents=o,this.set(t)}jt.Interactable=Je;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.InteractableSet=void 0;ze=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Gt.prototype,[{key:"new",value:function(e,t){t=(0,I.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events),o={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),S.default.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(o)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(o)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(t,e){var n=e&&e.context||this.scope.document,o=S.default.string(t),e=o?this.selectorMap[t]:t[this.scope.id];if(!e)return null;e=G.find(e,function(e){return e.context===n&&(o||e.interactable.inContext(t))});return e&&e.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var o=this.list[n],i=void 0;if((S.default.string(o.target)?S.default.element(e)&&b.matchesSelector(e,o.target):e===o.target)&&o.inContext(e)&&(i=t(o)),void 0!==i)return i}}}]),Gt);function Gt(e){var o=this;!function(e){if(!(e instanceof Gt))throw new TypeError("Cannot call a class as a function")}(this),this.list=[],this.selectorMap={},this.scope=void 0,(this.scope=e).addListeners({"interactable:unset":function(e){var t=e.interactable,e=t.target,n=t._context,t=S.default.string(e)?o.selectorMap[e]:e[o.scope.id],e=G.findIndex(t,function(e){return e.context===n});t[e]&&(t[e].context=null,t[e].interactable=null),t.splice(e,1)}})}Yt.InteractableSet=ze;var Ut={};function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=void 0;var qt=(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(Zt.prototype,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),Zt);function Zt(e){!function(e){if(!(e instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=e,(0,M.default)(this,e)}function $t(e){if(!S.default.object(e))return{capture:!!e,passive:!1};var t=(0,I.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}Ye={id:"events",install:function(e){var u=[],m={},c=[],d={add:h,remove:f,addDelegate:function(t,n,e,o,i){var r=$t(i);if(!m[e]){m[e]=[];for(var s=0;s<c.length;s++){var a=c[s];h(a,e,v),h(a,e,_,!0)}}var l=m[e],i=G.find(l,function(e){return e.selector===t&&e.context===n});i||(i={selector:t,context:n,listeners:[]},l.push(i)),i.listeners.push([o,r])},removeDelegate:function(e,t,n,o,i){var r,s=$t(i),a=m[n],l=!1;if(a)for(r=a.length-1;0<=r;r--){var c=a[r];if(c.selector===e&&c.context===t){for(var u=c.listeners,d=u.length-1;0<=d;d--){var h=Xt(u[d],2),p=h[0],g=h[1],h=g.capture,g=g.passive;if(p===o&&h===s.capture&&g===s.passive){u.splice(d,1),u.length||(a.splice(r,1),f(t,n,v),f(t,n,_,!0)),l=!0;break}}if(l)break}}},delegateListener:v,delegateUseCapture:_,delegatedEvents:m,documents:c,targets:u,supportsOptions:!1,supportsPassive:!1};function h(t,e,n,o){var i=$t(o),o=G.find(u,function(e){return e.eventTarget===t});o||(o={eventTarget:t,events:{}},u.push(o)),o.events[e]||(o.events[e]=[]),t.addEventListener&&!G.contains(o.events[e],n)&&(t.addEventListener(e,n,d.supportsOptions?i:i.capture),o.events[e].push(n))}function f(t,e,n,o){var i=$t(o),o=G.findIndex(u,function(e){return e.eventTarget===t}),r=u[o];if(r&&r.events)if("all"!==e){var s=!1,a=r.events[e];if(a){if("all"===n){for(var l=a.length-1;0<=l;l--)f(t,e,a[l],i);return}for(var c=0;c<a.length;c++)if(a[c]===n){t.removeEventListener(e,n,d.supportsOptions?i:i.capture),a.splice(c,1),0===a.length&&(delete r.events[e],s=!0);break}}s&&!Object.keys(r.events).length&&u.splice(o,1)}else for(e in r.events)r.events.hasOwnProperty(e)&&f(t,e,"all")}function v(e,t){for(var n=$t(t),o=new qt(e),i=m[e.type],r=Xt(x.getEventTargets(e),1)[0],s=r;S.default.element(s);){for(var a=0;a<i.length;a++){var l=i[a],c=l.selector,u=l.context;if(b.matchesSelector(s,c)&&b.nodeContains(u,r)&&b.nodeContains(u,s)){var d=l.listeners;o.currentTarget=s;for(var h=0;h<d.length;h++){var p=Xt(d[h],2),g=p[0],f=p[1],p=f.capture,f=f.passive;p===n.capture&&f===n.passive&&g(o)}}}s=b.parentNode(s)}}function _(e){return v(e,!0)}return e.document.createElement("div").addEventListener("test",null,{get capture(){return d.supportsOptions=!0},get passive(){return d.supportsPassive=!0}}),e.events=d}};Ut.default=Ye;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.createInteractStatic=function(o){function i(e,t){var n=o.interactables.get(e,t);return n||((n=o.interactables.new(e,t)).events.global=i.globalEvents),n}return i.getPointerAverage=x.pointerAverage,i.getTouchBBox=x.touchBBox,i.getTouchDistance=x.touchDistance,i.getTouchAngle=x.touchAngle,i.getElementRect=b.getElementRect,i.getElementClientRect=b.getElementClientRect,i.matchesSelector=b.matchesSelector,i.closest=b.closest,i.globalEvents={},i.version=void 0,i.scope=o,i.use=function(e,t){return this.scope.usePlugin(e,t),this},i.isSet=function(e,t){return!!this.scope.interactables.get(e,t&&t.context)},i.on=function(e,t,n){if(S.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),S.default.array(e)){for(var o=0;o<e.length;o++){var i=e[o];this.on(i,t,n)}return this}if(S.default.object(e)){for(var r in e)this.on(r,e[r],t);return this}return(0,Jt.default)(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this},i.off=function(e,t,n){if(S.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),S.default.array(e)){for(var o=0;o<e.length;o++){var i=e[o];this.off(i,t,n)}return this}if(S.default.object(e)){for(var r in e)this.off(r,e[r],t);return this}var s;return(0,Jt.default)(e,this.scope.actions)?e in this.globalEvents&&-1!==(s=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(s,1):this.scope.events.remove(this.scope.document,e,t,n),this},i.debug=function(){return this.scope},i.supportsTouch=function(){return y.default.supportsTouch},i.supportsPointerEvent=function(){return y.default.supportsPointerEvent},i.stop=function(){for(var e=0;e<this.scope.interactions.list.length;e++)this.scope.interactions.list[e].stop();return this},i.pointerMoveTolerance=function(e){return S.default.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance},i.addDocument=function(e,t){this.scope.addDocument(e,t)},i.removeDocument=function(e){this.scope.removeDocument(e)},i};var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.default=void 0;var tn={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<tn.methodOrder.length;t++){var n=tn.methodOrder[t],n=tn[n](e);if(n)return n}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,o=e.eventTarget,i=e.scope;if(!/down|start/i.test(n))return null;for(var r=0;r<i.interactions.list.length;r++){var s=i.interactions.list[r],a=o;if(s.simulation&&s.simulation.allowResume&&s.pointerType===t)for(;a;){if(a===s.element)return s;a=b.parentNode(a)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,o=e.pointerType,i=e.eventType,r=e.scope;if("mouse"!==o&&"pen"!==o)return null;for(var s=0;s<r.interactions.list.length;s++){var a=r.interactions.list[s];if(a.pointerType===o&&(!a.simulation||nn(a,n))){if(a.interacting())return a;t=t||a}}if(t)return t;for(var l=0;l<r.interactions.list.length;l++){var c=r.interactions.list[l];if(!(c.pointerType!==o||/down/i.test(i)&&c.simulation))return c}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,o=0;o<n.interactions.list.length;o++){var i=n.interactions.list[o];if(nn(i,t))return i}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,o=0;o<n.interactions.list.length;o++){var i=n.interactions.list[o];if(1===i.pointers.length){var r=i.interactable;if(r&&(!r.options.gesture||!r.options.gesture.enabled))continue}else if(2<=i.pointers.length)continue;if(!i.interacting()&&t===i.pointerType)return i}return null}};function nn(e,t){return e.pointers.some(function(e){return e.id===t})}en.default=tn;var on={};function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(on,"__esModule",{value:!0}),on.default=void 0;var un=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function dn(_,b){return function(e){var t=b.interactions.list,n=x.getPointerType(e),o=sn(x.getEventTargets(e),2),i=o[0],r=o[1],s=[];if(/^touch/.test(e.type)){b.prevTouchTime=b.now();for(var a=0;a<e.changedTouches.length;a++){var l=e.changedTouches[a],c={pointer:l,pointerId:x.getPointerId(l),pointerType:n,eventType:e.type,eventTarget:i,curEventTarget:r,scope:b},l=hn(c);s.push([c.pointer,c.eventTarget,c.curEventTarget,l])}}else{var u=!1;if(!y.default.supportsPointerEvent&&/mouse/.test(e.type)){for(var d=0;d<t.length&&!u;d++)u="mouse"!==t[d].pointerType&&t[d].pointerIsDown;u=u||b.now()-b.prevTouchTime<500||0===e.timeStamp}if(!u){var h={pointer:e,pointerId:x.getPointerId(e),pointerType:n,eventType:e.type,curEventTarget:r,eventTarget:i,scope:b},o=hn(h);s.push([h.pointer,h.eventTarget,h.curEventTarget,o])}}for(var p=0;p<s.length;p++){var g=sn(s[p],4),f=g[0],m=g[1],v=g[2];g[3][_](f,e,m,v)}}}function hn(e){var t=e.pointerType,n=e.scope,e={interaction:en.default.search(e),searchDetails:e};return n.fire("interactions:find",e),e.interaction||n.interactions.new({pointerType:t})}function pn(e,t){var n,o=e.doc,i=e.scope,e=e.options,r=i.interactions.docEvents,s=i.events,a=s[t];for(n in i.browser.isIOS&&!e.events&&(e.events={passive:!1}),s.delegatedEvents)a(o,n,s.delegateListener),a(o,n,s.delegateUseCapture,!0);for(var l=e&&e.events,c=0;c<r.length;c++){var u=r[c];a(o,u.type,u.listener,l)}}Ue={id:"core/interactions",install:function(i){for(var e={},t=0;t<un.length;t++){var n=un[t];e[n]=dn(n,i)}var o=y.default.pEventTypes;function r(){for(var e=0;e<i.interactions.list.length;e++){var n=i.interactions.list[e];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var o=0;o<n.pointers.length;o++)!function(){var t=n.pointers[o];i.documents.some(function(e){e=e.doc;return(0,b.nodeContains)(e,t.downTarget)})||n.removePointer(t.pointer,t.event)}()}}(o=p.default.PointerEvent?[{type:o.down,listener:r},{type:o.down,listener:e.pointerDown},{type:o.move,listener:e.pointerMove},{type:o.up,listener:e.pointerUp},{type:o.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:r},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var t=0;t<i.interactions.list.length;t++)i.interactions.list[t].documentBlur(e)}}),i.prevTouchTime=0,i.Interaction=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,yt.default);var n,o,e=(n=t,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=cn(n);e=o?(e=cn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return t=this,!(e=e)||"object"!==rn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e});function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.apply(this,arguments)}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(t.prototype,[{key:"_now",value:function(){return i.now()}},{key:"pointerMoveTolerance",get:function(){return i.interactions.pointerMoveTolerance},set:function(e){i.interactions.pointerMoveTolerance=e}}]),t}(),i.interactions={list:[],new:function(e){e.scopeFire=function(e,t){return i.fire(e,t)};e=new i.Interaction(e);return i.interactions.list.push(e),e},listeners:e,docEvents:o,pointerMoveTolerance:1},i.usePlugin(Xe.default)},listeners:{"scope:add-document":function(e){return pn(e,"add")},"scope:remove-document":function(e){return pn(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,o=t.interactions.list.length-1;0<=o;o--){var i=t.interactions.list[o];i.interactable===n&&(i.stop(),t.fire("interactions:destroy",{interaction:i}),i.destroy(),2<t.interactions.list.length&&t.interactions.list.splice(o,1))}}},onDocSignal:pn,doOnInteractions:dn,methodNames:un};on.default=Ue;V={};function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t,n){return(fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vn(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(n):t.value}})(e,t,n||e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function yn(e,t,n){return t&&bn(e.prototype,t),n&&bn(e,n),e}Object.defineProperty(V,"__esModule",{value:!0}),V.initScope=An,V.Scope=void 0;fe=(yn(Cn,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var o=this.listenerMaps[n].map[e];if(o&&!1===o(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:An(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,o=this.listenerMaps.length,i=e.before.reduce(function(e,t){return e[t]=!0,e[Tn(t)]=!0,e},{});n<o;n++){var r=this.listenerMaps[n].id;if(i[r]||i[Tn(r)])break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,t){if(-1!==this.getDocIndex(e))return!1;var n=h.getWindow(e);t=t?(0,I.default)({},t):{},this.documents.push({doc:e,options:t}),this.events.documents.push(e),e!==this.document&&this.events.add(n,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:n,scope:this,options:t})}},{key:"removeDocument",value:function(e){var t=this.getDocIndex(e),n=h.getWindow(e),o=this.documents[t].options;this.events.remove(n,"unload",this.onWindowUnload),this.documents.splice(t,1),this.events.documents.splice(t,1),this.fire("scope:remove-document",{doc:e,window:n,scope:this,options:o})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){e=this.getDocIndex(e);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),Cn);function Cn(){var t=this;_n(this,Cn),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=y.default,this.defaults=(0,nt.default)(dt.defaults),this.Eventable=Pt.Eventable,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=(0,Qt.createInteractStatic)(this),this.InteractEvent=ht.InteractEvent,this.Interactable=void 0,this.interactables=new Yt.InteractableSet(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(e){return t.removeDocument(e.target)};var i=this;this.Interactable=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,jt.Interactable);var n,o,e=(n=t,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=vn(n);e=o?(e=vn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return t=this,!(e=e)||"object"!==gn(e)&&"function"!=typeof e?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):e});function t(){return _n(this,t),e.apply(this,arguments)}return yn(t,[{key:"set",value:function(e){return fn(vn(t.prototype),"set",this).call(this,e),i.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){fn(vn(t.prototype),"unset",this).call(this),i.interactables.list.splice(i.interactables.list.indexOf(this),1),i.fire("interactable:unset",{interactable:this})}},{key:"_defaults",get:function(){return i.defaults}}]),t}()}function An(e,t){return e.isInitialized=!0,h.init(t),p.default.init(t),y.default.init(t),ve.default.init(t),e.window=t,e.document=t.document,e.usePlugin(on.default),e.usePlugin(Ut.default),e}function Tn(e){return e&&e.replace(/\/.*$/,"")}V.Scope=fe;var Sn={};function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.init=Sn.default=void 0;var In=new V.Scope,Ce=In.interactStatic;Sn.default=Ce;Re=function(e){return In.init(e)};Sn.init=Re,"object"===("undefined"==typeof window?"undefined":En(window))&&window&&Re(window);var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.default=void 0,kn.default=function(){};var On={};Object.defineProperty(On,"__esModule",{value:!0}),On.default=void 0,On.default=function(){};var wn={};function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(wn,"__esModule",{value:!0}),wn.default=void 0,wn.default=function(h){function e(e,t){for(var n=h.range,o=h.limits,i=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,r=void 0===(o=h.offset)?{x:0,y:0}:o,s={range:n,grid:h,x:null,y:null},a=0;a<p.length;a++){var l=Nn(p[a],2),c=l[0],u=l[1],d=Math.round((e-r.x)/h[c]),l=Math.round((t-r.y)/h[u]);s[c]=Math.max(i.left,Math.min(i.right,d*h[c]+r.x)),s[u]=Math.max(i.top,Math.min(i.bottom,l*h[u]+r.y))}return s}var p=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(e){var t=Nn(e,2),e=t[0],t=t[1];return e in h||t in h});return e.grid=h,e.coordFields=p,e};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Object.defineProperty(Ln,"edgeTarget",{enumerable:!0,get:function(){return kn.default}}),Object.defineProperty(Ln,"elements",{enumerable:!0,get:function(){return On.default}}),Object.defineProperty(Ln,"grid",{enumerable:!0,get:function(){return wn.default}});var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.default=void 0;Je={id:"snappers",install:function(e){e=e.interactStatic;e.snappers=(0,I.default)(e.snappers||{},Ln),e.createSnapGrid=e.snappers.grid}};Dn.default=Je;ze={};function Mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function Bn(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Mn(Object(i),!0).forEach(function(e){t=o,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e;var t,n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):Mn(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}Object.defineProperty(ze,"__esModule",{value:!0}),ze.aspectRatio=ze.default=void 0;Ye={start:function(e){var t=e.state,n=e.rect,o=e.edges,i=e.pageCoords,r=t.options.ratio,s=t.options,a=s.equalDelta,s=s.modifiers;"preserve"===r&&(r=n.width/n.height),t.startCoords=(0,I.default)({},i),t.startRect=(0,I.default)({},n),t.ratio=r,t.equalDelta=a;a=t.linkedEdges={top:o.top||o.left&&!o.bottom,left:o.left||o.top&&!o.right,bottom:o.bottom||o.right&&!o.top,right:o.right||o.bottom&&!o.left};if(t.xIsPrimaryAxis=!(!o.left&&!o.right),t.equalDelta)t.edgeSign=(a.left?1:-1)*(a.top?1:-1);else{o=t.xIsPrimaryAxis?a.top:a.left;t.edgeSign=o?-1:1}if((0,I.default)(e.edges,a),s&&s.length){a=new ot.default(e.interaction);a.copyFrom(e.interaction.modification),a.prepareStates(s),(t.subModification=a).startAll(Bn({},e))}},set:function(e){var t=e.state,n=e.rect,o=e.coords,i=(0,I.default)({},o),r=t.equalDelta?xn:Pn;if(r(t,t.xIsPrimaryAxis,o,n),!t.subModification)return null;n=(0,I.default)({},n);(0,k.addEdges)(t.linkedEdges,n,{x:o.x-i.x,y:o.y-i.y});e=t.subModification.setAll(Bn(Bn({},e),{},{rect:n,edges:t.linkedEdges,pageCoords:o,prevCoords:o,prevRect:n})),n=e.delta;return e.changed&&(r(t,Math.abs(n.x)>Math.abs(n.y),e.coords,e.rect),(0,I.default)(o,e.coords)),e.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function xn(e,t,n){var o=e.startCoords,e=e.edgeSign;t?n.y=o.y+(n.x-o.x)*e:n.x=o.x+(n.y-o.y)*e}function Pn(e,t,n,o){var i=e.startRect,r=e.startCoords,s=e.ratio,e=e.edgeSign;if(t){t=o.width/s;n.y=r.y+(t-i.height)*e}else{s=o.height*s;n.x=r.x+(s-i.width)*e}}ze.aspectRatio=Ye;Ue=(0,ct.makeModifier)(Ye,"aspectRatio");ze.default=Ue;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.default=void 0;fe=function(){};fe._defaults={};Fn.default=fe;V={};Object.defineProperty(V,"__esModule",{value:!0}),Object.defineProperty(V,"default",{enumerable:!0,get:function(){return Fn.default}});var Hn={};function Jn(e,t,n){return S.default.func(e)?k.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):k.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.getRestrictionRect=Jn,Hn.restrict=Hn.default=void 0;Ce={start:function(e){var t=e.rect,n=e.startOffset,o=e.state,i=e.interaction,r=e.pageCoords,s=o.options,a=s.elementRect,e=(0,I.default)({left:0,top:0,right:0,bottom:0},s.offset||{});if(t&&a){i=Jn(s.restriction,i,r);if(i){r=i.right-i.left-t.width,i=i.bottom-i.top-t.height;r<0&&(e.left+=r,e.right+=r),i<0&&(e.top+=i,e.bottom+=i)}e.left+=n.left-t.width*a.left,e.top+=n.top-t.height*a.top,e.right+=n.right-t.width*(1-a.right),e.bottom+=n.bottom-t.height*(1-a.bottom)}o.offset=e},set:function(e){var t=e.coords,n=e.interaction,o=e.state,e=o.options,o=o.offset,n=Jn(e.restriction,n,t);if(n){n=k.xywhToTlbr(n);t.x=Math.max(Math.min(n.right-o.right,t.x),n.left+o.left),t.y=Math.max(Math.min(n.bottom-o.bottom,t.y),n.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Hn.restrict=Ce;Re=(0,ct.makeModifier)(Ce,"restrict");Hn.default=Re;var jn={};Object.defineProperty(jn,"__esModule",{value:!0}),jn.restrictEdges=jn.default=void 0;var zn={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Wn={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Vn(e,t){for(var n=["top","left","bottom","right"],o=0;o<n.length;o++){var i=n[o];i in e||(e[i]=t[i])}return e}Je={noInner:zn,noOuter:Wn,start:function(e){var t,n=e.interaction,o=e.startOffset,i=e.state,e=i.options;e&&(t=(0,Hn.getRestrictionRect)(e.offset,n,n.coords.start.page),t=k.rectToXY(t));t=t||{x:0,y:0},i.offset={top:t.y+o.top,left:t.x+o.left,bottom:t.y-o.bottom,right:t.x-o.right}},set:function(e){var t=e.coords,n=e.edges,o=e.interaction,i=e.state,r=i.offset,s=i.options;if(n){e=(0,I.default)({},t),i=(0,Hn.getRestrictionRect)(s.inner,o,e)||{},o=(0,Hn.getRestrictionRect)(s.outer,o,e)||{};Vn(i,zn),Vn(o,Wn),n.top?t.y=Math.min(Math.max(o.top+r.top,e.y),i.top+r.top):n.bottom&&(t.y=Math.max(Math.min(o.bottom+r.bottom,e.y),i.bottom+r.bottom)),n.left?t.x=Math.min(Math.max(o.left+r.left,e.x),i.left+r.left):n.right&&(t.x=Math.max(Math.min(o.right+r.right,e.x),i.right+r.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};jn.restrictEdges=Je;Ye=(0,ct.makeModifier)(Je,"restrictEdges");jn.default=Ye;Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});fe=(Ue.restrictRect=Ue.default=void 0,I.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},Hn.restrict.defaults),Ce={start:Hn.restrict.start,set:Hn.restrict.set,defaults:fe};Ue.restrictRect=Ce;Re=(0,ct.makeModifier)(Ce,"restrictRect");Ue.default=Re;Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.restrictSize=Je.default=void 0;var Yn={width:-1/0,height:-1/0},Gn={width:1/0,height:1/0},Ye={start:function(e){return jn.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,o=e.rect,i=e.edges,r=n.options;if(i){var s=k.tlbrToXywh((0,Hn.getRestrictionRect)(r.min,t,e.coords))||Yn,t=k.tlbrToXywh((0,Hn.getRestrictionRect)(r.max,t,e.coords))||Gn;n.options={endOnly:r.endOnly,inner:(0,I.default)({},jn.restrictEdges.noInner),outer:(0,I.default)({},jn.restrictEdges.noOuter)},i.top?(n.options.inner.top=o.bottom-s.height,n.options.outer.top=o.bottom-t.height):i.bottom&&(n.options.inner.bottom=o.top+s.height,n.options.outer.bottom=o.top+t.height),i.left?(n.options.inner.left=o.right-s.width,n.options.outer.left=o.right-t.width):i.right&&(n.options.inner.right=o.left+s.width,n.options.outer.right=o.left+t.width),jn.restrictEdges.set(e),n.options=r}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Je.restrictSize=Ye;fe=(0,ct.makeModifier)(Ye,"restrictSize");Je.default=fe;Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Object.defineProperty(Ce,"default",{enumerable:!0,get:function(){return Fn.default}});var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Re={start:function(e){var n,t,o=e.interaction,i=e.interactable,r=e.element,s=e.rect,a=e.state,l=e.startOffset,c=a.options,t=c.offsetWithOrigin?(e=(t=e).interaction.element,(0,k.rectToXY)((0,k.resolveRectLike)(t.state.options.origin,null,null,[e]))||(0,N.default)(t.interactable,e,t.interaction.prepared.name)):{x:0,y:0};if("startCoords"===c.offset)n={x:o.coords.start.page.x,y:o.coords.start.page.y};else{o=(0,k.resolveRectLike)(c.offset,i,r,[o]);(n=(0,k.rectToXY)(o)||{x:0,y:0}).x+=t.x,n.y+=t.y}c=c.relativePoints;a.offsets=s&&c&&c.length?c.map(function(e,t){return{index:t,relativePoint:e,x:l.left-s.width*e.x+n.x,y:l.top-s.height*e.y+n.y}}):[(0,I.default)({index:0,relativePoint:null},n)]},set:function(e){var t=e.interaction,n=e.coords,o=e.state,i=o.options,r=o.offsets,e=(0,N.default)(t.interactable,t.element,t.prepared.name),s=(0,I.default)({},n),a=[];i.offsetWithOrigin||(s.x-=e.x,s.y-=e.y);for(var l=0;l<r.length;l++)for(var c=r[l],u=s.x-c.x,d=s.y-c.y,h=0,p=i.targets.length;h<p;h++){var g,f=i.targets[h];(g=S.default.func(f)?f(u,d,t._proxy,c,h):f)&&a.push({x:(S.default.number(g.x)?g.x:u)+c.x,y:(S.default.number(g.y)?g.y:d)+c.y,range:(S.default.number(g.range)?g:i).range,source:f,index:h,offset:c})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},v=0;v<a.length;v++){var _=a[v],b=_.range,y=_.x-s.x,C=_.y-s.y,A=(0,D.default)(y,C),T=A<=b;b===1/0&&m.inRange&&m.range!==1/0&&(T=!1),m.target&&!(T?m.inRange&&b!==1/0?A/b<m.distance/m.range:b===1/0&&m.range!==1/0||A<m.distance:!m.inRange&&A<m.distance)||(m.target=_,m.distance=A,m.range=b,m.inRange=T,m.delta.x=y,m.delta.y=C)}return m.inRange&&(n.x=m.target.x,n.y=m.target.y),o.closest=m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!(Un.snap=Un.default=void 0),origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Un.snap=Re;Ye=(0,ct.makeModifier)(Re,"snap");Un.default=Ye;var Xn={};function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.snapSize=Xn.default=void 0;fe={start:function(e){var t=e.state,n=e.edges,o=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:o.offset||"self",origin:{x:0,y:0},range:o.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Un.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t=e.interaction,n=e.state,o=e.coords,i=n.options,r=n.offsets,s={x:o.x-r[0].x,y:o.y-r[0].y};n.options=(0,I.default)({},i),n.options.targets=[];for(var a=0;a<(i.targets||[]).length;a++){var l=(i.targets||[])[a],c=void 0;if(c=S.default.func(l)?l(s.x,s.y,t):l){for(var u=0;u<n.targetFields.length;u++){var d=function(e){if(Array.isArray(e))return e}(h=n.targetFields[u])||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(t.push(r.value),2!==t.length);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}}(h)||function(e){if(e){if("string"==typeof e)return Kn(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Kn(e,2):void 0}}(h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=d[0],d=d[1];if(h in c||d in c){c.x=c[h],c.y=c[d];break}}n.options.targets.push(c)}}e=Un.snap.set(e);return n.options=i,e},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Xn.snapSize=fe;Re=(0,ct.makeModifier)(fe,"snapSize");Xn.default=Re;Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.snapEdges=Ye.default=void 0;fe={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],Xn.snapSize.start(e)):null},set:Xn.snapSize.set,defaults:(0,I.default)((0,nt.default)(Xn.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ye.snapEdges=fe;Re=(0,ct.makeModifier)(fe,"snapEdges");Ye.default=Re;fe={};Object.defineProperty(fe,"__esModule",{value:!0}),Object.defineProperty(fe,"default",{enumerable:!0,get:function(){return Fn.default}});Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Object.defineProperty(Re,"default",{enumerable:!0,get:function(){return Fn.default}});var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0;ze={aspectRatio:ze.default,restrictEdges:jn.default,restrict:Hn.default,restrictRect:Ue.default,restrictSize:Je.default,snapEdges:Ye.default,snap:Un.default,snapSize:Xn.default,spring:fe.default,avoid:V.default,transform:Re.default,rubberband:Ce.default};qn.default=ze;Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.default=void 0;Je={id:"modifiers",install:function(e){var t,n=e.interactStatic;for(t in e.usePlugin(ct.default),e.usePlugin(Dn.default),n.modifiers=qn.default,qn.default){var o=qn.default[t],i=o._defaults,o=o._methods;i._methods=o,e.defaults.perAction[t]=i}}};Ue.default=Je;Ye={};Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.default=void 0,Ye.default={};var Zn={};function $n(e){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PointerEvent=Zn.default=void 0;fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(l,W.BaseEvent);var n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=to(n);e=o?(e=to(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments);return t=this,!(e=e)||"object"!==$n(e)&&"function"!=typeof e?eo(t):e});function l(e,t,n,o,i,r){var s;if(function(e){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}(this),(s=a.call(this,i)).type=void 0,s.originalEvent=void 0,s.pointerId=void 0,s.pointerType=void 0,s.double=void 0,s.pageX=void 0,s.pageY=void 0,s.clientX=void 0,s.clientY=void 0,s.dt=void 0,s.eventable=void 0,x.pointerExtend(eo(s),n),n!==t&&x.pointerExtend(eo(s),t),s.timeStamp=r,s.originalEvent=n,s.type=e,s.pointerId=x.getPointerId(t),s.pointerType=x.getPointerType(t),s.target=o,s.currentTarget=null,"tap"===e){o=i.getPointerIndex(t);s.dt=s.timeStamp-i.pointers[o].downTime;o=s.timeStamp-i.tapTime;s.double=!!(i.prevTap&&"doubletap"!==i.prevTap.type&&i.prevTap.target===s.target&&o<500)}else"doubletap"===e&&(s.dt=t.timeStamp-i.tapTime);return s}return function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(l.prototype,[{key:"_subtractOrigin",value:function(e){var t=e.x,e=e.y;return this.pageX-=t,this.pageY-=e,this.clientX-=t,this.clientY-=e,this}},{key:"_addOrigin",value:function(e){var t=e.x,e=e.y;return this.pageX+=t,this.pageY+=e,this.clientX+=t,this.clientY+=e,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),l}();Zn.PointerEvent=Zn.default=fe;var no={};Object.defineProperty(no,"__esModule",{value:!0}),no.default=void 0;var oo={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=oo,e.defaults.actions.pointerEvents=oo.defaults,(0,I.default)(e.actions.phaselessTypes,oo.types)},listeners:{"interactions:new":function(e){e=e.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,e=e.pointerInfo;!t&&e.hold||(e.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,o=e.pointer,i=e.event,r=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&so(e),io({interaction:n,pointer:o,event:i,eventTarget:r,type:"move"},t))},"interactions:down":function(p,e){!function(e){for(var t=p.interaction,n=p.pointer,o=p.event,i=p.eventTarget,r=p.pointerIndex,r=t.pointers[r].hold,s=b.getPath(i),a={interaction:t,pointer:n,event:o,eventTarget:i,type:"hold",targets:[],path:s,node:null},l=0;l<s.length;l++){var c=s[l];a.node=c,e.fire("pointerEvents:collect-targets",a)}if(a.targets.length){for(var u=1/0,d=0;d<a.targets.length;d++){var h=a.targets[d].eventable.options.holdDuration;h<u&&(u=h)}r.duration=u,r.timeout=setTimeout(function(){io({interaction:t,eventTarget:i,pointer:n,event:o,type:"hold"},e)},u)}}(e),io(p,e)},"interactions:up":function(e,t){so(e),io(e,t),n=e.interaction,o=e.pointer,i=e.event,e=e.eventTarget,n.pointerWasMoved||io({interaction:n,eventTarget:e,pointer:o,event:i,type:"tap"},t);var n,o,i},"interactions:cancel":function(e,t){so(e),io(e,t)}},PointerEvent:Zn.PointerEvent,fire:io,collectEventTargets:ro,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function io(e,t){var n=e.interaction,o=e.pointer,i=e.event,r=e.eventTarget,s=e.type,a=e.targets,l=void 0===a?ro(e,t):a,c=new Zn.PointerEvent(s,o,i,r,n,t.now());t.fire("pointerEvents:new",{pointerEvent:c});for(var a={interaction:n,pointer:o,event:i,eventTarget:r,targets:l,type:s,pointerEvent:c},u=0;u<l.length;u++){var d,h=l[u];for(d in h.props||{})c[d]=h.props[d];var p=(0,N.default)(h.eventable,h.node);if(c._subtractOrigin(p),c.eventable=h.eventable,c.currentTarget=h.node,h.eventable.fire(c),c._addOrigin(p),c.immediatePropagationStopped||c.propagationStopped&&u+1<l.length&&l[u+1].node!==c.currentTarget)break}if(t.fire("pointerEvents:fired",a),"tap"===s){t=c.double?io({interaction:n,pointer:o,event:i,eventTarget:r,type:"doubletap"},t):c;n.prevTap=t,n.tapTime=t.timeStamp}return c}function ro(e,t){var n=e.interaction,o=e.pointer,i=e.event,r=e.eventTarget,s=e.type,a=n.getPointerIndex(o),e=n.pointers[a];if("tap"===s&&(n.pointerWasMoved||!e||e.downTarget!==r))return[];for(var l=b.getPath(r),c={interaction:n,pointer:o,event:i,eventTarget:r,type:s,path:l,targets:[],node:null},u=0;u<l.length;u++){var d=l[u];c.node=d,t.fire("pointerEvents:collect-targets",c)}return"hold"===s&&(c.targets=c.targets.filter(function(e){return e.eventable.options.holdDuration===n.pointers[a].hold.duration})),c.targets}function so(e){var t=e.interaction,e=e.pointerIndex,e=t.pointers[e].hold;e&&e.timeout&&(clearTimeout(e.timeout),e.timeout=null)}no.default=oo;var ao={};function lo(e){e=e.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}Object.defineProperty(ao,"__esModule",{value:!0}),ao.default=void 0;V={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(no.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(e,t){return e["pointerEvents:".concat(t)]=lo,e},{"pointerEvents:new":function(e){e=e.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,o=e.pointerEvent,i=e.eventTarget,e=e.targets;if("hold"===o.type&&e.length){e=e[0].eventable.options.holdRepeatInterval;e<=0||(n.holdIntervalHandle=setTimeout(function(){t.pointerEvents.fire({interaction:n,eventTarget:i,type:"hold",pointer:o,event:o},t)},e))}}})};ao.default=V;var co={};function uo(e){return(0,I.default)(this.events.options,e),this}Object.defineProperty(co,"__esModule",{value:!0}),co.default=void 0;Re={id:"pointer-events/interactableTargets",install:function(e){e=e.Interactable;e.prototype.pointerEvents=uo;var o=e.prototype._backCompatOption;e.prototype._backCompatOption=function(e,t){var n=o.call(this,e,t);return n===this&&(this.events.options[e]=t),n}},listeners:{"pointerEvents:collect-targets":function(e,t){var o=e.targets,i=e.node,r=e.type,s=e.eventTarget;t.interactables.forEachMatch(i,function(e){var t=e.events,n=t.options;t.types[r]&&t.types[r].length&&e.testIgnoreAllow(n,i,s)&&o.push({node:i,eventable:t,props:{interactable:e}})})},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,e=e.options;(0,I.default)(n.events.options,t.pointerEvents.defaults),(0,I.default)(n.events.options,e.pointerEvents||{})}}};co.default=Re;Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=void 0;ze={id:"pointer-events",install:function(e){e.usePlugin(no),e.usePlugin(ao.default),e.usePlugin(co.default)}};Ce.default=ze;Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=void 0,Je.default={};fe={};function ho(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(i,r,s){for(var a=S.default.string(i.target)?G.from(i._context.querySelectorAll(i.target)):[i.target],l=s.window.Promise,c=l?[]:null,u=0;u<a.length&&"break"!==function(){var t=a[u],e=i.getRect(t);if(!e)return"break";var n=G.find(s.interactions.list,function(e){return e.interacting()&&e.interactable===i&&e.element===t&&e.prepared.name===r.name}),o=void 0;n?(n.move(),c&&(o=n._reflowPromise||new l(function(e){n._reflowResolve=e}))):(e={page:{x:(e=(0,k.tlbrToXywh)(e)).x,y:e.y},client:{x:e.x,y:e.y},timeStamp:s.now()},e=x.coordsToEvent(e),o=function(e,t,n,o,i){var r=e.interactions.new({pointerType:"reflow"}),s={interaction:r,event:i,pointer:i,eventTarget:n,phase:"reflow"};r.interactable=t,r.element=n,r.prevEvent=i,r.updatePointer(i,i,n,!0),x.setZeroCoords(r.coords.delta),(0,ke.copyAction)(r.prepared,o),r._doPhase(s);e=e.window.Promise,e=e?new e(function(e){r._reflowResolve=e}):void 0;return r._reflowPromise=e,r.start(o,t,n),r._interacting?(r.move(s),r.end(i)):(r.stop(),r._reflowResolve()),r.removePointer(i,i),e}(s,i,t,r,e));c&&c.push(o)}();u++);return c&&l.all(c).then(function(){return i})}(this,e,t)}}Object.defineProperty(fe,"__esModule",{value:!0}),fe.install=ho,fe.default=void 0;V={id:"reflow",install:ho,listeners:{"interactions:stop":function(e,t){e=e.interaction;"reflow"===e.pointerType&&(e._reflowResolve&&e._reflowResolve(),G.remove(t.interactions.list,e))}}};fe.default=V;Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=void 0,Re.default={};ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.exchange=void 0,ze.exchange={};V={};Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0,V.default={};var po={exports:{}};function go(e){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(po.exports,"__esModule",{value:!0}),po.exports.default=void 0,Sn.default.use(Ye.default),Sn.default.use(Xe.default),Sn.default.use(Et.default),Sn.default.use(a.default),Sn.default.use(me.default),Sn.default.use(Ce.default),Sn.default.use(Rt.default),Sn.default.use(Ue.default),Sn.default.use(Ge.default),Sn.default.use(ge.default),Sn.default.use(Ae.default),Sn.default.use(fe.default),Sn.default.use(Ie.default),Sn.default.use(V.default),Sn.default.use(Je.default),Sn.default.__utils={exchange:ze.exchange,displace:Re,pointer:x},Sn.default.use(Q.default);Q=Sn.default;if(po.exports.default=Q,"object"===go(po)&&po)try{po.exports=Sn.default}catch(t){}Sn.default.default=Sn.default,po=po.exports;var fo={exports:{}};function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(fo.exports,"__esModule",{value:!0}),fo.exports.default=void 0;Q=po.default;if(fo.exports.default=Q,"object"===mo(fo)&&fo)try{fo.exports=po.default}catch(t){}return po.default.default=po.default,fo.exports});(function(){var n=function(){return this}();n||"undefined"==typeof window||(n=window);if("undefined"==typeof requirejs){var i=function(e,t,n){"string"==typeof e?(2==arguments.length&&(n=t),i.modules[e]||(i.payloads[e]=n,i.modules[e]=null)):i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};i.modules={},i.payloads={};function r(e,t,n){if("string"==typeof t){var o=c(e,t);if(null!=o)return n&&n(),o}else if("[object Array]"===Object.prototype.toString.call(t)){for(var i=[],r=0,s=t.length;r<s;++r){var a=c(e,t[r]);if(null==a&&l.original)return;i.push(a)}return n&&n.apply(null,i)||!0}}var l=function(e,t){var n=r("",e,t);return null==n&&l.original?l.original.apply(this,arguments):n},s=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return s(e,n[0])+"!"+s(e,n[1])}if("."==t.charAt(0)){t=e.split("/").slice(0,-1).join("/")+"/"+t;for(;-1!==t.indexOf(".")&&o!=t;){var o=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},c=function(e,n){n=s(e,n);var t=i.modules[n];if(!t){if("function"==typeof(t=i.payloads[n])){var e={id:n,uri:"",exports:o={},packaged:!0},o=t(function(e,t){return r(n,e,t)},o,e)||e.exports;i.modules[n]=o,delete i.payloads[n]}t=i.modules[n]=o||t}return t};!function(e){var t=n;e&&(n[e]||(n[e]={}),t=n[e]);t.define&&t.define.packaged||(i.original=t.define,t.define=i,t.define.packaged=!0);t.require&&t.require.packaged||(l.original=t.require,t.require=l,t.require.packaged=!0)}("")}})(),define("ace/lib/fixoldbrowsers",["require","exports","module"],function(e,t,n){"use strict";"undefined"==typeof Element||Element.prototype.remove||Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var o="object"==typeof navigator?navigator:{},i=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),r=o.userAgent||"",o=o.appName||"";t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==o||0<=o.indexOf("MSAppHost")?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=r.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,t.isAIR=0<=r.indexOf("AdobeAIR"),t.isAndroid=0<=r.indexOf("Android"),t.isChromeOS=0<=r.indexOf(" CrOS "),t.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid}),define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,r,t){"use strict";var n=e("./useragent");r.buildDom=function e(t,n,o){if("string"==typeof t&&t){var i=document.createTextNode(t);return n&&n.appendChild(i),i}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var r=[],s=0;s<t.length;s++){var a=e(t[s],n,o);a&&r.push(a)}return r}var l=document.createElement(t[0]),c=t[1],i=1;c&&"object"==typeof c&&!Array.isArray(c)&&(i=2);for(s=i;s<t.length;s++)e(t[s],l,o);return 2==i&&Object.keys(c).forEach(function(e){var t=c[e];"class"===e?l.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?l[e]=t:"ref"===e?o&&(o[t]=l):null!=t&&l.setAttribute(e,t)}),n&&n.appendChild(l),l},r.getDocumentHead=function(e){return(e=e||document).head||e.getElementsByTagName("head")[0]||e.documentElement},r.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},r.removeChildren=function(e){e.innerHTML=""},r.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},r.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},r.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},r.addCssClass=function(e,t){r.hasCssClass(e,t)||(e.className+=" "+t)},r.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var o=n.indexOf(t);if(-1==o)break;n.splice(o,1)}e.className=n.join(" ")},r.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),o=!0;;){var i=n.indexOf(t);if(-1==i)break;o=!1,n.splice(i,1)}return o&&n.push(t),e.className=n.join(" "),o},r.setCssClass=function(e,t,n){n?r.addCssClass(e,t):r.removeCssClass(e,t)},r.hasCssString=function(e,t){var n,o=0;if(n=(t=t||document).querySelectorAll("style"))for(;o<n.length;)if(n[o++].id===e)return!0},r.importCssString=function(e,t,n){var o=n;n&&n.getRootNode&&(o=n.getRootNode())&&o!=n||(o=document);var i=o.ownerDocument||o;if(t&&r.hasCssString(t,o))return null;t&&(e+="\n/*# sourceURL=ace/css/"+t+" */");n=r.createElement("style");n.appendChild(i.createTextNode(e)),t&&(n.id=t),o==i&&(o=r.getDocumentHead(i)),o.insertBefore(n,o.firstChild)},r.importCssStylsheet=function(e,t){r.buildDom(["link",{rel:"stylesheet",href:e}],r.getDocumentHead(t))},r.scrollbarWidth=function(e){var t=r.createElement("ace_inner");t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block";var n=r.createElement("ace_outer"),o=n.style;o.position="absolute",o.left="-10000px",o.overflow="hidden",o.width="200px",o.minWidth="0px",o.height="150px",o.display="block",n.appendChild(t);var i=e.documentElement;i.appendChild(n);e=t.offsetWidth;o.overflow="scroll";t=t.offsetWidth;return e==t&&(t=n.clientWidth),i.removeChild(n),e-t},"undefined"==typeof document&&(r.importCssString=function(){}),r.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},r.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},r.HAS_CSS_ANIMATION=!1,r.HAS_CSS_TRANSFORMS=!1,r.HI_DPI=!n.isWin||"undefined"!=typeof window&&1.5<=window.devicePixelRatio;if("undefined"!=typeof document){e=document.createElement("div");r.HI_DPI&&void 0!==e.style.transform&&(r.HAS_CSS_TRANSFORMS=!0),n.isEdge||void 0===e.style.animationName||(r.HAS_CSS_ANIMATION=!0),e=null}r.HAS_CSS_TRANSFORMS?r.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:r.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}}),define("ace/lib/oop",["require","exports","module"],function(e,n,t){"use strict";n.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},n.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},n.implement=function(e,t){n.mixin(e,t)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var o=e("./oop"),i=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return o.mixin(n,n.MODIFIER_KEYS),o.mixin(n,n.PRINTABLE_KEYS),o.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();o.mixin(t,i),t.keyCodeToString=function(e){var t=i[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,d,t){"use strict";function i(){return null==n&&function(){n=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){n={passive:!1}}})}catch(e){}}(),n}function r(e,t,n){this.elem=e,this.type=t,this.callback=n}function s(e,t,n){var o=f(t);if(!h.isMac&&c){t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(o|=8);if(c.altGr){if(3==(3&o))return;c.altGr=0}if(18===n||17===n){var i="location"in t?t.location:t.keyLocation;17===n&&1===i?1==c[n]&&(u=t.timeStamp):18===n&&3===o&&2===i&&t.timeStamp-u<50&&(c.altGr=!0)}}n in l.MODIFIER_KEYS&&(n=-1);if(!o&&13===n)if(3===(i="location"in t?t.location:t.keyLocation)){e(t,o,-n);if(t.defaultPrevented)return}if(h.isChromeOS&&8&o){e(t,o,n);if(t.defaultPrevented)return;o&=-9}return!!(o||n in l.FUNCTION_KEYS||n in l.PRINTABLE_KEYS)&&e(t,o,n)}function a(){c=Object.create(null)}var n,l=e("./keys"),h=e("./useragent"),c=null,u=0;r.prototype.destroy=function(){g(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var p=d.addListener=function(e,t,n,o){e.addEventListener(t,n,i()),o&&o.$toDestroy.push(new r(e,t,n))},g=d.removeListener=function(e,t,n){e.removeEventListener(t,n,i())};d.stopEvent=function(e){return d.stopPropagation(e),d.preventDefault(e),!1},d.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},d.preventDefault=function(e){e.preventDefault&&e.preventDefault()},d.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||h.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},d.capture=function(e,t,n){function o(e){t&&t(e),n&&n(e),g(i,"mousemove",t),g(i,"mouseup",o),g(i,"dragstart",o)}var i=e&&e.ownerDocument||document;return p(i,"mousemove",t),p(i,"mouseup",o),p(i,"dragstart",o),o},d.addMouseWheelListener=function(e,t,n){"onmousewheel"in e?p(e,"mousewheel",function(e){void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/8,e.wheelY=-e.wheelDeltaY/8):(e.wheelX=0,e.wheelY=-e.wheelDelta/8),t(e)},n):"onwheel"in e?p(e,"wheel",function(e){switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.35*e.deltaX||0,e.wheelY=.35*e.deltaY||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}t(e)},n):p(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),t(e)},n)},d.addMultiMouseDownListener=function(e,n,o,i,t){function r(e){0!==d.getButton(e)?c=0:1<e.detail?4<++c&&(c=1):c=1;if(h.isIE){var t=5<Math.abs(e.clientX-s)||5<Math.abs(e.clientY-a);l&&!t||(c=1);l&&clearTimeout(l),l=setTimeout(function(){l=null},n[c-1]||600),1==c&&(s=e.clientX,a=e.clientY)}e._clicks=c,o[i]("mousedown",e);if(4<c)c=0;else if(1<c)return o[i](u[c],e)}var s,a,l,c=0,u={2:"dblclick",3:"tripleclick",4:"quadclick"};Array.isArray(e)||(e=[e]),e.forEach(function(e){p(e,"mousedown",r,t)})};function f(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}d.getModifierString=function(e){return l.KEY_MODS[f(e)]},d.addCommandKeyListener=function(e,n,t){if(h.isOldGecko||h.isOpera&&!("KeyboardEvent"in window)){var o=null;p(e,"keydown",function(e){o=e.keyCode},t),p(e,"keypress",function(e){return s(n,e,o)},t)}else{var i=null;p(e,"keydown",function(e){c[e.keyCode]=(c[e.keyCode]||0)+1;var t=s(n,e,e.keyCode);return i=e.defaultPrevented,t},t),p(e,"keypress",function(e){i&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(d.stopEvent(e),i=null)},t),p(e,"keyup",function(e){c[e.keyCode]=null},t),c||(a(),p(window,"focus",a))}};if("object"==typeof window&&window.postMessage&&!h.isOldIE){var m=1;d.nextTick=function(t,n){n=n||window;var o="zero-timeout-message-"+m++,i=function(e){e.data==o&&(d.stopPropagation(e),g(n,"message",i),t())};p(n,"message",i),n.postMessage(o,"*")}}d.$idleBlocked=!1,d.onIdle=function(t,e){return setTimeout(function e(){d.$idleBlocked?setTimeout(e,100):t()},e)},d.$idleBlockId=null,d.blockIdle=function(e){d.$idleBlockId&&clearTimeout(d.$idleBlockId),d.$idleBlocked=!0,d.$idleBlockId=setTimeout(function(){d.$idleBlocked=!1},e||100)},d.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),d.nextFrame?d.nextFrame=d.nextFrame.bind(window):d.nextFrame=function(e){setTimeout(e,17)}}),define("ace/range",["require","exports","module"],function(e,t,n){"use strict";function r(e,t,n,o){this.start={row:e,column:t},this.end={row:n,column:o}}(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t=e.end,e=e.start,t=this.compare(t.row,t.column);return 1==t?1==(t=this.compare(e.row,e.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(e.row,e.column))?-1:1==t?42:0},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){e=this.compareRange(e);return-1==e||0==e||1==e},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row!==e||t<=this.end.column?0:1:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){var n,o;this.end.row>t?n={row:t+1,column:0}:this.end.row<e&&(n={row:e,column:0});this.start.row>t?o={row:t+1,column:0}:this.start.row<e&&(o={row:e,column:0});return r.fromPoints(o||this.start,n||this.end)},this.extend=function(e,t){var n,o,i=this.compare(e,t);if(0==i)return this;-1==i?n={row:e,column:t}:o={row:e,column:t};return r.fromPoints(n||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),e=e.documentToScreenPosition(this.end);return new r(t.row,t.column,e.row,e.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";0<t;){1&t&&(n+=e);(t>>=1)&&(e+=e)}return n};var o=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(o,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t,n={};for(t in e)n[t]=e[t];return n},t.copyArray=function(e){for(var t=[],n=0,o=e.length;n<o;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function e(t){if("object"!=typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var o=0;o<t.length;o++)n[o]=e(t[o]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;n={};for(o in t)n[o]=e(t[o]);return n},t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t,n=Object.create(null);for(t in e)n[t]=e[t];return n},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){function t(){n=null,e()}var n=null,o=function(e){return o.cancel(),n=setTimeout(t,e||0),o};return(o.schedule=o).call=function(){return this.cancel(),e(),o},o.cancel=function(){return clearTimeout(n),n=null,o},o.isPending=function(){return n},o},t.delayedCall=function(e,t){function n(){i=null,e()}function o(e){null==i&&(i=setTimeout(n,e||t))}var i=null;return o.delay=function(e){i&&clearTimeout(i),i=setTimeout(n,e||t)},(o.schedule=o).call=function(){this.cancel(),e()},o.cancel=function(){i&&clearTimeout(i),i=null},o.isPending=function(){return i},o}}),define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var o;n.exports={lineMode:!1,pasteCancelled:function(){return!!(o&&o>Date.now()-50)||(o=!1)},cancel:function(){o=Date.now()}}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var R=e("../lib/event"),L=e("../lib/useragent"),D=e("../lib/dom"),M=e("../lib/lang"),B=e("../clipboard"),x=L.isChrome<18,P=L.isIE,F=63<L.isChrome,H=e("../lib/keys"),J=H.KEY_MODS,j=L.isIOS,z=j?/\s/:/\n/,W=L.isMobile;t.TextInput=function(e,d){function t(){n=!0,h.blur(),h.focus(),n=!1}function s(){clearTimeout(N),N=setTimeout(function(){a&&(h.style.cssText=a,a=""),d.renderer.$isMousePressed=!1,d.renderer.$keepTextAreaAtCursor&&d.renderer.$moveTextAreaToCursor()},0)}var h=D.createElement("textarea");h.className="ace_text-input",h.setAttribute("wrap","off"),h.setAttribute("autocorrect","off"),h.setAttribute("autocapitalize","off"),h.setAttribute("spellcheck",!1),h.style.opacity="0",e.insertBefore(h,e.firstChild);var l=!1,p=!1,c=!1,g=!1,a="";W||(h.style.fontSize="1px");var f=!1,n=!1,m="",v=0,_=0,b=0;try{var u=document.activeElement===h}catch(e){}R.addListener(h,"blur",function(e){n||(d.onBlur(e),u=!1)},d),R.addListener(h,"focus",function(e){if(!n){u=!0;if(L.isEdge)try{if(!document.hasFocus())return}catch(e){}d.onFocus(e),L.isEdge?setTimeout(y):y()}},d),this.$focusScroll=!1,this.focus=function(){if(a||F||"browser"==this.$focusScroll)return h.focus({preventScroll:!0});var e=h.style.top;h.style.position="fixed",h.style.top="0px";try{var t=0!=h.getBoundingClientRect().top}catch(e){return}var n=[];if(t)for(var o=h.parentElement;o&&1==o.nodeType;)n.push(o),o.setAttribute("ace_nocontext",!0),o=!o.parentElement&&o.getRootNode?o.getRootNode().host:o.parentElement;h.focus({preventScroll:!0}),t&&n.forEach(function(e){e.removeAttribute("ace_nocontext")}),setTimeout(function(){h.style.position="","0px"==h.style.top&&(h.style.top=e)},0)},this.blur=function(){h.blur()},this.isFocused=function(){return u},d.on("beforeEndOperation",function(){var e=d.curOp,t=e&&e.command&&e.command.name;if("insertstring"!=t){e=t&&(e.docChanged||e.selectionChanged);c&&e&&(m=h.value="",O()),y()}});var y=j?function(e){if(u&&(!l||e)&&!g){var t="\n ab"+(e=e||"")+"cde fg\n";t!=h.value&&(h.value=m=t);e=4+(e.length||(d.selection.isEmpty()?0:1));4==v&&_==e||h.setSelectionRange(4,e),v=4,_=e}}:function(){if(!c&&!g&&(u||E)){c=!0;var e=0,t=0,n="";if(d.session){var o=d.selection,i=o.getRange(),o=o.cursor.row;e=i.start.column,t=i.end.column,n=d.session.getLine(o);if(i.start.row!=o){var r=d.session.getLine(o-1),e=i.start.row<o-1?0:e;t+=r.length+1,n=r+"\n"+n}else if(i.end.row!=o){r=d.session.getLine(o+1),t=i.end.row>o+1?r.length:t;t+=n.length+1,n=n+"\n"+r}else W&&0<o&&(n="\n"+n,t+=1,e+=1);400<n.length&&(e<400&&t<400?n=n.slice(0,400):(n="\n",e==t?e=t=0:(e=0,t=1)))}n=n+"\n\n";n!=m&&(h.value=m=n,v=_=n.length),E&&(v=h.selectionStart,_=h.selectionEnd);if(_!=t||v!=e||h.selectionEnd!=_)try{h.setSelectionRange(e,t),v=e,_=t}catch(e){}c=!1}};this.resetSelection=y,u&&d.onFocus();var o=null;this.setInputHandler=function(e){o=e};function i(e,t){E=E&&!1;if(p)return y(),e&&d.onPaste(e),p=!1,"";for(var n=h.selectionStart,o=h.selectionEnd,i=v,r=m.length-_,s=e,a=e.length-n,l=e.length-o,c=0;0<i&&m[c]==e[c];)c++,i--;s=s.slice(c),c=1;for(;0<r&&m.length-c>v-1&&m[m.length-c]==e[e.length-c];)c++,r--;a-=c-1,l-=c-1;var u=s.length-c+1;u<0&&(i=-u,u=0),s=s.slice(0,u);if(!(t||s||a||i||r||l))return"";t=!(g=!0);return L.isAndroid&&". "==s&&(s="  ",t=!0),s&&!i&&!r&&!a&&!l||f?d.onTextInput(s):d.onTextInput(s,{extendLeft:i,extendRight:r,restoreStart:a,restoreEnd:l}),g=!1,m=e,v=n,_=o,b=l,t?"\n":s}function r(e){if(c)return k();if(e&&e.inputType){if("historyUndo"==e.inputType)return d.execCommand("undo");if("historyRedo"==e.inputType)return d.execCommand("redo")}var t=h.value,e=i(t,!0);(500<t.length||z.test(e)||W&&v<1&&v==_)&&y()}function C(e,t){var n=d.getCopyText();if(!n)return R.preventDefault(e);I(e,n)?(j&&(y(n),l=n,setTimeout(function(){l=!1},10)),t?d.onCut():d.onCopy(),R.preventDefault(e)):(l=!0,h.value=n,h.select(),setTimeout(function(){l=!1,y(),t?d.onCut():d.onCopy()}))}function A(e){C(e,!0)}function T(e){C(e,!1)}function S(e){var t=I(e);B.pasteCancelled()||("string"==typeof t?(t&&d.onPaste(t,e),L.isIE&&setTimeout(y),R.preventDefault(e)):(h.value="",p=!0))}var E=!(this.getInputHandler=function(){return o}),I=function(e,t,n){var o=e.clipboardData||window.clipboardData;if(o&&!x){var i=P||n?"Text":"text/plain";try{return t?!1!==o.setData(i,t):o.getData(i)}catch(e){if(!n)return I(e,t,!0)}}};R.addCommandKeyListener(h,d.onCommandKey.bind(d),d),R.addListener(h,"select",function(e){if(!c){l?l=!1:0===(t=h).selectionStart&&t.selectionEnd>=m.length&&t.value===m&&m&&t.selectionEnd!==_?(d.selectAll(),y()):W&&h.selectionStart!=v&&y();var t}},d),R.addListener(h,"input",r,d),R.addListener(h,"cut",A,d),R.addListener(h,"copy",T,d),R.addListener(h,"paste",S,d),"oncut"in h&&"oncopy"in h&&"onpaste"in h||R.addListener(e,"keydown",function(e){if((!L.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:T(e);break;case 86:S(e);break;case 88:A(e)}},d);var k=function(){if(c&&d.onCompositionUpdate&&!d.$readOnly){if(f)return t();if(c.useTextareaForIME)d.onCompositionUpdate(h.value);else{var e=h.value;i(e),c.markerRange&&(c.context&&(c.markerRange.start.column=c.selectionStart=c.context.compositionStartOffset),c.markerRange.end.column=c.markerRange.start.column+_-c.selectionStart+b)}}},O=function(e){d.onCompositionEnd&&!d.$readOnly&&(c=!1,d.onCompositionEnd(),d.off("mousedown",t),e&&r())},w=M.delayedCall(k,50).schedule.bind(null,null);R.addListener(h,"compositionstart",function(e){if(!c&&d.onCompositionStart&&!d.$readOnly){c={};if(!f){e.data&&(c.useTextareaForIME=!1),setTimeout(k,0),d._signal("compositionStart"),d.on("mousedown",t);e=d.getSelectionRange();e.end.row=e.start.row,e.end.column=e.start.column,c.markerRange=e,c.selectionStart=v,d.onCompositionStart(c),c.useTextareaForIME?(m=h.value="",_=v=0):(h.msGetInputContext&&(c.context=h.msGetInputContext()),h.getInputContext&&(c.context=h.getInputContext()))}}},d),R.addListener(h,"compositionupdate",k,d),R.addListener(h,"keyup",function(e){27==e.keyCode&&h.value.length<h.selectionStart&&(c||(m=h.value),v=_=-1,y()),w()},d),R.addListener(h,"keydown",w,d),R.addListener(h,"compositionend",O,d),this.getElement=function(){return h},this.setCommandMode=function(e){f=e,h.readOnly=!1},this.setReadOnly=function(e){f||(h.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){E=!0,y(),d._emit("nativecontextmenu",{target:d,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,t){a=a||h.style.cssText,h.style.cssText=(t?"z-index:100000;":"")+(L.isIE?"opacity:0.1;":"")+"text-indent: -"+(v+_)*d.renderer.characterWidth*.5+"px;";var n=d.container.getBoundingClientRect(),t=D.computedStyle(d.container),o=n.top+(parseInt(t.borderTopWidth)||0),i=n.left+(parseInt(n.borderLeftWidth)||0),r=n.bottom-o-h.clientHeight-2,n=function(e){D.translate(h,e.clientX-i-2,Math.min(e.clientY-o-2,r))};n(e);"mousedown"==e.type&&(d.renderer.$isMousePressed=!0,clearTimeout(N),L.isWin&&R.capture(d.container,n,s))},this.onContextMenuClose=s;var N,e=function(e){d.textInput.onContextMenu(e),s()};R.addListener(h,"mouseup",e,d),R.addListener(h,"mousedown",function(e){e.preventDefault(),s()},d),R.addListener(d.renderer.scroller,"contextmenu",e,d),R.addListener(h,"contextmenu",e,d),j&&function(r,s){var t=null,a=!1;s.addEventListener("keydown",function(e){t&&clearTimeout(t),a=!0},!0),s.addEventListener("keyup",function(e){t=setTimeout(function(){a=!1},100)},!0);function e(e){if(document.activeElement===s&&!(a||c||r.$mouseHandler.isMousePressed||l)){var t=s.selectionStart,n=s.selectionEnd,o=null,i=0;0==t?o=H.up:1==t?o=H.home:_<n&&"\n"==m[n]?o=H.end:t<v&&" "==m[t-1]?(o=H.left,i=J.option):t<v||t==v&&_!=v&&t==n?o=H.left:_<n&&2<m.slice(0,n).split("\n").length?o=H.down:_<n&&" "==m[n-1]?(o=H.right,i=J.option):(_<n||n==_&&_!=v&&t==n)&&(o=H.right);t!==n&&(i|=J.shift);if(o){if(!r.onCommandKey({},i,o)&&r.commands){o=H.keyCodeToString(o);o=r.commands.findKeyCommand(i,o);o&&r.execCommand(o)}v=t,_=n,y("")}}}document.addEventListener("selectionchange",e),r.on("destroy",function(){document.removeEventListener("selectionchange",e)})}(d,h)},t.$setUserAgentForTests=function(e,t){W=e,j=t}}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";function o(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),e.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(e){t[e]=this[e]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}function s(e,t){return(e.start.row==e.end.row?2*t.column-e.start.column-e.end.column:e.start.row!=e.end.row-1||e.start.column||e.end.column?2*t.row-e.start.row-e.end.row:t.column-4)<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/useragent");(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var o=this.editor,i=e.getButton();if(0===i){this.mousedownEvent.time=Date.now();if(t&&!o.isFocused()){o.focus();if(this.$focusTimeout&&!this.$clickSelection&&!o.inMultiSelectMode){this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),this.startSelect(n,1<e.domEvent._clicks),e.preventDefault()}!o.getSelectionRange().isEmpty()&&1!=i||o.selection.moveToPosition(n),2==i&&(o.textInput.onContextMenu(e.domEvent),r.isMozilla||e.preventDefault())},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e=this.editor,t=e.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var n,o=this.$clickSelection.comparePoint(t);n=-1==o?this.$clickSelection.end:1==o?this.$clickSelection.start:(t=(n=s(this.$clickSelection,t)).cursor,n.anchor);e.selection.setSelectionAnchor(n.row,n.column)}e.selection.selectToPosition(t),e.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y),o=t.selection[e](n.row,n.column);if(this.$clickSelection){var i,r=this.$clickSelection.comparePoint(o.start),e=this.$clickSelection.comparePoint(o.end);if(-1==r&&e<=0){i=this.$clickSelection.end;o.end.row==n.row&&o.end.column==n.column||(n=o.start)}else if(1==e&&0<=r){i=this.$clickSelection.start;o.start.row==n.row&&o.start.column==n.column||(n=o.end)}else i=-1==r&&1==e?(n=o.end,o.start):(n=(o=s(this.$clickSelection,n)).cursor,o.anchor);t.selection.setSelectionAnchor(i.row,i.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e,t,n,o,o=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,o=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(o-t,2))),t=Date.now();(0<o||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,e=n.session.getBracketRange(t);e?(e.isEmpty()&&(e.start.column--,e.end.column++),this.setState("select")):(e=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=e,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");e=n.getSelectionRange();e.isMultiLine()&&e.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(e.start.row),this.$clickSelection.end=n.selection.getLineRange(e.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,o=e.domEvent.timeStamp,i=o-n.t,r=i?e.wheelX/i:n.vx,s=i?e.wheelY/i:n.vy;i<550&&(r=(r+n.vx)/2,s=(s+n.vy)/2);var a=Math.abs(r/s),i=!1;1<=a&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(i=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(i=!0);i?n.allowed=o:o-n.allowed<550&&(Math.abs(r)<=1.5*Math.abs(n.vx)&&Math.abs(s)<=1.5*Math.abs(n.vy)?(i=!0,n.allowed=o):n.allowed=0);n.t=o,n.vx=r,n.vy=s;return i?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(o.prototype),t.DefaultHandlers=o}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";function o(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}e("./lib/oop");var i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){this.getElement().textContent=e},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(o.prototype),t.Tooltip=o}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";function d(e){s.call(this,e)}var h=e("../lib/dom"),o=e("../lib/oop"),p=e("../lib/event"),s=e("../tooltip").Tooltip;o.inherits(d,s),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),r=this.getHeight();n<(e+=15)+i&&(e-=e+i-n),o<(t+=15)+r&&(t-=20+r),s.prototype.setPosition.call(this,e,t)}}.call(d.prototype),t.GutterHandler=function(o){function i(){n=n&&clearTimeout(n),a&&(u.hide(),a=null,l._signal("hideGutterTooltip",u),l.off("mousewheel",i))}function r(e){u.setPosition(e.x,e.y)}var n,s,a,l=o.editor,c=l.renderer.$gutterLayer,u=new d(l.container);o.editor.setDefaultHandler("guttermousedown",function(e){if(l.isFocused()&&0==e.getButton())if("foldWidgets"!=c.getRegion(e)){var t=e.getDocumentPosition().row,n=l.session.selection;if(e.getShiftKey())n.selectTo(t,0);else{if(2==e.domEvent.detail)return l.selectAll(),e.preventDefault();o.$clickSelection=l.selection.getLineRange(t)}return o.setState("selectByLines"),o.captureMouse(e),e.preventDefault()}});o.editor.setDefaultHandler("guttermousemove",function(e){var t=e.domEvent.target||e.domEvent.srcElement;if(h.hasCssClass(t,"ace_fold-widget"))return i();a&&o.$tooltipFollowsMouse&&r(e),s=e;n=n||setTimeout(function(){n=null,(s&&!o.isMousePressed?function(){var e=s.getDocumentPosition().row,t=c.$annotations[e];if(!t)return i();if(e==l.session.getLength()){var e=l.renderer.pixelToScreenCoordinates(0,s.y).row,n=s.$pos;if(e>l.session.documentToScreenRow(n.row,n.column))return i()}if(a!=t){a=t.text.join("<br/>"),u.setHtml(a),u.show(),l._signal("showGutterTooltip",u),l.on("mousewheel",i);if(o.$tooltipFollowsMouse)r(s);else{n=s.domEvent.target.getBoundingClientRect(),t=u.getElement().style;t.left=n.right+"px",t.top=n.bottom+"px"}}}:i)()},50)}),p.addListener(l.renderer.$gutter,"mouseout",function(e){s=null;a&&!n&&(n=setTimeout(function(){n=null,i()},50))},l),l.on("changeSession",i)}}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("../lib/event"),i=e("../lib/useragent"),t=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return o.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(t.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";function o(t){function e(){var e,t,n,o,i=g;g=c.renderer.screenToTextCoordinates(u,d),e=g,t=i,n=Date.now(),o=!t||e.row!=t.row,t=!t||e.column!=t.column,!_||o||t?(c.moveCursorToPosition(e),_=n,b={x:u,y:d}):5<T(b.x,b.y,u,d)?_=null:200<=n-_&&(c.renderer.scrollCursorIntoView(),_=null),function(e,t){var n=Date.now(),o=c.renderer.layerConfig.lineHeight,i=c.renderer.layerConfig.characterWidth,r=c.renderer.scroller.getBoundingClientRect(),s={x:{left:u-r.left,right:r.right-u},y:{top:d-r.top,bottom:r.bottom-d}},a=Math.min(s.x.left,s.x.right),l=Math.min(s.y.top,s.y.bottom),r={row:e.row,column:e.column};a/i<=2&&(r.column+=s.x.left<s.x.right?-3:2),l/o<=1&&(r.row+=s.y.top<s.y.bottom?-1:1);o=e.row!=r.row,s=e.column!=r.column,t=!t||e.row!=t.row;o||s&&!t?v?200<=n-v&&c.renderer.scrollCursorIntoView(r):v=n:v=null}(g,i)}function n(){p=c.selection.toOrientedRange(),l=c.session.addMarker(p,"ace_selection",c.getSelectionStyle()),c.clearSelection(),c.isFocused()&&c.renderer.$cursorLayer.setBlinking(!1),clearInterval(h),e(),h=setInterval(e,20),C=0,E.addListener(document,"mousemove",i)}function o(){clearInterval(h),c.session.removeMarker(l),l=null,c.selection.fromOrientedRange(p),c.isFocused()&&!m&&c.$resetCursorStyle(),C=0,_=v=g=p=null,E.removeListener(document,"mousemove",i)}function i(){null==A&&(A=setTimeout(function(){null!=A&&l&&o()},20))}function r(e){e=e.types;return!e||Array.prototype.some.call(e,function(e){return"text/plain"==e||"Text"==e})}function s(e){var t=["copy","copymove","all","uninitialized"],n=I.isMac?e.altKey:e.ctrlKey,o="uninitialized";try{o=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var i="none";return n&&0<=t.indexOf(o)?i="copy":0<=["move","copymove","linkmove","all","uninitialized"].indexOf(o)?i="move":0<=t.indexOf(o)&&(i="copy"),i}var c=t.editor,a=S.createElement("img");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",I.isOpera&&(a.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(e){t[e]=this[e]},this),c.on("mousedown",this.onMouseDown.bind(t));var l,u,d,h,p,g,f,m,v,_,b,y=c.container,C=0;this.onDragStart=function(e){if(this.cancelDrag||!y.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}p=c.getSelectionRange();var n=e.dataTransfer;n.effectAllowed=c.getReadOnly()?"copy":"copyMove",I.isOpera&&(c.container.appendChild(a),a.scrollTop=0),n.setDragImage&&n.setDragImage(a,0,0),I.isOpera&&c.container.removeChild(a),n.clearData(),n.setData("Text",c.session.getTextRange()),m=!0,this.setState("drag")},this.onDragEnd=function(e){y.draggable=!1,m=!1,this.setState(null);if(!c.getReadOnly()){e=e.dataTransfer.dropEffect;f||"move"!=e||c.session.remove(c.getSelectionRange()),c.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!c.getReadOnly()&&r(e.dataTransfer))return u=e.clientX,d=e.clientY,l||n(),C++,e.dataTransfer.dropEffect=f=s(e),E.preventDefault(e)},this.onDragOver=function(e){if(!c.getReadOnly()&&r(e.dataTransfer))return u=e.clientX,d=e.clientY,l||(n(),C++),null!==A&&(A=null),e.dataTransfer.dropEffect=f=s(e),E.preventDefault(e)},this.onDragLeave=function(e){if(--C<=0&&l)return o(),f=null,E.preventDefault(e)},this.onDrop=function(e){if(g){var t=e.dataTransfer;if(m)switch(f){case"move":p=p.contains(g.row,g.column)?{start:g,end:g}:c.moveText(p,g);break;case"copy":p=c.moveText(p,g,!0)}else{t=t.getData("Text");p={start:g,end:c.session.insert(g,t)},c.focus(),f=null}return o(),E.preventDefault(e)}},E.addListener(y,"dragstart",this.onDragStart.bind(t),c),E.addListener(y,"dragend",this.onDragEnd.bind(t),c),E.addListener(y,"dragenter",this.onDragEnter.bind(t),c),E.addListener(y,"dragover",this.onDragOver.bind(t),c),E.addListener(y,"dragleave",this.onDragLeave.bind(t),c),E.addListener(y,"drop",this.onDrop.bind(t),c);var A=null}function T(e,t,n,o){return Math.sqrt(Math.pow(n-e,2)+Math.pow(o-t,2))}var S=e("../lib/dom"),E=e("../lib/event"),I=e("../lib/useragent");(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=I.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;I.isIE&&"dragReady"==this.state&&3<T(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&t.dragDrop();"dragWait"===this.state&&0<T(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),o=e.getButton(),i=e.domEvent.detail||1;if(1===i&&0===o&&n&&(!e.editor.inMultiSelectMode||!e.getAccelKey()&&!e.getShiftKey())){this.mousedownEvent.time=Date.now();n=e.domEvent.target||e.domEvent.srcElement;"unselectable"in n&&(n.unselectable="on");if(t.getDragDelay()){if(I.isWebKit){this.cancelDrag=!0;t.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(o.prototype),t.DragdropHandler=o}),define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var S=e("./mouse_event").MouseEvent,o=e("../lib/event"),a=e("../lib/dom");t.addTouchListeners=function(e,u){function i(){function t(e){var t,n=e.target.getAttribute("action");if("more"==n||!i)return i=!i,t=u.getCopyText(),e=u.session.getUndoManager().hasUndo(),void s.replaceChild(a.buildDom(i?["span",!t&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],t&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],t&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],o&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],e&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),s.firstChild);if("paste"==n)o.readText().then(function(e){u.execCommand(n,e)});else if(n){"cut"!=n&&"copy"!=n||(o?o.writeText(u.getCopyText()):document.execCommand("copy"));u.execCommand(n)}s.firstChild.style.display="none",i=!1,"openCommandPallete"!=n&&u.focus()}var o=window.navigator&&window.navigator.clipboard,i=!1;s=a.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){b="menu",e.stopPropagation(),e.preventDefault(),u.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),t(e)},onclick:t},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function n(){s||i();var e=u.selection.cursor,t=u.renderer.textToScreenCoordinates(e.row,e.column),n=u.renderer.textToScreenCoordinates(0,0).pageX,o=u.renderer.scrollLeft,e=u.container.getBoundingClientRect();s.style.top=t.pageY-e.top-3+"px",t.pageX-e.left<e.width-70?(s.style.left="",s.style.right="10px"):(s.style.right="",s.style.left=n+o-e.left+"px"),s.style.display="",s.firstChild.style.display="none",u.on("input",r)}function r(e){s&&(s.style.display="none"),u.off("input",r)}function d(){m=null,clearTimeout(m);var e=u.selection.getRange(),t=e.contains(v.row,v.column);!e.isEmpty()&&t||(u.selection.moveToPosition(v),u.selection.selectWord());b="wait",n()}var h,p,g,f,m,t,v,_,s,b="scroll",y=0,C=0,A=0,T=0;o.addListener(e,"contextmenu",function(e){_&&u.textInput.getElement().focus()},u),o.addListener(e,"touchstart",function(e){var t=e.touches;if(m||1<t.length)clearTimeout(m),m=null,g=-1,b="zoom";else{_=u.$mouseHandler.isMousePressed=!0;var n=u.renderer.layerConfig.lineHeight,o=u.renderer.layerConfig.lineHeight,i=e.timeStamp;f=i;var r=t[0],s=r.clientX,a=r.clientY;Math.abs(h-s)+Math.abs(p-a)>n&&(g=-1),h=e.clientX=s,p=e.clientY=a,A=T=0;var l=new S(e,u);v=l.getDocumentPosition();if(i-g<500&&1==t.length&&!y)C++,e.preventDefault(),e.button=0,function(){m=null,clearTimeout(m),u.selection.moveToPosition(v);var e=2<=C?u.selection.getLineRange(v.row):u.session.getBracketRange(v);e&&!e.isEmpty()?u.selection.setRange(e):u.selection.selectWord(),b="wait"}();else{C=0;var c=u.selection.cursor,r=u.selection.isEmpty()?c:u.selection.anchor,s=u.renderer.$cursorLayer.getPixelPosition(c,!0),a=u.renderer.$cursorLayer.getPixelPosition(r,!0),l=u.renderer.scroller.getBoundingClientRect(),t=u.renderer.layerConfig.offset,c=u.renderer.scrollLeft,r=function(e,t){return(e/=o)*e+(t=t/n-.75)*t};if(e.clientX<l.left){b="zoom";return}s=r(e.clientX-l.left-s.left+c,e.clientY-l.top-s.top+t),t=r(e.clientX-l.left-a.left+c,e.clientY-l.top-a.top+t);s<3.5&&t<3.5&&(b=t<s?"cursor":"anchor"),b=t<3.5?"anchor":s<3.5?"cursor":"scroll",m=setTimeout(d,450)}g=i}},u),o.addListener(e,"touchend",function(e){_=u.$mouseHandler.isMousePressed=!1,t&&clearInterval(t),"zoom"==b?(b="",y=0):m?(u.selection.moveToPosition(v),y=0,n()):"scroll"==b?(y+=60,t=setInterval(function(){y--<=0&&(clearInterval(t),t=null),Math.abs(A)<.01&&(A=0),Math.abs(T)<.01&&(T=0),y<20&&(A*=.9),y<20&&(T*=.9);var e=u.session.getScrollTop();u.renderer.scrollBy(10*A,10*T),e==u.session.getScrollTop()&&(y=0)},10),r()):n(),clearTimeout(m),m=null},u),o.addListener(e,"touchmove",function(e){m&&(clearTimeout(m),m=null);var t=e.touches;if(!(1<t.length||"zoom"==b)){var n=t[0],o=h-n.clientX,i=p-n.clientY;if("wait"==b){if(!(4<o*o+i*i))return e.preventDefault();b="cursor"}h=n.clientX,p=n.clientY,e.clientX=n.clientX,e.clientY=n.clientY;t=e.timeStamp,n=t-f;f=t;if("scroll"==b){var r=new S(e,u);r.speed=1,r.wheelX=o,r.wheelY=i,10*Math.abs(o)<Math.abs(i)&&(o=0),10*Math.abs(i)<Math.abs(o)&&(i=0),0!=n&&(A=o/n,T=i/n),u._emit("mousewheel",r),r.propagationStopped||(A=T=0)}else{r=new S(e,u).getDocumentPosition();"cursor"==b?u.selection.moveCursorToPosition(r):"anchor"==b&&u.selection.setSelectionAnchor(r.row,r.column),u.renderer.scrollCursorIntoView(r),e.preventDefault()}}},u)}}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,n){var t=i.getDocumentHead(),o=document.createElement("script");o.src=e,t.appendChild(o),o.onload=o.onreadystatechange=function(e,t){!t&&o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(o=o.onload=o.onreadystatechange=null,t||n())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";function r(){this.propagationStopped=!0}function s(){this.defaultPrevented=!0}var o={};o._emit=o._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],o=this._defaultHandlers[e];if(n.length||o){"object"==typeof t&&t||(t={});t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var i=0;i<n.length;i++){n[i](t,this);if(t.propagationStopped)break}return o&&!t.defaultPrevented?o(t,this):void 0}},o._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var o=0;o<n.length;o++)n[o](t,this)}},o.once=function(t,n){var o=this;this.on(t,function e(){o.off(t,e),n.apply(null,arguments)});if(!n)return new Promise(function(e){n=e})},o.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if((n=n||(this._defaultHandlers={_disabled_:{}}))[e]){var o=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(o);o=i.indexOf(t);-1!=o&&i.splice(o,1)}n[e]=t},o.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var o=n._disabled_[e];if(n[e]==t)o&&this.setDefaultHandler(e,o.pop());else if(o){t=o.indexOf(t);-1!=t&&o.splice(t,1)}}},o.on=o.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[e];return-1==(o=o||(this._eventRegistry[e]=[])).indexOf(t)&&o[n?"unshift":"push"](t),t},o.off=o.removeListener=o.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};e=this._eventRegistry[e];if(e){t=e.indexOf(t);-1!==t&&e.splice(t,1)}},o.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=o}),define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){function o(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function i(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout(function(){throw n})}var r=e("./oop"),s=e("./event_emitter").EventEmitter,a={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter(function(e){return!n[e].hidden})}return e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return o('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}},e=function(){this.$defaultOptions={}};(function(){r.implement(this,s),this.defineOptions=function(n,e,o){return n.$options||(this.$defaultOptions[e]=n.$options={}),Object.keys(o).forEach(function(e){var t=o[e];"string"==typeof t&&(t={forwardTo:t}),t.name||(t.name=e),"initialValue"in(n.$options[t.name]=t)&&(n["$"+t.name]=t.initialValue)}),r.implement(n,a),this},this.resetOptions=function(n){Object.keys(n.$options).forEach(function(e){var t=n.$options[e];"value"in t&&n.setOption(e,t.value)})},this.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var o=this.$defaultOptions[e]||(this.$defaultOptions[e]={});o[t]&&(o.forwardTo?this.setDefaultValue(o.forwardTo,t,n):o[t].value=n)},this.setDefaultValues=function(t,n){Object.keys(n).forEach(function(e){this.setDefaultValue(t,e,n[e])},this)},this.warn=o,this.reportError=i}).call(e.prototype),t.AppConfig=e}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(h,p,g){var e=h("./lib/lang"),i=(h("./lib/oop"),h("./lib/net")),t=h("./lib/app_config").AppConfig;g.exports=p=new t;var f=function(){return this||"undefined"!=typeof window&&window}(),m={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};p.get=function(e){if(!m.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return m[e]},p.set=function(e,t){if(m.hasOwnProperty(e))m[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e)},p.all=function(){return e.copyObject(m)},p.$modes={},p.moduleUrl=function(e,t){if(m.$moduleUrls[e])return m.$moduleUrls[e];var n=e.split("/"),o="snippets"==(t=t||n[n.length-2]||"")?"/":"-",i=n[n.length-1];"worker"==t&&"-"==o&&(e=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g"),i=i.replace(e,""));(!i||i==t)&&1<n.length&&(i=n[n.length-2]);n=m[t+"Path"];return null==n?n=m.basePath:"/"==o&&(t=o=""),n&&"/"!=n.slice(-1)&&(n+="/"),n+t+o+i+this.get("suffix")},p.setModuleUrl=function(e,t){return m.$moduleUrls[e]=t},p.$loading={},p.loadModule=function(n,e){var t,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{t=h(n)}catch(e){}if(t&&!p.$loading[n])return e&&e(t);p.$loading[n]||(p.$loading[n]=[]),p.$loading[n].push(e);if(!(1<p.$loading[n].length)){e=function(){h([n],function(t){p._emit("load.module",{name:n,module:t});var e=p.$loading[n];p.$loading[n]=null,e.forEach(function(e){e&&e(t)})})};if(!p.get("packaged"))return e();i.loadScript(p.moduleUrl(n,o),e),r()}};var r=function(){m.basePath||m.workerPath||m.modePath||m.themePath||Object.keys(m.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),r=function(){})};p.init=function(e){if(f&&f.document){m.packaged=e||h.packaged||g.packaged||f.define&&define.packaged;for(var t,n={},o="",e=document.currentScript||document._currentScript,i=(e&&e.ownerDocument||document).getElementsByTagName("script"),r=0;r<i.length;r++){var s=i[r],a=s.src||s.getAttribute("src");if(a){for(var l=s.attributes,c=0,u=l.length;c<u;c++){var d=l[c];0===d.name.indexOf("data-ace-")&&(n[d.name.replace(/^data-ace-/,"").replace(/-(.)/g,function(e,t){return t.toUpperCase()})]=d.value)}a=a.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);a&&(o=a[1])}}o&&(n.base=n.base||o,n.packaged=!0),n.basePath=n.base,n.workerPath=n.workerPath||n.base,n.modePath=n.modePath||n.base,n.themePath=n.themePath||n.base,delete n.base;for(t in n)void 0!==n[t]&&p.set(t,n[t])}},p.version="1.4.12"}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var u=e("../lib/event"),d=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,s=e("./default_gutter_handler").GutterHandler,h=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,l=e("./touch_handler").addTouchListeners,o=e("../config"),e=function(o){var i=this;this.editor=o,new r(this),new s(this),new a(this);function e(e){(!document.hasFocus||!document.hasFocus()||!o.isFocused()&&document.activeElement==(o.textInput&&o.textInput.getElement()))&&window.focus(),o.focus()}var t=o.renderer.getMouseEventTarget();u.addListener(t,"click",this.onMouseEvent.bind(this,"click"),o),u.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove"),o),u.addMultiMouseDownListener([t,o.renderer.scrollBarV&&o.renderer.scrollBarV.inner,o.renderer.scrollBarH&&o.renderer.scrollBarH.inner,o.textInput&&o.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",o),u.addMouseWheelListener(o.container,this.onMouseWheel.bind(this,"mousewheel"),o),l(o.container,o);var n=o.renderer.$gutter;u.addListener(n,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),o),u.addListener(n,"click",this.onMouseEvent.bind(this,"gutterclick"),o),u.addListener(n,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),o),u.addListener(n,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),o),u.addListener(t,"mousedown",e,o),u.addListener(n,"mousedown",e,o),d.isIE&&o.renderer.scrollBarV&&(u.addListener(o.renderer.scrollBarV.element,"mousedown",e,o),u.addListener(o.renderer.scrollBarH.element,"mousedown",e,o)),o.on("mousemove",function(e){if(!i.state&&!i.$dragDelay&&i.$dragEnabled){var t=o.renderer.screenToTextCoordinates(e.x,e.y),n=o.session.selection.getRange(),e=o.renderer;!n.isEmpty()&&n.insideStart(t.row,t.column)?e.setCursorStyle("default"):e.setCursorStyle("")}},o)};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new h(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new h(t,this.editor))},this.onMouseWheel=function(e,t){var n=new h(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,o=this.editor.renderer;o.$isMousePressed=!0;function i(e){if(e){if(d.isWebKit&&!e.which&&s.releaseMouse)return s.releaseMouse();s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new h(e,s.editor),s.$mouseMoved=!0}}function r(e){n.off("beforeEndOperation",l),clearInterval(c),a(),s[s.state+"End"]&&s[s.state+"End"](e),s.state="",s.isMousePressed=o.$isMousePressed=!1,o.$keepTextAreaAtCursor&&o.$moveTextAreaToCursor(),s.$onCaptureMouseMove=s.releaseMouse=null,e&&s.onMouseEvent("mouseup",e),n.endOperation()}var s=this,a=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(d.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){r(e)});var l=function(e){s.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(s[s.state+"End"]&&s[s.state+"End"](),s.state="",s.releaseMouse())};n.on("beforeEndOperation",l),n.startOperation({command:{name:"mouse"}}),s.$onCaptureMouseMove=i,s.releaseMouse=u.capture(this.editor.container,i,r);var c=setInterval(a,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var t=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",t),e&&e.domEvent&&u.stopEvent(e.domEvent))}.bind(this);setTimeout(t,10),this.editor.on("nativecontextmenu",t)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(e.prototype),o.defineOptions(e.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:d.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=e}),define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var o=e("../lib/dom");t.FoldHandler=function(i){i.on("click",function(e){var t=e.getDocumentPosition(),n=i.session,t=n.getFoldAt(t.row,t.column,1);t&&(e.getAccelKey()?n.removeFold(t):n.expandFold(t),e.stop());e=e.domEvent&&e.domEvent.target;e&&o.hasCssClass(e,"ace_inline_button")&&o.hasCssClass(e,"ace_toggle_wrap")&&(n.setOption("wrap",!n.getUseWrapMode()),i.renderer.scrollCursorIntoView())}),i.on("gutterclick",function(e){if("foldWidgets"==i.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=i.session;n.foldWidgets&&n.foldWidgets[t]&&i.session.onFoldWidgetClick(t,e),i.isFocused()||i.focus(),e.stop()}}),i.on("gutterdblclick",function(e){if("foldWidgets"==i.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=i.session,o=n.getParentFoldRangeData(t,!0),o=o.range||o.firstRange;if(o){t=o.start.row;t=n.getFoldAt(t,n.getLine(t).length,1);t?n.removeFold(t):(n.addFold("...",o),i.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}e.stop()}})}}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var i=e("../lib/keys"),l=e("../lib/event"),e=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),null==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var t=this.$data,n=t.editor;return this.$handlers.map(function(e){return e.getStatusText&&e.getStatusText(n,t)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,n,o){for(var i,r=!1,s=this.$editor.commands,a=this.$handlers.length;a--;)if((i=this.$handlers[a].handleKeyboard(this.$data,e,t,n,o))&&i.command){(r="null"==i.command||s.exec(i.command,this.$editor,i.args,o))&&o&&-1!=e&&1!=i.passEvent&&1!=i.command.passEvent&&l.stopEvent(o);if(r)break}return r||-1!=e||(i={command:"insertstring"},r=s.exec("insertstring",this.$editor,t)),r&&this.$editor._signal&&this.$editor._signal("keyboardActivity",i),r},this.onCommandKey=function(e,t,n){var o=i.keyCodeToString(n);return this.$callKeyboardHandlers(t,o,n,e)},this.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)}}).call(e.prototype),t.KeyBinding=e}),define("ace/lib/bidiutil",["require","exports","module"],function(e,l,t){"use strict";function c(e,t,n,o){var i,r,s,a,l=m?A:C,c=0,u=-1,d=null,h=null,p=[];if(!o)for(d=0,o=[];d<n;d++)o[d]=f(e[d]);v=m,y=b=_=!1;for(h=0;h<n;h++){i=c,p[h]=r=function(e,t,n,o){var i,r,s,a=t[o];switch(a){case T:case S:_=!1;case k:case I:return a;case E:return _?I:E;case N:return _=!0,S;case R:return k;case L:return o<1||o+1>=t.length||(i=n[o-1])!=E&&i!=I||(l=t[o+1])!=E&&l!=I?k:(_&&(l=I),l==i?l:k);case D:return(i=0<o?n[o-1]:O)==E&&o+1<t.length&&t[o+1]==E?E:k;case M:if(0<o&&n[o-1]==E)return E;if(_)return k;s=o+1,r=t.length;for(;s<r&&t[s]==M;)s++;return s<r&&t[s]==E?E:k;case B:r=t.length,s=o+1;for(;s<r&&t[s]==B;)s++;if(s<r){var l=e[o],l=1425<=l&&l<=2303||64286==l;i=t[s];if(l&&(i==S||i==N))return S}return o<1||(i=t[o-1])==O?k:n[o-1];case O:return b=!(_=!1),m;case w:return y=!0,k;case x:case P:case H:case J:case F:_=!1;case j:return k}}(e,o,p,h),a=240&(c=l[i][r]),c&=15,t[h]=s=l[c][5];if(0<a)if(16==a){for(d=u;d<h;d++)t[d]=1;u=-1}else u=-1;if(l[c][6])-1==u&&(u=h);else if(-1<u){for(d=u;d<h;d++)t[d]=s;u=-1}o[h]==O&&(t[h]=0),v|=s}if(y)for(d=0;d<n;d++)if(o[d]==w){t[d]=m;for(var g=d-1;0<=g&&o[g]==R;g--)t[g]=m}}function u(e,t,n){if(!(v<e))if(1!=e||1!=m||b)for(var o,i,r,s,a=n.length,l=0;l<a;){if(t[l]>=e){o=l+1;for(;o<a&&t[o]>=e;)o++;for(i=l,r=o-1;i<r;i++,r--)s=n[i],n[i]=n[r],n[r]=s;l=o}l++}else n.reverse()}function f(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?191<t?T:o[t]:5==n?/[\u0591-\u05f4]/.test(e)?S:T:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?B:/[\u0660-\u0669\u066b-\u066c]/.test(e)?I:1642==t?M:/[\u06f0-\u06f9]/.test(e)?E:N:32==n&&t<=8287?i[255&t]:254==n&&65136<=t?N:k}var m=0,v=0,_=!1,b=!1,y=!1,C=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T=0,S=1,E=2,I=3,k=4,O=5,w=6,N=7,R=8,L=9,D=10,M=11,B=12,x=13,P=14,F=15,H=16,J=17,j=18,o=[j,j,j,j,j,j,j,j,j,w,O,w,R,O,j,j,j,j,j,j,j,j,j,j,j,j,j,j,O,O,O,w,R,k,k,M,M,M,k,k,k,k,k,D,L,D,L,L,E,E,E,E,E,E,E,E,E,E,L,k,k,k,k,k,k,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,k,k,k,k,k,k,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,k,k,k,k,j,j,j,j,j,j,O,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,L,k,M,M,M,M,k,k,k,k,T,k,k,j,k,k,M,M,E,E,k,T,k,k,k,E,T,k,k,k,k,k],i=[R,R,R,R,R,R,R,R,R,R,R,j,j,j,T,S,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,R,O,x,P,F,H,J,L,M,M,M,M,M,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,L,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,R];l.L=T,l.R=S,l.EN=E,l.ON_R=3,l.AN=4,l.R_H=5,l.B=6,l.RLE=7,l.DOT="·",l.doBidiReorder=function(e,t,n){if(e.length<2)return{};var o=e.split(""),i=new Array(o.length),r=new Array(o.length),s=[];m=n?1:0,c(o,s,o.length,t);for(var a=0;a<i.length;i[a]=a,a++);u(2,s,i),u(1,s,i);for(a=0;a<i.length-1;a++)t[a]===I?s[a]=l.AN:s[a]===S&&(t[a]>N&&t[a]<x||t[a]===k||t[a]===j)?s[a]=l.ON_R:0<a&&"ل"===o[a-1]&&/\u0622|\u0623|\u0625|\u0627/.test(o[a])&&(s[a-1]=s[a]=l.R_H,a++);o[o.length-1]===l.DOT&&(s[o.length-1]=l.B),"‫"===o[0]&&(s[0]=l.RLE);for(a=0;a<i.length;a++)r[a]=s[i[a]];return{logicalFromVisual:i,bidiLevels:r}},l.hasBidiCharacters=function(e,t){for(var n=!1,o=0;o<e.length;o++)t[o]=f(e.charAt(o)),n||t[o]!=S&&t[o]!=N&&t[o]!=I||(n=!0);return n},l.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}}),define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var a=e("./lib/bidiutil"),s=e("./lib/lang"),o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,e=function(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=o.test(e.getValue())};(function(){this.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&o.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){t=this.session.$getRowCacheIndex(t,this.currentRow);0<=t&&(e=this.session.$docRowCache[t])}return e},this.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,o=this.session.$getRowCacheIndex(t,this.currentRow);0<this.currentRow-e&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===o;)o=n,e++;else e=this.currentRow;return e},this.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE;if(this.session.$useWrapMode){e=this.session.$wrapData[e];e&&(void 0===t&&(t=this.getSplitIndex()),0<t&&e.length?(this.wrapIndent=e.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=t<e.length?this.line.substring(e[t-1],e[t]):this.line.substring(e[e.length-1])):this.line=this.line.substring(0,e[t])),t==e.length&&(this.line+=this.showInvisibles?n:a.DOT)}else this.line+=this.showInvisibles?n:a.DOT;var o,i=this.session,r=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(e,t){return"\t"===e||i.isFullWidth(e.charCodeAt(0))?(o="\t"===e?i.getScreenTabSize(t+r):2,r+=o-1,s.stringRepeat(a.DOT,o)):e}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var e=[];a.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,e=e.$measureCharWidth("ה");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=t,this.charWidths[a.R]=this.charWidths[a.AN]=e,this.charWidths[a.R_H]=.45*e,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},this.setEolChar=function(e){this.EOL=e},this.setContentWidth=function(e){this.contentWidth=e},this.isRtlLine=function(e){return!!this.$isRtl||(null!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),o=e.selection.getSelectionAnchor().row;o<=n.row;o++)t||e.session.getLine(o).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(o).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:o},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(o,0,1)},this.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=t<e?this.session.getOverwrite()?e:e-1:t,o=a.getVisualFromLogicalIdx(n,this.bidiMap),i=this.bidiMap.bidiLevels,r=0;!this.session.getOverwrite()&&e<=t&&i[o]%2!=0&&o++;for(var s=0;s<o;s++)r+=this.charWidths[i[s]];return!this.session.getOverwrite()&&t<e&&i[o]%2==0&&(r+=this.charWidths[i[o]]),this.wrapIndent&&(r+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(r+=this.rtlLineOffset),r},this.getSelections=function(e,t){var n,o=this.bidiMap,i=o.bidiLevels,r=[],s=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,d=0;this.wrapIndent&&(s+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var h,p=0;p<i.length;p++)h=o.logicalFromVisual[p],n=i[p],(c=a<=h&&h<l)&&!u?d=s:!c&&u&&r.push({left:d,width:s-d}),s+=this.charWidths[n],u=c;c&&p===i.length&&r.push({left:d,width:s-d});if(this.isRtlDir)for(var g=0;g<r.length;g++)r[g].left+=this.rtlLineOffset;return r},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),n=0,o=0,i=this.bidiMap.bidiLevels,r=this.charWidths[i[o]];this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(;n+r/2<e;){n+=r;if(o===i.length-1){r=0;break}r=this.charWidths[i[++o]]}return 0===(t=0<o&&i[o-1]%2!=0&&i[o]%2==0?(e<n&&o--,this.bidiMap.logicalFromVisual[o]):0<o&&i[o-1]%2==0&&i[o]%2!=0?1+(n<e?this.bidiMap.logicalFromVisual[o]:this.bidiMap.logicalFromVisual[o-1]):this.isRtlDir&&o===i.length-1&&0===r&&i[o-1]%2==0||!this.isRtlDir&&0===o&&i[o]%2!=0?1+this.bidiMap.logicalFromVisual[o]:(0<o&&i[o-1]%2!=0&&0!==r&&o--,this.bidiMap.logicalFromVisual[o]))&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(e.prototype),t.BidiHandler=e}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var o=e("./lib/oop"),i=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,e=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")})};(function(){o.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?s.fromPoints(t,t):this.isBackwards()?s.fromPoints(t,e):s.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(e,t){var n=t?e.end:e.start,e=t?e.start:e.end;this.$setSelection(n.row,n.column,e.row,e.column)},this.$setSelection=function(e,t,n,o){if(!this.$silent){var i=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,o),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||r)&&this._emit("changeSelection")}},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),e=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(e)},this.getLineRange=function(e,t){var n="number"==typeof e?e:this.lead.row,e=this.session.getFoldLine(n),e=e?(n=e.start.row,e.end.row):n;return!0===t?new s(n,0,e,this.session.getLine(e).length):new s(n,0,e+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(e,t,n){var o=e.column,i=e.column+t;return n<0&&(o=e.column-t,i=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(o,i).split(" ").length-1==t},this.moveCursorLeft=function(){var e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===e.column)0<e.row&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var t=this.session.getTabSize();this.wouldMoveIntoSoftTab(e,t,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-t):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition();if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var t=this.session.getTabSize(),e=this.lead;this.wouldMoveIntoSoftTab(e,t,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,t):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),n=this.session.screenToDocumentPosition(n,0),e=this.session.getDisplayLine(e,null,n.row,n.column).match(/^\s*/);e[0].length==t||this.session.$useEmacsStyleLineStart||(n.column+=e[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){e=this.session.getLine(t.row);if(t.column==e.length){e=e.search(/\s+$/);0<e&&(t.column=e)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),o=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(e,t,1);if(i)this.moveCursorTo(i.end.row,i.end.column);else{this.session.nonTokenRe.exec(o)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,o=n.substring(t));t>=n.length?(this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight()):(this.session.tokenRe.exec(o)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t))}},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(n=this.session.getFoldAt(e,t,-1))this.moveCursorTo(n.start.row,n.start.column);else{var n=this.session.getFoldStringAt(e,t,-1);null==n&&(n=this.doc.getLine(e).substring(0,t));n=i.stringReverse(n);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(n)&&(t-=this.session.nonTokenRe.lastIndex,n=n.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0);t<=0?(this.moveCursorTo(e,0),this.moveCursorLeft(),0<e&&this.moveCursorWordLeft()):(this.session.tokenRe.exec(n)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t))}},this.$shortWordEndIndex=function(e){var t,n=0,o=/\s/,i=this.session.tokenRe;i.lastIndex=0;if(this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&o.test(t);)n++;if(n<1){i.lastIndex=0;for(;(t=e[n])&&!i.test(t);){i.lastIndex=0,n++;if(o.test(t)){if(2<n){n--;break}for(;(t=e[n])&&o.test(t);)n++;if(2<n)break}}}}return i.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),o=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){for(var r=this.doc.getLength();e++,o=this.doc.getLine(e),e<r&&/^\s*$/.test(o););/^\s+/.test(o)||(o=""),t=0}n=this.$shortWordEndIndex(o);this.moveCursorTo(e,t+n)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column;if(o=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(o.start.row,o.start.column);var n=this.session.getLine(e).substring(0,t);if(0===t){for(;e--,n=this.doc.getLine(e),0<e&&/^\s*$/.test(n););t=n.length,/\s+$/.test(n)||(n="")}var o=i.stringReverse(n),o=this.$shortWordEndIndex(o);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(n.row,this.lead.row)?(i=this.session.$bidiHandler.getPosLeft(n.column),n.column=Math.round(i/this.session.$bidiHandler.charWidths[0])):i=n.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);if(0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var o=this.session.lineWidgets[this.lead.row];e<0?e-=o.rowsAbove||0:0<e&&(e+=o.rowCount-(o.rowsAbove||0))}var i=this.session.screenToDocumentPosition(n.row+e,n.column,i);0!==e&&0===t&&i.row===this.lead.row&&(i.column,this.lead.column),this.moveCursorTo(i.row,i.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var o=this.session.getFoldAt(e,t,1);o&&(e=o.start.row,t=o.start.column),this.$keepDesiredColumnOnChange=!0;o=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(o.charAt(t))&&o.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?--t:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){t=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(t.row,t.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return s.fromPoints(t,n)}catch(e){return s.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){var e;this.rangeCount?e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}):(e=this.getRange()).isBackwards=this.isBackwards();return e},this.fromJSON=function(e){if(null==e.start){if(this.rangeList&&1<e.length){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=s.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(e.prototype),t.Selection=e}),define("ace/tokenizer",["require","exports","module","ace/config"],function(e,t,n){"use strict";var o=e("./config"),_=2e3,e=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var n=this.states[t],o=[],i=0,r=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<n.length;l++){var c=n[l];c.defaultToken&&(r.defaultToken=c.defaultToken),c.caseInsensitive&&(s="gi");if(null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,d=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==d?c.token=c.token[0]:d-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:d-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=1<d?this.$applyToken:c.token),1<d&&(u=/\\\d/.test(c.regex)?c.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(d=1,this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),r[i]=l,i+=d,o.push(u),c.onMatch||(c.onMatch=null)}}o.length||(r[0]=0,o.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+o.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){_=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"==typeof n)return[{type:n,value:e}];for(var o=[],i=0,r=n.length;i<r;i++)t[i]&&(o[o.length]={type:n[i],value:t[i]});return o},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],o=this.tokenArray,i=0,r=o.length;i<r;i++)t[i+1]&&(n[n.length]={type:o[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var s=0,a=!1,l={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,n,o,i,r){return a?a="]"!=i:i?a=!0:o?(s==l.stack&&(l.end=r+1,l.stack=-1),s--):n&&(s++,1!=n.length&&(l.stack=s,l.start=r)),e}),null!=l.end&&/^\)*$/.test(e.substr(l.end))&&(e=e.substring(0,l.start)+e.substr(l.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){var n;t&&"string"!=typeof t?"#tmp"===(t=(n=t.slice(0))[0])&&(n.shift(),t=n.shift()):n=[];var o=t||"start",i=this.states[o];i||(o="start",i=this.states[o]);for(var r,s=this.matchMappings[o],a=this.regExps[o],l=[],c=a.lastIndex=0,u=0,d={type:null,value:""};r=a.exec(e);){var h=s.defaultToken,p=null,g=r[0],f=a.lastIndex;if(f-g.length>c){var m=e.substring(c,f-g.length);d.type==h?d.value+=m:(d.type&&l.push(d),d={type:h,value:m})}for(var v=0;v<r.length-2;v++)if(void 0!==r[v+1]){h=(p=i[s[v]]).onMatch?p.onMatch(g,o,n,e):p.token,p.next&&(o="string"==typeof p.next?p.next:p.next(o,n),(i=this.states[o])||(this.reportError("state doesn't exist",o),o="start",i=this.states[o]),s=this.matchMappings[o],c=f,(a=this.regExps[o]).lastIndex=f),p.consumeLineEnd&&(c=f);break}if(g)if("string"==typeof h)p&&!1===p.merge||d.type!==h?(d.type&&l.push(d),d={type:h,value:g}):d.value+=g;else if(h){d.type&&l.push(d),d={type:null,value:""};for(v=0;v<h.length;v++)l.push(h[v])}if(c==e.length)break;c=f;if(u++>_){u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});for(;c<e.length;)d.type&&l.push(d),d={value:e.substring(c,c+=500),type:"overflow"};o="start",n=[];break}}return d.type&&l.push(d),1<n.length&&n[0]!==o&&n.unshift("#tmp",o),{tokens:l,state:n.length?n:o}},this.reportError=o.reportError}).call(e.prototype),t.Tokenizer=e}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var l=e("../lib/lang"),e=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var o=e[n],i=0;i<o.length;i++){var r=o[i];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(t)&&(r.next=t+r.next),r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState))}this.$rules[t+n]=o}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,o,i){e="function"==typeof e?(new e).getRules():e;if(o)for(var r=0;r<o.length;r++)o[r]=t+o[r];else{o=[];for(var s in e)o.push(t+s)}this.addRules(e,t);if(n)for(var a=Array.prototype[i?"push":"unshift"],r=0;r<o.length;r++)a.apply(this.$rules[o[r]],l.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};function d(e,t){return"start"==e&&!t.length||t.unshift(this.nextState,e),this.nextState}function h(e,t){return t.shift(),t.shift()||"start"}this.normalizeRules=function(){var c=0,u=this.$rules;Object.keys(u).forEach(function e(t){var n=u[t];n.processed=!0;for(var o=0;o<n.length;o++){var i=n[o],r=null;Array.isArray(i)&&(r=i,i={}),!i.regex&&i.start&&(i.regex=i.start,i.next||(i.next=[]),i.next.push({defaultToken:i.token},{token:i.token+".end",regex:i.end||i.start,next:"pop"}),i.token=i.token+".start",i.push=!0);var s=i.next||i.push;if(s&&Array.isArray(s)){var a=i.stateName;a||("string"!=typeof(a=i.token)&&(a=a[0]||""),u[a]&&(a+=c++)),u[a]=s,e(i.next=a)}else"pop"==s&&(i.next=h);i.push&&(i.nextState=i.next||i.push,i.next=d,delete i.push);if(i.rules)for(var l in i.rules)u[l]?u[l].push&&u[l].push.apply(u[l],i.rules[l]):u[l]=i.rules[l];(s="string"==typeof i?i:i.include)&&(r=Array.isArray(s)?s.map(function(e){return u[e]}):u[s]);if(r){r=[o,1].concat(r);i.noEscape&&(r=r.filter(function(e){return!e.next})),n.splice.apply(n,r),o--}i.keywordMap&&(i.token=this.createKeywordMapper(i.keywordMap,i.defaultToken||"text",i.caseInsensitive),delete i.defaultToken)}},this)},this.createKeywordMapper=function(i,t,r,s){var a=Object.create(null);return this.$keywordList=[],Object.keys(i).forEach(function(e){for(var t=i[e].split(s||"|"),n=t.length;n--;){var o=t[n];this.$keywordList.push(o),r&&(o=o.toLowerCase()),a[o]=e}},this),i=null,r?function(e){return a[e.toLowerCase()]||t}:function(e){return a[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(e.prototype),t.TextHighlightRules=e}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";function o(){this.$behaviours={}}(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){t=("function"==typeof e?new e:e).getBehaviours(t);this.addBehaviours(t)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(o.prototype),t.Behaviour=o}),define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var o=e("./range").Range,e=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);n=e.getTokenAt(t,n);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){--this.$tokenIndex;for(;this.$tokenIndex<0;){--this.$row;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){this.$row+=1,e=e||this.$session.getLength();if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;n=0;for(;0<t;)n+=e[--t].value.length;return n},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new o(this.$row,t,this.$row,t+e.value.length)}}).call(e.prototype),t.TokenIterator=e}),define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";function h(e){var t=-1;e.multiSelect&&(t=e.selection.index,l.rangeCount!=e.multiSelect.rangeCount&&(l={rangeCount:e.multiSelect.rangeCount}));if(l[t])return d=l[t];d=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}function p(e,t,n,o){var i=e.end.row-e.start.row;return{text:n+t+o,selection:[0,e.start.column+1,i,e.end.column+(i?0:1)]}}var d,o=e("../../lib/oop"),i=e("../behaviour").Behaviour,r=e("../../token_iterator").TokenIterator,g=e("../../lib/lang"),s=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],l={},f={'"':'"',"'":"'"},m=function(u){this.add("braces","insertion",function(e,t,n,o,i){var r=n.getCursorPosition(),s=o.doc.getLine(r.row);if("{"==i){h(n);var a=n.getSelectionRange(),l=o.doc.getTextRange(a);return""!==l&&"{"!==l&&n.getWrapBehavioursEnabled()?p(a,l,"{","}"):m.isSaneInsertion(n,o)?/[\]\}\)]/.test(s[r.column])||n.inMultiSelectMode||u&&u.braces?(m.recordAutoInsert(n,o,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(n,o,"{"),{text:"{",selection:[1,1]}):void 0}if("}"==i){h(n);if("}"==s.substring(r.column,r.column+1))if(null!==o.$findOpeningBracket("}",{column:r.column+1,row:r.row})&&m.isAutoInsertedClosing(r,s,i))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==i||"\r\n"==i){h(n);n="";m.isMaybeInsertedClosing(r,s)&&(n=g.stringRepeat("}",d.maybeInsertedBrackets),m.clearMaybeInsertedClosing());if("}"===s.substring(r.column,r.column+1)){var c=o.findMatchingBracket({row:r.row,column:r.column+1},"}");if(!c)return null;c=this.$getIndent(o.getLine(c.row))}else{if(!n){m.clearMaybeInsertedClosing();return}c=this.$getIndent(s)}o=c+o.getTabString();return{text:"\n"+o+"\n"+c+n,selection:[1,o.length,1,o.length]}}m.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,n,o,i){var r=o.doc.getTextRange(i);if(!i.isMultiLine()&&"{"==r){h(n);if("}"==o.doc.getLine(i.start.row).substring(i.end.column,i.end.column+1))return i.end.column++,i;d.maybeInsertedBrackets--}}),this.add("parens","insertion",function(e,t,n,o,i){if("("==i){h(n);var r=n.getSelectionRange(),s=o.doc.getTextRange(r);return""!==s&&n.getWrapBehavioursEnabled()?p(r,s,"(",")"):m.isSaneInsertion(n,o)?(m.recordAutoInsert(n,o,")"),{text:"()",selection:[1,1]}):void 0}if(")"==i){h(n);s=n.getCursorPosition(),n=o.doc.getLine(s.row);if(")"==n.substring(s.column,s.column+1))if(null!==o.$findOpeningBracket(")",{column:s.column+1,row:s.row})&&m.isAutoInsertedClosing(s,n,i))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(e,t,n,o,i){var r=o.doc.getTextRange(i);if(!i.isMultiLine()&&"("==r){h(n);if(")"==o.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}}),this.add("brackets","insertion",function(e,t,n,o,i){if("["==i){h(n);var r=n.getSelectionRange(),s=o.doc.getTextRange(r);return""!==s&&n.getWrapBehavioursEnabled()?p(r,s,"[","]"):m.isSaneInsertion(n,o)?(m.recordAutoInsert(n,o,"]"),{text:"[]",selection:[1,1]}):void 0}if("]"==i){h(n);s=n.getCursorPosition(),n=o.doc.getLine(s.row);if("]"==n.substring(s.column,s.column+1))if(null!==o.$findOpeningBracket("]",{column:s.column+1,row:s.row})&&m.isAutoInsertedClosing(s,n,i))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(e,t,n,o,i){var r=o.doc.getTextRange(i);if(!i.isMultiLine()&&"["==r){h(n);if("]"==o.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2))return i.end.column++,i}}),this.add("string_dquotes","insertion",function(e,t,n,o,i){var r=o.$mode.$quotes||f;if(1==i.length&&r[i]&&(!this.lineCommentStart||-1==this.lineCommentStart.indexOf(i))){h(n);var s=i,a=n.getSelectionRange(),l=o.doc.getTextRange(a);if(""!==l&&(1!=l.length||!r[l])&&n.getWrapBehavioursEnabled())return p(a,l,s,s);if(!l){var c=n.getCursorPosition(),u=o.doc.getLine(c.row),i=u.substring(c.column-1,c.column),r=u.substring(c.column,c.column+1),a=o.getTokenAt(c.row,c.column),l=o.getTokenAt(c.row,c.column+1);if("\\"==i&&a&&/escape/.test(a.type))return null;var d,n=a&&/string|escape/.test(a.type),a=!l||/string|escape/.test(l.type);if(r==s)(d=n!==a)&&/string\.end/.test(l.type)&&(d=!1);else{if(n&&!a)return null;if(n&&a)return null;n=o.$mode.tokenRe;n.lastIndex=0;a=n.test(i);n.lastIndex=0;o=n.test(i);if(a||o)return null;if(r&&!/[\s;,.})\]\\]/.test(r))return null;c=u[c.column-2];if(i==s&&(c==s||n.test(c)))return null;d=!0}return{text:d?s+s:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,n,o,i){var r=o.$mode.$quotes||f,s=o.doc.getTextRange(i);if(!i.isMultiLine()&&r.hasOwnProperty(s)){h(n);if(o.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==s)return i.end.column++,i}})};m.isSaneInsertion=function(e,t){var n=e.getCursorPosition(),o=new r(t,n.row,n.column);if(!this.$matchTokenType(o.getCurrentToken()||"text",s)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;t=new r(t,n.row,n.column+1);if(!this.$matchTokenType(t.getCurrentToken()||"text",s))return!1}return o.stepForward(),o.getCurrentTokenRow()!==n.row||this.$matchTokenType(o.getCurrentToken()||"text",a)},m.$matchTokenType=function(e,t){return-1<t.indexOf(e.type||e)},m.recordAutoInsert=function(e,t,n){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isAutoInsertedClosing(e,t,d.autoInsertedLineEnd[0])||(d.autoInsertedBrackets=0),d.autoInsertedRow=e.row,d.autoInsertedLineEnd=n+t.substr(e.column),d.autoInsertedBrackets++},m.recordMaybeInsert=function(e,t,n){e=e.getCursorPosition(),t=t.doc.getLine(e.row);this.isMaybeInsertedClosing(e,t)||(d.maybeInsertedBrackets=0),d.maybeInsertedRow=e.row,d.maybeInsertedLineStart=t.substr(0,e.column)+n,d.maybeInsertedLineEnd=t.substr(e.column),d.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(e,t,n){return 0<d.autoInsertedBrackets&&e.row===d.autoInsertedRow&&n===d.autoInsertedLineEnd[0]&&t.substr(e.column)===d.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(e,t){return 0<d.maybeInsertedBrackets&&e.row===d.maybeInsertedRow&&t.substr(e.column)===d.maybeInsertedLineEnd&&t.substr(0,e.column)==d.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){d.autoInsertedLineEnd=d.autoInsertedLineEnd.substr(1),d.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){d&&(d.maybeInsertedBrackets=0,d.maybeInsertedRow=-1)},o.inherits(m,i),t.CstyleBehaviour=m}),define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],i=0,r=[],s=0;s<o.length;s+=2)r.push(i+=o[s]),o[s+1]&&r.push(45,i+=o[s+1]);t.wordChars=String.fromCharCode.apply(null,r)}),define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var s=e("../config"),o=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,r=e("./behaviour/cstyle").CstyleBehaviour,a=e("../unicode"),C=e("../lib/lang"),f=e("../token_iterator").TokenIterator,m=e("../range").Range,e=function(){this.HighlightRules=i};(function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp("^["+a.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+a.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new o(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,i,n,o){function t(e){for(var t=n;t<=o;t++)e(r.getLine(t),t)}var r=i.doc,s=!0,a=!0,l=1/0,c=i.getTabSize(),u=!1;if(this.lineCommentStart){m=Array.isArray(this.lineCommentStart)?(_=this.lineCommentStart.map(C.escapeRegExp).join("|"),this.lineCommentStart[0]):(_=C.escapeRegExp(this.lineCommentStart),this.lineCommentStart);_=new RegExp("^(\\s*)(?:"+_+") ?"),u=i.getUseSoftTabs();var d=function(e,t){var n=e.match(_);if(n){var o=n[1].length,i=n[0].length;f(e,o,i)||" "!=n[0][i-1]||i--,r.removeInLine(t,o,i)}},h=m+" ",p=function(e,t){s&&!/\S/.test(e)||(f(e,l,l)?r.insertInLine({row:t,column:l},h):r.insertInLine({row:t,column:l},m))},g=function(e,t){return _.test(e)},f=function(e,t,n){for(var o=0;t--&&" "==e.charAt(t);)o++;if(o%c!=0)return!1;for(o=0;" "==e.charAt(n++);)o++;return 2<c?o%c!=c-1:o%c==0}}else{if(!this.blockComment)return!1;var m=this.blockComment.start,v=this.blockComment.end,_=new RegExp("^(\\s*)(?:"+C.escapeRegExp(m)+")"),b=new RegExp("(?:"+C.escapeRegExp(v)+")\\s*$"),p=function(e,t){g(e,t)||s&&!/\S/.test(e)||(r.insertInLine({row:t,column:e.length},v),r.insertInLine({row:t,column:l},m))},d=function(e,t){var n;(n=e.match(b))&&r.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(_))&&r.removeInLine(t,n[1].length,n[0].length)},g=function(e,t){if(_.test(e))return!0;for(var n=i.getTokens(t),o=0;o<n.length;o++)if("comment"===n[o].type)return!0}}var y=1/0;t(function(e,t){var n=e.search(/\S/);-1!==n?(n<l&&(l=n),a&&!g(e,t)&&(a=!1)):y>e.length&&(y=e.length)}),l==1/0&&(l=y,a=s=!1),u&&l%c!=0&&(l=Math.floor(l/c)*c),t(a?d:p)},this.toggleBlockComment=function(e,t,n,o){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var r,s,a=(h=new f(t,o.row,o.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(;a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(i.start))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,d=new m(c,u,c,u+i.start.length);break}a=h.stepBackward()}for(var h,p,a=(h=new f(t,o.row,o.column)).getCurrentToken();a&&/comment/.test(a.type);){if(-1!=(p=a.value.indexOf(i.end))){var c=h.getCurrentTokenRow(),u=h.getCurrentTokenColumn()+p,g=new m(c,u,c,u+i.end.length);break}a=h.stepForward()}g&&t.remove(g),d&&(t.remove(d),r=d.start.row,s=-i.start.length)}else s=i.start.length,r=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==r&&(l.start.column+=s),l.end.row==r&&(l.end.column+=s),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var o in e)if(e[o]){var t=e[o],n=t.prototype.$id,i=s.$modes[n];i||(s.$modes[n]=i=new t),s.$modes[o]||(s.$modes[o]=i),this.$embeds.push(o),this.$modes[o]=i}for(var r=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],o=0;o<r.length;o++)!function(e){var t=r[o],n=e[t];e[r[o]]=function(){return this.$delegator(t,arguments,n)}}(this)},this.$delegator=function(e,t,n){var o=t[0]||"start";if("string"!=typeof o){if(Array.isArray(o[2])){var i=o[2][o[2].length-1];if(s=this.$modes[i])return s[e].apply(s,[o[1]].concat([].slice.call(t,1)))}o=o[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var s,a=o.split(this.$embeds[r]);if(!a[0]&&a[1]){t[0]=a[1];return(s=this.$modes[this.$embeds[r]])[e].apply(s,t)}}i=n.apply(this,t);return n?i:void 0},this.transformAction=function(e,t,n,o,i){if(this.$behaviour){var r,s=this.$behaviour.getBehaviours();for(r in s)if(s[r][t]){var a=s[r][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(l in t)for(var o=t[l],i=0,r=o.length;i<r;i++)if("string"==typeof o[i].token)/keyword|support|storage/.test(o[i].token)&&n.push(o[i].regex);else if("object"==typeof o[i].token)for(var s=0,a=o[i].token.length;s<a;s++)if(/keyword|support|storage/.test(o[i].token[s])){var l=o[i].regex.match(/\(.+?\)/g)[s];n.push(l.substr(1,l.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,o){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(e.prototype),t.Mode=e}),define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var o=t.start.row,i=t.start.column,r=e[o]||"";switch(t.action){case"insert":if(1===t.lines.length)e[o]=r.substring(0,i)+t.lines[0]+r.substring(i);else{var s=[o,1].concat(t.lines);e.splice.apply(e,s),e[o]=r.substring(0,i)+e[o],e[o+t.lines.length-1]+=r.substring(i)}break;case"remove":var a=t.end.column,s=t.end.row;o===s?e[o]=r.substring(0,i)+r.substring(a):e.splice(o,s-o+1,r.substring(0,i)+e[s].substring(a))}}}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,t=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===n?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function a(e,t,n){n=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&n}o.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(!(e.start.row==e.end.row&&e.start.row!=this.row||e.start.row>this.row)){var t,n,o,i,r,s,e=(t=e,n={row:this.row,column:this.column},o=this.$insertRight,i="insert"==t.action,r=(i?1:-1)*(t.end.row-t.start.row),s=(i?1:-1)*(t.end.column-t.start.column),e=t.start,t=i?e:t.end,a(n,e,o)?{row:n.row,column:n.column}:a(t,n,!o)?{row:n.row+r,column:n.column+(n.row==t.row?s:0)}:{row:e.row,column:e.column});this.setPosition(e.row,e.column,!0)}},this.setPosition=function(e,t,n){e=n?{row:e,column:t}:this.$clipPositionToDocument(e,t);if(this.row!=e.row||this.column!=e.column){t={row:this.row,column:this.column};this.row=e.row,this.column=e.column,this._signal("change",{old:t,value:e})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(t.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var o=e("./lib/oop"),i=e("./apply_delta").applyDelta,r=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,a=e("./anchor").Anchor,e=function(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){o.implement(this,r),this.setValue=function(e){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new a(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){e=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),e=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:e,action:"insert",lines:[t]},!0),this.clonePos(e)},this.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:n<=e&&(e=n-1,t=void 0);n=this.getLine(e);return null==t&&(t=n.length),{row:e,column:t=Math.min(Math.max(t,0),n.length)}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){var n=0,n=(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),0):(t=[""].concat(t),e--,this.$lines[e].length);this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),e={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:e,action:"insert",lines:t}),this.clonePos(e)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),e=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:e,action:"remove",lines:this.getLinesForRange({start:t,end:e})}),this.clonePos(t)},this.removeInLine=function(e,t,n){t=this.clippedPos(e,t),n=this.clippedPos(e,n);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})},!0),this.clonePos(t)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&0<e,o=t<this.getLength()-1,i=n?e-1:e,r=n?this.getLine(i).length:0,n=o?t+1:t,o=o?0:this.getLine(n).length,o=new s(i,r,n,o),t=this.$lines.slice(e,t+1);return this.applyDelta({start:o.start,end:o.end,action:"remove",lines:this.getLinesForRange(o)}),t},this.removeNewLine=function(e){e<this.getLength()-1&&0<=e&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof s||(e=s.fromPoints(e.start,e.end));if(0===t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);e=t?this.insert(e.start,t):e.start;return e},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;0<=t;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&2e4<e.lines.length?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e)))},this.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,o=n.length-t+1,i=e.start.row,r=e.start.column,s=0,a=0;s<o;s=a){a+=t-1;var l=n.slice(s,a);l.push(""),this.applyDelta({start:this.pos(i+s,r),end:this.pos(i+a,r=0),action:e.action,lines:l},!0)}e.lines=n.slice(s),e.start.row=i+s,e.start.column=r,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),o=this.getNewLineCharacter().length,i=t||0,r=n.length;i<r;i++)if((e-=n[i].length+o)<0)return{row:i,column:e+n[i].length+o};return{row:r-1,column:e+n[r-1].length+o}},this.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),o=this.getNewLineCharacter().length,i=0,r=Math.min(e.row,n.length),s=t||0;s<r;++s)i+=n[s].length+o;return i+e.column}}).call(e.prototype),t.Document=e}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,e=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var a=this;this.$worker=function(){if(a.running){for(var e=new Date,t=a.currentLine,n=-1,o=a.doc,i=t;a.lines[t];)t++;var r=o.getLength(),s=0;a.running=!1;for(;t<r;){a.$tokenizeRow(t),n=t;for(;t++,a.lines[t];);if(++s%5==0&&20<new Date-e){a.running=setTimeout(a.$worker,20);break}}a.currentLine=t,-1==n&&(n=t),i<=n&&a.fireUpdateEvent(i,n)}}};(function(){o.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){t={first:e,last:t};this._signal("update",{data:t})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0==n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,1+n,null),this.states.splice(t,1+n,null);else{n=Array(1+n);n.unshift(t,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],n=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=n.state+""?(this.states[e]=n.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=n.tokens}}).call(e.prototype),t.BackgroundTokenizer=e}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),u=(e("./lib/oop"),e("./range").Range),e=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var i=o.firstRow,r=o.lastRow,s=i;s<=r;s++){var a=this.cache[s];null==a&&((a=c.getMatchOffsets(n.getLine(s),this.regExp)).length>this.MAX_RANGES&&(a=a.slice(0,this.MAX_RANGES)),a=a.map(function(e){return new u(s,e.offset,s,e.offset+e.length)}),this.cache[s]=a.length?a:"");for(var l=a.length;l--;)t.drawSingleLineMarker(e,a[l].toScreenRange(n),this.clazz,o)}}}).call(e.prototype),t.SearchHighlight=e}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];e=t[t.length-1];this.range=new o(t[0].start.row,t[0].start.column,e.end.row,e.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var o=e("../range").Range;(function(){this.shiftRow=function(t){this.start.row+=t,this.end.row+=t,this.folds.forEach(function(e){e.start.row+=t,e.end.row+=t})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),0<this.range.compareEnd(e.start.row,e.start.column)?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var o,i,r=0,s=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<s.length;l++){if(-1==(i=(o=s[l]).range.compareStart(t,n))){e(null,t,n,r,a);return}if(!e(null,o.start.row,o.start.column,r,a)&&e(o.placeholder,o.start.row,o.start.column,r)||0===i)return;a=!o.sameRow,r=o.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){for(var n,o,i=0;i<this.folds.length;i++){if(-1==(o=(n=this.folds[i]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===o)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var o,i,r=this.getNextFoldTo(e,t);if(r){o=r.fold;if("inside"==r.kind&&o.start.column!=t&&o.start.row!=e)window.console&&window.console.log(e,t,o);else if(o.start.row==e){var s=(i=this.folds).indexOf(o);0===s&&(this.start.column+=n);for(;s<i.length;s++){(o=i[s]).start.column+=n;if(!o.sameRow)return;o.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var o=n.fold,e=this.folds,t=this.foldData,n=e.indexOf(o),o=e[n-1];this.end.row=o.end.row,this.end.column=o.end.column;e=new i(t,e=e.splice(n,e.length-n));return t.splice(t.indexOf(this)+1,0,e),e},this.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var o=this.foldData;o.splice(o.indexOf(e),1)},this.toString=function(){var t=[this.range.toString()+": ["];return this.folds.forEach(function(e){t.push("  "+e.toString())}),t.push("]"),t.join("\n")},this.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var o=this.folds[n];if((e-=o.start.column-t)<0)return{row:o.start.row,column:o.start.column+e};if((e-=o.placeholder.length)<0)return o.start;t=o.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var a=e("./range").Range.comparePoints,e=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=a,this.pointIndex=function(e,t,n){for(var o=this.ranges,i=n||0;i<o.length;i++){var r=o[i],s=a(e,r.end);if(!(0<s)){r=a(e,r.start);return 0===s?t&&0!==r?-i-2:i:0<r||0===r&&!t?i:-i-1}}return-i-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);t=this.pointIndex(e.end,t,n);return t<0?t=-t-1:t++,this.ranges.splice(n,t-n,e)},this.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},this.substractPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){for(var e,t=[],n=this.ranges,o=(n=n.sort(function(e,t){return a(e.start,t.start)}))[0],i=1;i<n.length;i++){e=o,o=n[i];var r=a(e.end,o.start);r<0||(0!=r||e.isEmpty()||o.isEmpty())&&(a(e.end,o.end)<0&&(e.end.row=o.end.row,e.end.column=o.end.column),n.splice(i,1),t.push(o),o=e,i--)}return this.ranges=n,t},this.contains=function(e,t){return 0<=this.pointIndex({row:e,column:t})},this.containsPoint=function(e){return 0<=this.pointIndex(e)},this.rangeAtPoint=function(e){e=this.pointIndex(e);if(0<=e)return this.ranges[e]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];e=this.pointIndex({row:e,column:0});e<0&&(e=-e-1);var o=this.pointIndex({row:t,column:0},e);o<0&&(o=-o-1);for(var i=[],r=e;r<o;r++)i.push(n[r]);return i},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){for(var t=e.start,n=e.end,o=t.row,i=n.row,r=this.ranges,s=0,a=r.length;s<a;s++)if((u=r[s]).end.row>=o)break;if("insert"==e.action)for(var l=i-o,c=-t.column+n.column;s<a;s++){if((u=r[s]).start.row>o)break;u.start.row==o&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l));u.end.row==o&&u.end.column>=t.column&&(u.end.column==t.column&&this.$bias<0||(u.end.column==t.column&&0<c&&s<a-1&&u.end.column>u.start.column&&u.end.column==r[s+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l))}else for(var u,l=o-i,c=t.column-n.column;s<a;s++){if((u=r[s]).start.row>i)break;u.end.row<i&&(o<u.end.row||o==u.end.row&&t.column<u.end.column)?(u.end.row=o,u.end.column=t.column):u.end.row==i?u.end.column<=n.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>i&&(u.end.row+=l);u.start.row<i&&(o<u.start.row||o==u.start.row&&t.column<u.start.column)?(u.start.row=o,u.start.column=t.column):u.start.row==i?u.start.column<=n.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>i&&(u.start.row+=l)}if(0!=l&&s<a)for(;s<a;s++)(u=r[s]).start.row+=l,u.end.row+=l}}).call(e.prototype),t.RangeList=e}),define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";function d(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function o(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}var i=e("../range_list").RangeList,e=e("../lib/oop"),r=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};e.inherits(r,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(t){this.foldLine=t,this.subFolds.forEach(function(e){e.setFoldLine(t)})},this.clone=function(){var e=this.range.clone(),t=new r(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){r=e,s=this.start,d(r.start,s),d(r.end,s);for(var t=e.start.row,n=e.start.column,o=0,i=-1;o<this.subFolds.length&&1==(i=this.subFolds[o].range.compare(t,n));o++);var r=this.subFolds[o],s=0;if(0==i){if(r.range.containsRange(e))return r.addSubFold(e);s=1}for(var t=e.range.end.row,n=e.range.end.column,a=o,i=-1;a<this.subFolds.length&&1==(i=this.subFolds[a].range.compare(t,n));a++);0==i&&a++;for(var l=this.subFolds.splice(o,a-o,e),c=0==i?l.length-1:l.length,u=s;u<c;u++)e.addSubFold(l[u]);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return t=e,e=this.start,void(o(t.start,e),o(t.end,e));var t}}.call(r.prototype)}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";var c=e("../range").Range,h=e("./fold_line").FoldLine,p=e("./fold").Fold,u=e("../token_iterator").TokenIterator;t.Folding=function(){this.getFoldAt=function(e,t,n){var o=this.getFoldLine(e);if(!o)return null;for(var i=o.folds,r=0;r<i.length;r++){var s=i[r].range;if(s.contains(e,t)&&(1!=n||!s.isEnd(e,t)||s.isEmpty())&&(-1!=n||!s.isStart(e,t)||s.isEmpty()))return i[r]}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,o=this.$foldData,i=[];t.column+=1,--n.column;for(var r=0;r<o.length;r++)if(2!=(l=o[r].range.compareRange(e))){if(-2==l)break;for(var s=o[r].folds,a=0;a<s.length;a++){var l,c=s[a];if(-2==(l=c.range.compareRange(e)))break;if(2!=l){if(42==l)break;i.push(c)}}}return--t.column,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var o=0;o<t[n].folds.length;o++)e.push(t[n].folds[o]);return e},this.getFoldStringAt=function(e,t,n,o){if(!(o=o||this.getFoldLine(e)))return null;for(var i,r,s={end:{column:0}},a=0;a<o.folds.length;a++){var l=(r=o.folds[a]).range.compareEnd(e,t);if(-1==l){i=this.getLine(r.start.row).substring(s.end.column,r.start.column);break}if(0===l)return null;s=r}return i=i||this.getLine(r.start.row).substring(s.end.column),-1==n?i.substring(0,t-s.end.column):1==n?i.substring(t-s.end.column):i},this.getFoldLine=function(e,t){var n=this.$foldData,o=0;t&&(o=n.indexOf(t)),-1==o&&(o=0);for(;o<n.length;o++){var i=n[o];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,o=0;t&&(o=n.indexOf(t)),-1==o&&(o=0);for(;o<n.length;o++){var i=n[o];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,o=t-e+1,i=0;i<n.length;i++){var r=n[i],s=r.end.row,r=r.start.row;if(t<=s){r<t&&(e<=r?o-=t-r:o=0);break}e<=s&&(o-=e<=r?s-r:s-e+1)}return o},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n,o=this.$foldData,i=!1;e instanceof p?n=e:(n=new p(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var r=n.start.row,s=n.start.column,a=n.end.row,l=n.end.column,e=this.getFoldAt(r,s,1),t=this.getFoldAt(a,l,-1);if(e&&t==e)return e.addSubFold(n);e&&!e.range.isStart(r,s)&&this.removeFold(e),t&&!t.range.isEnd(a,l)&&this.removeFold(t);t=this.getFoldsInRange(n.range);0<t.length&&(this.removeFolds(t),n.collapseChildren||t.forEach(function(e){n.addSubFold(e)}));for(var c=0;c<o.length;c++){var u=o[c];if(a==u.start.row){u.addFold(n),i=!0;break}if(r==u.end.row){u.addFold(n),i=!0;if(!n.sameRow){var d=o[c+1];if(d&&d.start.row==a){u.merge(d);break}}break}if(a<=u.start.row)break}return i||(u=this.$addFoldLine(new h(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(u.start.row,u.start.row):this.$updateRowLengthCache(u.start.row,u.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,o=t.end.row,i=this.$foldData;if(1==(r=t.folds).length)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column;else if(e.sameRow)r.splice(r.indexOf(e),1);else{var r,t=t.split(e.start.row,e.start.column);(r=t.folds).shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,o):this.$updateRowLengthCache(n,o)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),0<t.collapseChildren&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n;null==e?(n=new c(0,0,this.getLength(),0),null==t&&(t=!0)):n="number"==typeof e?new c(e,0,e,this.getLine(e).length):"row"in e?c.fromPoints(e,e):e,n=this.getFoldsInRangeList(n),0!=t?this.removeFolds(n):this.expandFolds(n);if(n.length)return n},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){t=this.getFoldLine(e,t);return t?t.end.row:e},this.getRowFoldStart=function(e,t){t=this.getFoldLine(e,t);return t?t.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,r){null==i&&(i=e.start.row),null==r&&(r=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var s=this.doc,a="";return e.walk(function(e,t,n,o){if(!(t<i)){if(t==i){if(n<r)return;o=Math.max(r,o)}a+=null!=e?e:s.getLine(t).substring(o,n)}},t,n),a},this.getDisplayLine=function(e,t,n,o){var i=this.getFoldLine(e);if(i)return this.getFoldDisplayLine(i,e,t,n,o);e=this.doc.getLine(e);return e.substring(o||0,t||e.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){e=e.folds.map(function(e){return e.clone()});return new h(t,e)})},this.toggleFold=function(e){var t,n=this.selection.getRange();if(n.isEmpty()){var o=n.start;if(i=this.getFoldAt(o.row,o.column)){this.expandFold(i);return}(t=this.findMatchingBracket(o))?1==n.comparePoint(t)?n.end=t:(n.start=t,n.start.column++,n.end.column--):(t=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==n.comparePoint(t)?n.end=t:n.start=t,n.start.column++):n=this.getCommentFoldRange(o.row,o.column)||n}else{o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}1==o.length&&(i=o[0])}if((i=i||this.getFoldAt(n.start.row,n.start.column))&&i.range.toString()==n.toString())this.expandFold(i);else{var i="...";if(!n.isMultiLine()){if((i=this.getTextRange(n)).length<4)return;i=i.trim().substring(0,2)+".."}this.addFold(i,n)}},this.getCommentFoldRange=function(e,t,n){var o=new u(this,e,t),i=o.getCurrentToken(),r=i&&i.type;if(i&&/^comment|string/.test(r)){"comment"==(r=r.match(/comment|string/)[0])&&(r+="|doc-start");var s=new RegExp(r),r=new c;if(1!=n){for(;i=o.stepBackward(),i&&s.test(i.type););o.stepForward()}r.start.row=o.getCurrentTokenRow(),r.start.column=o.getCurrentTokenColumn()+2,o=new u(this,e,t);if(-1!=n){var a=-1;do{i=o.stepForward();if(-1==a){var l=this.getState(o.$row);s.test(l)||(a=o.$row)}else if(o.$row>a)break}while(i&&s.test(i.type));i=o.stepBackward()}else i=o.getCurrentToken();return r.end.row=o.getCurrentTokenRow(),r.end.column=o.getCurrentTokenColumn()+i.value.length-2,r}},this.foldAll=function(e,t,n,o){null==n&&(n=1e5);var i=this.foldWidgets;if(i){t=t||this.getLength();for(var r=e=e||0;r<t;r++){null==i[r]&&(i[r]=this.getFoldWidget(r));if("start"==i[r]&&(!o||o(r))){var s=this.getFoldWidgetRange(r);s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e&&(r=s.end.row,s.collapseChildren=n,this.addFold("...",s))}}}},this.foldToLevel=function(e){this.foldAll();for(;0<e--;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(e){for(var t=i.getTokens(e),n=0;n<t.length;n++){var o=t[n];if("text"!=o.type||!/^\s+$/.test(o.value))return!!/comment/.test(o.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){"manual"==(this.$foldStyle=e)&&this.unfold();e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(e){if(this.$foldMode!=e){this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation");e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null}},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var o=e-1;0<=o;){var i=n[o];null==i&&(i=n[o]=this.getFoldWidget(o));if("start"==i){var r=this.getFoldWidgetRange(o),s=s||r;if(r&&r.end.row>=e)break}o--}return{range:-1!==o&&r,firstRange:s}},this.onFoldWidgetClick=function(e,t){var n={children:(t=t.domEvent).shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){t=t.target||t.srcElement;t&&/ace_fold-widget/.test(t.className)&&(t.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),o=this.getLine(e),n="end"===n?-1:1,o=this.getFoldAt(e,-1==n?0:o.length,n);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),o;n=this.getFoldWidgetRange(e,!0);if(n&&!n.isMultiLine()&&(o=this.getFoldAt(n.start.row,n.start.column,1))&&n.isEqual(o.range))return this.removeFold(o),o;if(t.siblings){var i,r,o=this.getParentFoldRangeData(e);o.range&&(i=o.range.start.row+1,r=o.range.end.row);this.foldAll(i,r,t.all?1e4:0)}else t.children?(r=n?n.end.row:this.getLength(),this.foldAll(e+1,r,t.all?1e4:0)):n&&(t.all&&(n.collapseChildren=1e4),this.addFold("...",n));return n}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row,t=this.getRowFoldStart(t);if(!(n=this.$toggleFoldWidget(t,{}))){var n,o=this.getParentFoldRangeData(t,!0);if(n=o.range||o.firstRange){t=n.start.row;t=this.getFoldAt(t,this.getLine(t).length,1);t?this.removeFold(t):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0==n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,1+n,null);else{n=Array(1+n);n.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(e){e=e.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var d=e("../token_iterator").TokenIterator,a=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;t=t||this.getLine(e.row).charAt(e.column-1);if(""==t)return null;t=t.match(/([\(\[\{])|([\)\]\}])/);return t?t[1]?this.$findClosingBracket(t[1],e):this.$findOpeningBracket(t[2],e):null},this.getBracketRange=function(e){var t,n,o=this.getLine(e.row),i=!0,r=o.charAt(e.column-1),s=r&&r.match(/([\(\[\{])|([\)\]\}])/);s||(r=o.charAt(e.column),e={row:e.row,column:e.column+1},s=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1);if(!s)return null;if(s[1]){if(!(n=this.$findClosingBracket(s[1],e)))return null;t=a.fromPoints(e,n),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{if(!(n=this.$findOpeningBracket(s[2],e)))return null;t=a.fromPoints(n,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e){var t=this.getLine(e.row),n=t.charAt(e.column-1),o=n&&n.match(/([\(\[\{])|([\)\]\}])/);o||(n=t.charAt(e.column),e={row:e.row,column:e.column+1},o=n&&n.match(/([\(\[\{])|([\)\]\}])/));if(!o)return null;n=new a(e.row,e.column-1,e.row,e.column),e=o[1]?this.$findClosingBracket(o[1],e):this.$findOpeningBracket(o[2],e);return e?[n,new a(e.row,e.column,e.row,e.column+1)]:[n]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var o=this.$brackets[e],i=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){n=n||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+");for(var a=t.column-r.getCurrentTokenColumn()-2,l=s.value;;){for(;0<=a;){var c=l.charAt(a);if(c==o){if(0==--i)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else c==e&&(i+=1);--a}for(;s=r.stepBackward(),s&&!n.test(s.type););if(null==s)break;a=(l=s.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var o=this.$brackets[e],i=1,r=new d(this,t.row,t.column),s=r.getCurrentToken();if(s=s||r.stepForward()){n=n||new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+");for(var a=t.column-r.getCurrentTokenColumn();;){for(var l=s.value,c=l.length;a<c;){var u=l.charAt(a);if(u==o){if(0==--i)return{row:r.getCurrentTokenRow(),column:a+r.getCurrentTokenColumn()}}else u==e&&(i+=1);a+=1}for(;s=r.stepForward(),s&&!n.test(s.type););if(null==s)break;a=0}return null}}}}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var o=e("./lib/oop"),i=e("./lib/lang"),r=e("./bidihandler").BidiHandler,s=e("./config"),l=e("./lib/event_emitter").EventEmitter,a=e("./selection").Selection,c=e("./mode/text").Mode,u=e("./range").Range,d=e("./document").Document,h=e("./background_tokenizer").BackgroundTokenizer,p=e("./search_highlight").SearchHighlight,g=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++g.$uid,this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);"object"==typeof e&&e.getLine||(e=new d(e));this.setDocument(e),this.selection=new a(this),this.$bidiHandler=new r(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};g.$uid=0,function(){function a(e){return!(e<4352)&&(4352<=e&&e<=4447||4515<=e&&e<=4519||4602<=e&&e<=4607||9001<=e&&e<=9002||11904<=e&&e<=11929||11931<=e&&e<=12019||12032<=e&&e<=12245||12272<=e&&e<=12283||12288<=e&&e<=12350||12353<=e&&e<=12438||12441<=e&&e<=12543||12549<=e&&e<=12589||12593<=e&&e<=12686||12688<=e&&e<=12730||12736<=e&&e<=12771||12784<=e&&e<=12830||12832<=e&&e<=12871||12880<=e&&e<=13054||13056<=e&&e<=19903||19968<=e&&e<=42124||42128<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||55216<=e&&e<=55238||55243<=e&&e<=55291||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65106||65108<=e&&e<=65126||65128<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510)}o.implement(this,l),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),(this.doc=e).on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(e){var t=this.$docRowCache.length,e=this.$getRowCacheIndex(this.$docRowCache,e)+1;e<t&&(this.$docRowCache.splice(e,t),this.$screenRowCache.splice(e,t))}else this.$docRowCache=[],this.$screenRowCache=[]},this.$getRowCacheIndex=function(e,t){for(var n=0,o=e.length-1;n<=o;){var i=n+o>>1,r=e[i];if(r<t)n=1+i;else{if(!(t<r))return i;o=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){e=e.data;this.$resetRowCache(e.start.row)},this.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),o=0;if(null==t)var i=n.length-1,o=this.getLine(e).length;else for(i=0;i<n.length&&!(t<=(o+=n[i].value.length));i++);return(e=n[i])?(e.index=i,e.start=o-e.value.length,e):null},this.setUndoManager=function(e){this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,o){var i=this.$markerId++,t={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!o,id:i};return o?(this.$frontMarkers[i]=t,this._signal("changeFrontMarker")):(this.$backMarkers[i]=t,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new p(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,o){"number"!=typeof t&&(n=t,t=e),n=n||"ace_step";t=new u(e,0,t,1/0);return t.id=this.addMarker(t,n,"fullLine",o),t},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){e=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:"\n"},this.getWordRange=function(e,t){var n,o=this.getLine(e),i=!1;0<t&&(i=!!o.charAt(t-1).match(this.tokenRe));n=(i=i||!!o.charAt(t).match(this.tokenRe))?this.tokenRe:/^\s+$/.test(o.slice(t-1,t+1))?/\s/:this.nonTokenRe;var r=t;if(0<r){for(;r--,0<=r&&o.charAt(r).match(n););r++}for(var s=t;s<o.length&&o.charAt(s).match(n);)s++;return new u(e,r,e,s)},this.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),o=this.getLine(n.end.row);o.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,o=n.path}else o=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c);!this.$modes[o]||n?(this.$modeId=o,s.loadModule(["mode",o],function(e){if(this.$modeId!==o)return t&&t();this.$modes[o]&&!n?this.$onChangeMode(this.$modes[o]):e&&e.Mode&&(e=new e.Mode(n),n||((this.$modes[o]=e).$id=o),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)):(this.$onChangeMode(this.$modes[o]),t&&t())},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var o=e.getTokenizer();if(void 0!==o.on){var i=this.onReloadTokenizer.bind(this);o.on("update",i)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(o);else{this.bgTokenizer=new h(o);var r=this;this.bgTokenizer.on("update",function(e){r._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){s.warn("Could not load worker",e),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var t=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>t&&(t=e.screenWidth)}),this.lineWidgetWidth=t},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,o=0,i=0,r=this.$foldData[i],s=r?r.start.row:1/0,a=t.length,l=0;l<a;l++){if(s<l){if(a<=(l=r.end.row+1))break;s=(r=this.$foldData[i++])?r.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>o&&(o=n[l])}this.screenWidth=o}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var o=e[n];"insert"==o.action||"remove"==o.action?this.doc.revertDelta(o):o.folds&&this.addFolds(o.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var o=e[n];"insert"!=o.action&&"remove"!=o.action||this.doc.$safeApplyDelta(o)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var o,i,r=0;r<e.length;r++){var s=e[r];s.start&&(o?n(s)?(i=s.start,-1==o.compare(i.row,i.column)&&o.setStart(i),i=s.end,1==o.compare(i.row,i.column)&&o.setEnd(i)):(i=s.start,-1==o.compare(i.row,i.column)&&(o=u.fromPoints(s.start,s.start))):o=n(s)?u.fromPoints(s.start,s.end):u.fromPoints(s.start,s.start))}return o},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var o=this.getTextRange(e),i=this.getFoldsInRange(e),t=u.fromPoints(t,t);if(!n){this.remove(e);var r=e.start.row-e.end.row;(a=r?-e.end.column:e.start.column-e.end.column)&&(t.start.row==e.end.row&&t.start.column>e.end.column&&(t.start.column+=a),t.end.row==e.end.row&&t.end.column>e.end.column&&(t.end.column+=a)),r&&t.start.row>=e.end.row&&(t.start.row+=r,t.end.row+=r)}t.end=this.insert(t.start,o);if(i.length){var s=e.start,e=t.start,r=e.row-s.row,a=e.column-s.column;this.addFolds(i.map(function(e){return(e=e.clone()).start.row==s.row&&(e.start.column+=a),e.end.row==s.row&&(e.end.column+=a),e.start.row+=r,e.end.row+=r,e}))}return t},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var o=e;o<=t;o++)this.doc.insertInLine({row:o,column:0},n)},this.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),o=this.getTabSize(),i=t.start.row;i<=t.end.row;++i){var r=this.getLine(i);n.start.row=i,n.end.row=i;for(var s=0;s<o&&" "==r.charAt(s);++s);s<o&&"\t"==r.charAt(s)?(n.start.column=s,n.end.column=s+1):(n.start.column=0,n.end.column=s),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){if((i=this.getRowFoldStart(e+n))<0)return 0;var o=i-e}else if(0<n){if((i=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;o=i-t}else{e=this.$clipRowToDocument(e);o=(t=this.$clipRowToDocument(t))-e+1}var i=new u(e,0,t,Number.MAX_VALUE),i=this.getFoldsInRange(i).map(function(e){return(e=e.clone()).start.row+=o,e.end.row+=o,e}),t=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+o,t),i.length&&this.addFolds(i),o},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)t=e=0;else{var n=this.doc.getLength();t=n<=e?(e=n-1,this.doc.getLine(n-1).length):Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});n=this.$constrainWrapLimit(e,n.min,n.max);return n!=this.$wrapLimit&&1<n&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,o=e.start,i=e.end,r=o.row,s=i.row,a=s-r,l=null;this.$updating=!0;if(0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(r,a);var c=this.$foldData,l=this.getFoldsInRange(e);this.removeFolds(l);var u=0;if(p=this.getFoldLine(i.row)){p.addRemoveChars(i.row,i.column,o.column-i.column),p.shiftRow(-a);var d=this.getFoldLine(r);d&&d!==p&&(d.merge(p),p=d),u=c.indexOf(p)+1}for(;u<c.length;u++)(p=c[u]).start.row>=i.row&&p.shiftRow(-a);s=r}else{var h=Array(a);h.unshift(r,0);d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,h);var p,c=this.$foldData,u=0;if(p=this.getFoldLine(r)){h=p.range.compareInside(o.row,o.column);0==h?(p=p.split(o.row,o.column))&&(p.shiftRow(a),p.addRemoveChars(s,0,i.column-o.column)):-1==h&&(p.addRemoveChars(r,0,i.column-o.column),p.shiftRow(a)),u=c.indexOf(p)+1}for(;u<c.length;u++)(p=c[u]).start.row>=r&&p.shiftRow(a)}else{a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a);(p=this.getFoldLine(r))&&p.addRemoveChars(r,o.column,a)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(r,s):this.$updateRowLengthCache(r,s),l},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var s,n,a=this.doc.getAllLines(),o=this.getTabSize(),i=this.$wrapData,r=this.$wrapLimit,l=e;t=Math.min(t,a.length-1);for(;l<=t;)(n=this.getFoldLine(l,n))?(s=[],n.walk(function(e,t,n,o){var i;if(null!=e){(i=this.$getDisplayTokens(e,s.length))[0]=g;for(var r=1;r<i.length;r++)i[r]=f}else i=this.$getDisplayTokens(a[t].substring(o,n),s.length);s=s.concat(i)}.bind(this),n.end.row,a[n.end.row].length+1),i[n.start.row]=this.$computeWrapSplits(s,r,o),l=n.end.row+1):(s=this.$getDisplayTokens(a[l]),i[l]=this.$computeWrapSplits(s,r,o),l++)};var g=3,f=4;this.$computeWrapSplits=function(i,e,r){function t(e){for(var t=e-a,n=a;n<e;n++){var o=i[n];12!==o&&2!==o||--t}s.length||(h=function(){var e=0;if(0===d)return e;if(u)for(var t=0;t<i.length;t++){var n=i[t];if(10==n)e+=1;else{if(11!=n){if(12==n)continue;break}e+=r}}return c&&!1!==u&&(e+=r),Math.min(e,d)}(),s.indent=h),l+=t,s.push(l),a=e}if(0==i.length)return[];for(var s=[],n=i.length,a=0,l=0,c=this.$wrapAsCode,u=this.$indentedSoftWrap,d=e<=Math.max(2*r,8)||!1===u?0:Math.floor(e/2),h=0;e-h<n-a;){var o=a+e-h;if(10<=i[o-1]&&10<=i[o])t(o);else if(i[o]!=g&&i[o]!=f){for(var p=Math.max(o-(e-(e>>2)),a-1);p<o&&i[o]<g;)o--;if(c){for(;p<o&&i[o]<g;)o--;for(;p<o&&9==i[o];)o--}else for(;p<o&&i[o]<10;)o--;p<o?t(++o):(2==i[o=a+e]&&o--,t(o-h))}else{for(;o!=a-1&&i[o]!=g;o--);if(a<o)t(o);else{o=a+e;for(;o<i.length&&i[o]==f;o++);if(o==i.length)break;t(o)}}}return s},this.$getDisplayTokens=function(e,t){var n,o=[];t=t||0;for(var i=0;i<e.length;i++){var r=e.charCodeAt(i);if(9==r){n=this.getScreenTabSize(o.length+t),o.push(11);for(var s=1;s<n;s++)o.push(12)}else 32==r?o.push(10):39<r&&r<48||57<r&&r<64?o.push(9):4352<=r&&a(r)?o.push(1,2):o.push(1)}return o},this.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];null==t&&(t=1/0),n=n||0;for(var o,i=0;i<e.length;i++){9==(o=e.charCodeAt(i))?n+=this.getScreenTabSize(n):4352<=o&&a(o)?n+=2:n+=1;if(t<n)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),e=this.$wrapData[t.row];return e.length&&e[0]<t.column?e.indent:0}return 0},this.getScreenLastRowColumn=function(e){e=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(e,t){t=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(t)},this.getDocumentLastRowColumnPosition=function(e,t){t=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(t,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var o,i,r,s=0,a=0,l=0,c=0,u=this.$screenRowCache,d=this.$getRowCacheIndex(u,e),h=u.length;r=h&&0<=d?(l=u[d],s=this.$docRowCache[d],e>u[h-1]):!h;for(var p=this.getLength()-1,g=this.getNextFoldLine(s),f=g?g.start.row:1/0;l<=e&&!(e<l+(c=this.getRowLength(s))||p<=s);)l+=c,f<++s&&(s=g.end.row+1,f=(g=this.getNextFoldLine(s,g))?g.start.row:1/0),r&&(this.$docRowCache.push(s),this.$screenRowCache.push(l));if(g&&g.start.row<=s)o=this.getFoldDisplayLine(g),s=g.start.row;else{if(l+c<=e||p<s)return{row:p,column:this.getLine(p).length};o=this.getLine(s),g=null}d=0,u=Math.floor(e-l);if(this.$useWrapMode){h=this.$wrapData[s];h&&(i=h[u],0<u&&h.length&&(d=h.indent,a=h[u-1]||h[h.length-1],o=o.substring(a)))}return void 0!==n&&this.$bidiHandler.isBidiRow(l+u,s,u)&&(t=this.$bidiHandler.offsetToCol(n)),a+=this.$getStringScreenWidth(o,t-d)[1],this.$useWrapMode&&i<=a&&(a=i-1),g?g.idxToPosition(a):{row:s,column:a}},this.documentToScreenPosition=function(e,t){var n=void 0===t?this.$clipPositionToDocument(e.row,e.column):this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var o=0,i=null,r=null;(r=this.getFoldAt(e,t,1))&&(e=r.start.row,t=r.start.column);var s,a,l=0,c=this.$docRowCache,n=this.$getRowCacheIndex(c,e),r=c.length;a=r&&0<=n?(l=c[n],o=this.$screenRowCache[n],e>c[r-1]):!r;for(var u=this.getNextFoldLine(l),d=u?u.start.row:1/0;l<e;){if(d<=l){if(e<(s=u.end.row+1))break;d=(u=this.getNextFoldLine(s,u))?u.start.row:1/0}else s=l+1;o+=this.getRowLength(l),l=s,a&&(this.$docRowCache.push(l),this.$screenRowCache.push(o))}var h="",i=u&&d<=l?(h=this.getFoldDisplayLine(u,e,t),u.start.row):(h=this.getLine(e).substring(0,t),e),t=0;if(this.$useWrapMode){var p=this.$wrapData[i];if(p){for(var g=0;h.length>=p[g];)o++,g++;h=h.substring(p[g-1]||0,h.length),t=0<g?p.indent:0}}return this.lineWidgets&&this.lineWidgets[l]&&this.lineWidgets[l].rowsAbove&&(o+=this.lineWidgets[l].rowsAbove),{row:o,column:t+this.$getStringScreenWidth(h)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,o=0,i=0,r=(t=this.$foldData[i++])?t.start.row:1/0;o<n;){var s=this.$wrapData[o];e+=s?s.length+1:1,r<++o&&(o=t.end.row+1,r=(t=this.$foldData[i++])?t.start.row:1/0)}else{e=this.getLength();for(var a=this.$foldData,i=0;i<a.length;i++)e-=(t=a[i]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(r){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,t,n){if(0===t)return[0,0];t=t||1/0,n=n||0;for(var o,i=0;i<e.length&&!(t<(n+="\t"===(o=e.charAt(i))?this.getScreenTabSize(n):r.getCharacterWidth(o)));i++);return[n,i]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=a}.call(g.prototype),e("./edit_session/folding").Folding.call(g.prototype),e("./edit_session/bracket_match").BracketMatch.call(g.prototype),s.defineOptions(g.prototype,"session",{wrap:{set:function(e){e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1;if(this.$wrap!=e)if(this.$wrap=e){e="number"==typeof e?e:null;this.setWrapLimitRange(e,e),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){0<(e=parseInt(e))&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=g}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var _=e("./lib/lang"),o=e("./lib/oop"),b=e("./range").Range,e=function(){this.$options={}};(function(){this.set=function(e){return o.mixin(this.$options,e),this},this.getOptions=function(){return _.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var i=this.$options,e=this.$matchIterator(e,i);if(!e)return!1;var r=null;return e.forEach(function(e,t,n,o){return r=new b(e,t,n,o),!(t==o&&i.start&&i.start.start&&0!=i.skipCurrent&&r.isEqual(i.start))||(r=null,!1)}),r},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,o=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),i=[],r=t.re;if(t.$isMultiLine){var s,a=r.length,l=o.length-a;e:for(var c=r.offset||0;c<=l;c++){for(var u=0;u<a;u++)if(-1==o[c+u].search(r[u]))continue e;var d=o[c],h=o[c+a-1],d=d.length-d.match(r[0])[0].length,h=h.match(r[a-1])[0].length;s&&s.end.row===c&&s.end.column>d||(i.push(s=new b(c,d,c+a-1,h)),2<a&&(c=c+a-2))}}else for(var p=0;p<o.length;p++)for(var g=_.getMatchOffsets(o[p],r),u=0;u<g.length;u++){var f=g[u];i.push(new b(p,f.offset,p,f.offset+f.length))}if(n){for(var m=n.start.column,v=n.start.column,p=0,u=i.length-1;p<u&&i[p].start.column<m&&i[p].start.row==n.start.row;)p++;for(;p<u&&i[u].end.column>v&&i[u].end.row==n.end.row;)u--;i=i.slice(p,u+1);for(p=0,u=i.length;p<u;p++)i[p].start.row+=n.start.row,i[p].end.row+=n.start.row}return i},this.replace=function(e,t){var n=this.$options,o=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(o){var i=o.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(o,t);if(n.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var s=e[r];s&&s.toLowerCase()!=s?t[r]=t[r].toUpperCase():t[r]=t[r].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n,o,i=e.needle;if(!e.needle)return e.re=!1;e.regExp||(i=_.escapeRegExp(i)),e.wholeWord&&(i=(o=e,r((n=i)[0])+n+r(n[n.length-1])));function r(e){return/\w/.test(e)||o.regExp?"\\b":""}var s=e.caseSensitive?"gm":"gmi";e.$isMultiLine=!t&&/[\n\r]/.test(i);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(i,s);try{var a=new RegExp(i,s)}catch(e){a=!1}return e.re=a},this.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),o=[],i=0;i<n.length;i++)try{o.push(new RegExp(n[i],t))}catch(e){return!1}return o},this.$matchIterator=function(u,n){var d=this.$assembleRegExp(n);if(!d)return!1;var a=1==n.backwards,e=0!=n.skipCurrent,t=n.range,o=n.start;(o=o||(t?t[a?"end":"start"]:u.selection.getRange())).start&&(o=o[e!=a?"end":"start"]);var l,i,r=t?t.start.row:0,s=t?t.end.row:u.getLength()-1;t=a?function(e){var t=o.row;if(!i(t,o.column,e)){for(t--;r<=t;t--)if(i(t,Number.MAX_VALUE,e))return;if(0!=n.wrap)for(t=s,r=o.row;r<=t;t--)if(i(t,Number.MAX_VALUE,e))return}}:function(e){var t=o.row;if(!i(t,o.column,e)){for(t+=1;t<=s;t++)if(i(t,0,e))return;if(0!=n.wrap)for(t=r,s=o.row;t<=s;t++)if(i(t,0,e))return}};i=n.$isMultiLine?(l=d.length,function(e,t,n){var o=a?e-l+1:e;if(!(o<0)){var i=u.getLine(o),r=i.search(d[0]);if(!(!a&&r<t||-1===r)){for(var s=1;s<l;s++)if(-1==(i=u.getLine(o+s)).search(d[s]))return;e=i.match(d[l-1])[0].length;if(!(a&&t<e))return!!n(o,r,o+l-1,e)||void 0}}}):a?function(e,t,n){var o,i=u.getLine(e),r=[];d.lastIndex=0;for(;o=d.exec(i);){var s=o[0].length,a=o.index;if(!s){if(a>=i.length)break;d.lastIndex=a+=1}if(o.index+s>t)break;r.push(o.index,s)}for(var l=r.length-1;0<=l;l-=2){var c=r[l-1];if(n(e,c,e,c+(s=r[l])))return!0}}:function(e,t,n){var o=u.getLine(e);d.lastIndex=t;for(;i=d.exec(o);){var i,r=i[0].length;if(n(e,i=i.index,e,i+r))return!0;if(!r){d.lastIndex=i+=1;if(i>=o.length)return!1}}};return{forEach:t}}}).call(e.prototype),t.Search=e}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";function o(e,t){this.platform=t||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function i(e,t){o.call(this,e,t),this.$singleCommand=!1}var a=e("../lib/keys"),r=e("../lib/useragent"),l=a.KEY_MODS;i.prototype=o.prototype,function(){function s(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),(this.commands[e.name]=e).bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var n=e&&("string"==typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var o,i=this.commandKeyBinding;for(o in i){var r=i[o];if(r==e)delete i[o];else if(Array.isArray(r)){var s=r.indexOf(e);-1!=s&&(r.splice(s,1),1==r.length&&(i[o]=r[0]))}}},this.bindKey=function(e,o,i){"object"==typeof e&&e&&(null==i&&(i=e.position),e=e[this.platform]);if(e){if("function"==typeof o)return this.addCommand({exec:o,bindKey:e,name:o.name||e});e.split("|").forEach(function(e){var t="";if(-1!=e.indexOf(" ")){var n=e.split(/\s+/);e=n.pop(),n.forEach(function(e){e=this.parseKeys(e),e=l[e.hashId]+e.key;t+=(t?" ":"")+e,this._addCommandToBinding(t,"chainKeys")},this),t+=" "}e=this.parseKeys(e),e=l[e.hashId]+e.key;this._addCommandToBinding(t+e,o,i)},this)}},this._addCommandToBinding=function(e,t,n){var o=this.commandKeyBinding;if(t)if(!o[e]||this.$singleCommand)o[e]=t;else{Array.isArray(o[e])?-1!=(r=o[e].indexOf(t))&&o[e].splice(r,1):o[e]=[o[e]],"number"!=typeof n&&(n=s(t));for(var i=o[e],r=0;r<i.length;r++)if(n<s(i[r]))break;i.splice(r,0,t)}else delete o[e]},this.addCommands=function(n){n&&Object.keys(n).forEach(function(e){var t=n[e];if(t){if("string"==typeof t)return this.bindKey(t,e);"function"==typeof t&&(t={exec:t});"object"==typeof t&&(t.name||(t.name=e),this.addCommand(t))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),o=a[n];if(a.FUNCTION_KEYS[o])n=a.FUNCTION_KEYS[o].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var i=0,r=t.length;r--;){var s=a.KEY_MODS[t[r]];if(null==s)return"undefined"!=typeof console&&console.error("invalid modifier "+t[r]+" in "+e),!1;i|=s}return{key:n,hashId:i}},this.findKeyCommand=function(e,t){t=l[e]+t;return this.commandKeyBinding[t]},this.handleKeyboard=function(e,t,n,o){if(!(o<0)){var i=l[t]+n,r=this.commandKeyBinding[i];e.$keyChain&&(e.$keyChain+=" "+i,r=this.commandKeyBinding[e.$keyChain]||r);if(r&&("chainKeys"==r||"chainKeys"==r[r.length-1]))return e.$keyChain=e.$keyChain||i,{command:"null"};e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||0<o)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-i.length-1));return{command:r}}},this.getStatusText=function(e,t){return t.$keyChain||""}}.call(o.prototype),t.HashHandler=o,t.MultiHashHandler=i}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("../lib/oop"),i=e("../keyboard/hash_handler").MultiHashHandler,r=e("../lib/event_emitter").EventEmitter,e=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};o.inherits(e,i),function(){o.implement(this,r),this.exec=function(e,t,n){if(Array.isArray(e)){for(var o=e.length;o--;)if(this.exec(e[o],t,n))return!0;return!1}"string"==typeof e&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var i={editor:t,command:e,args:n};return i.returnValue=this._emit("exec",i),this._signal("afterExec",i),!1!==i.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(t){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(t);try{this.$inReplay=!0,this.macro.forEach(function(e){"string"==typeof e?this.exec(e,t):this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(e.prototype),t.CommandManager=e}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";function o(e,t){return{win:e,mac:t}}var l=e("../lib/lang"),i=e("../config"),c=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:o("Ctrl-,","Command-,"),exec:function(t){i.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:o("Alt-E","F4"),exec:function(t){i.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(t){i.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){"number"!=typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(t){i.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(t){i.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(l.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),o=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),i=e.session.doc.getLine(n.row).length,t=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,r=e.session.doc.getLine(n.row),s=n.row+1;s<=o.row+1;s++){var a=l.stringTrimLeft(l.stringTrimRight(e.session.doc.getLine(s)));0!==a.length&&(a=" "+a),r+=a}o.row+1<e.session.doc.getLength()-1&&(r+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new c(n.row,0,o.row+2,0),r),0<t?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+t)):(i=e.session.doc.getLine(n.row).length>i?i+1:i,e.selection.moveCursorTo(n.row,i))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,o=e.selection.rangeList.ranges,i=[];o.length<1&&(o=[e.selection.getRange()]);for(var r=0;r<o.length;r++)r!=o.length-1||o[r].end.row===t&&o[r].end.column===n||i.push(new c(o[r].end.row,o[r].end.column,t,n)),0===r?0===o[r].start.row&&0===o[r].start.column||i.push(new c(0,0,o[r].start.row,o[r].start.column)):i.push(new c(o[r-1].end.row,o[r-1].end.column,o[r].start.row,o[r].start.column));e.exitMultiSelectMode(),e.clearSelection();for(r=0;r<i.length;r++)e.selection.addRange(i[r],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var r=1;r<9;r++)t.commands.push({name:"foldToLevel"+r,description:"Fold To Level "+r,level:r,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),o=e("./lib/dom"),f=e("./lib/lang"),r=e("./lib/useragent"),s=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,l=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,u=e("./edit_session").EditSession,d=e("./search").Search,m=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,p=e("./commands/command_manager").CommandManager,g=e("./commands/default_commands").commands,v=e("./config"),_=e("./token_iterator").TokenIterator,b=e("./clipboard"),y=function(e,t,n){this.$toDestroy=[];var o=e.getContainerElement();this.container=o,this.renderer=e,this.id="editor"+ ++y.$uid,this.commands=new p(r.isMac?"mac":"win",g),"object"==typeof document&&(this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new l(this)),this.keyBinding=new c(this),this.$search=(new d).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=f.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||n&&n.session||new u("")),v.resetOptions(this),n&&this.setOptions(n),v._signal("editor",this)};y.$uid=0,function(){i.implement(this,h),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=f.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1!=e||!this.curOp.command||"mouse"!=this.curOp.command.name){this._signal("beforeEndOperation");if(this.curOp){var e=this.curOp.command,t=e&&e.scrollIntoView;if(t){switch(t){case"center-animate":t="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var n=this.selection.getRange(),o=this.renderer.layerConfig;(n.start.row>=o.lastRow||n.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==t&&this.renderer.animateScrolling(this.curOp.scrollTop)}e=this.selection.toJSON();this.curOp.selectionAfter=e,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(e),this.prevOp=this.curOp,this.curOp=null}}}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,o=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var i=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),o=o&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else o=o&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime&&(o=!1),o?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(t,n){if(t&&"string"==typeof t&&"ace"!=t){this.$keybindingId=t;var o=this;v.loadModule(["keybinding",t],function(e){o.$keybindingId==t&&o.keyBinding.setKeyboardHandler(e&&e.handler),n&&n()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(t),n&&n()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}(this.session=e)?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&e.bgTokenizer&&e.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||o.computedStyle(this.container).fontSize},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(!this.$highlightPending){var o=this;this.$highlightPending=!0,setTimeout(function(){o.$highlightPending=!1;var t=o.session;if(t&&t.bgTokenizer){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach(function(e){t.removeMarker(e)}),t.$bracketHighlight=null);var e=t.getMatchingBracketRanges(o.getCursorPosition());!e&&t.$mode.getMatching&&(e=t.$mode.getMatching(o.session));if(e){var n="ace_bracket";Array.isArray(e)?1==e.length&&(n="ace_error_bracket"):e=[e],2==e.length&&(0==m.comparePoints(e[0].end,e[1].start)?e=[m.fromPoints(e[0].start,e[1].end)]:0==m.comparePoints(e[0].start,e[1].end)&&(e=[m.fromPoints(e[1].start,e[0].end)])),t.$bracketHighlight={ranges:e,markerIds:e.map(function(e){return t.addMarker(e,n,"text")})}}}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var h=this;this.$highlightTagPending=!0,setTimeout(function(){h.$highlightTagPending=!1;var e=h.session;if(e&&e.bgTokenizer){var t=h.getCursorPosition(),n=new _(h.session,t.row,t.column),o=n.getCurrentToken();if(o&&/\b(?:tag-open|tag-name)/.test(o.type)){if(-1===o.type.indexOf("tag-open")||(o=n.stepForward())){var i=o.value,r=o.value,s=0,a=n.stepBackward();if("<"===a.value)for(;a=o,(o=n.stepForward())&&(-1!==o.type.indexOf("tag-name")?i===(r=o.value)&&("<"===a.value?s++:"</"===a.value&&s--):i===r&&"/>"===o.value&&s--),o&&0<=s;);else{do{o=a,a=n.stepBackward();if(o)if(-1!==o.type.indexOf("tag-name"))i===o.value&&("<"===a.value?s++:"</"===a.value&&s--);else if("/>"===o.value){for(var l=0,c=a;c;){if(-1!==c.type.indexOf("tag-name")&&c.value===i){s--;break}if("<"===c.value)break;c=n.stepBackward(),l++}for(var u=0;u<l;u++)n.stepForward()}}while(a&&s<=0);n.stepForward()}if(o){var d=n.getCurrentTokenRow(),t=n.getCurrentTokenColumn(),d=new m(d,t,d,t+o.value.length),t=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=t&&0!==d.compareRange(t.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),e.$tagHighlight||(e.$tagHighlight=e.addMarker(d,"ace_bracket","text"))}else e.removeMarker(e.$tagHighlight),e.$tagHighlight=null}}else e.removeMarker(e.$tagHighlight),e.$tagHighlight=null}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.isFocused()||e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){e=e.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine){"line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition());this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(e=!1)}if(t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new m(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),o=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",o)}o=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(o),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,o=t.end.column,e=e.getLine(t.start.row),t=e.substring(n,o);if(!(5e3<t.length)&&/[\w\d]/.test(t)){t=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:t}),o=e.substring(n-1,o+1);if(t.test(o))return t}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var o=this.selection.getAllRanges(),i=0;i<o.length;i++){var r=o[i];i&&o[i-1].start.row==r.start.row||(e+=this.session.getLine(r.start.row)+t)}}var s={text:e};return this._signal("copy",s),b.lineMode=n?s.text:"",s.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e,t){t={text:e,event:t};this.commands.exec("paste",this,t)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,e=t==b.lineMode,n=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)e?n.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(e)this.selection.rangeList.ranges.forEach(function(e){n.insert({row:e.start.row,column:0},t)});else{var o=t.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges,e=!(2!=o.length||o[0]&&o[1]);if(o.length!=i.length||e)return this.commands.exec("insertstring",this,t);for(var r=i.length;r--;){var s=i[r];s.isEmpty()||n.remove(s),n.insert(s.start,o[r])}}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,o=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var r=o.transformAction(n.getState(i.row),"insertion",this,n,e);r&&(e!==r.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=r.text)}"\t"==e&&(e=this.session.getTabString());if(this.selection.isEmpty())this.session.getOverwrite()&&-1==e.indexOf("\n")&&((s=new m.fromPoints(i,i)).end.column+=e.length,this.session.remove(s));else{var s=this.getSelectionRange(),i=this.session.remove(s);this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(i.row);if(i.column>a.search(/\S|$/)){var l=a.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+l)}}this.clearSelection();t=i.column,s=n.getState(i.row),a=n.getLine(i.row),l=o.checkOutdent(s,a,e);n.insert(i,e),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new m(i.row,t+r.selection[0],i.row,t+r.selection[1])):this.selection.setSelectionRange(new m(i.row+r.selection[0],r.selection[1],i.row+r.selection[2],r.selection[3])));if(this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){a=o.getNextLineIndent(s,a.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},a)}l&&o.autoOutdent(s,n,i.row)}},this.autoIndent=function(){var e,t,n,o=this.session,i=o.getMode();n=this.selection.isEmpty()?(t=0,o.doc.getLength()-1):(t=(e=this.getSelectionRange()).start.row,e.end.row);for(var r,s,a="",l="",c=o.getTabString(),u=t;u<=n;u++)0<u&&(a=o.getState(u-1),r=o.getLine(u-1),l=i.getNextLineIndent(a,r,c)),s=o.getLine(u),l!==(s=i.$getIndent(s))&&(0<s.length&&(s=new m(u,0,u,s.length),o.remove(s)),0<l.length&&o.insert({row:u,column:0},l)),i.autoOutdent(a,o,u)},this.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});t=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(t):t(),this.endOperation()},this.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());!e&&this.selection.isEmpty()||this.insert(e,!0);(t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},this.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,o=n.getState(t.start.row),e=n.getMode().transformAction(o,"deletion",this,n,t);if(0===t.end.column){o=n.getTextRange(t);if("\n"==o[o.length-1]){n=n.getLine(t.end.row);/^\s+$/.test(n)&&(t.end.column=n.length)}}e&&(t=e)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,o=this.session.getLine(e.row),t=t<o.length?(n=o.charAt(t)+o.charAt(t-1),new m(e.row,t-1,e.row,t+1)):(n=o.charAt(t-1)+o.charAt(t-2),new m(e.row,t-2,e.row,t));this.session.replace(t,n),this.session.selection.moveToPosition(t.end)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){a=this.$getSelectedRows();e.indentRows(a.first,a.last,"\t");return}}var o=e.getLine(t.start.row),i=t.start,n=e.getTabSize(),i=e.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var r=n-i%n,s=f.stringRepeat(" ",r);else{for(r=i%n;" "==o[t.start.column-1]&&r;)t.start.column--,r--;this.selection.setSelectionRange(t),s="\t"}return this.insert(s)}var a=this.$getSelectedRows();e.indentRows(a.first,a.last,"\t")},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],o=e.first;o<=e.last;o++)n.push(t.getLine(o));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var i=new m(0,0,0,0),o=e.first;o<=e.last;o++){var r=t.getLine(o);i.start.row=o,i.end.row=o,i.end.column=r.length,t.replace(i,n[o-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var o=this.session.getLine(e);n.lastIndex<t;){var i=n.exec(o);if(i.index<=t&&i.index+i[0].length>=t)return{value:i[0],start:i.index,end:i.index+i[0].length}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,o=new m(t,n-1,t,n),i=this.session.getTextRange(o);if(!isNaN(parseFloat(i))&&isFinite(i)){var r=this.getNumberAt(t,n);if(r){var s=0<=r.value.indexOf(".")?r.start+r.value.indexOf(".")+1:r.end,o=r.start+r.value.length-s,i=parseFloat(r.value);i*=Math.pow(10,o),s!==r.end&&n<s?e*=Math.pow(10,r.end-n-1):e*=Math.pow(10,r.end-n),i+=e;i=(i/=Math.pow(10,o)).toFixed(o),o=new m(t,r.start,t,r.end);this.session.replace(o,i),this.moveCursorTo(t,Math.max(r.start+1,n+i.length-r.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var n=this.selection.getCursor().row,e=this.selection.getCursor().column;this.selection.selectWord();var o=this.getSelectedText(),i=this.selection.getWordRange().start.column,t=o.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),r=e-i-1;r<0&&(r=0);var s,a=0,l=this;o.match(/[A-Za-z0-9_]+/)&&t.forEach(function(e,t){s=a+e.length,a<=r&&r<=s&&(o=e,l.selection.clearSelection(),l.moveCursorTo(n,a+i),l.selection.selectTo(n,s+i)),a=s});for(var c=this.$toggleWordPairs,u=0;u<c.length;u++)for(var d=c[u],h=0;h<=1;h++){var p=+!h,g=o.match(new RegExp("^\\s?_?("+f.escapeRegExp(d[h])+")\\s?$","i"));g&&o.match(new RegExp("([_]|^|\\s)("+f.escapeRegExp(g[1])+")($|\\s)","g"))&&(g=o.replace(new RegExp(f.escapeRegExp(d[h]),"i"),function(e){var t=d[p];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+d[p].charAt(0).toUpperCase()+t.substr(1)),t}),this.insert(g))}},this.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),o=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{i=o?n.start:n.end,t=t.insert(i,t.getTextRange(n),!1);n.start=i,n.end=t,e.setSelectionRange(n,o)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(e,t){var n=this.selection;if(!n.inMultiSelectMode||this.inVirtualSelectionMode){var o=n.toOrientedRange(),i=this.$getSelectedRows(o),r=this.session.$moveLines(i.first,i.last,t?0:e);t&&-1==e&&(r=0),o.moveBy(r,0),n.fromOrientedRange(o)}else{var s=n.rangeList.ranges;n.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=s.length,u=0;u<c;u++){var d=u;s[u].moveBy(a,0);for(var h=(i=this.$getSelectedRows(s[u])).first,p=i.last;++u<c;){l&&s[u].moveBy(l,0);var g=this.$getSelectedRows(s[u]);if(t&&g.first!=p)break;if(!t&&g.first>p+1)break;p=g.last}u--,a=this.session.$moveLines(h,p,t?0:e),t&&-1==e&&(d=u+1);for(;d<=u;)s[d].moveBy(a,0),d++;t||(a=0),l+=a}n.fromOrientedRange(n.ranges[0]),n.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(e)},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,o=this.renderer.layerConfig,i=e*Math.floor(o.height/o.lineHeight);!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):!1===t&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection());e=n.scrollTop;n.scrollBy(0,i*o.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(e)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,o){this.renderer.scrollToLine(e,t,n,o)},this.centerSelection=function(){var e=this.getSelectionRange(),e={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var n=this.getCursorPosition(),o=new _(this.session,n.row,n.column),i=o.getCurrentToken(),r=i||o.stepForward();if(r){var s,a,l,c=!1,u={},d=n.column-r.start,h={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;d<r.value.length&&!c;d++)if(h[r.value[d]]){a=h[r.value[d]]+"."+r.type.replace("rparen","lparen"),isNaN(u[a])&&(u[a]=0);switch(r.value[d]){case"(":case"[":case"{":u[a]++;break;case")":case"]":case"}":u[a]--,-1===u[a]&&(s="bracket",c=!0)}}}else-1!==r.type.indexOf("tag-name")&&(isNaN(u[r.value])&&(u[r.value]=0),"<"===i.value?u[r.value]++:"</"===i.value&&u[r.value]--,-1===u[r.value]&&(s="tag",c=!0))}while(c||(i=r,r=o.stepForward(),d=0),r&&!c);if(s){if("bracket"===s){if(!(p=this.session.getBracketRange(n))){l=(p=new m(o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d-1,o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d-1)).start;(t||l.row===n.row&&Math.abs(l.column-n.column)<2)&&(p=this.session.getBracketRange(l))}}else if("tag"===s){if(!r||-1===r.type.indexOf("tag-name"))return;var p,g=r.value;if(0===(p=new m(o.getCurrentTokenRow(),o.getCurrentTokenColumn()-2,o.getCurrentTokenRow(),o.getCurrentTokenColumn()-2)).compare(n.row,n.column)){c=!1;for(;r=i,(i=o.stepBackward())&&(-1!==i.type.indexOf("tag-close")&&p.setEnd(o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1),r.value===g&&-1!==r.type.indexOf("tag-name")&&("<"===i.value?u[g]++:"</"===i.value&&u[g]--,0===u[g]&&(c=!0))),i&&!c;);}r&&r.type.indexOf("tag-name")&&((l=p.start).row==n.row&&Math.abs(l.column-n.column)<2&&(l=p.end))}(l=p&&p.cursor||l)&&(e?p&&t?this.selection.setRange(p):p&&p.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(l.row,l.column):this.selection.moveTo(l.row,l.column))}}},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty()){e=e||1;for(;e--;)this.selection.moveCursorLeft()}else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty()){e=e||1;for(;e--;)this.selection.moveCursorRight()}else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),t=0;return n&&(this.$tryReplace(n,e)&&(t=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),t},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),o=0;if(!n.length)return o;t=this.getSelectionRange();this.selection.moveTo(0,0);for(var i=n.length-1;0<=i;--i)this.$tryReplace(n[i],e)&&o++;return this.selection.setSelectionRange(t),o},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t=t||{},"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var o=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(o)||this.$search.$options.needle)||(o=this.session.getWordRange(o.start.row,o.start.column),e=this.session.getTextRange(o)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:o});e=this.$search.find(this.session);if(t.preventScroll)return e;if(e)return this.revealRange(e,n),e;t.backwards?o.start=o.end:o.end=o.start,this.selection.setRange(o)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(e){e.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(e){if(e){var o,i=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var s=this.$scrollAnchor;s.style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild);var t=this.on("changeSelection",function(){r=!0}),n=this.renderer.on("beforeRender",function(){r&&(o=i.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(r&&o&&(i.isFocused()||i.searchBox&&i.searchBox.isFocused())){var e=i.renderer,t=e.$cursorLayer.$pixelPos,n=e.layerConfig,e=t.top-n.offset;null!=(r=0<=t.top&&e+o.top<0||!(t.top<n.height&&t.top+o.top+n.lineHeight>window.innerHeight)&&null)&&(s.style.top=e+"px",s.style.left=t.left+"px",s.style.height=n.lineHeight+"px",s.scrollIntoView(r)),r=o=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",t),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",n))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,o.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},this.prompt=function(t,n,o){var i=this;v.loadModule("./ext/prompt",function(e){e.prompt(i,t,n,o)})}}.call(y.prototype),v.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?C.attach(this):C.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?C.attach(this):C.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.getValue());if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),o.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),o.addCssClass(this.container,"ace_hasPlaceholder");e=o.createElement("div");e.className="ace_placeholder",e.textContent=this.$placeholder||"",this.renderer.placeholderNode=e,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var C={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"·":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=y}),define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";function i(e,t){for(var n=t;n--;){var o=e[n];if(o&&!o[0].ignore){for(;n<t-1;){var i=function(e,t){for(var n=e.length;n--;)for(var o=0;o<t.length;o++)if(!s(e[n],t[o])){for(;n<e.length;){for(;o--;)s(t[o],e[n]);o=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}(e[n],e[n+1]);e[n]=i[0],e[n+1]=i[1],n++}return 1}}}function a(e){return{row:e.row,column:e.column}}function o(e){e=e||this;if(Array.isArray(e))return e.map(o).join("\n");var t="";e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(r).join("\n"):r(e.value)),e.start&&(t+=r(e));(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")");return t}function r(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function s(e,t){var n="insert"==e.action,o="insert"==t.action;if(n&&o)if(0<=g(t.start,e.end))l(t,e,-1);else{if(!(g(t.start,e.start)<=0))return;l(e,t,1)}else if(n&&!o)if(0<=g(t.start,e.end))l(t,e,-1);else{if(!(g(t.end,e.start)<=0))return;l(e,t,-1)}else if(!n&&o)if(0<=g(t.start,e.start))l(t,e,1);else{if(!(g(t.start,e.start)<=0))return;l(e,t,1)}else if(!n&&!o)if(0<=g(t.start,e.start))l(t,e,1);else{if(!(g(t.end,e.start)<=0))return;l(e,t,-1)}return 1}function l(e,t,n){c(e.start,t.start,t.end,n),c(e.end,t.start,t.end,n)}function c(e,t,n,o){e.row==(1==o?t:n).row&&(e.column+=o*(n.column-t.column)),e.row+=o*(n.row-t.row)}function u(e,t){var n=e.lines,o=e.end;e.end=a(t);var i=e.end.row-e.start.row,r=n.splice(i,n.length),i=i?t.column:t.column-e.start.column;n.push(r[0].substring(0,i)),r[0]=r[0].substr(i);return{start:a(t),end:o,lines:r,action:e.action}}function d(e,t){t={start:a((n=t).start),end:a(n.end),action:n.action,lines:n.lines.slice()};for(var n,o=e.length;o--;){for(var i=e[o],r=0;r<i.length;r++){var s=function(e,t){var n,o,i="insert"==e.action,r="insert"==t.action;if(i&&r)g(e.start,t.start)<0?l(t,e,1):l(e,t,1);else if(i&&!r)0<=g(e.start,t.end)?l(e,t,-1):(g(e.start,t.start)<=0||l(e,p.fromPoints(t.start,e.start),-1),l(t,e,1));else if(!i&&r)0<=g(t.start,e.end)?l(t,e,-1):(g(t.start,e.start)<=0||l(t,p.fromPoints(e.start,t.start),-1),l(e,t,1));else if(!i&&!r)if(0<=g(t.start,e.end))l(t,e,-1);else{if(!(g(t.end,e.start)<=0))return g(e.start,t.start)<0&&(e=u(n=e,t.start)),0<g(e.end,t.end)&&(o=u(e,t.end)),c(t.end,e.start,e.end,-1),o&&!n&&(e.lines=o.lines,e.start=o.start,e.end=o.end,o=e),[t,n,o].filter(Boolean);l(e,t,-1)}return[t,e]}(i[r],t);t=s[0],2!=s.length&&(s[2]?(i.splice(r+1,1,s[1],s[2]),r++):s[1]||(i.splice(r,1),r--))}i.length||e.splice(o,1)}return e}function h(){this.$maxRev=0,this.$fromUndo=!1,this.reset()}(function(){this.addSession=function(e){this.$session=e},this.add=function(e,t,n){if(!this.$fromUndo&&e!=this.$lastDelta){this.$keepRedoStack||(this.$redoStack.length=0);!1!==t&&this.lastDeltas||(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev);"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e);this.lastDeltas.push(e)}},this.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,o=n.length;o--;){var i=n[o][0];if(i.id<=e)break;i.id<t&&(i.ignore=!0)}this.lastDeltas=null},this.getSelection=function(e,t){for(var n=this.selections,o=n.length;o--;){var i=n[o];if(i.rev<e)return t&&(i=n[o+1]),i}},this.getRevision=function(){return this.$rev},this.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,o=null,i=0,r=n.length;r--;){var s=n[r][0];s.id<t&&!o&&(o=r+1);if(s.id<=e){i=r+1;break}}return n.slice(i,o)},this.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},this.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},this.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(i(n,n.length)){e=e||this.$session,this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var o=n.pop(),n=null;return o&&(n=e.undoChanges(o,t),this.$redoStack.push(o),this.$syncRev()),this.$fromUndo=!1,n}},this.redo=function(e,t){this.lastDeltas=null,e=e||this.$session,this.$fromUndo=!0;if(this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);(function(e,t){for(var n=0;n<t.length;n++)for(var o=t[n],i=0;i<o.length;i++)d(e,o[i])})(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(e){e[0].id=++this.$maxRev},this)}var o=this.$redoStack.pop(),n=null;return o&&(n=e.redoChanges(o,t),this.$undoStack.push(o),this.$syncRev()),this.$fromUndo=!1,n},this.$syncRev=function(){var e=this.$undoStack,e=e[e.length-1],e=e&&e[0].id||0;this.$redoStackBaseRev=e,this.$rev=e},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return 0<this.$undoStack.length},this.canRedo=function(){return 0<this.$redoStack.length},this.bookmark=function(e){null==e&&(e=this.$rev),this.mark=e},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(e){return e?o(e):o(this.$undoStack)+"\n---\n"+o(this.$redoStack)}}).call(h.prototype);var p=e("./range").Range,g=p.comparePoints;p.comparePoints;t.UndoManager=h}),define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var s=e("../lib/dom"),e=function(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(e){s.translate(this.element,0,-(e.firstRowScreen*e.lineHeight%this.canvasHeight)-e.offset*this.$offsetCoefficient)},this.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},this.computeLineTop=function(e,t,n){var o=t.firstRowScreen*t.lineHeight,o=Math.floor(o/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-o*this.canvasHeight},this.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},this.getLength=function(){return this.cells.length},this.get=function(e){return this.cells[e]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=s.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},this.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=s.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},this.createCell=function(e,t,n,o){var i=this.cellCache.pop();if(!i){var r=s.createElement("div");o&&o(r),this.element.appendChild(r),i={element:r,text:"",row:e}}return i.row=e,i}}).call(e.prototype),t.Lines=e}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,t,n){"use strict";function c(e){var t=document.createTextNode("");e.appendChild(t);t=m.createElement("span");return e.appendChild(t),e}var m=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/lang"),i=e("../lib/event_emitter").EventEmitter,s=e("./lines").Lines,e=function(e){this.element=m.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new s(this.element),this.$lines.$offsetCoefficient=1};(function(){o.implement(this,i),this.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),(this.session=e)&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],o=n.row,i=(i=this.$annotations[o])||(this.$annotations[o]={text:[]}),o=(o=n.text)?r.escapeHTML(o):n.html||"";-1===i.text.indexOf(o)&&i.text.push(o);n=n.type;"error"==n?i.className=" ace_error":"warning"==n&&" ace_error"!=i.className?i.className=" ace_warning":"info"!=n||i.className||(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0!=n)if("remove"==e.action)this.$annotations.splice(t,1+n,null);else{n=new Array(1+n);n.unshift(t,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(e){this.config=e;var t=this.session,n=e.firstRow,o=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=o,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var i=t.getNextFoldLine(n),r=i?i.start.row:1/0,s=null,a=-1,l=n;;){r<l&&(l=i.end.row+1,r=(i=t.getNextFoldLine(l,i))?i.start.row:1/0);if(o<l){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(s=this.$lines.get(++a))?s.row=l:(s=this.$lines.createCell(l,e,this.session,c),this.$lines.push(s)),this.$renderCell(s,e,i,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},this.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,o=t.$firstLineNumber,i=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(i=t.getLength()+o-1);i=n?n.getWidth(t,i,e):i.toString().length*e.characterWidth,e=this.$padding||this.$computePadding();(i+=e.left+e.right)===this.gutterWidth||isNaN(i)||(this.gutterWidth=i,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",i))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;this.$cursorRow=e;if(!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var o=t[n];if(o.row>=this.$cursorRow){if(o.row>this.$cursorRow){var i=this.session.getFoldLine(this.$cursorRow);if(!(0<n&&i&&i.start.row==t[n-1].row))break;o=t[n-1]}o.element.className="ace_gutter-active-line "+o.element.className,this.$cursorCell=o;break}}}}},this.scrollLines=function(e){var t=this.config;this.config=e,this.$updateCursorRow();if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),o=this.oldLastRow;this.oldLastRow=n;if(!t||o<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);0<i;i--)this.$lines.shift();if(n<o)for(i=this.session.getFoldedRowCount(n+1,o);0<i;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),o<n&&this.$lines.push(this.$renderLines(e,o+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},this.$renderLines=function(e,t,n){for(var o=[],i=t,r=this.session.getNextFoldLine(i),s=r?r.start.row:1/0;;){s<i&&(i=r.end.row+1,s=(r=this.session.getNextFoldLine(i,r))?r.start.row:1/0);if(n<i)break;var a=this.$lines.createCell(i,e,this.session,c);this.$renderCell(a,e,r,i),o.push(a),i++}return o},this.$renderCell=function(e,t,n,o){var i=e.element,r=this.session,s=i.childNodes[0],a=i.childNodes[1],l=r.$firstLineNumber,c=r.$breakpoints,u=r.$decorations,d=r.gutterRenderer||this.$renderer,h=this.$showFoldWidgets&&r.foldWidgets,p=n?n.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";this.$highlightGutterLine&&(o==this.$cursorRow||n&&o<this.$cursorRow&&p<=o&&this.$cursorRow<=n.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),c[o]&&(g+=c[o]),u[o]&&(g+=u[o]),this.$annotations[o]&&(g+=this.$annotations[o].className),i.className!=g&&(i.className=g);if(h){var f=h[o];null==f&&(f=h[o]=r.getFoldWidget(o))}if(f){g="ace_fold-widget ace_"+f;"start"==f&&o==p&&o<n.end.row?g+=" ace_closed":g+=" ace_open",a.className!=g&&(a.className=g);g=t.lineHeight+"px";m.setStyle(a.style,"height",g),m.setStyle(a.style,"display","inline-block")}else a&&m.setStyle(a.style,"display","none");l=(d?d.getText(r,o):o+l).toString();return l!==s.data&&(s.data=l),m.setStyle(e.element.style,"height",this.$lines.computeLineHeight(o,t,r)+"px"),m.setStyle(e.element.style,"top",this.$lines.computeLineTop(o,t,r)+"px"),e.text=l,e},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?m.addCssClass(this.element,"ace_folding-enabled"):m.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=m.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0}}).call(e.prototype),t.Gutter=e}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var p=e("../range").Range,o=e("../lib/dom"),e=function(e){this.element=o.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},this.update=function(e){if(e){this.config=e,this.i=0;var t,n;for(n in this.markers){var o=this.markers[n];if(o.range){var i=o.range.clipRows(e.firstRow,e.lastRow);if(!i.isEmpty()){i=i.toScreenRange(this.session);if(o.renderer){var r=this.$getTop(i.start.row,e),s=this.$padding+i.start.column*e.characterWidth;o.renderer(t,i,s,r,e)}else"fullLine"==o.type?this.drawFullLineMarker(t,i,o.clazz,e):"screenLine"==o.type?this.drawScreenLineMarker(t,i,o.clazz,e):i.isMultiLine()?"text"==o.type?this.drawTextMarker(t,i,o.clazz,e):this.drawMultiLineMarker(t,i,o.clazz,e):this.drawSingleLineMarker(t,i,o.clazz+" ace_start ace_br15",e)}}else o.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,o,i){for(var r,s=this.session,a=t.start.row,l=t.end.row,c=a,u=0,d=s.getScreenLastRowColumn(c),h=new p(c,t.start.column,c,u);c<=l;c++)h.start.row=h.end.row=c,h.start.column=c==a?t.start.column:s.getRowWrapIndent(c),r=u,u=h.end.column=d,d=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(e,h,n+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&t.start.column?1:0)|(r<u?2:0)|(d<u?4:0)|(c==l?8:0)),o,c==l?0:1,i)},this.drawMultiLineMarker=function(e,t,n,o,i){var r=this.$padding,s=o.lineHeight,a=this.$getTop(t.start.row,o),l=r+t.start.column*o.characterWidth;i=i||"";this.session.$bidiHandler.isBidiRow(t.start.row)?((c=t.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,n+" ace_br1 ace_start",o,null,i)):this.elt(n+" ace_br1 ace_start","height:"+s+"px;right:0;top:"+a+"px;left:"+l+"px;"+(i||""));if(this.session.$bidiHandler.isBidiRow(t.end.row))(c=t.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,n+" ace_br12",o,null,i);else{a=this.$getTop(t.end.row,o);var c=t.end.column*o.characterWidth;this.elt(n+" ace_br12","height:"+s+"px;width:"+c+"px;top:"+a+"px;left:"+r+"px;"+(i||""))}if(!((s=(t.end.row-t.start.row-1)*o.lineHeight)<=0)){a=this.$getTop(t.start.row+1,o);t=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(t?" ace_br"+t:""),"height:"+s+"px;right:0;top:"+a+"px;left:"+r+"px;"+(i||""))}},this.drawSingleLineMarker=function(e,t,n,o,i,r){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,o,i,r);var s=o.lineHeight,e=(t.end.column+(i||0)-t.start.column)*o.characterWidth,i=this.$getTop(t.start.row,o),o=this.$padding+t.start.column*o.characterWidth;this.elt(n,"height:"+s+"px;width:"+e+"px;top:"+i+"px;left:"+o+"px;"+(r||""))},this.drawBidiSingleLineMarker=function(e,t,n,o,i,r){var s=o.lineHeight,a=this.$getTop(t.start.row,o),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach(function(e){this.elt(n,"height:"+s+"px;width:"+e.width+(i||0)+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(r||""))},this)},this.drawFullLineMarker=function(e,t,n,o,i){var r=this.$getTop(t.start.row,o),s=o.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,o)-r),this.elt(n,"height:"+s+"px;top:"+r+"px;left:0;right:0;"+(i||""))},this.drawScreenLineMarker=function(e,t,n,o,i){t=this.$getTop(t.start.row,o),o=o.lineHeight;this.elt(n,"height:"+o+"px;top:"+t+"px;left:0;right:0;"+(i||""))}}).call(e.prototype),t.Marker=e}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,t,n){"use strict";var o=e("../lib/oop"),c=e("../lib/dom"),v=e("../lib/lang"),i=e("./lines").Lines,r=e("../lib/event_emitter").EventEmitter,e=function(e){this.dom=c,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new i(this.element)};(function(){o.implement(this,r),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,e="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){(this.session=e)&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&("string"==typeof(this.showInvisibles=e)?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++)this.showTabs?((o=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",o.textContent=v.stringRepeat(this.TAB_CHAR,n),t.push(o)):t.push(this.dom.createTextNode(v.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var o,i="ace_indent-guide",r=this.showSpaces?" ace_invisible ace_invisible_space":"",s=this.showSpaces?v.stringRepeat(this.SPACE_CHAR,this.tabSize):v.stringRepeat(" ",this.tabSize),a=this.showTabs?" ace_invisible ace_invisible_tab":"",l=this.showTabs?v.stringRepeat(this.TAB_CHAR,this.tabSize):s;(o=this.dom.createElement("span")).className=i+r,o.textContent=s,this.$tabStrings[" "]=o;(o=this.dom.createElement("span")).className=i+a,o.textContent=l,this.$tabStrings["\t"]=o}},this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var o=Math.max(t,e.firstRow),i=Math.min(n,e.lastRow),r=this.element.childNodes,s=0,a=e.firstRow;a<o;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(o)){o=l.start.row;break}a=l.end.row}s++}for(var l,c=!1,a=o,u=(l=this.session.getNextFoldLine(a))?l.start.row:1/0;;){u<a&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0);if(i<a)break;var d=r[s++];if(d){this.dom.removeChildren(d),this.$renderLine(d,a,a==u&&l),c&&(d.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var h=e.lineHeight*this.session.getRowLength(a)+"px";d.style.height!=h&&(c=!0,d.style.height=h)}a++}if(c)for(;s<this.$lines.cells.length;){var p=this.$lines.cells[s++];p.element.style.top=this.$lines.computeLineTop(p.row,e,this.session)+"px"}},this.scrollLines=function(e){var t=this.config;this.config=e;if(this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,o=t?t.lastRow:-1;if(!t||o<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);0<i;i--)this.$lines.shift();if(t.lastRow>e.lastRow)for(i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);0<i;i--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,t,n){for(var o=[],i=t,r=this.session.getNextFoldLine(i),s=r?r.start.row:1/0;;){s<i&&(i=r.end.row+1,s=(r=this.session.getNextFoldLine(i,r))?r.start.row:1/0);if(n<i)break;var a=this.$lines.createCell(i,e,this.session),l=a.element;this.dom.removeChildren(l),c.setStyle(l.style,"height",this.$lines.computeLineHeight(i,e,this.session)+"px"),c.setStyle(l.style,"top",this.$lines.computeLineTop(i,e,this.session)+"px"),this.$renderLine(l,i,i==s&&r),this.$useLineGroups()?l.className="ace_line_group":l.className="ace_line",o.push(a),i++}return o},this.update=function(e){this.$lines.moveContainer(e);for(var t=(this.config=e).firstRow,n=e.lastRow,o=this.$lines;o.getLength();)o.pop();o.push(this.$renderLinesFragment(e,t,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,o){for(var i=this,r=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,s=this.dom.createFragment(this.element),a=0;g=r.exec(o);){var l=g[1],c=g[2],u=g[3],d=g[4],h=g[5];if(i.showSpaces||!c){var p=a!=g.index?o.slice(a,g.index):"",a=g.index+g[0].length;p&&s.appendChild(this.dom.createTextNode(p,this.element));if(l){var g=i.session.getScreenTabSize(t+g.index);s.appendChild(i.$tabStrings[g].cloneNode(!0)),t+=g-1}else if(c)i.showSpaces?((m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",m.textContent=v.stringRepeat(i.SPACE_CHAR,c.length),s.appendChild(m)):s.appendChild(this.com.createTextNode(c,this.element));else if(u)(m=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",m.textContent=v.stringRepeat(i.SPACE_CHAR,u.length),s.appendChild(m);else if(d){t+=1;(m=this.dom.createElement("span")).style.width=2*i.config.characterWidth+"px",m.className=i.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",m.textContent=i.showSpaces?i.SPACE_CHAR:d,s.appendChild(m)}else if(h){t+=1;(m=this.dom.createElement("span")).style.width=2*i.config.characterWidth+"px",m.className="ace_cjk",m.textContent=h,s.appendChild(m)}}}s.appendChild(this.dom.createTextNode(a?o.slice(a):o,this.element));if(this.$textToken[n.type])e.appendChild(s);else{var f="ace_"+n.type.replace(/\./g," ace_"),m=this.dom.createElement("span");"fold"==n.type&&(m.style.width=n.value.length*this.config.characterWidth+"px"),m.className=f,m.appendChild(s),e.appendChild(m)}return t+o.length},this.renderIndentGuide=function(e,t,n){var o=t.search(this.$indentGuideRe);if(o<=0||n<=o)return t;if(" "==t[0]){for(var i=(o-=o%this.tabSize)/this.tabSize,r=0;r<i;r++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return t.substr(o)}if("\t"!=t[0])return t;for(r=0;r<o;r++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return t.substr(o)},this.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},this.$renderWrappedLine=function(e,t,n){var o=0,i=0,r=n[0],s=0,a=this.$createLineElement();e.appendChild(a);for(var l=0;l<t.length;l++){var c=t[l],u=c.value;if(0==l&&this.displayIndentGuides){o=u.length;if(!(u=this.renderIndentGuide(a,u,r)))continue;o-=u.length}if(o+u.length<r)s=this.$renderToken(a,s,c,u),o+=u.length;else{for(;o+u.length>=r;)s=this.$renderToken(a,s,c,u.substring(0,r-o)),u=u.substring(r-o),o=r,a=this.$createLineElement(),e.appendChild(a),a.appendChild(this.dom.createTextNode(v.stringRepeat(" ",n.indent),this.element)),s=0,r=n[++i]||Number.MAX_VALUE;0!=u.length&&(o+=u.length,s=this.$renderToken(a,s,c,u))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(a,s,null,"",!0)},this.$renderSimpleLine=function(e,t){var n=0,o=t[0],i=o.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,o,i));for(var r=1;r<t.length;r++){if(n+(i=(o=t[r]).value).length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,o,i);n=this.$renderToken(e,n,o,i)}},this.$renderOverflowMessage=function(e,t,n,o,i){n&&this.$renderToken(e,t,n,o.slice(0,this.MAX_LINE_LENGTH-t));t=this.dom.createElement("span");t.className="ace_inline_button ace_keyword ace_toggle_wrap",t.textContent=i?"<hide>":"<click to see more...>",e.appendChild(t)},this.$renderLine=function(e,t,n){n||0==n||(n=this.session.getFoldLine(t));var o,i=e;if((o=n?this.$getFoldLineTokens(t,n):this.session.getTokens(t)).length){var r=this.session.getRowSplitData(t);if(r&&r.length){this.$renderWrappedLine(e,o,r);i=e.lastChild}else{i=e;this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i)),this.$renderSimpleLine(i,o)}}else this.$useLineGroups()&&(i=this.$createLineElement(),e.appendChild(i));if(this.showEOL&&i){n&&(t=n.end.row);n=this.dom.createElement("span");n.className="ace_invisible ace_invisible_eol",n.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,i.appendChild(n)}},this.$getFoldLineTokens=function(e,t){var r=this.session,s=[],a=r.getTokens(e);return t.walk(function(e,t,n,o,i){null!=e?s.push({type:"fold",value:e}):(i&&(a=r.getTokens(t)),a.length&&function(e,t,n){for(var o,i=0,r=0;r+e[i].value.length<t;){r+=e[i].value.length;if(++i==e.length)return}r!=t&&((o=e[i].value.substring(t-r)).length>n-t&&(o=o.substring(0,n-t)),s.push({type:e[i].type,value:o}),r=t+o.length,i+=1);for(;r<n&&i<e.length;)(o=e[i].value).length+r>n?s.push({type:e[i].type,value:o.substring(0,n-r)}):s.push(e[i]),r+=o.length,i+=1}(a,o,n))},t.end.row,this.session.getLine(t.end.row).length),s},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(e.prototype),t.Text=e}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),e=function(e){this.element=c.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),c.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)c.setStyle(t[n].style,"opacity",e?"":"0")},this.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";setTimeout(function(){c.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){c.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,c.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var e=c.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(1<this.cursors.length){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,c.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,c.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&c.removeCssClass(this.element,"ace_smooth-blinking"),e(!0);if(this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));if(c.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}}else this.$stopCssAnimation()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e=e||this.session.selection.getCursor();var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(e,t){return 0<=e.top&&e.top<t.maxHeight},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,o=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);for(var n=0,i=t.length;n<i;n++){var r=this.getPixelPosition(t[n].cursor,!0);if(!((r.top>e.height+e.offset||r.top<0)&&1<n)){var s=this.cursors[o++]||this.addCursor(),a=s.style;this.drawCursor?this.drawCursor(s,r,e,t[n],this.session):this.isCursorInView(r,e)?(c.setStyle(a,"display","block"),c.translate(s,r.left,r.top),c.setStyle(a,"width",Math.round(e.characterWidth)+"px"),c.setStyle(a,"height",e.lineHeight+"px")):c.setStyle(a,"display","none")}}for(;this.cursors.length>o;)this.removeCursor();var l=this.session.getOverwrite();this.$setOverwrite(l),this.$pixelPos=r,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(e){e!=this.overwrite&&((this.overwrite=e)?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(e.prototype),t.Cursor=e}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";function o(e){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)}var i=e("./lib/oop"),r=e("./lib/dom"),s=e("./lib/event"),a=e("./lib/event_emitter").EventEmitter;(function(){i.implement(this,a),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1}}).call(o.prototype);function l(e,t){o.call(this,e),this.scrollTop=0,this.scrollHeight=0,t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0}i.inherits(l,o),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;if(1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=this.setScrollHeight=function(e){32768<(this.scrollHeight=e)?(this.coeff=32768/e,e=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)}}.call(l.prototype);e=function(e,t){o.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(e,o),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(e.prototype),t.ScrollBar=l,t.ScrollBarV=l,t.ScrollBarH=e,t.VScrollBar=l,t.HScrollBar=e}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var o=e("./lib/event"),e=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;t&&(o.blockIdle(100),n.changes=0,n.onRender(t));n.changes?n.$recursionLimit--<0||n.schedule():n.$recursionLimit=2}};(function(){this.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},this.clear=function(e){var t=this.changes;return this.changes=0,t}}).call(e.prototype),t.RenderLoop=e}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var o=e("../lib/oop"),i=e("../lib/dom"),r=e("../lib/lang"),s=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c="function"==typeof ResizeObserver,t=t.FontMetrics=function(e){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=r.stringRepeat("X",256),this.$characterSize={width:0,height:0},c?this.$addObserver():this.checkForSizeChanges()};(function(){o.implement(this,l),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(e){void 0===e&&(e=this.$measureSizes());if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$addObserver=function(){var t=this;this.$observer=new window.ResizeObserver(function(e){t.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=s.onIdle(function e(){t.checkForSizeChanges(),s.onIdle(e,500)},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(e){e={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/256};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(e){this.$main.textContent=r.stringRepeat(e,256);return this.$main.getBoundingClientRect().width/256},this.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function e(t){return t&&t.parentElement?(window.getComputedStyle(t).zoom||1)*e(t.parentElement):1},this.$initTransformMeasureNodes=function(){function e(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]}this.els=i.buildDom([e(0,0),e(200,0),e(0,200),e(200,200)],this.el)},this.transformCoordinates=function(e,t){function n(e,t,n){var o=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/o,(+e[1]*n[0]-e[0]*n[1])/o]}function o(e,t){return[e[0]-t[0],e[1]-t[1]]}function i(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e*t[0],e*t[1]]}function s(e){e=e.getBoundingClientRect();return[e.left,e.top]}e=e&&r(1/this.$getZoom(this.el),e);this.els||this.$initTransformMeasureNodes();var a=s(this.els[0]),l=s(this.els[1]),c=s(this.els[2]),u=s(this.els[3]),d=n(o(u,l),o(u,c),o(i(l,c),i(u,a))),u=r(1+d[0],o(l,a)),l=r(1+d[1],o(c,a));if(t){c=d[0]*t[0]/200+d[1]*t[1]/200+1,t=i(r(t[0],u),r(t[1],l));return i(r(1/c/200,t),a)}a=o(e,a),a=n(o(u,r(d[0],a)),o(l,r(d[1],a)),a);return r(200,a)}}).call(t.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(e,t,n){"use strict";var o=e("./lib/oop"),a=e("./lib/dom"),r=e("./config"),i=e("./layer/gutter").Gutter,s=e("./layer/marker").Marker,l=e("./layer/text").Text,c=e("./layer/cursor").Cursor,u=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,g=e("./lib/event_emitter").EventEmitter,f='.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}',m=e("./lib/useragent"),v=m.isIE;a.importCssString(f,"ace_editor.css");e=function(e,t){var n=this;this.container=e||a.createElement("div"),a.addCssClass(this.container,"ace_editor"),a.HI_DPI&&a.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),this.$gutter=a.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=a.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=a.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new i(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);t=this.$textLayer=new l(this.content);this.canvas=t.element,this.$markerFront=new s(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.on("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!m.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,o.implement(this,g),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),a.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),(this.session=e)&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e);e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,n){void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,o){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=e?1:0;var i=this.container;o=o||(i.clientHeight||i.scrollHeight),n=n||(i.clientWidth||i.scrollWidth);t=this.$updateCachedSize(e,t,n,o);if(!this.$size.scrollerHeight||!n&&!o)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(t|this.$changes,!0):this.$loop.schedule(t|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(e,t,n,o){o-=this.$extraHeight||0;var i=0,r=this.$size,s={width:r.width,height:r.height,scrollerHeight:r.scrollerHeight,scrollerWidth:r.scrollerWidth};o&&(e||r.height!=o)&&(r.height=o,i|=this.CHANGE_SIZE,r.scrollerHeight=r.height,this.$horizScroll&&(r.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL);if(n&&(e||r.width!=n)){i|=this.CHANGE_SIZE,r.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,a.setStyle(this.scrollBarH.element.style,"left",t+"px"),a.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),r.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),a.setStyle(this.$gutter.style,"left",this.margin.left+"px");t=this.scrollBarV.getWidth()+"px";a.setStyle(this.scrollBarH.element.style,"right",t),a.setStyle(this.scroller.style,"right",t),a.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight());(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(i|=this.CHANGE_FULL)}return r.$dirty=!n||!o,i&&this._signal("resize",s),i},this.onGutterResize=function(e){e=this.$showGutter?e:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,e=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=a.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=a.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}e=this.$printMarginEl.style;e.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",e.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var o=this.layerConfig,i=n.top,r=n.left;i-=o.offset;var s=t&&t.useTextareaForIME?this.lineHeight:v?0:1;if(i<0||i>o.height-s)a.translate(this.textarea,0,0);else{n=1,o=this.$size.height-s;t?t.useTextareaForIME?(t=this.textarea.value,n=this.characterWidth*this.session.$getStringScreenWidth(t)[0]):i+=this.lineHeight+2:i+=this.lineHeight;(r-=this.scrollLeft)>this.$size.scrollerWidth-n&&(r=this.$size.scrollerWidth-n),r+=this.gutterWidth+this.margin.left,a.setStyle(e,"height",s+"px"),a.setStyle(e,"width",n+"px"),a.translate(this.textarea,Math.min(r,this.$size.scrollerWidth-n),Math.min(i,o))}}}else a.translate(this.textarea,-100,0)}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,o){var i=this.scrollMargin;i.top=0|e,i.bottom=0|t,i.right=0|o,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.setMargin=function(e,t,n,o){var i=this.margin;i.top=0|e,i.bottom=0|t,i.right=0|o,i.left=0|n,i.v=i.top+i.bottom,i.h=i.left+i.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig()|this.$loop.clear();if(n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var o=this.scrollTop+(n.firstRow-this.layerConfig.firstRow)*this.lineHeight;0<o&&(this.scrollTop=o,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),a.translate(this.content,-this.scrollLeft,-n.offset);t=n.width+2*this.$padding+"px",o=n.minHeight+"px";a.setStyle(this.content.style,"width",t),a.setStyle(this.content.style,"height",o)}e&this.CHANGE_H_SCROLL&&(a.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");e&this.CHANGE_FULL?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor()):e&this.CHANGE_SCROLL?(this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor()):(e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(n):e&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n)),this._signal("afterRender",e)}else this.$changes|=e},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);e=!(n<=2*this.lineHeight)&&t<e;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||e!=this.$vScroll){e!=this.$vScroll&&(this.$vScroll=e,this.scrollBarV.setVisible(e));e=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,e,n),this.desiredHeight=n,this._signal("autosize")}},this.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,o=this.session.getScreenLength()*this.lineHeight,i=this.$getLongestLine(),r=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-i-2*this.$padding<0),s=this.$horizScroll!==r;s&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var a=this.$vScroll;this.$maxLines&&1<this.lineHeight&&this.$autosize();var l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;o+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,o-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,i+2*this.$padding-t.scrollerWidth+u.right)));var d=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-o+c<0||this.scrollTop>u.top),h=a!==d;h&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var r=this.scrollTop%this.lineHeight,n=Math.ceil(l/this.lineHeight)-1,u=(c=Math.max(0,Math.round((this.scrollTop-r)/this.lineHeight)))+n,a=this.lineHeight,c=e.screenToDocumentRow(c,0),d=e.getFoldLine(c);d&&(c=d.start.row),n=e.documentToScreenRow(c,0),d=e.getRowLength(c)*a,u=Math.min(e.screenToDocumentRow(u,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(u)*a+d,r=this.scrollTop-n*a;d=0;this.layerConfig.width==i&&!s||(d=this.CHANGE_H_SCROLL);(s||h)&&(d|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),h&&(i=this.$getLongestLine()));return this.layerConfig={width:i,padding:this.$padding,firstRow:c,firstRowScreen:n,lastRow:u,lineHeight:a,characterWidth:this.characterWidth,minHeight:l,maxHeight:o,offset:r,gutterOffset:a?Math.max(0,Math.ceil((r+t.height-t.scrollerHeight)/a)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(i-this.$padding),d},this.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1||t<n.firstRow)){if(t!==1/0)return this.$textLayer.updateLines(n,e,t),!0;this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n)}}},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var o=this.$cursorLayer.getPixelPosition(e),i=o.left,r=o.top,e=n&&n.top||0,o=n&&n.bottom||0,n=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;r<n+e?(t&&n+e>r+this.lineHeight&&(r-=t*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):n+this.$size.scrollerHeight-o<r+this.lineHeight&&(t&&n+this.$size.scrollerHeight-o<r-this.lineHeight&&(r+=t*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+o-this.$size.scrollerHeight));o=this.scrollLeft;i<o?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):o+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):o<=this.$padding&&i-o<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),e=this.$size.scrollerHeight-this.lineHeight,t=n.top-e*(t||0);return this.session.setScrollTop(t),t},this.STEPS=8,this.$calcSteps=function(e,t){for(var n,o,i=0,r=this.STEPS,s=[],i=0;i<r;++i)s.push((n=i/this.STEPS,(t-(o=e))*(Math.pow(n-1,3)+1)+o));return s},this.scrollToLine=function(e,t,n,o){e=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(e-=this.$size.scrollerHeight/2);t=this.scrollTop;this.session.setScrollTop(e),!1!==n&&this.animateScrolling(t,o)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var o=this;if(e!=n){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(e=i[0])==n)return}var r=o.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:r},clearInterval(this.$timer),o.session.setScrollTop(r.shift()),o.session.$scrollTop=n,this.$timer=setInterval(function(){if(!o.session)return clearInterval(o.$timer);r.length?(o.session.setScrollTop(r.shift()),o.session.$scrollTop=n):null!=n?(o.session.$scrollTop=-1,o.session.setScrollTop(n),n=null):(o.$timer=clearInterval(o.$timer),o.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(0<t&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(0<e&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){if(this.$hasCssTransforms){o={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([e,t]);e=n[1]-this.gutterWidth-this.margin.left,t=n[0]}else o=this.scroller.getBoundingClientRect();var n=e+this.scrollLeft-o.left-this.$padding,e=n/this.characterWidth,t=Math.floor((t+this.scrollTop-o.top)/this.lineHeight),o=this.$blockCursor?Math.floor(e):Math.round(e);return{row:t,column:o,side:0<e-o?1:-1,offsetX:n}},this.screenToTextCoordinates=function(e,t){if(this.$hasCssTransforms){o={top:0,left:0};var n=this.$fontMetrics.transformCoordinates([e,t]);e=n[1]-this.gutterWidth-this.margin.left,t=n[0]}else o=this.scroller.getBoundingClientRect();var n=e+this.scrollLeft-o.left-this.$padding,e=n/this.characterWidth,e=this.$blockCursor?Math.floor(e):Math.round(e),o=Math.floor((t+this.scrollTop-o.top)/this.lineHeight);return this.session.screenToDocumentPosition(o,Math.max(e,0),n)},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),t=this.session.documentToScreenPosition(e,t),e=this.$padding+(this.session.$bidiHandler.isBidiRow(t.row,e)?this.session.$bidiHandler.getPosLeft(t.column):Math.round(t.column*this.characterWidth)),t=t.row*this.lineHeight;return{pageX:n.left+e-this.scrollLeft,pageY:n.top+t-this.scrollTop}},this.visualizeFocus=function(){a.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){a.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){(this.$composition=e).cssText||(e.cssText=this.textarea.style.cssText),null==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(a.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),a.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(e,t,n,o){var i=this.session;i.bgTokenizer.lines[n]=null;var r={type:t,value:e},s=i.getTokens(n);if(null==o)s.push(r);else for(var a=0,l=0;l<s.length;l++){var c=s[l];if(o<=(a+=c.value.length)){var u=c.value.length-(a-o),d=c.value.slice(0,u),u=c.value.slice(u);s.splice(l,1,{type:c.type,value:d},r,{type:c.type,value:u});break}}this.updateLines(n,n)},this.removeExtraToken=function(e,t){this.updateLines(e,e)},this.setTheme=function(n,o){function e(e){if(i.$themeId!=n)return o&&o();if(!e||!e.cssClass)throw new Error("couldn't load module "+n+" or it didn't call define");e.$id&&(i.$themeId=e.$id),a.importCssString(e.cssText,e.cssClass,i.container),i.theme&&a.removeCssClass(i.container,i.theme.cssClass);var t="padding"in e?e.padding:"padding"in(i.theme||{})?4:i.$padding;i.$padding&&t!=i.$padding&&i.setPadding(t),i.$theme=e.cssClass,i.theme=e,a.addCssClass(i.container,e.cssClass),a.setCssClass(i.container,"ace_dark",e.isDark),i.$size&&(i.$size.width=0,i.$updateSizeAsync()),i._dispatchEvent("themeLoaded",{theme:e}),o&&o()}var i=this;this.$themeId=n,i._dispatchEvent("themeChange",{theme:n});if(n&&"string"!=typeof n)e(n);else{var t=n||this.$options.theme.initialValue;r.loadModule(["theme",t],e)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){a.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){a.removeCssClass(this.container,e)},this.setCursorStyle=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.setMouseCursor=function(e){a.setStyle(this.scroller.style,"cursor",e)},this.attachToShadowRoot=function(){a.importCssString(f,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(e.prototype),r.defineOptions(e.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){a.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0;this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!m.isMobile&&!m.isIE}}),t.VirtualRenderer=e}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(a,e,t){"use strict";function l(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(d.get("loadWorkerFromBlob")){var t=function(t){var n="importScripts('"+o.qualifyURL(t)+"');";try{return new Blob([n],{type:"application/javascript"})}catch(e){t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return t.append(n),t.getBlob("application/javascript")}}(e),t=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(t)}return new Worker(e)}function c(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage}var n=a("../lib/oop"),o=a("../lib/net"),u=a("../lib/event_emitter").EventEmitter,d=a("../config");(function(){n.implement(this,u),this.$createWorkerFromOldConfig=function(e,t,n,o,i){a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl);if(d.get("packaged")||!a.toUrl)o=o||d.moduleUrl(t,"worker");else{var r=this.$normalizePath;o=o||r(a.toUrl("ace/worker/worker.js",null,"_"));var s={};e.forEach(function(e){s[e]=r(a.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=l(o),i&&this.send("importScripts",i),this.$worker.postMessage({init:!0,tlns:s,module:t,classname:n}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return o.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var o=this.callbackId++;this.callbacks[o]=n,t.push(o)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,50<e.length&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(c.prototype);e.UIWorkerClient=function(e,t,n){var o=null,i=!1,r=Object.create(u),s=[],a=new c({messageBuffer:s,terminate:function(){},postMessage:function(e){s.push(e);o&&(i?setTimeout(l):l())}});a.setEmitSync=function(e){i=e};var l=function(){var e=s.shift();e.command?o[e.command].apply(o,e.args):e.event&&r._signal(e.event,e.data)};return r.postMessage=function(e){a.onMessage({data:e})},r.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},r.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},d.loadModule(["worker",t],function(e){o=new e[n](r);for(;s.length;)l()}),a},e.WorkerClient=c,e.createWorker=l}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var l=e("./range").Range,o=e("./lib/event_emitter").EventEmitter,i=e("./lib/oop"),e=function(e,t,n,o,i,r){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=o,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=n;n=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=n.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){i.implement(this,o),this.setup=function(){var t=this,n=this.doc,e=this.session;this.selectionBefore=e.selection.toJSON(),e.selection.inMultiSelectMode&&e.selection.toSingleRange(),this.pos=n.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=e.addMarker(new l(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(e){e=n.createAnchor(e.row,e.column);e.$insertRight=!0,e.detach(),t.others.push(e)}),e.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var t=this.session,n=this;this.othersActive=!0,this.others.forEach(function(e){e.markerId=t.addMarker(new l(e.row,e.column,e.row,e.column+n.length),n.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,o=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,i=t.start.column-this.pos.column;this.updateAnchors(e),o&&(this.length+=n);if(o&&!this.session.$fromUndo)if("insert"===e.action)for(var r=this.others.length-1;0<=r;r--){var s={row:(a=this.others[r]).row,column:a.column+i};this.doc.insertMergedLines(s,e.lines)}else if("remove"===e.action)for(r=this.others.length-1;0<=r;r--){var a,s={row:(a=this.others[r]).row,column:a.column+i};this.doc.remove(new l(s.row,s.column,s.row,s.column-n))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var n=this,o=this.session,e=function(e,t){o.removeMarker(e.markerId),e.markerId=o.addMarker(new l(e.row,e.column,e.row,e.column+n.length),t,null,!1)};e(this.pos,this.mainClass);for(var t=this.others.length;t--;)e(this.others[t],this.othersClass)}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(e.prototype),t.PlaceHolder=e}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){function E(e,t){return e.row==t.row&&e.column==t.column}var I=e("../lib/event"),k=e("../lib/useragent");t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,i=t.ctrlKey,r=e.getAccelKey(),s=e.getButton();i&&k.isMac&&(s=t.button);if(e.editor.inMultiSelectMode&&2==s)e.editor.textInput.onContextMenu(e.domEvent);else if(i||n||r){if(0===s){var a,l=e.editor,c=l.selection,u=l.inMultiSelectMode,d=e.getDocumentPosition(),h=c.getCursor(),h=e.inSelection()||c.isEmpty()&&E(d,h),p=e.x,g=e.y,f=l.session,m=l.renderer.pixelToScreenCoordinates(p,g),v=m;if(l.$mouseHandler.$enableJumpToDef)i&&n||r&&n?a=o?"block":"add":n&&l.$blockSelectEnabled&&(a="block");else if(r&&!n){a="add";if(!u&&o)return}else n&&l.$blockSelectEnabled&&(a="block");a&&k.isMac&&t.ctrlKey&&l.$mouseHandler.cancelContextMenu();if("add"==a){if(u||!h){if(!u){var _=c.toOrientedRange();l.addSelectionMarker(_)}var b=c.rangeList.rangeAtPoint(d);l.inVirtualSelectionMode=!0,o&&(b=null,_=c.ranges[0]||_,l.removeSelectionMarker(_)),l.once("mouseup",function(){var e=c.toOrientedRange();b&&e.isEmpty()&&E(b.cursor,e.cursor)?c.substractPoint(e.cursor):(o?c.substractPoint(_.cursor):_&&(l.removeSelectionMarker(_),c.addRange(_)),c.addRange(e)),l.inVirtualSelectionMode=!1})}}else if("block"==a){e.stop(),l.inVirtualSelectionMode=!0;function y(){var e=l.renderer.pixelToScreenCoordinates(p,g),t=f.screenToDocumentPosition(e.row,e.column,e.offsetX);E(v,e)&&E(t,c.lead)||(v=e,l.selection.moveToPosition(t),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(A),A=c.rectangularRangeBlock(v,m),l.$mouseHandler.$clickSelection&&1==A.length&&A[0].isEmpty()&&(A[0]=l.$mouseHandler.$clickSelection.clone()),A.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers())}var C,A=[];u&&!r?c.toSingleRange():!u&&r&&(C=c.toOrientedRange(),l.addSelectionMarker(C)),o?m=f.documentToScreenPosition(c.lead):c.moveToPosition(d),v={row:-1,column:-1};var T=y;I.capture(l.container,function(e){p=e.clientX,g=e.clientY},function(e){y(),clearInterval(S),l.removeSelectionMarkers(A),A.length||(A=[c.toOrientedRange()]),C&&(l.removeSelectionMarker(C),c.toSingleRange(C));for(var t=0;t<A.length;t++)c.addRange(A[t]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null});var S=setInterval(function(){T()},20);return e.preventDefault()}}}else 0===s&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(e){1<e.multiSelect.rangeCount?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];e=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new e(t.multiSelectCommands)}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function o(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",r),e.commands.addCommands(a.defaultCommands),function(t){function n(e){o&&(t.renderer.setMouseCursor(""),o=!1)}if(!t.textInput)return;var e=t.textInput.getElement(),o=!1;s.addListener(e,"keydown",function(e){e=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);t.$blockSelectEnabled&&e?o||(t.renderer.setMouseCursor("crosshair"),o=!0):o&&n()},t),s.addListener(e,"keyup",n,t),s.addListener(e,"blur",n,t)}(e))}var i=e("./range_list").RangeList,y=e("./range").Range,h=e("./selection").Selection,r=e("./mouse/multi_select_handler").onMouseDown,s=e("./lib/event"),p=e("./lib/lang"),a=e("./commands/multi_select_commands");t.commands=a.defaultCommands.concat(a.multiSelectCommands);var l=new(e("./search").Search),c=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(c.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);n=this.rangeList.add(e);return this.$onAddRange(e),n.length&&this.$onRemoveRange(n),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){e=this.rangeList.substractPoint(e);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var o=this.ranges.indexOf(e[n]);this.ranges.splice(o,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var o=e[n],i=o.start.row,r=o.end.row;if(i===r)t.push(o.clone());else{t.push(new y(i,o.start.column,i,this.session.getLine(i).length));for(;++i<r;)t.push(this.getLineRange(i,!0));t.push(new y(r,0,r,o.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],e=y.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)},this.toggleBlockSelection=function(){if(1<this.rangeCount){var e=this.rangeList.ranges,t=e[e.length-1],e=y.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(e,t.cursor==t.start)}else{e=this.session.documentToScreenPosition(this.cursor),t=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(e,t).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var o,i,r,s,a=[],l=e.column<t.column;s=l?(o=e.column,i=t.column,r=e.offsetX,t.offsetX):(o=t.column,i=e.column,r=t.offsetX,e.offsetX);var c,u,d,h=e.row<t.row;u=h?(c=e.row,t.row):(c=t.row,e.row);o<0&&(o=0),c<0&&(c=0),c==u&&(n=!0);for(var p,g,f=c;f<=u;f++){var m=y.fromPoints(this.session.screenToDocumentPosition(f,o,r),this.session.screenToDocumentPosition(f,i,s));if(m.isEmpty()){if(d&&(p=m.end,g=d,p.row==g.row&&p.column==g.column))break;d=m.end}m.cursor=l?m.start:m.end,a.push(m)}h&&a.reverse();if(!n){for(var v=a.length-1;a[v].isEmpty()&&0<v;)v--;if(0<v)for(var _=0;a[_].isEmpty();)_++;for(var b=v;_<=b;b--)a[b].isEmpty()&&a.splice(b,1)}return a}}.call(h.prototype);c=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);e=this.session.$selectionMarkers.indexOf(e);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var o=e[n];if(o.marker){this.session.removeMarker(o.marker);o=t.indexOf(o);-1!=o&&t.splice(o,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(a.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(a.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)o="forEach"==t.multiSelectAction?n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),t.exec(n,e.args||{})):t.multiSelectAction(n,e.args||{});else{var o=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return o}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var o,i=n&&n.keepOrder,r=1==n||n&&n.$byLines,s=this.session,a=this.selection,n=a.rangeList,l=(i?a:n).ranges;if(!l.length)return e.exec?e.exec(this,t||{}):e(this,t||{});n=a._eventRegistry;a._eventRegistry={};var c=new h(s);this.inVirtualSelectionMode=!0;for(var u=l.length;u--;){if(r)for(;0<u&&l[u].start.row==l[u-1].end.row;)u--;c.fromOrientedRange(l[u]),c.index=u,this.selection=s.selection=c;var d=e.exec?e.exec(this,t||{}):e(this,t||{});o||void 0===d||(o=d),c.toOrientedRange(l[u])}c.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=n,a.mergeOverlappingRanges(),a.ranges[0]&&a.fromOrientedRange(a.ranges[0]);a=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),a&&a.from==a.to&&this.renderer.animateScrolling(a.from),o}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],o=0;o<t.length;o++)n.push(this.session.getTextRange(t[o]));var i=this.session.getDocument().getNewLineCharacter();(e=n.join(i)).length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(!this.multiSelect.isEmpty()||t!=this.multiSelect.anchor){n=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;n.row!=t.row||this.session.$clipPositionToDocument(n.row,n.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}}},this.findAll=function(e,t,n){(t=t||{}).needle=e||t.needle;if(null==t.needle){var o=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(o)}this.$search.set(t);var i=this.$search.findAll(this.session);if(!i.length)return 0;var r=this.multiSelect;n||r.toSingleRange(i[0]);for(var s=i.length;s--;)r.addRange(i[s],!0);return o&&r.rangeList.rangeAtPoint(o.start)&&r.addRange(o,!0),i.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),o=n.cursor==n.end,i=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(i.column=this.selection.$desiredColumn);var r,s,a,l=this.session.screenToDocumentPosition(i.row+e,i.column);r=n.isEmpty()?l:(r=this.session.documentToScreenPosition(o?n.end:n.start),this.session.screenToDocumentPosition(r.row+e,r.column));o?(s=y.fromPoints(l,r)).cursor=s.start:(s=y.fromPoints(r,l)).cursor=s.end;s.desiredColumn=i.column;this.selection.inMultiSelectMode?t&&(a=n.cursor):this.selection.addRange(n);this.selection.addRange(s),a&&this.selection.substractPoint(a)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,o=n.ranges,i=o.length;i--;)if((a=o[i]).isEmpty()){var r=t.getWordRange(a.start.row,a.start.column);a.start.row=r.start.row,a.start.column=r.start.column,a.end.row=r.end.row,a.end.column=r.end.column}n.mergeOverlappingRanges();for(var s=[],i=o.length;i--;){var a=o[i];s.unshift(t.getTextRange(a))}e<0?s.unshift(s.pop()):s.push(s.shift());for(i=o.length;i--;){r=(a=o[i]).clone();t.replace(a,s[i]),a.start.row=r.start.row,a.start.column=r.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var o=this.session,i=o.multiSelect.toOrientedRange();if(i.isEmpty()){(i=o.getWordRange(i.start.row,i.start.column)).cursor=-1==e?i.start:i.end,this.multiSelect.addRange(i);if(n)return}var r=o.getTextRange(i),n=(n=o,o=r,r=e,l.$options.wrap=!0,l.$options.needle=o,l.$options.backwards=-1==r,l.find(n));n&&(n.cursor=-1==e?n.start:n.end,this.session.unfold(n),this.multiSelect.addRange(n),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(i.cursor)},this.alignCursors=function(){var i=this.session,t=i.multiSelect,e=t.ranges,n=-1,o=e.filter(function(e){if(e.cursor.row==n)return!0;n=e.cursor.row});if(e.length&&o.length!=e.length-1){o.forEach(function(e){t.substractPoint(e.cursor)});var r=0,s=1/0,a=e.map(function(e){var t=e.cursor,e=i.getLine(t.row).substr(t.column).search(/\S/g);return-1==e&&(e=0),t.column>r&&(r=t.column),e<s&&(s=e),e});e.forEach(function(e,t){var n=e.cursor,o=r-n.column,t=a[t]-s;t<o?i.insert(n,p.stringRepeat(" ",o-t)):i.remove(new y(n.row,n.column,n.row,n.column-o+t)),e.start.column=e.end.column=r,e.start.row=e.end.row=n.row,e.cursor=e.end}),t.fromOrientedRange(e[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var l=this.selection.getRange(),c=l.start.row,u=l.end.row,o=c==u;if(o){for(var d,h=this.session.getLength();d=this.session.getLine(u),/[=:]/.test(d)&&++u<h;);for(;d=this.session.getLine(c),/[=:]/.test(d)&&0<--c;);c<0&&(c=0),h<=u&&(u=h-1)}e=this.session.removeFullLines(c,u),e=this.$reAlignText(e,o);this.session.insert({row:c,column:0},e.join("\n")+"\n"),o||(l.start.column=0,l.end.column=e[e.length-1].length),this.selection.setRange(l)}},this.$reAlignText=function(e,t){function n(e){return p.stringRepeat(" ",e)}function o(e){return e[2]?n(i)+e[2]+n(r-e[2].length+s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var i,r,s,a=!0,l=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?(null==i?(i=t[1].length,r=t[2].length,s=t[3].length):(i+r+s!=t[1].length+t[2].length+t[3].length&&(l=!1),i!=t[1].length&&(a=!1),i>t[1].length&&(i=t[1].length),r<t[2].length&&(r=t[2].length),s>t[3].length&&(s=t[3].length)),t):[e]}).map(t?o:a?l?function(e){return e[2]?n(i+r-e[2].length)+e[2]+n(s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:o:function(e){return e[2]?n(i)+e[2]+n(s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]})}}).call(c.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;e=e.oldSession;e&&(e.multiSelect.off("addRange",this.$onAddRange),e.multiSelect.off("removeRange",this.$onRemoveRange),e.multiSelect.off("multiSelect",this.$onMultiSelect),e.multiSelect.off("singleSelect",this.$onSingleSelect),e.multiSelect.lead.off("change",this.$checkMultiselectChange),e.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=o,e("./config").defineOptions(c.prototype,"editor",{enableMultiselect:{set:function(e){o(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",r)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",r))},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var u=e("../../range").Range,t=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){n=e.getLine(n);return this.foldingStartMarker.test(n)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var o=/\S/,i=e.getLine(t),r=i.search(o);if(-1!=r){for(var s=n||i.length,a=e.getLength(),n=t,l=t;++t<a;){var c=e.getLine(t).search(o);if(-1!=c){if(c<=r){c=e.getTokenAt(t,0);if(!c||"string"!==c.type)break}l=t}}if(n<l){i=e.getLine(l).length;return new u(n,s,l,i)}}},this.openingBracketBlock=function(e,t,n,o,i){o={row:n,column:o+1},t=e.$findClosingBracket(t,o,i);if(t){i=e.foldWidgets[t.row];return null==i&&(i=e.getFoldWidget(t.row)),"start"==i&&t.row>o.row&&(t.row--,t.column=e.getLine(t.row).length),u.fromPoints(o,t)}},this.closingBracketBlock=function(e,t,n,o,i){o={row:n,column:o},t=e.$findOpeningBracket(t,o);if(t)return t.column++,o.column--,u.fromPoints(t,o)}}).call(t.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',t.$id="ace/theme/textmate";e("../lib/dom").importCssString(t.cssText,t.cssClass)}),define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";function o(e){this.session=e,(this.session.widgetManager=this).session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}var i=e("./lib/dom");(function(){this.getRowLength=function(e){var t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var t=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(t+=e.rowCount)}),t},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();this.editor!=e&&(this.detach(),(this.editor=e)&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);t=this.session.lineWidgets;t&&t.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var o=e.data,t=o.start.row,i=o.end.row,r="add"==e.action,s=t+1;s<i;s++)n[s]&&(n[s].hidden=r);n[i]&&(r?n[t]?n[i].hidden=r:n[t]=n[i]:(n[t]==n[i]&&(n[t]=void 0),n[i].hidden=r))}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,o=e.end.row-n;if(0!=o)if("remove"==e.action){var i=t.splice(n+1,o);!t[n]&&i[i.length-1]&&(t[n]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{o=new Array(o);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,o.unshift(n,0),t.splice.apply(t,o),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var n=!0;e.forEach(function(e,t){if(e){n=!1,e.row=t;for(;e.$oldWidget;)e.$oldWidget.row=t,e=e.$oldWidget}}),n&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&((e.$oldWidget=t).el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e},this.addLineWidget=function(e){this.$registerLineWidget(e),e.session=this.session;if(!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex=3),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n){var o=this.session.lineWidgets;e.row!=n.end.row||o[n.start.row]?e.hidden=!0:o[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},this.removeLineWidget=function(e){e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],o=[];n;)o.push(n),n=n.$oldWidget;return o},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,o=t.layerConfig;if(n&&n.length){for(var i=1/0,r=0;r<n.length;r++){var s=n[r];if(s&&s.el&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,t.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/o.characterWidth));var a=s.h/o.lineHeight;s.coverLine&&((a-=this.session.getRowLineCount(s.row))<0&&(a=0)),s.rowCount!=a&&(s.rowCount=a,s.row<i&&(i=s.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var n=t.layerConfig,o=this.session.lineWidgets;if(o){for(var i=Math.min(this.firstRow,n.firstRow),r=Math.max(this.lastRow,n.lastRow,o.length);0<i&&!o[i];)i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var s=i;s<=r;s++){var a=o[s];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";l=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(l-=t.scrollLeft),a.el.style.left=l+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(o.prototype),t.LineWidgets=o}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";function u(e,t,n){var o=e.getAnnotations().sort(a.comparePoints);if(o.length){var i=function(e,t,n){for(var o=0,i=e.length-1;o<=i;){var r=o+i>>1,s=n(t,e[r]);if(0<s)o=1+r;else{if(!(s<0))return r;i=r-1}}return-(o+1)}(o,{row:t,column:-1},a.comparePoints);i<0&&(i=-i-1),i>=o.length?i=0<n?0:o.length-1:0===i&&n<0&&(i=o.length-1);var r=o[i];if(r&&n){if(r.row===t){for(;r=o[i+=n],r&&r.row===t;);if(!r)return o.slice()}var s=[];t=r.row;for(;s[n<0?"unshift":"push"](r),r=o[i+=n],r&&r.row==t;);return s.length&&s}}}var d=e("../line_widgets").LineWidgets,h=e("../lib/dom"),a=e("../range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new d(n),n.widgetManager.attach(e));var o=e.getCursorPosition(),i=o.row,r=n.widgetManager.getWidgetsAtRow(i).filter(function(e){return"errorMarker"==e.type})[0];r?r.destroy():i-=t;var s,t=u(n,i,t);if(t){var a=t[0];o.column=(a.pos&&"number"!=typeof a.column?a.pos.sc:a.column)||0,o.row=a.row,s=e.renderer.$gutterLayer.$annotations[o.row]}else{if(r)return;s={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(o.row),e.selection.moveToPosition(o);var l={row:o.row,fixedWidth:!0,coverGutter:!0,el:h.createElement("div"),type:"errorMarker"},a=l.el.appendChild(h.createElement("div")),r=l.el.appendChild(h.createElement("div"));r.className="error_widget_arrow "+s.className;o=e.renderer.$cursorLayer.getPixelPosition(o).left;r.style.left=o+e.renderer.gutterWidth-5+"px",l.el.className="error_widget_wrapper",a.className="error_widget "+s.className,a.innerHTML=s.text.join("<br>"),a.appendChild(h.createElement("div"));function c(e,t,n){if(0===t&&("esc"===n||"return"===n))return l.destroy(),{command:"null"}}l.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(c),n.widgetManager.removeLineWidget(l),e.off("changeSelection",l.destroy),e.off("changeSession",l.destroy),e.off("mouseup",l.destroy),e.off("change",l.destroy))},e.keyBinding.addKeyboardHandler(c),e.on("changeSelection",l.destroy),e.on("changeSession",l.destroy),e.on("mouseup",l.destroy),e.on("change",l.destroy),e.session.widgetManager.addLineWidget(l),l.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:l.el.offsetHeight})},h.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,r,t){"use strict";e("./lib/fixoldbrowsers");var s=e("./lib/dom"),a=e("./lib/event"),n=e("./range").Range,l=e("./editor").Editor,o=e("./edit_session").EditSession,i=e("./undomanager").UndoManager,c=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),r.config=e("./config"),r.require=e,"function"==typeof define&&(r.define=define),r.edit=function(e,t){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))throw new Error("ace.edit can't find div #"+n)}if(e&&e.env&&e.env.editor instanceof l)return e.env.editor;n="";if(e&&/input|textarea/i.test(e.tagName)){var o=e,n=o.value;e=s.createElement("pre"),o.parentNode.replaceChild(e,o)}else e&&(n=e.textContent,e.innerHTML="");var n=r.createEditSession(n),t=new l(new c(e),n,t),i={document:n,editor:t,onResize:t.resize.bind(t,null)};return o&&(i.textarea=o),a.addListener(window,"resize",i.onResize),t.on("destroy",function(){a.removeListener(window,"resize",i.onResize),i.editor.container.env=null}),t.container.env=t.env=i,t},r.createEditSession=function(e,t){t=new o(e,t);return t.setUndoManager(new i),t},r.Range=n,r.Editor=l,r.EditSession=o,r.UndoManager=i,r.VirtualRenderer=c,r.version=r.config.version});window.require(["ace/ace"],function(e){if(e){e.config.init(!0);e.define=window.define}window.ace||(window.ace=e);for(var t in e)e.hasOwnProperty(t)&&(window.ace[t]=e[t]);window.ace.default=window.ace;"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=window.ace)});!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Blockly=t()}(this,function(){"use strict";var b={constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};b.CONNECTING_SNAP_RADIUS=b.SNAP_RADIUS;b.CURRENT_CONNECTION_PREFERENCE=8;b.INSERTION_MARKER_COLOUR="#000000";b.BUMP_DELAY=250;b.BUMP_RANDOMNESS=10;b.COLLAPSE_CHARS=30;b.LONGPRESS=750;b.SOUND_LIMIT=100;b.DRAG_STACK=!0;b.HSV_SATURATION=.45;b.HSV_VALUE=.65;b.SPRITE={width:96,height:124,url:"sprites.png"};b.INPUT_VALUE=1;b.OUTPUT_VALUE=2;b.NEXT_STATEMENT=3;b.PREVIOUS_STATEMENT=4;b.DUMMY_INPUT=5;b.ALIGN_LEFT=-1;b.ALIGN_CENTRE=0;b.ALIGN_RIGHT=1;b.DRAG_NONE=0;b.DRAG_STICKY=1;b.DRAG_BEGIN=1;b.DRAG_FREE=2;b.OPPOSITE_TYPE=[];b.OPPOSITE_TYPE[b.INPUT_VALUE]=b.OUTPUT_VALUE;b.OPPOSITE_TYPE[b.OUTPUT_VALUE]=b.INPUT_VALUE;b.OPPOSITE_TYPE[b.NEXT_STATEMENT]=b.PREVIOUS_STATEMENT;b.OPPOSITE_TYPE[b.PREVIOUS_STATEMENT]=b.NEXT_STATEMENT;b.TOOLBOX_AT_TOP=0;b.TOOLBOX_AT_BOTTOM=1;b.TOOLBOX_AT_LEFT=2;b.TOOLBOX_AT_RIGHT=3;b.DELETE_AREA_NONE=null;b.DELETE_AREA_TRASH=1;b.DELETE_AREA_TOOLBOX=2;b.VARIABLE_CATEGORY_NAME="VARIABLE";b.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC";b.PROCEDURE_CATEGORY_NAME="PROCEDURE";b.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID";b.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID";b.utils={};b.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}();b.Msg={};b.utils.global.Blockly||(b.utils.global.Blockly={});b.utils.global.Blockly.Msg||(b.utils.global.Blockly.Msg=b.Msg);b.utils.Coordinate=function(e,t){this.x=e;this.y=t};b.utils.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&(e.x==t.x&&e.y==t.y)};b.utils.Coordinate.distance=function(e,t){var n=e.x-t.x;e=e.y-t.y;return Math.sqrt(n*n+e*e)};b.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};b.utils.Coordinate.difference=function(e,t){return new b.utils.Coordinate(e.x-t.x,e.y-t.y)};b.utils.Coordinate.sum=function(e,t){return new b.utils.Coordinate(e.x+t.x,e.y+t.y)};b.utils.Coordinate.prototype.scale=function(e){this.x*=e;this.y*=e;return this};b.utils.Coordinate.prototype.translate=function(e,t){this.x+=e;this.y+=t;return this};b.utils.string={};b.utils.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)};b.utils.string.shortestStringLength=function(e){return e.length?e.reduce(function(e,t){return e.length<t.length?e:t}).length:0};b.utils.string.commonWordPrefix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||b.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var i=e[0][o],r=1;r<e.length;r++)if(i!=e[r][o])return n;" "==i&&(n=o+1)}for(r=1;r<e.length;r++)if((i=e[r][o])&&" "!=i)return n;return t};b.utils.string.commonWordSuffix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||b.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var i=e[0].substr(-o-1,1),r=1;r<e.length;r++)if(i!=e[r].substr(-o-1,1))return n;" "==i&&(n=o+1)}for(r=1;r<e.length;r++)if((i=e[r].charAt(e[r].length-o-1))&&" "!=i)return n;return t};b.utils.string.wrap=function(e,t){e=e.split("\n");for(var n=0;n<e.length;n++)e[n]=b.utils.string.wrapLine_(e[n],t);return e.join("\n")};b.utils.string.wrapLine_=function(e,t){if(e.length<=t)return e;for(var n=e.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);o=-1/0;var i=1;do{var r=o,s=e;e=[];for(var a=n.length/i,l=1,o=0;o<n.length-1;o++)l<(o+1.5)/a?(l++,e[o]=!0):e[o]=!1}while(e=b.utils.string.wrapMutate_(n,e,t),o=b.utils.string.wrapScore_(n,e,t),e=b.utils.string.wrapToText_(n,e),i++,r<o);return s};b.utils.string.wrapScore_=function(e,t,n){for(var o=[0],i=[],r=0;r<e.length;r++)o[o.length-1]+=e[r].length,!0===t[r]?(o.push(0),i.push(e[r].charAt(e[r].length-1))):!1===t[r]&&o[o.length-1]++;e=Math.max.apply(Math,o);for(r=t=0;r<o.length;r++)t-=2*Math.pow(Math.abs(n-o[r]),1.5),t-=Math.pow(e-o[r],1.5),-1!=".?!".indexOf(i[r])?t+=n/3:-1!=",;)]}".indexOf(i[r])&&(t+=n/4);1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5);return t};b.utils.string.wrapMutate_=function(e,t,n){for(var o,i=b.utils.string.wrapScore_(e,t,n),r=0;r<t.length-1;r++)if(t[r]!=t[r+1]){var s=[].concat(t);s[r]=!s[r];s[r+1]=!s[r+1];var a=b.utils.string.wrapScore_(e,s,n);i<a&&(i=a,o=s)}return o?b.utils.string.wrapMutate_(e,o,n):t};b.utils.string.wrapToText_=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(e[o]),void 0!==t[o]&&n.push(t[o]?"\n":" ");return n.join("")};b.utils.Size=function(e,t){this.width=e;this.height=t};b.utils.Size.equals=function(e,t){return e==t||!(!e||!t)&&(e.width==t.width&&e.height==t.height)};b.utils.style={};b.utils.style.getSize=function(e){if("none"!=b.utils.style.getStyle_(e,"display"))return b.utils.style.getSizeWithDisplay_(e);var t=e.style,n=t.display,o=t.visibility,i=t.position;t.visibility="hidden";t.position="absolute";t.display="inline";var r=e.offsetWidth;e=e.offsetHeight;t.display=n;t.position=i;t.visibility=o;return new b.utils.Size(r,e)};b.utils.style.getSizeWithDisplay_=function(e){return new b.utils.Size(e.offsetWidth,e.offsetHeight)};b.utils.style.getStyle_=function(e,t){return b.utils.style.getComputedStyle(e,t)||b.utils.style.getCascadedStyle(e,t)||e.style&&e.style[t]};b.utils.style.getComputedStyle=function(e,t){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""};b.utils.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null};b.utils.style.getPageOffset=function(e){var t=new b.utils.Coordinate(0,0);e=e.getBoundingClientRect();var n=document.documentElement,n=new b.utils.Coordinate(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop);t.x=e.left+n.x;t.y=e.top+n.y;return t};b.utils.style.getViewportPageOffset=function(){var e=document.body,t=document.documentElement;return new b.utils.Coordinate(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)};b.utils.style.setElementShown=function(e,t){e.style.display=t?"":"none"};b.utils.style.isRightToLeft=function(e){return"rtl"==b.utils.style.getStyle_(e,"direction")};b.utils.style.getBorderBox=function(e){var t=b.utils.style.getComputedStyle(e,"borderLeftWidth"),n=b.utils.style.getComputedStyle(e,"borderRightWidth"),o=b.utils.style.getComputedStyle(e,"borderTopWidth");e=b.utils.style.getComputedStyle(e,"borderBottomWidth");return{top:parseFloat(o),right:parseFloat(n),bottom:parseFloat(e),left:parseFloat(t)}};b.utils.style.scrollIntoContainerView=function(e,t,n){e=b.utils.style.getContainerOffsetToScrollInto(e,t,n);t.scrollLeft=e.x;t.scrollTop=e.y};b.utils.style.getContainerOffsetToScrollInto=function(e,t,n){var o=b.utils.style.getPageOffset(e),i=b.utils.style.getPageOffset(t),r=b.utils.style.getBorderBox(t),s=o.x-i.x-r.left,o=o.y-i.y-r.top,i=b.utils.style.getSizeWithDisplay_(e);e=t.clientWidth-i.width;i=t.clientHeight-i.height;r=t.scrollLeft;t=t.scrollTop;n?(r+=s-e/2,t+=o-i/2):(r+=Math.min(s,Math.max(s-e,0)),t+=Math.min(o,Math.max(o-i,0)));return new b.utils.Coordinate(r,t)};b.utils.userAgent={};!function(e){function t(e){return-1!=n.indexOf(e.toUpperCase())}b.utils.userAgent.raw=e;var n=b.utils.userAgent.raw.toUpperCase();b.utils.userAgent.IE=t("Trident")||t("MSIE");b.utils.userAgent.EDGE=t("Edge");b.utils.userAgent.JAVA_FX=t("JavaFX");b.utils.userAgent.WEBKIT=t("WebKit")&&!b.utils.userAgent.EDGE;b.utils.userAgent.GECKO=t("Gecko")&&!b.utils.userAgent.WEBKIT&&!b.utils.userAgent.IE&&!b.utils.userAgent.EDGE;b.utils.userAgent.ANDROID=t("Android");b.utils.userAgent.IPAD=t("iPad");b.utils.userAgent.IPOD=t("iPod");b.utils.userAgent.IPHONE=t("iPhone")&&!b.utils.userAgent.IPAD&&!b.utils.userAgent.IPOD;b.utils.userAgent.MAC=t("Macintosh");b.utils.userAgent.TABLET=b.utils.userAgent.IPAD||b.utils.userAgent.ANDROID&&!t("Mobile")||t("Silk");b.utils.userAgent.MOBILE=!b.utils.userAgent.TABLET&&(b.utils.userAgent.IPOD||b.utils.userAgent.IPHONE||b.utils.userAgent.ANDROID||t("IEMobile"))}(b.utils.global.navigator&&b.utils.global.navigator.userAgent||"");b.utils.noEvent=function(e){e.preventDefault();e.stopPropagation()};b.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable};b.utils.getRelativeXY=function(e){var t=new b.utils.Coordinate(0,0),n=e.getAttribute("x");n&&(t.x=parseInt(n,10));(n=e.getAttribute("y"))&&(t.y=parseInt(n,10));(n=(n=e.getAttribute("transform"))&&n.match(b.utils.getRelativeXY.XY_REGEX_))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3])));(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(b.utils.getRelativeXY.XY_STYLE_REGEX_))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3])));return t};b.utils.getInjectionDivXY_=function(e){for(var t=0,n=0;e;){var o=b.utils.getRelativeXY(e);t+=o.x;n+=o.y;if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new b.utils.Coordinate(t,n)};b.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/;b.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;b.utils.isRightButton=function(e){return!(!e.ctrlKey||!b.utils.userAgent.MAC)||2==e.button};b.utils.mouseToSvg=function(e,t,n){var o=t.createSVGPoint();o.x=e.clientX;o.y=e.clientY;n=n||t.getScreenCTM().inverse();return o.matrixTransform(n)};b.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){case 0:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*b.LINE_MODE_MULTIPLIER,y:e.deltaY*b.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*b.PAGE_MODE_MULTIPLIER,y:e.deltaY*b.PAGE_MODE_MULTIPLIER}}};b.utils.tokenizeInterpolation=function(e){return b.utils.tokenizeInterpolation_(e,!0)};b.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=b.utils.tokenizeInterpolation_(e,!1)).length?e[0]:""};b.utils.checkMessageReferences=function(e){for(var t=!0,n=b.Msg,o=e.match(/%{BKY_[A-Z]\w*}/gi),i=0;i<o.length;i++)null==n[o[i].toUpperCase().slice(6,-1)]&&(console.log("WARNING: No message string for "+o[i]+" in "+e),t=!1);return t};b.utils.tokenizeInterpolation_=function(e,t){var n=[],o=e.split("");o.push("");var i=0;e=[];for(var r=null,s=0;s<o.length;s++){var a=o[s];0==i?"%"==a?((a=e.join(""))&&n.push(a),e.length=0,i=1):e.push(a):1==i?"%"==a?(e.push(a),i=0):t&&"0"<=a&&a<="9"?(i=2,r=a,(a=e.join(""))&&n.push(a),e.length=0):i="{"==a?3:(e.push("%",a),0):2==i?"0"<=a&&a<="9"?r+=a:(n.push(parseInt(r,10)),s--,i=0):3==i&&(""==a?(e.splice(0,0,"%{"),s--,i=0):"}"!=a?e.push(a):(i=e.join(""),/[A-Z]\w*/i.test(i)?(a=i.toUpperCase(),(a=b.utils.string.startsWith(a,"BKY_")?a.substring(4):null)&&a in b.Msg?"string"==typeof(i=b.Msg[a])?Array.prototype.push.apply(n,b.utils.tokenizeInterpolation_(i,t)):t?n.push(String(i)):n.push(i):n.push("%{"+i+"}")):n.push("%{"+i+"}"),i=e.length=0))}(a=e.join(""))&&n.push(a);t=[];for(s=e.length=0;s<n.length;++s)"string"==typeof n[s]?e.push(n[s]):((a=e.join(""))&&t.push(a),e.length=0,t.push(n[s]));(a=e.join(""))&&t.push(a);e.length=0;return t};b.utils.genUid=function(){for(var e=b.utils.genUid.soup_.length,t=[],n=0;n<20;n++)t[n]=b.utils.genUid.soup_.charAt(Math.random()*e);return t.join("")};b.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";b.utils.is3dSupported=function(){if(void 0!==b.utils.is3dSupported.cached_)return b.utils.is3dSupported.cached_;if(!b.utils.global.getComputedStyle)return!1;var e,t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(t,null);for(e in o)if(void 0!==t.style[e]){t.style[e]="translate3d(1px,1px,1px)";if(!(n=b.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[e])}document.body.removeChild(t);b.utils.is3dSupported.cached_="none"!==n;return b.utils.is3dSupported.cached_};b.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");var t;"complete"==document.readyState?e():t=setInterval(function(){"complete"==document.readyState&&(clearInterval(t),e())},10)};b.utils.getViewportBBox=function(){var e=b.utils.style.getViewportPageOffset();return{right:document.documentElement.clientWidth+e.x,bottom:document.documentElement.clientHeight+e.y,top:e.y,left:e.x}};b.utils.arrayRemove=function(e,t){if(-1==(t=e.indexOf(t)))return!1;e.splice(t,1);return!0};b.utils.getDocumentScroll=function(){var e=document.documentElement,t=window;return b.utils.userAgent.IE&&t.pageYOffset!=e.scrollTop?new b.utils.Coordinate(e.scrollLeft,e.scrollTop):new b.utils.Coordinate(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)};b.utils.getBlockTypeCounts=function(e,t){var n=Object.create(null),o=e.getDescendants(!0);t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e));for(e=0;t=o[e];e++)n[t.type]?n[t.type]++:n[t.type]=1;return n};b.utils.screenToWsCoordinates=function(e,t){var n=t.x;t=t.y;var o=e.getInjectionDiv().getBoundingClientRect(),n=new b.utils.Coordinate(n-o.left,t-o.top);t=e.getOriginOffsetInPixels();return b.utils.Coordinate.difference(n,t).scale(1/e.scale)};b.Events={};b.Events.group_="";b.Events.recordUndo=!0;b.Events.disabled_=0;b.Events.CREATE="create";b.Events.BLOCK_CREATE=b.Events.CREATE;b.Events.DELETE="delete";b.Events.BLOCK_DELETE=b.Events.DELETE;b.Events.CHANGE="change";b.Events.BLOCK_CHANGE=b.Events.CHANGE;b.Events.MOVE="move";b.Events.BLOCK_MOVE=b.Events.MOVE;b.Events.VAR_CREATE="var_create";b.Events.VAR_DELETE="var_delete";b.Events.VAR_RENAME="var_rename";b.Events.UI="ui";b.Events.COMMENT_CREATE="comment_create";b.Events.COMMENT_DELETE="comment_delete";b.Events.COMMENT_CHANGE="comment_change";b.Events.COMMENT_MOVE="comment_move";b.Events.FINISHED_LOADING="finished_loading";b.Events.BUMP_EVENTS=[b.Events.BLOCK_CREATE,b.Events.BLOCK_MOVE,b.Events.COMMENT_CREATE,b.Events.COMMENT_MOVE];b.Events.FIRE_QUEUE_=[];b.Events.fire=function(e){b.Events.isEnabled()&&(b.Events.FIRE_QUEUE_.length||setTimeout(b.Events.fireNow_,0),b.Events.FIRE_QUEUE_.push(e))};b.Events.fireNow_=function(){for(var e,t=b.Events.filter(b.Events.FIRE_QUEUE_,!0),n=b.Events.FIRE_QUEUE_.length=0;e=t[n];n++)if(e.workspaceId){var o=b.Workspace.getById(e.workspaceId);o&&o.fireChangeListener(e)}};b.Events.filter=function(e,t){e=e.slice();t||e.reverse();for(var n,o=[],i=Object.create(null),r=0;n=e[r];r++)if(!n.isNull()){var s=[n.type,n.blockId,n.workspaceId].join(" "),a=i[s],l=a?a.event:null;a?n.type==b.Events.MOVE&&a.index==r-1?(l.newParentId=n.newParentId,l.newInputName=n.newInputName,l.newCoordinate=n.newCoordinate,a.index=r):n.type==b.Events.CHANGE&&n.element==l.element&&n.name==l.name?l.newValue=n.newValue:(n.type!=b.Events.UI||"click"!=n.element||"commentOpen"!=l.element&&"mutatorOpen"!=l.element&&"warningOpen"!=l.element)&&(i[s]={event:n,index:1},o.push(n)):(i[s]={event:n,index:r},o.push(n))}e=o.filter(function(e){return!e.isNull()});t||e.reverse();for(r=1;n=e[r];r++)n.type==b.Events.CHANGE&&"mutation"==n.element&&e.unshift(e.splice(r,1)[0]);return e};b.Events.clearPendingUndo=function(){for(var e,t=0;e=b.Events.FIRE_QUEUE_[t];t++)e.recordUndo=!1};b.Events.disable=function(){b.Events.disabled_++};b.Events.enable=function(){b.Events.disabled_--};b.Events.isEnabled=function(){return 0==b.Events.disabled_};b.Events.getGroup=function(){return b.Events.group_};b.Events.setGroup=function(e){b.Events.group_="boolean"==typeof e?e?b.utils.genUid():"":e};b.Events.getDescendantIds=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++)t[o]=n.id;return t};b.Events.fromJson=function(e,t){switch(e.type){case b.Events.CREATE:var n=new b.Events.Create(null);break;case b.Events.DELETE:n=new b.Events.Delete(null);break;case b.Events.CHANGE:n=new b.Events.Change(null,"","","","");break;case b.Events.MOVE:n=new b.Events.Move(null);break;case b.Events.VAR_CREATE:n=new b.Events.VarCreate(null);break;case b.Events.VAR_DELETE:n=new b.Events.VarDelete(null);break;case b.Events.VAR_RENAME:n=new b.Events.VarRename(null,"");break;case b.Events.UI:n=new b.Events.Ui(null,"","","");break;case b.Events.COMMENT_CREATE:n=new b.Events.CommentCreate(null);break;case b.Events.COMMENT_CHANGE:n=new b.Events.CommentChange(null,"","");break;case b.Events.COMMENT_MOVE:n=new b.Events.CommentMove(null);break;case b.Events.COMMENT_DELETE:n=new b.Events.CommentDelete(null);break;default:throw Error("Unknown event type.")}n.fromJson(e);n.workspaceId=t.id;return n};b.Events.disableOrphans=function(e){if((e.type==b.Events.MOVE||e.type==b.Events.CREATE)&&e.workspaceId){var t=b.Workspace.getById(e.workspaceId);if(e=t.getBlockById(e.blockId)){var n=e.getParent();if(n&&n.isEnabled())for(t=e.getDescendants(!1),e=0;n=t[e];e++)n.setEnabled(!0);else if((e.outputConnection||e.previousConnection)&&!t.isDragging())for(;e.setEnabled(!1),e=e.getNextBlock(),e;);}}};b.Events.Abstract=function(){this.workspaceId=void 0;this.group=b.Events.getGroup();this.recordUndo=b.Events.recordUndo};b.Events.Abstract.prototype.toJson=function(){var e={type:this.type};this.group&&(e.group=this.group);return e};b.Events.Abstract.prototype.fromJson=function(e){this.group=e.group};b.Events.Abstract.prototype.isNull=function(){return!1};b.Events.Abstract.prototype.run=function(e){};b.Events.Abstract.prototype.getEventWorkspace_=function(){var e;this.workspaceId&&(e=b.Workspace.getById(this.workspaceId));if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e};b.utils.object={};b.utils.object.inherits=function(e,t){e.superClass_=t.prototype;e.prototype=Object.create(t.prototype);e.prototype.constructor=e};b.utils.object.mixin=function(e,t){for(var n in t)e[n]=t[n]};b.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})};b.Events.Ui=function(e,t,n,o){b.Events.Ui.superClass_.constructor.call(this);this.blockId=e?e.id:null;this.workspaceId=e?e.workspace.id:void 0;this.element=t;this.oldValue=n;this.newValue=o;this.recordUndo=!1};b.utils.object.inherits(b.Events.Ui,b.Events.Abstract);b.Events.Ui.prototype.type=b.Events.UI;b.Events.Ui.prototype.toJson=function(){var e=b.Events.Ui.superClass_.toJson.call(this);e.element=this.element;void 0!==this.newValue&&(e.newValue=this.newValue);this.blockId&&(e.blockId=this.blockId);return e};b.Events.Ui.prototype.fromJson=function(e){b.Events.Ui.superClass_.fromJson.call(this,e);this.element=e.element;this.newValue=e.newValue;this.blockId=e.blockId};b.utils.dom={};b.utils.dom.SVG_NS="http://www.w3.org/2000/svg";b.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml";b.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink";b.utils.dom.Node={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16};b.utils.dom.cacheWidths_=null;b.utils.dom.cacheReference_=0;b.utils.dom.createSvgElement=function(e,t,n){e=document.createElementNS(b.utils.dom.SVG_NS,e);for(var o in t)e.setAttribute(o,t[o]);document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style);n&&n.appendChild(e);return e};b.utils.dom.addClass=function(e,t){var n=e.getAttribute("class")||"";if(-1!=(" "+n+" ").indexOf(" "+t+" "))return!1;n&&(n+=" ");e.setAttribute("class",n+t);return!0};b.utils.dom.removeClass=function(e,t){var n=e.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+t+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=t||(n.splice(o,1),o--);n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class");return!0};b.utils.dom.hasClass=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")};b.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null};b.utils.dom.insertAfter=function(e,t){var n=t.nextSibling;if(!(t=t.parentNode))throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)};b.utils.dom.containsNode=function(e,t){return!!(e.compareDocumentPosition(t)&b.utils.dom.Node.DOCUMENT_POSITION_CONTAINED_BY)};b.utils.dom.setCssTransform=function(e,t){e.style.transform=t;e.style["-webkit-transform"]=t};b.utils.dom.startTextWidthCache=function(){b.utils.dom.cacheReference_++;b.utils.dom.cacheWidths_||(b.utils.dom.cacheWidths_={})};b.utils.dom.stopTextWidthCache=function(){b.utils.dom.cacheReference_--;b.utils.dom.cacheReference_||(b.utils.dom.cacheWidths_=null)};b.utils.dom.getTextWidth=function(t){var e,n=t.textContent+"\n"+t.className.baseVal;if(b.utils.dom.cacheWidths_&&(e=b.utils.dom.cacheWidths_[n]))return e;try{e=b.utils.userAgent.IE||b.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(e){return 8*t.textContent.length}b.utils.dom.cacheWidths_&&(b.utils.dom.cacheWidths_[n]=e);return e};b.BlockDragSurfaceSvg=function(e){this.container_=e;this.createDom()};b.BlockDragSurfaceSvg.prototype.SVG_=null;b.BlockDragSurfaceSvg.prototype.dragGroup_=null;b.BlockDragSurfaceSvg.prototype.container_=null;b.BlockDragSurfaceSvg.prototype.scale_=1;b.BlockDragSurfaceSvg.prototype.surfaceXY_=null;b.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=b.utils.dom.createSvgElement("svg",{xmlns:b.utils.dom.SVG_NS,"xmlns:html":b.utils.dom.HTML_NS,"xmlns:xlink":b.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=b.utils.dom.createSvgElement("g",{},this.SVG_))};b.BlockDragSurfaceSvg.prototype.setBlocksAndShowCb=null;b.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e);this.SVG_.style.display="block";this.surfaceXY_=new b.utils.Coordinate(0,0);this.setBlocksAndShowCb&&this.setBlocksAndShowCb()};b.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,t,n){this.scale_=n;e=e.toFixed(0);t=t.toFixed(0);this.dragGroup_.setAttribute("transform","translate("+e+","+t+") scale("+n+")")};b.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,t=this.surfaceXY_.y,e=e.toFixed(0),t=t.toFixed(0);this.SVG_.style.display="block";b.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")};b.BlockDragSurfaceSvg.prototype.translateSurface=function(e,t){this.surfaceXY_=new b.utils.Coordinate(e*this.scale_,t*this.scale_);this.translateSurfaceInternal_()};b.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=b.utils.getRelativeXY(this.SVG_);return new b.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)};b.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_};b.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild};b.BlockDragSurfaceSvg.prototype.clearAndHideCb=null;b.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){e?e.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock());this.SVG_.style.display="none";if(this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null;this.clearAndHideCb&&this.clearAndHideCb()};b.utils.IdGenerator={};b.utils.IdGenerator.nextId_=0;b.utils.IdGenerator.getNextUniqueId=function(){return"blockly:"+(b.utils.IdGenerator.nextId_++).toString(36)};b.Component=function(){this.rightToLeft_=b.Component.defaultRightToLeft;this.id_=null;this.inDocument_=!1;this.parent_=this.element_=null;this.children_=[];this.childIndex_={}};b.Component.defaultRightToLeft=!1;b.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds"};b.Component.prototype.getId=function(){return this.id_||(this.id_=b.utils.IdGenerator.getNextUniqueId())};b.Component.prototype.getElement=function(){return this.element_};b.Component.prototype.setElementInternal=function(e){this.element_=e};b.Component.prototype.setParent=function(e){if(this==e)throw Error(b.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(b.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e};b.Component.prototype.getParent=function(){return this.parent_};b.Component.prototype.isInDocument=function(){return this.inDocument_};b.Component.prototype.createDom=function(){this.element_=document.createElement("div")};b.Component.prototype.render=function(e){this.render_(e)};b.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)};b.Component.prototype.render_=function(e,t){if(this.inDocument_)throw Error(b.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();e?e.insertBefore(this.element_,t||null):document.body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};b.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()})};b.Component.prototype.exitDocument=function(){this.forEachChild(function(e){e.isInDocument()&&e.exitDocument()});this.inDocument_=!1};b.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())};b.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument();this.forEachChild(function(e){e.dispose()});this.element_&&b.utils.dom.removeNode(this.element_);this.parent_=this.element_=this.childIndex_=this.children_=null};b.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)};b.Component.prototype.addChildAt=function(e,t,n){if(e.inDocument_&&(n||!this.inDocument_))throw Error(b.Component.Error.ALREADY_RENDERED);if(t<0||t>this.getChildCount())throw Error(b.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if((this.childIndex_[e.getId()]=e).getParent()==this){var o=this.children_.indexOf(e);-1<o&&this.children_.splice(o,1)}e.setParent(this);this.children_.splice(t,0,e);e.inDocument_&&this.inDocument_&&e.getParent()==this?(t=(n=this.getContentElement()).childNodes[t]||null)!=e.getElement()&&n.insertBefore(e.getElement(),t):n?(this.element_||this.createDom(),t=this.getChildAt(t+1),e.render_(this.getContentElement(),t?t.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==b.utils.dom.Node.ELEMENT_NODE&&e.enterDocument()};b.Component.prototype.getContentElement=function(){return this.element_};b.Component.prototype.isRightToLeft=function(){return this.rightToLeft_};b.Component.prototype.setRightToLeft=function(e){if(this.inDocument_)throw Error(b.Component.Error.ALREADY_RENDERED);this.rightToLeft_=e};b.Component.prototype.hasChildren=function(){return 0!=this.children_.length};b.Component.prototype.getChildCount=function(){return this.children_.length};b.Component.prototype.getChild=function(e){return e&&this.childIndex_[e]||null};b.Component.prototype.getChildAt=function(e){return this.children_[e]||null};b.Component.prototype.forEachChild=function(e,t){for(var n=0;n<this.children_.length;n++)e.call(t,this.children_[n],n)};b.Component.prototype.indexOfChild=function(e){return this.children_.indexOf(e)};b.Css={};b.Css.injected_=!1;b.Css.register=function(e){if(b.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(b.Css.CONTENT,e);e.length=0};b.Css.inject=function(e,t){if(!b.Css.injected_){b.Css.injected_=!0;var n=b.Css.CONTENT.join("\n");b.Css.CONTENT.length=0;e&&(e=t.replace(/[\\/]$/,""),n=n.replace(/<<<PATH>>>/g,e),e=document.createElement("style"),n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild))}};b.Css.setCursor=function(e){console.warn("Deprecated call to Blockly.Css.setCursor. See https://github.com/google/blockly/issues/981 for context")};b.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font-family: sans-serif;","font-size: 9pt;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 2px;","padding: 4px;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none","}",".blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",".blocklyReplaceable .blocklyPathLight,",".blocklyReplaceable .blocklyPathDark {","display: none;","}",".blocklyText {","cursor: default;","fill: #fff;","font-family: sans-serif;","font-size: 11pt;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>rect,",".blocklyEditableText>rect {","fill: #fff;","fill-opacity: .6;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","fill: #000;","}",".blocklyEditableText:hover>rect {","stroke: #fff;","stroke-width: 2;","}",".blocklyBubbleText {","fill: #000;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklySvg text, .blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #E7DE8E;","stroke: #bcA903;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #bcA903;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #B9B272;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #fc3;","stroke-width: 3px;","}",".blocklyCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","margin: 0;","padding: 3px;","resize: none;","display: block;","overflow: hidden;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape {","fill: #000;","stroke: #000;","stroke-width: 1px;","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","stroke: #fc3;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","font-family: sans-serif;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem {","padding-left: 28px;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyVerticalCursor {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: transparent;","border-style: solid;","border-width: 1px;","cursor: default;","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyWidgetDiv .goog-menu.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem,",".blocklyDropDownDiv .goog-menuitem {","color: #000;","font: normal 13px Arial, sans-serif;","list-style: none;","margin: 0;","min-width: 7em;","border: none;","padding: 6px 15px;","white-space: nowrap;","cursor: pointer;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem,",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem {","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-content {","font: normal 13px Arial, sans-serif;","}",".blocklyWidgetDiv .goog-menuitem-content {","color: #000;","}",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;","}",".blocklyWidgetDiv .goog-menuitem-disabled,",".blocklyDropDownDiv .goog-menuitem-disabled {","cursor: inherit;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: .3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight ,",".blocklyDropDownDiv .goog-menuitem-highlight {","background-color: rgba(0,0,0,.1);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","left: auto;","right: 6px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}"];b.utils.math={};b.utils.math.toRadians=function(e){return e*Math.PI/180};b.utils.math.toDegrees=function(e){return 180*e/Math.PI};b.utils.math.clamp=function(e,t,n){if(n<e){var o=n;n=e;e=o}return Math.max(e,Math.min(t,n))};b.DropDownDiv=function(){};b.DropDownDiv.DIV_=null;b.DropDownDiv.boundsElement_=null;b.DropDownDiv.owner_=null;b.DropDownDiv.positionToField_=null;b.DropDownDiv.ARROW_SIZE=16;b.DropDownDiv.BORDER_SIZE=1;b.DropDownDiv.ARROW_HORIZONTAL_PADDING=12;b.DropDownDiv.PADDING_Y=16;b.DropDownDiv.ANIMATION_TIME=.25;b.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR="#dadce0";b.DropDownDiv.DEFAULT_DROPDOWN_COLOR="#fff";b.DropDownDiv.animateOutTimer_=null;b.DropDownDiv.onHide_=null;b.DropDownDiv.createDom=function(){if(!b.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv";e.style.backgroundColor=b.DropDownDiv.DEFAULT_DROPDOWN_COLOR;e.style.borderColor=b.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR;document.body.appendChild(e);b.DropDownDiv.DIV_=e;var t=document.createElement("div");t.className="blocklyDropDownContent";e.appendChild(t);b.DropDownDiv.content_=t;(t=document.createElement("div")).className="blocklyDropDownArrow";e.appendChild(t);b.DropDownDiv.arrow_=t;b.DropDownDiv.DIV_.style.opacity=0;b.DropDownDiv.DIV_.style.transition="transform "+b.DropDownDiv.ANIMATION_TIME+"s, opacity "+b.DropDownDiv.ANIMATION_TIME+"s";e.addEventListener("focusin",function(){b.utils.dom.addClass(e,"focused")});e.addEventListener("focusout",function(){b.utils.dom.removeClass(e,"focused")})}};b.DropDownDiv.setBoundsElement=function(e){b.DropDownDiv.boundsElement_=e};b.DropDownDiv.getContentDiv=function(){return b.DropDownDiv.content_};b.DropDownDiv.clearContent=function(){b.DropDownDiv.content_.innerHTML="";b.DropDownDiv.content_.style.width=""};b.DropDownDiv.setColour=function(e,t){b.DropDownDiv.DIV_.style.backgroundColor=e;b.DropDownDiv.DIV_.style.borderColor=t};b.DropDownDiv.setCategory=function(e){b.DropDownDiv.DIV_.setAttribute("data-category",e)};b.DropDownDiv.showPositionedByBlock=function(e,t,n,o){var i=t.workspace.scale,r=t.width,s=t.height;r*=i;s*=i;r=(i=t.getSvgRoot().getBoundingClientRect()).left+r/2;s=i.top+s;i=i.top;o&&(i+=o);b.DropDownDiv.setBoundsElement(t.workspace.getParentSvg().parentNode);return b.DropDownDiv.show(e,t.RTL,r,s,r,i,n)};b.DropDownDiv.showPositionedByField=function(e,t,n){var o=(r=e.getSvgRoot().getBoundingClientRect()).left+r.width/2,i=r.bottom,r=r.top;n&&(r+=n);n=e.getSourceBlock();b.DropDownDiv.positionToField_=!0;b.DropDownDiv.setBoundsElement(n.workspace.getParentSvg().parentNode);return b.DropDownDiv.show(e,n.RTL,o,i,o,r,t)};b.DropDownDiv.show=function(e,t,n,o,i,r,s){b.DropDownDiv.owner_=e;b.DropDownDiv.onHide_=s||null;(e=b.DropDownDiv.getPositionMetrics(n,o,i,r)).arrowVisible?(b.DropDownDiv.arrow_.style.display="",b.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",b.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow arrowTop":"blocklyDropDownArrow arrowBottom")):b.DropDownDiv.arrow_.style.display="none";b.DropDownDiv.DIV_.style.direction=t?"rtl":"ltr";b.DropDownDiv.positionInternal_(e.initialX,e.initialY,e.finalX,e.finalY);return e.arrowAtTop};b.DropDownDiv.getBoundsInfo_=function(){var e=b.DropDownDiv.boundsElement_.getBoundingClientRect(),t=b.utils.style.getSize(b.DropDownDiv.boundsElement_);return{left:e.left,right:e.left+t.width,top:e.top,bottom:e.top+t.height,width:t.width,height:t.height}};b.DropDownDiv.getPositionMetrics=function(e,t,n,o){var i=b.DropDownDiv.getBoundsInfo_(),r=b.utils.style.getSize(b.DropDownDiv.DIV_);return t+r.height<i.bottom?b.DropDownDiv.getPositionBelowMetrics(e,t,i,r):o-r.height>i.top?b.DropDownDiv.getPositionAboveMetrics(n,o,i,r):t+r.height<document.documentElement.clientHeight?b.DropDownDiv.getPositionBelowMetrics(e,t,i,r):o-r.height>document.documentElement.clientTop?b.DropDownDiv.getPositionAboveMetrics(n,o,i,r):b.DropDownDiv.getPositionTopOfPageMetrics(e,i,r)};b.DropDownDiv.getPositionBelowMetrics=function(e,t,n,o){return{initialX:(e=b.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t,finalX:e.divX,finalY:t+b.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(b.DropDownDiv.ARROW_SIZE/2+b.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}};b.DropDownDiv.getPositionAboveMetrics=function(e,t,n,o){return{initialX:(e=b.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-b.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:o.height-2*b.DropDownDiv.BORDER_SIZE-b.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}};b.DropDownDiv.getPositionTopOfPageMetrics=function(e,t,n){return{initialX:(e=b.DropDownDiv.getPositionX(e,t.left,t.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowVisible:!1}};b.DropDownDiv.getPositionX=function(e,t,n,o){var i=e;e=b.utils.math.clamp(t,e-o/2,n-o);i-=b.DropDownDiv.ARROW_SIZE/2;t=b.DropDownDiv.ARROW_HORIZONTAL_PADDING;return{arrowX:o=b.utils.math.clamp(t,i-e,o-t-b.DropDownDiv.ARROW_SIZE),divX:e}};b.DropDownDiv.isVisible=function(){return!!b.DropDownDiv.owner_};b.DropDownDiv.hideIfOwner=function(e,t){return b.DropDownDiv.owner_===e&&(t?b.DropDownDiv.hideWithoutAnimation():b.DropDownDiv.hide(),!0)};b.DropDownDiv.hide=function(){var e=b.DropDownDiv.DIV_;e.style.transform="translate(0, 0)";e.style.opacity=0;b.DropDownDiv.animateOutTimer_=setTimeout(function(){b.DropDownDiv.hideWithoutAnimation()},1e3*b.DropDownDiv.ANIMATION_TIME);b.DropDownDiv.onHide_&&(b.DropDownDiv.onHide_(),b.DropDownDiv.onHide_=null)};b.DropDownDiv.hideWithoutAnimation=function(){if(b.DropDownDiv.isVisible()){b.DropDownDiv.animateOutTimer_&&clearTimeout(b.DropDownDiv.animateOutTimer_);var e=b.DropDownDiv.DIV_;e.style.transform="";e.style.left="";e.style.top="";e.style.opacity=0;e.style.display="none";e.style.backgroundColor=b.DropDownDiv.DEFAULT_DROPDOWN_COLOR;e.style.borderColor=b.DropDownDiv.DEFAULT_DROPDOWN_BORDER_COLOR;b.DropDownDiv.onHide_&&(b.DropDownDiv.onHide_(),b.DropDownDiv.onHide_=null);b.DropDownDiv.clearContent();b.DropDownDiv.owner_=null}};b.DropDownDiv.positionInternal_=function(e,t,n,o){e=Math.floor(e);t=Math.floor(t);n=Math.floor(n);o=Math.floor(o);var i=b.DropDownDiv.DIV_;i.style.left=e+"px";i.style.top=t+"px";i.style.display="block";i.style.opacity=1;i.style.transform="translate("+(n-e)+"px,"+(o-t)+"px)"};b.DropDownDiv.repositionForWindowResize=function(){if(b.DropDownDiv.owner_){var e=b.DropDownDiv.owner_.getSourceBlock(),t=e.workspace.scale,n=(b.DropDownDiv.positionToField_?b.DropDownDiv.owner_.size_:e).width,o=(b.DropDownDiv.positionToField_?b.DropDownDiv.owner_.size_:e).height;n*=t;o*=t;n=(e=(b.DropDownDiv.positionToField_?b.DropDownDiv.owner_.fieldGroup_:e.getSvgRoot()).getBoundingClientRect()).left+n/2;o=b.DropDownDiv.getPositionMetrics(n,e.top+o,n,e.top);b.DropDownDiv.positionInternal_(o.initialX,o.initialY,o.finalX,o.finalY)}else b.DropDownDiv.hide()};b.Grid=function(e,t){this.gridPattern_=e;this.spacing_=t.spacing;this.length_=t.length;this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling;this.snapToGrid_=t.snap};b.Grid.prototype.scale_=1;b.Grid.prototype.dispose=function(){this.gridPattern_=null};b.Grid.prototype.shouldSnap=function(){return this.snapToGrid_};b.Grid.prototype.getSpacing=function(){return this.spacing_};b.Grid.prototype.getPatternId=function(){return this.gridPattern_.id};b.Grid.prototype.update=function(e){this.scale_=e;var t=this.spacing_*e||100;this.gridPattern_.setAttribute("width",t);this.gridPattern_.setAttribute("height",t);var n=(t=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=t+this.length_/2;t*=e;n*=e;o*=e;this.setLineAttributes_(this.line1_,e,n,o,t,t);this.setLineAttributes_(this.line2_,e,t,t,n,o)};b.Grid.prototype.setLineAttributes_=function(e,t,n,o,i,r){e&&(e.setAttribute("stroke-width",t),e.setAttribute("x1",n),e.setAttribute("y1",i),e.setAttribute("x2",o),e.setAttribute("y2",r))};b.Grid.prototype.moveTo=function(e,t){this.gridPattern_.setAttribute("x",e);this.gridPattern_.setAttribute("y",t);(b.utils.userAgent.IE||b.utils.userAgent.EDGE)&&this.update(this.scale_)};b.Grid.createDom=function(e,t,n){e=b.utils.dom.createSvgElement("pattern",{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n);0<t.length&&0<t.spacing?(b.utils.dom.createSvgElement("line",{stroke:t.colour},e),1<t.length&&b.utils.dom.createSvgElement("line",{stroke:t.colour},e)):b.utils.dom.createSvgElement("line",{},e);return e};b.utils.xml={};b.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml";b.utils.xml.document=function(){return document};b.utils.xml.createElement=function(e){return b.utils.xml.document().createElementNS(b.utils.xml.NAME_SPACE,e)};b.utils.xml.createTextNode=function(e){return b.utils.xml.document().createTextNode(e)};b.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")};b.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)};b.Events.BlockBase=function(e){b.Events.BlockBase.superClass_.constructor.call(this);this.blockId=e.id;this.workspaceId=e.workspace.id};b.utils.object.inherits(b.Events.BlockBase,b.Events.Abstract);b.Events.BlockBase.prototype.toJson=function(){var e=b.Events.BlockBase.superClass_.toJson.call(this);e.blockId=this.blockId;return e};b.Events.BlockBase.prototype.fromJson=function(e){b.Events.BlockBase.superClass_.fromJson.call(this,e);this.blockId=e.blockId};b.Events.Change=function(e,t,n,o,i){e&&(b.Events.Change.superClass_.constructor.call(this,e),this.element=t,this.name=n,this.oldValue=o,this.newValue=i)};b.utils.object.inherits(b.Events.Change,b.Events.BlockBase);b.Events.BlockChange=b.Events.Change;b.Events.Change.prototype.type=b.Events.CHANGE;b.Events.Change.prototype.toJson=function(){var e=b.Events.Change.superClass_.toJson.call(this);e.element=this.element;this.name&&(e.name=this.name);e.newValue=this.newValue;return e};b.Events.Change.prototype.fromJson=function(e){b.Events.Change.superClass_.fromJson.call(this,e);this.element=e.element;this.name=e.name;this.newValue=e.newValue};b.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue};b.Events.Change.prototype.run=function(e){var t=this.getEventWorkspace_().getBlockById(this.blockId);if(t)switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":var n="";t.mutationToDom&&(n=(n=t.mutationToDom())&&b.Xml.domToText(n));if(t.domToMutation){var o=b.Xml.textToDom(e||"<mutation/>");t.domToMutation(o)}b.Events.fire(new b.Events.Change(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)};b.Events.Create=function(e){e&&(b.Events.Create.superClass_.constructor.call(this,e),this.xml=e.workspace.rendered?b.Xml.blockToDomWithXY(e):b.Xml.blockToDom(e),this.ids=b.Events.getDescendantIds(e))};b.utils.object.inherits(b.Events.Create,b.Events.BlockBase);b.Events.BlockCreate=b.Events.Create;b.Events.Create.prototype.type=b.Events.CREATE;b.Events.Create.prototype.toJson=function(){var e=b.Events.Create.superClass_.toJson.call(this);e.xml=b.Xml.domToText(this.xml);e.ids=this.ids;return e};b.Events.Create.prototype.fromJson=function(e){b.Events.Create.superClass_.fromJson.call(this,e);this.xml=b.Xml.textToDom(e.xml);this.ids=e.ids};b.Events.Create.prototype.run=function(e){var t,n=this.getEventWorkspace_();if(e)(e=b.utils.xml.createElement("xml")).appendChild(this.xml),b.Xml.domToWorkspace(e,n);else{e=0;for(;t=this.ids[e];e++){var o=n.getBlockById(t);o?o.dispose(!1):t==this.blockId&&console.warn("Can't uncreate non-existent block: "+t)}}};b.Events.Delete=function(e){if(e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");b.Events.Delete.superClass_.constructor.call(this,e);this.oldXml=e.workspace.rendered?b.Xml.blockToDomWithXY(e):b.Xml.blockToDom(e);this.ids=b.Events.getDescendantIds(e)}};b.utils.object.inherits(b.Events.Delete,b.Events.BlockBase);b.Events.BlockDelete=b.Events.Delete;b.Events.Delete.prototype.type=b.Events.DELETE;b.Events.Delete.prototype.toJson=function(){var e=b.Events.Delete.superClass_.toJson.call(this);e.ids=this.ids;return e};b.Events.Delete.prototype.fromJson=function(e){b.Events.Delete.superClass_.fromJson.call(this,e);this.ids=e.ids};b.Events.Delete.prototype.run=function(e){var t,n=this.getEventWorkspace_();if(e){e=0;for(;t=this.ids[e];e++){var o=n.getBlockById(t);o?o.dispose(!1):t==this.blockId&&console.warn("Can't delete non-existent block: "+t)}}else(e=b.utils.xml.createElement("xml")).appendChild(this.oldXml),b.Xml.domToWorkspace(e,n)};b.Events.Move=function(e){e&&(b.Events.Move.superClass_.constructor.call(this,e),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)};b.utils.object.inherits(b.Events.Move,b.Events.BlockBase);b.Events.BlockMove=b.Events.Move;b.Events.Move.prototype.type=b.Events.MOVE;b.Events.Move.prototype.toJson=function(){var e=b.Events.Move.superClass_.toJson.call(this);this.newParentId&&(e.newParentId=this.newParentId);this.newInputName&&(e.newInputName=this.newInputName);this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y));return e};b.Events.Move.prototype.fromJson=function(e){b.Events.Move.superClass_.fromJson.call(this,e);this.newParentId=e.newParentId;this.newInputName=e.newInputName;e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate=new b.utils.Coordinate(Number(e[0]),Number(e[1])))};b.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId;this.newInputName=e.inputName;this.newCoordinate=e.coordinate};b.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),t={},n=e.getParent();n?(t.parentId=n.id,e=n.getInputWithBlock(e))&&(t.inputName=e.name):t.coordinate=e.getRelativeToSurfaceXY();return t};b.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&b.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)};b.Events.Move.prototype.run=function(e){var t=this.getEventWorkspace_(),n=t.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,i=e?this.newInputName:this.oldInputName;e=e?this.newCoordinate:this.oldCoordinate;var r,s=null;if(!o||(s=t.getBlockById(o))){n.getParent()&&n.unplug();if(e)i=n.getRelativeToSurfaceXY(),n.moveBy(e.x-i.x,e.y-i.y);else{n=n.outputConnection||n.previousConnection;i?(t=s.getInput(i))&&(r=t.connection):n.type==b.PREVIOUS_STATEMENT&&(r=s.nextConnection);r?n.connect(r):console.warn("Can't connect to non-existent input: "+i)}}else console.warn("Can't connect to non-existent block: "+o)}else console.warn("Can't move non-existent block: "+this.blockId)};b.Events.FinishedLoading=function(e){this.workspaceId=e.id;this.group=b.Events.getGroup();this.recordUndo=!1};b.utils.object.inherits(b.Events.FinishedLoading,b.Events.Abstract);b.Events.FinishedLoading.prototype.type=b.Events.FINISHED_LOADING;b.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};this.group&&(e.group=this.group);this.workspaceId&&(e.workspaceId=this.workspaceId);return e};b.Events.FinishedLoading.prototype.fromJson=function(e){this.workspaceId=e.workspaceId;this.group=e.group};b.Events.VarBase=function(e){b.Events.VarBase.superClass_.constructor.call(this);this.varId=e.getId();this.workspaceId=e.workspace.id};b.utils.object.inherits(b.Events.VarBase,b.Events.Abstract);b.Events.VarBase.prototype.toJson=function(){var e=b.Events.VarBase.superClass_.toJson.call(this);e.varId=this.varId;return e};b.Events.VarBase.prototype.fromJson=function(e){b.Events.VarBase.superClass_.toJson.call(this);this.varId=e.varId};b.Events.VarCreate=function(e){e&&(b.Events.VarCreate.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)};b.utils.object.inherits(b.Events.VarCreate,b.Events.VarBase);b.Events.VarCreate.prototype.type=b.Events.VAR_CREATE;b.Events.VarCreate.prototype.toJson=function(){var e=b.Events.VarCreate.superClass_.toJson.call(this);e.varType=this.varType;e.varName=this.varName;return e};b.Events.VarCreate.prototype.fromJson=function(e){b.Events.VarCreate.superClass_.fromJson.call(this,e);this.varType=e.varType;this.varName=e.varName};b.Events.VarCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)};b.Events.VarDelete=function(e){e&&(b.Events.VarDelete.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)};b.utils.object.inherits(b.Events.VarDelete,b.Events.VarBase);b.Events.VarDelete.prototype.type=b.Events.VAR_DELETE;b.Events.VarDelete.prototype.toJson=function(){var e=b.Events.VarDelete.superClass_.toJson.call(this);e.varType=this.varType;e.varName=this.varName;return e};b.Events.VarDelete.prototype.fromJson=function(e){b.Events.VarDelete.superClass_.fromJson.call(this,e);this.varType=e.varType;this.varName=e.varName};b.Events.VarDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)};b.Events.VarRename=function(e,t){e&&(b.Events.VarRename.superClass_.constructor.call(this,e),this.oldName=e.name,this.newName=t)};b.utils.object.inherits(b.Events.VarRename,b.Events.VarBase);b.Events.VarRename.prototype.type=b.Events.VAR_RENAME;b.Events.VarRename.prototype.toJson=function(){var e=b.Events.VarRename.superClass_.toJson.call(this);e.oldName=this.oldName;e.newName=this.newName;return e};b.Events.VarRename.prototype.fromJson=function(e){b.Events.VarRename.superClass_.fromJson.call(this,e);this.oldName=e.oldName;this.newName=e.newName};b.Events.VarRename.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)};b.Xml={};b.Xml.workspaceToDom=function(e,t){var n=b.utils.xml.createElement("xml");(r=b.Xml.variablesToDom(b.Variables.allUsedVarModels(e))).hasChildNodes()&&n.appendChild(r);for(var o,i=e.getTopComments(!0),r=0;o=i[r];r++)n.appendChild(o.toXmlWithXY(t));e=e.getTopBlocks(!0);for(r=0;i=e[r];r++)n.appendChild(b.Xml.blockToDomWithXY(i,t));return n};b.Xml.variablesToDom=function(e){for(var t,n=b.utils.xml.createElement("variables"),o=0;t=e[o];o++){var i=b.utils.xml.createElement("variable");i.appendChild(b.utils.xml.createTextNode(t.name));t.type&&i.setAttribute("type",t.type);i.id=t.getId();n.appendChild(i)}return n};b.Xml.blockToDomWithXY=function(e,t){var n;e.workspace.RTL&&(n=e.workspace.getWidth());t=b.Xml.blockToDom(e,t);var o=e.getRelativeToSurfaceXY();t.setAttribute("x",Math.round(e.workspace.RTL?n-o.x:o.x));t.setAttribute("y",Math.round(o.y));return t};b.Xml.fieldToDom_=function(e){if(e.isSerializable()){var t=b.utils.xml.createElement("field");t.setAttribute("name",e.name);return e.toXml(t)}return null};b.Xml.allFieldsToDom_=function(e,t){for(var n,o=0;n=e.inputList[o];o++)for(var i,r=0;i=n.fieldRow[r];r++)(i=b.Xml.fieldToDom_(i))&&t.appendChild(i)};b.Xml.blockToDom=function(e,t){var n=b.utils.xml.createElement(e.isShadow()?"shadow":"block");n.setAttribute("type",e.type);t||(n.id=e.id);if(e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}b.Xml.allFieldsToDom_(e,n);if(o=e.getCommentText()){var i=e.commentModel.size,r=e.commentModel.pinned,s=b.utils.xml.createElement("comment");s.appendChild(b.utils.xml.createTextNode(o));s.setAttribute("pinned",r);s.setAttribute("h",i.height);s.setAttribute("w",i.width);n.appendChild(s)}e.data&&((o=b.utils.xml.createElement("data")).appendChild(b.utils.xml.createTextNode(e.data)),n.appendChild(o));for(i=0;r=e.inputList[i];i++){var a,s=!0;if(r.type!=b.DUMMY_INPUT){var l=r.connection.targetBlock();r.type==b.INPUT_VALUE?a=b.utils.xml.createElement("value"):r.type==b.NEXT_STATEMENT&&(a=b.utils.xml.createElement("statement"));!(o=r.connection.getShadowDom())||l&&l.isShadow()||a.appendChild(b.Xml.cloneShadow_(o,t));l&&(a.appendChild(b.Xml.blockToDom(l,t)),s=!1);a.setAttribute("name",r.name);s||n.appendChild(a)}}null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&n.setAttribute("inline",e.inputsInline);e.isCollapsed()&&n.setAttribute("collapsed",!0);e.isEnabled()||n.setAttribute("disabled",!0);e.isDeletable()||e.isShadow()||n.setAttribute("deletable",!1);e.isMovable()||e.isShadow()||n.setAttribute("movable",!1);e.isEditable()||n.setAttribute("editable",!1);(i=e.getNextBlock())&&((a=b.utils.xml.createElement("next")).appendChild(b.Xml.blockToDom(i,t)),n.appendChild(a));!(o=e.nextConnection&&e.nextConnection.getShadowDom())||i&&i.isShadow()||a.appendChild(b.Xml.cloneShadow_(o,t));return n};b.Xml.cloneShadow_=function(e,t){for(var n,o=e=e.cloneNode(!0);o;)if(t&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)o=(n=o).parentNode,n.nodeType==b.utils.dom.Node.TEXT_NODE&&""==n.data.trim()&&o.firstChild!=n&&b.utils.dom.removeNode(n);o&&(o=(n=o).nextSibling,n.nodeType==b.utils.dom.Node.TEXT_NODE&&""==n.data.trim()&&b.utils.dom.removeNode(n))}return e};b.Xml.domToText=function(e){e=b.utils.xml.domToText(e);var t=/(<[^/](?:[^>]*[^/])?>[^<]*)\n([^<]*<\/)/;do{var n=e}while((e=e.replace(t,"$1&#10;$2"))!=n);return e};b.Xml.domToPrettyText=function(e){e=b.Xml.domToText(e).split("<");for(var t="",n=1;n<e.length;n++){var o=e[n];"/"==o[0]&&(t=t.substring(2));e[n]=t+"<"+o;"/"!=o[0]&&"/>"!=o.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")};b.Xml.textToDom=function(e){var t=b.utils.xml.textToDomDocument(e);if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return t.documentElement};b.Xml.clearWorkspaceAndLoadFromXml=function(e,t){t.setResizesEnabled(!1);t.clear();e=b.Xml.domToWorkspace(e,t);t.setResizesEnabled(!0);return e};b.Xml.domToWorkspace=function(e,t){if(e instanceof b.Workspace){var n=e;e=t;t=n;console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;t.RTL&&(o=t.getWidth());n=[];b.utils.dom.startTextWidthCache();var i=e.childNodes.length,r=b.Events.getGroup();r||b.Events.setGroup(!0);t.setResizesEnabled&&t.setResizesEnabled(!1);var s=!0;try{for(var a=0;a<i;a++){var l=e.childNodes[a],c=l.nodeName.toLowerCase();if("block"==c||"shadow"==c&&!b.Events.recordUndo){var u=b.Xml.domToBlock(l,t);n.push(u.id);var d=l.hasAttribute("x")?parseInt(l.getAttribute("x"),10):10,h=l.hasAttribute("y")?parseInt(l.getAttribute("y"),10):10;isNaN(d)||isNaN(h)||u.moveBy(t.RTL?o-d:d,h);s=!1}else{if("shadow"==c)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==c)t.rendered?b.WorkspaceCommentSvg?b.WorkspaceCommentSvg.fromXml(l,t,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):b.WorkspaceComment?b.WorkspaceComment.fromXml(l,t):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==c){if(!s)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");b.Xml.domToVariables(l,t);s=!1}}}}finally{r||b.Events.setGroup(!1),b.utils.dom.stopTextWidthCache()}t.setResizesEnabled&&t.setResizesEnabled(!0);b.Events.fire(new b.Events.FinishedLoading(t));return n};b.Xml.appendDomToWorkspace=function(e,t){if(t.hasOwnProperty("scale")){var n=b.BlockSvg.TAB_WIDTH;try{b.BlockSvg.TAB_WIDTH=0;var o=t.getBlocksBoundingBox()}finally{b.BlockSvg.TAB_WIDTH=n}}e=b.Xml.domToWorkspace(e,t);if(o&&o.top!=o.bottom){n=o.bottom;for(var i,r=o.left,s=1/0,a=1/0,o=0;o<e.length;o++){var l=t.getBlockById(e[o]).getRelativeToSurfaceXY();l.y<a&&(a=l.y);l.x<s&&(s=l.x)}n=n-a+b.BlockSvg.SEP_SPACE_Y;r-=s;t.RTL&&(i=t.getWidth());for(o=0;o<e.length;o++)t.getBlockById(e[o]).moveBy(t.RTL?i-r:r,n)}return e};b.Xml.domToBlock=function(e,t){if(e instanceof b.Workspace){var n=e;e=t;t=n;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}b.Events.disable();n=t.getAllVariables();try{var o=b.Xml.domToBlockHeadless_(e,t),i=o.getDescendants(!1);if(t.rendered){o.setConnectionsHidden(!0);for(var r=i.length-1;0<=r;r--)i[r].initSvg();for(r=i.length-1;0<=r;r--)i[r].render(!1);setTimeout(function(){o.workspace&&o.setConnectionsHidden(!1)},1);o.updateDisabled();t.resizeContents()}else for(r=i.length-1;0<=r;r--)i[r].initModel()}finally{b.Events.enable()}if(b.Events.isEnabled()){e=b.Variables.getAddedVariables(t,n);for(r=0;r<e.length;r++)b.Events.fire(new b.Events.VarCreate(e[r]));b.Events.fire(new b.Events.BlockCreate(o))}return o};b.Xml.domToVariables=function(e,t){for(var n,o=0;n=e.childNodes[o];o++)if(n.nodeType==b.utils.dom.Node.ELEMENT_NODE){var i=n.getAttribute("type"),r=n.getAttribute("id");t.createVariable(n.textContent,i,r)}};b.Xml.domToBlockHeadless_=function(e,t){var n=null,o=e.getAttribute("type");if(!o)throw TypeError("Block type unspecified: "+e.outerHTML);for(var i,r=e.getAttribute("id"),n=t.newBlock(o,r),s=null,r=0;i=e.childNodes[r];r++)if(i.nodeType!=b.utils.dom.Node.TEXT_NODE){for(var a,l=s=null,c=0;a=i.childNodes[c];c++)a.nodeType==b.utils.dom.Node.ELEMENT_NODE&&("block"==a.nodeName.toLowerCase()?s=a:"shadow"==a.nodeName.toLowerCase()&&(l=a));!s&&l&&(s=l);c=i.getAttribute("name");switch(i.nodeName.toLowerCase()){case"mutation":n.domToMutation&&(n.domToMutation(i),n.initSvg&&n.initSvg());break;case"comment":if(!b.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}s=i.textContent;l="true"==i.getAttribute("pinned");c=parseInt(i.getAttribute("w"),10);i=parseInt(i.getAttribute("h"),10);n.setCommentText(s);n.commentModel.pinned=l;isNaN(c)||isNaN(i)||(n.commentModel.size=new b.utils.Size(c,i));l&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1);break;case"data":n.data=i.textContent;break;case"title":case"field":b.Xml.domToField_(n,c,i);break;case"value":case"statement":if(!(i=n.getInput(c))){console.warn("Ignoring non-existent input "+c+" in block "+o);break}l&&i.connection.setShadowDom(l);if(s)if((s=b.Xml.domToBlockHeadless_(s,t)).outputConnection)i.connection.connect(s.outputConnection);else{if(!s.previousConnection)throw TypeError("Child block does not have output or previous statement.");i.connection.connect(s.previousConnection)}break;case"next":l&&n.nextConnection&&n.nextConnection.setShadowDom(l);if(s){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(s=b.Xml.domToBlockHeadless_(s,t)).previousConnection)throw TypeError("Next block does not have previous statement.");n.nextConnection.connect(s.previousConnection)}break;default:console.warn("Ignoring unknown tag: "+i.nodeName)}}(r=e.getAttribute("inline"))&&n.setInputsInline("true"==r);(r=e.getAttribute("disabled"))&&n.setEnabled("true"!=r&&"disabled"!=r);(r=e.getAttribute("deletable"))&&n.setDeletable("true"==r);(r=e.getAttribute("movable"))&&n.setMovable("true"==r);(r=e.getAttribute("editable"))&&n.setEditable("true"==r);(r=e.getAttribute("collapsed"))&&n.setCollapsed("true"==r);if("shadow"==e.nodeName.toLowerCase()){e=n.getChildren(!1);for(r=0;t=e[r];r++)if(!t.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(n.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");n.setShadow(!0)}return n};b.Xml.domToField_=function(e,t,n){var o=e.getField(t);o?o.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)};b.Xml.deleteNext=function(e){for(var t,n=0;t=e.childNodes[n];n++)if("next"==t.nodeName.toLowerCase()){e.removeChild(t);break}};b.Options=function(e){var t=!!e.readOnly;if(t)var n=null,o=!1,i=!1,r=!1,s=!1,a=!1,l=!1;else{o=!(!(n=b.Options.parseToolboxTree(e.toolbox||null))||!n.getElementsByTagName("category").length);void 0===(i=e.trashcan)&&(i=o);var c=e.maxTrashcanContents;i?void 0===c&&(c=32):c=0;void 0===(r=e.collapse)&&(r=o);void 0===(s=e.comments)&&(s=o);void 0===(a=e.disable)&&(a=o);void 0===(l=e.sounds)&&(l=!0)}var u=!!e.rtl,d=e.horizontalLayout;void 0===d&&(d=!1);var h="end"!==(h=e.toolboxPosition);h=d?h?b.TOOLBOX_AT_TOP:b.TOOLBOX_AT_BOTTOM:h==u?b.TOOLBOX_AT_RIGHT:b.TOOLBOX_AT_LEFT;var p=e.css;void 0===p&&(p=!0);var g="https://blockly-demo.appspot.com/static/media/";e.media?g=e.media:e.path&&(g=e.path+"media/");var f=void 0===e.oneBasedIndex||!!e.oneBasedIndex,m=e.theme,v=e.keyMap||b.user.keyMap.createDefaultKeyMap(),_=e.renderer||"geras";this.RTL=u;this.oneBasedIndex=f;this.collapse=r;this.comments=s;this.disable=a;this.readOnly=t;this.maxBlocks=e.maxBlocks||1/0;this.maxInstances=e.maxInstances;this.pathToMedia=g;this.hasCategories=o;this.moveOptions=b.Options.parseMoveOptions(e,o);this.hasScrollbars=this.moveOptions.scrollbars;this.hasTrashcan=i;this.maxTrashcanContents=c;this.hasSounds=l;this.hasCss=p;this.horizontalLayout=d;this.languageTree=n;this.gridOptions=b.Options.parseGridOptions_(e);this.zoomOptions=b.Options.parseZoomOptions_(e);this.toolboxPosition=h;this.theme=m;this.keyMap=v;this.renderer=_};b.Options.prototype.parentWorkspace=null;b.Options.prototype.setMetrics=null;b.Options.prototype.getMetrics=null;b.Options.parseMoveOptions=function(e,t){var n=e.move||{},o={};o.scrollbars=void 0===n.scrollbars&&void 0===e.scrollbars?t:!!n.scrollbars||!!e.scrollbars;o.wheel=!(!o.scrollbars||void 0===n.wheel)&&!!n.wheel;o.drag=!!o.scrollbars&&(void 0===n.drag||!!n.drag);return o};b.Options.parseZoomOptions_=function(e){e=e.zoom||{};var t={};t.controls=void 0!==e.controls&&!!e.controls;t.wheel=void 0!==e.wheel&&!!e.wheel;t.startScale=void 0===e.startScale?1:Number(e.startScale);t.maxScale=void 0===e.maxScale?3:Number(e.maxScale);t.minScale=void 0===e.minScale?.3:Number(e.minScale);t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed);return t};b.Options.parseGridOptions_=function(e){e=e.grid||{};var t={};t.spacing=Number(e.spacing)||0;t.colour=e.colour||"#888";t.length=Number(e.length)||1;t.snap=0<t.spacing&&!!e.snap;return t};b.Options.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(b.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=b.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e};b.Touch={};b.Touch.TOUCH_ENABLED="ontouchstart"in b.utils.global||!!(b.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!b.utils.global.navigator||!b.utils.global.navigator.maxTouchPoints&&!b.utils.global.navigator.msMaxTouchPoints);b.Touch.touchIdentifier_=null;b.Touch.TOUCH_MAP={};b.utils.global.PointerEvent?b.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:b.Touch.TOUCH_ENABLED&&(b.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});b.longPid_=0;b.longStart_=function(e,t){b.longStop_();e.changedTouches&&1!=e.changedTouches.length||(b.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY);t&&t.handleRightClick(e)},b.LONGPRESS))};b.longStop_=function(){b.longPid_&&(clearTimeout(b.longPid_),b.longPid_=0)};b.Touch.clearTouchIdentifier=function(){b.Touch.touchIdentifier_=null};b.Touch.shouldHandleEvent=function(e){return!b.Touch.isMouseOrTouchEvent(e)||b.Touch.checkTouchIdentifier(e)};b.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&void 0!==e.changedTouches[0].identifier&&null!==e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"};b.Touch.checkTouchIdentifier=function(e){var t=b.Touch.getTouchIdentifierFromEvent(e);return void 0!==b.Touch.touchIdentifier_&&null!==b.Touch.touchIdentifier_?b.Touch.touchIdentifier_==t:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(b.Touch.touchIdentifier_=t,!0)};b.Touch.setClientFromTouch=function(e){if(b.utils.string.startsWith(e.type,"touch")){var t=e.changedTouches[0];e.clientX=t.clientX;e.clientY=t.clientY}};b.Touch.isMouseOrTouchEvent=function(e){return b.utils.string.startsWith(e.type,"touch")||b.utils.string.startsWith(e.type,"mouse")||b.utils.string.startsWith(e.type,"pointer")};b.Touch.isTouchEvent=function(e){return b.utils.string.startsWith(e.type,"touch")||b.utils.string.startsWith(e.type,"pointer")};b.Touch.splitEventByTouches=function(e){var t=[];if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)t[n]={type:e.type,changedTouches:[e.changedTouches[n]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else t.push(e);return t};b.ScrollbarPair=function(e){this.workspace_=e;this.hScroll=new b.Scrollbar(e,!0,!0,"blocklyMainWorkspaceScrollbar");this.vScroll=new b.Scrollbar(e,!1,!0,"blocklyMainWorkspaceScrollbar");this.corner_=b.utils.dom.createSvgElement("rect",{height:b.Scrollbar.scrollbarThickness,width:b.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null);b.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())};b.ScrollbarPair.prototype.oldHostMetrics_=null;b.ScrollbarPair.prototype.dispose=function(){b.utils.dom.removeNode(this.corner_);this.oldHostMetrics_=this.workspace_=this.corner_=null;this.hScroll.dispose();this.hScroll=null;this.vScroll.dispose();this.vScroll=null};b.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var t=!1,n=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==e.contentWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.contentLeft==e.contentLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==e.contentHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.contentTop==e.contentTop||(n=!0)):n=t=!0;t&&this.hScroll.resize(e);n&&this.vScroll.resize(e);this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position_.x);this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position_.y);this.oldHostMetrics_=e}};b.ScrollbarPair.prototype.set=function(e,t){var n={};e*=this.hScroll.ratio_;t*=this.vScroll.ratio_;var o=this.vScroll.scrollViewSize_;n.x=this.getRatio_(e,this.hScroll.scrollViewSize_);n.y=this.getRatio_(t,o);this.workspace_.setMetrics(n);this.hScroll.setHandlePosition(e);this.vScroll.setHandlePosition(t)};b.ScrollbarPair.prototype.getRatio_=function(e,t){e/=t;return isNaN(e)?0:e};b.Scrollbar=function(e,t,n,o){this.workspace_=e;this.pair_=n||!1;this.horizontal_=t;this.oldHostMetrics_=null;this.createDom_(o);this.position_=new b.utils.Coordinate(0,0);e=b.Scrollbar.scrollbarThickness;t?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y");this.onMouseDownBarWrapper_=b.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_);this.onMouseDownHandleWrapper_=b.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)};b.Scrollbar.prototype.origin_=new b.utils.Coordinate(0,0);b.Scrollbar.prototype.startDragMouse_=0;b.Scrollbar.prototype.scrollViewSize_=0;b.Scrollbar.prototype.handleLength_=0;b.Scrollbar.prototype.handlePosition_=0;b.Scrollbar.prototype.isVisible_=!0;b.Scrollbar.prototype.containerVisible_=!0;b.Scrollbar.scrollbarThickness=15;b.Touch.TOUCH_ENABLED&&(b.Scrollbar.scrollbarThickness=25);b.Scrollbar.metricsAreEquivalent_=function(e,t){return!(!e||!t||e.viewWidth!=t.viewWidth||e.viewHeight!=t.viewHeight||e.viewLeft!=t.viewLeft||e.viewTop!=t.viewTop||e.absoluteTop!=t.absoluteTop||e.absoluteLeft!=t.absoluteLeft||e.contentWidth!=t.contentWidth||e.contentHeight!=t.contentHeight||e.contentLeft!=t.contentLeft||e.contentTop!=t.contentTop)};b.Scrollbar.prototype.dispose=function(){this.cleanUp_();b.unbindEvent_(this.onMouseDownBarWrapper_);this.onMouseDownBarWrapper_=null;b.unbindEvent_(this.onMouseDownHandleWrapper_);this.onMouseDownHandleWrapper_=null;b.utils.dom.removeNode(this.outerSvg_);this.svgBackground_=this.svgGroup_=this.outerSvg_=null;this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null);this.workspace_=null};b.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e;this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)};b.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e;this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)};b.Scrollbar.prototype.setScrollViewSize_=function(e){this.scrollViewSize_=e;this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_);this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)};b.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll.setContainerVisible(e);this.vScroll.setContainerVisible(e)};b.Scrollbar.prototype.setPosition_=function(e,t){this.position_.x=e;this.position_.y=t;b.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position_.x+this.origin_.x)+"px,"+(this.position_.y+this.origin_.y)+"px)")};b.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(b.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.oldHostMetrics_=e,this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.onScroll_()))};b.Scrollbar.prototype.resizeHorizontal_=function(e){this.resizeViewHorizontal(e)};b.Scrollbar.prototype.resizeViewHorizontal=function(e){var t=e.viewWidth-1;this.pair_&&(t-=b.Scrollbar.scrollbarThickness);this.setScrollViewSize_(Math.max(0,t));t=e.absoluteLeft+.5;this.pair_&&this.workspace_.RTL&&(t+=b.Scrollbar.scrollbarThickness);this.setPosition_(t,e.absoluteTop+e.viewHeight-b.Scrollbar.scrollbarThickness-.5);this.resizeContentHorizontal(e)};b.Scrollbar.prototype.resizeContentHorizontal=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentWidth);this.ratio_=this.scrollViewSize_/e.contentWidth;-1/0!=this.ratio_&&1/0!=this.ratio_&&!isNaN(this.ratio_)||(this.ratio_=0);this.setHandleLength_(Math.max(0,e.viewWidth*this.ratio_));this.setHandlePosition(this.constrainHandle_((e.viewLeft-e.contentLeft)*this.ratio_))};b.Scrollbar.prototype.resizeVertical_=function(e){this.resizeViewVertical(e)};b.Scrollbar.prototype.resizeViewVertical=function(e){var t=e.viewHeight-1;this.pair_&&(t-=b.Scrollbar.scrollbarThickness);this.setScrollViewSize_(Math.max(0,t));t=e.absoluteLeft+.5;this.workspace_.RTL||(t+=e.viewWidth-b.Scrollbar.scrollbarThickness-1);this.setPosition_(t,e.absoluteTop+.5);this.resizeContentVertical(e)};b.Scrollbar.prototype.resizeContentVertical=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentHeight);this.ratio_=this.scrollViewSize_/e.contentHeight;-1/0!=this.ratio_&&1/0!=this.ratio_&&!isNaN(this.ratio_)||(this.ratio_=0);this.setHandleLength_(Math.max(0,e.viewHeight*this.ratio_));this.setHandlePosition(this.constrainHandle_((e.viewTop-e.contentTop)*this.ratio_))};b.Scrollbar.prototype.createDom_=function(e){var t="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(t+=" "+e);this.outerSvg_=b.utils.dom.createSvgElement("svg",{class:t},null);this.svgGroup_=b.utils.dom.createSvgElement("g",{},this.outerSvg_);this.svgBackground_=b.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarBackground"},this.svgGroup_);e=Math.floor((b.Scrollbar.scrollbarThickness-5)/2);this.svgHandle_=b.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_);this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbar","fill");this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity");b.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())};b.Scrollbar.prototype.isVisible=function(){return this.isVisible_};b.Scrollbar.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e;t&&this.updateDisplay_()};b.Scrollbar.prototype.setVisible=function(e){var t=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e;t&&this.updateDisplay_()};b.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")};b.Scrollbar.prototype.onMouseDownBar_=function(e){this.workspace_.markFocused();b.Touch.clearTouchIdentifier();this.cleanUp_();if(b.utils.isRightButton(e))e.stopPropagation();else{var t=b.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM()),t=this.horizontal_?t.x:t.y,n=b.utils.getInjectionDivXY_(this.svgHandle_),n=this.horizontal_?n.x:n.y,o=this.handlePosition_,i=.95*this.handleLength_;t<=n?o-=i:t>=n+this.handleLength_&&(o+=i);this.setHandlePosition(this.constrainHandle_(o));this.onScroll_();e.stopPropagation();e.preventDefault()}};b.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused();this.cleanUp_();b.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,b.Scrollbar.onMouseUpWrapper_=b.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),b.Scrollbar.onMouseMoveWrapper_=b.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())};b.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_)));this.onScroll_()};b.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface();b.Touch.clearTouchIdentifier();this.cleanUp_()};b.Scrollbar.prototype.cleanUp_=function(){b.hideChaff(!0);b.Scrollbar.onMouseUpWrapper_&&(b.unbindEvent_(b.Scrollbar.onMouseUpWrapper_),b.Scrollbar.onMouseUpWrapper_=null);b.Scrollbar.onMouseMoveWrapper_&&(b.unbindEvent_(b.Scrollbar.onMouseMoveWrapper_),b.Scrollbar.onMouseMoveWrapper_=null)};b.Scrollbar.prototype.constrainHandle_=function(e){return e<=0||isNaN(e)||this.scrollViewSize_<this.handleLength_?0:Math.min(e,this.scrollViewSize_-this.handleLength_)};b.Scrollbar.prototype.onScroll_=function(){var e=this.handlePosition_/this.scrollViewSize_;isNaN(e)&&(e=0);var t={};this.horizontal_?t.x=e:t.y=e;this.workspace_.setMetrics(t)};b.Scrollbar.prototype.set=function(e){this.setHandlePosition(this.constrainHandle_(e*this.ratio_));this.onScroll_()};b.Scrollbar.prototype.setOrigin=function(e,t){this.origin_=new b.utils.Coordinate(e,t)};b.Tooltip={};b.Tooltip.visible=!1;b.Tooltip.blocked_=!1;b.Tooltip.LIMIT=50;b.Tooltip.mouseOutPid_=0;b.Tooltip.showPid_=0;b.Tooltip.lastX_=0;b.Tooltip.lastY_=0;b.Tooltip.element_=null;b.Tooltip.poisonedElement_=null;b.Tooltip.OFFSET_X=0;b.Tooltip.OFFSET_Y=10;b.Tooltip.RADIUS_OK=10;b.Tooltip.HOVER_MS=750;b.Tooltip.MARGINS=5;b.Tooltip.DIV=null;b.Tooltip.createDom=function(){b.Tooltip.DIV||(b.Tooltip.DIV=document.createElement("div"),b.Tooltip.DIV.className="blocklyTooltipDiv",document.body.appendChild(b.Tooltip.DIV))};b.Tooltip.bindMouseEvents=function(e){b.bindEvent_(e,"mouseover",null,b.Tooltip.onMouseOver_);b.bindEvent_(e,"mouseout",null,b.Tooltip.onMouseOut_);e.addEventListener("mousemove",b.Tooltip.onMouseMove_,!1)};b.Tooltip.onMouseOver_=function(e){if(!b.Tooltip.blocked_){for(e=e.currentTarget;"string"!=typeof e.tooltip&&"function"!=typeof e.tooltip;)e=e.tooltip;b.Tooltip.element_!=e&&(b.Tooltip.hide(),b.Tooltip.poisonedElement_=null,b.Tooltip.element_=e);clearTimeout(b.Tooltip.mouseOutPid_)}};b.Tooltip.onMouseOut_=function(e){b.Tooltip.blocked_||(b.Tooltip.mouseOutPid_=setTimeout(function(){b.Tooltip.element_=null;b.Tooltip.poisonedElement_=null;b.Tooltip.hide()},1),clearTimeout(b.Tooltip.showPid_))};b.Tooltip.onMouseMove_=function(e){if(b.Tooltip.element_&&b.Tooltip.element_.tooltip&&!b.Tooltip.blocked_)if(b.Tooltip.visible){var t=b.Tooltip.lastX_-e.pageX;e=b.Tooltip.lastY_-e.pageY;Math.sqrt(t*t+e*e)>b.Tooltip.RADIUS_OK&&b.Tooltip.hide()}else b.Tooltip.poisonedElement_!=b.Tooltip.element_&&(clearTimeout(b.Tooltip.showPid_),b.Tooltip.lastX_=e.pageX,b.Tooltip.lastY_=e.pageY,b.Tooltip.showPid_=setTimeout(b.Tooltip.show_,b.Tooltip.HOVER_MS))};b.Tooltip.hide=function(){b.Tooltip.visible&&(b.Tooltip.visible=!1,b.Tooltip.DIV&&(b.Tooltip.DIV.style.display="none"));b.Tooltip.showPid_&&clearTimeout(b.Tooltip.showPid_)};b.Tooltip.block=function(){b.Tooltip.hide();b.Tooltip.blocked_=!0};b.Tooltip.unblock=function(){b.Tooltip.blocked_=!1};b.Tooltip.show_=function(){if(!b.Tooltip.blocked_&&(b.Tooltip.poisonedElement_=b.Tooltip.element_,b.Tooltip.DIV)){b.Tooltip.DIV.innerHTML="";for(var e=b.Tooltip.element_.tooltip;"function"==typeof e;)e=e();e=(e=b.utils.string.wrap(e,b.Tooltip.LIMIT)).split("\n");for(var t=0;t<e.length;t++){var n=document.createElement("div");n.appendChild(document.createTextNode(e[t]));b.Tooltip.DIV.appendChild(n)}e=b.Tooltip.element_.RTL;t=document.documentElement.clientWidth;n=document.documentElement.clientHeight;b.Tooltip.DIV.style.direction=e?"rtl":"ltr";b.Tooltip.DIV.style.display="block";b.Tooltip.visible=!0;var o=b.Tooltip.lastX_,o=e?o-(b.Tooltip.OFFSET_X+b.Tooltip.DIV.offsetWidth):o+b.Tooltip.OFFSET_X,i=b.Tooltip.lastY_+b.Tooltip.OFFSET_Y;i+b.Tooltip.DIV.offsetHeight>n+window.scrollY&&(i-=b.Tooltip.DIV.offsetHeight+2*b.Tooltip.OFFSET_Y);e?o=Math.max(b.Tooltip.MARGINS-window.scrollX,o):o+b.Tooltip.DIV.offsetWidth>t+window.scrollX-2*b.Tooltip.MARGINS&&(o=t-b.Tooltip.DIV.offsetWidth-2*b.Tooltip.MARGINS);b.Tooltip.DIV.style.top=i+"px";b.Tooltip.DIV.style.left=o+"px"}};b.WorkspaceDragSurfaceSvg=function(e){this.container_=e;this.createDom()};b.WorkspaceDragSurfaceSvg.prototype.SVG_=null;b.WorkspaceDragSurfaceSvg.prototype.dragGroup_=null;b.WorkspaceDragSurfaceSvg.prototype.container_=null;b.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=b.utils.dom.createSvgElement("svg",{xmlns:b.utils.dom.SVG_NS,"xmlns:html":b.utils.dom.HTML_NS,"xmlns:xlink":b.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))};b.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,t){e=e.toFixed(0);t=t.toFixed(0);this.SVG_.style.display="block";b.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")};b.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return b.utils.getRelativeXY(this.SVG_)};b.WorkspaceDragSurfaceSvg.prototype.clearAndHideCb=null;b.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var t=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(t&&n&&b.utils.dom.hasClass(t,"blocklyBlockCanvas")&&b.utils.dom.hasClass(n,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");null!=this.previousSibling_?b.utils.dom.insertAfter(t,this.previousSibling_):e.insertBefore(t,e.firstChild);b.utils.dom.insertAfter(n,t);this.SVG_.style.display="none";if(this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");b.utils.dom.setCssTransform(this.SVG_,"");this.previousSibling_=null;this.clearAndHideCb&&this.clearAndHideCb()};b.WorkspaceDragSurfaceSvg.prototype.setContentsAndShowCb=null;b.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,t,n,o,i,r){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n;e.setAttribute("transform","translate(0, 0) scale("+r+")");t.setAttribute("transform","translate(0, 0) scale("+r+")");this.SVG_.setAttribute("width",o);this.SVG_.setAttribute("height",i);this.SVG_.appendChild(e);this.SVG_.appendChild(t);this.SVG_.style.display="block";this.setContentsAndShowCb&&this.setContentsAndShowCb()};b.Blocks=Object.create(null);b.Connection=function(e,t){this.sourceBlock_=e;this.type=t};b.Connection.CAN_CONNECT=0;b.Connection.REASON_SELF_CONNECTION=1;b.Connection.REASON_WRONG_TYPE=2;b.Connection.REASON_TARGET_NULL=3;b.Connection.REASON_CHECKS_FAILED=4;b.Connection.REASON_DIFFERENT_WORKSPACES=5;b.Connection.REASON_SHADOW_PARENT=6;b.Connection.prototype.targetConnection=null;b.Connection.prototype.disposed=!1;b.Connection.prototype.check_=null;b.Connection.prototype.shadowDom_=null;b.Connection.prototype.x_=0;b.Connection.prototype.y_=0;b.Connection.prototype.connect_=function(e){var t,n=this,o=n.getSourceBlock(),i=e.getSourceBlock();e.isConnected()&&e.disconnect();if(n.isConnected()){var r=n.targetBlock(),s=n.getShadowDom();n.setShadowDom(null);if(r.isShadow())s=b.Xml.blockToDom(r),r.dispose(),r=null;else if(n.type==b.INPUT_VALUE){if(!r.outputConnection)throw Error("Orphan block does not have an output connection.");var a=b.Connection.lastConnectionInRow_(i,r);a&&(r.outputConnection.connect(a),r=null)}else if(n.type==b.NEXT_STATEMENT){if(!r.previousConnection)throw Error("Orphan block does not have a previous connection.");for(a=i;a.nextConnection;){var l=a.getNextBlock();if(!l||l.isShadow()){r.previousConnection.checkType_(a.nextConnection)&&(a.nextConnection.connect(r.previousConnection),r=null);break}a=l}}if(r&&(n.disconnect(),b.Events.recordUndo)){var c=b.Events.getGroup();setTimeout(function(){if(r.workspace&&!r.getParent()){b.Events.setGroup(c);r.outputConnection?r.outputConnection.onFailedConnect(n):r.previousConnection&&r.previousConnection.onFailedConnect(n);b.Events.setGroup(!1)}},b.BUMP_DELAY)}n.setShadowDom(s)}b.Events.isEnabled()&&(t=new b.Events.BlockMove(i));b.Connection.connectReciprocally_(n,e);i.setParent(o);t&&(t.recordNew(),b.Events.fire(t))};b.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e.isShadow()?e.dispose():e.unplug()}this.disposed=!0};b.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_};b.Connection.prototype.isSuperior=function(){return this.type==b.INPUT_VALUE||this.type==b.NEXT_STATEMENT};b.Connection.prototype.isConnected=function(){return!!this.targetConnection};b.Connection.prototype.canConnectWithReason_=function(e){if(!e)return b.Connection.REASON_TARGET_NULL;var t,n;this.isSuperior()?(t=this.sourceBlock_,n=e.getSourceBlock()):(n=this.sourceBlock_,t=e.getSourceBlock());return t&&t==n?b.Connection.REASON_SELF_CONNECTION:e.type!=b.OPPOSITE_TYPE[this.type]?b.Connection.REASON_WRONG_TYPE:t&&n&&t.workspace!==n.workspace?b.Connection.REASON_DIFFERENT_WORKSPACES:this.checkType_(e)?t.isShadow()&&!n.isShadow()?b.Connection.REASON_SHADOW_PARENT:b.Connection.CAN_CONNECT:b.Connection.REASON_CHECKS_FAILED};b.Connection.prototype.checkConnection_=function(e){switch(this.canConnectWithReason_(e)){case b.Connection.CAN_CONNECT:break;case b.Connection.REASON_SELF_CONNECTION:throw Error("Attempted to connect a block to itself.");case b.Connection.REASON_DIFFERENT_WORKSPACES:throw Error("Blocks not on same workspace.");case b.Connection.REASON_WRONG_TYPE:throw Error("Attempt to connect incompatible types.");case b.Connection.REASON_TARGET_NULL:throw Error("Target connection is null.");case b.Connection.REASON_CHECKS_FAILED:throw Error("Connection checks failed. "+this+" expected "+this.check_+", found "+e.check_);case b.Connection.REASON_SHADOW_PARENT:throw Error("Connecting non-shadow to shadow block.");default:throw Error("Unknown connection failure: this should never happen!")}};b.Connection.prototype.canConnectToPrevious_=function(e){return!this.targetConnection&&-1==b.draggingConnections_.indexOf(e)&&(!e.targetConnection||!!(e=e.targetBlock()).isInsertionMarker()&&!e.getPreviousBlock())};b.Connection.prototype.isConnectionAllowed=function(e){if(e.sourceBlock_.isInsertionMarker()||this.canConnectWithReason_(e)!=b.Connection.CAN_CONNECT)return!1;switch(e.type){case b.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e);case b.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||this.isConnected())return!1;break;case b.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case b.NEXT_STATEMENT:if(e.isConnected()&&!this.sourceBlock_.nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:throw Error("Unknown connection type in isConnectionAllowed")}return-1==b.draggingConnections_.indexOf(e)};b.Connection.prototype.onFailedConnect=function(e){};b.Connection.prototype.connect=function(e){if(this.targetConnection!=e){this.checkConnection_(e);var t=b.Events.getGroup();t||b.Events.setGroup(!0);this.isSuperior()?this.connect_(e):e.connect_(this);t||b.Events.setGroup(!1)}};b.Connection.connectReciprocally_=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");(e.targetConnection=t).targetConnection=e};b.Connection.singleConnection_=function(e,t){for(var n=!1,o=0;o<e.inputList.length;o++){var i=e.inputList[o].connection;if(i&&i.type==b.INPUT_VALUE&&t.outputConnection.checkType_(i)){if(n)return null;n=i}}return n};b.Connection.lastConnectionInRow_=function(e,t){for(var n;n=b.Connection.singleConnection_(e,t);)if(!(e=n.targetBlock())||e.isShadow())return n;return null};b.Connection.prototype.disconnect=function(){var e,t,n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!=this)throw Error("Target connection not connected to source connection.");this.isSuperior()?(e=this.sourceBlock_,t=n.getSourceBlock(),n=this):(e=n.getSourceBlock(),t=this.sourceBlock_);var o=b.Events.getGroup();o||b.Events.setGroup(!0);this.disconnectInternal_(e,t);n.respawnShadow_();o||b.Events.setGroup(!1)};b.Connection.prototype.disconnectInternal_=function(e,t){var n;b.Events.isEnabled()&&(n=new b.Events.BlockMove(t));this.targetConnection=this.targetConnection.targetConnection=null;t.setParent(null);n&&(n.recordNew(),b.Events.fire(n))};b.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&b.Events.recordUndo)if((e=b.Xml.domToBlock(t,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}};b.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null};b.Connection.prototype.checkType_=function(e){if(!this.check_||!e.check_)return!0;for(var t=0;t<this.check_.length;t++)if(-1!=e.check_.indexOf(this.check_[t]))return!0;return!1};b.Connection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()};b.Connection.prototype.setCheck=function(e){e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null;return this};b.Connection.prototype.getCheck=function(){return this.check_};b.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e};b.Connection.prototype.getShadowDom=function(){return this.shadowDom_};b.Connection.prototype.neighbours_=function(e){return[]};b.Connection.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,o=0;o<t.inputList.length;o++)if(n[o].connection===this){e=n[o];break}return e};b.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var t="Output Connection of ";else if(e.previousConnection==this)t="Previous Connection of ";else if(e.nextConnection==this)t="Next Connection of ";else{t=null;for(var n,o=0;n=e.inputList[o];o++)if(n.connection==this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()};b.Extensions={};b.Extensions.ALL_={};b.Extensions.register=function(e,t){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(b.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof t)throw Error('Error: Extension "'+e+'" must be a function');b.Extensions.ALL_[e]=t};b.Extensions.registerMixin=function(e,t){if(!t||"object"!=typeof t)throw Error('Error: Mixin "'+e+'" must be a object');b.Extensions.register(e,function(){this.mixin(t)})};b.Extensions.registerMutator=function(e,t,n,o){var i='Error when registering mutator "'+e+'": ';b.Extensions.checkHasFunction_(i,t.domToMutation,"domToMutation");b.Extensions.checkHasFunction_(i,t.mutationToDom,"mutationToDom");var r=b.Extensions.checkMutatorDialog_(t,i);if(n&&"function"!=typeof n)throw Error('Extension "'+e+'" is not a function');b.Extensions.register(e,function(){if(r){if(!b.Mutator)throw Error(i+"Missing require for Blockly.Mutator");this.setMutator(new b.Mutator(o))}this.mixin(t);n&&n.apply(this)})};b.Extensions.unregister=function(e){b.Extensions.ALL_[e]?delete b.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')};b.Extensions.apply=function(e,t,n){var o,i=b.Extensions.ALL_[e];if("function"!=typeof i)throw Error('Error: Extension "'+e+'" not found.');n?b.Extensions.checkNoMutatorProperties_(e,t):o=b.Extensions.getMutatorProperties_(t);i.apply(t);if(n)b.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',t);else if(!b.Extensions.mutatorPropertiesMatch_(o,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')};b.Extensions.checkHasFunction_=function(e,t,n){if(!t)throw Error(e+'missing required property "'+n+'"');if("function"!=typeof t)throw Error(e+'" required property "'+n+'" must be a function')};b.Extensions.checkNoMutatorProperties_=function(e,t){if(b.Extensions.getMutatorProperties_(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)};b.Extensions.checkMutatorDialog_=function(e,t){var n=void 0!==e.compose,o=void 0!==e.decompose;if(n&&o){if("function"!=typeof e.compose)throw Error(t+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(t+"decompose must be a function.");return!0}if(n||o)throw Error(t+'Must have both or neither of "compose" and "decompose"');return!1};b.Extensions.checkBlockHasMutatorProperties_=function(e,t){if("function"!=typeof t.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof t.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');b.Extensions.checkMutatorDialog_(t,e)};b.Extensions.getMutatorProperties_=function(e){var t=[];void 0!==e.domToMutation&&t.push(e.domToMutation);void 0!==e.mutationToDom&&t.push(e.mutationToDom);void 0!==e.compose&&t.push(e.compose);void 0!==e.decompose&&t.push(e.decompose);return t};b.Extensions.mutatorPropertiesMatch_=function(e,t){if((t=b.Extensions.getMutatorProperties_(t)).length!=e.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!=t[n])return!1;return!0};b.Extensions.buildTooltipForDropdown=function(n,o){var i=[];"object"==typeof document&&b.utils.runAfterPageLoad(function(){for(var e in o)b.utils.checkMessageReferences(o[e])});return function(){this.type&&-1==i.indexOf(this.type)&&(b.Extensions.checkDropdownOptionsInTable_(this,n,o),i.push(this.type));this.setTooltip(function(){var e=this.getFieldValue(n),t=o[e];null==t?-1==i.indexOf(this.type)&&(e="No tooltip mapping for value "+e+" of field "+n,null!=this.type&&(e+=" of block type "+this.type),console.warn(e+".")):t=b.utils.replaceMessageReferences(t);return t}.bind(this))}};b.Extensions.checkDropdownOptionsInTable_=function(e,t,n){var o=e.getField(t);if(!o.isOptionListDynamic()){o=o.getOptions();for(var i=0;i<o.length;++i){var r=o[i][1];null==n[r]&&console.warn("No tooltip mapping for value "+r+" of field "+t+" of block type "+e.type)}}};b.Extensions.buildTooltipWithFieldText=function(t,n){"object"==typeof document&&b.utils.runAfterPageLoad(function(){b.utils.checkMessageReferences(t)});return function(){this.setTooltip(function(){var e=this.getField(n);return b.utils.replaceMessageReferences(t).replace("%1",e?e.getText():"")}.bind(this))}};b.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip;this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))};b.Extensions.register("parent_tooltip_when_inline",b.Extensions.extensionParentTooltip_);b.blockAnimations={};b.blockAnimations.disconnectPid_=0;b.blockAnimations.disconnectGroup_=null;b.blockAnimations.disposeUiEffect=function(e){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete");e=t.getSvgXY(n);(n=n.cloneNode(!0)).translateX_=e.x;n.translateY_=e.y;n.setAttribute("transform","translate("+e.x+","+e.y+")");t.getParentSvg().appendChild(n);n.bBox_=n.getBBox();b.blockAnimations.disposeUiStep_(n,t.RTL,new Date,t.scale)};b.blockAnimations.disposeUiStep_=function(e,t,n,o){var i=(new Date-n)/150;1<i?b.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(t?-1:1)*e.bBox_.width*o/2*i)+","+(e.translateY_+e.bBox_.height*o*i)+") scale("+(1-i)*o+")"),setTimeout(b.blockAnimations.disposeUiStep_,10,e,t,n,o))};b.blockAnimations.connectionUiEffect=function(e){var t=e.workspace,n=t.scale;t.getAudioManager().play("click");if(!(n<1)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*n,o.y+=13*n):e.previousConnection&&(o.x+=(e.RTL?-23:23)*n,o.y+=3*n);e=b.utils.dom.createSvgElement("circle",{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg());b.blockAnimations.connectionUiStep_(e,new Date,n)}};b.blockAnimations.connectionUiStep_=function(e,t,n){var o=(new Date-t)/150;1<o?b.utils.dom.removeNode(e):(e.setAttribute("r",25*o*n),e.style.opacity=1-o,b.blockAnimations.disconnectPid_=setTimeout(b.blockAnimations.connectionUiStep_,10,e,t,n))};b.blockAnimations.disconnectUiEffect=function(e){e.workspace.getAudioManager().play("disconnect");if(!(e.workspace.scale<1)){var t=e.getHeightWidth().height,t=Math.atan(10/t)/Math.PI*180;e.RTL||(t*=-1);b.blockAnimations.disconnectUiStep_(e.getSvgRoot(),t,new Date)}};b.blockAnimations.disconnectUiStep_=function(e,t,n){var o=(new Date-n)/200;1<o?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)+")",b.blockAnimations.disconnectGroup_=e,b.blockAnimations.disconnectPid_=setTimeout(b.blockAnimations.disconnectUiStep_,10,e,t,n));e.setAttribute("transform",e.translate_+e.skew_)};b.blockAnimations.disconnectUiStop=function(){if(b.blockAnimations.disconnectGroup_){clearTimeout(b.blockAnimations.disconnectPid_);var e=b.blockAnimations.disconnectGroup_;e.skew_="";e.setAttribute("transform",e.translate_);b.blockAnimations.disconnectGroup_=null}};b.InsertionMarkerManager=function(e){this.topBlock_=b.selected=e;this.workspace_=e.workspace;this.lastMarker_=this.lastOnStack_=null;this.firstMarker_=this.createMarkerBlock_(this.topBlock_);this.localConnection_=this.closestConnection_=null;this.wouldDeleteBlock_=!1;this.markerConnection_=null;this.highlightingBlock_=!1;this.highlightedBlock_=null;this.availableConnections_=this.initAvailableConnections_()};b.InsertionMarkerManager.prototype.dispose=function(){this.workspace_=this.topBlock_=null;this.availableConnections_.length=0;this.localConnection_=this.closestConnection_=null;b.Events.disable();try{this.firstMarker_&&(this.firstMarker_.dispose(),this.firstMarker_=null),this.lastMarker_&&(this.lastMarker_.dispose(),this.lastMarker_=null)}finally{b.Events.enable()}this.highlightedBlock_=null};b.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_};b.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_};b.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(b.Events.disable(),this.hidePreview_(),b.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;b.blockAnimations.connectionUiEffect(e.getSourceBlock());this.topBlock_.getRootBlock().bringToFront()}};b.InsertionMarkerManager.prototype.update=function(e,t){var n=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(n,t))||this.shouldUpdatePreviews_(n,e))&&(b.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),b.Events.enable())};b.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var t=e.type;b.Events.disable();try{var n=this.workspace_.newBlock(t);n.setInsertionMarker(!0,e.width);n.setCollapsed(e.isCollapsed());if(e.mutationToDom){var o=e.mutationToDom();o&&n.domToMutation(o)}for(t=0;t<e.inputList.length;t++)for(var i=e.inputList[t],r=n.inputList[t],o=0;o<i.fieldRow.length;o++){var s=i.fieldRow[o];null!=s.name&&r.fieldRow[o].setValue(s.getValue())}n.initSvg();n.getSvgRoot().setAttribute("visibility","hidden")}finally{b.Events.enable()}return n};b.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack();t&&t!=this.topBlock_.nextConnection&&(e.push(t),this.lastOnStack_=t,this.lastMarker_=this.createMarkerBlock_(t.sourceBlock_));return e};b.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,t){var n=e.local,o=e.closest;e=e.radius;if(!n||!o)return!(!this.localConnection_||!this.closestConnection_);if(this.localConnection_&&this.closestConnection_){if(this.closestConnection_==o&&this.localConnection_==n)return!1;n=this.localConnection_.x_+t.x-this.closestConnection_.x_;t=this.localConnection_.y_+t.y-this.closestConnection_.y_;t=Math.sqrt(n*n+t*t);return!(o&&e>t-b.CURRENT_CONNECTION_PREFERENCE)}if(!this.localConnection_&&!this.closestConnection_)return!0;console.error("Only one of localConnection_ and closestConnection_ was set.");console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0};b.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var t=this.getStartRadius_(),n=null,o=null,i=0;i<this.availableConnections_.length;i++){var r=this.availableConnections_[i],s=r.closest(t,e);s.connection&&(n=s.connection,o=r,t=s.radius)}return{closest:n,local:o,radius:t}};b.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?b.CONNECTING_SNAP_RADIUS:b.SNAP_RADIUS};b.InsertionMarkerManager.prototype.shouldReplace_=function(){var e=this.closestConnection_,t=this.localConnection_;return t.type==b.OUTPUT_VALUE?!(!e.isConnected()||b.Connection.lastConnectionInRow_(this.topBlock_,e.targetConnection.getSourceBlock())):t!=t.sourceBlock_.getFirstStatementConnection()&&!(this.topBlock_.nextConnection||t.type!=b.PREVIOUS_STATEMENT||!e.isConnected())};b.InsertionMarkerManager.prototype.shouldDelete_=function(e,t){e=e&&!!e.closest&&t!=b.DELETE_AREA_TOOLBOX;return!!t&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e};b.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var t=e.closest;e=e.local;t&&(t==this.closestConnection_||t.sourceBlock_.isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=t,this.localConnection_=e,this.showPreview_()))}};b.InsertionMarkerManager.prototype.showPreview_=function(){this.shouldReplace_()?this.highlightBlock_():this.connectMarker_();this.closestConnection_&&this.closestConnection_.highlight()};b.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var t=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local;this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null};b.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.unhighlight();this.highlightingBlock_?this.unhighlightBlock_():this.markerConnection_&&this.disconnectMarker_()};b.InsertionMarkerManager.prototype.highlightBlock_=function(){var e=this.closestConnection_,t=this.localConnection_;e.targetBlock()?(this.highlightedBlock_=e.targetBlock(),e.targetBlock().highlightForReplacement(!0)):t.type==b.OUTPUT_VALUE&&(this.highlightedBlock_=e.sourceBlock_,e.sourceBlock_.highlightShapeForInput(e,!0));this.highlightingBlock_=!0};b.InsertionMarkerManager.prototype.unhighlightBlock_=function(){var e=this.closestConnection_;e.type!=b.INPUT_VALUE||e.isConnected()?this.highlightedBlock_.highlightForReplacement(!1):this.highlightedBlock_.highlightShapeForInput(e,!1);this.highlightedBlock_=null;this.highlightingBlock_=!1};b.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,t=e.sourceBlock_,n=t.nextConnection,o=t.previousConnection,i=t.outputConnection,i=e.type==b.INPUT_VALUE&&!(i&&i.targetConnection);!(e!=n||o&&o.targetConnection)||i?e.targetBlock().unplug(!1):e.type==b.NEXT_STATEMENT&&e!=n?((n=e.targetConnection).sourceBlock_.unplug(!1),o=o?o.targetConnection:null,t.unplug(!0),o&&o.connect(n)):t.unplug(!0);if(e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null;t.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")};b.InsertionMarkerManager.prototype.connectMarker_=function(){var e=this.localConnection_,t=this.closestConnection_,n=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=n.getMatchingConnection(e.sourceBlock_,e))==this.markerConnection_)throw Error("Made it to connectMarker_ even though the marker isn't changing");n.render();n.rendered=!0;n.getSvgRoot().setAttribute("visibility","visible");n.positionNewBlock(n,e,t);e.connect(t);this.markerConnection_=e};b.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];this.firstMarker_&&e.push(this.firstMarker_);this.lastMarker_&&e.push(this.lastMarker_);return e};b.BlockDragger=function(e,t){this.draggingBlock_=e;this.workspace_=t;this.draggedConnectionManager_=new b.InsertionMarkerManager(this.draggingBlock_);this.deleteArea_=null;this.wouldDeleteBlock_=!1;this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY();this.dragIconData_=b.BlockDragger.initIconData_(e)};b.BlockDragger.prototype.dispose=function(){this.startWorkspace_=this.workspace_=this.draggingBlock_=null;this.dragIconData_.length=0;this.draggedConnectionManager_&&(this.draggedConnectionManager_.dispose(),this.draggedConnectionManager_=null)};b.BlockDragger.initIconData_=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++){n=n.getIcons();for(var i=0;i<n.length;i++){var r={location:n[i].getIconLocation(),icon:n[i]};t.push(r)}}return t};b.BlockDragger.prototype.startBlockDrag=function(e,t){b.Events.getGroup()||b.Events.setGroup(!0);this.workspace_.isMutator&&this.draggingBlock_.bringToFront();b.utils.dom.startTextWidthCache();this.workspace_.setResizesEnabled(!1);b.blockAnimations.disconnectUiStop();(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(t),e=this.pixelsToWorkspaceUnits_(e),e=b.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),b.blockAnimations.disconnectUiEffect(this.draggingBlock_));this.draggingBlock_.setDragging(!0);this.draggingBlock_.moveToDragSurface_();(e=this.workspace_.getToolbox())&&(t=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(t))};b.BlockDragger.prototype.dragBlock=function(e,t){t=this.pixelsToWorkspaceUnits_(t);var n=b.utils.Coordinate.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(n);this.dragIcons_(t);this.deleteArea_=this.workspace_.isDeleteArea(e);this.draggedConnectionManager_.update(t,this.deleteArea_);this.updateCursorDuringBlockDrag_()};b.BlockDragger.prototype.endBlockDrag=function(e,t){this.dragBlock(e,t);this.dragIconData_=[];b.utils.dom.stopTextWidthCache();b.blockAnimations.disconnectUiStop();e=this.pixelsToWorkspaceUnits_(t);t=b.utils.Coordinate.sum(this.startXY_,e);this.draggingBlock_.moveOffDragSurface_(t);this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections_(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump());this.workspace_.setResizesEnabled(!0);(e=this.workspace_.getToolbox())&&(t=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(t));b.Events.setGroup(!1)};b.BlockDragger.prototype.fireMoveEvent_=function(){var e=new b.Events.BlockMove(this.draggingBlock_);e.oldCoordinate=this.startXY_;e.recordNew();b.Events.fire(e)};b.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0)):e&&e.close();return this.wouldDeleteBlock_};b.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==b.DELETE_AREA_TRASH&&e&&e.setOpen_(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setOpen_(!1))};b.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){e=new b.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale);this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale);return e};b.BlockDragger.prototype.dragIcons_=function(e){for(var t=0;t<this.dragIconData_.length;t++){var n=this.dragIconData_[t];n.icon.setIconLocation(b.utils.Coordinate.sum(n.location,e))}};b.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]};b.Cursor=function(){this.drawer_=this.curNode_=null};b.Cursor.prototype.setDrawer=function(e){this.drawer_=e};b.Cursor.prototype.getDrawer=function(){return this.drawer_};b.Cursor.prototype.getCurNode=function(){return this.curNode_};b.Cursor.prototype.setCurNode=function(e){this.curNode_=e;this.drawer_&&this.drawer_.draw(this.getCurNode())};b.Cursor.prototype.hide=function(){this.drawer_&&this.drawer_.hide()};b.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==b.ASTNode.types.NEXT||e.getType()==b.ASTNode.types.BLOCK);)e=e.next();e&&this.setCurNode(e);return e};b.Cursor.prototype.in=function(){var e=this.getCurNode();if(!e)return null;e.getType()!=b.ASTNode.types.PREVIOUS&&e.getType()!=b.ASTNode.types.OUTPUT||(e=e.next());(e=e.in())&&this.setCurNode(e);return e};b.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==b.ASTNode.types.NEXT||e.getType()==b.ASTNode.types.BLOCK);)e=e.prev();e&&this.setCurNode(e);return e};b.Cursor.prototype.out=function(){var e=this.getCurNode();if(!e)return null;(e=e.out())&&e.getType()==b.ASTNode.types.BLOCK&&(e=e.prev()||e);e&&this.setCurNode(e);return e};b.MarkerCursor=function(){b.MarkerCursor.superClass_.constructor.call(this)};b.utils.object.inherits(b.MarkerCursor,b.Cursor);b.MarkerCursor.prototype.next=function(){return null};b.MarkerCursor.prototype.in=function(){return null};b.MarkerCursor.prototype.prev=function(){return null};b.MarkerCursor.prototype.out=function(){return null};b.Theme=function(e,t,n){this.blockStyles_=e;this.categoryStyles_=t;this.componentStyles_=n||Object.create(null)};b.Theme.prototype.setAllBlockStyles=function(e){for(var t in e)this.setBlockStyle(t,e[t])};b.Theme.prototype.getAllBlockStyles=function(){return this.blockStyles_};b.Theme.prototype.getBlockStyle=function(e){return this.blockStyles_[e]};b.Theme.prototype.setBlockStyle=function(e,t){this.blockStyles_[e]=t};b.Theme.prototype.getCategoryStyle=function(e){return this.categoryStyles_[e]};b.Theme.prototype.setCategoryStyle=function(e,t){this.categoryStyles_[e]=t};b.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles_[e])&&"string"==typeof propertyValue&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null};b.Theme.prototype.setComponentStyle=function(e,t){this.componentStyles_[e]=t};b.ThemeManager=function(e){this.theme_=e;this.subscribedWorkspaces_=[];this.componentDB_=Object.create(null)};b.ThemeManager.prototype.getTheme=function(){return this.theme_};b.ThemeManager.prototype.setTheme=function(e){if(this.theme_!==e){this.theme_=e;e=0;for(var t,n;t=this.subscribedWorkspaces_[e];e++)t.refreshTheme();e=0;t=Object.keys(this.componentDB_);for(;n=t[e];e++)for(var o=0;r=this.componentDB_[n][o];o++){var i=r.element,r=r.propertyName,s=this.theme_&&this.theme_.getComponentStyle(n);i.style[r]=s||""}}};b.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)};b.ThemeManager.prototype.unsubscribeWorkspace=function(e){if((e=this.subscribedWorkspaces_.indexOf(e))<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)};b.ThemeManager.prototype.subscribe=function(e,t,n){this.componentDB_[t]||(this.componentDB_[t]=[]);this.componentDB_[t].push({element:e,propertyName:n});t=this.theme_&&this.theme_.getComponentStyle(t);e.style[n]=t||""};b.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var t,n=Object.keys(this.componentDB_),o=0;t=n[o];o++){for(var i=this.componentDB_[t],r=i.length-1;0<=r;r--)i[r].element===e&&i.splice(r,1);this.componentDB_[t].length||delete this.componentDB_[t]}};b.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null};b.Themes={};b.Themes.Classic={};b.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}};b.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}};b.Themes.Classic=new b.Theme(b.Themes.Classic.defaultBlockStyles,b.Themes.Classic.categoryStyles);b.VariableMap=function(e){this.variableMap_=Object.create(null);this.workspace=e};b.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)};b.VariableMap.prototype.renameVariable=function(e,t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1);b.Events.setGroup(!0);try{n&&n.getId()!=e.getId()?this.renameVariableWithConflict_(e,t,n,o):this.renameVariableAndUses_(e,t,o)}finally{b.Events.setGroup(!1)}};b.VariableMap.prototype.renameVariableById=function(e,t){var n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)};b.VariableMap.prototype.renameVariableAndUses_=function(e,t,n){b.Events.fire(new b.Events.VarRename(e,t));e.name=t;for(t=0;t<n.length;t++)n[t].updateVarName(e)};b.VariableMap.prototype.renameVariableWithConflict_=function(e,t,n,o){var i=e.type;t!=n.name&&this.renameVariableAndUses_(n,t,o);for(t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());b.Events.fire(new b.Events.VarDelete(e));e=this.getVariablesOfType(i).indexOf(e);this.variableMap_[i].splice(e,1)};b.VariableMap.prototype.createVariable=function(e,t,n){var o=this.getVariable(e,t);if(o){if(n&&o.getId()!=n)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');o=n||b.utils.genUid();t=t||"";o=new b.VariableModel(this.workspace,e,t,o);(e=this.variableMap_[t]||[]).push(o);delete this.variableMap_[t];this.variableMap_[t]=e;return o};b.VariableMap.prototype.deleteVariable=function(e){for(var t,n=this.variableMap_[e.type],o=0;t=n[o];o++)if(t.getId()==e.getId()){n.splice(o,1);b.Events.fire(new b.Events.VarDelete(e));break}};b.VariableMap.prototype.deleteVariableById=function(e){var t=this.getVariableById(e);if(t){var n,o=t.name,i=this.getVariableUsesById(e);e=0;for(;n=i[e];e++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type){e=n.getFieldValue("NAME");o=b.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e);b.alert(o);return}var r=this;1<i.length?(o=b.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(i.length)).replace("%2",o),b.confirm(o,function(e){e&&r.deleteVariableInternal_(t,i)})):r.deleteVariableInternal_(t,i)}else console.warn("Can't delete non-existent variable: "+e)};b.VariableMap.prototype.deleteVariableInternal_=function(e,t){var n=b.Events.getGroup();n||b.Events.setGroup(!0);try{for(var o=0;o<t.length;o++)t[o].dispose(!0,!1);this.deleteVariable(e)}finally{n||b.Events.setGroup(!1)}};b.VariableMap.prototype.getVariable=function(e,t){if(t=this.variableMap_[t||""])for(var n,o=0;n=t[o];o++)if(b.Names.equals(n.name,e))return n;return null};b.VariableMap.prototype.getVariableById=function(e){for(var t=Object.keys(this.variableMap_),n=0;n<t.length;n++)for(var o,i=t[n],r=0;o=this.variableMap_[i][r];r++)if(o.getId()==e)return o;return null};b.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]};b.VariableMap.prototype.getVariableTypes=function(e){var t=[];e&&e.getPotentialVariableMap()&&(t=Object.keys(e.getPotentialVariableMap().variableMap_));e=Object.keys(this.variableMap_).concat(t);t=!1;for(var n=0;n<e.length;n++)""==e[n]&&(t=!0);t||e.push("");return e};b.VariableMap.prototype.getAllVariables=function(){var e,t=[];for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t};b.VariableMap.prototype.getVariableUsesById=function(e){for(var t=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var i=n[o].getVarModels();if(i)for(var r=0;r<i.length;r++)i[r].getId()==e&&t.push(n[o])}return t};b.Workspace=function(e){this.id=b.utils.genUid();(b.Workspace.WorkspaceDB_[this.id]=this).options=e||{};this.RTL=!!this.options.RTL;this.horizontalLayout=!!this.options.horizontalLayout;this.toolboxPosition=this.options.toolboxPosition;this.topBlocks_=[];this.topComments_=[];this.commentDB_=Object.create(null);this.listeners_=[];this.undoStack_=[];this.redoStack_=[];this.blockDB_=Object.create(null);this.typedBlocksDB_=Object.create(null);this.variableMap_=new b.VariableMap(this);this.potentialVariableMap_=null;this.cursor_=new b.Cursor;this.marker_=new b.MarkerCursor;this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new b.ThemeManager(this.options.theme||b.Themes.Classic);this.themeManager_.subscribeWorkspace(this)};b.Workspace.prototype.rendered=!1;b.Workspace.prototype.isClearing=!1;b.Workspace.prototype.MAX_UNDO=1024;b.Workspace.prototype.connectionDBList=null;b.Workspace.prototype.setCursor=function(e){this.cursor_=e};b.Workspace.prototype.setMarker=function(e){this.marker_=e};b.Workspace.prototype.getCursor=function(){return this.cursor_};b.Workspace.prototype.getMarker=function(){return this.marker_};b.Workspace.prototype.getTheme=function(){return this.themeManager_.getTheme()};b.Workspace.prototype.setTheme=function(e){e=e||b.Themes.Classic;this.themeManager_.setTheme(e)};b.Workspace.prototype.refreshTheme=function(){this.updateBlockStyles_(this.getAllBlocks().filter(function(e){return void 0!==e.getStyleName()}));var e=new b.Events.Ui(null,"theme",null,null);e.workspaceId=this.id;b.Events.fire(e)};b.Workspace.prototype.updateBlockStyles_=function(e){for(var t,n=0;t=e[n];n++){var o=t.getStyleName();t.setStyle(o);t.mutator&&t.mutator.updateBlockStyle(o)}};b.Workspace.prototype.dispose=function(){this.listeners_.length=0;this.clear();delete b.Workspace.WorkspaceDB_[this.id];this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null))};b.Workspace.SCAN_ANGLE=3;b.Workspace.prototype.sortObjects_=function(e,t){e=e.getRelativeToSurfaceXY();t=t.getRelativeToSurfaceXY();return e.y+b.Workspace.prototype.sortObjects_.offset*e.x-(t.y+b.Workspace.prototype.sortObjects_.offset*t.x)};b.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)};b.Workspace.prototype.removeTopBlock=function(e){if(!b.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")};b.Workspace.prototype.getTopBlocks=function(e){var t=[].concat(this.topBlocks_);e&&1<t.length&&(this.sortObjects_.offset=Math.sin(b.utils.math.toRadians(b.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_));return t};b.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]);this.typedBlocksDB_[e.type].push(e)};b.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1);this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]};b.Workspace.prototype.getBlocksByType=function(e,t){if(!this.typedBlocksDB_[e])return[];e=this.typedBlocksDB_[e].slice(0);t&&1<e.length&&(this.sortObjects_.offset=Math.sin(b.utils.math.toRadians(b.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_));return e};b.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e);this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"');this.commentDB_[e.id]=e};b.Workspace.prototype.removeTopComment=function(e){if(!b.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]};b.Workspace.prototype.getTopComments=function(e){var t=[].concat(this.topComments_);e&&1<t.length&&(this.sortObjects_.offset=Math.sin(b.utils.math.toRadians(b.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_));return t};b.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n].getDescendants(!0))}else for(t=this.getTopBlocks(!1),n=0;n<t.length;n++)t.push.apply(t,t[n].getChildren(!1));return t.filter(function(e){return!e.isInsertionMarker()})};b.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=b.Events.getGroup();for(e||b.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose();for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();e||b.Events.setGroup(!1);this.variableMap_.clear();this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}};b.Workspace.prototype.renameVariableById=function(e,t){this.variableMap_.renameVariableById(e,t)};b.Workspace.prototype.createVariable=function(e,t,n){return this.variableMap_.createVariable(e,t,n)};b.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)};b.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)};b.Workspace.prototype.deleteVariableInternal_=function(e,t){this.variableMap_.deleteVariableInternal_(e,t)};b.Workspace.prototype.variableIndexOf=function(e){console.warn("Deprecated call to Blockly.Workspace.prototype.variableIndexOf");return-1};b.Workspace.prototype.getVariable=function(e,t){return this.variableMap_.getVariable(e,t)};b.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)};b.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)};b.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)};b.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()};b.Workspace.prototype.getWidth=function(){return 0};b.Workspace.prototype.newBlock=function(e,t){return new b.Block(this,e,t)};b.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks().length};b.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(this.options.maxInstances[e]||1/0)-this.getBlocksByType(e).length:1/0};b.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var t,n=0;for(t in e){if(e[t]>this.remainingCapacityOfType(t))return!1;n+=e[t]}return!(n>this.remainingCapacity())};b.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances};b.Workspace.prototype.undo=function(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_,o=t.pop();if(o){for(var i=[o];t.length&&o.group&&o.group==t[t.length-1].group;)i.push(t.pop());for(t=0;o=i[t];t++)n.push(o);i=b.Events.filter(i,e);b.Events.recordUndo=!1;try{for(t=0;o=i[t];t++)o.run(e)}finally{b.Events.recordUndo=!0}}};b.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0;this.redoStack_.length=0;b.Events.clearPendingUndo()};b.Workspace.prototype.addChangeListener=function(e){this.listeners_.push(e);return e};b.Workspace.prototype.removeChangeListener=function(e){b.utils.arrayRemove(this.listeners_,e)};b.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var t,n=0;t=this.listeners_[n];n++)t(e)};b.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null};b.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null};b.Workspace.prototype.allInputsFilled=function(e){for(var t,n=this.getTopBlocks(!1),o=0;t=n[o];o++)if(!t.allInputsFilled(e))return!1;return!0};b.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_};b.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new b.VariableMap(this)};b.Workspace.prototype.getVariableMap=function(){return this.variableMap_};b.Workspace.WorkspaceDB_=Object.create(null);b.Workspace.getById=function(e){return b.Workspace.WorkspaceDB_[e]||null};b.Workspace.getAll=function(){var e,t=[];for(e in b.Workspace.WorkspaceDB_)t.push(b.Workspace.WorkspaceDB_[e]);return t};b.Workspace.prototype.getThemeManager=function(){return this.themeManager_};b.Bubble=function(e,t,n,o,i,r){this.workspace_=e;this.content_=t;this.shape_=n;n=b.Bubble.ARROW_ANGLE;this.workspace_.RTL&&(n=-n);this.arrow_radians_=b.utils.math.toRadians(n);e.getBubbleCanvas().appendChild(this.createDom_(t,!(!i||!r)));this.setAnchorLocation(o);i&&r||(i=(t=this.content_.getBBox()).width+2*b.Bubble.BORDER_WIDTH,r=t.height+2*b.Bubble.BORDER_WIDTH);this.setBubbleSize(i,r);this.positionBubble_();this.renderArrow_();this.rendered_=!0;e.options.readOnly||(b.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&b.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))};b.Bubble.BORDER_WIDTH=6;b.Bubble.ARROW_THICKNESS=5;b.Bubble.ARROW_ANGLE=20;b.Bubble.ARROW_BEND=4;b.Bubble.ANCHOR_RADIUS=8;b.Bubble.onMouseUpWrapper_=null;b.Bubble.onMouseMoveWrapper_=null;b.Bubble.prototype.resizeCallback_=null;b.Bubble.unbindDragEvents_=function(){b.Bubble.onMouseUpWrapper_&&(b.unbindEvent_(b.Bubble.onMouseUpWrapper_),b.Bubble.onMouseUpWrapper_=null);b.Bubble.onMouseMoveWrapper_&&(b.unbindEvent_(b.Bubble.onMouseMoveWrapper_),b.Bubble.onMouseMoveWrapper_=null)};b.Bubble.bubbleMouseUp_=function(){b.Touch.clearTouchIdentifier();b.Bubble.unbindDragEvents_()};b.Bubble.prototype.rendered_=!1;b.Bubble.prototype.anchorXY_=null;b.Bubble.prototype.relativeLeft_=0;b.Bubble.prototype.relativeTop_=0;b.Bubble.prototype.width_=0;b.Bubble.prototype.height_=0;b.Bubble.prototype.autoLayout_=!0;b.Bubble.prototype.createDom_=function(e,t){this.bubbleGroup_=b.utils.dom.createSvgElement("g",{},null);var n={filter:"url(#"+this.workspace_.options.embossFilterId+")"};b.utils.userAgent.JAVA_FX&&(n={});n=b.utils.dom.createSvgElement("g",n,this.bubbleGroup_);this.bubbleArrow_=b.utils.dom.createSvgElement("path",{},n);this.bubbleBack_=b.utils.dom.createSvgElement("rect",{class:"blocklyDraggable",x:0,y:0,rx:b.Bubble.BORDER_WIDTH,ry:b.Bubble.BORDER_WIDTH},n);t?(this.resizeGroup_=b.utils.dom.createSvgElement("g",{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),t=2*b.Bubble.BORDER_WIDTH,b.utils.dom.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,t.toString())},this.resizeGroup_),b.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:t/3,y1:t-1,x2:t-1,y2:t/3},this.resizeGroup_),b.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:2*t/3,y1:t-1,x2:t-1,y2:2*t/3},this.resizeGroup_)):this.resizeGroup_=null;this.bubbleGroup_.appendChild(e);return this.bubbleGroup_};b.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_};b.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)};b.Bubble.prototype.bubbleMouseDown_=function(e){var t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)};b.Bubble.prototype.showContextMenu_=function(e){};b.Bubble.prototype.isDeletable=function(){return!1};b.Bubble.prototype.resizeMouseDown_=function(e){this.promote_();b.Bubble.unbindDragEvents_();b.utils.isRightButton(e)||(this.workspace_.startDrag(e,new b.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),b.Bubble.onMouseUpWrapper_=b.bindEventWithChecks_(document,"mouseup",this,b.Bubble.bubbleMouseUp_),b.Bubble.onMouseMoveWrapper_=b.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),b.hideChaff());e.stopPropagation()};b.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1;e=this.workspace_.moveDrag(e);this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y);this.workspace_.RTL&&this.positionBubble_()};b.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e};b.Bubble.prototype.promote_=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)};b.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e;this.rendered_&&this.positionBubble_()};b.Bubble.prototype.layoutBubble_=function(){(a=this.workspace_.getMetrics()).viewLeft/=this.workspace_.scale;a.viewWidth/=this.workspace_.scale;a.viewTop/=this.workspace_.scale;a.viewHeight/=this.workspace_.scale;var e=this.getOptimalRelativeLeft_(a),t=this.getOptimalRelativeTop_(a),n=this.shape_.getBBox(),o={x:e,y:-this.height_-b.BlockSvg.MIN_BLOCK_Y},i={x:-this.width_-30,y:t},t={x:n.width,y:t},r={x:e,y:n.height},e=n.width<n.height?t:r,n=n.width<n.height?r:t;t=this.getOverlap_(o,a);r=this.getOverlap_(i,a);var s=this.getOverlap_(e,a),a=this.getOverlap_(n,a);t==(a=Math.max(t,r,s,a))?(this.relativeLeft_=o.x,this.relativeTop_=o.y):r==a?(this.relativeLeft_=i.x,this.relativeTop_=i.y):s==a?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=n.x,this.relativeTop_=n.y)};b.Bubble.prototype.getOverlap_=function(e,t){var n=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;e=e.y+this.anchorXY_.y;return Math.max(0,Math.min(1,(Math.min(n+this.width_,t.viewLeft+t.viewWidth)-Math.max(n,t.viewLeft))*(Math.min(e+this.height_,t.viewTop+t.viewHeight)-Math.max(e,t.viewTop))/(this.width_*this.height_)))};b.Bubble.prototype.getOptimalRelativeLeft_=function(e){var t,n,o,i,r=-this.width_/4;if(this.width_>e.viewWidth)return r;this.workspace_.RTL?(n=(t=this.anchorXY_.x-r)-this.width_,o=e.viewLeft+e.viewWidth,i=e.viewLeft+b.Scrollbar.scrollbarThickness/this.workspace_.scale):(t=(n=r+this.anchorXY_.x)+this.width_,i=e.viewLeft,o=e.viewLeft+e.viewWidth-b.Scrollbar.scrollbarThickness/this.workspace_.scale);this.workspace_.RTL?n<i?r=-(i-this.anchorXY_.x+this.width_):o<t&&(r=-(o-this.anchorXY_.x)):n<i?r=i-this.anchorXY_.x:o<t&&(r=o-this.anchorXY_.x-this.width_);return r};b.Bubble.prototype.getOptimalRelativeTop_=function(e){var t=-this.height_/4;if(this.height_>e.viewHeight)return t;var n=this.anchorXY_.y+t,o=n+this.height_,i=e.viewTop;e=e.viewTop+e.viewHeight-b.Scrollbar.scrollbarThickness/this.workspace_.scale;var r=this.anchorXY_.y;n<i?t=i-r:e<o&&(t=e-r-this.height_);return t};b.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x,e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_;this.moveTo(e,this.relativeTop_+this.anchorXY_.y)};b.Bubble.prototype.moveTo=function(e,t){this.bubbleGroup_.setAttribute("transform","translate("+e+","+t+")")};b.Bubble.prototype.getBubbleSize=function(){return new b.utils.Size(this.width_,this.height_)};b.Bubble.prototype.setBubbleSize=function(e,t){var n=2*b.Bubble.BORDER_WIDTH;e=Math.max(e,45+n);t=Math.max(t,20+n);this.width_=e;this.height_=t;this.bubbleBack_.setAttribute("width",e);this.bubbleBack_.setAttribute("height",t);this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*b.Bubble.BORDER_WIDTH+","+(t-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-n)+","+(t-n)+")"));this.autoLayout_&&this.layoutBubble_();this.positionBubble_();this.renderArrow_();this.resizeCallback_&&this.resizeCallback_()};b.Bubble.prototype.renderArrow_=function(){var e=[],t=this.width_/2,n=this.height_/2,o=-this.relativeLeft_,i=-this.relativeTop_;if(t==o&&n==i)e.push("M "+t+","+n);else{i-=n;o-=t;this.workspace_.RTL&&(o*=-1);var r=Math.sqrt(i*i+o*o),s=Math.acos(o/r);i<0&&(s=2*Math.PI-s);(u=s+Math.PI/2)>2*Math.PI&&(u-=2*Math.PI);var a=Math.sin(u),l=Math.cos(u),c=this.getBubbleSize(),u=(c.width+c.height)/b.Bubble.ARROW_THICKNESS;u=Math.min(u,c.width,c.height)/4;o=t+(c=1-b.Bubble.ANCHOR_RADIUS/r)*o;i=n+c*i;c=t+u*l;var d=n+u*a;t-=u*l;n-=u*a;(a=s+this.arrow_radians_)>2*Math.PI&&(a-=2*Math.PI);s=Math.sin(a)*r/b.Bubble.ARROW_BEND;r=Math.cos(a)*r/b.Bubble.ARROW_BEND;e.push("M"+c+","+d);e.push("C"+(c+r)+","+(d+s)+" "+o+","+i+" "+o+","+i);e.push("C"+o+","+i+" "+(t+r)+","+(n+s)+" "+t+","+n)}e.push("z");this.bubbleArrow_.setAttribute("d",e.join(" "))};b.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e);this.bubbleArrow_.setAttribute("fill",e)};b.Bubble.prototype.dispose=function(){b.Bubble.unbindDragEvents_();b.utils.dom.removeNode(this.bubbleGroup_);this.shape_=this.content_=this.workspace_=this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null};b.Bubble.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y);this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x-this.anchorXY_.x;this.relativeTop_=t.y-this.anchorXY_.y;this.renderArrow_()};b.Bubble.prototype.getRelativeToSurfaceXY=function(){return new b.utils.Coordinate(this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)};b.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e};b.Events.CommentBase=function(e){this.commentId=e.id;this.workspaceId=e.workspace.id;this.group=b.Events.getGroup();this.recordUndo=b.Events.recordUndo};b.utils.object.inherits(b.Events.CommentBase,b.Events.Abstract);b.Events.CommentBase.prototype.toJson=function(){var e=b.Events.CommentBase.superClass_.toJson.call(this);this.commentId&&(e.commentId=this.commentId);return e};b.Events.CommentBase.prototype.fromJson=function(e){b.Events.CommentBase.superClass_.fromJson.call(this,e);this.commentId=e.commentId};b.Events.CommentChange=function(e,t,n){e&&(b.Events.CommentChange.superClass_.constructor.call(this,e),this.oldContents_=t,this.newContents_=n)};b.utils.object.inherits(b.Events.CommentChange,b.Events.CommentBase);b.Events.CommentChange.prototype.type=b.Events.COMMENT_CHANGE;b.Events.CommentChange.prototype.toJson=function(){var e=b.Events.CommentChange.superClass_.toJson.call(this);e.newContents=this.newContents_;return e};b.Events.CommentChange.prototype.fromJson=function(e){b.Events.CommentChange.superClass_.fromJson.call(this,e);this.newContents_=e.newValue};b.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_};b.Events.CommentChange.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);t?t.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)};b.Events.CommentCreate=function(e){e&&(b.Events.CommentCreate.superClass_.constructor.call(this,e),this.xml=e.toXmlWithXY())};b.utils.object.inherits(b.Events.CommentCreate,b.Events.CommentBase);b.Events.CommentCreate.prototype.type=b.Events.COMMENT_CREATE;b.Events.CommentCreate.prototype.toJson=function(){var e=b.Events.CommentCreate.superClass_.toJson.call(this);e.xml=b.Xml.domToText(this.xml);return e};b.Events.CommentCreate.prototype.fromJson=function(e){b.Events.CommentCreate.superClass_.fromJson.call(this,e);this.xml=b.Xml.textToDom(e.xml)};b.Events.CommentCreate.prototype.run=function(e){b.Events.CommentCreateDeleteHelper(this,e)};b.Events.CommentCreateDeleteHelper=function(e,t){var n=e.getEventWorkspace_();t?((t=b.utils.xml.createElement("xml")).appendChild(e.xml),b.Xml.domToWorkspace(t,n)):(n=n.getCommentById(e.commentId))?n.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)};b.Events.CommentDelete=function(e){e&&(b.Events.CommentDelete.superClass_.constructor.call(this,e),this.xml=e.toXmlWithXY())};b.utils.object.inherits(b.Events.CommentDelete,b.Events.CommentBase);b.Events.CommentDelete.prototype.type=b.Events.COMMENT_DELETE;b.Events.CommentDelete.prototype.toJson=function(){return b.Events.CommentDelete.superClass_.toJson.call(this)};b.Events.CommentDelete.prototype.fromJson=function(e){b.Events.CommentDelete.superClass_.fromJson.call(this,e)};b.Events.CommentDelete.prototype.run=function(e){b.Events.CommentCreateDeleteHelper(this,!e)};b.Events.CommentMove=function(e){e&&(b.Events.CommentMove.superClass_.constructor.call(this,e),this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)};b.utils.object.inherits(b.Events.CommentMove,b.Events.CommentBase);b.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY();this.comment_=null};b.Events.CommentMove.prototype.type=b.Events.COMMENT_MOVE;b.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e};b.Events.CommentMove.prototype.toJson=function(){var e=b.Events.CommentMove.superClass_.toJson.call(this);this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y));return e};b.Events.CommentMove.prototype.fromJson=function(e){b.Events.CommentMove.superClass_.fromJson.call(this,e);e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate_=new b.utils.Coordinate(Number(e[0]),Number(e[1])))};b.Events.CommentMove.prototype.isNull=function(){return b.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)};b.Events.CommentMove.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);if(t){e=e?this.newCoordinate_:this.oldCoordinate_;var n=t.getXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)};b.BubbleDragger=function(e,t){this.draggingBubble_=e;this.workspace_=t;this.deleteArea_=null;this.wouldDeleteBubble_=!1;this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY();this.dragSurface_=b.utils.is3dSupported()&&t.getBlockDragSurface()?t.getBlockDragSurface():null};b.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null};b.BubbleDragger.prototype.startBubbleDrag=function(){b.Events.getGroup()||b.Events.setGroup(!0);this.workspace_.setResizesEnabled(!1);this.draggingBubble_.setAutoLayout(!1);this.dragSurface_&&this.moveToDragSurface_();this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e){var t=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(t)}};b.BubbleDragger.prototype.dragBubble=function(e,t){t=this.pixelsToWorkspaceUnits_(t);t=b.utils.Coordinate.sum(this.startXY_,t);this.draggingBubble_.moveDuringDrag(this.dragSurface_,t);this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())};b.BubbleDragger.prototype.maybeDeleteBubble_=function(){var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):e&&e.close();return this.wouldDeleteBubble_};b.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=b.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==b.DELETE_AREA_TRASH&&e&&e.setOpen_(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setOpen_(!1))};b.BubbleDragger.prototype.endBubbleDrag=function(e,t){this.dragBubble(e,t);e=this.pixelsToWorkspaceUnits_(t);e=b.utils.Coordinate.sum(this.startXY_,e);this.draggingBubble_.moveTo(e.x,e.y);this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_());this.workspace_.setResizesEnabled(!0);this.workspace_.toolbox_&&(e=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",this.workspace_.toolbox_.removeStyle(e));b.Events.setGroup(!1)};b.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new b.Events.CommentMove(this.draggingBubble_);e.setOldCoordinate(this.startXY_);e.recordNew();b.Events.fire(e)}};b.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){e=new b.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale);this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale);return e};b.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0);this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y);this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())};b.WorkspaceDragger=function(e){this.workspace_=e;this.startScrollXY_=new b.utils.Coordinate(e.scrollX,e.scrollY)};b.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null};b.WorkspaceDragger.prototype.startDrag=function(){b.selected&&b.selected.unselect();this.workspace_.setupDragSurface()};b.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e);this.workspace_.resetDragSurface()};b.WorkspaceDragger.prototype.drag=function(e){e=b.utils.Coordinate.sum(this.startScrollXY_,e);this.workspace_.scroll(e.x,e.y)};b.FlyoutDragger=function(e){b.FlyoutDragger.superClass_.constructor.call(this,e.getWorkspace());this.scrollbar_=e.scrollbar_;this.horizontalLayout_=e.horizontalLayout_};b.utils.object.inherits(b.FlyoutDragger,b.WorkspaceDragger);b.FlyoutDragger.prototype.drag=function(e){e=b.utils.Coordinate.sum(this.startScrollXY_,e);this.horizontalLayout_?this.scrollbar_.set(-e.x):this.scrollbar_.set(-e.y)};b.Gesture=function(e,t){this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=this.currentDragDeltaXY_=this.mouseDownXY_=null;this.creatorWorkspace_=t;this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1;this.mostRecentEvent_=e;this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null;this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1;this.healStack_=!b.DRAG_STACK};b.Gesture.prototype.dispose=function(){b.Touch.clearTouchIdentifier();b.Tooltip.unblock();this.creatorWorkspace_.clearGesture();this.onMoveWrapper_&&b.unbindEvent_(this.onMoveWrapper_);this.onUpWrapper_&&b.unbindEvent_(this.onUpWrapper_);this.flyout_=this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=null;this.blockDragger_&&(this.blockDragger_.dispose(),this.blockDragger_=null);this.workspaceDragger_&&(this.workspaceDragger_.dispose(),this.workspaceDragger_=null);this.bubbleDragger_&&(this.bubbleDragger_.dispose(),this.bubbleDragger_=null)};b.Gesture.prototype.updateFromEvent_=function(e){var t=new b.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),b.longStop_());this.mostRecentEvent_=e};b.Gesture.prototype.updateDragDelta_=function(e){this.currentDragDeltaXY_=b.utils.Coordinate.difference(e,this.mouseDownXY_);return!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=b.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?b.FLYOUT_DRAG_RADIUS:b.DRAG_RADIUS))};b.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!!this.flyout_.isBlockCreatable_(this.targetBlock_)&&(!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),b.Events.getGroup()||b.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0))};b.Gesture.prototype.updateIsDraggingBubble_=function(){if(!this.startBubble_)return!1;this.isDraggingBubble_=!0;this.startDraggingBubble_();return!0};b.Gesture.prototype.updateIsDraggingBlock_=function(){if(!this.targetBlock_)return!1;this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0);return!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0)};b.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new b.FlyoutDragger(this.flyout_):new b.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())};b.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0;this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()};b.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new b.BlockDragger(this.targetBlock_,this.startWorkspace_);this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_);this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)};b.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new b.BubbleDragger(this.startBubble_,this.startWorkspace_);this.bubbleDragger_.startBubbleDrag();this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)};b.Gesture.prototype.doStart=function(e){b.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,b.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,b.hideChaff(!!this.flyout_),b.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&e.shiftKey?(b.navigation.enableKeyboardAccessibility(),this.creatorWorkspace_.getCursor().setCurNode(b.navigation.getTopNode(this.targetBlock_))):this.targetBlock_.select()),b.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||b.longStart_(e,this),this.mouseDownXY_=new b.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))};b.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=b.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this));this.onUpWrapper_=b.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this));e.preventDefault();e.stopPropagation()};b.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e);this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_);e.preventDefault();e.stopPropagation()};b.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e);b.longStop_();this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())};b.Gesture.prototype.cancel=function(){this.isEnding_||(b.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())};b.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),b.hideChaff(this.flyout_),this.targetBlock_.showContextMenu_(e)):this.startBubble_?this.startBubble_.showContextMenu_(e):this.startWorkspace_&&!this.flyout_&&(b.hideChaff(),this.startWorkspace_.showContextMenu_(e));e.preventDefault();e.stopPropagation();this.dispose()};b.Gesture.prototype.handleWsStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(t);this.mostRecentEvent_=e;this.doStart(e);b.keyboardAccessibilityMode&&b.navigation.setState(b.navigation.STATE_WS)};b.Gesture.prototype.handleFlyoutStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t);this.handleWsStart(e,t.getWorkspace())};b.Gesture.prototype.handleBlockStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t);this.mostRecentEvent_=e};b.Gesture.prototype.handleBubbleStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t);this.mostRecentEvent_=e};b.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus();this.startBubble_.select&&this.startBubble_.select()};b.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor_();this.bringBlockToFront_()};b.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(b.Events.getGroup()||b.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):b.Events.fire(new b.Events.Ui(this.startBlock_,"click",void 0,void 0));this.bringBlockToFront_();b.Events.setGroup(!1)};b.Gesture.prototype.doWorkspaceClick_=function(e){var t=this.creatorWorkspace_;e.shiftKey?(b.navigation.enableKeyboardAccessibility(),e=new b.utils.Coordinate(e.clientX,e.clientY),e=b.utils.screenToWsCoordinates(t,e),e=b.ASTNode.createWorkspaceNode(t,e),t.getCursor().setCurNode(e)):b.selected&&b.selected.unselect()};b.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()};b.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)};b.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)};b.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||((this.startBlock_=e).isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))};b.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()?this.setTargetBlock_(e.getParent()):this.targetBlock_=e};b.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)};b.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)};b.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_};b.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()};b.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)};b.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)};b.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_};b.Gesture.prototype.hasStarted=function(){return this.hasStarted_};b.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]};b.Gesture.inProgress=function(){for(var e,t=b.Workspace.getAll(),n=0;e=t[n];n++)if(e.currentGesture_)return!0;return!1};b.Field=function(e,t,n){this.tooltip_=this.validator_=this.value_=null;this.size_=new b.utils.Size(0,0);this.markerSvg_=this.cursorSvg_=null;n&&this.configure_(n);this.setValue(e);t&&this.setValidator(t)};b.Field.BORDER_RECT_DEFAULT_HEIGHT=16;b.Field.TEXT_DEFAULT_HEIGHT=12.5;b.Field.X_PADDING=10;b.Field.Y_PADDING=10;b.Field.DEFAULT_TEXT_OFFSET=b.Field.X_PADDING/2;b.Field.prototype.name=void 0;b.Field.prototype.disposed=!1;b.Field.prototype.maxDisplayLength=50;b.Field.prototype.sourceBlock_=null;b.Field.prototype.isDirty_=!0;b.Field.prototype.visible_=!0;b.Field.prototype.clickTarget_=null;b.Field.NBSP=" ";b.Field.prototype.EDITABLE=!0;b.Field.prototype.SERIALIZABLE=!1;b.Field.prototype.configure_=function(e){var t=e.tooltip;"string"==typeof t&&(t=b.utils.replaceMessageReferences(e.tooltip));t&&this.setTooltip(t)};b.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e};b.Field.prototype.getSourceBlock=function(){return this.sourceBlock_};b.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=b.utils.dom.createSvgElement("g",{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())};b.Field.prototype.initView=function(){this.createBorderRect_();this.createTextElement_()};b.Field.prototype.initModel=function(){};b.Field.prototype.createBorderRect_=function(){this.size_.height=Math.max(this.size_.height,b.Field.BORDER_RECT_DEFAULT_HEIGHT);this.size_.width=Math.max(this.size_.width,b.Field.X_PADDING);this.borderRect_=b.utils.dom.createSvgElement("rect",{rx:4,ry:4,x:0,y:0,height:this.size_.height,width:this.size_.width},this.fieldGroup_)};b.Field.prototype.createTextElement_=function(){this.textElement_=b.utils.dom.createSvgElement("text",{class:"blocklyText",y:b.Field.TEXT_DEFAULT_HEIGHT,x:this.borderRect_?b.Field.DEFAULT_TEXT_OFFSET:0},this.fieldGroup_);this.textContent_=document.createTextNode("");this.textElement_.appendChild(this.textContent_)};b.Field.prototype.bindEvents_=function(){b.Tooltip.bindMouseEvents(this.getClickTarget_());this.mouseDownWrapper_=b.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)};b.Field.prototype.fromXml=function(e){this.setValue(e.textContent)};b.Field.prototype.toXml=function(e){e.textContent=this.getValue();return e};b.Field.prototype.dispose=function(){b.DropDownDiv.hideIfOwner(this);b.WidgetDiv.hideIfOwner(this);this.mouseDownWrapper_&&b.unbindEvent_(this.mouseDownWrapper_);b.utils.dom.removeNode(this.fieldGroup_);this.disposed=!0};b.Field.prototype.updateEditable=function(){var e=this.getClickTarget_();this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(b.utils.dom.addClass(e,"blocklyEditableText"),b.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(b.utils.dom.addClass(e,"blocklyNonEditableText"),b.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))};b.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_};b.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()};b.Field.prototype.isSerializable=function(){var e=!1;this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0));return e};b.Field.prototype.isVisible=function(){return this.visible_};b.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var t=this.getSvgRoot();t&&(t.style.display=e?"block":"none")}};b.Field.prototype.setValidator=function(e){this.validator_=e};b.Field.prototype.getValidator=function(){return this.validator_};b.Field.prototype.classValidator=function(e){return e};b.Field.prototype.callValidator=function(e){var t=this.classValidator(e);if(null===t)return null;void 0!==t&&(e=t);if(t=this.getValidator()){if(null===(t=t.call(this,e)))return null;void 0!==t&&(e=t)}return e};b.Field.prototype.getSvgRoot=function(){return this.fieldGroup_};b.Field.prototype.updateColour=function(){};b.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_(),this.updateSize_())};b.Field.prototype.updateWidth=function(){console.warn("Deprecated call to updateWidth, call Blockly.Field.updateSize_ to force an update to the size of the field, or Blockly.utils.dom.getTextWidth() to check the size of the field.");this.updateSize_()};b.Field.prototype.updateSize_=function(){var e=b.utils.dom.getTextWidth(this.textElement_);this.borderRect_&&(e+=b.Field.X_PADDING,this.borderRect_.setAttribute("width",e));this.size_.width=e};b.Field.prototype.getSize=function(){if(!this.isVisible())return new b.utils.Size(0,0);this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_());return this.size_};b.Field.prototype.getScaledBBox_=function(){var e=(t=this.borderRect_.getBBox()).height*this.sourceBlock_.workspace.scale,t=t.width*this.sourceBlock_.workspace.scale,n=this.getAbsoluteXY_();return{top:n.y,bottom:n.y+e,left:n.x,right:n.x+t}};b.Field.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return b.Field.NBSP;e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+"…");e=e.replace(/\s/g,b.Field.NBSP);this.sourceBlock_&&this.sourceBlock_.RTL&&(e+="‏");return e};b.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())};b.Field.prototype.setText=function(e){throw Error("setText method is deprecated")};b.Field.prototype.markDirty=function(){this.isDirty_=!0};b.Field.prototype.forceRerender=function(){this.isDirty_=!0;this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())};b.Field.prototype.setValue=function(e){if(null!==e){var t=this.doClassValidation_(e);(e=this.processValidation_(e,t))instanceof Error||(t=this.getValidator())&&(t=t.call(this,e),(e=this.processValidation_(e,t))instanceof Error)||(t=this.getValue())!==e&&(this.sourceBlock_&&b.Events.isEnabled()&&b.Events.fire(new b.Events.BlockChange(this.sourceBlock_,"field",this.name||null,t,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}};b.Field.prototype.processValidation_=function(e,t){if(null===t)return this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error();void 0!==t&&(e=t);return e};b.Field.prototype.getValue=function(){return this.value_};b.Field.prototype.doClassValidation_=function(e){return null==e?null:e=this.classValidator(e)};b.Field.prototype.doValueUpdate_=function(e){this.value_=e;this.isDirty_=!0};b.Field.prototype.doValueInvalid_=function(e){};b.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)};b.Field.prototype.setTooltip=function(e){var t=this.getClickTarget_();t?t.tooltip=e||""===e?e:this.sourceBlock_:this.tooltip_=e};b.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()};b.Field.prototype.getAbsoluteXY_=function(){return b.utils.style.getPageOffset(this.borderRect_)};b.Field.prototype.referencesVariables=function(){return!1};b.Field.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,o=0;o<t.inputList.length;o++)for(var i=n[o],r=i.fieldRow,s=0;s<r.length;s++)if(r[s]===this){e=i;break}return e};b.Field.prototype.getFlipRtl=function(){return!1};b.Field.prototype.isTabNavigable=function(){return!1};b.Field.prototype.onBlocklyAction=function(e){return!1};b.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null};b.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null};b.fieldRegistry={};b.fieldRegistry.typeMap_={};b.fieldRegistry.register=function(e,t){if("string"!=typeof e||""==e.trim())throw Error('Invalid field type "'+e+'". The type must be a non-empty string.');if(b.fieldRegistry.typeMap_[e])throw Error('Error: Field "'+e+'" is already registered.');if(!t||"function"!=typeof t.fromJson)throw Error('Field "'+t+'" must have a fromJson function');e=e.toLowerCase();b.fieldRegistry.typeMap_[e]=t};b.fieldRegistry.unregister=function(e){b.fieldRegistry.typeMap_[e]?delete b.fieldRegistry.typeMap_[e]:console.warn('No field mapping for type "'+e+'" found to unregister')};b.fieldRegistry.fromJson=function(e){var t=e.type.toLowerCase();return(t=b.fieldRegistry.typeMap_[t])?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)};b.FieldLabel=function(e,t,n){(this.class_=null)==e&&(e="");b.FieldLabel.superClass_.constructor.call(this,e,null,n);n||(this.class_=t||null);this.size_=new b.utils.Size(0,b.Field.TEXT_DEFAULT_HEIGHT)};b.utils.object.inherits(b.FieldLabel,b.Field);b.FieldLabel.fromJson=function(e){var t=b.utils.replaceMessageReferences(e.text);return new b.FieldLabel(t,void 0,e)};b.FieldLabel.prototype.EDITABLE=!1;b.FieldLabel.prototype.configure_=function(e){b.FieldLabel.superClass_.configure_.call(this,e);this.class_=e.class};b.FieldLabel.prototype.initView=function(){this.createTextElement_();this.textElement_.setAttribute("y",this.size_.height);this.class_&&b.utils.dom.addClass(this.textElement_,this.class_)};b.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)};b.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&b.utils.dom.removeClass(this.textElement_,this.class_),e&&b.utils.dom.addClass(this.textElement_,e));this.class_=e};b.fieldRegistry.register("field_label",b.FieldLabel);b.Input=function(e,t,n,o){if(e!=b.DUMMY_INPUT&&!t)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e;this.name=t;this.sourceBlock_=n;this.connection=o;this.fieldRow=[]};b.Input.prototype.align=b.ALIGN_LEFT;b.Input.prototype.visible_=!0;b.Input.prototype.getSourceBlock=function(){return this.sourceBlock_};b.Input.prototype.appendField=function(e,t){this.insertFieldAt(this.fieldRow.length,e,t);return this};b.Input.prototype.insertFieldAt=function(e,t,n){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");if(!(t||""==t&&n))return e;"string"==typeof t&&(t=new b.FieldLabel(t));t.setSourceBlock(this.sourceBlock_);this.sourceBlock_.rendered&&t.init();t.name=n;t.prefixField&&(e=this.insertFieldAt(e,t.prefixField));this.fieldRow.splice(e,0,t);++e;t.suffixField&&(e=this.insertFieldAt(e,t.suffixField));this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours());return e};b.Input.prototype.removeField=function(e){for(var t,n=0;t=this.fieldRow[n];n++)if(t.name===e){t.dispose();this.fieldRow.splice(n,1);this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours());return}throw Error('Field "%s" not found.',e)};b.Input.prototype.isVisible=function(){return this.visible_};b.Input.prototype.setVisible=function(e){var t=[];if(this.visible_==e)return t;for(var n,o=(this.visible_=e)?"block":"none",i=0;n=this.fieldRow[i];i++)n.setVisible(e);this.connection&&(e?t=this.connection.unhideAll():this.connection.hideAll(),i=this.connection.targetBlock())&&(i.getSvgRoot().style.display=o,e||(i.rendered=!1));return t};b.Input.prototype.markDirty=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.markDirty()};b.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");this.connection.setCheck(e);return this};b.Input.prototype.setAlign=function(e){this.align=e;this.sourceBlock_.rendered&&this.sourceBlock_.render();return this};b.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init()};b.Input.prototype.dispose=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose();this.sourceBlock_=null};b.utils.colour={};b.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var t=b.utils.colour.names[e];if(t)return t;t="#"==e[0]?e:"#"+e;if(/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&e<256&&0<=t&&t<256&&0<=n&&n<256)?b.utils.colour.rgbToHex(e,t,n):null};b.utils.colour.rgbToHex=function(e,t,n){t=e<<16|t<<8|n;return e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)};b.utils.colour.hexToRgb=function(e){return[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]};b.utils.colour.hsvToHex=function(e,t,n){var o=0,i=0,r=0;if(0==t)r=i=o=n;else{var s=Math.floor(e/60),a=e/60-s;e=n*(1-t);var l=n*(1-t*a);t=n*(1-t*(1-a));switch(s){case 1:o=l;i=n;r=e;break;case 2:o=e;i=n;r=t;break;case 3:o=e;i=l;r=n;break;case 4:o=t;i=e;r=n;break;case 5:o=n;i=e;r=l;break;case 6:case 0:o=n,i=t,r=e}}return b.utils.colour.rgbToHex(Math.floor(o),Math.floor(i),Math.floor(r))};b.utils.colour.blend=function(e,t,n){e=b.utils.colour.hexToRgb(b.utils.colour.parse(e));t=b.utils.colour.hexToRgb(b.utils.colour.parse(t));return b.utils.colour.rgbToHex(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2])))};b.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};b.Block=function(e,t,n){if(b.Generator&&void 0!==b.Generator.prototype[t])throw Error('Block prototypeName "'+t+'" conflicts with Blockly.Generator members.');this.id=n&&!e.getBlockById(n)?n:b.utils.genUid();(e.blockDB_[this.id]=this).previousConnection=this.nextConnection=this.outputConnection=null;this.inputList=[];this.inputsInline=void 0;this.disabled=!1;this.tooltip="";this.contextMenu=!0;this.parentBlock_=null;this.childBlocks_=[];this.editable_=this.movable_=this.deletable_=!0;this.collapsed_=this.isShadow_=!1;this.comment=null;this.commentModel={text:null,pinned:!1,size:new b.utils.Size(160,80)};this.xy_=new b.utils.Coordinate(0,0);this.workspace=e;this.isInFlyout=e.isFlyout;this.isInMutator=e.isMutator;this.RTL=e.RTL;this.isInsertionMarker_=!1;this.hat=void 0;if(t){this.type=t;if(!(n=b.Blocks[t])||"object"!=typeof n)throw TypeError("Unknown block type: "+t);b.utils.object.mixin(this,n)}e.addTopBlock(this);e.addTypedBlock(this);"function"==typeof this.init&&this.init();this.inputsInlineDefault=this.inputsInline;if(b.Events.isEnabled()){(e=b.Events.getGroup())||b.Events.setGroup(!0);try{b.Events.fire(new b.Events.BlockCreate(this))}finally{e||b.Events.setGroup(!1)}}"function"==typeof this.onchange&&this.setOnChange(this.onchange)};b.Block.prototype.data=null;b.Block.prototype.disposed=!1;b.Block.prototype.hue_=null;b.Block.prototype.colour_="#000000";b.Block.prototype.colourSecondary_=null;b.Block.prototype.colourTertiary_=null;b.Block.prototype.styleName_=null;b.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_);b.keyboardAccessibilityMode&&b.navigation.moveCursorOnBlockDelete(this);this.unplug(e);b.Events.isEnabled()&&b.Events.fire(new b.Events.BlockDelete(this));b.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),delete this.workspace.blockDB_[this.id],this.workspace=null);b.selected==this&&(b.selected=null);for(var t,n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(;t=this.inputList[n];n++)t.dispose();this.inputList.length=0;for(var o,i=this.getConnections_(!0),n=0;o=i[n];n++)o.dispose()}finally{b.Events.enable(),this.disposed=!0}}};b.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.initModel&&n.initModel()};b.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)};b.Block.prototype.unplugFromRow_=function(e){var t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect());t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&(((e=e.targetConnection).disconnect(),e.checkType_(t))?t.connect(e):e.onFailedConnect(t))};b.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;if(n&&n.type==b.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e};b.Block.prototype.unplugFromStack_=function(e){var t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();e&&n&&!n.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),t&&t.checkType_(e)&&t.connect(e))};b.Block.prototype.getConnections_=function(e){e=[];this.outputConnection&&e.push(this.outputConnection);this.previousConnection&&e.push(this.previousConnection);this.nextConnection&&e.push(this.nextConnection);for(var t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e};b.Block.prototype.lastConnectionInStack=function(){for(var e=this.nextConnection;e;){var t=e.targetBlock();if(!t)return e;e=t.nextConnection}return null};b.Block.prototype.bumpNeighbours=function(){console.warn("Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.")};b.Block.prototype.getParent=function(){return this.parentBlock_};b.Block.prototype.getInputWithBlock=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()==e)return t;return null};b.Block.prototype.getSurroundParent=function(){var e=this;do{var t=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==t);return e};b.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()};b.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()};b.Block.prototype.getFirstStatementConnection=function(){for(var e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type==b.NEXT_STATEMENT)return e.connection;return null};b.Block.prototype.getRootBlock=function(){var e=this;do{var t=e,e=t.parentBlock_}while(e);return t};b.Block.prototype.getTopStackBlock=function(){var e=this;do{var t=e.getPreviousBlock()}while(t&&t.getNextBlock()==e&&(e=t));return e};b.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var t,n=0;t=this.inputList[n];n++)t.connection&&(t=t.connection.targetBlock())&&e.push(t);(n=this.getNextBlock())&&e.push(n);return e};b.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){b.utils.arrayRemove(this.parentBlock_.childBlocks_,this);if(this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}};b.Block.prototype.getDescendants=function(e){for(var t,n=[this],o=this.getChildren(e),i=0;t=o[i];i++)n.push.apply(n,t.getDescendants(e));return n};b.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)};b.Block.prototype.setDeletable=function(e){this.deletable_=e};b.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)};b.Block.prototype.setMovable=function(e){this.movable_=e};b.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(b.utils.getBlockTypeCounts(this,!0))};b.Block.prototype.isShadow=function(){return this.isShadow_};b.Block.prototype.setShadow=function(e){this.isShadow_=e};b.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_};b.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_=e};b.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)};b.Block.prototype.setEditable=function(e){this.editable_=e;e=0;for(var t;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.updateEditable()};b.Block.prototype.getMatchingConnection=function(e,t){var n=this.getConnections_(!0);e=e.getConnections_(!0);if(n.length!=e.length)throw Error("Connection lists did not match in length.");for(var o=0;o<e.length;o++)if(e[o]==t)return n[o];return null};b.Block.prototype.setHelpUrl=function(e){this.helpUrl=e};b.Block.prototype.setTooltip=function(e){this.tooltip=e};b.Block.prototype.getColour=function(){return this.colour_};b.Block.prototype.getColourSecondary=function(){return this.colourSecondary_};b.Block.prototype.getColourTertiary=function(){return this.colourTertiary_};b.Block.prototype.getColourShadow=function(){var e=this.getColourSecondary();return e||b.utils.colour.blend("#fff",this.getColour(),.6)};b.Block.prototype.getColourBorder=function(){var e=this.getColourTertiary();if(e)return{colourBorder:e,colourLight:null,colourDark:null};e=this.getColour();return{colourBorder:null,colourLight:b.utils.colour.blend("#fff",e,.3),colourDark:b.utils.colour.blend("#000",e,.2)}};b.Block.prototype.getStyleName=function(){return this.styleName_};b.Block.prototype.getHue=function(){return this.hue_};b.Block.prototype.setColour=function(e){var t="string"==typeof e?b.utils.replaceMessageReferences(e):e,n=Number(t);if(!isNaN(n)&&0<=n&&n<=360)this.hue_=n,this.colour_=b.hueToHex(n);else{if(!(n=b.utils.colour.parse(t)))throw n='Invalid colour: "'+t+'"',e!=t&&(n+=' (from "'+e+'")'),Error(n);this.colour_=n,this.hue_=null}};b.Block.prototype.setStyle=function(e){var t=this.workspace.getTheme().getBlockStyle(e);this.styleName_=e;if(!t)throw Error("Invalid style name: "+e);this.colourSecondary_=t.colourSecondary,this.colourTertiary_=t.colourTertiary,this.hat=t.hat,this.setColour(t.colourPrimary)};b.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_);(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))};b.Block.prototype.getField=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,i=0;o=t.fieldRow[i];i++)if(o.name==e)return o;return null};b.Block.prototype.getVars=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,i=0;o=e.fieldRow[i];i++)o.referencesVariables()&&t.push(o.getValue());return t};b.Block.prototype.getVarModels=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,i=0;o=e.fieldRow[i];i++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&t.push(o);return t};b.Block.prototype.updateVarName=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,i=0;o=t.fieldRow[i];i++)o.referencesVariables()&&e.getId()==o.getValue()&&o.refreshVariableName()};b.Block.prototype.renameVarById=function(e,t){for(var n,o=0;n=this.inputList[o];o++)for(var i,r=0;i=n.fieldRow[r];r++)i.referencesVariables()&&e==i.getValue()&&i.setValue(t)};b.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null};b.Block.prototype.setFieldValue=function(e,t){var n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)};b.Block.prototype.setPreviousStatement=function(e,t){if(e){void 0===t&&(t=null);if(!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(b.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(t)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose();this.previousConnection=null}};b.Block.prototype.setNextStatement=function(e,t){if(e)void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(b.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose();this.nextConnection=null}};b.Block.prototype.setOutput=function(e,t){if(e){void 0===t&&(t=null);if(!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(b.OUTPUT_VALUE)}this.outputConnection.setCheck(t)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose();this.outputConnection=null}};b.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(b.Events.fire(new b.Events.BlockChange(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)};b.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==b.DUMMY_INPUT&&this.inputList[e].type==b.DUMMY_INPUT)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==b.INPUT_VALUE&&this.inputList[e].type==b.DUMMY_INPUT)return!0;return!1};b.Block.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.Block.prototype.setDisabled, use Blockly.Block.prototype.setEnabled instead.");this.setEnabled(!e)};b.Block.prototype.isEnabled=function(){return!this.disabled};b.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(b.Events.fire(new b.Events.BlockChange(this,"disabled",null,this.disabled,!e)),this.disabled=!e)};b.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1};b.Block.prototype.isCollapsed=function(){return this.collapsed_};b.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(b.Events.fire(new b.Events.BlockChange(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)};b.Block.prototype.toString=function(e,t){var n=[],o=t||"?";if(this.collapsed_)n.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].getText());else for(var i,r=0;i=this.inputList[r];r++){for(var s,a=0;s=i.fieldRow[a];a++)n.push(s.getText());i.connection&&((i=i.connection.targetBlock())?n.push(i.toString(void 0,t)):n.push(o))}n=n.join(" ").trim()||"???";e&&n.length>e&&(n=n.substring(0,e-3)+"...");return n};b.Block.prototype.appendValueInput=function(e){return this.appendInput_(b.INPUT_VALUE,e)};b.Block.prototype.appendStatementInput=function(e){return this.appendInput_(b.NEXT_STATEMENT,e)};b.Block.prototype.appendDummyInput=function(e){return this.appendInput_(b.DUMMY_INPUT,e||"")};b.Block.prototype.jsonInit=function(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null);if(e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n]),n++;void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline);void 0!==e.output&&this.setOutput(!0,e.output);void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement);void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement);void 0!==e.tooltip&&(n=e.tooltip,n=b.utils.replaceMessageReferences(n),this.setTooltip(n));void 0!==e.enableContextMenu&&(n=e.enableContextMenu,this.contextMenu=!!n);void 0!==e.helpUrl&&(n=e.helpUrl,n=b.utils.replaceMessageReferences(n),this.setHelpUrl(n));"string"==typeof e.extensions&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]);void 0!==e.mutator&&b.Extensions.apply(e.mutator,this,!0);if(Array.isArray(e.extensions))for(e=e.extensions,t=0;t<e.length;++t)b.Extensions.apply(e[t],this,!1)};b.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(e){console.warn(n+"Illegal colour value: ",t)}}};b.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(e){console.warn(n+"Style does not exist: ",t)}};b.Block.prototype.mixin=function(e,t){if(void 0!==t&&"boolean"!=typeof t)throw Error("opt_disableCheck must be a boolean if provided");if(!t){t=[];for(var n in e)void 0!==this[n]&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}b.utils.object.mixin(this,e)};b.Block.prototype.interpolate_=function(e,t,n){var o=b.utils.tokenizeInterpolation(e),i=[],r=0;e=[];for(var s=0;s<o.length;s++){var a=o[s];if("number"==typeof a){if(a<=0||a>t.length)throw Error('Block "'+this.type+'": Message index %'+a+" out of range.");if(i[a])throw Error('Block "'+this.type+'": Message index %'+a+" duplicated.");i[a]=!0;r++;e.push(t[a-1])}else(a=a.trim())&&e.push(a)}if(r!=t.length)throw Error('Block "'+this.type+'": Message does not reference all '+t.length+" arg(s).");e.length&&("string"==typeof e[e.length-1]||b.utils.string.startsWith(e[e.length-1].type,"field_"))&&(s={type:"input_dummy"},n&&(s.align=n),e.push(s));n={LEFT:b.ALIGN_LEFT,RIGHT:b.ALIGN_RIGHT,CENTRE:b.ALIGN_CENTRE};t=[];for(s=0;s<e.length;s++)if("string"==typeof(i=e[s]))t.push([i,void 0]);else{o=r=null;do{if(a=!1,"string"==typeof i)r=new b.FieldLabel(i);else switch(i.type){case"input_value":o=this.appendValueInput(i.name);break;case"input_statement":o=this.appendStatementInput(i.name);break;case"input_dummy":o=this.appendDummyInput(i.name);break;default:!(r=b.fieldRegistry.fromJson(i))&&i.alt&&(i=i.alt,a=!0)}}while(a);if(r)t.push([r,i.name]);else if(o){i.check&&o.setCheck(i.check);i.align&&o.setAlign(n[i.align]);for(i=0;i<t.length;i++)o.appendField(t[i][0],t[i][1]);t.length=0}}};b.Block.prototype.appendInput_=function(e,t){var n=null;e!=b.INPUT_VALUE&&e!=b.NEXT_STATEMENT||(n=this.makeConnection_(e));e=new b.Input(e,t,this,n);this.inputList.push(e);return e};b.Block.prototype.moveInputBefore=function(e,t){if(e!=t){for(var n,o=-1,i=t?-1:this.inputList.length,r=0;n=this.inputList[r];r++)if(n.name==e){if(o=r,-1!=i)break}else if(t&&n.name==t&&(i=r,-1!=o))break;if(-1==o)throw Error('Named input "'+e+'" not found.');if(-1==i)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(o,i)}};b.Block.prototype.moveNumberedInputBefore=function(e,t){if(e==t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");var n=this.inputList[e];this.inputList.splice(e,1);e<t&&t--;this.inputList.splice(t,0,n)};b.Block.prototype.removeInput=function(e,t){for(var n,o=0;n=this.inputList[o];o++)if(n.name==e){n.dispose();this.inputList.splice(o,1);return}if(!t)throw Error("Input not found: "+e)};b.Block.prototype.getInput=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.name==e)return t;return null};b.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()};b.Block.prototype.getCommentText=function(){return this.commentModel.text};b.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(b.Events.fire(new b.Events.BlockChange(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)};b.Block.prototype.setWarningText=function(e,t){};b.Block.prototype.setMutator=function(e){};b.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_};b.Block.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n=new b.Events.BlockMove(this);this.xy_.translate(e,t);n.recordNew();b.Events.fire(n)};b.Block.prototype.makeConnection_=function(e){return new b.Connection(this,e)};b.Block.prototype.allInputsFilled=function(e){void 0===e&&(e=!0);if(!e&&this.isShadow())return!1;for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&(!(t=t.connection.targetBlock())||!t.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)};b.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";this.id&&(e+=' (id="'+this.id+'")');return e};b.blockRendering={};b.blockRendering.IPathObject=function(e){};b.blockRendering.PathObject=function(e){this.svgRoot=e;this.svgPath=b.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot);this.svgPathLight=b.utils.dom.createSvgElement("path",{class:"blocklyPathLight"},this.svgRoot);this.svgPathDark=b.utils.dom.createSvgElement("path",{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot)};b.blockRendering.PathObject.prototype.setPaths=function(e){this.svgPath.setAttribute("d",e);this.svgPathLight.style.display="none";this.svgPathDark.style.display="none"};b.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")};b.utils.aria={};b.utils.aria.ARIA_PREFIX_="aria-";b.utils.aria.ROLE_ATTRIBUTE_="role";b.utils.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",MENUITEMRADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TABLE:"table",TABLIST:"tablist",TABPANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};b.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};b.utils.aria.setRole=function(e,t){t?e.setAttribute(b.utils.aria.ROLE_ATTRIBUTE_,t):b.utils.aria.removeRole(e)};b.utils.aria.getRole=function(e){return e.getAttribute(b.utils.aria.ROLE_ATTRIBUTE_)||null};b.utils.aria.removeRole=function(e){e.removeAttribute(b.utils.aria.ROLE_ATTRIBUTE_)};b.utils.aria.setState=function(e,t,n){Array.isArray(n)&&(n=n.join(" "));t=b.utils.aria.getAriaAttributeName_(t);e.setAttribute(t,n)};b.utils.aria.getAriaAttributeName_=function(e){return b.utils.aria.ARIA_PREFIX_+e};b.Menu=function(){b.Component.call(this);this.highlightedIndex_=-1};b.utils.object.inherits(b.Menu,b.Component);b.Menu.prototype.createDom=function(){var e=document.createElement("div");e.id=this.getId();this.setElementInternal(e);e.className="goog-menu goog-menu-vertical blocklyNonSelectable";e.tabIndex=0;b.utils.aria.setRole(e,this.roleName_||b.utils.aria.Role.MENU)};b.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus(),b.utils.dom.addClass(e,"focused"))};b.Menu.prototype.blur=function(){var e=this.getElement();e&&(e.blur(),b.utils.dom.removeClass(e,"focused"))};b.Menu.prototype.setRole=function(e){this.roleName_=e};b.Menu.prototype.enterDocument=function(){b.Menu.superClass_.enterDocument.call(this);this.forEachChild(function(e){e.isInDocument()&&this.registerChildId_(e)},this);this.attachEvents_()};b.Menu.prototype.exitDocument=function(){this.setHighlightedIndex(-1);b.Menu.superClass_.exitDocument.call(this)};b.Menu.prototype.disposeInternal=function(){b.Menu.superClass_.disposeInternal.call(this);this.detachEvents_()};b.Menu.prototype.attachEvents_=function(){var e=this.getElement();this.mouseOverHandler_=b.bindEventWithChecks_(e,"mouseover",this,this.handleMouseOver_,!0);this.clickHandler_=b.bindEventWithChecks_(e,"click",this,this.handleClick_,!0);this.mouseEnterHandler_=b.bindEventWithChecks_(e,"mouseenter",this,this.handleMouseEnter_,!0);this.mouseLeaveHandler_=b.bindEventWithChecks_(e,"mouseleave",this,this.handleMouseLeave_,!0);this.onKeyDownWrapper_=b.bindEventWithChecks_(e,"keydown",this,this.handleKeyEvent)};b.Menu.prototype.detachEvents_=function(){b.unbindEvent_(this.mouseOverHandler_);b.unbindEvent_(this.clickHandler_);b.unbindEvent_(this.mouseEnterHandler_);b.unbindEvent_(this.mouseLeaveHandler_);b.unbindEvent_(this.onKeyDownWrapper_)};b.Menu.prototype.childElementIdMap_=null;b.Menu.prototype.registerChildId_=function(e){var t=(t=e.getElement()).id||(t.id=e.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[t]=e};b.Menu.prototype.getMenuItem=function(e){if(this.childElementIdMap_)for(var t=this.getElement();e&&e!==t;){var n=e.id;if(n in this.childElementIdMap_)return this.childElementIdMap_[n];e=e.parentNode}return null};b.Menu.prototype.unhighlightCurrent=function(){var e=this.getHighlighted();e&&e.setHighlighted(!1)};b.Menu.prototype.clearHighlighted=function(){this.unhighlightCurrent();this.setHighlightedIndex(-1)};b.Menu.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};b.Menu.prototype.setHighlightedIndex=function(e){var t=this.getChildAt(e);t?(t.setHighlighted(!0),this.highlightedIndex_=e):-1<this.highlightedIndex_&&(this.getHighlighted().setHighlighted(!1),this.highlightedIndex_=-1);t&&b.utils.style.scrollIntoContainerView(t.getElement(),this.getElement())};b.Menu.prototype.setHighlighted=function(e){this.setHighlightedIndex(this.indexOfChild(e))};b.Menu.prototype.highlightNext=function(){this.unhighlightCurrent();this.highlightHelper(function(e,t){return(e+1)%t},this.highlightedIndex_)};b.Menu.prototype.highlightPrevious=function(){this.unhighlightCurrent();this.highlightHelper(function(e,t){return--e<0?t-1:e},this.highlightedIndex_)};b.Menu.prototype.highlightHelper=function(e,t){t=t<0?-1:t;var n=this.getChildCount();t=e.call(this,t,n);for(var o=0;o<=n;){var i=this.getChildAt(t);if(i&&this.canHighlightItem(i))return this.setHighlightedIndex(t),!0;o++;t=e.call(this,t,n)}return!1};b.Menu.prototype.canHighlightItem=function(e){return e.isEnabled()};b.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem(e.target))&&e.isEnabled()&&this.getHighlighted()!==e&&(this.unhighlightCurrent(),this.setHighlighted(e))};b.Menu.prototype.handleClick_=function(e){var t=this.getMenuItem(e.target);t&&t.handleClick(e)&&e.preventDefault()};b.Menu.prototype.handleMouseEnter_=function(e){this.focus()};b.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur(),this.clearHighlighted())};b.Menu.prototype.handleKeyEvent=function(e){return!(0==this.getChildCount()||!this.handleKeyEventInternal(e))&&(e.preventDefault(),e.stopPropagation(),!0)};b.Menu.prototype.handleKeyEventInternal=function(e){var t=this.getHighlighted();if(t&&"function"==typeof t.handleKeyEvent&&t.handleKeyEvent(e))return!0;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)return!1;switch(e.keyCode){case b.utils.KeyCodes.ENTER:t&&t.performActionInternal(e);break;case b.utils.KeyCodes.UP:this.highlightPrevious();break;case b.utils.KeyCodes.DOWN:this.highlightNext();break;default:return!1}return!0};b.MenuItem=function(e,t){b.Component.call(this);this.setContentInternal(e);this.setValue(t);this.enabled_=!0};b.utils.object.inherits(b.MenuItem,b.Component);b.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=this.getId();this.setElementInternal(e);e.className="goog-menuitem goog-option "+(this.enabled_?"":"goog-menuitem-disabled ")+(this.checked_?"goog-option-selected ":"")+(this.isRightToLeft()?"goog-menuitem-rtl ":"");var t=this.getContentWrapperDom();e.appendChild(t);var n=this.getCheckboxDom();n&&t.appendChild(n);t.appendChild(this.getContentDom());b.utils.aria.setRole(e,this.roleName_||(this.checkable_?b.utils.aria.Role.MENUITEMCHECKBOX:b.utils.aria.Role.MENUITEM));b.utils.aria.setState(e,b.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1)};b.MenuItem.prototype.getCheckboxDom=function(){if(!this.checkable_)return null;var e=document.createElement("div");e.className="goog-menuitem-checkbox";return e};b.MenuItem.prototype.getContentDom=function(){var e=this.content_;"string"==typeof e&&(e=document.createTextNode(e));return e};b.MenuItem.prototype.getContentWrapperDom=function(){var e=document.createElement("div");e.className="goog-menuitem-content";return e};b.MenuItem.prototype.setContentInternal=function(e){this.content_=e};b.MenuItem.prototype.setValue=function(e){this.value_=e};b.MenuItem.prototype.getValue=function(){return this.value_};b.MenuItem.prototype.setRole=function(e){this.roleName_=e};b.MenuItem.prototype.setCheckable=function(e){this.checkable_=e};b.MenuItem.prototype.setChecked=function(e){if(this.checkable_){this.checked_=e;var t=this.getElement();t&&this.isEnabled()&&(e?(b.utils.dom.addClass(t,"goog-option-selected"),b.utils.aria.setState(t,b.utils.aria.State.SELECTED,!0)):(b.utils.dom.removeClass(t,"goog-option-selected"),b.utils.aria.setState(t,b.utils.aria.State.SELECTED,!1)))}};b.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var t=this.getElement();t&&this.isEnabled()&&(e?b.utils.dom.addClass(t,"goog-menuitem-highlight"):b.utils.dom.removeClass(t,"goog-menuitem-highlight"))};b.MenuItem.prototype.isEnabled=function(){return this.enabled_};b.MenuItem.prototype.setEnabled=function(e){this.enabled_=e;(e=this.getElement())&&(this.enabled_?b.utils.dom.removeClass(e,"goog-menuitem-disabled"):b.utils.dom.addClass(e,"goog-menuitem-disabled"))};b.MenuItem.prototype.handleClick=function(e){this.isEnabled()&&(this.setHighlighted(!0),this.performActionInternal())};b.MenuItem.prototype.performActionInternal=function(){this.checkable_&&this.setChecked(!this.checked_);this.actionHandler_&&this.actionHandler_.call(this.actionHandlerObj_,this)};b.MenuItem.prototype.onAction=function(e,t){this.actionHandler_=e;this.actionHandlerObj_=t};b.utils.uiMenu={};b.utils.uiMenu.getSize=function(e){e=e.getElement();var t=b.utils.style.getSize(e);t.height=e.scrollHeight;return t};b.utils.uiMenu.adjustBBoxesForRTL=function(e,t,n){t.left+=n.width;t.right+=n.width;e.left+=n.width;e.right+=n.width};b.ContextMenu={};b.ContextMenu.currentBlock=null;b.ContextMenu.eventWrapper_=null;b.ContextMenu.show=function(e,t,n){b.WidgetDiv.show(b.ContextMenu,n,null);if(t.length){var o=b.ContextMenu.populate_(t,n);b.ContextMenu.position_(o,e,n);setTimeout(function(){o.getElement().focus()},1);b.ContextMenu.currentBlock=null}else b.ContextMenu.hide()};b.ContextMenu.populate_=function(e,t){var n=new b.Menu;n.setRightToLeft(t);for(var o,i=0;o=e[i];i++){var r=new b.MenuItem(o.text);r.setRightToLeft(t);n.addChild(r,!0);r.setEnabled(o.enabled);o.enabled&&r.onAction(function(){b.ContextMenu.hide();this.callback()},o)}return n};b.ContextMenu.position_=function(e,t,n){var o=b.utils.getViewportBBox();t={top:t.clientY+o.top,bottom:t.clientY+o.top,left:t.clientX+o.left,right:t.clientX+o.left};b.ContextMenu.createWidget_(e);var i=b.utils.uiMenu.getSize(e);n&&b.utils.uiMenu.adjustBBoxesForRTL(o,t,i);b.WidgetDiv.positionWithAnchor(o,t,i,n);e.getElement().focus()};b.ContextMenu.createWidget_=function(e){e.render(b.WidgetDiv.DIV);var t=e.getElement();b.utils.dom.addClass(t,"blocklyContextMenu");b.bindEventWithChecks_(t,"contextmenu",null,b.utils.noEvent);e.focus()};b.ContextMenu.hide=function(){b.WidgetDiv.hideIfOwner(b.ContextMenu);b.ContextMenu.currentBlock=null;b.ContextMenu.eventWrapper_&&b.unbindEvent_(b.ContextMenu.eventWrapper_)};b.ContextMenu.callbackFactory=function(n,o){return function(){b.Events.disable();try{var e=b.Xml.domToBlock(o,n.workspace),t=n.getRelativeToSurfaceXY();t.x=n.RTL?t.x-b.SNAP_RADIUS:t.x+b.SNAP_RADIUS;t.y+=2*b.SNAP_RADIUS;e.moveBy(t.x,t.y)}finally{b.Events.enable()}b.Events.isEnabled()&&!e.isShadow()&&b.Events.fire(new b.Events.BlockCreate(e));e.select()}};b.ContextMenu.blockDeleteOption=function(e){var t=e.getDescendants(!1).length,n=e.getNextBlock();n&&(t-=n.getDescendants(!1).length);return{text:1==t?b.Msg.DELETE_BLOCK:b.Msg.DELETE_X_BLOCKS.replace("%1",String(t)),enabled:!0,callback:function(){b.Events.setGroup(!0);e.dispose(!0,!0);b.Events.setGroup(!1)}}};b.ContextMenu.blockHelpOption=function(e){return{enabled:!("function"==typeof e.helpUrl?!e.helpUrl():!e.helpUrl),text:b.Msg.HELP,callback:function(){e.showHelp_()}}};b.ContextMenu.blockDuplicateOption=function(e){var t=e.isDuplicatable();return{text:b.Msg.DUPLICATE_BLOCK,enabled:t,callback:function(){b.duplicate_(e)}}};b.ContextMenu.blockCommentOption=function(e){var t={enabled:!b.utils.userAgent.IE};e.comment?(t.text=b.Msg.REMOVE_COMMENT,t.callback=function(){e.setCommentText(null)}):(t.text=b.Msg.ADD_COMMENT,t.callback=function(){e.setCommentText("")});return t};b.ContextMenu.commentDeleteOption=function(e){return{text:b.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){b.Events.setGroup(!0);e.dispose(!0,!0);b.Events.setGroup(!1)}}};b.ContextMenu.commentDuplicateOption=function(e){return{text:b.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){b.duplicate_(e)}}};b.ContextMenu.workspaceCommentOption=function(o,i){if(!b.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var e={enabled:!b.utils.userAgent.IE};e.text=b.Msg.ADD_COMMENT;e.callback=function(){var e=new b.WorkspaceCommentSvg(o,b.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,b.WorkspaceCommentSvg.DEFAULT_SIZE,b.WorkspaceCommentSvg.DEFAULT_SIZE),t=o.getInjectionDiv().getBoundingClientRect(),t=new b.utils.Coordinate(i.clientX-t.left,i.clientY-t.top),n=o.getOriginOffsetInPixels();(t=b.utils.Coordinate.difference(t,n)).scale(1/o.scale);e.moveBy(t.x,t.y);o.rendered&&(e.initSvg(),e.render(),e.select())};return e};b.RenderedConnection=function(e,t){b.RenderedConnection.superClass_.constructor.call(this,e,t);this.db_=e.workspace.connectionDBList[t];this.dbOpposite_=e.workspace.connectionDBList[b.OPPOSITE_TYPE[t]];this.offsetInBlock_=new b.utils.Coordinate(0,0);this.inDB_=!1;this.hidden_=!this.db_};b.utils.object.inherits(b.RenderedConnection,b.Connection);b.RenderedConnection.prototype.dispose=function(){b.RenderedConnection.superClass_.dispose.call(this);this.inDB_&&this.db_.removeConnection_(this)};b.RenderedConnection.prototype.distanceFrom=function(e){var t=this.x_-e.x_;e=this.y_-e.y_;return Math.sqrt(t*t+e*e)};b.RenderedConnection.prototype.bumpAwayFrom_=function(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var n=!1;if(!t.isMovable()){if(!(t=e.getSourceBlock().getRootBlock()).isMovable())return;e=this;n=!0}var o=b.selected==t;o||t.addSelect();var i=e.x_+b.SNAP_RADIUS+Math.floor(Math.random()*b.BUMP_RANDOMNESS)-this.x_,r=e.y_+b.SNAP_RADIUS+Math.floor(Math.random()*b.BUMP_RANDOMNESS)-this.y_;n&&(r=-r);t.RTL&&(i=e.x_-b.SNAP_RADIUS-Math.floor(Math.random()*b.BUMP_RANDOMNESS)-this.x_);t.moveBy(i,r);o||t.removeSelect()}}};b.RenderedConnection.prototype.moveTo=function(e,t){this.inDB_&&this.db_.removeConnection_(this);this.x_=e;this.y_=t;this.hidden_||this.db_.addConnection(this)};b.RenderedConnection.prototype.moveBy=function(e,t){this.moveTo(this.x_+e,this.y_+t)};b.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)};b.RenderedConnection.prototype.setOffsetInBlock=function(e,t){this.offsetInBlock_.x=e;this.offsetInBlock_.y=t};b.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_};b.RenderedConnection.prototype.tighten_=function(){var e=this.targetConnection.x_-this.x_,t=this.targetConnection.y_-this.y_;if(0!=e||0!=t){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");o=b.utils.getRelativeXY(o);n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-t)+")");n.moveConnections_(-e,-t)}};b.RenderedConnection.prototype.closest=function(e,t){return this.dbOpposite_.searchForClosest(this,e,t)};b.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),e=this.type==b.INPUT_VALUE||this.type==b.OUTPUT_VALUE?b.utils.svgPaths.moveBy(0,-5)+b.utils.svgPaths.lineOnAxis("v",5)+e.PUZZLE_TAB.pathDown+b.utils.svgPaths.lineOnAxis("v",5):b.utils.svgPaths.moveBy(-5,0)+b.utils.svgPaths.lineOnAxis("h",5)+e.NOTCH.pathLeft+b.utils.svgPaths.lineOnAxis("h",5),t=this.sourceBlock_.getRelativeToSurfaceXY();b.Connection.highlightedPath_=b.utils.dom.createSvgElement("path",{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x_-t.x)+","+(this.y_-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())};b.RenderedConnection.prototype.unhideAll=function(){this.setHidden(!1);var e=[];if(this.type!=b.INPUT_VALUE&&this.type!=b.NEXT_STATEMENT)return e;var t=this.targetBlock();if(t){if(t.isCollapsed()){var n=[];t.outputConnection&&n.push(t.outputConnection);t.nextConnection&&n.push(t.nextConnection);t.previousConnection&&n.push(t.previousConnection)}else n=t.getConnections_(!0);for(var o=0;o<n.length;o++)e.push.apply(e,n[o].unhideAll());e.length||(e[0]=t)}return e};b.RenderedConnection.prototype.unhighlight=function(){b.utils.dom.removeNode(b.Connection.highlightedPath_);delete b.Connection.highlightedPath_};b.RenderedConnection.prototype.setHidden=function(e){(this.hidden_=e)&&this.inDB_?this.db_.removeConnection_(this):e||this.inDB_||this.db_.addConnection(this)};b.RenderedConnection.prototype.hideAll=function(){this.setHidden(!0);if(this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),t=0;t<e.length;t++){for(var n=e[t],o=n.getConnections_(!0),i=0;i<o.length;i++)o[i].setHidden(!0);n=n.getIcons();for(i=0;i<n.length;i++)n[i].setVisible(!1)}};b.RenderedConnection.prototype.isConnectionAllowed=function(e,t){return!(this.distanceFrom(e)>t)&&b.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)};b.RenderedConnection.prototype.onFailedConnect=function(e){this.bumpAwayFrom_(e)};b.RenderedConnection.prototype.disconnectInternal_=function(e,t){b.RenderedConnection.superClass_.disconnectInternal_.call(this,e,t);e.rendered&&e.render();t.rendered&&(t.updateDisabled(),t.render())};b.RenderedConnection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&b.Events.recordUndo){b.RenderedConnection.superClass_.respawnShadow_.call(this);if(!(t=this.targetBlock()))throw Error("Couldn't respawn the shadow block that should exist here.");t.initSvg();t.render(!1);e.rendered&&e.render()}};b.RenderedConnection.prototype.neighbours_=function(e){return this.dbOpposite_.getNeighbours(this,e)};b.RenderedConnection.prototype.connect_=function(e){b.RenderedConnection.superClass_.connect_.call(this,e);var t=this.getSourceBlock();e=e.getSourceBlock();t.rendered&&t.updateDisabled();e.rendered&&e.updateDisabled();t.rendered&&e.rendered&&(this.type==b.NEXT_STATEMENT||this.type==b.PREVIOUS_STATEMENT?e:t).render()};b.RenderedConnection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())};b.utils.Rect=function(e,t,n,o){this.top=e;this.bottom=t;this.left=n;this.right=o};b.utils.Rect.prototype.contains=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom};b.Icon=function(e){this.block_=e};b.Icon.prototype.collapseHidden=!0;b.Icon.prototype.SIZE=17;b.Icon.prototype.bubble_=null;b.Icon.prototype.iconXY_=null;b.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&b.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),b.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())};b.Icon.prototype.dispose=function(){b.utils.dom.removeNode(this.iconGroup_);this.iconGroup_=null;this.setVisible(!1);this.block_=null};b.Icon.prototype.updateEditable=function(){};b.Icon.prototype.isVisible=function(){return!!this.bubble_};b.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||b.utils.isRightButton(e)||this.setVisible(!this.isVisible())};b.Icon.prototype.updateColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.getColour())};b.Icon.prototype.setIconLocation=function(e){this.iconXY_=e;this.isVisible()&&this.bubble_.setAnchorLocation(e)};b.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),t=b.utils.getRelativeXY(this.iconGroup_),e=new b.utils.Coordinate(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2);b.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)};b.Icon.prototype.getIconLocation=function(){return this.iconXY_};b.Icon.prototype.getCorrectedSize=function(){return new b.utils.Size(b.Icon.prototype.SIZE,b.Icon.prototype.SIZE-2)};b.Warning=function(e){b.Warning.superClass_.constructor.call(this,e);this.createIcon();this.text_={}};b.utils.object.inherits(b.Warning,b.Icon);b.Warning.prototype.collapseHidden=!1;b.Warning.prototype.drawIcon_=function(e){b.utils.dom.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e);b.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e);b.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)};b.Warning.textToDom_=function(e){var t=b.utils.dom.createSvgElement("text",{class:"blocklyText blocklyBubbleText",y:b.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var n=0;n<e.length;n++){var o=b.utils.dom.createSvgElement("tspan",{dy:"1em",x:b.Bubble.BORDER_WIDTH},t),i=document.createTextNode(e[n]);o.appendChild(i)}return t};b.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(b.Events.fire(new b.Events.Ui(this.block_,"warningOpen",!e,e)),e?this.createBubble():this.disposeBubble())};b.Warning.prototype.createBubble=function(){this.paragraphElement_=b.Warning.textToDom_(this.getText());this.bubble_=new b.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.svgPath_,this.iconXY_,null,null);this.bubble_.setSvgId(this.block_.id);if(this.block_.RTL)for(var e,t=this.paragraphElement_.getBBox().width,n=0;e=this.paragraphElement_.childNodes[n];n++)e.setAttribute("text-anchor","end"),e.setAttribute("x",t+b.Bubble.BORDER_WIDTH);this.updateColour()};b.Warning.prototype.disposeBubble=function(){this.bubble_.dispose();this.paragraphElement_=this.body_=this.bubble_=null};b.Warning.prototype.bodyFocus_=function(e){this.bubble_.promote_()};b.Warning.prototype.setText=function(e,t){this.text_[t]!=e&&(e?this.text_[t]=e:delete this.text_[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))};b.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")};b.Warning.prototype.dispose=function(){this.block_.warning=null;b.Icon.prototype.dispose.call(this)};b.BlockSvg=function(e,t,n){this.svgGroup_=b.utils.dom.createSvgElement("g",{},null);this.svgGroup_.translate_="";this.pathObject=e.getRenderer().makePathObject(this.svgGroup_);this.svgPathDark_=this.pathObject.svgPathDark||null;this.svgPath_=this.pathObject.svgPath||null;this.svgPathLight_=this.pathObject.svgPathLight||null;(this.svgPath_.tooltip=this).rendered=!1;this.useDragSurface_=b.utils.is3dSupported()&&!!e.blockDragSurface_;b.Tooltip.bindMouseEvents(this.svgPath_);b.BlockSvg.superClass_.constructor.call(this,e,t,n);this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id);this.markerSvg_=this.cursorSvg_=null};b.utils.object.inherits(b.BlockSvg,b.Block);b.BlockSvg.prototype.height=0;b.BlockSvg.prototype.width=0;b.BlockSvg.prototype.dragStartXY_=null;b.BlockSvg.prototype.warningTextDb_=null;b.BlockSvg.INLINE=-1;b.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";b.BlockSvg.SEP_SPACE_Y=10;b.BlockSvg.MIN_BLOCK_Y=25;b.BlockSvg.TAB_WIDTH=8;b.BlockSvg.START_HAT=!1;b.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,t=0;e=this.inputList[t];t++)e.init();e=this.getIcons();for(t=0;t<e.length;t++)e[t].createIcon();this.updateColour();this.updateMovable();this.workspace.options.readOnly||this.eventsInit_||b.bindEventWithChecks_(this.getSvgRoot(),"mousedown",this,this.onMouseDown_);this.eventsInit_=!0;this.getSvgRoot().parentNode||this.workspace.getCanvas().appendChild(this.getSvgRoot())};b.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(b.selected!=this){var e=null;if(b.selected){e=b.selected.id;b.Events.disable();try{b.selected.unselect()}finally{b.Events.enable()}}(e=new b.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id;b.Events.fire(e);(b.selected=this).addSelect()}};b.BlockSvg.prototype.unselect=function(){if(b.selected==this){var e=new b.Events.Ui(null,"selected",this.id,null);e.workspaceId=this.workspace.id;b.Events.fire(e);b.selected=null;this.removeSelect()}};b.BlockSvg.prototype.mutator=null;b.BlockSvg.prototype.comment=null;b.BlockSvg.prototype.commentIcon_=null;b.BlockSvg.prototype.warning=null;b.BlockSvg.prototype.getIcons=function(){var e=[];this.mutator&&e.push(this.mutator);this.commentIcon_&&e.push(this.commentIcon_);this.warning&&e.push(this.warning);return e};b.BlockSvg.prototype.setParent=function(e){var t=this.parentBlock_;if(e!=t){b.utils.dom.startTextWidthCache();b.BlockSvg.superClass_.setParent.call(this,e);b.utils.dom.stopTextWidthCache();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(n),e=this.getRelativeToSurfaceXY(),this.moveConnections_(e.x-o.x,e.y-o.y)):t&&(this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y))}}};b.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var i=b.utils.getRelativeXY(o)}while(e+=i.x,t+=i.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(e+=(i=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,t+=i.y),(o=o.parentNode)&&o!=this.workspace.getCanvas()&&o!=n);return new b.utils.Coordinate(e,t)};b.BlockSvg.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n,o=b.Events.isEnabled();o&&(n=new b.Events.BlockMove(this));var i=this.getRelativeToSurfaceXY();this.translate(i.x+e,i.y+t);this.moveConnections_(e,t);o&&(n.recordNew(),b.Events.fire(n));this.workspace.resizeContents()};b.BlockSvg.prototype.translate=function(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")};b.BlockSvg.prototype.moveToDragSurface_=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_();this.workspace.blockDragSurface_.translateSurface(e.x,e.y);this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}};b.BlockSvg.prototype.moveTo=function(e){var t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)};b.BlockSvg.prototype.moveOffDragSurface_=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))};b.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.blockDragSurface_.translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))};b.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")};b.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout)if((n=this.workspace.getGrid())&&n.shouldSnap()){var e=(o=n.getSpacing())/2,t=this.getRelativeToSurfaceXY(),n=Math.round((t.x-e)/o)*o+e-t.x,o=Math.round((t.y-e)/o)*o+e-t.y;n=Math.round(n);o=Math.round(o);0==n&&0==o||this.moveBy(n,o)}};b.BlockSvg.prototype.getBoundingRectangle=function(){var e,t=this.getRelativeToSurfaceXY(this),n=this.outputConnection?b.BlockSvg.TAB_WIDTH:0,o=this.getHeightWidth(),i=t.y,r=t.y+o.height;t=this.RTL?(e=t.x-(o.width-n),t.x+n):(e=t.x-n,t.x+o.width-n);return new b.utils.Rect(i,r,e,t)};b.BlockSvg.prototype.markDirty=function(){for(var e,t=0;e=this.inputList[t];t++)e.markDirty()};b.BlockSvg.prototype.setCollapsed=function(e){if(this.collapsed_!=e){for(var t,n,o=[],i=0;t=this.inputList[i];i++)o.push.apply(o,t.setVisible(!e));if(e){t=this.getIcons();for(i=0;i<t.length;i++)t[i].setVisible(!1);i=this.toString(b.COLLAPSE_CHARS);this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(i).init();t=this.getDescendants(!0);(i=this.getNextBlock())&&(i=t.indexOf(i),t.splice(i,t.length-i));i=1;for(;n=t[i];i++)if(n.warning){this.setWarningText(b.Msg.COLLAPSED_WARNINGS_WARNING,b.BlockSvg.COLLAPSED_WARNING_ID);break}}else this.removeInput("_TEMP_COLLAPSED_INPUT"),this.warning&&(this.warning.setText("",b.BlockSvg.COLLAPSED_WARNING_ID),Object.keys(this.warning.text_).length||this.setWarningText(null));b.BlockSvg.superClass_.setCollapsed.call(this,e);o.length||(o[0]=this);if(this.rendered)for(i=0;n=o[i];i++)n.render()}};b.BlockSvg.prototype.tab=function(e,t){var n=this.createTabList_();-1==(e=n.indexOf(e))&&(e=t?-1:n.length);(n=n[t?e+1:e-1])?n instanceof b.Field?n.showEditor_():n.tab(null,t):(n=this.getParent())&&n.tab(this,t)};b.BlockSvg.prototype.createTabList_=function(){for(var e,t=[],n=0;e=this.inputList[n];n++){for(var o,i=0;o=e.fieldRow[i];i++)o.isTabNavigable()&&o.isVisible()&&t.push(o);e.connection&&(e=e.connection.targetBlock())&&t.push(e)}return t};b.BlockSvg.prototype.onMouseDown_=function(e){if(!(e instanceof MouseEvent&&1===e.button)){var t=this.workspace&&this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)}};b.BlockSvg.prototype.showHelp_=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&window.open(e)};b.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=this,e=[];if(!this.isInFlyout){this.isDeletable()&&this.isMovable()&&e.push(b.ContextMenu.blockDuplicateOption(t));this.workspace.options.comments&&!this.collapsed_&&this.isEditable()&&e.push(b.ContextMenu.blockCommentOption(t));if(this.isMovable())if(this.collapsed_)this.workspace.options.collapse&&((n={enabled:!0}).text=b.Msg.EXPAND_BLOCK,n.callback=function(){t.setCollapsed(!1)},e.push(n));else{for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type!=b.NEXT_STATEMENT&&this.inputList[n].type!=b.NEXT_STATEMENT){n={enabled:!0};var o=this.getInputsInline();n.text=o?b.Msg.EXTERNAL_INPUTS:b.Msg.INLINE_INPUTS;n.callback=function(){t.setInputsInline(!o)};e.push(n);break}this.workspace.options.collapse&&((n={enabled:!0}).text=b.Msg.COLLAPSE_BLOCK,n.callback=function(){t.setCollapsed(!0)},e.push(n))}this.workspace.options.disable&&this.isEditable()&&(n={text:this.isEnabled()?b.Msg.DISABLE_BLOCK:b.Msg.ENABLE_BLOCK,enabled:!this.getInheritedDisabled(),callback:function(){var e=b.Events.getGroup();e||b.Events.setGroup(!0);t.setEnabled(!t.isEnabled());e||b.Events.setGroup(!1)}},e.push(n));this.isDeletable()&&e.push(b.ContextMenu.blockDeleteOption(t))}e.push(b.ContextMenu.blockHelpOption(t));null!==this.configureContextMenu&&this.configureContextMenu(e);this.customContextMenu&&this.customContextMenu(e);return e};b.BlockSvg.prototype.configureContextMenu=null;b.BlockSvg.prototype.showContextMenu_=function(e){var t=this.generateContextMenu();t&&t.length&&(b.ContextMenu.show(e,t,this.RTL),b.ContextMenu.currentBlock=this)};b.BlockSvg.prototype.moveConnections_=function(e,t){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(e,t);n=this.getIcons();for(o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections_(e,t)}};b.BlockSvg.prototype.setDragging=function(e){if(e){var t=this.getSvgRoot();t.translate_="";t.skew_="";b.draggingConnections_=b.draggingConnections_.concat(this.getConnections_(!0));b.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else b.draggingConnections_=[],b.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)};b.BlockSvg.prototype.updateMovable=function(){this.isMovable()?b.utils.dom.addClass(this.svgGroup_,"blocklyDraggable"):b.utils.dom.removeClass(this.svgGroup_,"blocklyDraggable")};b.BlockSvg.prototype.setMovable=function(e){b.BlockSvg.superClass_.setMovable.call(this,e);this.updateMovable()};b.BlockSvg.prototype.setEditable=function(e){b.BlockSvg.superClass_.setEditable.call(this,e);e=this.getIcons();for(var t=0;t<e.length;t++)e[t].updateEditable()};b.BlockSvg.prototype.setShadow=function(e){b.BlockSvg.superClass_.setShadow.call(this,e);this.updateColour()};b.BlockSvg.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(b.INSERTION_MARKER_COLOUR),b.utils.dom.addClass(this.svgGroup_,"blocklyInsertionMarker"))};b.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_};b.BlockSvg.prototype.dispose=function(e,t){if(this.workspace){b.Tooltip.hide();b.utils.dom.startTextWidthCache();var n=this.workspace;b.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture());b.ContextMenu.currentBlock==this&&b.ContextMenu.hide();b.keyboardAccessibilityMode&&b.navigation.moveCursorOnBlockDelete(this);t&&this.rendered&&(this.unplug(e),b.blockAnimations.disposeUiEffect(this));this.rendered=!1;if(this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}t=this.getIcons();for(o=0;o<t.length;o++)t[o].dispose();b.BlockSvg.superClass_.dispose.call(this,e);b.utils.dom.removeNode(this.svgGroup_);n.resizeContents();this.svgPathDark_=this.svgPathLight_=this.svgPath_=this.svgGroup_=null;b.utils.dom.stopTextWidthCache()}};b.BlockSvg.prototype.updateColour=function(){if(this.isEnabled()){this.isShadow()?this.setShadowColour_():(this.setBorderColour_(),this.svgPath_.setAttribute("fill",this.getColour()));for(var e=this.getIcons(),t=0;t<e.length;t++)e[t].updateColour();for(e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.updateColour()}};b.BlockSvg.prototype.setBorderColour_=function(){var e=this.getColourBorder();e.colourBorder?(this.svgPathLight_.style.display="none",this.svgPathDark_.style.display="none",this.svgPath_.setAttribute("stroke",e.colourBorder)):(this.svgPathLight_.style.display="",this.svgPathDark_.style.display="",this.svgPath_.setAttribute("stroke","none"),this.svgPathLight_.setAttribute("stroke",e.colourLight),this.svgPathDark_.setAttribute("fill",e.colourDark))};b.BlockSvg.prototype.setShadowColour_=function(){var e=this.getColourShadow();this.svgPathLight_.style.display="none";this.svgPathDark_.setAttribute("fill",e);this.svgPath_.setAttribute("stroke","none");this.svgPath_.setAttribute("fill",e);return e};b.BlockSvg.prototype.updateDisabled=function(){!this.isEnabled()||this.getInheritedDisabled()?b.utils.dom.addClass(this.svgGroup_,"blocklyDisabled")&&this.svgPath_.setAttribute("fill","url(#"+this.workspace.options.disabledPatternId+")"):b.utils.dom.removeClass(this.svgGroup_,"blocklyDisabled")&&this.updateColour();for(var e,t=this.getChildren(!1),n=0;e=t[n];n++)e.updateDisabled()};b.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_};b.BlockSvg.prototype.setCommentText=function(e){if(!b.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(b.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new b.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))};b.BlockSvg.prototype.setWarningText=function(e,t){this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=t||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var i=this;this.warningTextDb_[n]=setTimeout(function(){i.workspace&&(delete i.warningTextDb_[n],i.setWarningText(e,n))},100)}else{this.isInFlyout&&(e=null);t=this.getSurroundParent();for(o=null;t;)t.isCollapsed()&&(o=t),t=t.getSurroundParent();o&&o.setWarningText(b.Msg.COLLAPSED_WARNINGS_WARNING,b.BlockSvg.COLLAPSED_WARNING_ID);t=!1;"string"==typeof e?(this.warning||(this.warning=new b.Warning(this),t=!0),this.warning.setText(e,n)):this.warning&&!n?(this.warning.dispose(),t=!0):this.warning&&(t=this.warning.getText(),this.warning.setText("",n),(o=this.warning.getText())||this.warning.dispose(),t=t!=o);t&&this.rendered&&(this.render(),this.bumpNeighbours())}};b.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose();e&&((e.block_=this).mutator=e).createIcon()};b.BlockSvg.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.BlockSvg.prototype.setDisabled, use Blockly.BlockSvg.prototype.setEnabled instead.");this.setEnabled(!e)};b.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(b.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&this.updateDisabled())};b.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&(e?(this.svgPath_.setAttribute("filter","url(#"+this.workspace.options.embossFilterId+")"),this.svgPathLight_.style.display="none"):(this.svgPath_.setAttribute("filter","none"),this.svgPathLight_.style.display="inline"))};b.BlockSvg.prototype.addSelect=function(){b.utils.dom.addClass(this.svgGroup_,"blocklySelected")};b.BlockSvg.prototype.removeSelect=function(){b.utils.dom.removeClass(this.svgGroup_,"blocklySelected")};b.BlockSvg.prototype.setDeleteStyle=function(e){e?b.utils.dom.addClass(this.svgGroup_,"blocklyDraggingDelete"):b.utils.dom.removeClass(this.svgGroup_,"blocklyDraggingDelete")};b.BlockSvg.prototype.setColour=function(e){b.BlockSvg.superClass_.setColour.call(this,e);this.rendered&&this.updateColour()};b.BlockSvg.prototype.bringToFrontCb=null;b.BlockSvg.prototype.bringToFront=function(){var e=this;do{var t=e.getSvgRoot()}while(t.parentNode.appendChild(t),e=e.getParent());null!==this.bringToFrontCb&&this.bringToFrontCb()};b.BlockSvg.prototype.setPreviousStatement=function(e,t){b.BlockSvg.superClass_.setPreviousStatement.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.setNextStatement=function(e,t){b.BlockSvg.superClass_.setNextStatement.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.setOutput=function(e,t){b.BlockSvg.superClass_.setOutput.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.setInputsInline=function(e){b.BlockSvg.superClass_.setInputsInline.call(this,e);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.removeInput=function(e,t){b.BlockSvg.superClass_.removeInput.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.moveNumberedInputBefore=function(e,t){b.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours())};b.BlockSvg.prototype.appendInput_=function(e,t){e=b.BlockSvg.superClass_.appendInput_.call(this,e,t);this.rendered&&(this.render(),this.bumpNeighbours());return e};b.BlockSvg.prototype.setConnectionsHidden=function(e){if(!e&&this.isCollapsed()){if(this.outputConnection&&this.outputConnection.setHidden(e),this.previousConnection&&this.previousConnection.setHidden(e),this.nextConnection){this.nextConnection.setHidden(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionsHidden(e)}}else for(var n=this.getConnections_(!0),o=0;t=n[o];o++)t.setHidden(e),t.isSuperior()&&(t=t.targetBlock())&&t.setConnectionsHidden(e)};b.BlockSvg.prototype.getConnections_=function(e){var t,n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)){e=0;for(;t=this.inputList[e];e++)t.connection&&n.push(t.connection)}return n};b.BlockSvg.prototype.makeConnection_=function(e){return new b.RenderedConnection(this,e)};b.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var t,n=this.getConnections_(!1),o=0;t=n[o];o++){t.isConnected()&&t.isSuperior()&&t.targetBlock().bumpNeighbours();for(var i,r=t.neighbours_(b.SNAP_RADIUS),s=0;i=r[s];s++)t.isConnected()&&i.isConnected()||i.getSourceBlock().getRootBlock()!=e&&(t.isSuperior()?i.bumpAwayFrom_(t):t.bumpAwayFrom_(i))}}};b.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,t=b.Events.getGroup();setTimeout(function(){b.Events.setGroup(t);e.snapToGrid();b.Events.setGroup(!1)},b.BUMP_DELAY/2);setTimeout(function(){b.Events.setGroup(t);e.bumpNeighbours();b.Events.setGroup(!1)},b.BUMP_DELAY)};b.BlockSvg.prototype.positionNearConnection=function(e,t){e.type!=b.NEXT_STATEMENT&&e.type!=b.INPUT_VALUE||this.moveBy(t.x_-e.x_,t.y_-e.y_)};b.BlockSvg.prototype.render=function(e){b.utils.dom.startTextWidthCache();this.rendered=!0;this.workspace.getRenderer().render(this);this.updateConnectionLocations_();!1!==e&&((e=this.getParent())?e.render(!0):this.workspace.resizeContents());b.utils.dom.stopTextWidthCache()};b.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e);this.outputConnection&&this.outputConnection.moveToOffset(e);for(var t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected()&&n.tighten_())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten_())};b.BlockSvg.prototype.setCursorSvg=function(e){e?(this.svgGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null};b.BlockSvg.prototype.setMarkerSvg=function(e){e?(this.cursorSvg_?this.svgGroup_.insertBefore(e,this.cursorSvg_):this.svgGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null};b.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,t=this.width,n=this.getNextBlock();n&&(e+=(n=n.getHeightWidth()).height-4,t=Math.max(t,n.width));return{height:e,width:t}};b.BlockSvg.prototype.positionNewBlock=function(e,t,n){t.type!=b.NEXT_STATEMENT&&t.type!=b.INPUT_VALUE||e.moveBy(n.x_-t.x_,n.y_-t.y_)};b.BlockSvg.prototype.highlightForReplacement=function(e){e?b.utils.dom.addClass(this.svgGroup_,"blocklyReplaceable"):b.utils.dom.removeClass(this.svgGroup_,"blocklyReplaceable")};b.blockRendering.rendererMap_={};b.blockRendering.useDebugger=!1;b.blockRendering.register=function(e,t){if(b.blockRendering.rendererMap_[e])throw Error("Renderer has already been registered.");b.blockRendering.rendererMap_[e]=t};b.blockRendering.unregister=function(e){b.blockRendering.rendererMap_[e]?delete b.blockRendering.rendererMap_[e]:console.warn('No renderer mapping for name "'+e+'" found to unregister')};b.blockRendering.startDebugger=function(){b.blockRendering.useDebugger=!0};b.blockRendering.stopDebugger=function(){b.blockRendering.useDebugger=!1};b.blockRendering.init=function(e){if(!b.blockRendering.rendererMap_[e])throw Error("Renderer not registered: ",e);var t=function(){t.superClass_.constructor.call(this)};b.utils.object.inherits(t,b.blockRendering.rendererMap_[e]);(e=new t).init();return e};b.ConnectionDB=function(){this.connections_=[]};b.ConnectionDB.prototype.addConnection=function(e){if(e.inDB_)throw Error("Connection already in database.");if(!e.getSourceBlock().isInFlyout){var t=this.findPositionForConnection_(e);this.connections_.splice(t,0,e);e.inDB_=!0}};b.ConnectionDB.prototype.findConnection=function(e){if(!this.connections_.length)return-1;var t=this.findPositionForConnection_(e);if(t>=this.connections_.length)return-1;for(var n=e.y_,o=t;0<=o&&this.connections_[o].y_==n;){if(this.connections_[o]==e)return o;o--}for(;t<this.connections_.length&&this.connections_[t].y_==n;){if(this.connections_[t]==e)return t;t++}return-1};b.ConnectionDB.prototype.findPositionForConnection_=function(e){if(!this.connections_.length)return 0;for(var t=0,n=this.connections_.length;t<n;){var o=Math.floor((t+n)/2);if(this.connections_[o].y_<e.y_)t=o+1;else{if(!(this.connections_[o].y_>e.y_)){t=o;break}n=o}}return t};b.ConnectionDB.prototype.removeConnection_=function(e){if(!e.inDB_)throw Error("Connection not in database.");var t=this.findConnection(e);if(-1==t)throw Error("Unable to find connection in connectionDB.");e.inDB_=!1;this.connections_.splice(t,1)};b.ConnectionDB.prototype.getNeighbours=function(e,o){function t(e){var t=r-i[e].x_,n=s-i[e].y_;Math.sqrt(t*t+n*n)<=o&&a.push(i[e]);return n<o}var i=this.connections_,r=e.x_,s=e.y_;e=0;for(var n=l=i.length-2;e<n;)i[n].y_<s?e=n:l=n,n=Math.floor((e+l)/2);var a=[],l=e=n;if(i.length){for(;0<=e&&t(e);)e--;for(;l++,l<i.length&&t(l););}return a};b.ConnectionDB.prototype.isInYRange_=function(e,t,n){return Math.abs(this.connections_[e].y_-t)<=n};b.ConnectionDB.prototype.searchForClosest=function(e,t,n){if(!this.connections_.length)return{connection:null,radius:t};var o=e.y_,i=e.x_;e.x_=i+n.x;e.y_=o+n.y;var r=this.findPositionForConnection_(e);n=null;for(var s,a=t,l=r-1;0<=l&&this.isInYRange_(l,e.y_,t);)s=this.connections_[l],e.isConnectionAllowed(s,a)&&(a=(n=s).distanceFrom(e)),l--;for(;r<this.connections_.length&&this.isInYRange_(r,e.y_,t);)s=this.connections_[r],e.isConnectionAllowed(s,a)&&(a=(n=s).distanceFrom(e)),r++;e.x_=i;e.y_=o;return{connection:n,radius:a}};b.ConnectionDB.init=function(){var e=[];e[b.INPUT_VALUE]=new b.ConnectionDB;e[b.OUTPUT_VALUE]=new b.ConnectionDB;e[b.NEXT_STATEMENT]=new b.ConnectionDB;e[b.PREVIOUS_STATEMENT]=new b.ConnectionDB;return e};b.TouchGesture=function(e,t){b.TouchGesture.superClass_.constructor.call(this,e,t);this.isMultiTouch_=!1;this.cachedPoints_={};this.startDistance_=this.previousScale_=0;this.onStartWrapper_=null};b.utils.object.inherits(b.TouchGesture,b.Gesture);b.TouchGesture.ZOOM_IN_MULTIPLIER=5;b.TouchGesture.ZOOM_OUT_MULTIPLIER=6;b.TouchGesture.prototype.doStart=function(e){b.TouchGesture.superClass_.doStart.call(this,e);!this.isEnding_&&b.Touch.isTouchEvent(e)&&this.handleTouchStart(e)};b.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=b.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0);this.onMoveWrapper_=b.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0);this.onUpWrapper_=b.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0);e.preventDefault();e.stopPropagation()};b.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&b.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&b.longStop_())};b.TouchGesture.prototype.handleMove=function(e){this.isDragging()?b.Touch.shouldHandleEvent(e)&&b.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(b.Touch.isTouchEvent(e)&&this.handleTouchMove(e),b.longStop_()):b.TouchGesture.superClass_.handleMove.call(this,e)};b.TouchGesture.prototype.handleUp=function(e){b.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e);!this.isMultiTouch()||this.isDragging()?b.Touch.shouldHandleEvent(e)&&b.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())};b.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_};b.TouchGesture.prototype.dispose=function(){b.TouchGesture.superClass_.dispose.call(this);this.onStartWrapper_&&b.unbindEvent_(this.onStartWrapper_)};b.TouchGesture.prototype.handleTouchStart=function(e){var t=b.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e);2==(t=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=b.utils.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]]),this.isMultiTouch_=!0,e.preventDefault())};b.TouchGesture.prototype.handleTouchMove=function(e){var t=b.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e);if(2==(t=Object.keys(this.cachedPoints_)).length){t=this.touchScale_=b.utils.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]])/this.startDistance_;if(0<this.previousScale_&&1/0>this.previousScale_){var n=0<(n=t-this.previousScale_)?n*b.TouchGesture.ZOOM_IN_MULTIPLIER:n*b.TouchGesture.ZOOM_OUT_MULTIPLIER,o=this.startWorkspace_,i=b.utils.mouseToSvg(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(i.x,i.y,n)}this.previousScale_=t;e.preventDefault()}};b.TouchGesture.prototype.handleTouchEnd=function(e){e=b.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[e]&&delete this.cachedPoints_[e];Object.keys(this.cachedPoints_).length<2&&(this.cachedPoints_={},this.previousScale_=0)};b.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new b.utils.Coordinate(e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY):null};b.WorkspaceAudio=function(e){this.parentWorkspace_=e;this.SOUNDS_=Object.create(null)};b.WorkspaceAudio.prototype.lastSound_=null;b.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null};b.WorkspaceAudio.prototype.load=function(e,t){if(e.length){try{var n=new b.utils.global.Audio}catch(e){return}for(var o,i=0;i<e.length;i++){var r=e[i],s=r.match(/\.(\w+)$/);if(s&&n.canPlayType("audio/"+s[1])){o=new b.utils.global.Audio(r);break}}o&&o.play&&(this.SOUNDS_[t]=o)}};b.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var t=this.SOUNDS_[e];t.volume=.01;var n=t.play();void 0!==n?n.then(t.pause).catch(function(){}):t.pause();if(b.utils.userAgent.IPAD||b.utils.userAgent.IPHONE)break}};b.WorkspaceAudio.prototype.play=function(e,t){var n=this.SOUNDS_[e];n?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<b.SOUND_LIMIT||(this.lastSound_=e,(n=b.utils.userAgent.IPAD||b.utils.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===t?1:t,n.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,t)};b.WorkspaceSvg=function(e,t,n){b.WorkspaceSvg.superClass_.constructor.call(this,e);this.getMetrics=e.getMetrics||b.WorkspaceSvg.getTopLevelWorkspaceMetrics_;this.setMetrics=e.setMetrics||b.WorkspaceSvg.setTopLevelWorkspaceMetrics_;this.connectionDBList=b.ConnectionDB.init();t&&(this.blockDragSurface_=t);n&&(this.workspaceDragSurface_=n);this.useWorkspaceDragSurface_=this.workspaceDragSurface_&&b.utils.is3dSupported();this.highlightedBlocks_=[];this.audioManager_=new b.WorkspaceAudio(e.parentWorkspace);this.grid_=this.options.gridPattern?new b.Grid(e.gridPattern,e.gridOptions):null;this.markerSvg_=this.cursorSvg_=null;b.Variables&&b.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(b.VARIABLE_CATEGORY_NAME,b.Variables.flyoutCategory);b.VariablesDynamic&&b.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(b.VARIABLE_DYNAMIC_CATEGORY_NAME,b.VariablesDynamic.flyoutCategory);b.Procedures&&b.Procedures.flyoutCategory&&this.registerToolboxCategoryCallback(b.PROCEDURE_CATEGORY_NAME,b.Procedures.flyoutCategory);this.renderer_=b.blockRendering.init(this.options.renderer||"geras")};b.utils.object.inherits(b.WorkspaceSvg,b.Workspace);b.WorkspaceSvg.prototype.resizeHandlerWrapper_=null;b.WorkspaceSvg.prototype.rendered=!0;b.WorkspaceSvg.prototype.isVisible_=!0;b.WorkspaceSvg.prototype.isFlyout=!1;b.WorkspaceSvg.prototype.isMutator=!1;b.WorkspaceSvg.prototype.resizesEnabled_=!0;b.WorkspaceSvg.prototype.scrollX=0;b.WorkspaceSvg.prototype.scrollY=0;b.WorkspaceSvg.prototype.startScrollX=0;b.WorkspaceSvg.prototype.startScrollY=0;b.WorkspaceSvg.prototype.dragDeltaXY_=null;b.WorkspaceSvg.prototype.scale=1;b.WorkspaceSvg.prototype.trashcan=null;b.WorkspaceSvg.prototype.scrollbar=null;b.WorkspaceSvg.prototype.flyout_=null;b.WorkspaceSvg.prototype.toolbox_=null;b.WorkspaceSvg.prototype.currentGesture_=null;b.WorkspaceSvg.prototype.blockDragSurface_=null;b.WorkspaceSvg.prototype.workspaceDragSurface_=null;b.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1;b.WorkspaceSvg.prototype.isDragSurfaceActive_=!1;b.WorkspaceSvg.prototype.injectionDiv_=null;b.WorkspaceSvg.prototype.lastRecordedPageScroll_=null;b.WorkspaceSvg.prototype.flyoutButtonCallbacks_={};b.WorkspaceSvg.prototype.toolboxCategoryCallbacks_={};b.WorkspaceSvg.prototype.configureContextMenu=null;b.WorkspaceSvg.prototype.targetWorkspace=null;b.WorkspaceSvg.prototype.inverseScreenCTM_=null;b.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0;b.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_};b.WorkspaceSvg.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose();(this.cursor_=e)&&(this.cursor_.setDrawer(this.getRenderer().makeCursorDrawer(this,!1)),this.setCursorSvg(this.cursor_.getDrawer().createDom()))};b.WorkspaceSvg.prototype.setMarker=function(e){this.marker_&&this.marker_.getDrawer()&&this.marker_.getDrawer().dispose();(this.marker_=e)&&(this.marker_.setDrawer(this.getRenderer().makeCursorDrawer(this,!0)),this.setMarkerSvg(this.marker_.getDrawer().createDom()))};b.WorkspaceSvg.prototype.setCursorSvg=function(e){e?this.svgBlockCanvas_&&(this.svgBlockCanvas_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null};b.WorkspaceSvg.prototype.setMarkerSvg=function(e){e?this.svgBlockCanvas_&&(this.cursorSvg_?this.svgBlockCanvas_.insertBefore(e,this.cursorSvg_):this.svgBlockCanvas_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null};b.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_};b.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0};b.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_};b.WorkspaceSvg.prototype.getSvgXY=function(e){var t=0,n=0,o=1;(b.utils.dom.containsNode(this.getCanvas(),e)||b.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(o=this.scale);do{var i=b.utils.getRelativeXY(e)}while(e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(o=1),t+=i.x*o,n+=i.y*o,(e=e.parentNode)&&e!=this.getParentSvg());return new b.utils.Coordinate(t,n)};b.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return b.utils.getInjectionDivXY_(this.svgBlockCanvas_)};b.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_};b.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e};b.WorkspaceSvg.prototype.createDom=function(e){this.svgGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyWorkspace"},null);e&&(this.svgBackground_=b.utils.dom.createSvgElement("rect",{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspace","fill"));this.svgBlockCanvas_=b.utils.dom.createSvgElement("g",{class:"blocklyBlockCanvas"},this.svgGroup_);this.svgBubbleCanvas_=b.utils.dom.createSvgElement("g",{class:"blocklyBubbleCanvas"},this.svgGroup_);this.isFlyout||(b.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),b.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_));if(this.options.hasCategories){if(!b.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new b.Toolbox(this)}this.grid_&&this.grid_.update(this.scale);this.recordDeleteAreas();this.cursor_.setDrawer(this.getRenderer().makeCursorDrawer(this,!1));e=this.cursor_.getDrawer().createDom();this.svgGroup_.appendChild(e);this.marker_.setDrawer(this.getRenderer().makeCursorDrawer(this,!0));e=this.marker_.getDrawer().createDom();this.svgGroup_.appendChild(e);return this.svgGroup_};b.WorkspaceSvg.prototype.dispose=function(){this.rendered=!1;this.currentGesture_&&this.currentGesture_.cancel();this.svgGroup_&&(b.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.svgBubbleCanvas_=this.svgBlockCanvas_=null;this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null);this.flyout_&&(this.flyout_.dispose(),this.flyout_=null);this.trashcan&&(this.trashcan.dispose(),this.trashcan=null);this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null);this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null);this.marker_&&this.marker_.getDrawer().dispose();this.getCursor()&&this.getCursor().getDrawer().dispose();this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null);this.grid_&&(this.grid_.dispose(),this.grid_=null);this.themeManager_&&this.themeManager_.unsubscribe(this.svgBackground_);b.WorkspaceSvg.superClass_.dispose.call(this);this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null;if(!this.options.parentWorkspace){var e=this.getParentSvg().parentNode;e&&b.utils.dom.removeNode(e)}this.resizeHandlerWrapper_&&(b.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)};b.WorkspaceSvg.prototype.newBlock=function(e,t){return new b.BlockSvg(this,e,t)};b.WorkspaceSvg.prototype.addTrashcan=function(){if(!b.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new b.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)};b.WorkspaceSvg.prototype.addZoomControls=function(){if(!b.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new b.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)};b.WorkspaceSvg.prototype.addFlyout_=function(e){var t={disabledPatternId:this.options.disabledPatternId,parentWorkspace:this,RTL:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,toolboxPosition:this.options.toolboxPosition,renderer:this.options.renderer};if(this.horizontalLayout){if(!b.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new b.HorizontalFlyout(t)}else{if(!b.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new b.VerticalFlyout(t)}this.flyout_.autoClose=!1;return this.flyout_.createDom(e)};b.WorkspaceSvg.prototype.getFlyout=function(){return this.flyout_||(this.toolbox_?this.toolbox_.flyout_:null)};b.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_};b.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM();this.recordDeleteAreas()};b.WorkspaceSvg.prototype.resizeContents=function(){if(this.resizesEnabled_&&this.rendered){if(this.scrollbar){var e=this.getMetrics();this.scrollbar.hScroll.resizeContentHorizontal(e);this.scrollbar.vScroll.resizeContentVertical(e)}this.updateInverseScreenCTM()}};b.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position();this.flyout_&&this.flyout_.position();this.trashcan&&this.trashcan.position();this.zoomControls_&&this.zoomControls_.position();this.scrollbar&&this.scrollbar.resize();this.updateScreenCalculations_()};b.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=b.utils.getDocumentScroll();b.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())};b.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_};b.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_};b.WorkspaceSvg.prototype.getParentSvg=function(){if(this.cachedParentSvg_)return this.cachedParentSvg_;for(var e=this.svgGroup_;e;){if("svg"==e.tagName)return this.cachedParentSvg_=e;e=e.parentNode}return null};b.WorkspaceSvg.prototype.translate=function(e,t){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,t);else{var n="translate("+e+","+t+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n);this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,t,this.scale);this.grid_&&this.grid_.moveTo(e,t)};b.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_);e="translate("+e.x+","+e.y+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",e);this.svgBubbleCanvas_.setAttribute("transform",e)}};b.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,t=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=b.utils.getRelativeXY(this.svgBlockCanvas_);this.workspaceDragSurface_.setContentsAndShow(this.svgBlockCanvas_,this.svgBubbleCanvas_,e,t,n,this.scale);this.workspaceDragSurface_.translateSurface(o.x,o.y)}};b.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_};b.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0};b.WorkspaceSvg.prototype.setVisible=function(e){this.scrollbar&&this.scrollbar.setContainerVisible(e);this.getFlyout()&&this.getFlyout().setContainerVisible(e);this.getParentSvg().style.display=e?"block":"none";this.toolbox_&&(this.toolbox_.HtmlDiv.style.display=e?"block":"none");if(e){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].markDirty();this.render();this.toolbox_&&this.toolbox_.position()}else b.hideChaff(!0);this.isVisible_=e};b.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1)};b.WorkspaceSvg.prototype.traceOn=function(){console.warn("Deprecated call to traceOn, delete this.")};b.WorkspaceSvg.prototype.highlightBlock=function(e,t){if(void 0===t){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=e?this.getBlockById(e):null)&&((e=void 0===t||t)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):b.utils.arrayRemove(this.highlightedBlocks_,n),n.setHighlighted(e))};b.WorkspaceSvg.prototype.paste=function(e){!this.rendered||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))};b.WorkspaceSvg.prototype.pasteBlock_=function(e){b.Events.disable();try{var t=b.Xml.domToBlock(e,this),n=this.getMarker().getCurNode();if(b.keyboardAccessibilityMode&&n){b.navigation.insertBlock(t,n.getLocation());return}var o=parseInt(e.getAttribute("x"),10),i=parseInt(e.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(i)){this.RTL&&(o=-o);do{e=!1;var r=this.getAllBlocks(!1);n=0;for(;s=r[n];n++){var s=s.getRelativeToSurfaceXY();if(Math.abs(o-s.x)<=1&&Math.abs(i-s.y)<=1){e=!0;break}}if(!e)for(var a,l=t.getConnections_(!1),n=0;a=l[n];n++)if(a.closest(b.SNAP_RADIUS,new b.utils.Coordinate(o,i)).connection){e=!0;break}}while(e&&(o=this.RTL?o-b.SNAP_RADIUS:o+b.SNAP_RADIUS,i+=2*b.SNAP_RADIUS),e);t.moveBy(o,i)}}finally{b.Events.enable()}b.Events.isEnabled()&&!t.isShadow()&&b.Events.fire(new b.Events.BlockCreate(t));t.select()};b.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){b.Events.disable();try{var t=b.WorkspaceCommentSvg.fromXml(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),t.moveBy(n+50,o+50))}finally{b.Events.enable()}b.Events.isEnabled();t.select()};b.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.flyout_&&e.toolbox_.refreshSelection()};b.WorkspaceSvg.prototype.renameVariableById=function(e,t){b.WorkspaceSvg.superClass_.renameVariableById.call(this,e,t);this.refreshToolboxSelection()};b.WorkspaceSvg.prototype.deleteVariableById=function(e){b.WorkspaceSvg.superClass_.deleteVariableById.call(this,e);this.refreshToolboxSelection()};b.WorkspaceSvg.prototype.createVariable=function(e,t,n){e=b.WorkspaceSvg.superClass_.createVariable.call(this,e,t,n);this.refreshToolboxSelection();return e};b.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null;this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null};b.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?b.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?b.DELETE_AREA_TOOLBOX:b.DELETE_AREA_NONE};b.WorkspaceSvg.prototype.onMouseDown_=function(e){var t=this.getGesture(e);t&&t.handleWsStart(e,this)};b.WorkspaceSvg.prototype.startDrag=function(e,t){(e=b.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale;e.y/=this.scale;this.dragDeltaXY_=b.utils.Coordinate.difference(t,e)};b.WorkspaceSvg.prototype.moveDrag=function(e){(e=b.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale;e.y/=this.scale;return b.utils.Coordinate.sum(this.dragDeltaXY_,e)};b.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()};b.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag};b.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel};b.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel};b.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(b.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var o=b.utils.getScrollDeltaPixels(e);!t||!e.ctrlKey&&n?(t=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,n=this.scrollY),this.scroll(t,n)):(o=-o.y/50,t=b.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o));e.preventDefault()}}};b.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBlocks(!1),t=this.getTopComments(!1);if(!(e=e.concat(t)).length)return new b.utils.Rect(0,0,0,0);t=e[0].getBoundingRectangle();for(var n=1;n<e.length;n++){var o=e[n].getBoundingRectangle();o.top<t.top&&(t.top=o.top);o.bottom>t.bottom&&(t.bottom=o.bottom);o.left<t.left&&(t.left=o.left);o.right>t.right&&(t.right=o.right)}return t};b.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1);b.Events.setGroup(!0);for(var e,t=this.getTopBlocks(!0),n=0,o=0;e=t[o];o++)if(e.isMovable()){var i=e.getRelativeToSurfaceXY();e.moveBy(-i.x,n-i.y);e.snapToGrid();n=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+b.BlockSvg.MIN_BLOCK_Y}b.Events.setGroup(!1);this.setResizesEnabled(!0)};b.WorkspaceSvg.prototype.showContextMenu_=function(e){function t(){b.Events.setGroup(o);var e=d.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(t,10)):t());b.Events.setGroup(!1)}if(!this.options.readOnly&&!this.isFlyout){var n=[],i=this.getTopBlocks(!0),o=b.utils.genUid(),r=this,s={};s.text=b.Msg.UNDO;s.enabled=0<this.undoStack_.length;s.callback=this.undo.bind(this,!1);n.push(s);(s={}).text=b.Msg.REDO;s.enabled=0<this.redoStack_.length;s.callback=this.undo.bind(this,!0);n.push(s);this.isMovable()&&((s={}).text=b.Msg.CLEAN_UP,s.enabled=1<i.length,s.callback=this.cleanUp.bind(this),n.push(s));if(this.options.collapse){for(var a=s=!1,l=0;l<i.length;l++)for(var c=i[l];c;)c.isCollapsed()?s=!0:a=!0,c=c.getNextBlock();var u=function(e){for(var t=0,n=0;n<i.length;n++)for(var o=i[n];o;)setTimeout(o.setCollapsed.bind(o,e),t),o=o.getNextBlock(),t+=10};(a={enabled:a}).text=b.Msg.COLLAPSE_ALL;a.callback=function(){u(!0)};n.push(a);(s={enabled:s}).text=b.Msg.EXPAND_ALL;s.callback=function(){u(!1)};n.push(s)}for(var d=[],l=0;l<i.length;l++)!function e(t){if(t.isDeletable())d=d.concat(t.getDescendants(!1));else{t=t.getChildren(!1);for(var n=0;n<t.length;n++)e(t[n])}}(i[l]);s={text:1==d.length?b.Msg.DELETE_BLOCK:b.Msg.DELETE_X_BLOCKS.replace("%1",String(d.length)),enabled:0<d.length,callback:function(){r.currentGesture_&&r.currentGesture_.cancel();d.length<2?t():b.confirm(b.Msg.DELETE_ALL_BLOCKS.replace("%1",d.length),function(e){e&&t()})}};n.push(s);this.configureContextMenu&&this.configureContextMenu(n);b.ContextMenu.show(e,n,this.RTL)}};b.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=b.Options.parseToolboxTree(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.getElementsByTagName("category").length){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e;this.toolbox_.renderTree(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e;this.flyout_.show(e.childNodes)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")};b.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(b.mainWorkspace=this).setBrowserFocus()};b.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus()}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus()}}};b.WorkspaceSvg.prototype.zoom=function(e,t,n){if(!this.isFlyout&&!this.isMutator){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o=this.scale*n;if(this.scale!=o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var i=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=e;r.y=t;e=(r=r.matrixTransform(i.inverse())).x;t=r.y;i=i.translate(e*(1-n),t*(1-n)).scale(n);this.scrollX=i.e;this.scrollY=i.f;this.setScale(o)}}};b.WorkspaceSvg.prototype.zoomCenter=function(e){var t,n=this.getMetrics();n=this.flyout_?(t=n.svgWidth/2,n.svgHeight/2):(t=n.viewWidth/2+n.absoluteLeft,n.viewHeight/2+n.absoluteTop);this.zoom(t,n,e)};b.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=(t=this.getMetrics()).viewWidth,t=t.viewHeight,n=(o=this.getBlocksBoundingBox()).right-o.left,o=o.bottom-o.top;n&&(this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.height_,o+=this.flyout_.height_/this.scale):(e+=this.flyout_.getWidth(),n+=this.flyout_.getWidth()/this.scale)),this.setScale(Math.min(e/n,t/o)),this.scrollCenter())}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")};b.WorkspaceSvg.prototype.beginCanvasTransition=function(){b.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning");b.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")};b.WorkspaceSvg.prototype.endCanvasTransition=function(){b.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning");b.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")};b.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),t=(e.contentWidth-e.viewWidth)/2,n=(e.contentHeight-e.viewHeight)/2,t=-t-e.contentLeft,n=-n-e.contentTop;this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")};b.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.isMovable()){if(e=this.getBlockById(e)){var t=e.getRelativeToSurfaceXY(),n=e.getHeightWidth(),o=this.scale;e=(t.x+(this.RTL?-1:1)*n.width/2)*o;t=(t.y+n.height/2)*o;e=-(e-(n=this.getMetrics()).contentLeft-n.viewWidth/2)-n.contentLeft;t=-(t-n.contentTop-n.viewHeight/2)-n.contentTop;b.hideChaff();this.scroll(e,t)}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")};b.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale);this.scale=e;b.hideChaff(!1);this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas());this.grid_&&this.grid_.update(this.scale);e=this.getMetrics();this.scrollX-=e.absoluteLeft;this.scrollY-=e.absoluteTop;e.viewLeft+=e.absoluteLeft;e.viewTop+=e.absoluteTop;this.scroll(this.scrollX,this.scrollY);this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(e),this.scrollbar.vScroll.resizeViewVertical(e)):(this.scrollbar.hScroll.resizeContentHorizontal(e),this.scrollbar.vScroll.resizeContentVertical(e)))};b.WorkspaceSvg.prototype.scroll=function(e,t){b.hideChaff(!0);var n=this.getMetrics(),o=n.contentWidth+n.contentLeft-n.viewWidth,i=n.contentHeight+n.contentTop-n.viewHeight;e=Math.min(e,-n.contentLeft);t=Math.min(t,-n.contentTop);e=Math.max(e,-o);t=Math.max(t,-i);this.scrollX=e;this.scrollY=t;this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(e+n.contentLeft)*this.scrollbar.hScroll.ratio_),this.scrollbar.vScroll.setHandlePosition(-(t+n.contentTop)*this.scrollbar.vScroll.ratio_));e+=n.absoluteLeft;t+=n.absoluteTop;this.translate(e,t)};b.WorkspaceSvg.getDimensionsPx_=function(e){var t=0,n=0;e&&(t=e.getWidth(),n=e.getHeight());return{width:t,height:n}};b.WorkspaceSvg.getContentDimensions_=function(e,t){return e.isContentBounded()?b.WorkspaceSvg.getContentDimensionsBounded_(e,t):b.WorkspaceSvg.getContentDimensionsExact_(e)};b.WorkspaceSvg.getContentDimensionsExact_=function(e){var t=e.getBlocksBoundingBox(),n=e.scale;e=t.top*n;var o=t.bottom*n,i=t.left*n;return{top:e,bottom:o,left:i,right:t=t.right*n,width:t-i,height:o-e}};b.WorkspaceSvg.getContentDimensionsBounded_=function(e,t){e=b.WorkspaceSvg.getContentDimensionsExact_(e);var n=t.width,o=n/2,i=(t=t.height)/2,r=Math.min(e.left-o,e.right-n),s=Math.min(e.top-i,e.bottom-t);return{left:r,top:s,height:Math.max(e.bottom+i,e.top+t)-s,width:Math.max(e.right+o,e.left+n)-r}};b.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=b.WorkspaceSvg.getDimensionsPx_(this.toolbox_),t=b.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=b.svgSize(this.getParentSvg()),o={height:n.height,width:n.width};this.toolbox_?this.toolboxPosition==b.TOOLBOX_AT_TOP||this.toolboxPosition==b.TOOLBOX_AT_BOTTOM?o.height-=e.height:this.toolboxPosition!=b.TOOLBOX_AT_LEFT&&this.toolboxPosition!=b.TOOLBOX_AT_RIGHT||(o.width-=e.width):this.flyout_&&(this.toolboxPosition==b.TOOLBOX_AT_TOP||this.toolboxPosition==b.TOOLBOX_AT_BOTTOM?o.height-=t.height:this.toolboxPosition!=b.TOOLBOX_AT_LEFT&&this.toolboxPosition!=b.TOOLBOX_AT_RIGHT||(o.width-=t.width));var i=b.WorkspaceSvg.getContentDimensions_(this,o),r=0;this.toolbox_&&this.toolboxPosition==b.TOOLBOX_AT_LEFT?r=e.width:this.flyout_&&this.toolboxPosition==b.TOOLBOX_AT_LEFT&&(r=t.width);var s=0;this.toolbox_&&this.toolboxPosition==b.TOOLBOX_AT_TOP?s=e.height:this.flyout_&&this.toolboxPosition==b.TOOLBOX_AT_TOP&&(s=t.height);return{contentHeight:i.height,contentWidth:i.width,contentTop:i.top,contentLeft:i.left,viewHeight:o.height,viewWidth:o.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:s,absoluteLeft:r,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,flyoutWidth:t.width,flyoutHeight:t.height,toolboxPosition:this.toolboxPosition}};b.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-t.contentWidth*e.x-t.contentLeft);"number"==typeof e.y&&(this.scrollY=-t.contentHeight*e.y-t.contentTop);this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)};b.WorkspaceSvg.prototype.setResizesEnabled=function(e){var t=!this.resizesEnabled_&&e;this.resizesEnabled_=e;t&&this.resizeContents()};b.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1);b.WorkspaceSvg.superClass_.clear.call(this);this.setResizesEnabled(!0)};b.WorkspaceSvg.prototype.registerButtonCallback=function(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=t};b.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null};b.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null};b.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=t};b.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null};b.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null};b.WorkspaceSvg.prototype.getGesture=function(e){var t="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new b.TouchGesture(e,this):null};b.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null};b.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()};b.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_};b.WorkspaceSvg.prototype.getGrid=function(){return this.grid_};b.WorkspaceSvg.prototype.refreshTheme=function(){b.WorkspaceSvg.superClass_.refreshTheme.call(this);this.refreshToolboxSelection();this.toolbox_&&this.toolbox_.updateColourFromTheme()};b.inject=function(e,t){b.checkBlockColourConstants();"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e));if(!b.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");t=new b.Options(t||{});(o=document.createElement("div")).className="injectionDiv";e.appendChild(o);e=b.createDom_(o,t);var n=new b.BlockDragSurfaceSvg(o),o=new b.WorkspaceDragSurfaceSvg(o);o=b.createMainWorkspace_(e,t,n,o);b.user.keyMap.setKeyMap(t.keyMap);b.init_(o);b.mainWorkspace=o;b.svgResize(o);return o};b.createDom_=function(e,t){e.setAttribute("dir","LTR");b.Component.defaultRightToLeft=t.RTL;b.Css.inject(t.hasCss,t.pathToMedia);e=b.utils.dom.createSvgElement("svg",{xmlns:b.utils.dom.SVG_NS,"xmlns:html":b.utils.dom.HTML_NS,"xmlns:xlink":b.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg"},e);var n=b.utils.dom.createSvgElement("defs",{},e),o=String(Math.random()).substring(2),i=b.utils.dom.createSvgElement("filter",{id:"blocklyEmbossFilter"+o},n);b.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:1,result:"blur"},i);var r=b.utils.dom.createSvgElement("feSpecularLighting",{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},i);b.utils.dom.createSvgElement("fePointLight",{x:-5e3,y:-1e4,z:2e4},r);b.utils.dom.createSvgElement("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},i);b.utils.dom.createSvgElement("feComposite",{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},i);t.embossFilterId=i.id;i=b.utils.dom.createSvgElement("pattern",{id:"blocklyDisabledPattern"+o,patternUnits:"userSpaceOnUse",width:10,height:10},n);b.utils.dom.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},i);b.utils.dom.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},i);t.disabledPatternId=i.id;t.gridPattern=b.Grid.createDom(o,t.gridOptions,n);return e};b.createMainWorkspace_=function(e,t,n,o){t.parentWorkspace=null;var l=new b.WorkspaceSvg(t,n,o);l.scale=t.zoomOptions.startScale;e.appendChild(l.createDom("blocklyMainBackground"));!t.hasCategories&&t.languageTree&&(n=l.addFlyout_("svg"),b.utils.dom.insertAfter(n,e));t.hasTrashcan&&l.addTrashcan();t.zoomOptions&&t.zoomOptions.controls&&l.addZoomControls();l.getThemeManager().subscribe(e,"workspace","background-color");l.translate(0,0);b.mainWorkspace=l;t.readOnly||l.isMovable()||l.addChangeListener(function(e){if(!l.isDragging()&&!l.isMovable()&&-1!=b.Events.BUMP_EVENTS.indexOf(e.type)){var t=Object.create(null),n=l.getMetrics(),o=l.scale;t.RTL=l.RTL;t.viewLeft=n.viewLeft/o;t.viewTop=n.viewTop/o;t.viewRight=(n.viewLeft+n.viewWidth)/o;t.viewBottom=(n.viewTop+n.viewHeight)/o;l.isContentBounded()?(n=l.getBlocksBoundingBox(),t.contentLeft=n.left,t.contentTop=n.top,t.contentRight=n.right,t.contentBottom=n.bottom):(t.contentLeft=n.contentLeft/o,t.contentTop=n.contentTop/o,t.contentRight=(n.contentLeft+n.contentWidth)/o,t.contentBottom=(n.contentTop+n.contentHeight)/o);if(t.contentTop<t.viewTop||t.contentBottom>t.viewBottom||t.contentLeft<t.viewLeft||t.contentRight>t.viewRight){n=null;e&&(n=b.Events.getGroup(),b.Events.setGroup(e.group));switch(e.type){case b.Events.BLOCK_CREATE:case b.Events.BLOCK_MOVE:var i=(i=l.getBlockById(e.blockId)).getRootBlock();break;case b.Events.COMMENT_CREATE:case b.Events.COMMENT_MOVE:i=l.getCommentById(e.commentId)}if(i){(o=i.getBoundingRectangle()).height=o.bottom-o.top;o.width=o.right-o.left;var r=t.viewTop,s=t.viewBottom-o.height,s=Math.max(r,s),r=b.utils.math.clamp(r,o.top,s)-o.top;s=t.viewLeft;var a=t.viewRight-o.width;t.RTL?s=Math.min(a,s):a=Math.max(s,a);t=b.utils.math.clamp(s,o.left,a)-o.left;i.moveBy(t,r)}e&&(e.group||console.log("WARNING: Moved object in bounds but there was no event group. This may break undo."),null!==n&&b.Events.setGroup(n))}}});b.svgResize(l);b.WidgetDiv.createDom();b.DropDownDiv.createDom();b.Tooltip.createDom();return l};b.init_=function(e){var t=e.options,n=e.getParentSvg();b.bindEventWithChecks_(n.parentNode,"contextmenu",null,function(e){b.utils.isTargetInput(e)||e.preventDefault()});n=b.bindEventWithChecks_(window,"resize",null,function(){b.hideChaff(!0);b.svgResize(e)});e.setResizeHandlerWrapper(n);b.inject.bindDocumentEvents_();t.languageTree&&(e.toolbox_?e.toolbox_.init(e):e.flyout_&&(e.flyout_.init(e),e.flyout_.show(t.languageTree.childNodes),e.flyout_.scrollToStart()));n=b.Scrollbar.scrollbarThickness;t.hasTrashcan&&(n=e.trashcan.init(n));t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(n);t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new b.ScrollbarPair(e),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5});t.hasSounds&&b.inject.loadSounds_(t.pathToMedia,e)};b.inject.bindDocumentEvents_=function(){b.documentEventsBound_||(b.bindEventWithChecks_(document,"scroll",null,function(){for(var e,t=b.Workspace.getAll(),n=0;e=t[n];n++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()}),b.bindEventWithChecks_(document,"keydown",null,b.onKeyDown_),b.bindEvent_(document,"touchend",null,b.longStop_),b.bindEvent_(document,"touchcancel",null,b.longStop_),b.utils.userAgent.IPAD&&b.bindEventWithChecks_(window,"orientationchange",document,function(){b.svgResize(b.getMainWorkspace())}));b.documentEventsBound_=!0};b.inject.loadSounds_=function(e,t){var n=t.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click");n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect");n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var o=[];e=function(){for(;o.length;)b.unbindEvent_(o.pop());n.preload()};o.push(b.bindEventWithChecks_(document,"mousemove",null,e,!0));o.push(b.bindEventWithChecks_(document,"touchstart",null,e,!0))};b.Action=function(e,t){this.name=e;this.desc=t};b.ASTNode=function(e,t,n){if(!t)throw Error("Cannot create a node without a location.");this.type_=e;this.isConnection_=b.ASTNode.isConnectionType_(e);this.location_=t;this.processParams_(n||null)};b.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"};b.ASTNode.DEFAULT_OFFSET_Y=-20;b.ASTNode.isConnectionType_=function(e){switch(e){case b.ASTNode.types.PREVIOUS:case b.ASTNode.types.NEXT:case b.ASTNode.types.INPUT:case b.ASTNode.types.OUTPUT:return!0}return!1};b.ASTNode.createFieldNode=function(e){return new b.ASTNode(b.ASTNode.types.FIELD,e)};b.ASTNode.createConnectionNode=function(e){return e?e.type==b.INPUT_VALUE||e.type==b.NEXT_STATEMENT&&e.getParentInput()?b.ASTNode.createInputNode(e.getParentInput()):e.type==b.NEXT_STATEMENT?new b.ASTNode(b.ASTNode.types.NEXT,e):e.type==b.OUTPUT_VALUE?new b.ASTNode(b.ASTNode.types.OUTPUT,e):e.type==b.PREVIOUS_STATEMENT?new b.ASTNode(b.ASTNode.types.PREVIOUS,e):null:null};b.ASTNode.createInputNode=function(e){return e?new b.ASTNode(b.ASTNode.types.INPUT,e.connection):null};b.ASTNode.createBlockNode=function(e){return new b.ASTNode(b.ASTNode.types.BLOCK,e)};b.ASTNode.createStackNode=function(e){return new b.ASTNode(b.ASTNode.types.STACK,e)};b.ASTNode.createWorkspaceNode=function(e,t){return new b.ASTNode(b.ASTNode.types.WORKSPACE,e,{wsCoordinate:t})};b.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)};b.ASTNode.prototype.getLocation=function(){return this.location_};b.ASTNode.prototype.getType=function(){return this.type_};b.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_};b.ASTNode.prototype.isConnection=function(){return this.isConnection_};b.ASTNode.prototype.findPreviousEditableField_=function(e,t,n){e=(t=t.fieldRow).indexOf(e);for(n=(n?t.length:e)-1;e=t[n];n--)if(e.EDITABLE)return t=e,b.ASTNode.createFieldNode(t);return null};b.ASTNode.prototype.findNextForInput_=function(){for(var e,t=(n=this.location_.getParentInput()).getSourceBlock(),n=t.inputList.indexOf(n)+1;e=t.inputList[n];n++){for(var o,i=e.fieldRow,r=0;o=i[r];r++)if(o.EDITABLE)return b.ASTNode.createFieldNode(o);if(e.connection)return b.ASTNode.createInputNode(e)}return null};b.ASTNode.prototype.findNextForField_=function(){for(var e=(o=this.location_).getParentInput(),t=o.getSourceBlock(),n=t.inputList.indexOf(e),o=e.fieldRow.indexOf(o)+1;e=t.inputList[n];n++){for(var i=e.fieldRow;o<i.length;){if(i[o].EDITABLE)return b.ASTNode.createFieldNode(i[o]);o++}o=0;if(e.connection)return b.ASTNode.createInputNode(e)}return null};b.ASTNode.prototype.findPrevForInput_=function(){for(var e,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);e=n.inputList[o];o--){if(e.connection&&e!==t)return b.ASTNode.createInputNode(e);for(var i,r=(e=e.fieldRow).length-1;i=e[r];r--)if(i.EDITABLE)return b.ASTNode.createFieldNode(i)}return null};b.ASTNode.prototype.findPrevForField_=function(){for(var e,t=(i=this.location_).getParentInput(),n=i.getSourceBlock(),o=n.inputList.indexOf(t),i=t.fieldRow.indexOf(i)-1;e=n.inputList[o];o--){if(e.connection&&e!==t)return b.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<i;){if(e[i].EDITABLE)return b.ASTNode.createFieldNode(e[i]);i--}0<=o-1&&(i=n.inputList[o-1].fieldRow.length-1)}return null};b.ASTNode.prototype.navigateBetweenStacks_=function(e){(o=this.getLocation())instanceof b.Block||(o=o.getSourceBlock());if(!o||!o.workspace)return null;for(var t,n=o.getRootBlock(),o=n.workspace.getTopBlocks(!0),i=0;t=o[i];i++)if(n.id==t.id)return-1==(e=i+(e?1:-1))||e==o.length?null:b.ASTNode.createStackNode(o[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")};b.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var t=e.previousConnection||e.outputConnection;return t?b.ASTNode.createConnectionNode(t):b.ASTNode.createBlockNode(e)};b.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var t=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return t&&t.targetConnection&&t.targetConnection.getParentInput()?b.ASTNode.createInputNode(t.targetConnection.getParentInput()):b.ASTNode.createStackNode(e)};b.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var t,n=0;t=e[n];n++){for(var o,i=t.fieldRow,r=0;o=i[r];r++)if(o.EDITABLE)return b.ASTNode.createFieldNode(o);if(t.connection)return b.ASTNode.createInputNode(t)}return null};b.ASTNode.prototype.next=function(){switch(this.type_){case b.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case b.ASTNode.types.OUTPUT:return b.ASTNode.createBlockNode(this.location_.getSourceBlock());case b.ASTNode.types.FIELD:return this.findNextForField_();case b.ASTNode.types.INPUT:return this.findNextForInput_();case b.ASTNode.types.BLOCK:var e=this.location_.nextConnection;if(e)return b.ASTNode.createConnectionNode(e);break;case b.ASTNode.types.PREVIOUS:return b.ASTNode.createBlockNode(this.location_.getSourceBlock());case b.ASTNode.types.NEXT:if(e=this.location_.targetConnection)return b.ASTNode.createConnectionNode(e)}return null};b.ASTNode.prototype.in=function(){switch(this.type_){case b.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return b.ASTNode.createStackNode(e[0]);break;case b.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case b.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case b.ASTNode.types.INPUT:if(e=this.location_.targetConnection)return b.ASTNode.createConnectionNode(e)}return null};b.ASTNode.prototype.prev=function(){switch(this.type_){case b.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case b.ASTNode.types.FIELD:return this.findPrevForField_();case b.ASTNode.types.INPUT:return this.findPrevForInput_();case b.ASTNode.types.BLOCK:var e=this.location_.outputConnection;if(e=this.location_.previousConnection||e)return b.ASTNode.createConnectionNode(e);break;case b.ASTNode.types.PREVIOUS:if((e=this.location_.targetConnection)&&!e.getParentInput())return b.ASTNode.createConnectionNode(e);break;case b.ASTNode.types.NEXT:return b.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null};b.ASTNode.prototype.out=function(){switch(this.type_){case b.ASTNode.types.STACK:var e=this.location_.getRelativeToSurfaceXY(),e=new b.utils.Coordinate(e.x,e.y+b.ASTNode.DEFAULT_OFFSET_Y);return b.ASTNode.createWorkspaceNode(this.location_.workspace,e);case b.ASTNode.types.OUTPUT:return(e=this.location_.targetConnection)?b.ASTNode.createConnectionNode(e):b.ASTNode.createStackNode(this.location_.getSourceBlock());case b.ASTNode.types.FIELD:case b.ASTNode.types.INPUT:return b.ASTNode.createBlockNode(this.location_.getSourceBlock());case b.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case b.ASTNode.types.PREVIOUS:case b.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null};b.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};b.user={};b.user.keyMap={};b.user.keyMap.map_={};b.user.keyMap.modifierKeys={SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta"};b.user.keyMap.setActionForKey=function(e,t){var n=b.user.keyMap.getKeyByAction(t);n&&delete b.user.keyMap.map_[n];b.user.keyMap.map_[e]=t};b.user.keyMap.setKeyMap=function(e){b.user.keyMap.map_=e};b.user.keyMap.getKeyMap=function(){var e={};b.utils.object.mixin(e,b.user.keyMap.map_);return e};b.user.keyMap.getActionByKeyCode=function(e){return b.user.keyMap.map_[e]};b.user.keyMap.getKeyByAction=function(e){for(var t,n=Object.keys(b.user.keyMap.map_),o=0;t=n[o];o++)if(b.user.keyMap.map_[t].name===e.name)return t;return null};b.user.keyMap.serializeKeyEvent=function(e){for(var t,n=b.utils.object.values(b.user.keyMap.modifierKeys),o="",i=0;t=n[i];i++)e.getModifierState(t)&&(o+=t);return o+e.keyCode};b.user.keyMap.createSerializedKey=function(e,t){for(var n,o="",i=b.utils.object.values(b.user.keyMap.modifierKeys),r=0;n=t[r];r++){if(!(-1<i.indexOf(n)))throw Error(n+" is not a valid modifier key.");o+=n}return o+e};b.user.keyMap.createDefaultKeyMap=function(){var e={},t=b.user.keyMap.createSerializedKey(b.utils.KeyCodes.K,[b.user.keyMap.modifierKeys.CONTROL]);e[b.utils.KeyCodes.W]=b.navigation.ACTION_PREVIOUS;e[b.utils.KeyCodes.A]=b.navigation.ACTION_OUT;e[b.utils.KeyCodes.S]=b.navigation.ACTION_NEXT;e[b.utils.KeyCodes.D]=b.navigation.ACTION_IN;e[b.utils.KeyCodes.I]=b.navigation.ACTION_INSERT;e[b.utils.KeyCodes.ENTER]=b.navigation.ACTION_MARK;e[b.utils.KeyCodes.X]=b.navigation.ACTION_DISCONNECT;e[b.utils.KeyCodes.T]=b.navigation.ACTION_TOOLBOX;e[b.utils.KeyCodes.E]=b.navigation.ACTION_EXIT;e[b.utils.KeyCodes.ESC]=b.navigation.ACTION_EXIT;e[t]=b.navigation.ACTION_TOGGLE_KEYBOARD_NAV;return e};b.navigation={};b.navigation.loggingCallback=null;b.navigation.STATE_FLYOUT=1;b.navigation.STATE_WS=2;b.navigation.STATE_TOOLBOX=3;b.navigation.currentState_=b.navigation.STATE_WS;b.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav"};b.navigation.focusToolbox_=function(){var e=b.getMainWorkspace(),t=e.getToolbox();t&&(b.navigation.currentState_=b.navigation.STATE_TOOLBOX,b.navigation.resetFlyout_(!1),e.getMarker().getCurNode()||b.navigation.markAtCursor_(),t.selectFirstCategory())};b.navigation.focusFlyout_=function(){b.navigation.currentState_=b.navigation.STATE_FLYOUT;var e=b.getMainWorkspace(),t=(t=e.getToolbox())?t.flyout_:e.getFlyout();e.getMarker().getCurNode()||b.navigation.markAtCursor_();t&&t.getWorkspace()&&(0<(e=t.getWorkspace().getTopBlocks(!0)).length&&(e=e[0],e=b.ASTNode.createStackNode(e),b.navigation.getFlyoutCursor_().setCurNode(e)))};b.navigation.focusWorkspace_=function(){b.hideChaff();var e=b.getMainWorkspace(),t=e.getCursor(),n=!!e.getToolbox(),o=e.getTopBlocks(!0);b.navigation.resetFlyout_(n);b.navigation.currentState_=b.navigation.STATE_WS;0<o.length?t.setCurNode(b.navigation.getTopNode(o[0])):(n=new b.utils.Coordinate(100,100),e=b.ASTNode.createWorkspaceNode(e,n),t.setCurNode(e))};b.navigation.getFlyoutCursor_=function(){var e=b.getMainWorkspace(),t=null;e.rendered&&(t=(e=(t=e.getToolbox())?t.flyout_:e.getFlyout())?e.workspace_.getCursor():null);return t};b.navigation.insertFromFlyout=function(){var e=b.getMainWorkspace(),t=e.getFlyout();if(t&&t.isVisible()){var n=b.navigation.getFlyoutCursor_().getCurNode().getLocation();n.isEnabled()?((t=t.createBlock(n)).render(),t.setConnectionsHidden(!1),e.getCursor().setCurNode(b.ASTNode.createBlockNode(t)),b.navigation.modify_()||b.navigation.warn_("Something went wrong while inserting a block from the flyout."),b.navigation.focusWorkspace_(),e.getCursor().setCurNode(b.navigation.getTopNode(t)),b.navigation.removeMark_()):b.navigation.warn_("Can't insert a disabled block.")}else b.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")};b.navigation.resetFlyout_=function(e){b.navigation.getFlyoutCursor_()&&(b.navigation.getFlyoutCursor_().hide(),e&&b.getMainWorkspace().getFlyout().hide())};b.navigation.modifyWarn_=function(){var e=b.getMainWorkspace().getMarker().getCurNode(),t=b.getMainWorkspace().getCursor().getCurNode();if(!e)return b.navigation.warn_("Cannot insert with no marked node."),!1;if(!t)return b.navigation.warn_("Cannot insert with no cursor node."),!1;e=e.getType();t=t.getType();return e==b.ASTNode.types.FIELD?(b.navigation.warn_("Should not have been able to mark a field."),!1):e==b.ASTNode.types.BLOCK?(b.navigation.warn_("Should not have been able to mark a block."),!1):e==b.ASTNode.types.STACK?(b.navigation.warn_("Should not have been able to mark a stack."),!1):t==b.ASTNode.types.FIELD?(b.navigation.warn_("Cannot attach a field to anything else."),!1):t!=b.ASTNode.types.WORKSPACE||(b.navigation.warn_("Cannot attach a workspace to anything else."),!1)};b.navigation.moveBlockToWorkspace_=function(e,t){if(e.isShadow())return b.navigation.warn_("Cannot move a shadow block to the workspace."),!1;e.getParent()&&e.unplug(!1);e.moveTo(t.getWsCoordinate());return!0};b.navigation.modify_=function(){var e=b.getMainWorkspace().getMarker().getCurNode(),t=b.getMainWorkspace().getCursor().getCurNode();if(!b.navigation.modifyWarn_())return!1;var n=e.getType(),o=t.getType(),i=t.getLocation(),r=e.getLocation();if(e.isConnection()&&t.isConnection())return b.navigation.connect_(i,r);if(e.isConnection()&&(o==b.ASTNode.types.BLOCK||o==b.ASTNode.types.STACK))return b.navigation.insertBlock(i,r);if(n==b.ASTNode.types.WORKSPACE)return t=b.navigation.getSourceBlock_(t),b.navigation.moveBlockToWorkspace_(t,e);b.navigation.warn_("Unexpected state in Blockly.navigation.modify_.");return!1};b.navigation.disconnectChild_=function(e,t){var n=e.getSourceBlock(),o=t.getSourceBlock();n.getRootBlock()==o.getRootBlock()&&(-1<n.getDescendants(!1).indexOf(o)?b.navigation.getInferiorConnection_(t):b.navigation.getInferiorConnection_(e)).disconnect()};b.navigation.moveAndConnect_=function(e,t){if(!e||!t)return!1;var n=e.getSourceBlock();return t.canConnectWithReason_(e)==b.Connection.CAN_CONNECT&&(b.navigation.disconnectChild_(e,t),t.isSuperior()||n.getRootBlock().positionNearConnection(e,t),t.connect(e),!0)};b.navigation.getInferiorConnection_=function(e){var t=e.getSourceBlock();return e.isSuperior()?t.previousConnection||t.outputConnection||null:e};b.navigation.getSuperiorConnection_=function(e){return e.isSuperior()?e:e.targetConnection||null};b.navigation.connect_=function(e,t){if(!e||!t)return!1;var n=b.navigation.getInferiorConnection_(e),o=b.navigation.getSuperiorConnection_(t),i=b.navigation.getSuperiorConnection_(e),r=b.navigation.getInferiorConnection_(t);if(n&&o&&b.navigation.moveAndConnect_(n,o)||i&&r&&b.navigation.moveAndConnect_(i,r)||b.navigation.moveAndConnect_(e,t))return!0;try{t.checkConnection_(e)}catch(e){b.navigation.warn_("Connection failed with error: "+e)}return!1};b.navigation.insertBlock=function(e,t){switch(t.type){case b.PREVIOUS_STATEMENT:if(b.navigation.connect_(e.nextConnection,t))return!0;break;case b.NEXT_STATEMENT:if(b.navigation.connect_(e.previousConnection,t))return!0;break;case b.INPUT_VALUE:if(b.navigation.connect_(e.outputConnection,t))return!0;break;case b.OUTPUT_VALUE:for(var n=0;n<e.inputList.length;n++){var o=e.inputList[n].connection;if(o&&o.type===b.INPUT_VALUE&&b.navigation.connect_(o,t))return!0}if(e.outputConnection&&b.navigation.connect_(e.outputConnection,t))return!0}b.navigation.warn_("This block can not be inserted at the marked location.");return!1};b.navigation.disconnectBlocks_=function(){var e=b.getMainWorkspace(),t=e.getCursor().getCurNode();if(t.isConnection()){var n=t.getLocation();n.isConnected()?(t=n.isSuperior()?n:n.targetConnection,(n=n.isSuperior()?n.targetConnection:n).getSourceBlock().isShadow()?b.navigation.log_("Cannot disconnect a shadow block"):(t.disconnect(),n.bumpAwayFrom_(t),t.getSourceBlock().getRootBlock().bringToFront(),t=b.ASTNode.createConnectionNode(t),e.getCursor().setCurNode(t))):b.navigation.log_("Cannot disconnect unconnected connection")}else b.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")};b.navigation.markAtCursor_=function(){var e=b.getMainWorkspace();e.getMarker().setCurNode(e.getCursor().getCurNode())};b.navigation.removeMark_=function(){var e=b.getMainWorkspace();e.getMarker().setCurNode(null);e.getMarker().hide()};b.navigation.setState=function(e){b.navigation.currentState_=e};b.navigation.getSourceBlock_=function(e){return e?e.getType()===b.ASTNode.types.BLOCK||e.getType()===b.ASTNode.types.STACK?e.getLocation():e.getType()===b.ASTNode.types.WORKSPACE?null:e.getLocation().getSourceBlock():null};b.navigation.getTopNode=function(e){var t=e.previousConnection||e.outputConnection;return t?b.ASTNode.createConnectionNode(t):b.ASTNode.createBlockNode(e)};b.navigation.moveCursorOnBlockDelete=function(e){var t=b.getMainWorkspace();if(t=t&&t.getCursor()){var n=t.getCurNode();(n=b.navigation.getSourceBlock_(n))===e?n.getParent()?(e=n.previousConnection||n.outputConnection)&&t.setCurNode(b.ASTNode.createConnectionNode(e.targetConnection)):t.setCurNode(b.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY())):-1<e.getChildren(!1).indexOf(n)&&t.setCurNode(b.ASTNode.createWorkspaceNode(n.workspace,n.getRelativeToSurfaceXY()))}};b.navigation.moveCursorOnBlockMutation=function(e){var t=b.getMainWorkspace().getCursor();if(t){var n=t.getCurNode();(n=b.navigation.getSourceBlock_(n))===e&&t.setCurNode(b.ASTNode.createBlockNode(n))}};b.navigation.enableKeyboardAccessibility=function(){b.keyboardAccessibilityMode||(b.keyboardAccessibilityMode=!0,b.navigation.focusWorkspace_())};b.navigation.disableKeyboardAccessibility=function(){if(b.keyboardAccessibilityMode){var e=b.getMainWorkspace();b.keyboardAccessibilityMode=!1;e.getCursor().hide();e.getMarker().hide();b.navigation.getFlyoutCursor_()&&b.navigation.getFlyoutCursor_().hide()}};b.navigation.log_=function(e){b.navigation.loggingCallback?b.navigation.loggingCallback("log",e):console.log(e)};b.navigation.warn_=function(e){b.navigation.loggingCallback?b.navigation.loggingCallback("warn",e):console.warn(e)};b.navigation.error_=function(e){b.navigation.loggingCallback?b.navigation.loggingCallback("error",e):console.error(e)};b.navigation.onKeyPress=function(e){e=b.user.keyMap.serializeKeyEvent(e);return!!(e=b.user.keyMap.getActionByKeyCode(e))&&b.navigation.onBlocklyAction(e)};b.navigation.onBlocklyAction=function(e){var t=b.getMainWorkspace().options.readOnly,n=!1;b.keyboardAccessibilityMode?(!t||-1<b.navigation.READONLY_ACTION_LIST.indexOf(e))&&(n=b.navigation.handleActions_(e)):e.name===b.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(b.navigation.enableKeyboardAccessibility(),n=!0);return n};b.navigation.handleActions_=function(e){var t=b.getMainWorkspace();if(e.name===b.navigation.actionNames.TOGGLE_KEYBOARD_NAV)return b.navigation.disableKeyboardAccessibility(),!0;if(e.name===b.navigation.actionNames.TOOLBOX)return t.getToolbox()?b.navigation.focusToolbox_():b.navigation.focusFlyout_(),!0;if(b.navigation.currentState_!==b.navigation.STATE_WS)return b.navigation.currentState_===b.navigation.STATE_FLYOUT?b.navigation.flyoutOnAction_(e):b.navigation.currentState_===b.navigation.STATE_TOOLBOX&&b.navigation.toolboxOnAction_(e);var n=!1;(t=t.getCursor().getCurNode())&&t.getType()===b.ASTNode.types.FIELD&&(n=t.getLocation().onBlocklyAction(e));return n=n||b.navigation.workspaceOnAction_(e)};b.navigation.workspaceOnAction_=function(e){var t=b.getMainWorkspace();switch(e.name){case b.navigation.actionNames.PREVIOUS:return t.getCursor().prev(),!0;case b.navigation.actionNames.OUT:return t.getCursor().out(),!0;case b.navigation.actionNames.NEXT:return t.getCursor().next(),!0;case b.navigation.actionNames.IN:return t.getCursor().in(),!0;case b.navigation.actionNames.INSERT:return b.navigation.modify_(),!0;case b.navigation.actionNames.MARK:return b.navigation.handleEnterForWS_(),!0;case b.navigation.actionNames.DISCONNECT:return b.navigation.disconnectBlocks_(),!0;default:return!1}};b.navigation.flyoutOnAction_=function(e){switch(e.name){case b.navigation.actionNames.PREVIOUS:return b.navigation.getFlyoutCursor_().prev(),!0;case b.navigation.actionNames.OUT:return b.navigation.focusToolbox_(),!0;case b.navigation.actionNames.NEXT:return b.navigation.getFlyoutCursor_().next(),!0;case b.navigation.actionNames.MARK:return b.navigation.insertFromFlyout(),!0;case b.navigation.actionNames.EXIT:return b.navigation.focusWorkspace_(),!0;default:return!1}};b.navigation.toolboxOnAction_=function(e){if(e.name===b.navigation.actionNames.EXIT)return b.navigation.focusWorkspace_(),!0;var t=b.getMainWorkspace().getToolbox().onBlocklyAction(e);return t||e.name!==b.navigation.actionNames.IN?t:(b.navigation.focusFlyout_(),!0)};b.navigation.handleEnterForWS_=function(){var e=b.getMainWorkspace().getCursor().getCurNode(),t=e.getType();t==b.ASTNode.types.FIELD?e.getLocation().showEditor_():e.isConnection()||t==b.ASTNode.types.WORKSPACE?b.navigation.markAtCursor_():t==b.ASTNode.types.BLOCK?b.navigation.warn_("Cannot mark a block."):t==b.ASTNode.types.STACK&&b.navigation.warn_("Cannot mark a stack.")};b.navigation.ACTION_PREVIOUS=new b.Action(b.navigation.actionNames.PREVIOUS,"Go to the previous location.");b.navigation.ACTION_OUT=new b.Action(b.navigation.actionNames.OUT,"Go to the parent of the current location.");b.navigation.ACTION_NEXT=new b.Action(b.navigation.actionNames.NEXT,"Go to the next location.");b.navigation.ACTION_IN=new b.Action(b.navigation.actionNames.IN,"Go to the first child of the current location.");b.navigation.ACTION_INSERT=new b.Action(b.navigation.actionNames.INSERT,"Connect the current location to the marked location.");b.navigation.ACTION_MARK=new b.Action(b.navigation.actionNames.MARK,"Mark the current location.");b.navigation.ACTION_DISCONNECT=new b.Action(b.navigation.actionNames.DISCONNECT,"Dicsonnect the block at thecurrent location from its parent.");b.navigation.ACTION_TOOLBOX=new b.Action(b.navigation.actionNames.TOOLBOX,"Open the toolbox.");b.navigation.ACTION_EXIT=new b.Action(b.navigation.actionNames.EXIT,"Close the current modal, such as a toolbox or field editor.");b.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new b.Action(b.navigation.actionNames.TOGGLE_KEYBOARD_NAV,"Turns on and off keyboard navigation.");b.navigation.READONLY_ACTION_LIST=[b.navigation.ACTION_PREVIOUS,b.navigation.ACTION_OUT,b.navigation.ACTION_IN,b.navigation.ACTION_NEXT,b.navigation.ACTION_TOGGLE_KEYBOARD_NAV];b.Names=function(e,t){this.variablePrefix_=t||"";this.reservedDict_=Object.create(null);if(e)for(e=e.split(","),t=0;t<e.length;t++)this.reservedDict_[e[t]]=!0;this.reset()};b.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE";b.Names.prototype.reset=function(){this.db_=Object.create(null);this.dbReverse_=Object.create(null);this.variableMap_=null};b.Names.prototype.setVariableMap=function(e){this.variableMap_=e};b.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the folowing code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)};b.Names.prototype.getName=function(e,t){if(t==b.Variables.NAME_TYPE){var n=this.getNameForUserVariable_(e);n&&(e=n)}n=e.toLowerCase()+"_"+t;var o=t==b.Variables.NAME_TYPE||t==b.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";if(n in this.db_)return o+this.db_[n];e=this.getDistinctName(e,t);this.db_[n]=e.substr(o.length);return e};b.Names.prototype.getDistinctName=function(e,t){e=this.safeName_(e);for(var n="";this.dbReverse_[e+n]||e+n in this.reservedDict_;)n=n?n+1:2;e+=n;this.dbReverse_[e]=!0;return(t==b.Variables.NAME_TYPE||t==b.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e};b.Names.prototype.safeName_=function(e){e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=b.Msg.UNNAMED_KEY||"unnamed";return e};b.Names.equals=function(e,t){return e.toLowerCase()==t.toLowerCase()};b.Procedures={};b.Procedures.NAME_TYPE=b.PROCEDURE_CATEGORY_NAME;b.Procedures.allProcedures=function(e){e=e.getAllBlocks(!1);for(var t=[],n=[],o=0;o<e.length;o++)if(e[o].getProcedureDef){var i=e[o].getProcedureDef();i&&(i[2]?t:n).push(i)}n.sort(b.Procedures.procTupleComparator_);t.sort(b.Procedures.procTupleComparator_);return[n,t]};b.Procedures.procTupleComparator_=function(e,t){return e[0].toLowerCase().localeCompare(t[0].toLowerCase())};b.Procedures.findLegalName=function(e,t){if(t.isInFlyout)return e;for(e=e||b.Msg.UNNAMED_KEY||"unnamed";!b.Procedures.isLegalName_(e,t.workspace,t);){var n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2],10)+1):e+"2"}return e};b.Procedures.isLegalName_=function(e,t,n){return!b.Procedures.isNameUsed(e,t,n)};b.Procedures.isNameUsed=function(e,t,n){t=t.getAllBlocks(!1);for(var o=0;o<t.length;o++)if(t[o]!=n&&t[o].getProcedureDef){var i=t[o].getProcedureDef();if(b.Names.equals(i[0],e))return!0}return!1};b.Procedures.rename=function(e){e=e.trim();var t=b.Procedures.findLegalName(e,this.getSourceBlock()),n=this.getValue();if(n!=e&&n!=t){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<e.length;o++)e[o].renameProcedure&&e[o].renameProcedure(n,t)}return t};b.Procedures.flyoutCategory=function(e){function t(e,t){for(var n=0;n<e.length;n++){var o=e[n][0],i=e[n][1],r=b.utils.xml.createElement("block");r.setAttribute("type",t);r.setAttribute("gap",16);var s=b.utils.xml.createElement("mutation");s.setAttribute("name",o);r.appendChild(s);for(o=0;o<i.length;o++){var a=b.utils.xml.createElement("arg");a.setAttribute("name",i[o]);s.appendChild(a)}l.push(r)}}var l=[];if(b.Blocks.procedures_defnoreturn){var n=b.utils.xml.createElement("block");n.setAttribute("type","procedures_defnoreturn");n.setAttribute("gap",16);var o=b.utils.xml.createElement("field");o.setAttribute("name","NAME");o.appendChild(b.utils.xml.createTextNode(b.Msg.PROCEDURES_DEFNORETURN_PROCEDURE));n.appendChild(o);l.push(n)}b.Blocks.procedures_defreturn&&((n=b.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),n.setAttribute("gap",16),(o=b.utils.xml.createElement("field")).setAttribute("name","NAME"),o.appendChild(b.utils.xml.createTextNode(b.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),n.appendChild(o),l.push(n));b.Blocks.procedures_ifreturn&&((n=b.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),n.setAttribute("gap",16),l.push(n));l.length&&l[l.length-1].setAttribute("gap",24);t((e=b.Procedures.allProcedures(e))[0],"procedures_callnoreturn");t(e[1],"procedures_callreturn");return l};b.Procedures.getCallers=function(e,t){var n=[];t=t.getAllBlocks(!1);for(var o=0;o<t.length;o++)if(t[o].getProcedureCall){var i=t[o].getProcedureCall();i&&b.Names.equals(i,e)&&n.push(t[o])}return n};b.Procedures.mutateCallers=function(e){var t,n=b.Events.recordUndo,o=e.getProcedureDef()[0],i=e.mutationToDom(!0);e=b.Procedures.getCallers(o,e.workspace);o=0;for(;t=e[o];o++){var r=(r=t.mutationToDom())&&b.Xml.domToText(r);t.domToMutation(i);var s=t.mutationToDom();r!=(s=s&&b.Xml.domToText(s))&&(b.Events.recordUndo=!1,b.Events.fire(new b.Events.BlockChange(t,"mutation",null,r,s)),b.Events.recordUndo=n)}};b.Procedures.getDefinition=function(e,t){t=t.getTopBlocks(!1);for(var n=0;n<t.length;n++)if(t[n].getProcedureDef){var o=t[n].getProcedureDef();if(o&&b.Names.equals(o[0],e))return t[n]}return null};b.VariableModel=function(e,t,n,o){this.workspace=e;this.name=t;this.type=n||"";this.id_=o||b.utils.genUid();b.Events.fire(new b.Events.VarCreate(this))};b.VariableModel.prototype.getId=function(){return this.id_};b.VariableModel.compareByName=function(e,t){return(e=e.name.toLowerCase())<(t=t.name.toLowerCase())?-1:e==t?0:1};b.Variables={};b.Variables.NAME_TYPE=b.VARIABLE_CATEGORY_NAME;b.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks(!1);e=Object.create(null);for(var n=0;n<t.length;n++){var o=t[n].getVarModels();if(o)for(var i=0;i<o.length;i++){var r=o[i],s=r.getId();s&&(e[s]=r)}}t=[];for(s in e)t.push(e[s]);return t};b.Variables.allUsedVariables=function(){console.warn("Deprecated call to Blockly.Variables.allUsedVariables. Use Blockly.Variables.allUsedVarModels instead.\nIf this is a major issue please file a bug on GitHub.")};b.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={};b.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var t,n=Object.create(null),o=0;t=e[o];o++){var i=t.getDeveloperVariables;!i&&t.getDeveloperVars&&(i=t.getDeveloperVars,b.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+t.type+"')"),b.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]=!0));if(i)for(t=i(),i=0;i<t.length;i++)n[t[i]]=!0}return Object.keys(n)};b.Variables.flyoutCategory=function(e){var t=[],n=document.createElement("button");n.setAttribute("text","%{BKY_NEW_VARIABLE}");n.setAttribute("callbackKey","CREATE_VARIABLE");e.registerButtonCallback("CREATE_VARIABLE",function(e){b.Variables.createVariableButtonHandler(e.getTargetWorkspace())});t.push(n);e=b.Variables.flyoutCategoryBlocks(e);return t.concat(e)};b.Variables.flyoutCategoryBlocks=function(e){var t=[];if(0<(e=e.getVariablesOfType("")).length){var n,o=e[e.length-1];if(b.Blocks.variables_set){var i=b.utils.xml.createElement("block");i.setAttribute("type","variables_set");i.setAttribute("gap",b.Blocks.math_change?8:24);i.appendChild(b.Variables.generateVariableFieldDom(o));t.push(i)}b.Blocks.math_change&&((i=b.utils.xml.createElement("block")).setAttribute("type","math_change"),i.setAttribute("gap",b.Blocks.variables_get?20:8),i.appendChild(b.Variables.generateVariableFieldDom(o)),o=b.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),i.appendChild(o),t.push(i));if(b.Blocks.variables_get){e.sort(b.VariableModel.compareByName);o=0;for(;n=e[o];o++)(i=b.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.setAttribute("gap",8),i.appendChild(b.Variables.generateVariableFieldDom(n)),t.push(i)}}return t};b.Variables.generateUniqueName=function(e){var t="";if((e=e.getAllVariables()).length)for(var n=1,o=0,i="ijkmnopqrstuvwxyzabcdefgh".charAt(o);!t;){for(var r=!1,s=0;s<e.length;s++)if(e[s].name.toLowerCase()==i){r=!0;break}r?(25==++o&&(o=0,n++),i="ijkmnopqrstuvwxyzabcdefgh".charAt(o),1<n&&(i+=n)):t=i}else t="i";return t};b.Variables.createVariableButtonHandler=function(i,r,e){var s=e||"",a=function(e){b.Variables.promptName(b.Msg.NEW_VARIABLE_TITLE,e,function(e){if(e){var t=b.Variables.nameUsedWithAnyType_(e,i);if(t){var n=e.toLowerCase(),o=t.type==s?b.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",n):(o=b.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",n).replace("%2",t.type);b.alert(o,function(){a(e)})}else i.createVariable(e,s),r&&r(e)}else r&&r(null)})};a("")};b.Variables.createVariable=b.Variables.createVariableButtonHandler;b.Variables.renameVariable=function(n,o,i){var r=function(e){var t=b.Msg.RENAME_VARIABLE_TITLE.replace("%1",o.name);b.Variables.promptName(t,e,function(e){if(e){var t=b.Variables.nameUsedWithOtherType_(e,o.type,n);t?(t=b.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",e.toLowerCase()).replace("%2",t.type),b.alert(t,function(){r(e)})):(n.renameVariableById(o.getId(),e),i&&i(e))}else i&&i(null)})};r(o.name)};b.Variables.promptName=function(e,t,n){b.prompt(e,t,function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==b.Msg.RENAME_VARIABLE||e==b.Msg.NEW_VARIABLE)&&(e=null);n(e)})};b.Variables.nameUsedWithOtherType_=function(e,t,n){n=n.getVariableMap().getAllVariables();e=e.toLowerCase();for(var o,i=0;o=n[i];i++)if(o.name.toLowerCase()==e&&o.type!=t)return o;return null};b.Variables.nameUsedWithAnyType_=function(e,t){t=t.getVariableMap().getAllVariables();e=e.toLowerCase();for(var n,o=0;n=t[o];o++)if(n.name.toLowerCase()==e)return n;return null};b.Variables.generateVariableFieldDom=function(e){var t=b.utils.xml.createElement("field");t.setAttribute("name","VAR");t.setAttribute("id",e.getId());t.setAttribute("variabletype",e.type);e=b.utils.xml.createTextNode(e.name);t.appendChild(e);return t};b.Variables.getOrCreateVariablePackage=function(e,t,n,o){return b.Variables.getVariable(e,t,n,o)||b.Variables.createVariable_(e,t,n,o)};b.Variables.getVariable=function(e,t,n,o){var i=e.getPotentialVariableMap();if(t){var r=e.getVariableById(t);!r&&i&&(r=i.getVariableById(t));if(r)return r}if(n){if(null==o)throw Error("Tried to look up a variable by name without a type");!(r=e.getVariable(n,o))&&i&&(r=i.getVariable(n,o))}return r};b.Variables.createVariable_=function(e,t,n,o){var i=e.getPotentialVariableMap();n=n||b.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e);return(i||e).createVariable(n,o,t)};b.Variables.getAddedVariables=function(e,t){e=e.getAllVariables();var n=[];if(t.length!=e.length)for(var o=0;o<e.length;o++){var i=e[o];-1==t.indexOf(i)&&n.push(i)}return n};b.WidgetDiv={};b.WidgetDiv.DIV=null;b.WidgetDiv.owner_=null;b.WidgetDiv.dispose_=null;b.WidgetDiv.createDom=function(){b.WidgetDiv.DIV||(b.WidgetDiv.DIV=document.createElement("div"),b.WidgetDiv.DIV.className="blocklyWidgetDiv",document.body.appendChild(b.WidgetDiv.DIV))};b.WidgetDiv.show=function(e,t,n){b.WidgetDiv.hide();b.WidgetDiv.owner_=e;b.WidgetDiv.dispose_=n;e=b.utils.style.getViewportPageOffset();b.WidgetDiv.DIV.style.top=e.y+"px";b.WidgetDiv.DIV.style.direction=t?"rtl":"ltr";b.WidgetDiv.DIV.style.display="block"};b.WidgetDiv.hide=function(){b.WidgetDiv.owner_&&(b.WidgetDiv.owner_=null,b.WidgetDiv.DIV.style.display="none",b.WidgetDiv.DIV.style.left="",b.WidgetDiv.DIV.style.top="",b.WidgetDiv.dispose_&&b.WidgetDiv.dispose_(),b.WidgetDiv.dispose_=null,b.WidgetDiv.DIV.innerHTML="")};b.WidgetDiv.isVisible=function(){return!!b.WidgetDiv.owner_};b.WidgetDiv.hideIfOwner=function(e){b.WidgetDiv.owner_==e&&b.WidgetDiv.hide()};b.WidgetDiv.positionInternal_=function(e,t,n){b.WidgetDiv.DIV.style.left=e+"px";b.WidgetDiv.DIV.style.top=t+"px";b.WidgetDiv.DIV.style.height=n+"px"};b.WidgetDiv.positionWithAnchor=function(e,t,n,o){var i=b.WidgetDiv.calculateY_(e,t,n);e=b.WidgetDiv.calculateX_(e,t,n,o);i<0?b.WidgetDiv.positionInternal_(e,0,n.height+i):b.WidgetDiv.positionInternal_(e,i,n.height)};b.WidgetDiv.calculateX_=function(e,t,n,o){if(o)return t=Math.max(t.right-n.width,e.left),Math.min(t,e.right-n.width);t=Math.min(t.left,e.right-n.width);return Math.max(t,e.left)};b.WidgetDiv.calculateY_=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom};b.VERSION="3.20191014.4";b.mainWorkspace=null;b.selected=null;b.cursor=null;b.keyboardAccessibilityMode=!1;b.overridePasteCb=null;b.draggingConnections_=[];b.clipboardXml_=null;b.clipboardSource_=null;b.clipboardTypeCounts_=null;b.cache3dSupported_=null;b.svgSize=function(e){return{width:e.cachedWidth_,height:e.cachedHeight_}};b.resizeSvgContents=function(e){e.resizeContents()};b.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var t=e.getParentSvg();if(o=t.parentNode){var n=o.offsetWidth,o=o.offsetHeight;t.cachedWidth_!=n&&(t.setAttribute("width",n+"px"),t.cachedWidth_=n);t.cachedHeight_!=o&&(t.setAttribute("height",o+"px"),t.cachedHeight_=o);e.resize()}};b.onKeyDown_=function(e){var t=b.mainWorkspace;if(!(b.utils.isTargetInput(e)||t.rendered&&!t.isVisible()))if(t.options.readOnly)b.navigation.onKeyPress(e);else{var n=!1;if(e.keyCode==b.utils.KeyCodes.ESC)b.hideChaff(),b.navigation.onBlocklyAction(b.navigation.ACTION_EXIT);else{if(b.navigation.onKeyPress(e))return;if(e.keyCode==b.utils.KeyCodes.BACKSPACE||e.keyCode==b.utils.KeyCodes.DELETE){e.preventDefault();if(b.Gesture.inProgress())return;b.selected&&b.selected.isDeletable()&&(n=!0)}else if(e.altKey||e.ctrlKey||e.metaKey){if(b.Gesture.inProgress())return;b.selected&&b.selected.isDeletable()&&b.selected.isMovable()&&(e.keyCode==b.utils.KeyCodes.C?(b.hideChaff(),b.copy_(b.selected)):e.keyCode!=b.utils.KeyCodes.X||b.selected.workspace.isFlyout||(b.copy_(b.selected),n=!0));e.keyCode==b.utils.KeyCodes.V?b.clipboardXml_&&((e=b.clipboardSource_).isFlyout&&(e=e.targetWorkspace),b.overridePasteCb?b.overridePasteCb():b.clipboardTypeCounts_&&e.isCapacityAvailable(b.clipboardTypeCounts_)&&(b.Events.setGroup(!0),e.paste(b.clipboardXml_),b.Events.setGroup(!1))):e.keyCode==b.utils.KeyCodes.Z&&(b.hideChaff(),t.undo(e.shiftKey))}}n&&!b.selected.workspace.isFlyout&&(b.Events.setGroup(!0),b.hideChaff(),b.selected.dispose(!0,!0),b.Events.setGroup(!1))}};b.copy_=function(e){if(e.isComment)var t=e.toXmlWithXY();else{t=b.Xml.blockToDom(e,!0);b.Xml.deleteNext(t);var n=e.getRelativeToSurfaceXY();t.setAttribute("x",e.RTL?-n.x:n.x);t.setAttribute("y",n.y)}b.clipboardXml_=t;b.clipboardSource_=e.workspace;b.clipboardTypeCounts_=e.isComment?null:b.utils.getBlockTypeCounts(e,!0)};b.duplicate_=function(e){var t=b.clipboardXml_,n=b.clipboardSource_;b.copy_(e);e.workspace.paste(b.clipboardXml_);b.clipboardXml_=t;b.clipboardSource_=n};b.onContextMenu_=function(e){b.utils.isTargetInput(e)||e.preventDefault()};b.hideChaff=function(e){b.Tooltip.hide();b.WidgetDiv.hide();b.DropDownDiv.hideWithoutAnimation();e||((e=b.getMainWorkspace()).trashcan&&e.trashcan.flyout_&&e.trashcan.flyout_.hide(),e.toolbox_&&e.toolbox_.flyout_&&e.toolbox_.flyout_.autoClose&&e.toolbox_.clearSelection())};b.getMainWorkspace=function(){return b.mainWorkspace};b.alert=function(e,t){alert(e);t&&t()};b.confirm=function(e,t){t(confirm(e))};b.prompt=function(e,t,n){n(prompt(e,t))};b.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}};b.defineBlocksWithJsonArray=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n){var o=n.type;null==o||""===o?console.warn("Block definition #"+t+" in JSON array is missing a type attribute. Skipping."):(b.Blocks[o]&&console.warn("Block definition #"+t+' in JSON array overwrites prior definition of "'+o+'".'),b.Blocks[o]={init:b.jsonInitFactory_(n)})}else console.warn("Block definition #"+t+" in JSON array is "+n+". Skipping.")}};b.bindEventWithChecks_=function(e,t,i,r,s,n){function o(e){var t=!s;e=b.Touch.splitEventByTouches(e);for(var n,o=0;n=e[o];o++)t&&!b.Touch.shouldHandleEvent(n)||(b.Touch.setClientFromTouch(n),i?r.call(i,n):r(n),a=!0)}var a=!1,l=[];if(b.utils.global.PointerEvent&&t in b.Touch.TOUCH_MAP)for(var c,u=0;c=b.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,o,!1),l.push([e,c,o]);else if(e.addEventListener(t,o,!1),l.push([e,t,o]),t in b.Touch.TOUCH_MAP)for(var d=function(e){o(e);a&&!n&&e.preventDefault()},u=0;c=b.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,d,!1),l.push([e,c,d]);return l};b.bindEvent_=function(e,t,n,o){function i(e){n?o.call(n,e):o(e)}var r=[];if(b.utils.global.PointerEvent&&t in b.Touch.TOUCH_MAP)for(var s,a=0;s=b.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,i,!1),r.push([e,s,i]);else if(e.addEventListener(t,i,!1),r.push([e,t,i]),t in b.Touch.TOUCH_MAP)for(var l=function(e){if(e.changedTouches&&1==e.changedTouches.length){var t=e.changedTouches[0];e.clientX=t.clientX;e.clientY=t.clientY}i(e);e.preventDefault()},a=0;s=b.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,l,!1),r.push([e,s,l]);return r};b.unbindEvent_=function(e){for(;e.length;){var t=e.pop(),n=t[2];t[0].removeEventListener(t[1],n,!1)}return n};b.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)};b.hueToHex=function(e){return b.utils.colour.hsvToHex(e,b.HSV_SATURATION,255*b.HSV_VALUE)};b.checkBlockColourConstants=function(){b.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0);b.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210);b.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0);b.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120);b.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0);b.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230);b.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0);b.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160);b.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0);b.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260);b.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0);b.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20);b.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0);b.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330);b.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310);b.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)};b.checkBlockColourConstant_=function(e,t,n){for(var o="Blockly",i=b,r=0;r<t.length;++r)o+="."+t[r],i=i&&i[t[r]];i&&i!==n&&(e=(void 0===n?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",e),console.warn(e))};b.Comment=function(e){b.Comment.superClass_.constructor.call(this,e);this.model_=e.commentModel;this.model_.text=this.model_.text||"";this.cachedText_="";this.createIcon()};b.utils.object.inherits(b.Comment,b.Icon);b.Comment.prototype.drawIcon_=function(e){b.utils.dom.createSvgElement("circle",{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},e);b.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},e);b.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},e)};b.Comment.prototype.createEditor_=function(){this.foreignObject_=b.utils.dom.createSvgElement("foreignObject",{x:b.Bubble.BORDER_WIDTH,y:b.Bubble.BORDER_WIDTH},null);var e=document.createElementNS(b.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",b.utils.dom.HTML_NS);e.className="blocklyMinimalBody";var t=this.textarea_=document.createElementNS(b.utils.dom.HTML_NS,"textarea");t.className="blocklyCommentTextarea";t.setAttribute("dir",this.block_.RTL?"RTL":"LTR");t.value=this.model_.text;this.resizeTextarea_();e.appendChild(t);this.foreignObject_.appendChild(e);b.bindEventWithChecks_(t,"mouseup",this,this.startEdit_,!0,!0);b.bindEventWithChecks_(t,"wheel",this,function(e){e.stopPropagation()});b.bindEventWithChecks_(t,"change",this,function(e){this.cachedText_!=this.model_.text&&b.Events.fire(new b.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))});b.bindEventWithChecks_(t,"input",this,function(e){this.model_.text=t.value});setTimeout(t.focus.bind(t),0);return this.foreignObject_};b.Comment.prototype.updateEditable=function(){b.Comment.superClass_.updateEditable.call(this);this.isVisible()&&(this.disposeBubble_(),this.createBubble_())};b.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())};b.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,t=2*b.Bubble.BORDER_WIDTH,n=e.width-t,e=e.height-t;this.foreignObject_.setAttribute("width",n);this.foreignObject_.setAttribute("height",e);this.textarea_.style.width=n-4+"px";this.textarea_.style.height=e-4+"px"};b.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(b.Events.fire(new b.Events.Ui(this.block_,"commentOpen",!e,e)),(this.model_.pinned=e)?this.createBubble_():this.disposeBubble_())};b.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||b.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()};b.Comment.prototype.createEditableBubble_=function(){this.bubble_=new b.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,this.model_.size.width,this.model_.size.height);this.bubble_.setSvgId(this.block_.id);this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this));this.updateColour()};b.Comment.prototype.createNonEditableBubble_=function(){b.Warning.prototype.createBubble.call(this)};b.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?b.Warning.prototype.disposeBubble.call(this):(this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)};b.Comment.prototype.startEdit_=function(e){this.bubble_.promote_()&&this.textarea_.focus();this.cachedText_=this.model_.text};b.Comment.prototype.getBubbleSize=function(){return this.model_.size};b.Comment.prototype.setBubbleSize=function(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model_.size.width=e,this.model_.size.height=t)};b.Comment.prototype.getText=function(){return this.model_.text||""};b.Comment.prototype.setText=function(e){this.model_.text!=e&&(this.model_.text=e,this.updateText())};b.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)};b.Comment.prototype.dispose=function(){this.block_.comment=null;b.Icon.prototype.dispose.call(this)};b.FlyoutCursor=function(){b.FlyoutCursor.superClass_.constructor.call(this)};b.utils.object.inherits(b.FlyoutCursor,b.Cursor);b.FlyoutCursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;(e=e.next())&&this.setCurNode(e);return e};b.FlyoutCursor.prototype.in=function(){return null};b.FlyoutCursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;(e=e.prev())&&this.setCurNode(e);return e};b.FlyoutCursor.prototype.out=function(){return null};b.Flyout=function(e){e.getMetrics=this.getMetrics_.bind(this);e.setMetrics=this.setMetrics_.bind(this);this.workspace_=new b.WorkspaceSvg(e);this.workspace_.isFlyout=!0;this.workspace_.setCursor(new b.FlyoutCursor);this.workspace_.setMarker(new b.MarkerCursor);this.RTL=!!e.RTL;this.toolboxPosition_=e.toolboxPosition;this.eventWrappers_=[];this.mats_=[];this.buttons_=[];this.listeners_=[];this.permanentlyDisabled_=[];this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH};b.Flyout.prototype.autoClose=!0;b.Flyout.prototype.isVisible_=!1;b.Flyout.prototype.containerVisible_=!0;b.Flyout.prototype.CORNER_RADIUS=8;b.Flyout.prototype.MARGIN=b.Flyout.prototype.CORNER_RADIUS;b.Flyout.prototype.GAP_X=3*b.Flyout.prototype.MARGIN;b.Flyout.prototype.GAP_Y=3*b.Flyout.prototype.MARGIN;b.Flyout.prototype.SCROLLBAR_PADDING=2;b.Flyout.prototype.width_=0;b.Flyout.prototype.height_=0;b.Flyout.prototype.dragAngleRange_=70;b.Flyout.prototype.createDom=function(e){this.svgGroup_=b.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null);this.svgBackground_=b.utils.dom.createSvgElement("path",{class:"blocklyFlyoutBackground"},this.svgGroup_);this.svgGroup_.appendChild(this.workspace_.createDom());this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyout","fill");this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity");return this.svgGroup_};b.Flyout.prototype.init=function(e){this.targetWorkspace_=e;this.workspace_.targetWorkspace=e;this.scrollbar_=new b.Scrollbar(this.workspace_,this.horizontalLayout_,!1,"blocklyFlyoutScrollbar");this.hide();Array.prototype.push.apply(this.eventWrappers_,b.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_));this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace_.addChangeListener(this.filterWrapper_));Array.prototype.push.apply(this.eventWrappers_,b.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_));this.workspace_.getGesture=this.targetWorkspace_.getGesture.bind(this.targetWorkspace_);this.workspace_.variableMap_=this.targetWorkspace_.getVariableMap();this.workspace_.createPotentialVariableMap()};b.Flyout.prototype.dispose=function(){this.hide();b.unbindEvent_(this.eventWrappers_);this.filterWrapper_&&(this.targetWorkspace_.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null);this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null);this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null);this.svgGroup_&&(b.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.targetWorkspace_=this.svgBackground_=null};b.Flyout.prototype.getWidth=function(){return this.width_};b.Flyout.prototype.getHeight=function(){return this.height_};b.Flyout.prototype.getWorkspace=function(){return this.workspace_};b.Flyout.prototype.isVisible=function(){return this.isVisible_};b.Flyout.prototype.setVisible=function(e){var t=e!=this.isVisible();this.isVisible_=e;t&&this.updateDisplay_()};b.Flyout.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e;t&&this.updateDisplay_()};b.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none";this.scrollbar_.setContainerVisible(e)};b.Flyout.prototype.positionAt_=function(e,t,n,o){this.svgGroup_.setAttribute("width",e);this.svgGroup_.setAttribute("height",t);"svg"==this.svgGroup_.tagName?b.utils.dom.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+n+","+o+")");this.scrollbar_&&(this.scrollbar_.setOrigin(n,o),this.scrollbar_.resize(),this.scrollbar_.setPosition_(this.scrollbar_.position_.x,this.scrollbar_.position_.y))};b.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,t=0;e=this.listeners_[t];t++)b.unbindEvent_(e);this.listeners_.length=0;this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}};b.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1);this.hide();this.clearOldBlocks_();if("string"==typeof e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");e=e(this.workspace_.targetWorkspace);if(!Array.isArray(e))throw TypeError("Result of toolbox category callback must be an array.")}this.setVisible(!0);var t=[],n=[];this.permanentlyDisabled_.length=0;for(var o,i=this.horizontalLayout_?this.GAP_X:this.GAP_Y,r=0;o=e[r];r++)if(o.tagName)switch(o.tagName.toUpperCase()){case"BLOCK":var s=b.Xml.domToBlock(o,this.workspace_);s.isEnabled()||this.permanentlyDisabled_.push(s);t.push({type:"block",block:s});o=parseInt(o.getAttribute("gap"),10);n.push(isNaN(o)?i:o);break;case"SEP":o=parseInt(o.getAttribute("gap"),10);!isNaN(o)&&0<n.length?n[n.length-1]=o:n.push(i);break;case"LABEL":case"BUTTON":s="LABEL"==o.tagName.toUpperCase();if(!b.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");o=new b.FlyoutButton(this.workspace_,this.targetWorkspace_,o,s);t.push({type:"button",button:o});n.push(i)}this.layout_(t,n);this.listeners_.push(b.bindEventWithChecks_(this.svgBackground_,"mouseover",this,function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.removeSelect()}));this.horizontalLayout_?this.height_=0:this.width_=0;this.workspace_.setResizesEnabled(!0);this.reflow();this.filterForCapacity_();this.position();this.reflowWrapper_=this.reflow.bind(this);this.workspace_.addChangeListener(this.reflowWrapper_)};b.Flyout.prototype.clearOldBlocks_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&b.utils.dom.removeNode(t);for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0;this.workspace_.getPotentialVariableMap().clear()};b.Flyout.prototype.addBlockListeners_=function(e,t,n){this.listeners_.push(b.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(t)));this.listeners_.push(b.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(t)));this.listeners_.push(b.bindEvent_(e,"mouseover",t,t.addSelect));this.listeners_.push(b.bindEvent_(e,"mouseout",t,t.removeSelect));this.listeners_.push(b.bindEvent_(n,"mouseover",t,t.addSelect));this.listeners_.push(b.bindEvent_(n,"mouseout",t,t.removeSelect))};b.Flyout.prototype.blockMouseDown_=function(n){var o=this;return function(e){var t=o.targetWorkspace_.getGesture(e);t&&(t.setStartBlock(n),t.handleFlyoutStart(e,o))}};b.Flyout.prototype.onMouseDown_=function(e){var t=this.targetWorkspace_.getGesture(e);t&&t.handleFlyoutStart(e,this)};b.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()};b.Flyout.prototype.createBlock=function(e){var t=null;b.Events.disable();var n=this.targetWorkspace_.getAllVariables();this.targetWorkspace_.setResizesEnabled(!1);try{t=this.placeNewBlock_(e),b.hideChaff()}finally{b.Events.enable()}e=b.Variables.getAddedVariables(this.targetWorkspace_,n);if(b.Events.isEnabled())for(b.Events.setGroup(!0),b.Events.fire(new b.Events.Create(t)),n=0;n<e.length;n++)b.Events.fire(new b.Events.VarCreate(e[n]));this.autoClose?this.hide():this.filterForCapacity_();return t};b.Flyout.prototype.initFlyoutButton_=function(e,t,n){var o=e.createDom();e.moveTo(t,n);e.show();this.listeners_.push(b.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_));this.buttons_.push(e)};b.Flyout.prototype.createRect_=function(e,t,n,o,i){(t=b.utils.dom.createSvgElement("rect",{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width},null)).tooltip=e;b.Tooltip.bindMouseEvents(t);this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot());e.flyoutRect_=t;return this.mats_[i]=t};b.Flyout.prototype.moveRectToBlock_=function(e,t){var n=t.getHeightWidth();e.setAttribute("width",n.width);e.setAttribute("height",n.height);t=t.getRelativeToSurfaceXY();e.setAttribute("y",t.y);e.setAttribute("x",this.RTL?t.x-n.width:t.x)};b.Flyout.prototype.filterForCapacity_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var o=this.targetWorkspace_.isCapacityAvailable(b.utils.getBlockTypeCounts(e));e;)e.setEnabled(o),e=e.getNextBlock()};b.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_);this.reflowInternal_();this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)};b.Flyout.prototype.isScrollable=function(){return!!this.scrollbar_&&this.scrollbar_.isVisible()};b.Flyout.prototype.placeNewBlock_=function(e){var t=this.targetWorkspace_;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");var n=b.Xml.blockToDom(e,!0);t.setResizesEnabled(!1);if(!(n=b.Xml.domToBlock(n,t)).getSvgRoot())throw Error("block is not rendered.");var o=t.getOriginOffsetInPixels(),i=this.workspace_.getOriginOffsetInPixels();(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale);e=b.utils.Coordinate.sum(i,e);(o=b.utils.Coordinate.difference(e,o)).scale(1/t.scale);n.moveBy(o.x,o.y);return n};b.HorizontalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this);e.setMetrics=this.setMetrics_.bind(this);b.HorizontalFlyout.superClass_.constructor.call(this,e);this.horizontalLayout_=!0};b.utils.object.inherits(b.HorizontalFlyout,b.Flyout);b.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.SCROLLBAR_PADDING;this.toolboxPosition_==b.TOOLBOX_AT_BOTTOM&&(e=0);var o=this.height_;this.toolboxPosition_==b.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING);return{viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,contentHeight:(t.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(t.width+2*this.MARGIN)*this.workspace_.scale,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,contentTop:0,contentLeft:0,absoluteTop:e,absoluteLeft:n}};b.HorizontalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.x&&(this.workspace_.scrollX=-t.contentWidth*e.x),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))};b.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace_.getMetrics();e&&(this.width_=e.viewWidth,this.setBackgroundPath_(e.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?e.toolboxHeight?this.toolboxPosition_==b.TOOLBOX_AT_TOP?e.toolboxHeight:e.viewHeight-this.height_:this.toolboxPosition_==b.TOOLBOX_AT_TOP?0:e.viewHeight:this.toolboxPosition_==b.TOOLBOX_AT_TOP?0:e.viewHeight+e.absoluteTop-this.height_))}};b.HorizontalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==b.TOOLBOX_AT_TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-1*e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS));o.push("z");this.svgBackground_.setAttribute("d",o.join(" "))};b.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(this.RTL?1/0:0)};b.HorizontalFlyout.prototype.wheel_=function(e){var t=b.utils.getScrollDeltaPixels(e),n=t.x||t.y;n&&(n=(t=this.getMetrics_()).viewLeft+n,n=Math.min(n,t.contentWidth-t.viewWidth),n=Math.max(n,0),this.scrollbar_.set(n),b.WidgetDiv.hide());e.preventDefault();e.stopPropagation()};b.HorizontalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(var i,r=0;i=e[r];r++)if("block"==i.type){for(var s,a=(i=i.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;i.render();a=i.getSvgRoot();l=i.getHeightWidth();s=i.outputConnection?this.tabWidth_:0;s=this.RTL?o+l.width:o-s;i.moveBy(s,n);s=this.createRect_(i,s,n,l,r);o+=l.width+t[r];this.addBlockListeners_(a,i,s)}else"button"==i.type&&(this.initFlyoutButton_(i.button,o,n),o+=i.button.width+t[r])};b.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<90+t&&90-t<e||-90-t<e&&e<-90+t};b.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_==b.TOOLBOX_AT_TOP?new b.utils.Rect(-1e9,t+e.height,-1e9,1e9):new b.utils.Rect(t,-1e9,-1e9,1e9)};b.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)t=Math.max(t,e.getHeightWidth().height);t+=1.5*this.MARGIN;t*=this.workspace_.scale;t+=b.Scrollbar.scrollbarThickness;if(this.height_!=t){for(o=0;e=n[o];o++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.height_=t;this.position()}};b.VerticalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this);e.setMetrics=this.setMetrics_.bind(this);b.VerticalFlyout.superClass_.constructor.call(this,e);this.horizontalLayout_=!1};b.utils.object.inherits(b.VerticalFlyout,b.Flyout);b.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.height_-2*this.SCROLLBAR_PADDING,o=this.width_;this.RTL||(o-=this.SCROLLBAR_PADDING);return{viewHeight:n,viewWidth:o,contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,contentTop:t.y,contentLeft:t.x,absoluteTop:e,absoluteLeft:0}};b.VerticalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.y&&(this.workspace_.scrollY=-t.contentHeight*e.y),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))};b.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace_.getMetrics();e&&(this.height_=e.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?e.toolboxWidth?this.toolboxPosition_==b.TOOLBOX_AT_LEFT?e.toolboxWidth:e.viewWidth-this.width_:this.toolboxPosition_==b.TOOLBOX_AT_LEFT?0:e.viewWidth:this.toolboxPosition_==b.TOOLBOX_AT_LEFT?0:e.viewWidth+e.absoluteLeft-this.width_,0))}};b.VerticalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==b.TOOLBOX_AT_RIGHT,o=e+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-e:e);o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS);o.push("v",Math.max(0,t));o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS);o.push("h",n?e:-e);o.push("z");this.svgBackground_.setAttribute("d",o.join(" "))};b.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(0)};b.VerticalFlyout.prototype.wheel_=function(e){if((n=b.utils.getScrollDeltaPixels(e)).y){var t=this.getMetrics_(),n=t.viewTop-t.contentTop+n.y;n=Math.min(n,t.contentHeight-t.viewHeight);n=Math.max(n,0);this.scrollbar_.set(n);b.WidgetDiv.hide()}e.preventDefault();e.stopPropagation()};b.VerticalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;for(var n,o=this.MARGIN,i=this.RTL?o:o+this.tabWidth_,r=0;n=e[r];r++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render();a=n.getSvgRoot();l=n.getHeightWidth();s=n.outputConnection?i-this.tabWidth_:i;n.moveBy(s,o);s=this.createRect_(n,this.RTL?s-l.width:s,o,l,r);this.addBlockListeners_(a,n,s);o+=l.height+t[r]}else"button"==n.type&&(this.initFlyoutButton_(n.button,i,o),o+=n.button.height+t[r])};b.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<t&&-t<e||e<-180+t||180-t<e};b.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.left;if(this.toolboxPosition_==b.TOOLBOX_AT_LEFT)return new b.utils.Rect(-1e9,1e9,-1e9,t+e.width);b.utils.userAgent.GECKO&&this.targetWorkspace_&&this.targetWorkspace_.isMutator&&(e=this.targetWorkspace_.svgGroup_.getBoundingClientRect().x,Math.abs(e-t)<10&&(t+=this.leftEdge_*this.targetWorkspace_.options.parentWorkspace.scale));return new b.utils.Rect(-1e9,1e9,t,1e9)};b.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++){var i=e.getHeightWidth().width;e.outputConnection&&(i-=this.tabWidth_);t=Math.max(t,i)}for(o=0;e=this.buttons_[o];o++)t=Math.max(t,e.width);t+=1.5*this.MARGIN+this.tabWidth_;t*=this.workspace_.scale;t+=b.Scrollbar.scrollbarThickness;if(this.width_!=t){for(o=0;e=n[o];o++){if(this.RTL){i=e.getRelativeToSurfaceXY().x;var r=t/this.workspace_.scale-this.MARGIN;e.outputConnection||(r-=this.tabWidth_);e.moveBy(r-i,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(o=0;e=this.buttons_[o];o++)n=e.getPosition().y,e.moveTo(t/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,n);this.width_=t;this.position()}};b.FlyoutButton=function(e,t,n,o){this.workspace_=e;this.targetWorkspace_=t;this.text_=n.getAttribute("text");this.position_=new b.utils.Coordinate(0,0);this.isLabel_=o;this.callbackKey_=n.getAttribute("callbackKey")||n.getAttribute("callbackkey");this.cssClass_=n.getAttribute("web-class")||null};b.FlyoutButton.MARGIN=5;b.FlyoutButton.prototype.width=0;b.FlyoutButton.prototype.height=0;b.FlyoutButton.prototype.onMouseUpWrapper_=null;b.FlyoutButton.prototype.createDom=function(){var e,t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(t+=" "+this.cssClass_);this.svgGroup_=b.utils.dom.createSvgElement("g",{class:t},this.workspace_.getCanvas());this.isLabel_||(e=b.utils.dom.createSvgElement("rect",{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_));t=b.utils.dom.createSvgElement("rect",{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var n=b.utils.dom.createSvgElement("text",{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);n.textContent=b.utils.replaceMessageReferences(this.text_);this.isLabel_&&(this.svgText_=n,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutText","fill"));this.width=b.utils.dom.getTextWidth(n);this.height=20;this.isLabel_||(this.width+=2*b.FlyoutButton.MARGIN,e.setAttribute("width",this.width),e.setAttribute("height",this.height));t.setAttribute("width",this.width);t.setAttribute("height",this.height);n.setAttribute("x",this.width/2);n.setAttribute("y",this.height-b.FlyoutButton.MARGIN);this.updateTransform_();this.onMouseUpWrapper_=b.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_);return this.svgGroup_};b.FlyoutButton.prototype.show=function(){this.updateTransform_();this.svgGroup_.setAttribute("display","block")};b.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")};b.FlyoutButton.prototype.moveTo=function(e,t){this.position_.x=e;this.position_.y=t;this.updateTransform_()};b.FlyoutButton.prototype.getPosition=function(){return this.position_};b.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_};b.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&b.unbindEvent_(this.onMouseUpWrapper_);this.svgGroup_&&b.utils.dom.removeNode(this.svgGroup_);this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)};b.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel();this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)};b.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,},.blocklyFlyoutLabelText {,fill: #000;,}".split(","));b.Generator=function(e){this.name_=e;this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")};b.Generator.NAME_TYPE="generated_function";b.Generator.prototype.INFINITE_LOOP_TRAP=null;b.Generator.prototype.STATEMENT_PREFIX=null;b.Generator.prototype.STATEMENT_SUFFIX=null;b.Generator.prototype.INDENT="  ";b.Generator.prototype.COMMENT_WRAP=60;b.Generator.prototype.ORDER_OVERRIDES=[];b.Generator.prototype.workspaceToCode=function(e,t){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=b.getMainWorkspace());var n=[];this.init(e);e=e.getTopBlocks(!0);for(var o,i=0;o=e[i];i++){var r=this.blockToCode(o);Array.isArray(r)&&(r=r[0]);r&&(o.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,o)+r),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,o))),n.push(r))}n=n.join("\n");t&&t();return(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")};b.Generator.prototype.prefixLines=function(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)};b.Generator.prototype.allNestedComments=function(e){var t=[];e=e.getDescendants(!0);for(var n=0;n<e.length;n++){var o=e[n].getCommentText();o&&t.push(o)}t.length&&t.push("");return t.join("\n")};b.Generator.prototype.blockToCode=function(e,t){if(!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());var n=this[e.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+e.type+'".');n=n.call(e,e);if(Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)};b.Generator.prototype.valueToCode=function(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o)return"";if(""===(t=this.blockToCode(o)))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+o.type);e=t[0];t=t[1];if(isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var i=Math.floor(n),r=Math.floor(t);if(i<=r&&(i!=r||0!=i&&99!=i))for(o=!0,i=0;i<this.ORDER_OVERRIDES.length;i++)if(this.ORDER_OVERRIDES[i][0]==n&&this.ORDER_OVERRIDES[i][1]==t){o=!1;break}o&&(e="("+e+")");return e};b.Generator.prototype.statementToCode=function(e,t){e=e.getInputTargetBlock(t);if("string"!=typeof(t=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return t=t&&this.prefixLines(t,this.INDENT)};b.Generator.prototype.addLoopTrap=function(e,t){this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e);this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e);this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT));return e};b.Generator.prototype.injectId=function(e,t){t=t.id.replace(/\$/g,"$$$$");return e.replace(/%1/g,"'"+t+"'")};b.Generator.prototype.RESERVED_WORDS_="";b.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","};b.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}";b.Generator.prototype.provideFunction_=function(e,t){if(!this.definitions_[e]){var n,o=this.variableDB_.getDistinctName(e,b.Procedures.NAME_TYPE);this.functionNames_[e]=o;t=t.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);for(;n!=t;)t=(n=t).replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT);this.definitions_[e]=t}return this.functionNames_[e]};b.Generator.prototype.init=function(e){};b.Generator.prototype.scrub_=function(e,t){return t};b.Generator.prototype.finish=function(e){return e};b.Generator.prototype.scrubNakedValue=function(e){return e};b.tree={};b.tree.BaseNode=function(e,t){b.Component.call(this);this.config_=t;this.content_=e;this.expanded_=this.selected_=!1;this.toolTip_=null;this.isUserCollapsible_=!0;this.depth_=-1};b.utils.object.inherits(b.tree.BaseNode,b.Component);b.tree.BaseNode.allNodes={};b.tree.BaseNode.prototype.disposeInternal=function(){b.tree.BaseNode.superClass_.disposeInternal.call(this);this.tree&&(this.tree=null);this.setElementInternal(null)};b.tree.BaseNode.prototype.initAccessibility=function(){var e=this.getElement();if(e){var t=this.getLabelElement();t&&!t.id&&(t.id=this.getId()+".label");b.utils.aria.setRole(e,b.utils.aria.Role.TREEITEM);b.utils.aria.setState(e,b.utils.aria.State.SELECTED,!1);b.utils.aria.setState(e,b.utils.aria.State.LEVEL,this.getDepth());t&&b.utils.aria.setState(e,b.utils.aria.State.LABELLEDBY,t.id);(t=this.getIconElement())&&b.utils.aria.setRole(t,b.utils.aria.Role.PRESENTATION);if((t=this.getChildrenElement())&&(b.utils.aria.setRole(t,b.utils.aria.Role.GROUP),t.hasChildNodes()))for(b.utils.aria.setState(e,b.utils.aria.State.EXPANDED,!1),e=this.getChildCount(),t=1;t<=e;t++){var n=this.getChildAt(t-1).getElement();b.utils.aria.setState(n,b.utils.aria.State.SETSIZE,e);b.utils.aria.setState(n,b.utils.aria.State.POSINSET,t)}}};b.tree.BaseNode.prototype.createDom=function(){var e=document.createElement("div");e.appendChild(this.toDom());this.setElementInternal(e)};b.tree.BaseNode.prototype.enterDocument=function(){b.tree.BaseNode.superClass_.enterDocument.call(this);(b.tree.BaseNode.allNodes[this.getId()]=this).initAccessibility()};b.tree.BaseNode.prototype.exitDocument=function(){b.tree.BaseNode.superClass_.exitDocument.call(this);delete b.tree.BaseNode.allNodes[this.getId()]};b.tree.BaseNode.prototype.addChildAt=function(e,t){var n=this.getChildAt(t-1),o=this.getChildAt(t);b.tree.BaseNode.superClass_.addChildAt.call(this,e,t);e.previousSibling_=n;e.nextSibling_=o;n?n.nextSibling_=e:this.firstChild_=e;o?o.previousSibling_=e:this.lastChild_=e;(t=this.getTree())&&e.setTreeInternal(t);e.setDepth_(this.getDepth()+1);if((t=this.getElement())&&(this.updateExpandIcon(),b.utils.aria.setState(t,b.utils.aria.State.EXPANDED,this.getExpanded()),this.getExpanded())){t=this.getChildrenElement();e.getElement()||e.createDom();var i=e.getElement(),r=o&&o.getElement();t.insertBefore(i,r);this.isInDocument()&&e.enterDocument();o||(n?n.updateExpandIcon():(b.utils.style.setElementShown(t,!0),this.setExpanded(this.getExpanded())))}};b.tree.BaseNode.prototype.add=function(e){if(e.getParent())throw Error(b.Component.Error.PARENT_UNABLE_TO_BE_SET);this.addChildAt(e,this.getChildCount())};b.tree.BaseNode.prototype.getTree=function(){return null};b.tree.BaseNode.prototype.getDepth=function(){var e=this.depth_;e<0&&(e=this.computeDepth_(),this.setDepth_(e));return e};b.tree.BaseNode.prototype.computeDepth_=function(){var e=this.getParent();return e?e.getDepth()+1:0};b.tree.BaseNode.prototype.setDepth_=function(t){if(t!=this.depth_){this.depth_=t;var e=this.getRowElement();if(e){var n=this.getPixelIndent_()+"px";this.isRightToLeft()?e.style.paddingRight=n:e.style.paddingLeft=n}this.forEachChild(function(e){e.setDepth_(t+1)})}};b.tree.BaseNode.prototype.contains=function(e){for(;e;){if(e==this)return!0;e=e.getParent()}return!1};b.tree.BaseNode.prototype.getChildren=function(){var t=[];this.forEachChild(function(e){t.push(e)});return t};b.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)};b.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)};b.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_};b.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_};b.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_};b.tree.BaseNode.prototype.isSelected=function(){return this.selected_};b.tree.BaseNode.prototype.select=function(){var e=this.getTree();e&&e.setSelectedItem(this)};b.tree.BaseNode.prototype.selectFirst=function(){var e=this.getTree();e&&this.firstChild_&&e.setSelectedItem(this.firstChild_)};b.tree.BaseNode.prototype.setSelectedInternal=function(e){if(this.selected_!=e){this.selected_=e;this.updateRow();var t=this.getElement();t&&(b.utils.aria.setState(t,b.utils.aria.State.SELECTED,e),e&&(e=this.getTree().getElement(),b.utils.aria.setState(e,b.utils.aria.State.ACTIVEDESCENDANT,this.getId())))}};b.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_};b.tree.BaseNode.prototype.setExpandedInternal=function(e){this.expanded_=e};b.tree.BaseNode.prototype.setExpanded=function(e){var t,n=e!=this.expanded_;this.expanded_=e;var o=this.getTree(),i=this.getElement();if(this.hasChildren()){if(!e&&o&&this.contains(o.getSelectedItem())&&this.select(),i){(t=this.getChildrenElement())&&(b.utils.style.setElementShown(t,e),b.utils.aria.setState(i,b.utils.aria.State.EXPANDED,e),e&&this.isInDocument()&&!t.hasChildNodes()&&(this.forEachChild(function(e){t.appendChild(e.toDom())}),this.forEachChild(function(e){e.enterDocument()})));this.updateExpandIcon()}}else(t=this.getChildrenElement())&&b.utils.style.setElementShown(t,!1);i&&this.updateIcon_();n&&(e?this.doNodeExpanded():this.doNodeCollapsed())};b.tree.BaseNode.prototype.doNodeExpanded=function(){};b.tree.BaseNode.prototype.doNodeCollapsed=function(){};b.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())};b.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_};b.tree.BaseNode.prototype.toDom=function(){var e=this.getExpanded()&&this.hasChildren(),t=document.createElement("div");t.style.backgroundPosition=this.getBackgroundPosition();e||(t.style.display="none");e&&this.forEachChild(function(e){t.appendChild(e.toDom())});(e=document.createElement("div")).id=this.getId();e.appendChild(this.getRowDom());e.appendChild(t);return e};b.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)};b.tree.BaseNode.prototype.getRowDom=function(){var e=document.createElement("div");e.className=this.getRowClassName();e.style["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px";e.appendChild(this.getIconDom());e.appendChild(this.getLabelDom());return e};b.tree.BaseNode.prototype.getRowClassName=function(){var e="";this.isSelected()&&(e=" "+(this.config_.cssSelectedRow||""));return this.config_.cssTreeRow+e};b.tree.BaseNode.prototype.getLabelDom=function(){var e=document.createElement("span");e.className=this.config_.cssItemLabel||"";e.textContent=this.getText();return e};b.tree.BaseNode.prototype.getIconDom=function(){var e=document.createElement("span");e.style.display="inline-block";e.className=this.getCalculatedIconClass();return e};b.tree.BaseNode.prototype.getCalculatedIconClass=function(){throw Error("unimplemented abstract method")};b.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"};b.tree.BaseNode.prototype.getElement=function(){var e=b.tree.BaseNode.superClass_.getElement.call(this);e||(e=document.getElementById(this.getId()),this.setElementInternal(e));return e};b.tree.BaseNode.prototype.getRowElement=function(){var e=this.getElement();return e?e.firstChild:null};b.tree.BaseNode.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null};b.tree.BaseNode.prototype.getLabelElement=function(){var e=this.getRowElement();return e&&e.lastChild?e.lastChild.previousSibling:null};b.tree.BaseNode.prototype.getChildrenElement=function(){var e=this.getElement();return e?e.lastChild:null};b.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_};b.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_};b.tree.BaseNode.prototype.setText=function(e){this.content_=e};b.tree.BaseNode.prototype.getText=function(){return this.content_};b.tree.BaseNode.prototype.updateRow=function(){var e=this.getRowElement();e&&(e.className=this.getRowClassName())};b.tree.BaseNode.prototype.updateExpandIcon=function(){var e=this.getChildrenElement();e&&(e.style.backgroundPosition=this.getBackgroundPosition())};b.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()};b.tree.BaseNode.prototype.onMouseDown=function(e){"expand"==e.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())};b.tree.BaseNode.prototype.onClick_=function(e){e.preventDefault()};b.tree.BaseNode.prototype.onKeyDown=function(e){var t=!0;switch(e.keyCode){case b.utils.KeyCodes.RIGHT:if(e.altKey)break;t=this.selectChild();break;case b.utils.KeyCodes.LEFT:if(e.altKey)break;t=this.selectParent();break;case b.utils.KeyCodes.DOWN:t=this.selectNext();break;case b.utils.KeyCodes.UP:t=this.selectPrevious();break;default:t=!1}t&&e.preventDefault();return t};b.tree.BaseNode.prototype.selectNext=function(){var e=this.getNextShownNode();e&&e.select();return!0};b.tree.BaseNode.prototype.selectPrevious=function(){var e=this.getPreviousShownNode();e&&e.select();return!0};b.tree.BaseNode.prototype.selectParent=function(){if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var e=this.getParent(),t=this.getTree();e&&e!=t&&e.select()}return!0};b.tree.BaseNode.prototype.selectChild=function(){return!!this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0),!0)};b.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this};b.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var e,t=this;t!=this.getTree();){if(null!=(e=t.getNextSibling()))return e;t=t.getParent()}return null};b.tree.BaseNode.prototype.getPreviousShownNode=function(){var e=this.getPreviousSibling();if(null!=e)return e.getLastShownDescendant();e=this.getParent();var t=this.getTree();return e==t||this==t?null:e};b.tree.BaseNode.prototype.getConfig=function(){return this.config_};b.tree.BaseNode.prototype.setTreeInternal=function(t){this.tree!=t&&(this.tree=t,this.forEachChild(function(e){e.setTreeInternal(t)}))};b.tree.TreeNode=function(e,t,n){this.toolbox_=e;b.tree.BaseNode.call(this,t,n)};b.utils.object.inherits(b.tree.TreeNode,b.tree.BaseNode);b.tree.TreeNode.prototype.getTree=function(){if(this.tree)return this.tree;var e=this.getParent();return(e=e&&e.getTree())?(this.setTreeInternal(e),e):null};b.tree.TreeNode.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();if(e&&t)return t;t=this.getIconClass();if(!e&&t)return t;t=this.getConfig();if(this.hasChildren()){if(e&&t.cssExpandedFolderIcon)return t.cssTreeIcon+" "+t.cssExpandedFolderIcon;if(!e&&t.cssCollapsedFolderIcon)return t.cssTreeIcon+" "+t.cssCollapsedFolderIcon}else if(t.cssFileIcon)return t.cssTreeIcon+" "+t.cssFileIcon;return""};b.tree.TreeNode.prototype.onClick_=function(e){this.hasChildren()&&this.isUserCollapsible()?(this.toggle(),this.select()):this.isSelected()?this.getTree().setSelectedItem(null):this.select();this.updateRow()};b.tree.TreeNode.prototype.onMouseDown=function(e){};b.tree.TreeNode.prototype.onKeyDown=function(e){if(this.tree.toolbox_.horizontalLayout_){var t={},n=b.utils.KeyCodes.DOWN,o=b.utils.KeyCodes.UP;t[b.utils.KeyCodes.RIGHT]=this.isRightToLeft()?o:n;t[b.utils.KeyCodes.LEFT]=this.isRightToLeft()?n:o;t[b.utils.KeyCodes.UP]=b.utils.KeyCodes.LEFT;t[b.utils.KeyCodes.DOWN]=b.utils.KeyCodes.RIGHT;Object.defineProperties(e,{keyCode:{value:t[e.keyCode]||e.keyCode}})}return b.tree.TreeNode.superClass_.onKeyDown.call(this,e)};b.tree.TreeNode.prototype.onSizeChanged=function(e){this.onSizeChanged_=e};b.tree.TreeNode.prototype.resizeToolbox_=function(){this.onSizeChanged_&&this.onSizeChanged_.call(this.toolbox_)};b.tree.TreeNode.prototype.doNodeExpanded=b.tree.TreeNode.prototype.resizeToolbox_;b.tree.TreeNode.prototype.doNodeCollapsed=b.tree.TreeNode.prototype.resizeToolbox_;b.tree.TreeControl=function(e,t){this.toolbox_=e;b.tree.BaseNode.call(this,"",t);this.setExpandedInternal(!0);this.setSelectedInternal(!0);this.selectedItem_=this};b.utils.object.inherits(b.tree.TreeControl,b.tree.BaseNode);b.tree.TreeControl.prototype.getTree=function(){return this};b.tree.TreeControl.prototype.getToolbox=function(){return this.toolbox_};b.tree.TreeControl.prototype.getDepth=function(){return 0};b.tree.TreeControl.prototype.handleFocus_=function(e){this.focused_=!0;e=this.getElement();b.utils.dom.addClass(e,"focused");this.selectedItem_&&this.selectedItem_.select()};b.tree.TreeControl.prototype.handleBlur_=function(e){this.focused_=!1;e=this.getElement();b.utils.dom.removeClass(e,"focused")};b.tree.TreeControl.prototype.hasFocus=function(){return this.focused_};b.tree.TreeControl.prototype.getExpanded=function(){return!0};b.tree.TreeControl.prototype.setExpanded=function(e){this.setExpandedInternal(e)};b.tree.TreeControl.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null};b.tree.TreeControl.prototype.updateExpandIcon=function(){};b.tree.TreeControl.prototype.getRowClassName=function(){return b.tree.TreeControl.superClass_.getRowClassName.call(this)+" "+this.getConfig().cssHideRoot};b.tree.TreeControl.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();if(e&&t)return t;t=this.getIconClass();if(!e&&t)return t;t=this.getConfig();return e&&t.cssExpandedRootIcon?t.cssTreeIcon+" "+t.cssExpandedRootIcon:""};b.tree.TreeControl.prototype.setSelectedItem=function(e){if(e!=this.selectedItem_&&(!this.onBeforeSelected_||this.onBeforeSelected_.call(this.toolbox_,e))){var t=this.getSelectedItem();this.selectedItem_&&this.selectedItem_.setSelectedInternal(!1);(this.selectedItem_=e)&&e.setSelectedInternal(!0);this.onAfterSelected_&&this.onAfterSelected_.call(this.toolbox_,t,e)}};b.tree.TreeControl.prototype.onBeforeSelected=function(e){this.onBeforeSelected_=e};b.tree.TreeControl.prototype.onAfterSelected=function(e){this.onAfterSelected_=e};b.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_};b.tree.TreeControl.prototype.initAccessibility=function(){b.tree.TreeControl.superClass_.initAccessibility.call(this);var e=this.getElement();b.utils.aria.setRole(e,b.utils.aria.Role.TREE);b.utils.aria.setState(e,b.utils.aria.State.LABELLEDBY,this.getLabelElement().id)};b.tree.TreeControl.prototype.enterDocument=function(){b.tree.TreeControl.superClass_.enterDocument.call(this);var e=this.getElement();e.className=this.getConfig().cssRoot;e.setAttribute("hideFocus","true");this.attachEvents_();this.initAccessibility()};b.tree.TreeControl.prototype.exitDocument=function(){b.tree.TreeControl.superClass_.exitDocument.call(this);this.detachEvents_()};b.tree.TreeControl.prototype.attachEvents_=function(){var e=this.getElement();e.tabIndex=0;this.onFocusWrapper_=b.bindEvent_(e,"focus",this,this.handleFocus_);this.onBlurWrapper_=b.bindEvent_(e,"blur",this,this.handleBlur_);this.onClickWrapper_=b.bindEventWithChecks_(e,"click",this,this.handleMouseEvent_);this.onKeydownWrapper_=b.bindEvent_(e,"keydown",this,this.handleKeyEvent_)};b.tree.TreeControl.prototype.detachEvents_=function(){b.unbindEvent_(this.onFocusWrapper_);b.unbindEvent_(this.onBlurWrapper_);b.unbindEvent_(this.onClickWrapper_);b.unbindEvent_(this.onKeydownWrapper_)};b.tree.TreeControl.prototype.handleMouseEvent_=function(e){var t=this.getNodeFromEvent_(e);if(t)switch(e.type){case"mousedown":t.onMouseDown(e);break;case"click":t.onClick_(e)}};b.tree.TreeControl.prototype.handleKeyEvent_=function(e){var t=!1;(t=this.selectedItem_&&this.selectedItem_.onKeyDown(e)||t)&&(b.utils.style.scrollIntoContainerView(this.selectedItem_.getElement(),this.getElement().parentNode),e.preventDefault());return t};b.tree.TreeControl.prototype.getNodeFromEvent_=function(e){for(var t=e.target;null!=t;){if(e=b.tree.BaseNode.allNodes[t.id])return e;if(t==this.getElement())break;t=t.parentNode}return null};b.tree.TreeControl.prototype.createNode=function(e){return new b.tree.TreeNode(this.toolbox_,e||"",this.getConfig())};b.Toolbox=function(e){this.workspace_=e;this.RTL=e.options.RTL;this.horizontalLayout_=e.options.horizontalLayout;this.toolboxPosition=e.options.toolboxPosition;this.config_={indentWidth:19,cssRoot:"blocklyTreeRoot",cssHideRoot:"blocklyHidden",cssTreeRow:"blocklyTreeRow",cssItemLabel:"blocklyTreeLabel",cssTreeIcon:"blocklyTreeIcon",cssExpandedFolderIcon:"blocklyTreeIconOpen",cssFileIcon:"blocklyTreeIconNone",cssSelectedRow:"blocklyTreeSelected"};this.treeSeparatorConfig_={cssTreeRow:"blocklyTreeSeparator"};this.horizontalLayout_&&(this.config_.cssTreeRow+=e.RTL?" blocklyHorizontalTreeRtl":" blocklyHorizontalTree",this.treeSeparatorConfig_.cssTreeRow="blocklyTreeSeparatorHorizontal "+(e.RTL?"blocklyHorizontalTreeRtl":"blocklyHorizontalTree"),this.config_.cssTreeIcon="")};b.Toolbox.prototype.width=0;b.Toolbox.prototype.height=0;b.Toolbox.prototype.selectedOption_=null;b.Toolbox.prototype.lastCategory_=null;b.Toolbox.prototype.init=function(){var e=this.workspace_,t=this.workspace_.getParentSvg();this.HtmlDiv=document.createElement("div");this.HtmlDiv.className="blocklyToolboxDiv blocklyNonSelectable";this.HtmlDiv.setAttribute("dir",e.RTL?"RTL":"LTR");t.parentNode.insertBefore(this.HtmlDiv,t);(t=e.getThemeManager()).subscribe(this.HtmlDiv,"toolbox","background-color");t.subscribe(this.HtmlDiv,"toolboxText","color");b.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,function(e){b.utils.isRightButton(e)||e.target==this.HtmlDiv?b.hideChaff(!1):b.hideChaff(!0);b.Touch.clearTouchIdentifier()},!1,!0);t={disabledPatternId:e.options.disabledPatternId,parentWorkspace:e,RTL:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,toolboxPosition:e.options.toolboxPosition,renderer:e.options.renderer};this.flyout_=null;if(e.horizontalLayout){if(!b.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new b.HorizontalFlyout(t)}else{if(!b.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new b.VerticalFlyout(t)}b.utils.dom.insertAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg());this.flyout_.init(e);this.config_.cleardotPath=e.options.pathToMedia+"1x1.gif";this.config_.cssCollapsedFolderIcon="blocklyTreeIconClosed"+(e.RTL?"Rtl":"Ltr");this.renderTree(e.options.languageTree)};b.Toolbox.prototype.renderTree=function(e){this.tree_&&(this.tree_.dispose(),this.lastCategory_=null);var t=new b.tree.TreeControl(this,this.config_);(this.tree_=t).setSelectedItem(null);t.onBeforeSelected(this.handleBeforeTreeSelected_);t.onAfterSelected(this.handleAfterTreeSelected_);var n=null;if(e){this.tree_.blocks=[];this.hasColours_=!1;n=this.syncTrees_(e,this.tree_,this.workspace_.options.pathToMedia);if(this.tree_.blocks.length)throw Error("Toolbox cannot have both blocks and categories in the root level.");this.workspace_.resizeContents()}t.render(this.HtmlDiv);n&&t.setSelectedItem(n);this.addColour_();this.position();this.horizontalLayout_&&b.utils.aria.setState(this.tree_.getElement(),b.utils.aria.State.ORIENTATION,"horizontal")};b.Toolbox.prototype.handleBeforeTreeSelected_=function(e){if(e==this.tree_)return!1;this.lastCategory_&&(this.lastCategory_.getRowElement().style.backgroundColor="");if(e){var t=e.hexColour||"#57e";e.getRowElement().style.backgroundColor=t;this.addColour_(e)}return!0};b.Toolbox.prototype.handleAfterTreeSelected_=function(e,t){t&&t.blocks&&t.blocks.length?(this.flyout_.show(t.blocks),this.lastCategory_!=t&&this.flyout_.scrollToStart(),b.keyboardAccessibilityMode&&b.navigation.setState(b.navigation.STATE_TOOLBOX)):(this.flyout_.hide(),!b.keyboardAccessibilityMode||t instanceof b.Toolbox.TreeSeparator||b.navigation.setState(b.navigation.STATE_WS));e!=t&&e!=this&&((e=new b.Events.Ui(null,"category",e&&e.getText(),t&&t.getText())).workspaceId=this.workspace_.id,b.Events.fire(e));t&&(this.lastCategory_=t)};b.Toolbox.prototype.handleNodeSizeChanged_=function(){b.svgResize(this.workspace_)};b.Toolbox.prototype.onBlocklyAction=function(e){var t=this.tree_.getSelectedItem();if(!t)return!1;switch(e.name){case b.navigation.actionNames.PREVIOUS:return t.selectPrevious();case b.navigation.actionNames.OUT:return t.selectParent();case b.navigation.actionNames.NEXT:return t.selectNext();case b.navigation.actionNames.IN:return t.selectChild();default:return!1}};b.Toolbox.prototype.dispose=function(){this.flyout_.dispose();this.tree_.dispose();this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv);b.utils.dom.removeNode(this.HtmlDiv);this.lastCategory_=this.workspace_=null};b.Toolbox.prototype.getWidth=function(){return this.width};b.Toolbox.prototype.getHeight=function(){return this.height};b.Toolbox.prototype.position=function(){var e=this.HtmlDiv;if(e){var t=this.workspace_.getParentSvg(),t=b.svgSize(t);this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width=t.width+"px",this.height=e.offsetHeight,this.toolboxPosition==b.TOOLBOX_AT_TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition==b.TOOLBOX_AT_RIGHT?e.style.right="0":e.style.left="0",e.style.height=t.height+"px",this.width=e.offsetWidth);this.flyout_.position()}};b.Toolbox.prototype.syncTrees_=function(e,t,n){for(var o,i=null,r=null,s=0;o=e.childNodes[s];s++)if(o.tagName)switch(o.tagName.toUpperCase()){case"CATEGORY":r=b.utils.replaceMessageReferences(o.getAttribute("name"));var a=this.tree_.createNode(r);a.onSizeChanged(this.handleNodeSizeChanged_);a.blocks=[];t.add(a);var l=o.getAttribute("custom");l?a.blocks=l:(l=this.syncTrees_(o,a,n))&&(i=l);l=o.getAttribute("categorystyle");var c=o.getAttribute("colour");c&&l?(a.hexColour="",console.warn('Toolbox category "'+r+'" can not have both a style and a colour')):l?this.setColourFromStyle_(l,a,r):this.setColour_(c,a,r);"true"==o.getAttribute("expanded")?(a.blocks.length&&(i=a),a.setExpanded(!0)):a.setExpanded(!1);r=o;break;case"SEP":if(r&&"CATEGORY"==r.tagName.toUpperCase()){t.add(new b.Toolbox.TreeSeparator(this.treeSeparatorConfig_));break}case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":t.blocks.push(o),r=o}return i};b.Toolbox.prototype.setColour_=function(e,t,n){if(null===(e=b.utils.replaceMessageReferences(e))||""===e)t.hexColour="";else{var o=Number(e);isNaN(o)?(o=b.utils.colour.parse(e))?(t.hexColour=o,this.hasColours_=!0):(t.hexColour="",console.warn('Toolbox category "'+n+'" has unrecognized colour attribute: '+e)):(t.hexColour=b.hueToHex(o),this.hasColours_=!0)}};b.Toolbox.prototype.setColourFromStyle_=function(e,t,n){t.styleName=e;var o=this.workspace_.getTheme();e&&o&&((o=o.getCategoryStyle(e))&&o.colour?this.setColour_(o.colour,t,n):console.warn('Style "'+e+'" must exist and contain a colour value'))};b.Toolbox.prototype.updateColourFromTheme_=function(e){if(e=e||this.tree_){e=e.getChildren(!1);for(var t,n=0;t=e[n];n++)t.styleName&&(this.setColourFromStyle_(t.styleName,t,""),this.addColour_()),this.updateColourFromTheme_(t)}};b.Toolbox.prototype.updateColourFromTheme=function(){var e=this.tree_;e&&(this.updateColourFromTheme_(e),this.updateSelectedItemColour_(e))};b.Toolbox.prototype.updateSelectedItemColour_=function(e){if(e=e.getSelectedItem()){var t=e.hexColour||"#57e";e.getRowElement().style.backgroundColor=t;this.addColour_(e)}};b.Toolbox.prototype.addColour_=function(e){e=(e||this.tree_).getChildren(!1);for(var t,n=0;t=e[n];n++){var o=t.getRowElement();if(o){var i=this.hasColours_?"8px solid "+(t.hexColour||"#ddd"):"none";this.workspace_.RTL?o.style.borderRight=i:o.style.borderLeft=i}this.addColour_(t)}};b.Toolbox.prototype.clearSelection=function(){this.tree_.setSelectedItem(null)};b.Toolbox.prototype.addStyle=function(e){b.utils.dom.addClass(this.HtmlDiv,e)};b.Toolbox.prototype.removeStyle=function(e){b.utils.dom.removeClass(this.HtmlDiv,e)};b.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=(o=this.HtmlDiv.getBoundingClientRect()).top,t=e+o.height,n=o.left,o=n+o.width;return this.toolboxPosition==b.TOOLBOX_AT_TOP?new b.utils.Rect(-1e7,t,-1e7,1e7):this.toolboxPosition==b.TOOLBOX_AT_BOTTOM?new b.utils.Rect(e,1e7,-1e7,1e7):this.toolboxPosition==b.TOOLBOX_AT_LEFT?new b.utils.Rect(-1e7,1e7,-1e7,o):new b.utils.Rect(-1e7,1e7,n,1e7)};b.Toolbox.prototype.refreshSelection=function(){var e=this.tree_.getSelectedItem();e&&e.blocks&&this.flyout_.show(e.blocks)};b.Toolbox.prototype.selectFirstCategory=function(){this.tree_.getSelectedItem()||this.tree_.selectFirst()};b.Toolbox.TreeSeparator=function(e){b.tree.TreeNode.call(this,null,"",e)};b.utils.object.inherits(b.Toolbox.TreeSeparator,b.tree.TreeNode);b.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0 -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0 -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;","font-family: sans-serif;","font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]);b.Trashcan=function(e){this.workspace_=e;this.contents_=[];if(!(this.workspace_.options.maxTrashcanContents<=0)){e={scrollbars:!0,disabledPatternId:this.workspace_.options.disabledPatternId,parentWorkspace:this.workspace_,RTL:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer};if(this.workspace_.horizontalLayout){e.toolboxPosition=this.workspace_.toolboxPosition==b.TOOLBOX_AT_TOP?b.TOOLBOX_AT_BOTTOM:b.TOOLBOX_AT_TOP;if(!b.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new b.HorizontalFlyout(e)}else{e.toolboxPosition=this.workspace_.toolboxPosition==b.TOOLBOX_AT_RIGHT?b.TOOLBOX_AT_LEFT:b.TOOLBOX_AT_RIGHT;if(!b.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new b.VerticalFlyout(e)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}};b.Trashcan.prototype.WIDTH_=47;b.Trashcan.prototype.BODY_HEIGHT_=44;b.Trashcan.prototype.LID_HEIGHT_=16;b.Trashcan.prototype.MARGIN_BOTTOM_=20;b.Trashcan.prototype.MARGIN_SIDE_=20;b.Trashcan.prototype.MARGIN_HOTSPOT_=10;b.Trashcan.prototype.SPRITE_LEFT_=0;b.Trashcan.prototype.SPRITE_TOP_=32;b.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE=.1;b.Trashcan.prototype.isOpen=!1;b.Trashcan.prototype.minOpenness_=0;b.Trashcan.prototype.svgGroup_=null;b.Trashcan.prototype.svgLid_=null;b.Trashcan.prototype.lidTask_=0;b.Trashcan.prototype.lidOpen_=0;b.Trashcan.prototype.left_=0;b.Trashcan.prototype.top_=0;b.Trashcan.prototype.createDom=function(){this.svgGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),t=b.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);b.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},t);var n=b.utils.dom.createSvgElement("image",{width:b.SPRITE.width,x:-this.SPRITE_LEFT_,height:b.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);n.setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+b.SPRITE.url);t=b.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashLidClipPath"+e},this.svgGroup_);b.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.LID_HEIGHT_},t);this.svgLid_=b.utils.dom.createSvgElement("image",{width:b.SPRITE.width,x:-this.SPRITE_LEFT_,height:b.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_);this.svgLid_.setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+b.SPRITE.url);b.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click);b.bindEvent_(n,"mouseover",this,this.mouseOver_);b.bindEvent_(n,"mouseout",this,this.mouseOut_);this.animateLid_();return this.svgGroup_};b.Trashcan.prototype.init=function(e){0<this.workspace_.options.maxTrashcanContents&&(b.utils.dom.insertAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg()),this.flyout_.init(this.workspace_),this.flyout_.isBlockCreatable_=function(){return!0});this.verticalSpacing_=this.MARGIN_BOTTOM_+e;this.setOpen_(!1);return this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_};b.Trashcan.prototype.dispose=function(){this.svgGroup_&&(b.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null);this.workspace_=this.svgLid_=null;clearTimeout(this.lidTask_)};b.Trashcan.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==b.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-b.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+b.Scrollbar.scrollbarThickness,this.top_=e.toolboxPosition==b.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:e.viewHeight+e.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}};b.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=(t=this.svgGroup_.getBoundingClientRect()).top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_;return new b.utils.Rect(e,e+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)};b.Trashcan.prototype.setOpen_=function(e){this.isOpen!=e&&(clearTimeout(this.lidTask_),this.isOpen=e,this.animateLid_())};b.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isOpen?.2:-.2;this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1);this.setLidAngle_(45*this.lidOpen_);this.svgGroup_.style.opacity=.4+.4*this.lidOpen_;this.lidOpen_>this.minOpenness_&&this.lidOpen_<1&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),20))};b.Trashcan.prototype.setLidAngle_=function(e){var t=this.workspace_.toolboxPosition==b.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")};b.Trashcan.prototype.close=function(){this.setOpen_(!1)};b.Trashcan.prototype.click=function(){if(this.contents_.length){for(var e,t=[],n=0;e=this.contents_[n];n++)t[n]=b.Xml.textToDom(e);this.flyout_.show(t)}};b.Trashcan.prototype.mouseOver_=function(){this.contents_.length&&this.setOpen_(!0)};b.Trashcan.prototype.mouseOut_=function(){this.setOpen_(!1)};b.Trashcan.prototype.onDelete_=function(e){if(!(this.workspace_.options.maxTrashcanContents<=0)&&e.type==b.Events.BLOCK_DELETE&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.minOpenness_=this.HAS_BLOCKS_LID_ANGLE;this.setLidAngle_(45*this.minOpenness_)}};b.Trashcan.prototype.cleanBlockXML_=function(e){for(var t=e=e.cloneNode(!0);t;){t.removeAttribute&&(t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("id"));var n=t.firstChild||t.nextSibling;if(!n)for(n=t.parentNode;n;){if(n.nextSibling){n=n.nextSibling;break}n=n.parentNode}t=n}return b.Xml.domToText(e)};b.VariablesDynamic={};b.VariablesDynamic.onCreateVariableButtonClick_String=function(e){b.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"String")};b.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){b.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"Number")};b.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){b.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"Colour")};b.VariablesDynamic.flyoutCategory=function(e){var t=[],n=document.createElement("button");n.setAttribute("text",b.Msg.NEW_STRING_VARIABLE);n.setAttribute("callbackKey","CREATE_VARIABLE_STRING");t.push(n);(n=document.createElement("button")).setAttribute("text",b.Msg.NEW_NUMBER_VARIABLE);n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER");t.push(n);(n=document.createElement("button")).setAttribute("text",b.Msg.NEW_COLOUR_VARIABLE);n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR");t.push(n);e.registerButtonCallback("CREATE_VARIABLE_STRING",b.VariablesDynamic.onCreateVariableButtonClick_String);e.registerButtonCallback("CREATE_VARIABLE_NUMBER",b.VariablesDynamic.onCreateVariableButtonClick_Number);e.registerButtonCallback("CREATE_VARIABLE_COLOUR",b.VariablesDynamic.onCreateVariableButtonClick_Colour);e=b.VariablesDynamic.flyoutCategoryBlocks(e);return t.concat(e)};b.VariablesDynamic.flyoutCategoryBlocks=function(e){var t,n=[];if(0<(e=e.getAllVariables()).length){if(b.Blocks.variables_set_dynamic){var o=e[e.length-1],i=b.utils.xml.createElement("block");i.setAttribute("type","variables_set_dynamic");i.setAttribute("gap",24);i.appendChild(b.Variables.generateVariableFieldDom(o));n.push(i)}if(b.Blocks.variables_get_dynamic){e.sort(b.VariableModel.compareByName);o=0;for(;t=e[o];o++)(i=b.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),i.setAttribute("gap",8),i.appendChild(b.Variables.generateVariableFieldDom(t)),n.push(i)}}return n};b.ZoomControls=function(e){this.workspace_=e};b.ZoomControls.prototype.WIDTH_=32;b.ZoomControls.prototype.HEIGHT_=110;b.ZoomControls.prototype.MARGIN_BOTTOM_=20;b.ZoomControls.prototype.MARGIN_SIDE_=20;b.ZoomControls.prototype.svgGroup_=null;b.ZoomControls.prototype.left_=0;b.ZoomControls.prototype.top_=0;b.ZoomControls.prototype.createDom=function(){this.svgGroup_=b.utils.dom.createSvgElement("g",{},null);var e=String(Math.random()).substring(2);this.createZoomOutSvg_(e);this.createZoomInSvg_(e);this.workspace_.isMovable()&&this.createZoomResetSvg_(e);return this.svgGroup_};b.ZoomControls.prototype.init=function(e){this.verticalSpacing_=this.MARGIN_BOTTOM_+e;return this.verticalSpacing_+this.HEIGHT_};b.ZoomControls.prototype.dispose=function(){this.svgGroup_&&b.utils.dom.removeNode(this.svgGroup_)};b.ZoomControls.prototype.position=function(){if(this.verticalSpacing_){var e=this.workspace_.getMetrics();e&&(this.left_=e.toolboxPosition==b.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-b.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+b.Scrollbar.scrollbarThickness,e.toolboxPosition==b.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=e.viewHeight+e.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))}};b.ZoomControls.prototype.createZoomOutSvg_=function(e){var t=this.workspace_;this.zoomOutGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var n=b.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);b.utils.dom.createSvgElement("rect",{width:32,height:32},n);(e=b.utils.dom.createSvgElement("image",{width:b.SPRITE.width,height:b.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_)).setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+b.SPRITE.url);b.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused();t.zoomCenter(-1);b.Touch.clearTouchIdentifier();e.stopPropagation();e.preventDefault()})};b.ZoomControls.prototype.createZoomInSvg_=function(e){var t=this.workspace_;this.zoomInGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var n=b.utils.dom.createSvgElement("clipPath",{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);b.utils.dom.createSvgElement("rect",{width:32,height:32},n);(e=b.utils.dom.createSvgElement("image",{width:b.SPRITE.width,height:b.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_)).setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+b.SPRITE.url);b.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused();t.zoomCenter(1);b.Touch.clearTouchIdentifier();e.stopPropagation();e.preventDefault()})};b.ZoomControls.prototype.createZoomResetSvg_=function(e){var t=this.workspace_;this.zoomResetGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_);var n=b.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);b.utils.dom.createSvgElement("rect",{width:32,height:32},n);(e=b.utils.dom.createSvgElement("image",{width:b.SPRITE.width,height:b.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_)).setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+b.SPRITE.url);b.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused();t.setScale(t.options.zoomOptions.startScale);t.beginCanvasTransition();t.scrollCenter();setTimeout(t.endCanvasTransition.bind(t),500);b.Touch.clearTouchIdentifier();e.stopPropagation();e.preventDefault()})};b.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]);b.Mutator=function(e){b.Mutator.superClass_.constructor.call(this,null);this.quarkNames_=e};b.utils.object.inherits(b.Mutator,b.Icon);b.Mutator.prototype.workspaceWidth_=0;b.Mutator.prototype.workspaceHeight_=0;b.Mutator.prototype.drawIcon_=function(e){b.utils.dom.createSvgElement("rect",{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e);b.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e);b.utils.dom.createSvgElement("circle",{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)};b.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&b.Icon.prototype.iconClick_.call(this,e)};b.Mutator.prototype.createEditor_=function(){this.svgDialog_=b.utils.dom.createSvgElement("svg",{x:b.Bubble.BORDER_WIDTH,y:b.Bubble.BORDER_WIDTH},null);if(this.quarkNames_.length)for(var e,t=b.utils.xml.createElement("xml"),n=0;e=this.quarkNames_[n];n++){var o=b.utils.xml.createElement("block");o.setAttribute("type",e);t.appendChild(o)}else t=null;t={disable:!1,disabledPatternId:this.block_.workspace.options.disabledPatternId,languageTree:t,parentWorkspace:this.block_.workspace,pathToMedia:this.block_.workspace.options.pathToMedia,RTL:this.block_.RTL,toolboxPosition:this.block_.RTL?b.TOOLBOX_AT_RIGHT:b.TOOLBOX_AT_LEFT,horizontalLayout:!1,getMetrics:this.getFlyoutMetrics_.bind(this),setMetrics:null,renderer:this.block_.workspace.options.renderer};this.workspace_=new b.WorkspaceSvg(t);this.workspace_.isMutator=!0;this.workspace_.addChangeListener(b.Events.disableOrphans);t=this.workspace_.addFlyout_("g");(n=this.workspace_.createDom("blocklyMutatorBackground")).insertBefore(t,this.workspace_.svgBlockCanvas_);this.svgDialog_.appendChild(n);return this.svgDialog_};b.Mutator.prototype.updateEditable=function(){b.Mutator.superClass_.updateEditable.call(this);this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&b.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&b.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))};b.Mutator.prototype.resizeBubble_=function(){var e,t=2*b.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=this.block_.RTL?-n.x:n.width+n.x;n=n.height+3*t;this.workspace_.flyout_&&(e=this.workspace_.flyout_.getMetrics_(),n=Math.max(n,e.contentHeight+20));o+=3*t;(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-n)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=n,this.bubble_.setBubbleSize(o+t,n+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_));this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t));this.workspace_.resize()};b.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(b.Events.fire(new b.Events.Ui(this.block_,"mutatorOpen",!e,e)),e){this.bubble_=new b.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,null,null);this.bubble_.setSvgId(this.block_.id);(e=this.workspace_.options.languageTree)&&(this.workspace_.flyout_.init(this.workspace_),this.workspace_.flyout_.show(e.childNodes));this.rootBlock_=this.block_.decompose(this.workspace_);e=this.rootBlock_.getDescendants(!1);for(var t,n=0;t=e[n];n++)t.render();this.rootBlock_.setMovable(!1);this.rootBlock_.setDeletable(!1);n=this.workspace_.flyout_?(e=2*this.workspace_.flyout_.CORNER_RADIUS,this.workspace_.getFlyout().getWidth()+e):e=16;this.block_.RTL&&(n=-n);this.rootBlock_.moveBy(n,e);if(this.block_.saveConnections){var o=this;this.block_.saveConnections(this.rootBlock_);this.sourceListener_=function(){o.block_.saveConnections(o.rootBlock_)};this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_();this.workspace_.addChangeListener(this.workspaceChanged_.bind(this));this.updateColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)};b.Mutator.prototype.workspaceChanged_=function(e){if(e.type!=b.Events.UI&&(e.type!=b.Events.CHANGE||"disabled"!=e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var t,n=0;t=e[n];n++){var o=t.getRelativeToSurfaceXY(),i=t.getHeightWidth();o.y+i.height<20&&t.moveBy(0,20-i.height-o.y)}}if(this.rootBlock_.workspace==this.workspace_){b.Events.setGroup(!0);e=(e=(t=this.block_).mutationToDom())&&b.Xml.domToText(e);n=t.rendered;t.rendered=!1;t.compose(this.rootBlock_);t.rendered=n;t.initSvg();if(e!=(n=(n=t.mutationToDom())&&b.Xml.domToText(n))){b.Events.fire(new b.Events.BlockChange(t,"mutation",null,e,n));var r=b.Events.getGroup();setTimeout(function(){b.Events.setGroup(r);t.bumpNeighbours();b.Events.setGroup(!1)},b.BUMP_DELAY)}t.rendered&&t.render();e!=n&&b.keyboardAccessibilityMode&&b.navigation.moveCursorOnBlockMutation(t);this.workspace_.isDragging()||this.resizeBubble_();b.Events.setGroup(!1)}}};b.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-this.workspace_.getFlyout().getWidth(),absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:this.workspace_.getFlyout().getWidth()}};b.Mutator.prototype.dispose=function(){this.block_.mutator=null;b.Icon.prototype.dispose.call(this)};b.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks()){for(var t=e.getAllBlocks(),n=0;n<t.length;n++){var o=t[n];o.setStyle(o.getStyleName())}e=e.flyout_.workspace_.getAllBlocks();for(n=0;n<e.length;n++)(o=e[n]).setStyle(o.getStyleName())}};b.Mutator.reconnect=function(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;var o=e.targetBlock();return!(o&&o!=t||n.targetConnection==e)&&(n.isConnected()&&n.disconnect(),n.connect(e),!0)};b.Mutator.findParentWs=function(e){var t=null;if(e&&e.options){var n=e.options.parentWorkspace;e.isFlyout?n&&n.options&&(t=n.options.parentWorkspace):n&&(t=n)}return t};b.FieldTextInput=function(e,t,n){this.spellcheck_=!0;null==e&&(e="");b.FieldTextInput.superClass_.constructor.call(this,e,t,n)};b.utils.object.inherits(b.FieldTextInput,b.Field);b.FieldTextInput.fromJson=function(e){var t=b.utils.replaceMessageReferences(e.text);return new b.FieldTextInput(t,void 0,e)};b.FieldTextInput.prototype.SERIALIZABLE=!0;b.FieldTextInput.FONTSIZE=11;b.FieldTextInput.BORDERRADIUS=4;b.FieldTextInput.prototype.CURSOR="text";b.FieldTextInput.prototype.configure_=function(e){b.FieldTextInput.superClass_.configure_.call(this,e);"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)};b.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)};b.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&b.Events.isEnabled()&&b.Events.fire(new b.Events.BlockChange(this.sourceBlock_,"field",this.name||null,e,this.value_)))};b.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0;this.value_=e;this.isBeingEdited_||(this.isDirty_=!0)};b.FieldTextInput.prototype.render_=function(){b.FieldTextInput.superClass_.render_.call(this);this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.isTextValid_?(b.utils.dom.removeClass(this.htmlInput_,"blocklyInvalidInput"),b.utils.aria.setState(this.htmlInput_,"invalid",!1)):(b.utils.dom.addClass(this.htmlInput_,"blocklyInvalidInput"),b.utils.aria.setState(this.htmlInput_,"invalid",!0)))};b.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))};b.FieldTextInput.prototype.showEditor_=function(e){this.workspace_=this.sourceBlock_.workspace;!(e=e||!1)&&(b.utils.userAgent.MOBILE||b.utils.userAgent.ANDROID||b.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e)};b.FieldTextInput.prototype.showPromptEditor_=function(){var t=this;b.prompt(b.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){t.setValue(e)})};b.FieldTextInput.prototype.showInlineEditor_=function(e){b.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this));this.htmlInput_=this.widgetCreate_();this.isBeingEdited_=!0;e||(this.htmlInput_.focus(),this.htmlInput_.select())};b.FieldTextInput.prototype.widgetCreate_=function(){var e=b.WidgetDiv.DIV,t=document.createElement("input");t.className="blocklyHtmlInput";t.setAttribute("spellcheck",this.spellcheck_);var n=b.FieldTextInput.FONTSIZE*this.workspace_.scale+"pt";e.style.fontSize=n;t.style.fontSize=n;t.style.borderRadius=b.FieldTextInput.BORDERRADIUS*this.workspace_.scale+"px";e.appendChild(t);t.value=t.defaultValue=this.getEditorText_(this.value_);t.untypedDefaultValue_=this.value_;t.oldValue_=null;b.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();this.bindInputEvents_(t);return t};b.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1;this.isTextValid_=!0;this.forceRerender();this.onFinishEditing_&&this.onFinishEditing_(this.value_);this.unbindInputEvents_();var e=b.WidgetDiv.DIV.style;e.width="auto";e.height="auto";e.fontSize=""};b.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=b.bindEventWithChecks_(e,"keydown",this,this.onHtmlInputKeyDown_);this.onKeyInputWrapper_=b.bindEventWithChecks_(e,"input",this,this.onHtmlInputChange_)};b.FieldTextInput.prototype.unbindInputEvents_=function(){b.unbindEvent_(this.onKeyDownWrapper_);b.unbindEvent_(this.onKeyInputWrapper_)};b.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==b.utils.KeyCodes.ENTER?(b.WidgetDiv.hide(),b.DropDownDiv.hideWithoutAnimation()):e.keyCode==b.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,b.WidgetDiv.hide(),b.DropDownDiv.hideWithoutAnimation()):e.keyCode==b.utils.KeyCodes.TAB&&(b.WidgetDiv.hide(),b.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())};b.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,b.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),b.Events.setGroup(!1))};b.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0;this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e));this.setValue(e)};b.FieldTextInput.prototype.resizeEditor_=function(){var e=b.WidgetDiv.DIV,t=this.getScaledBBox_();e.style.width=t.right-t.left+"px";e.style.height=t.bottom-t.top+"px";(t=new b.utils.Coordinate(this.sourceBlock_.RTL?t.right-e.offsetWidth:t.left,t.top)).y+=1;b.utils.userAgent.GECKO&&b.WidgetDiv.DIV.style.top&&(--t.x,--t.y);b.utils.userAgent.WEBKIT&&(t.y-=3);e.style.left=t.x+"px";e.style.top=t.y+"px"};b.FieldTextInput.numberValidator=function(e){console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead.");if(null===e)return null;e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"");e=Number(e||0);return isNaN(e)?null:String(e)};b.FieldTextInput.nonnegativeIntegerValidator=function(e){(e=b.FieldTextInput.numberValidator(e))&&(e=String(Math.max(0,Math.floor(e))));return e};b.FieldTextInput.prototype.isTabNavigable=function(){return!0};b.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null};b.FieldTextInput.prototype.getEditorText_=function(e){return String(e)};b.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e};b.fieldRegistry.register("field_input",b.FieldTextInput);b.FieldAngle=function(e,t,n){this.clockwise_=b.FieldAngle.CLOCKWISE;this.offset_=b.FieldAngle.OFFSET;this.wrap_=b.FieldAngle.WRAP;this.round_=b.FieldAngle.ROUND;b.FieldAngle.superClass_.constructor.call(this,e||0,t,n)};b.utils.object.inherits(b.FieldAngle,b.FieldTextInput);b.FieldAngle.fromJson=function(e){return new b.FieldAngle(e.angle,void 0,e)};b.FieldAngle.prototype.SERIALIZABLE=!0;b.FieldAngle.ROUND=15;b.FieldAngle.HALF=50;b.FieldAngle.CLOCKWISE=!1;b.FieldAngle.OFFSET=0;b.FieldAngle.WRAP=360;b.FieldAngle.RADIUS=b.FieldAngle.HALF-1;b.FieldAngle.prototype.configure_=function(e){b.FieldAngle.superClass_.configure_.call(this,e);switch(e.mode){case"compass":this.clockwise_=!0;this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var t=e.clockwise;"boolean"==typeof t&&(this.clockwise_=t);null!=(t=e.offset)&&(t=Number(t),isNaN(t)||(this.offset_=t));null!=(t=e.wrap)&&(t=Number(t),isNaN(t)||(this.wrap_=t));null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))};b.FieldAngle.prototype.initView=function(){b.FieldAngle.superClass_.initView.call(this);this.symbol_=b.utils.dom.createSvgElement("tspan",{},null);this.symbol_.appendChild(document.createTextNode("°"));this.textElement_.appendChild(this.symbol_)};b.FieldAngle.prototype.render_=function(){b.FieldAngle.superClass_.render_.call(this);this.updateGraph_()};b.FieldAngle.prototype.showEditor_=function(){b.FieldAngle.superClass_.showEditor_.call(this,b.utils.userAgent.MOBILE||b.utils.userAgent.ANDROID||b.utils.userAgent.IPAD);var e=this.dropdownCreate_();b.DropDownDiv.getContentDiv().appendChild(e);e=(e=this.sourceBlock_.getColourBorder()).colourBorder||e.colourLight;b.DropDownDiv.setColour(this.sourceBlock_.getColour(),e);b.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.updateGraph_()};b.FieldAngle.prototype.dropdownCreate_=function(){var e=b.utils.dom.createSvgElement("svg",{xmlns:b.utils.dom.SVG_NS,"xmlns:html":b.utils.dom.HTML_NS,"xmlns:xlink":b.utils.dom.XLINK_NS,version:"1.1",height:2*b.FieldAngle.HALF+"px",width:2*b.FieldAngle.HALF+"px",style:"touch-action: none"},null),t=b.utils.dom.createSvgElement("circle",{cx:b.FieldAngle.HALF,cy:b.FieldAngle.HALF,r:b.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=b.utils.dom.createSvgElement("path",{class:"blocklyAngleGauge"},e);this.line_=b.utils.dom.createSvgElement("line",{x1:b.FieldAngle.HALF,y1:b.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var n=0;n<360;n+=15)b.utils.dom.createSvgElement("line",{x1:b.FieldAngle.HALF+b.FieldAngle.RADIUS,y1:b.FieldAngle.HALF,x2:b.FieldAngle.HALF+b.FieldAngle.RADIUS-(0==n%45?10:5),y2:b.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+b.FieldAngle.HALF+","+b.FieldAngle.HALF+")"},e);this.clickWrapper_=b.bindEventWithChecks_(e,"click",this,this.hide_);this.clickSurfaceWrapper_=b.bindEventWithChecks_(t,"click",this,this.onMouseMove,!0,!0);this.moveSurfaceWrapper_=b.bindEventWithChecks_(t,"mousemove",this,this.onMouseMove,!0,!0);return e};b.FieldAngle.prototype.dropdownDispose_=function(){b.unbindEvent_(this.clickWrapper_);b.unbindEvent_(this.clickSurfaceWrapper_);b.unbindEvent_(this.moveSurfaceWrapper_)};b.FieldAngle.prototype.hide_=function(){b.DropDownDiv.hideIfOwner(this);b.WidgetDiv.hide()};b.FieldAngle.prototype.onMouseMove=function(e){var t=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=e.clientX-t.left-b.FieldAngle.HALF;e=e.clientY-t.top-b.FieldAngle.HALF;t=Math.atan(-e/n);isNaN(t)||(t=b.utils.math.toDegrees(t),n<0?t+=180:0<e&&(t+=360),t=this.clockwise_?this.offset_+360-t:360-(this.offset_-t),this.displayMouseOrKeyboardValue_(t))};b.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_);(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)};b.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,t=b.utils.math.toRadians(e%360),e=["M ",b.FieldAngle.HALF,",",b.FieldAngle.HALF],n=b.FieldAngle.HALF,o=b.FieldAngle.HALF;if(!isNaN(t)){var i=Number(this.clockwise_),r=b.utils.math.toRadians(this.offset_),s=Math.cos(r)*b.FieldAngle.RADIUS,a=Math.sin(r)*-b.FieldAngle.RADIUS;i&&(t=2*r-t);n+=Math.cos(t)*b.FieldAngle.RADIUS;o-=Math.sin(t)*b.FieldAngle.RADIUS;t=Math.abs(Math.floor((t-r)/Math.PI)%2);i&&(t=1-t);e.push(" l ",s,",",a," A ",b.FieldAngle.RADIUS,",",b.FieldAngle.RADIUS," 0 ",t," ",i," ",n,",",o," z")}this.gauge_.setAttribute("d",e.join(""));this.line_.setAttribute("x2",n);this.line_.setAttribute("y2",o)}};b.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){b.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e);var t;e.keyCode===b.utils.KeyCodes.LEFT?t=this.sourceBlock_.RTL?1:-1:e.keyCode===b.utils.KeyCodes.RIGHT?t=this.sourceBlock_.RTL?-1:1:e.keyCode===b.utils.KeyCodes.DOWN?t=-1:e.keyCode===b.utils.KeyCodes.UP&&(t=1);if(t){var n=this.getValue();this.displayMouseOrKeyboardValue_(n+t*this.round_);e.preventDefault();e.stopPropagation()}};b.FieldAngle.prototype.doClassValidation_=function(e){e=Number(e);return isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)};b.FieldAngle.prototype.wrapValue_=function(e){(e%=360)<0&&(e+=360);e>this.wrap_&&(e-=360);return e};b.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(","));b.fieldRegistry.register("field_angle",b.FieldAngle);b.FieldCheckbox=function(e,t,n){(this.checkChar_=null)==e&&(e="FALSE");b.FieldCheckbox.superClass_.constructor.call(this,e,t,n);this.size_.width=b.FieldCheckbox.WIDTH};b.utils.object.inherits(b.FieldCheckbox,b.Field);b.FieldCheckbox.fromJson=function(e){return new b.FieldCheckbox(e.checked,void 0,e)};b.FieldCheckbox.WIDTH=15;b.FieldCheckbox.CHECK_CHAR="✓";b.FieldCheckbox.CHECK_X_OFFSET=b.Field.DEFAULT_TEXT_OFFSET-3;b.FieldCheckbox.CHECK_Y_OFFSET=14;b.FieldCheckbox.prototype.SERIALIZABLE=!0;b.FieldCheckbox.prototype.CURSOR="default";b.FieldCheckbox.prototype.isDirty_=!1;b.FieldCheckbox.prototype.configure_=function(e){b.FieldCheckbox.superClass_.configure_.call(this,e);e.checkCharacter&&(this.checkChar_=e.checkCharacter)};b.FieldCheckbox.prototype.initView=function(){b.FieldCheckbox.superClass_.initView.call(this);this.textElement_.setAttribute("x",b.FieldCheckbox.CHECK_X_OFFSET);this.textElement_.setAttribute("y",b.FieldCheckbox.CHECK_Y_OFFSET);b.utils.dom.addClass(this.textElement_,"blocklyCheckbox");this.textContent_.nodeValue=this.checkChar_||b.FieldCheckbox.CHECK_CHAR;this.textElement_.style.display=this.value_?"block":"none"};b.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e;this.textContent_&&(this.textContent_.nodeValue=e||b.FieldCheckbox.CHECK_CHAR)};b.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)};b.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null};b.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e);this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")};b.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"};b.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_};b.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))};b.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e};b.fieldRegistry.register("field_checkbox",b.FieldCheckbox);b.FieldColour=function(e,t,n){b.FieldColour.superClass_.constructor.call(this,e||b.FieldColour.COLOURS[0],t,n);this.size_=new b.utils.Size(b.FieldColour.DEFAULT_WIDTH,b.FieldColour.DEFAULT_HEIGHT)};b.utils.object.inherits(b.FieldColour,b.Field);b.FieldColour.fromJson=function(e){return new b.FieldColour(e.colour,void 0,e)};b.FieldColour.DEFAULT_WIDTH=26;b.FieldColour.DEFAULT_HEIGHT=b.Field.BORDER_RECT_DEFAULT_HEIGHT;b.FieldColour.prototype.SERIALIZABLE=!0;b.FieldColour.prototype.CURSOR="default";b.FieldColour.prototype.isDirty_=!1;b.FieldColour.prototype.colours_=null;b.FieldColour.prototype.titles_=null;b.FieldColour.prototype.columns_=0;b.FieldColour.prototype.configure_=function(e){b.FieldColour.superClass_.configure_.call(this,e);e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles);e.columns&&(this.columns_=e.columns)};b.FieldColour.prototype.initView=function(){this.createBorderRect_();this.borderRect_.style.fillOpacity=1;this.borderRect_.style.fill=this.value_};b.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:b.utils.colour.parse(e)};b.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e;this.borderRect_&&(this.borderRect_.style.fill=e)};b.FieldColour.prototype.getText=function(){var e=this.value_;/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]);return e};b.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" ");b.FieldColour.TITLES=[];b.FieldColour.COLUMNS=7;b.FieldColour.prototype.setColours=function(e,t){this.colours_=e;t&&(this.titles_=t);return this};b.FieldColour.prototype.setColumns=function(e){this.columns_=e;return this};b.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_();b.DropDownDiv.getContentDiv().appendChild(this.picker_);b.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.picker_.focus()};b.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),b.DropDownDiv.hideIfOwner(this))};b.FieldColour.prototype.onKeyDown_=function(e){var t=!1;if(e.keyCode===b.utils.KeyCodes.UP)this.moveHighlightBy_(0,-1),t=!0;else if(e.keyCode===b.utils.KeyCodes.DOWN)this.moveHighlightBy_(0,1),t=!0;else if(e.keyCode===b.utils.KeyCodes.LEFT)this.moveHighlightBy_(-1,0),t=!0;else if(e.keyCode===b.utils.KeyCodes.RIGHT)this.moveHighlightBy_(1,0),t=!0;else if(e.keyCode===b.utils.KeyCodes.ENTER){(t=this.getHighlighted_())&&(null!==(t=t&&t.label)&&this.setValue(t));b.DropDownDiv.hideWithoutAnimation();t=!0}t&&e.stopPropagation()};b.FieldColour.prototype.onBlocklyAction=function(e){if(this.picker_){if(e===b.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(e===b.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(e===b.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(e===b.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return b.FieldColour.superClass_.onBlocklyAction.call(this,e)};b.FieldColour.prototype.moveHighlightBy_=function(e,t){var n=this.colours_||b.FieldColour.COLOURS,o=this.columns_||b.FieldColour.COLUMNS,i=this.highlightedIndex_%o,r=Math.floor(this.highlightedIndex_/o);i+=e;r+=t;e<0?i<0&&0<r?(i=o-1,r--):i<0&&(i=0):0<e?o-1<i&&r<Math.floor(n.length/o)-1?(i=0,r++):o-1<i&&i--:t<0?r<0&&(r=0):0<t&&r>Math.floor(n.length/o)-1&&(r=Math.floor(n.length/o)-1);this.setHighlightedCell_(this.picker_.childNodes[r].childNodes[i],r*o+i)};b.FieldColour.prototype.onMouseMove_=function(e){var t=(e=e.target)&&e.getAttribute("data-index");null!==t&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,Number(t))};b.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus()};b.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&b.utils.dom.removeClass(e,"blocklyColourHighlighted")};b.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||b.FieldColour.COLUMNS,t=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return t?t.childNodes[this.highlightedIndex_%e]:null};b.FieldColour.prototype.setHighlightedCell_=function(e,t){var n=this.getHighlighted_();n&&b.utils.dom.removeClass(n,"blocklyColourHighlighted");b.utils.dom.addClass(e,"blocklyColourHighlighted");this.highlightedIndex_=t;b.utils.aria.setState(this.picker_,b.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))};b.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||b.FieldColour.COLUMNS,t=this.colours_||b.FieldColour.COLOURS,n=this.titles_||b.FieldColour.TITLES,o=this.getValue(),i=document.createElement("table");i.className="blocklyColourTable";i.tabIndex=0;i.dir="ltr";b.utils.aria.setRole(i,b.utils.aria.Role.GRID);b.utils.aria.setState(i,b.utils.aria.State.EXPANDED,!0);b.utils.aria.setState(i,"rowcount",Math.floor(t.length/e));b.utils.aria.setState(i,"colcount",e);for(var r,s=0;s<t.length;s++){0==s%e&&(r=document.createElement("tr"),b.utils.aria.setRole(r,b.utils.aria.Role.ROW),i.appendChild(r));var a=document.createElement("td");r.appendChild(a);a.label=t[s];a.title=n[s]||t[s];a.id=b.utils.IdGenerator.getNextUniqueId();a.setAttribute("data-index",s);b.utils.aria.setRole(a,b.utils.aria.Role.GRIDCELL);b.utils.aria.setState(a,b.utils.aria.State.LABEL,t[s]);b.utils.aria.setState(a,b.utils.aria.State.SELECTED,t[s]==o);a.style.backgroundColor=t[s];t[s]==o&&(a.className="blocklyColourSelected",this.highlightedIndex_=s)}this.onClickWrapper_=b.bindEventWithChecks_(i,"click",this,this.onClick_,!0);this.onMouseMoveWrapper_=b.bindEventWithChecks_(i,"mousemove",this,this.onMouseMove_,!0);this.onMouseEnterWrapper_=b.bindEventWithChecks_(i,"mouseenter",this,this.onMouseEnter_,!0);this.onMouseLeaveWrapper_=b.bindEventWithChecks_(i,"mouseleave",this,this.onMouseLeave_,!0);this.onKeyDownWrapper_=b.bindEventWithChecks_(i,"keydown",this,this.onKeyDown_);return i};b.FieldColour.prototype.dropdownDispose_=function(){b.unbindEvent_(this.onClickWrapper_);b.unbindEvent_(this.onMouseMoveWrapper_);b.unbindEvent_(this.onMouseEnterWrapper_);b.unbindEvent_(this.onMouseLeaveWrapper_);b.unbindEvent_(this.onKeyDownWrapper_);this.picker_=null};b.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]);b.fieldRegistry.register("field_colour",b.FieldColour);b.FieldDropdown=function(e,t,n){"function"!=typeof e&&b.FieldDropdown.validateOptions_(e);this.menuGenerator_=e;this.generatedOptions_=null;this.selectedIndex_=0;this.trimOptions_();e=this.getOptions(!1)[0];b.FieldDropdown.superClass_.constructor.call(this,e[1],t,n);this.selectedMenuItem_=this.imageElement_=null};b.utils.object.inherits(b.FieldDropdown,b.Field);b.FieldDropdown.fromJson=function(e){return new b.FieldDropdown(e.options,void 0,e)};b.FieldDropdown.prototype.SERIALIZABLE=!0;b.FieldDropdown.CHECKMARK_OVERHANG=25;b.FieldDropdown.MAX_MENU_HEIGHT_VH=.45;b.FieldDropdown.IMAGE_Y_OFFSET=5;b.FieldDropdown.IMAGE_Y_PADDING=2*b.FieldDropdown.IMAGE_Y_OFFSET;b.FieldDropdown.ARROW_CHAR=b.utils.userAgent.ANDROID?"▼":"▾";b.FieldDropdown.prototype.CURSOR="default";b.FieldDropdown.prototype.initView=function(){b.FieldDropdown.superClass_.initView.call(this);this.imageElement_=b.utils.dom.createSvgElement("image",{y:b.FieldDropdown.IMAGE_Y_OFFSET},this.fieldGroup_);this.arrow_=b.utils.dom.createSvgElement("tspan",{},this.textElement_);this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?b.FieldDropdown.ARROW_CHAR+" ":" "+b.FieldDropdown.ARROW_CHAR));this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)};b.FieldDropdown.prototype.showEditor_=function(){this.menu_=this.dropdownCreate_();this.menu_.render(b.DropDownDiv.getContentDiv());b.utils.dom.addClass(this.menu_.getElement(),"blocklyDropdownMenu");b.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this));this.menu_.focus();this.selectedMenuItem_&&b.utils.style.scrollIntoContainerView(this.selectedMenuItem_.getElement(),this.menu_.getElement())};b.FieldDropdown.prototype.dropdownCreate_=function(){var e=new b.Menu;e.setRightToLeft(this.sourceBlock_.RTL);e.setRole("listbox");var t=this.getOptions(!1);this.selectedMenuItem_=null;for(var n=0;n<t.length;n++){var o=t[n][0],i=t[n][1];if("object"==typeof o){var r=new Image(o.width,o.height);r.src=o.src;r.alt=o.alt||"";o=r}(o=new b.MenuItem(o)).setRole("option");o.setRightToLeft(this.sourceBlock_.RTL);o.setValue(i);o.setCheckable(!0);e.addChild(o,!0);o.setChecked(i==this.value_);i==this.value_&&(this.selectedMenuItem_=o);o.onAction(this.handleMenuActionEvent_,this)}b.utils.aria.setState(e.getElement(),b.utils.aria.State.ACTIVEDESCENDANT,this.selectedMenuItem_?this.selectedMenuItem_.getId():"");return e};b.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_.dispose();this.menu_=null};b.FieldDropdown.prototype.handleMenuActionEvent_=function(e){b.DropDownDiv.hideIfOwner(this,!0);this.onItemSelected(this.menu_,e)};b.FieldDropdown.prototype.onItemSelected=function(e,t){this.setValue(t.getValue())};b.FieldDropdown.prototype.trimOptions_=function(){this.suffixField=this.prefixField=null;var e=this.menuGenerator_;if(Array.isArray(e)){for(var t=!1,n=0;n<e.length;n++){var o=e[n][0];"string"==typeof o?e[n][0]=b.utils.replaceMessageReferences(o):(null!=o.alt&&(e[n][0].alt=b.utils.replaceMessageReferences(o.alt)),t=!0)}if(!(t||e.length<2)){t=[];for(n=0;n<e.length;n++)t.push(e[n][0]);n=b.utils.string.shortestStringLength(t);o=b.utils.string.commonWordPrefix(t,n);var i=b.utils.string.commonWordSuffix(t,n);!o&&!i||n<=o+i||(o&&(this.prefixField=t[0].substring(0,o-1)),i&&(this.suffixField=t[0].substr(1-i)),this.menuGenerator_=b.FieldDropdown.applyTrim_(e,o,i))}}};b.FieldDropdown.applyTrim_=function(e,t,n){for(var o=[],i=0;i<e.length;i++){var r=e[i][0],s=e[i][1],r=r.substring(t,r.length-n);o[i]=[r,s]}return o};b.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_};b.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),b.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_};b.FieldDropdown.prototype.doClassValidation_=function(e){for(var t,n=!1,o=this.getOptions(!0),i=0;t=o[i];i++)if(t[1]==e){n=!0;break}return n?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)};b.FieldDropdown.prototype.doValueUpdate_=function(e){b.FieldDropdown.superClass_.doValueUpdate_.call(this,e);e=this.getOptions(!0);for(var t,n=0;t=e[n];n++)t[1]==this.value_&&(this.selectedIndex_=n)};b.FieldDropdown.prototype.updateColour=function(){this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.getColourShadow():this.arrow_.style.fill=this.sourceBlock_.getColour())};b.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="";this.imageElement_.style.display="none";var e=this.getOptions(!0);(e=0<=this.selectedIndex_&&e[this.selectedIndex_][0])&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_();this.borderRect_.setAttribute("height",this.size_.height);this.borderRect_.setAttribute("width",this.size_.width)};b.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="";this.imageElement_.setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",e.src);this.imageElement_.setAttribute("height",e.height);this.imageElement_.setAttribute("width",e.width);var t=b.utils.dom.getTextWidth(this.arrow_),n=Number(e.width);this.size_.height=Number(e.height)+b.FieldDropdown.IMAGE_Y_PADDING;this.size_.width=n+t+b.Field.X_PADDING;this.sourceBlock_.RTL?(e=b.Field.DEFAULT_TEXT_OFFSET-1,this.imageElement_.setAttribute("x",b.Field.DEFAULT_TEXT_OFFSET+t),this.textElement_.setAttribute("x",e)):(e=n+t+b.Field.DEFAULT_TEXT_OFFSET+1,this.textElement_.setAttribute("text-anchor","end"),this.textElement_.setAttribute("x",e),this.imageElement_.setAttribute("x",b.Field.DEFAULT_TEXT_OFFSET))};b.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_();this.textElement_.setAttribute("text-anchor","start");this.textElement_.setAttribute("x",b.Field.DEFAULT_TEXT_OFFSET);this.size_.height=b.Field.BORDER_RECT_DEFAULT_HEIGHT;this.size_.width=b.utils.dom.getTextWidth(this.textElement_)+b.Field.X_PADDING};b.FieldDropdown.prototype.getText_=function(){if(this.selectedIndex_<0)return null;var e=this.getOptions(!0)[this.selectedIndex_][0];return"object"==typeof e?e.alt:e};b.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var t=!1,n=0;n<e.length;++n){var o=e[n];Array.isArray(o)?"string"!=typeof o[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(t)throw TypeError("Found invalid FieldDropdown options.")};b.FieldDropdown.prototype.onBlocklyAction=function(e){if(this.menu_){if(e===b.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(e===b.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return b.FieldDropdown.superClass_.onBlocklyAction.call(this,e)};b.fieldRegistry.register("field_dropdown",b.FieldDropdown);b.FieldLabelSerializable=function(e,t,n){b.FieldLabelSerializable.superClass_.constructor.call(this,e,t,n)};b.utils.object.inherits(b.FieldLabelSerializable,b.FieldLabel);b.FieldLabelSerializable.fromJson=function(e){var t=b.utils.replaceMessageReferences(e.text);return new b.FieldLabelSerializable(t,void 0,e)};b.FieldLabelSerializable.prototype.EDITABLE=!1;b.FieldLabelSerializable.prototype.SERIALIZABLE=!0;b.fieldRegistry.register("field_label_serializable",b.FieldLabelSerializable);b.FieldImage=function(e,t,n,o,i,r,s){if(!e)throw Error("Src value of an image field is required");e=b.utils.replaceMessageReferences(e);n=Number(b.utils.replaceMessageReferences(n));t=Number(b.utils.replaceMessageReferences(t));if(isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(n<=0||t<=0)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1;this.altText_="";b.FieldImage.superClass_.constructor.call(this,e||"",null,s);s||(this.flipRtl_=!!r,this.altText_=b.utils.replaceMessageReferences(o)||"");this.size_=new b.utils.Size(t,n+b.FieldImage.Y_PADDING);this.imageHeight_=n;this.clickHandler_=null;"function"==typeof i&&(this.clickHandler_=i)};b.utils.object.inherits(b.FieldImage,b.Field);b.FieldImage.fromJson=function(e){return new b.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)};b.FieldImage.Y_PADDING=1;b.FieldImage.prototype.EDITABLE=!1;b.FieldImage.prototype.isDirty_=!1;b.FieldImage.prototype.configure_=function(e){b.FieldImage.superClass_.configure_.call(this,e);this.flipRtl_=!!e.flipRtl;this.altText_=b.utils.replaceMessageReferences(e.alt)||""};b.FieldImage.prototype.initView=function(){this.imageElement_=b.utils.dom.createSvgElement("image",{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_);this.imageElement_.setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",this.value_)};b.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e};b.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e;this.imageElement_&&this.imageElement_.setAttributeNS(b.utils.dom.XLINK_NS,"xlink:href",this.value_||"")};b.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_};b.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))};b.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)};b.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e};b.FieldImage.prototype.getText_=function(){return this.altText_};b.fieldRegistry.register("field_image",b.FieldImage);b.FieldMultilineInput=function(e,t,n){null==e&&(e="");b.FieldMultilineInput.superClass_.constructor.call(this,e,t,n)};b.utils.object.inherits(b.FieldMultilineInput,b.FieldTextInput);b.FieldMultilineInput.LINE_HEIGHT=20;b.FieldMultilineInput.fromJson=function(e){var t=b.utils.replaceMessageReferences(e.text);return new b.FieldMultilineInput(t,void 0,e)};b.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_();this.textGroup_=b.utils.dom.createSvgElement("g",{class:"blocklyEditableText"},this.fieldGroup_)};b.FieldMultilineInput.prototype.getDisplayText_=function(){if(!(t=this.value_))return b.Field.NBSP;for(var e=t.split("\n"),t="",n=0;n<e.length;n++){var o=e[n];o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-4)+"...");t+=o=o.replace(/\s/g,b.Field.NBSP);n!==e.length-1&&(t+="\n")}this.sourceBlock_.RTL&&(t+="‏");return t};b.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var t=b.Field.Y_PADDING/2,n=0,o=0;o<e.length;o++)b.utils.dom.createSvgElement("text",{class:"blocklyText blocklyMultilineText",x:b.Field.DEFAULT_TEXT_OFFSET,y:n+t,dy:b.FieldMultilineInput.LINE_HEIGHT/2},this.textGroup_).appendChild(document.createTextNode(e[o])),n+=b.FieldMultilineInput.LINE_HEIGHT;this.updateSize_();this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.isTextValid_?(b.utils.dom.removeClass(this.htmlInput_,"blocklyInvalidInput"),b.utils.aria.setState(this.htmlInput_,"invalid",!1)):(b.utils.dom.addClass(this.htmlInput_,"blocklyInvalidInput"),b.utils.aria.setState(this.htmlInput_,"invalid",!0)))};b.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,t=0,n=0,o=0;o<e.length;o++){var i=b.utils.dom.getTextWidth(e[o]);t<i&&(t=i);n+=b.FieldMultilineInput.LINE_HEIGHT}this.borderRect_&&(t+=b.Field.X_PADDING,this.borderRect_.setAttribute("width",t),this.borderRect_.setAttribute("height",n));this.size_.width=t;this.size_.height=n};b.FieldMultilineInput.prototype.resizeEditor_=function(){var e=b.WidgetDiv.DIV,t=this.getScaledBBox_();e.style.width=t.right-t.left+"px";e.style.height=t.bottom-t.top+"px";t=new b.utils.Coordinate(this.sourceBlock_.RTL?t.right-e.offsetWidth:t.left,t.top);e.style.left=t.x+"px";e.style.top=t.y+"px"};b.FieldMultilineInput.prototype.widgetCreate_=function(){var e=b.WidgetDiv.DIV,t=this.workspace_.scale,n=document.createElement("textarea");n.className="blocklyHtmlInput blocklyHtmlTextAreaInput";n.setAttribute("spellcheck",this.spellcheck_);var o=b.FieldTextInput.FONTSIZE*t+"pt";e.style.fontSize=o;n.style.fontSize=o;n.style.borderRadius=b.FieldTextInput.BORDERRADIUS*t+"px";o=b.Field.DEFAULT_TEXT_OFFSET*t;n.style.paddingLeft=o+"px";n.style.width="calc(100% - "+o+"px)";n.style.lineHeight=b.FieldMultilineInput.LINE_HEIGHT*t+"px";e.appendChild(n);n.value=n.defaultValue=this.getEditorText_(this.value_);n.untypedDefaultValue_=this.value_;n.oldValue_=null;b.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_();this.bindInputEvents_(n);return n};b.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==b.utils.KeyCodes.ENTER&&b.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)};b.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(","));b.fieldRegistry.register("field_multilinetext",b.FieldMultilineInput);b.FieldNumber=function(e,t,n,o,i,r){this.min_=-1/0;this.max_=1/0;this.precision_=0;this.decimalPlaces_=null;b.FieldNumber.superClass_.constructor.call(this,e||0,i,r);r||this.setConstraints(t,n,o)};b.utils.object.inherits(b.FieldNumber,b.FieldTextInput);b.FieldNumber.fromJson=function(e){return new b.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)};b.FieldNumber.prototype.SERIALIZABLE=!0;b.FieldNumber.prototype.configure_=function(e){b.FieldNumber.superClass_.configure_.call(this,e);this.setMinInternal_(e.min);this.setMaxInternal_(e.max);this.setPrecisionInternal_(e.precision)};b.FieldNumber.prototype.setConstraints=function(e,t,n){this.setMinInternal_(e);this.setMaxInternal_(t);this.setPrecisionInternal_(n);this.setValue(this.getValue())};b.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e);this.setValue(this.getValue())};b.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))};b.FieldNumber.prototype.getMin=function(){return this.min_};b.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e);this.setValue(this.getValue())};b.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))};b.FieldNumber.prototype.getMax=function(){return this.max_};b.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e);this.setValue(this.getValue())};b.FieldNumber.prototype.setPrecisionInternal_=function(e){null==e?this.precision_=0:(e=Number(e),isNaN(e)||(this.precision_=e));var t=this.precision_.toString(),n=t.indexOf(".");this.decimalPlaces_=-1==n?e?0:null:t.length-n-1};b.FieldNumber.prototype.getPrecision=function(){return this.precision_};b.FieldNumber.prototype.doClassValidation_=function(e){if(null===e)return null;e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"");e=Number(e||0);if(isNaN(e))return null;e=Math.min(Math.max(e,this.min_),this.max_);this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_);null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_)));return e};b.FieldNumber.prototype.widgetCreate_=function(){var e=b.FieldNumber.superClass_.widgetCreate_.call(this);-1/0<this.min_&&b.utils.aria.setState(e,b.utils.aria.State.VALUEMIN,this.min_);1/0>this.max_&&b.utils.aria.setState(e,b.utils.aria.State.VALUEMAX,this.max_);return e};b.fieldRegistry.register("field_number",b.FieldNumber);b.FieldVariable=function(e,t,n,o,i){this.menuGenerator_=b.FieldVariable.dropdownCreate;this.defaultVariableName=e||"";this.size_=new b.utils.Size(0,b.BlockSvg.MIN_BLOCK_Y);i&&this.configure_(i);t&&this.setValidator(t);i||this.setTypes_(n,o)};b.utils.object.inherits(b.FieldVariable,b.FieldDropdown);b.FieldVariable.fromJson=function(e){var t=b.utils.replaceMessageReferences(e.variable);return new b.FieldVariable(t,void 0,void 0,void 0,e)};b.FieldVariable.prototype.workspace_=null;b.FieldVariable.prototype.SERIALIZABLE=!0;b.FieldVariable.prototype.configureDropdownMenu=null;b.FieldVariable.prototype.onItemSelectedCb=null;b.FieldVariable.prototype.configure_=function(e){b.FieldVariable.superClass_.configure_.call(this,e);this.setTypes_(e.variableTypes,e.defaultType)};b.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=b.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);b.Events.disable();this.setValue(e.getId());b.Events.enable()}};b.FieldVariable.prototype.fromXml=function(e){var t=e.getAttribute("id"),n=e.textContent,o=e.getAttribute("variabletype")||e.getAttribute("variableType")||"",t=b.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,t,n,o);if(null!=o&&o!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+b.Xml.domToText(e)+".");this.setValue(t.getId())};b.FieldVariable.prototype.toXml=function(e){this.initModel();e.id=this.variable_.getId();e.textContent=this.variable_.name;this.variable_.type&&e.setAttribute("variabletype",this.variable_.type);return e};b.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");b.FieldVariable.superClass_.setSourceBlock.call(this,e)};b.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null};b.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""};b.FieldVariable.prototype.getVariable=function(){return this.variable_};b.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null};b.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var t=b.Variables.getVariable(this.sourceBlock_.workspace,e);if(!t)return console.warn("Variable id doesn't point to a real variable! ID was "+e),null;t=t.type;return this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)};b.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=b.Variables.getVariable(this.sourceBlock_.workspace,e);b.FieldVariable.superClass_.doValueUpdate_.call(this,e)};b.FieldVariable.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1};b.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e};b.FieldVariable.prototype.setTypes_=function(e,t){t=t||"";if(null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<e.length;o++)e[o]==t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}this.defaultType_=t;this.variableTypes=e};b.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()};b.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),t=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var n=this.getVariableTypes_(),o=0;o<n.length;o++)var i=this.sourceBlock_.workspace.getVariablesOfType(n[o]),t=t.concat(i);t.sort(b.VariableModel.compareByName);n=[];for(o=0;o<t.length;o++)n[o]=[t[o].name,t[o].getId()];n.push([b.Msg.RENAME_VARIABLE,b.RENAME_VARIABLE_ID]);b.Msg.DELETE_VARIABLE&&n.push([b.Msg.DELETE_VARIABLE.replace("%1",e),b.DELETE_VARIABLE_ID]);this.configureDropdownMenu&&this.configureDropdownMenu(n);return n};b.FieldVariable.prototype.onItemSelected=function(e,t){e=t.getValue();if(!this.onItemSelectedCb(e)){if(this.sourceBlock_&&this.sourceBlock_.workspace){if(e==b.RENAME_VARIABLE_ID){b.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);return}if(e==b.DELETE_VARIABLE_ID){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(e)}};b.FieldVariable.prototype.referencesVariables=function(){return!0};b.fieldRegistry.register("field_variable",b.FieldVariable);b.utils.svgPaths={};b.utils.svgPaths.point=function(e,t){return" "+e+","+t+" "};b.utils.svgPaths.curve=function(e,t){return" "+e+t.join("")};b.utils.svgPaths.moveTo=function(e,t){return" M "+e+","+t+" "};b.utils.svgPaths.moveBy=function(e,t){return" m "+e+","+t+" "};b.utils.svgPaths.lineTo=function(e,t){return" l "+e+","+t+" "};b.utils.svgPaths.line=function(e){return" l"+e.join("")};b.utils.svgPaths.lineOnAxis=function(e,t){return" "+e+" "+t+" "};b.utils.svgPaths.arc=function(e,t,n,o){return e+" "+n+" "+n+" "+t+o};b.blockRendering.ConstantProvider=function(){this.NO_PADDING=0;this.SMALL_PADDING=3;this.MEDIUM_PADDING=5;this.MEDIUM_LARGE_PADDING=8;this.LARGE_PADDING=10;this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING;this.TAB_HEIGHT=15;this.TAB_OFFSET_FROM_TOP=5;this.TAB_VERTICAL_OVERLAP=2.5;this.TAB_WIDTH=8;this.NOTCH_WIDTH=15;this.NOTCH_HEIGHT=4;this.MIN_BLOCK_WIDTH=12;this.EMPTY_BLOCK_SPACER_HEIGHT=16;this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT;this.CORNER_RADIUS=8;this.NOTCH_OFFSET_LEFT=15;this.STATEMENT_BOTTOM_SPACER=0;this.STATEMENT_INPUT_PADDING_LEFT=20;this.BETWEEN_STATEMENT_PADDING_Y=4;this.MAX_BOTTOM_WIDTH=66.5;this.START_HAT_HEIGHT=15;this.START_HAT_WIDTH=100;this.SPACER_DEFAULT_HEIGHT=15;this.MIN_BLOCK_HEIGHT=24;this.EMPTY_INLINE_INPUT_PADDING=14.5;this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11;this.EXTERNAL_VALUE_INPUT_PADDING=2;this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT;this.START_POINT=b.utils.svgPaths.moveBy(0,0);this.JAGGED_TEETH_HEIGHT=12;this.JAGGED_TEETH_WIDTH=6};b.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth();this.NOTCH=this.makeNotch();this.START_HAT=this.makeStartHat();this.PUZZLE_TAB=this.makePuzzleTab();this.INSIDE_CORNERS=this.makeInsideCorners();this.OUTSIDE_CORNERS=this.makeOutsideCorners()};b.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){return{height:this.JAGGED_TEETH_HEIGHT,width:this.JAGGED_TEETH_WIDTH,path:b.utils.svgPaths.line([b.utils.svgPaths.point(6,3),b.utils.svgPaths.point(-12,6),b.utils.svgPaths.point(6,3)])}};b.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:b.utils.svgPaths.curve("c",[b.utils.svgPaths.point(30,-e),b.utils.svgPaths.point(70,-e),b.utils.svgPaths.point(t,0)])}};b.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var t=-(e=e?-1:1),n=2.5+(r=a/2),o=.5+r,i=b.utils.svgPaths.point(-s,e*r),r=b.utils.svgPaths.point(s,e*r);return b.utils.svgPaths.curve("c",[b.utils.svgPaths.point(0,e*n),b.utils.svgPaths.point(-s,t*o),i])+b.utils.svgPaths.curve("s",[b.utils.svgPaths.point(s,2.5*t),r])}var s=this.TAB_WIDTH,a=this.TAB_HEIGHT,t=e(!0),n=e(!1);return{width:s,height:a,pathDown:n,pathUp:t}};b.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return b.utils.svgPaths.line([b.utils.svgPaths.point(e*o,n),b.utils.svgPaths.point(3*e,0),b.utils.svgPaths.point(e*o,-n)])}var t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(t-3)/2,i=e(1),r=e(-1);return{width:t,height:n,pathLeft:i,pathRight:r}};b.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:b.utils.svgPaths.arc("a","0 0,0",e,b.utils.svgPaths.point(-e,e)),pathBottom:b.utils.svgPaths.arc("a","0 0,0",e,b.utils.svgPaths.point(e,e))}};b.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS;return{topLeft:b.utils.svgPaths.moveBy(0,e)+b.utils.svgPaths.arc("a","0 0,1",e,b.utils.svgPaths.point(e,-e)),bottomLeft:e=b.utils.svgPaths.arc("a","0 0,1",e,b.utils.svgPaths.point(-e,-e))}};b.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case b.INPUT_VALUE:case b.OUTPUT_VALUE:return this.PUZZLE_TAB;case b.PREVIOUS_STATEMENT:case b.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}};b.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608};b.blockRendering.Types.LEFT_CORNER=b.blockRendering.Types.LEFT_SQUARE_CORNER|b.blockRendering.Types.LEFT_ROUND_CORNER;b.blockRendering.Types.RIGHT_CORNER=b.blockRendering.Types.RIGHT_SQUARE_CORNER|b.blockRendering.Types.RIGHT_ROUND_CORNER;b.blockRendering.Types.nextTypeValue_=16777216;b.blockRendering.Types.getType=function(e){b.blockRendering.Types.hasOwnProperty(e)||(b.blockRendering.Types[e]=b.blockRendering.Types.nextTypeValue_,b.blockRendering.Types.nextTypeValue_<<=1);return b.blockRendering.Types[e]};b.blockRendering.Types.isField=function(e){return e.type&b.blockRendering.Types.FIELD};b.blockRendering.Types.isHat=function(e){return e.type&b.blockRendering.Types.HAT};b.blockRendering.Types.isIcon=function(e){return e.type&b.blockRendering.Types.ICON};b.blockRendering.Types.isSpacer=function(e){return e.type&b.blockRendering.Types.SPACER};b.blockRendering.Types.isInRowSpacer=function(e){return e.type&b.blockRendering.Types.IN_ROW_SPACER};b.blockRendering.Types.isInput=function(e){return e.type&b.blockRendering.Types.INPUT};b.blockRendering.Types.isExternalInput=function(e){return e.type&b.blockRendering.Types.EXTERNAL_VALUE_INPUT};b.blockRendering.Types.isInlineInput=function(e){return e.type&b.blockRendering.Types.INLINE_INPUT};b.blockRendering.Types.isStatementInput=function(e){return e.type&b.blockRendering.Types.STATEMENT_INPUT};b.blockRendering.Types.isPreviousConnection=function(e){return e.type&b.blockRendering.Types.PREVIOUS_CONNECTION};b.blockRendering.Types.isNextConnection=function(e){return e.type&b.blockRendering.Types.NEXT_CONNECTION};b.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(b.blockRendering.Types.PREVIOUS_CONNECTION|b.blockRendering.Types.NEXT_CONNECTION)};b.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&b.blockRendering.Types.LEFT_ROUND_CORNER};b.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&b.blockRendering.Types.RIGHT_ROUND_CORNER};b.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&b.blockRendering.Types.LEFT_SQUARE_CORNER};b.blockRendering.Types.isRightSquareCorner=function(e){return e.type&b.blockRendering.Types.RIGHT_SQUARE_CORNER};b.blockRendering.Types.isCorner=function(e){return e.type&b.blockRendering.Types.CORNER};b.blockRendering.Types.isJaggedEdge=function(e){return e.type&b.blockRendering.Types.JAGGED_EDGE};b.blockRendering.Types.isRow=function(e){return e.type&b.blockRendering.Types.ROW};b.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&b.blockRendering.Types.BETWEEN_ROW_SPACER};b.blockRendering.Types.isTopRow=function(e){return e.type&b.blockRendering.Types.TOP_ROW};b.blockRendering.Types.isBottomRow=function(e){return e.type&b.blockRendering.Types.BOTTOM_ROW};b.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(b.blockRendering.Types.TOP_ROW|b.blockRendering.Types.BOTTOM_ROW)};b.blockRendering.Types.isInputRow=function(e){return e.type&b.blockRendering.Types.INPUT_ROW};b.blockRendering.Measurable=function(e){this.height=this.width=0;this.type=b.blockRendering.Types.NONE;this.centerline=this.xPos=0;this.constants_=e;this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT};b.blockRendering.Connection=function(e,t){b.blockRendering.Connection.superClass_.constructor.call(this,e);this.connectionModel=t;this.shape=this.constants_.shapeFor(t);this.type|=b.blockRendering.Types.CONNECTION};b.utils.object.inherits(b.blockRendering.Connection,b.blockRendering.Measurable);b.blockRendering.OutputConnection=function(e,t){b.blockRendering.OutputConnection.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.OUTPUT_CONNECTION;this.height=this.shape.height;this.width=this.shape.width;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.startX=this.width};b.utils.object.inherits(b.blockRendering.OutputConnection,b.blockRendering.Connection);b.blockRendering.OutputConnection.prototype.isDynamic=function(){return this.shape.isDynamic};b.blockRendering.PreviousConnection=function(e,t){b.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.PREVIOUS_CONNECTION;this.height=this.shape.height;this.width=this.shape.width};b.utils.object.inherits(b.blockRendering.PreviousConnection,b.blockRendering.Connection);b.blockRendering.NextConnection=function(e,t){b.blockRendering.NextConnection.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.NEXT_CONNECTION;this.height=this.shape.height;this.width=this.shape.width};b.utils.object.inherits(b.blockRendering.NextConnection,b.blockRendering.Connection);b.blockRendering.InputConnection=function(e,t){b.blockRendering.InputConnection.superClass_.constructor.call(this,e,t.connection);this.type|=b.blockRendering.Types.INPUT;this.input=t;this.align=t.align;(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0;this.connection=t.connection;this.connectionOffsetY=this.connectionOffsetX=0};b.utils.object.inherits(b.blockRendering.InputConnection,b.blockRendering.Connection);b.blockRendering.InlineInput=function(e,t){b.blockRendering.InlineInput.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.INLINE_INPUT;this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.shape.width+this.constants_.EMPTY_INLINE_INPUT_PADDING);this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.connectionHeight=this.shape.height;this.connectionWidth=this.shape.width};b.utils.object.inherits(b.blockRendering.InlineInput,b.blockRendering.InputConnection);b.blockRendering.StatementInput=function(e,t){b.blockRendering.StatementInput.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.STATEMENT_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT;this.width=this.constants_.NOTCH_OFFSET_LEFT+this.shape.width};b.utils.object.inherits(b.blockRendering.StatementInput,b.blockRendering.InputConnection);b.blockRendering.ExternalValueInput=function(e,t){b.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,t);this.type|=b.blockRendering.Types.EXTERNAL_VALUE_INPUT;this.height=this.connectedBlock?this.connectedBlockHeight-2*this.constants_.TAB_OFFSET_FROM_TOP:this.shape.height;this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING;this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP;this.connectionHeight=this.shape.height;this.connectionWidth=this.shape.width};b.utils.object.inherits(b.blockRendering.ExternalValueInput,b.blockRendering.InputConnection);b.blockRendering.Icon=function(e,t){b.blockRendering.Icon.superClass_.constructor.call(this,e);this.icon=t;this.isVisible=t.isVisible();this.type|=b.blockRendering.Types.ICON;e=t.getCorrectedSize();this.height=e.height;this.width=e.width};b.utils.object.inherits(b.blockRendering.Icon,b.blockRendering.Measurable);b.blockRendering.JaggedEdge=function(e){b.blockRendering.JaggedEdge.superClass_.constructor.call(this,e);this.type|=b.blockRendering.Types.JAGGED_EDGE;this.height=this.constants_.JAGGED_TEETH.height;this.width=this.constants_.JAGGED_TEETH.width};b.utils.object.inherits(b.blockRendering.JaggedEdge,b.blockRendering.Measurable);b.blockRendering.Field=function(e,t,n){b.blockRendering.Field.superClass_.constructor.call(this,e);this.field=t;this.isEditable=t.isCurrentlyEditable();this.flipRtl=t.getFlipRtl();this.type|=b.blockRendering.Types.FIELD;e=this.field.getSize();this.height=e.height;this.width=e.width;this.parentInput=n};b.utils.object.inherits(b.blockRendering.Field,b.blockRendering.Measurable);b.blockRendering.Hat=function(e){b.blockRendering.Hat.superClass_.constructor.call(this,e);this.type|=b.blockRendering.Types.HAT;this.height=this.constants_.START_HAT.height;this.width=this.constants_.START_HAT.width;this.ascenderHeight=this.height};b.utils.object.inherits(b.blockRendering.Hat,b.blockRendering.Measurable);b.blockRendering.SquareCorner=function(e,t){b.blockRendering.SquareCorner.superClass_.constructor.call(this,e);this.type=(t&&"left"!=t?b.blockRendering.Types.RIGHT_SQUARE_CORNER:b.blockRendering.Types.LEFT_SQUARE_CORNER)|b.blockRendering.Types.CORNER;this.width=this.height=this.constants_.NO_PADDING};b.utils.object.inherits(b.blockRendering.SquareCorner,b.blockRendering.Measurable);b.blockRendering.RoundCorner=function(e,t){b.blockRendering.RoundCorner.superClass_.constructor.call(this,e);this.type=(t&&"left"!=t?b.blockRendering.Types.RIGHT_ROUND_CORNER:b.blockRendering.Types.LEFT_ROUND_CORNER)|b.blockRendering.Types.CORNER;this.width=this.constants_.CORNER_RADIUS;this.height=this.constants_.CORNER_RADIUS/2};b.utils.object.inherits(b.blockRendering.RoundCorner,b.blockRendering.Measurable);b.blockRendering.InRowSpacer=function(e,t){b.blockRendering.InRowSpacer.superClass_.constructor.call(this,e);this.type=this.type|b.blockRendering.Types.SPACER|b.blockRendering.Types.IN_ROW_SPACER;this.width=t;this.height=this.constants_.SPACER_DEFAULT_HEIGHT};b.utils.object.inherits(b.blockRendering.InRowSpacer,b.blockRendering.Measurable);b.blockRendering.Row=function(e){this.type=b.blockRendering.Types.ROW;this.elements=[];this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0;this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1;this.constants_=e;this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT};b.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")};b.blockRendering.Row.prototype.getLastInput=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(b.blockRendering.Types.isInput(e))return e;return null};b.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0};b.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0};b.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,t=0;e=this.elements[t];t++)if(b.blockRendering.Types.isSpacer(e))return e;return null};b.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(b.blockRendering.Types.isSpacer(e))return e;return null};b.blockRendering.TopRow=function(e){b.blockRendering.TopRow.superClass_.constructor.call(this,e);this.type|=b.blockRendering.Types.TOP_ROW;this.ascenderHeight=this.capline=0;this.hasPreviousConnection=!1;this.connection=null};b.utils.object.inherits(b.blockRendering.TopRow,b.blockRendering.Row);b.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var t=(e.hat?"cap"===e.hat:b.BlockSvg.START_HAT)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||!!n&&n.getNextBlock()==e};b.blockRendering.TopRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,i=0;e=this.elements[i];i++)n+=e.width,b.blockRendering.Types.isSpacer(e)||(b.blockRendering.Types.isHat(e)?o=Math.max(o,e.ascenderHeight):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n);this.height=Math.max(this.minHeight,t)+o;this.capline=this.ascenderHeight=o;this.widthWithConnectedBlocks=this.width};b.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1};b.blockRendering.BottomRow=function(e){b.blockRendering.BottomRow.superClass_.constructor.call(this,e);this.type|=b.blockRendering.Types.BOTTOM_ROW;this.hasNextConnection=!1;this.connection=null;this.baseline=this.descenderHeight=0};b.utils.object.inherits(b.blockRendering.BottomRow,b.blockRendering.Row);b.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()};b.blockRendering.BottomRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,i=0;e=this.elements[i];i++)n+=e.width,b.blockRendering.Types.isSpacer(e)||(b.blockRendering.Types.isNextConnection(e)?o=Math.max(o,e.height):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n);this.height=Math.max(this.minHeight,t)+o;this.descenderHeight=o;this.widthWithConnectedBlocks=this.width};b.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1};b.blockRendering.SpacerRow=function(e,t,n){b.blockRendering.SpacerRow.superClass_.constructor.call(this,e);this.type=this.type|b.blockRendering.Types.SPACER|b.blockRendering.Types.BETWEEN_ROW_SPACER;this.width=n;this.height=t;this.followsStatement=!1;this.widthWithConnectedBlocks=0;this.elements=[new b.blockRendering.InRowSpacer(this.constants_,n)]};b.utils.object.inherits(b.blockRendering.SpacerRow,b.blockRendering.Row);b.blockRendering.SpacerRow.prototype.measure=function(){};b.blockRendering.InputRow=function(e){b.blockRendering.InputRow.superClass_.constructor.call(this,e);this.type|=b.blockRendering.Types.INPUT_ROW;this.connectedBlockWidths=0};b.utils.object.inherits(b.blockRendering.InputRow,b.blockRendering.Row);b.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var e,t=0,n=0;e=this.elements[n];n++)this.width+=e.width,b.blockRendering.Types.isInput(e)&&(b.blockRendering.Types.isStatementInput(e)?t+=e.connectedBlockWidth:b.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(t+=e.connectedBlockWidth-e.connectionWidth)),b.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=t;this.widthWithConnectedBlocks=this.width+t};b.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement};b.blockRendering.RenderInfo=function(e,t){this.block_=t;this.renderer_=e;this.constants_=this.renderer_.getConstants();this.outputConnection=t.outputConnection?new b.blockRendering.OutputConnection(this.constants_,t.outputConnection):null;this.isInline=t.getInputsInline()&&!t.isCollapsed();this.isCollapsed=t.isCollapsed();this.isInsertionMarker=t.isInsertionMarker();this.RTL=t.RTL;this.statementEdge=this.width=this.widthWithChildren=this.height=0;this.rows=[];this.hiddenIcons=[];this.topRow=new b.blockRendering.TopRow(this.constants_);this.bottomRow=new b.blockRendering.BottomRow(this.constants_);this.startY=this.startX=0};b.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_};b.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_();this.addElemSpacing_();this.computeBounds_();this.alignRowElements_();this.addRowSpacing_();this.finalize_()};b.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_();this.rows.push(this.topRow);var e=new b.blockRendering.InputRow(this.constants_),t=this.block_.getIcons();if(t.length)for(var n,o=0;n=t[o];o++){var i=new b.blockRendering.Icon(this.constants_,n);(this.isCollapsed&&n.collapseHidden?this.hiddenIcons:e.elements).push(i)}n=null;for(o=0;t=this.block_.inputList[o];o++)if(t.isVisible()){this.shouldStartNewRow_(t,n)&&(this.rows.push(e),e=new b.blockRendering.InputRow(this.constants_));for(n=0;i=t.fieldRow[n];n++)e.elements.push(new b.blockRendering.Field(this.constants_,i,t));this.addInput_(t,e);n=t}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new b.blockRendering.JaggedEdge(this.constants_)));(e.elements.length||e.hasDummyInput)&&this.rows.push(e);this.populateBottomRow_();this.rows.push(this.bottomRow)};b.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,t=(this.block_.hat?"cap"===this.block_.hat:b.BlockSvg.START_HAT)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new b.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new b.blockRendering.RoundCorner(this.constants_));t?(e=new b.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new b.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection));this.block_.inputList.length&&this.block_.inputList[0].type==b.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.LARGE_PADDING:this.topRow.minHeight=this.constants_.MEDIUM_PADDING};b.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection;this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==b.NEXT_STATEMENT?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING-1;this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new b.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new b.blockRendering.RoundCorner(this.constants_));this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new b.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection))};b.blockRendering.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==b.INPUT_VALUE?(t.elements.push(new b.blockRendering.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==b.NEXT_STATEMENT?(t.elements.push(new b.blockRendering.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==b.INPUT_VALUE?(t.elements.push(new b.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==b.DUMMY_INPUT&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0);t.align=e.align};b.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,t){return!!t&&(e.type==b.NEXT_STATEMENT||t.type==b.NEXT_STATEMENT||(e.type==b.INPUT_VALUE||e.type==b.DUMMY_INPUT)&&!this.isInline)};b.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=0;e=this.rows[t];t++){var n=e.elements;e.elements=[];e.startsWithElemSpacer()&&e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,n[0])));for(var o=0;o<n.length-1;o++){e.elements.push(n[o]);var i=this.getInRowSpacing_(n[o],n[o+1]);e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,i))}e.elements.push(n[n.length-1]);e.endsWithElemSpacer()&&e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}};b.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(e&&b.blockRendering.Types.isInput(e)&&!t){if(b.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(b.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(b.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&b.blockRendering.Types.isLeftSquareCorner(e)&&t&&(b.blockRendering.Types.isPreviousConnection(t)||b.blockRendering.Types.isNextConnection(t))?t.notchOffset:e&&b.blockRendering.Types.isLeftRoundedCorner(e)&&t&&(b.blockRendering.Types.isPreviousConnection(t)||b.blockRendering.Types.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING};b.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var e,t,n=0,o=0,i=0,r=0;e=this.rows[r];r++){e.measure();o=Math.max(o,e.width);e.hasStatement&&(t=e.getLastInput(),n=Math.max(n,e.width-t.width));i=Math.max(i,e.widthWithConnectedBlocks)}this.statementEdge=n;this.width=o;for(r=0;e=this.rows[r];r++)e.hasStatement&&(e.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(o,i);this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)};b.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,t=0;e=this.rows[t];t++)if(e.hasStatement)this.alignStatementRow_(e);else{var n=this.width-this.startX-e.width;n&&this.addAlignmentPadding_(e,n)}};b.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,t){var n=e.getLastSpacer();n&&(n.width+=t,e.width+=t)};b.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var t=e.getLastInput(),n=e.width-t.width,o=this.statementEdge;(n=o-n)&&this.addAlignmentPadding_(e,n);n=e.width;o=this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0);t.width+=o-n;e.width+=o-n;e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)};b.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var t=0;t<e.length;t++)this.rows.push(e[t]),t!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))};b.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,t){var n=this.getSpacerRowHeight_(e,t);t=this.getSpacerRowWidth_(e,t);n=new b.blockRendering.SpacerRow(this.constants_,n,t);e.hasStatement&&(n.followsStatement=!0);return n};b.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){return this.width-this.startX};b.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return this.constants_.MEDIUM_PADDING};b.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,t){return b.blockRendering.Types.isSpacer(t)?e.yPos+t.height/2:b.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,b.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2):b.blockRendering.Types.isTopRow(e)?b.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2};b.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var t,n=e.xPos,o=0;t=e.elements[o];o++)b.blockRendering.Types.isSpacer(t)&&(t.height=e.height),t.xPos=n,t.centerline=this.getElemCenterline_(e,t),n+=t.width};b.blockRendering.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++)e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks),this.recordElemPositions_(e);this.widthWithChildren=t+this.startX;this.height=n;this.startY=this.topRow.capline;this.bottomRow.baseline=n-this.bottomRow.descenderHeight};b.blockRendering.Drawer=function(e,t){this.block_=e;this.info_=t;this.topLeft_=e.getRelativeToSurfaceXY();this.inlinePath_=this.outlinePath_="";this.constants_=t.getRenderer().getConstants()};b.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_();this.drawOutline_();this.drawInternals_();this.block_.pathObject.setPaths(this.outlinePath_+"\n"+this.inlinePath_);this.info_.RTL&&this.block_.pathObject.flipRTL();b.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_);this.recordSizeOnBlock_()};b.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height;this.block_.width=this.info_.widthWithChildren};b.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var e,t=0;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")};b.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_();this.drawLeft_()};b.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_();this.outlinePath_+=b.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=t[o];o++)b.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:b.blockRendering.Types.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:b.blockRendering.Types.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:b.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=b.utils.svgPaths.lineOnAxis("h",n.width));this.outlinePath_+=b.utils.svgPaths.lineOnAxis("v",e.height)};b.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+b.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)};b.blockRendering.Drawer.prototype.drawValueInput_=function(e){var t=e.getLastInput();this.positionExternalValueConnection_(e);var n="function"==typeof t.shape.pathDown?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=b.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+n+b.utils.svgPaths.lineOnAxis("v",e.height-t.connectionHeight)};b.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var t=(n=e.getLastInput()).xPos+n.notchOffset+n.shape.width,n=n.shape.pathRight+b.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=b.utils.svgPaths.lineOnAxis("H",t)+n+b.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+b.utils.svgPaths.lineOnAxis("H",e.xPos+e.width);this.positionStatementInputConnection_(e)};b.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=b.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)};b.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();this.outlinePath_+=b.utils.svgPaths.lineOnAxis("V",e.baseline);for(var n,o=t.length-1;n=t[o];o--)b.blockRendering.Types.isNextConnection(n)?this.outlinePath_+=n.shape.pathRight:b.blockRendering.Types.isLeftSquareCorner(n)?this.outlinePath_+=b.utils.svgPaths.lineOnAxis("H",e.xPos):b.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.bottomLeft:b.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=b.utils.svgPaths.lineOnAxis("h",-1*n.width))};b.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;this.positionOutputConnection_();if(e){var t=e.connectionOffsetY+e.height,e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp;this.outlinePath_+=b.utils.svgPaths.lineOnAxis("V",t)+e}this.outlinePath_+="z"};b.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,t=0;e=this.info_.rows[t];t++)for(var n,o=0;n=e.elements[o];o++)b.blockRendering.Types.isInlineInput(n)?this.drawInlineInput_(n):(b.blockRendering.Types.isIcon(n)||b.blockRendering.Types.isField(n))&&this.layoutField_(n)};b.blockRendering.Drawer.prototype.layoutField_=function(e){var t;b.blockRendering.Types.isField(e)?t=e.field.getSvgRoot():b.blockRendering.Types.isIcon(e)&&(t=e.icon.iconGroup_);var n=e.centerline-e.height/2,o=e.xPos,i="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,i="scale(-1 1)"));b.blockRendering.Types.isIcon(e)?(t.setAttribute("display","block"),t.setAttribute("transform","translate("+o+","+n+")"),e.icon.computeIconLocation()):t.setAttribute("transform","translate("+o+","+n+")"+i);this.info_.isInsertionMarker&&t.setAttribute("display","none")};b.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var t=e.width,n=e.height,o=e.connectionOffsetY,i=e.connectionHeight+o;this.inlinePath_+=b.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-n/2)+b.utils.svgPaths.lineOnAxis("v",o)+e.shape.pathDown+b.utils.svgPaths.lineOnAxis("v",n-i)+b.utils.svgPaths.lineOnAxis("h",t-e.connectionWidth)+b.utils.svgPaths.lineOnAxis("v",-n)+"z";this.positionInlineInputConnection_(e)};b.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connection){var n=e.xPos+e.connectionWidth;this.info_.RTL&&(n*=-1);e.connection.setOffsetInBlock(n,t+e.connectionOffsetY)}};b.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1);t.connection.setOffsetInBlock(n,e.yPos)}};b.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.width;this.info_.RTL&&(n*=-1);t.connection.setOffsetInBlock(n,e.yPos)}};b.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}};b.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=(e=e.connection).xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,e.centerline-e.height/2)}};b.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}};b.CursorSvg=function(e,t){this.workspace_=e;this.isMarker_=t;this.parent_=null;this.constants_=e.getRenderer().getConstants()};b.CursorSvg.CURSOR_HEIGHT=5;b.CursorSvg.CURSOR_WIDTH=100;b.CursorSvg.NOTCH_START_LENGTH=24;b.CursorSvg.VERTICAL_PADDING=5;b.CursorSvg.STACK_PADDING=10;b.CursorSvg.BLOCK_PADDING=2;b.CursorSvg.HEIGHT_MULTIPLIER=.75;b.CursorSvg.CURSOR_COLOR="#cc0a0a";b.CursorSvg.MARKER_COLOR="#4286f4";b.CursorSvg.CURSOR_CLASS="blocklyCursor";b.CursorSvg.MARKER_CLASS="blocklyMarker";b.CursorSvg.prototype.currentCursorSvg=null;b.CursorSvg.prototype.getSvgRoot=function(){return this.svgGroup_};b.CursorSvg.prototype.createDom=function(){this.svgGroup_=b.utils.dom.createSvgElement("g",{class:this.isMarker_?b.CursorSvg.MARKER_CLASS:b.CursorSvg.CURSOR_CLASS},null);this.createCursorSvg_();return this.svgGroup_};b.CursorSvg.prototype.setParent_=function(e){this.isMarker_?(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot()));this.parent_=e};b.CursorSvg.prototype.showWithBlockPrevOutput_=function(e){if(e){var t=e.width,n=e.height,o=n*b.CursorSvg.HEIGHT_MULTIPLIER,i=b.CursorSvg.BLOCK_PADDING;e.previousConnection?this.positionPrevious_(t,i,o):e.outputConnection?this.positionOutput_(t,n):this.positionBlock_(t,i,o);this.setParent_(e);this.showCurrent_()}};b.CursorSvg.prototype.showWithCoordinates_=function(e){var t=e.getWsCoordinate();e=t.x;t=t.y;this.workspace_.RTL&&(e-=b.CursorSvg.CURSOR_WIDTH);this.positionLine_(e,t,b.CursorSvg.CURSOR_WIDTH);this.setParent_(this.workspace_);this.showCurrent_()};b.CursorSvg.prototype.showWithField_=function(e){var t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n);this.setParent_(e);this.showCurrent_()};b.CursorSvg.prototype.showWithInput_=function(e){var t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e);this.setParent_(t);this.showCurrent_()};b.CursorSvg.prototype.showWithNext_=function(e){e=(n=e.getLocation()).getSourceBlock();var t=0,n=n.getOffsetInBlock().y,o=e.getHeightWidth().width;this.workspace_.RTL&&(t=-o);this.positionLine_(t,n,o);this.setParent_(e);this.showCurrent_()};b.CursorSvg.prototype.showWithStack_=function(e){var t=(n=(e=e.getLocation()).getHeightWidth()).width+b.CursorSvg.STACK_PADDING,n=n.height+b.CursorSvg.STACK_PADDING,o=-1*b.CursorSvg.STACK_PADDING/2,i=-1*b.CursorSvg.STACK_PADDING/2,r=o;this.workspace_.RTL&&(r=-(t+o));this.positionRect_(r,i,t,n);this.setParent_(e);this.showCurrent_()};b.CursorSvg.prototype.showCurrent_=function(){this.hide();this.currentCursorSvg.style.display=""};b.CursorSvg.prototype.positionBlock_=function(e,t,n){e=b.utils.svgPaths.moveBy(-1*t,n)+b.utils.svgPaths.lineOnAxis("V",-1*t)+b.utils.svgPaths.lineOnAxis("H",e+2*t)+b.utils.svgPaths.lineOnAxis("V",n);this.cursorBlock_.setAttribute("d",e);this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_);this.currentCursorSvg=this.cursorBlock_};b.CursorSvg.prototype.positionInput_=function(e){var t=e.getOffsetInBlock().x;e=e.getOffsetInBlock().y;var n=b.utils.svgPaths.moveTo(0,0)+this.constants_.PUZZLE_TAB.pathDown;this.cursorInput_.setAttribute("d",n);this.cursorInput_.setAttribute("transform","translate("+t+","+e+")"+(this.workspace_.RTL?" scale(-1 1)":""));this.currentCursorSvg=this.cursorInput_};b.CursorSvg.prototype.positionLine_=function(e,t,n){this.cursorSvgLine_.setAttribute("x",e);this.cursorSvgLine_.setAttribute("y",t);this.cursorSvgLine_.setAttribute("width",n);this.currentCursorSvg=this.cursorSvgLine_};b.CursorSvg.prototype.positionOutput_=function(e,t){e=b.utils.svgPaths.moveBy(e,0)+b.utils.svgPaths.lineOnAxis("h",-1*(e-this.constants_.PUZZLE_TAB.width))+b.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+this.constants_.PUZZLE_TAB.pathDown+b.utils.svgPaths.lineOnAxis("V",t)+b.utils.svgPaths.lineOnAxis("H",e);this.cursorBlock_.setAttribute("d",e);this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_);this.currentCursorSvg=this.cursorBlock_};b.CursorSvg.prototype.positionPrevious_=function(e,t,n){e=b.utils.svgPaths.moveBy(-1*t,n)+b.utils.svgPaths.lineOnAxis("V",-1*t)+b.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+this.constants_.NOTCH.pathLeft+b.utils.svgPaths.lineOnAxis("H",e+2*t)+b.utils.svgPaths.lineOnAxis("V",n);this.cursorBlock_.setAttribute("d",e);this.workspace_.RTL&&this.flipRtl_(this.cursorBlock_);this.currentCursorSvg=this.cursorBlock_};b.CursorSvg.prototype.positionRect_=function(e,t,n,o){this.cursorSvgRect_.setAttribute("x",e);this.cursorSvgRect_.setAttribute("y",t);this.cursorSvgRect_.setAttribute("width",n);this.cursorSvgRect_.setAttribute("height",o);this.currentCursorSvg=this.cursorSvgRect_};b.CursorSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")};b.CursorSvg.prototype.hide=function(){this.cursorSvgLine_.style.display="none";this.cursorSvgRect_.style.display="none";this.cursorInput_.style.display="none";this.cursorBlock_.style.display="none"};b.CursorSvg.prototype.draw=function(e){e?e.getType()===b.ASTNode.types.BLOCK?(e=e.getLocation(),this.showWithBlockPrevOutput_(e)):e.getType()===b.ASTNode.types.OUTPUT?(e=e.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(e)):e.getLocation().type===b.INPUT_VALUE?this.showWithInput_(e):e.getLocation().type===b.NEXT_STATEMENT?this.showWithNext_(e):e.getType()===b.ASTNode.types.PREVIOUS?(e=e.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(e)):e.getType()===b.ASTNode.types.FIELD?this.showWithField_(e):e.getType()===b.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()===b.ASTNode.types.STACK&&this.showWithStack_(e):this.hide()};b.CursorSvg.prototype.createCursorSvg_=function(){var e=this.isMarker_?b.CursorSvg.MARKER_COLOR:b.CursorSvg.CURSOR_COLOR;this.cursorSvg_=b.utils.dom.createSvgElement("g",{width:b.CursorSvg.CURSOR_WIDTH,height:b.CursorSvg.CURSOR_HEIGHT},this.svgGroup_);this.cursorSvgLine_=b.utils.dom.createSvgElement("rect",{x:"0",y:"0",fill:e,width:b.CursorSvg.CURSOR_WIDTH,height:b.CursorSvg.CURSOR_HEIGHT,style:"display: none;"},this.cursorSvg_);this.cursorSvgRect_=b.utils.dom.createSvgElement("rect",{class:"blocklyVerticalCursor",x:"0",y:"0",rx:"10",ry:"10",style:"display: none;",stroke:e},this.cursorSvg_);this.cursorInput_=b.utils.dom.createSvgElement("path",{width:b.CursorSvg.CURSOR_WIDTH,height:b.CursorSvg.CURSOR_HEIGHT,transform:"",style:"display: none;",fill:e},this.cursorSvg_);this.cursorBlock_=b.utils.dom.createSvgElement("path",{width:b.CursorSvg.CURSOR_WIDTH,height:b.CursorSvg.CURSOR_HEIGHT,transform:"",style:"display: none;",fill:"none",stroke:e,"stroke-width":"4"},this.cursorSvg_);this.isMarker_||(b.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"fill",dur:"1s",values:b.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorSvgLine_),b.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"fill",dur:"1s",values:b.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorInput_),b.utils.dom.createSvgElement("animate",{attributeType:"XML",attributeName:"stroke",dur:"1s",values:b.CursorSvg.CURSOR_COLOR+";transparent;transparent;",repeatCount:"indefinite"},this.cursorBlock_));return this.cursorSvg_};b.CursorSvg.prototype.dispose=function(){this.svgGroup_&&b.utils.dom.removeNode(this.svgGroup_)};b.blockRendering.Renderer=function(){this.constants_=null};b.blockRendering.Renderer.prototype.init=function(){this.constants_=this.makeConstants_();this.constants_.init()};b.blockRendering.Renderer.prototype.makeConstants_=function(){return new b.blockRendering.ConstantProvider};b.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new b.blockRendering.RenderInfo(this,e)};b.blockRendering.Renderer.prototype.makeDrawer_=function(e,t){return new b.blockRendering.Drawer(e,t)};b.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!b.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new b.blockRendering.Debug};b.blockRendering.Renderer.prototype.makeCursorDrawer=function(e,t){return new b.CursorSvg(e,t)};b.blockRendering.Renderer.prototype.makePathObject=function(e){return new b.blockRendering.PathObject(e)};b.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_};b.blockRendering.Renderer.prototype.render=function(e){b.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var t=this.makeRenderInfo_(e);t.measure();this.makeDrawer_(e,t).draw()};b.geras={};b.geras.ConstantProvider=function(){b.geras.ConstantProvider.superClass_.constructor.call(this);this.DARK_PATH_OFFSET=1};b.utils.object.inherits(b.geras.ConstantProvider,b.blockRendering.ConstantProvider);b.geras.Highlighter=function(e){this.info_=e;this.inlineSteps_=this.steps_="";this.RTL_=this.info_.RTL;e=e.getRenderer();this.constants_=e.getConstants();this.highlightConstants_=e.getHighlightConstants();this.highlightOffset_=this.highlightConstants_.OFFSET;this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER;this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER;this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB;this.notchPaths_=this.highlightConstants_.NOTCH;this.startPaths_=this.highlightConstants_.START_HAT;this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH};b.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_};b.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=b.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var t,n=0;t=e.elements[n];n++)b.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=this.highlightConstants_.START_POINT:b.blockRendering.Types.isLeftRoundedCorner(t)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):b.blockRendering.Types.isPreviousConnection(t)?this.steps_+=this.notchPaths_.pathLeft:b.blockRendering.Types.isHat(t)?this.steps_+=this.startPaths_.path(this.RTL_):b.blockRendering.Types.isSpacer(t)&&0!=t.width&&(this.steps_+=b.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_));this.steps_+=b.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)};b.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=b.utils.svgPaths.lineOnAxis("H",e.width-this.highlightOffset_),this.steps_+=this.jaggedTeethPaths_.pathLeft,this.steps_+=b.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))};b.geras.Highlighter.prototype.drawValueInput=function(e){var t=e.getLastInput();if(this.RTL_){var n=e.height-t.connectionHeight;this.steps_+=b.utils.svgPaths.moveTo(t.xPos+t.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+b.utils.svgPaths.lineOnAxis("v",n)}else this.steps_+=b.utils.svgPaths.moveTo(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)};b.geras.Highlighter.prototype.drawStatementInput=function(e){var t=e.getLastInput();if(this.RTL_){var n=e.height-2*this.insideCornerPaths_.height;this.steps_+=b.utils.svgPaths.moveTo(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+b.utils.svgPaths.lineOnAxis("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+b.utils.svgPaths.lineTo(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=b.utils.svgPaths.moveTo(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+b.utils.svgPaths.lineTo(e.width-t.xPos-this.insideCornerPaths_.width,0)};b.geras.Highlighter.prototype.drawRightSideRow=function(e){var t=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=b.utils.svgPaths.lineOnAxis("H",t));this.RTL_&&(this.steps_+=b.utils.svgPaths.lineOnAxis("H",t),e.height>this.highlightOffset_&&(this.steps_+=b.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))};b.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=b.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var t=this.info_.bottomRow.elements[0];b.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=b.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):b.blockRendering.Types.isLeftRoundedCorner(t)&&(this.steps_+=b.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}};b.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=b.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=b.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=b.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_));this.RTL_||(e=this.info_.topRow,b.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=b.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=b.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))};b.geras.Highlighter.prototype.drawInlineInput=function(e){var t=this.highlightOffset_,n=e.xPos+e.connectionWidth,o=e.centerline-e.height/2,i=e.width-e.connectionWidth,r=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=b.utils.svgPaths.moveTo(n-t,r)+b.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+b.utils.svgPaths.lineOnAxis("v",e)+b.utils.svgPaths.lineOnAxis("h",i)):this.inlineSteps_+=b.utils.svgPaths.moveTo(e.xPos+e.width+t,r)+b.utils.svgPaths.lineOnAxis("v",e.height)+b.utils.svgPaths.lineOnAxis("h",-i)+b.utils.svgPaths.moveTo(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)};b.geras.PathObject=function(e){this.svgRoot=e;this.svgPathDark=b.utils.dom.createSvgElement("path",{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot);this.svgPath=b.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot);this.svgPathLight=b.utils.dom.createSvgElement("path",{class:"blocklyPathLight"},this.svgRoot)};b.geras.PathObject.prototype.setPaths=function(e,t){this.svgPath.setAttribute("d",e);this.svgPathDark.setAttribute("d",e);this.svgPathLight.setAttribute("d",t)};b.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)");this.svgPathLight.setAttribute("transform","scale(-1 1)");this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")};b.geras.InlineInput=function(e,t){b.geras.InlineInput.superClass_.constructor.call(this,e,t);this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)};b.utils.object.inherits(b.geras.InlineInput,b.blockRendering.InlineInput);b.geras.StatementInput=function(e,t){b.geras.StatementInput.superClass_.constructor.call(this,e,t);this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)};b.utils.object.inherits(b.geras.StatementInput,b.blockRendering.StatementInput);b.geras.RenderInfo=function(e,t){b.geras.RenderInfo.superClass_.constructor.call(this,e,t)};b.utils.object.inherits(b.geras.RenderInfo,b.blockRendering.RenderInfo);b.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_};b.geras.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==b.INPUT_VALUE?(t.elements.push(new b.geras.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==b.NEXT_STATEMENT?(t.elements.push(new b.geras.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==b.INPUT_VALUE?(t.elements.push(new b.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==b.DUMMY_INPUT&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0);t.align=e.align};b.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=!1,n=0;e=this.rows[n];n++)e.hasExternalInput&&(t=!0);for(n=0;e=this.rows[n];n++){var o=e.elements;e.elements=[];e.startsWithElemSpacer()&&e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0])));for(var i=0;i<o.length-1;i++){e.elements.push(o[i]);var r=this.getInRowSpacing_(o[i],o[i+1]);e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,r))}e.elements.push(o[o.length-1]);e.endsWithElemSpacer()&&(r=this.getInRowSpacing_(o[o.length-1],null),t&&e.hasDummyInput&&(r+=this.constants_.TAB_WIDTH),e.elements.push(new b.blockRendering.InRowSpacer(this.constants_,r)))}};b.geras.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(!e)return t&&b.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&b.blockRendering.Types.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&b.blockRendering.Types.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!b.blockRendering.Types.isInput(e)&&!t)return b.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:b.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:b.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:b.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:b.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:b.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(b.blockRendering.Types.isInput(e)&&!t){if(b.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(b.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(b.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!b.blockRendering.Types.isInput(e)&&t&&b.blockRendering.Types.isInput(t)){if(e.isEditable){if(b.blockRendering.Types.isInlineInput(t)||b.blockRendering.Types.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(b.blockRendering.Types.isInlineInput(t)||b.blockRendering.Types.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(b.blockRendering.Types.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(b.blockRendering.Types.isIcon(e)&&t&&!b.blockRendering.Types.isInput(t))return this.constants_.LARGE_PADDING;if(b.blockRendering.Types.isInlineInput(e)&&t&&!b.blockRendering.Types.isInput(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(b.blockRendering.Types.isLeftSquareCorner(e)&&t){if(b.blockRendering.Types.isHat(t))return this.constants_.NO_PADDING;if(b.blockRendering.Types.isPreviousConnection(t))return t.notchOffset;if(b.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset+e}if(b.blockRendering.Types.isLeftRoundedCorner(e)&&t){if(b.blockRendering.Types.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(b.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset-this.constants_.CORNER_RADIUS+e}return!b.blockRendering.Types.isInput(e)&&t&&!b.blockRendering.Types.isInput(t)&&e.isEditable==t.isEditable||t&&b.blockRendering.Types.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};b.geras.RenderInfo.prototype.addAlignmentPadding_=function(e,t){var n=e.getFirstSpacer(),o=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t);e.align==b.ALIGN_LEFT?o.width+=t:e.align==b.ALIGN_CENTRE?(n.width+=t/2,o.width+=t/2):e.align==b.ALIGN_RIGHT?n.width+=t:o.width+=t;e.width+=t};b.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return b.blockRendering.Types.isTopRow(e)&&b.blockRendering.Types.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:b.blockRendering.Types.isTopRow(e)||b.blockRendering.Types.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING};b.geras.RenderInfo.prototype.getElemCenterline_=function(e,t){if(b.blockRendering.Types.isSpacer(t))return e.yPos+t.height/2;if(b.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,b.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2;if(b.blockRendering.Types.isTopRow(e))return b.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;var n=e.yPos;b.blockRendering.Types.isField(t)||b.blockRendering.Types.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=b.blockRendering.Types.isInlineInput(t)?n+t.height/2:n+e.height/2;return n};b.geras.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++){e.yPos=n;e.xPos=this.startX;n+=e.height;t=Math.max(t,e.widthWithConnectedBlocks);var i=n-this.topRow.ascenderHeight;e==this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,n+=i);this.recordElemPositions_(e)}this.bottomRow.baseline=n-this.bottomRow.descenderHeight;this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET;this.width+=this.constants_.DARK_PATH_OFFSET;this.height=n+this.constants_.DARK_PATH_OFFSET;this.startY=this.topRow.capline};b.geras.Drawer=function(e,t){b.geras.Drawer.superClass_.constructor.call(this,e,t);this.highlighter_=new b.geras.Highlighter(t)};b.utils.object.inherits(b.geras.Drawer,b.blockRendering.Drawer);b.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_();this.drawOutline_();this.drawInternals_();this.block_.pathObject.setPaths(this.outlinePath_+"\n"+this.inlinePath_,this.highlighter_.getPath());this.info_.RTL&&this.block_.pathObject.flipRTL();b.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_);this.recordSizeOnBlock_()};b.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow);this.highlighter_.drawRightSideRow(this.info_.topRow);b.geras.Drawer.superClass_.drawTop_.call(this)};b.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e);b.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)};b.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e);b.geras.Drawer.superClass_.drawValueInput_.call(this,e)};b.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e);b.geras.Drawer.superClass_.drawStatementInput_.call(this,e)};b.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e);b.geras.Drawer.superClass_.drawRightSideRow_.call(this,e)};b.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow);b.geras.Drawer.superClass_.drawBottom_.call(this)};b.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft();b.geras.Drawer.superClass_.drawLeft_.call(this)};b.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e);b.geras.Drawer.superClass_.drawInlineInput_.call(this,e)};b.geras.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connection){var n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1);e.connection.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}};b.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.statementEdge+t.notchOffset,n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET;t.connection.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}};b.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connection){var n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1);t.connection.setOffsetInBlock(n,e.yPos)}};b.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=(e=e.connection).xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-t:t)+this.constants_.DARK_PATH_OFFSET/2,e.centerline-e.height/2+this.constants_.DARK_PATH_OFFSET)}};b.geras.HighlightConstantProvider=function(e){this.constantProvider=e;this.OFFSET=.5;this.START_POINT=b.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET);this.INSIDE_CORNER=this.makeInsideCorner();this.OUTSIDE_CORNER=this.makeOutsideCorner();this.PUZZLE_TAB=this.makePuzzleTab();this.NOTCH=this.makeNotch();this.JAGGED_TEETH=this.makeJaggedTeeth();this.START_HAT=this.makeStartHat()};b.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,o=b.utils.svgPaths.moveBy(n,n)+b.utils.svgPaths.arc("a","0 0,0",e,b.utils.svgPaths.point(-n-t,e-n)),i=b.utils.svgPaths.arc("a","0 0,0",e+t,b.utils.svgPaths.point(e+t,e+t)),r=b.utils.svgPaths.moveBy(n,-n)+b.utils.svgPaths.arc("a","0 0,0",e+t,b.utils.svgPaths.point(e-n,n+t));return{width:e+t,height:e,pathTop:function(e){return e?o:""},pathBottom:function(e){return e?i:r}}};b.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,o=b.utils.svgPaths.moveBy(n,n)+b.utils.svgPaths.arc("a","0 0,1",e-t,b.utils.svgPaths.point(e-n,-n+t)),i=b.utils.svgPaths.moveBy(t,e)+b.utils.svgPaths.arc("a","0 0,1",e-t,b.utils.svgPaths.point(e,-e+t)),r=-n,s=b.utils.svgPaths.moveBy(n,r)+b.utils.svgPaths.arc("a","0 0,1",e-t,b.utils.svgPaths.point(-n+t,-r-e));return{height:e,topLeft:function(e){return e?o:i},bottomLeft:function(){return s}}};b.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=b.utils.svgPaths.moveBy(-2,3.4-t)+b.utils.svgPaths.lineTo(-.45*e,-2.1),o=b.utils.svgPaths.lineOnAxis("v",2.5)+b.utils.svgPaths.moveBy(.97*-e,2.5)+b.utils.svgPaths.curve("q",[b.utils.svgPaths.point(.05*-e,10),b.utils.svgPaths.point(.3*e,9.5)])+b.utils.svgPaths.moveBy(.67*e,-1.9)+b.utils.svgPaths.lineOnAxis("v",2.5),i=b.utils.svgPaths.lineOnAxis("v",-1.5)+b.utils.svgPaths.moveBy(-.92*e,-.5)+b.utils.svgPaths.curve("q",[b.utils.svgPaths.point(-.19*e,-5.5),b.utils.svgPaths.point(0,-11)])+b.utils.svgPaths.moveBy(.92*e,1),r=b.utils.svgPaths.moveBy(-5,t-.7)+b.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:t,pathUp:function(e){return e?n:i},pathDown:function(e){return e?o:r}}};b.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:b.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}};b.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:b.utils.svgPaths.lineTo(5.1,2.6)+b.utils.svgPaths.moveBy(-10.2,6.8)+b.utils.svgPaths.lineTo(5.1,2.6)}};b.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,t=b.utils.svgPaths.moveBy(25,-8.7)+b.utils.svgPaths.curve("c",[b.utils.svgPaths.point(29.7,-6.2),b.utils.svgPaths.point(57.2,-.5),b.utils.svgPaths.point(75,8.7)]),n=b.utils.svgPaths.curve("c",[b.utils.svgPaths.point(17.8,-9.2),b.utils.svgPaths.point(45.3,-14.9),b.utils.svgPaths.point(75,-8.7)])+b.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(e){return e?t:n}}};b.geras.Renderer=function(){b.geras.Renderer.superClass_.constructor.call(this);this.highlightConstants_=null};b.utils.object.inherits(b.geras.Renderer,b.blockRendering.Renderer);b.geras.Renderer.prototype.init=function(){b.geras.Renderer.superClass_.init.call(this);this.highlightConstants_=this.makeHighlightConstants_()};b.geras.Renderer.prototype.makeConstants_=function(){return new b.geras.ConstantProvider};b.geras.Renderer.prototype.makeRenderInfo_=function(e){return new b.geras.RenderInfo(this,e)};b.geras.Renderer.prototype.makeDrawer_=function(e,t){return new b.geras.Drawer(e,t)};b.geras.Renderer.prototype.makePathObject=function(e){return new b.geras.PathObject(e)};b.blockRendering.Renderer.prototype.makeHighlightConstants_=function(){return new b.geras.HighlightConstantProvider(this.getConstants())};b.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_};b.blockRendering.register("geras",b.geras.Renderer);b.Themes.Dark={};b.Themes.Dark.defaultBlockStyles={colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}};b.Themes.Dark.categoryStyles={colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}};b.Themes.Dark=new b.Theme(b.Themes.Dark.defaultBlockStyles,b.Themes.Dark.categoryStyles);b.Themes.Dark.setComponentStyle("workspace","#1e1e1e");b.Themes.Dark.setComponentStyle("toolbox","#333");b.Themes.Dark.setComponentStyle("toolboxText","#fff");b.Themes.Dark.setComponentStyle("flyout","#252526");b.Themes.Dark.setComponentStyle("flyoutText","#ccc");b.Themes.Dark.setComponentStyle("flyoutOpacity",1);b.Themes.Dark.setComponentStyle("scrollbar","#797979");b.Themes.Dark.setComponentStyle("scrollbarOpacity",.4);b.Themes.HighContrast={};b.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}};b.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}};b.Themes.HighContrast=new b.Theme(b.Themes.HighContrast.defaultBlockStyles,b.Themes.HighContrast.categoryStyles);b.Themes.Modern={};b.Themes.Modern.defaultBlockStyles={colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}};b.Themes.Modern.categoryStyles={colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}};b.Themes.Modern=new b.Theme(b.Themes.Modern.defaultBlockStyles,b.Themes.Modern.categoryStyles);b.requires={};b.Msg.ADD_COMMENT="Add Comment";b.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'";b.Msg.CHANGE_VALUE_TITLE="Change value:";b.Msg.CLEAN_UP="Clean up Blocks";b.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.";b.Msg.COLLAPSE_ALL="Collapse Blocks";b.Msg.COLLAPSE_BLOCK="Collapse Block";b.Msg.COLOUR_BLEND_COLOUR1="colour 1";b.Msg.COLOUR_BLEND_COLOUR2="colour 2";b.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp";b.Msg.COLOUR_BLEND_RATIO="ratio";b.Msg.COLOUR_BLEND_TITLE="blend";b.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).";b.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color";b.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.";b.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com";b.Msg.COLOUR_RANDOM_TITLE="random colour";b.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.";b.Msg.COLOUR_RGB_BLUE="blue";b.Msg.COLOUR_RGB_GREEN="green";b.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html";b.Msg.COLOUR_RGB_RED="red";b.Msg.COLOUR_RGB_TITLE="colour with";b.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.";b.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks";b.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop";b.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop";b.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.";b.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.";b.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.";b.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each";b.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2";b.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.";b.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with";b.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4";b.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.";b.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.";b.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.";b.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse";b.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.";b.Msg.CONTROLS_IF_MSG_ELSE="else";b.Msg.CONTROLS_IF_MSG_ELSEIF="else if";b.Msg.CONTROLS_IF_MSG_IF="if";b.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.";b.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.";b.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.";b.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.";b.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop";b.Msg.CONTROLS_REPEAT_INPUT_DO="do";b.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times";b.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.";b.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat";b.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until";b.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while";b.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.";b.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.";b.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?";b.Msg.DELETE_BLOCK="Delete Block";b.Msg.DELETE_VARIABLE="Delete the '%1' variable";b.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?";b.Msg.DELETE_X_BLOCKS="Delete %1 Blocks";b.Msg.DISABLE_BLOCK="Disable Block";b.Msg.DUPLICATE_BLOCK="Duplicate";b.Msg.DUPLICATE_COMMENT="Duplicate Comment";b.Msg.ENABLE_BLOCK="Enable Block";b.Msg.EXPAND_ALL="Expand Blocks";b.Msg.EXPAND_BLOCK="Expand Block";b.Msg.EXTERNAL_INPUTS="External Inputs";b.Msg.HELP="Help";b.Msg.INLINE_INPUTS="Inline Inputs";b.Msg.IOS_CANCEL="Cancel";b.Msg.IOS_ERROR="Error";b.Msg.IOS_OK="OK";b.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input";b.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements";b.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.";b.Msg.IOS_PROCEDURES_INPUTS="INPUTS";b.Msg.IOS_VARIABLES_ADD_BUTTON="Add";b.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable";b.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete";b.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.";b.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename";b.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name";b.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list";b.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list";b.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records";b.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list";b.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.";b.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with";b.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with";b.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.";b.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.";b.Msg.LISTS_GET_INDEX_FIRST="first";b.Msg.LISTS_GET_INDEX_FROM_END="# from end";b.Msg.LISTS_GET_INDEX_FROM_START="#";b.Msg.LISTS_GET_INDEX_GET="get";b.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove";b.Msg.LISTS_GET_INDEX_LAST="last";b.Msg.LISTS_GET_INDEX_RANDOM="random";b.Msg.LISTS_GET_INDEX_REMOVE="remove";b.Msg.LISTS_GET_INDEX_TAIL="";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.";b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.";b.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end";b.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #";b.Msg.LISTS_GET_SUBLIST_END_LAST="to last";b.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist";b.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first";b.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end";b.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #";b.Msg.LISTS_GET_SUBLIST_TAIL="";b.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.";b.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.";b.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.";b.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item";b.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list";b.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item";b.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.";b.Msg.LISTS_INLIST="in list";b.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty";b.Msg.LISTS_ISEMPTY_TITLE="%1 is empty";b.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.";b.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of";b.Msg.LISTS_LENGTH_TITLE="length of %1";b.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.";b.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with";b.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times";b.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.";b.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list";b.Msg.LISTS_REVERSE_MESSAGE0="reverse %1";b.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.";b.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set";b.Msg.LISTS_SET_INDEX_INPUT_TO="as";b.Msg.LISTS_SET_INDEX_INSERT="insert at";b.Msg.LISTS_SET_INDEX_SET="set";b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.";b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.";b.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list";b.Msg.LISTS_SORT_ORDER_ASCENDING="ascending";b.Msg.LISTS_SORT_ORDER_DESCENDING="descending";b.Msg.LISTS_SORT_TITLE="sort %1 %2 %3";b.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.";b.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case";b.Msg.LISTS_SORT_TYPE_NUMERIC="numeric";b.Msg.LISTS_SORT_TYPE_TEXT="alphabetic";b.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists";b.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text";b.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list";b.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.";b.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.";b.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter";b.Msg.LOGIC_BOOLEAN_FALSE="false";b.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values";b.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.";b.Msg.LOGIC_BOOLEAN_TRUE="true";b.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)";b.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.";b.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.";b.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.";b.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.";b.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.";b.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.";b.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not";b.Msg.LOGIC_NEGATE_TITLE="not %1";b.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.";b.Msg.LOGIC_NULL="null";b.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type";b.Msg.LOGIC_NULL_TOOLTIP="Returns null.";b.Msg.LOGIC_OPERATION_AND="and";b.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations";b.Msg.LOGIC_OPERATION_OR="or";b.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.";b.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.";b.Msg.LOGIC_TERNARY_CONDITION="test";b.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:";b.Msg.LOGIC_TERNARY_IF_FALSE="if false";b.Msg.LOGIC_TERNARY_IF_TRUE="if true";b.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.";b.Msg.MATH_ADDITION_SYMBOL="+";b.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic";b.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.";b.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.";b.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.";b.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.";b.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.";b.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2";b.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2";b.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.";b.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter";b.Msg.MATH_CHANGE_TITLE="change %1 by %2";b.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.";b.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant";b.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(½) (0.707…), or ∞ (infinity).";b.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)";b.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3";b.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).";b.Msg.MATH_DIVISION_SYMBOL="÷";b.Msg.MATH_IS_DIVISIBLE_BY="is divisible by";b.Msg.MATH_IS_EVEN="is even";b.Msg.MATH_IS_NEGATIVE="is negative";b.Msg.MATH_IS_ODD="is odd";b.Msg.MATH_IS_POSITIVE="is positive";b.Msg.MATH_IS_PRIME="is prime";b.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.";b.Msg.MATH_IS_WHOLE="is whole";b.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation";b.Msg.MATH_MODULO_TITLE="remainder of %1 ÷ %2";b.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.";b.Msg.MATH_MULTIPLICATION_SYMBOL="×";b.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number";b.Msg.MATH_NUMBER_TOOLTIP="A number.";b.Msg.MATH_ONLIST_HELPURL="";b.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list";b.Msg.MATH_ONLIST_OPERATOR_MAX="max of list";b.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list";b.Msg.MATH_ONLIST_OPERATOR_MIN="min of list";b.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list";b.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list";b.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list";b.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list";b.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.";b.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.";b.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.";b.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.";b.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.";b.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.";b.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.";b.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.";b.Msg.MATH_POWER_SYMBOL="^";b.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation";b.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction";b.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).";b.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation";b.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2";b.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.";b.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding";b.Msg.MATH_ROUND_OPERATOR_ROUND="round";b.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down";b.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up";b.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.";b.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root";b.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute";b.Msg.MATH_SINGLE_OP_ROOT="square root";b.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.";b.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.";b.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.";b.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.";b.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.";b.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.";b.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.";b.Msg.MATH_SUBTRACTION_SYMBOL="-";b.Msg.MATH_TRIG_ACOS="acos";b.Msg.MATH_TRIG_ASIN="asin";b.Msg.MATH_TRIG_ATAN="atan";b.Msg.MATH_TRIG_COS="cos";b.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions";b.Msg.MATH_TRIG_SIN="sin";b.Msg.MATH_TRIG_TAN="tan";b.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.";b.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.";b.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.";b.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).";b.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).";b.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).";b.Msg.NEW_COLOUR_VARIABLE="Create colour variable...";b.Msg.NEW_NUMBER_VARIABLE="Create number variable...";b.Msg.NEW_STRING_VARIABLE="Create string variable...";b.Msg.NEW_VARIABLE="Create variable...";b.Msg.NEW_VARIABLE_TITLE="New variable name:";b.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:";b.Msg.ORDINAL_NUMBER_SUFFIX="";b.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements";b.Msg.PROCEDURES_BEFORE_PARAMS="with:";b.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine";b.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.";b.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine";b.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.";b.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:";b.Msg.PROCEDURES_CREATE_DO="Create '%1'";b.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...";b.Msg.PROCEDURES_DEFNORETURN_DO="";b.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine";b.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something";b.Msg.PROCEDURES_DEFNORETURN_TITLE="to";b.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.";b.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine";b.Msg.PROCEDURES_DEFRETURN_RETURN="return";b.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.";b.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.";b.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition";b.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause";b.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.";b.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.";b.Msg.PROCEDURES_MUTATORARG_TITLE="input name:";b.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.";b.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs";b.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.";b.Msg.REDO="Redo";b.Msg.REMOVE_COMMENT="Remove Comment";b.Msg.RENAME_VARIABLE="Rename variable...";b.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:";b.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification";b.Msg.TEXT_APPEND_TITLE="to %1 append text %2";b.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.";b.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case";b.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case";b.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case";b.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE";b.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.";b.Msg.TEXT_CHARAT_FIRST="get first letter";b.Msg.TEXT_CHARAT_FROM_END="get letter # from end";b.Msg.TEXT_CHARAT_FROM_START="get letter #";b.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text";b.Msg.TEXT_CHARAT_LAST="get last letter";b.Msg.TEXT_CHARAT_RANDOM="get random letter";b.Msg.TEXT_CHARAT_TAIL="";b.Msg.TEXT_CHARAT_TITLE="in text %1 %2";b.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.";b.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings";b.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2";b.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.";b.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.";b.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join";b.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.";b.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end";b.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #";b.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter";b.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text";b.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text";b.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter";b.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end";b.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #";b.Msg.TEXT_GET_SUBSTRING_TAIL="";b.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.";b.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text";b.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text";b.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text";b.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3";b.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.";b.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text";b.Msg.TEXT_ISEMPTY_TITLE="%1 is empty";b.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.";b.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation";b.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with";b.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.";b.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification";b.Msg.TEXT_LENGTH_TITLE="length of %1";b.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.";b.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text";b.Msg.TEXT_PRINT_TITLE="print %1";b.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.";b.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user";b.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.";b.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.";b.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message";b.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message";b.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings";b.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3";b.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.";b.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text";b.Msg.TEXT_REVERSE_MESSAGE0="reverse %1";b.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.";b.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)";b.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.";b.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces";b.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of";b.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of";b.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of";b.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.";b.Msg.TODAY="Today";b.Msg.UNDO="Undo";b.Msg.UNNAMED_KEY="unnamed";b.Msg.VARIABLES_DEFAULT_NAME="item";b.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'";b.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get";b.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.";b.Msg.VARIABLES_SET="set %1 to %2";b.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'";b.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set";b.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.";b.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.";b.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.";b.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...";b.Msg.CONTROLS_FOREACH_INPUT_DO=b.Msg.CONTROLS_REPEAT_INPUT_DO;b.Msg.CONTROLS_FOR_INPUT_DO=b.Msg.CONTROLS_REPEAT_INPUT_DO;b.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=b.Msg.CONTROLS_IF_MSG_ELSEIF;b.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=b.Msg.CONTROLS_IF_MSG_ELSE;b.Msg.CONTROLS_IF_IF_TITLE_IF=b.Msg.CONTROLS_IF_MSG_IF;b.Msg.CONTROLS_IF_MSG_THEN=b.Msg.CONTROLS_REPEAT_INPUT_DO;b.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=b.Msg.CONTROLS_REPEAT_INPUT_DO;b.Msg.LISTS_CREATE_WITH_ITEM_TITLE=b.Msg.VARIABLES_DEFAULT_NAME;b.Msg.LISTS_GET_INDEX_HELPURL=b.Msg.LISTS_INDEX_OF_HELPURL;b.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=b.Msg.LISTS_INLIST;b.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=b.Msg.LISTS_INLIST;b.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=b.Msg.LISTS_INLIST;b.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=b.Msg.LISTS_INLIST;b.Msg.MATH_CHANGE_TITLE_ITEM=b.Msg.VARIABLES_DEFAULT_NAME;b.Msg.PROCEDURES_DEFRETURN_COMMENT=b.Msg.PROCEDURES_DEFNORETURN_COMMENT;b.Msg.PROCEDURES_DEFRETURN_DO=b.Msg.PROCEDURES_DEFNORETURN_DO;b.Msg.PROCEDURES_DEFRETURN_PROCEDURE=b.Msg.PROCEDURES_DEFNORETURN_PROCEDURE;b.Msg.PROCEDURES_DEFRETURN_TITLE=b.Msg.PROCEDURES_DEFNORETURN_TITLE;b.Msg.TEXT_APPEND_VARIABLE=b.Msg.VARIABLES_DEFAULT_NAME;b.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=b.Msg.VARIABLES_DEFAULT_NAME;b.Msg.MATH_HUE="230";b.Msg.LOOPS_HUE="120";b.Msg.LISTS_HUE="260";b.Msg.LOGIC_HUE="210";b.Msg.VARIABLES_HUE="330";b.Msg.TEXTS_HUE="160";b.Msg.PROCEDURES_HUE="290";b.Msg.COLOUR_HUE="20";b.Msg.VARIABLES_DYNAMIC_HUE="310";b.Blocks.colour={};b.Constants={};b.Constants.Colour={};b.Constants.Colour.HUE=20;b.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);b.Blocks.lists={};b.Constants.Lists={};b.Constants.Lists.HUE=260;b.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]);b.Blocks.lists_create_with={init:function(){this.setHelpUrl(b.Msg.LISTS_CREATE_WITH_HELPURL);this.setStyle("list_blocks");this.itemCount_=3;this.updateShape_();this.setOutput(!0,"Array");this.setMutator(new b.Mutator(["lists_create_with_item"]));this.setTooltip(b.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("items",this.itemCount_);return e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10);this.updateShape_()},decompose:function(e){var t=e.newBlock("lists_create_with_container");t.initSvg();for(var n=t.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var i=e.newBlock("lists_create_with_item");i.initSvg();n.connect(i.previousConnection);n=i.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)e.push(t.valueConnection_),t=t.nextConnection&&t.nextConnection.targetBlock();for(t=0;t<this.itemCount_;t++){var n=this.getInput("ADD"+t).connection.targetConnection;n&&-1==e.indexOf(n)&&n.disconnect()}this.itemCount_=e.length;this.updateShape_();for(t=0;t<this.itemCount_;t++)b.Mutator.reconnect(e[t],this,"ADD"+t)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection;t++;e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(b.Msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var t=this.appendValueInput("ADD"+e);0==e&&t.appendField(b.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}};b.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks");this.appendDummyInput().appendField(b.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendStatementInput("STACK");this.setTooltip(b.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP);this.contextMenu=!1}};b.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks");this.appendDummyInput().appendField(b.Msg.LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(b.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP);this.contextMenu=!1}};b.Blocks.lists_indexOf={init:function(){var e=[[b.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[b.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(b.Msg.LISTS_INDEX_OF_HELPURL);this.setStyle("list_blocks");this.setOutput(!0,"Number");this.appendValueInput("VALUE").setCheck("Array").appendField(b.Msg.LISTS_INDEX_OF_INPUT_IN_LIST);this.appendValueInput("FIND").appendField(new b.FieldDropdown(e),"END");this.setInputsInline(!0);var t=this;this.setTooltip(function(){return b.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")})}};b.Blocks.lists_getIndex={init:function(){var e=[[b.Msg.LISTS_GET_INDEX_GET,"GET"],[b.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[b.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[b.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[b.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[b.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[b.Msg.LISTS_GET_INDEX_LAST,"LAST"],[b.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(b.Msg.LISTS_GET_INDEX_HELPURL);this.setStyle("list_blocks");e=new b.FieldDropdown(e,function(e){e="REMOVE"==e;this.getSourceBlock().updateStatement_(e)});this.appendValueInput("VALUE").setCheck("Array").appendField(b.Msg.LISTS_GET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE");this.appendDummyInput("AT");b.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(b.Msg.LISTS_GET_INDEX_TAIL);this.setInputsInline(!0);this.setOutput(!0);this.updateAt_(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"GET FROM_START":case"GET FROM_END":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":n=b.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+("FROM_START"==t?b.Msg.LISTS_INDEX_FROM_START_TOOLTIP:b.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0"));return n})},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("statement",!this.outputConnection);var t=this.getInput("AT").type==b.INPUT_VALUE;e.setAttribute("at",t);return e},domToMutation:function(e){var t="true"==e.getAttribute("statement");this.updateStatement_(t);e="false"!=e.getAttribute("at");this.updateAt_(e)},updateStatement_:function(e){e!=!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(o){this.removeInput("AT");this.removeInput("ORDINAL",!0);o?(this.appendValueInput("AT").setCheck("Number"),b.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(b.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new b.FieldDropdown(this.WHERE_OPTIONS,function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=o){var n=this.getSourceBlock();n.updateAt_(t);n.setFieldValue(e,"WHERE");return null}});this.getInput("AT").appendField(e,"WHERE");b.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};b.Blocks.lists_setIndex={init:function(){var e=[[b.Msg.LISTS_SET_INDEX_SET,"SET"],[b.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[b.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[b.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[b.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[b.Msg.LISTS_GET_INDEX_LAST,"LAST"],[b.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]];this.setHelpUrl(b.Msg.LISTS_SET_INDEX_HELPURL);this.setStyle("list_blocks");this.appendValueInput("LIST").setCheck("Array").appendField(b.Msg.LISTS_SET_INDEX_INPUT_IN_LIST);this.appendDummyInput().appendField(new b.FieldDropdown(e),"MODE").appendField("","SPACE");this.appendDummyInput("AT");this.appendValueInput("TO").appendField(b.Msg.LISTS_SET_INDEX_INPUT_TO);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip(b.Msg.LISTS_SET_INDEX_TOOLTIP);this.updateAt_(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"SET FROM_START":case"SET FROM_END":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":n=b.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+b.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0"));return n})},mutationToDom:function(){var e=b.utils.xml.createElement("mutation"),t=this.getInput("AT").type==b.INPUT_VALUE;e.setAttribute("at",t);return e},domToMutation:function(e){e="false"!=e.getAttribute("at");this.updateAt_(e)},updateAt_:function(o){this.removeInput("AT");this.removeInput("ORDINAL",!0);o?(this.appendValueInput("AT").setCheck("Number"),b.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(b.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new b.FieldDropdown(this.WHERE_OPTIONS,function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=o){var n=this.getSourceBlock();n.updateAt_(t);n.setFieldValue(e,"WHERE");return null}});this.moveInputBefore("AT","TO");this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO");this.getInput("AT").appendField(e,"WHERE")}};b.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[b.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[b.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[b.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[b.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[b.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[b.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]];this.setHelpUrl(b.Msg.LISTS_GET_SUBLIST_HELPURL);this.setStyle("list_blocks");this.appendValueInput("LIST").setCheck("Array").appendField(b.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);this.appendDummyInput("AT1");this.appendDummyInput("AT2");b.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(b.Msg.LISTS_GET_SUBLIST_TAIL);this.setInputsInline(!0);this.setOutput(!0,"Array");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(b.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var e=b.utils.xml.createElement("mutation"),t=this.getInput("AT1").type==b.INPUT_VALUE;e.setAttribute("at1",t);t=this.getInput("AT2").type==b.INPUT_VALUE;e.setAttribute("at2",t);return e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2");this.updateAt_(1,t);this.updateAt_(2,e)},updateAt_:function(o,i){this.removeInput("AT"+o);this.removeInput("ORDINAL"+o,!0);i?(this.appendValueInput("AT"+o).setCheck("Number"),b.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(b.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o);var e=new b.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=i){var n=this.getSourceBlock();n.updateAt_(o,t);n.setFieldValue(e,"WHERE"+o);return null}});this.getInput("AT"+o).appendField(e,"WHERE"+o);1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"));b.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};b.Blocks.lists_sort={init:function(){this.jsonInit({message0:b.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[b.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[b.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[b.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[b.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[b.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:b.Msg.LISTS_SORT_TOOLTIP,helpUrl:b.Msg.LISTS_SORT_HELPURL})}};b.Blocks.lists_split={init:function(){var t=this,e=new b.FieldDropdown([[b.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[b.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(e){t.updateType_(e)});this.setHelpUrl(b.Msg.LISTS_SPLIT_HELPURL);this.setStyle("list_blocks");this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE");this.appendValueInput("DELIM").setCheck("String").appendField(b.Msg.LISTS_SPLIT_WITH_DELIMITER);this.setInputsInline(!0);this.setOutput(!0,"Array");this.setTooltip(function(){var e=t.getFieldValue("MODE");if("SPLIT"==e)return b.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==e)return b.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)})},updateType_:function(e){if(this.getFieldValue("MODE")!=e){var t=this.getInput("INPUT").connection;t.setShadowDom(null);var n=t.targetBlock();n&&(t.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("mode",this.getFieldValue("MODE"));return e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))}};b.Blocks.logic={};b.Constants.Logic={};b.Constants.Logic.HUE=210;b.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]);b.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);b.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};b.Extensions.register("logic_op_tooltip",b.Extensions.buildTooltipForDropdown("OP",b.Constants.Logic.TOOLTIPS_BY_OP));b.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=b.utils.xml.createElement("mutation");this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_);this.elseCount_&&e.setAttribute("else",1);return e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0;this.elseCount_=parseInt(e.getAttribute("else"),10)||0;this.rebuildShape_()},decompose:function(e){var t=e.newBlock("controls_if_if");t.initSvg();for(var n=t.nextConnection,o=1;o<=this.elseifCount_;o++){var i=e.newBlock("controls_if_elseif");i.initSvg();n.connect(i.previousConnection);n=i.nextConnection}this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection));return t},compose:function(e){e=e.nextConnection.targetBlock();this.elseCount_=this.elseifCount_=0;for(var t=[null],n=[null],o=null;e;){switch(e.type){case"controls_if_elseif":this.elseifCount_++;t.push(e.valueConnection_);n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++;o=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}this.updateShape_();this.reconnectChildBlocks_(t,n,o)},saveConnections:function(e){e=e.nextConnection.targetBlock();for(var t=1;e;){switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t),o=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection;e.statementConnection_=o&&o.connection.targetConnection;t++;break;case"controls_if_else":o=this.getInput("ELSE");e.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var i=this.getInput("IF"+o),r=this.getInput("DO"+o);e.push(i.connection.targetConnection);t.push(r.connection.targetConnection);o++}this.updateShape_();this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(b.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(b.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(b.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,t,n){for(var o=1;o<=this.elseifCount_;o++)b.Mutator.reconnect(e[o],this,"IF"+o),b.Mutator.reconnect(t[o],this,"DO"+o);b.Mutator.reconnect(n,this,"ELSE")}};b.Extensions.registerMutator("controls_if_mutator",b.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]);b.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?b.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?b.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?b.Msg.CONTROLS_IF_TOOLTIP_4:"":b.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))};b.Extensions.register("controls_if_tooltip",b.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION);b.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var t=this.getInputTargetBlock("A"),n=this.getInputTargetBlock("B");t&&n&&!t.outputConnection.checkType_(n.outputConnection)&&(b.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==t&&(t.unplug(),e&&!e.isShadow()&&this.getInput("A").connection.connect(e.outputConnection)),(t=this.prevBlocks_[1])!==n&&(n.unplug(),t&&!t.isShadow()&&this.getInput("B").connection.connect(t.outputConnection)),this.bumpNeighbours(),b.Events.setGroup(!1));this.prevBlocks_[0]=this.getInputTargetBlock("A");this.prevBlocks_[1]=this.getInputTargetBlock("B")}};b.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(b.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)};b.Extensions.register("logic_compare",b.Constants.Logic.LOGIC_COMPARE_EXTENSION);b.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var t=this.getInputTargetBlock("THEN"),n=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((t||n)&&o)for(var i=0;i<2;i++){var r=1==i?t:n;r&&!r.outputConnection.checkType_(o)&&(b.Events.setGroup(e.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours()):(r.unplug(),r.bumpNeighbours()),b.Events.setGroup(!1))}this.prevParentConnection_=o}};b.Extensions.registerMixin("logic_ternary",b.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN);b.Blocks.loops={};b.Constants.Loops={};b.Constants.Loops.HUE=120;b.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);b.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};b.Extensions.register("controls_whileUntil_tooltip",b.Extensions.buildTooltipForDropdown("MODE",b.Constants.Loops.WHILE_UNTIL_TOOLTIPS));b.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};b.Extensions.register("controls_flow_tooltip",b.Extensions.buildTooltipForDropdown("FLOW",b.Constants.Loops.BREAK_CONTINUE_TOOLTIPS));b.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){var t=this.getField("VAR").getVariable(),n=t.name;if(!this.isCollapsed()&&null!=n){var o={enabled:!0};o.text=b.Msg.VARIABLES_SET_CREATE_GET.replace("%1",n);t=b.Variables.generateVariableFieldDom(t);(n=b.utils.xml.createElement("block")).setAttribute("type","variables_get");n.appendChild(t);o.callback=b.ContextMenu.callbackFactory(this,n);e.push(o)}}}};b.Extensions.registerMixin("contextMenu_newGetVariableBlock",b.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN);b.Extensions.register("controls_for_tooltip",b.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR"));b.Extensions.register("controls_forEach_tooltip",b.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));b.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(e){do{if(-1!=b.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(e.type))return e}while(e=e.getSurroundParent());return null},onchange:function(e){this.workspace.isDragging&&!this.workspace.isDragging()&&(b.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this)?(this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(b.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1)))}};b.Extensions.registerMixin("controls_flow_in_loop_check",b.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN);b.Blocks.math={};b.Constants.Math={};b.Constants.Math.HUE=230;b.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);b.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};b.Extensions.register("math_op_tooltip",b.Extensions.buildTooltipForDropdown("OP",b.Constants.Math.TOOLTIPS_BY_OP));b.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=b.utils.xml.createElement("mutation"),t="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");e.setAttribute("divisor_input",t);return e},domToMutation:function(e){e="true"==e.getAttribute("divisor_input");this.updateShape_(e)},updateShape_:function(e){var t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}};b.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(e){e="DIVISIBLE_BY"==e;this.getSourceBlock().updateShape_(e)})};b.Extensions.registerMutator("math_is_divisibleby_mutator",b.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,b.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION);b.Extensions.register("math_change_tooltip",b.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));b.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(e){"MODE"==e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("op",this.getFieldValue("OP"));return e},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}};b.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))};b.Extensions.registerMutator("math_modes_of_list_mutator",b.Constants.Math.LIST_MODES_MUTATOR_MIXIN,b.Constants.Math.LIST_MODES_MUTATOR_EXTENSION);b.Blocks.procedures={};b.Blocks.procedures_defnoreturn={init:function(){var e=new b.FieldTextInput("",b.Procedures.rename);e.setSpellcheck(!1);this.appendDummyInput().appendField(b.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS");this.setMutator(new b.Mutator(["procedures_mutatorarg"]));(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&b.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(b.Msg.PROCEDURES_DEFNORETURN_COMMENT);this.setStyle("procedure_blocks");this.setTooltip(b.Msg.PROCEDURES_DEFNORETURN_TOOLTIP);this.setHelpUrl(b.Msg.PROCEDURES_DEFNORETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(b.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){var e="";this.arguments_.length&&(e=b.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", "));b.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{b.Events.enable()}},mutationToDom:function(e){var t=b.utils.xml.createElement("mutation");e&&t.setAttribute("name",this.getFieldValue("NAME"));for(var n=0;n<this.argumentVarModels_.length;n++){var o=b.utils.xml.createElement("arg"),i=this.argumentVarModels_[n];o.setAttribute("name",i.name);o.setAttribute("varid",i.getId());e&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[n]);t.appendChild(o)}this.hasStatements_||t.setAttribute("statements","false");return t},domToMutation:function(e){this.arguments_=[];this.argumentVarModels_=[];for(var t=0;o=e.childNodes[t];t++)if("arg"==o.nodeName.toLowerCase()){var n=o.getAttribute("name"),o=o.getAttribute("varid")||o.getAttribute("varId");this.arguments_.push(n);null!=(o=b.Variables.getOrCreateVariablePackage(this.workspace,o,n,""))?this.argumentVarModels_.push(o):console.log("Failed to create a variable with name "+n+", ignoring.")}this.updateParams_();b.Procedures.mutateCallers(this);this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var t=b.utils.xml.createElement("block");t.setAttribute("type","procedures_mutatorcontainer");var n=b.utils.xml.createElement("statement");n.setAttribute("name","STACK");t.appendChild(n);for(var o=0;o<this.arguments_.length;o++){var i=b.utils.xml.createElement("block");i.setAttribute("type","procedures_mutatorarg");var r=b.utils.xml.createElement("field");r.setAttribute("name","NAME");var s=b.utils.xml.createTextNode(this.arguments_[o]);r.appendChild(s);i.appendChild(r);r=b.utils.xml.createElement("next");i.appendChild(r);n.appendChild(i);n=r}e=b.Xml.domToBlock(t,e);"procedures_defreturn"==this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT");b.Procedures.mutateCallers(this);return e},compose:function(e){this.arguments_=[];this.paramIds_=[];this.argumentVarModels_=[];for(var t=e.getInputTargetBlock("STACK");t;){var n=t.getFieldValue("NAME");this.arguments_.push(n);n=this.workspace.getVariable(n,"");this.argumentVarModels_.push(n);this.paramIds_.push(t.id);t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateParams_();b.Procedures.mutateCallers(this);if(null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"==e,this.hasStatements_!=e))if(e)this.setStatements_(!0),b.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null;else{e=this.getInput("STACK").connection;(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours());this.setStatements_(!1)}},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,t){var n=this.workspace.getVariableById(e);if(""==n.type){n=n.name;t=this.workspace.getVariableById(t);for(var o=!1,i=0;i<this.argumentVarModels_.length;i++)this.argumentVarModels_[i].getId()==e&&(this.arguments_[i]=t.name,this.argumentVarModels_[i]=t,o=!0);o&&(this.displayRenamedVar_(n,t.name),b.Procedures.mutateCallers(this))}},updateVarName:function(e){for(var t=e.name,n=!1,o=0;o<this.argumentVarModels_.length;o++)if(this.argumentVarModels_[o].getId()==e.getId()){var i=this.arguments_[o];this.arguments_[o]=t;n=!0}n&&(this.displayRenamedVar_(i,t),b.Procedures.mutateCallers(this))},displayRenamedVar_:function(e,t){this.updateParams_();if(this.mutator&&this.mutator.isVisible())for(var n,o=this.mutator.workspace_.getAllBlocks(!1),i=0;n=o[i];i++)"procedures_mutatorarg"==n.type&&b.Names.equals(e,n.getFieldValue("NAME"))&&n.setFieldValue(t,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var t={enabled:!0},n=this.getFieldValue("NAME");t.text=b.Msg.PROCEDURES_CREATE_DO.replace("%1",n);var o=b.utils.xml.createElement("mutation");o.setAttribute("name",n);for(n=0;n<this.arguments_.length;n++){var i=b.utils.xml.createElement("arg");i.setAttribute("name",this.arguments_[n]);o.appendChild(i)}(n=b.utils.xml.createElement("block")).setAttribute("type",this.callType_);n.appendChild(o);t.callback=b.ContextMenu.callbackFactory(this,n);e.push(t);if(!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++)t={enabled:!0},o=this.argumentVarModels_[n],t.text=b.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o.name),o=b.Variables.generateVariableFieldDom(o),(i=b.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.appendChild(o),t.callback=b.ContextMenu.callbackFactory(this,i),e.push(t)}},callType_:"procedures_callnoreturn"};b.Blocks.procedures_defreturn={init:function(){var e=new b.FieldTextInput("",b.Procedures.rename);e.setSpellcheck(!1);this.appendDummyInput().appendField(b.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS");this.appendValueInput("RETURN").setAlign(b.ALIGN_RIGHT).appendField(b.Msg.PROCEDURES_DEFRETURN_RETURN);this.setMutator(new b.Mutator(["procedures_mutatorarg"]));(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&b.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(b.Msg.PROCEDURES_DEFRETURN_COMMENT);this.setStyle("procedure_blocks");this.setTooltip(b.Msg.PROCEDURES_DEFRETURN_TOOLTIP);this.setHelpUrl(b.Msg.PROCEDURES_DEFRETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.setStatements_(!0);this.statementConnection_=null},setStatements_:b.Blocks.procedures_defnoreturn.setStatements_,updateParams_:b.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:b.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:b.Blocks.procedures_defnoreturn.domToMutation,decompose:b.Blocks.procedures_defnoreturn.decompose,compose:b.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:b.Blocks.procedures_defnoreturn.getVars,getVarModels:b.Blocks.procedures_defnoreturn.getVarModels,renameVarById:b.Blocks.procedures_defnoreturn.renameVarById,updateVarName:b.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:b.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:b.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"};b.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(b.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.appendDummyInput("STATEMENT_INPUT").appendField(b.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new b.FieldCheckbox("TRUE"),"STATEMENTS");this.setStyle("procedure_blocks");this.setTooltip(b.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=!1},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&(e.type==b.Events.BLOCK_DELETE||e.type==b.Events.BLOCK_CREATE)){var t=this.workspace.getAllBlocks(),n=this.workspace.getAllVariables();if(e.type==b.Events.BLOCK_DELETE){e=[];for(var o=0;o<t.length;o+=1)t[o].getFieldValue("NAME")&&e.push(t[o].getFieldValue("NAME"));for(t=0;t<n.length;t+=1)-1==e.indexOf(n[t].name)&&this.workspace.deleteVariableById(n[t].getId())}else if(e.type==b.Events.BLOCK_CREATE&&((n=this.workspace.getBlockById(e.blockId)).getField("NAME")&&(o=n.getFieldValue("NAME"),(e=this.workspace.getVariable(o))||(e=this.workspace.createVariable(o)),!n.previousConnection.isConnected()&&!n.nextConnection.isConnected())))for(o=0;o<t.length;o+=1)if(n.id!=t[o].id&&t[o].getFieldValue("NAME")==e.name){o=b.Variables.generateUniqueName(this.workspace);e=this.workspace.createVariable(o);n.setFieldValue(e.name,"NAME");break}}}};b.Blocks.procedures_mutatorarg={init:function(){var e=new b.FieldTextInput("x",this.validator_);e.oldShowEditorFn_=e.showEditor_;e.showEditor_=function(){this.createdVariables_=[];this.oldShowEditorFn_()};this.appendDummyInput().appendField(b.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setStyle("procedure_blocks");this.setTooltip(b.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=!1;e.onFinishEditing_=this.deleteIntermediateVars_;e.createdVariables_=[];e.onFinishEditing_("x")},validator_:function(e){var t=this.getSourceBlock(),n=b.Mutator.findParentWs(t.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;t=t.workspace.getAllBlocks();for(var o=0;o<t.length;o++)if(t[o].id!=this.getSourceBlock().id&&t[o].getFieldValue("NAME")==e)return null;(t=n.getVariable(e,""))&&t.name!=e&&n.renameVariableById(t.getId(),e);t||(o=b.Events.disabled_,b.Events.disabled_=0,t=n.createVariable(e,""),b.Events.disabled_=o,t&&this.createdVariables_&&this.createdVariables_.push(t));return e},deleteIntermediateVars_:function(e){var t=b.Mutator.findParentWs(this.getSourceBlock().workspace);if(t)for(var n=0;n<this.createdVariables_.length;n++){var o=this.createdVariables_[n];o.name!=e&&t.deleteVariableById(o.getId())}}};b.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setStyle("procedure_blocks");this.setHelpUrl(b.Msg.PROCEDURES_CALLNORETURN_HELPURL);this.arguments_=[];this.argumentVarModels_=[];this.quarkConnections_={};this.quarkIds_=null;this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){b.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(t,"NAME"),this.setTooltip((this.outputConnection?b.Msg.PROCEDURES_CALLRETURN_TOOLTIP:b.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",t)))},setProcedureParameters_:function(e,t){var n=b.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=n&&n.mutator&&n.mutator.isVisible();o||(this.quarkConnections_={},this.quarkIds_=null);if(t)if(e.join("\n")==this.arguments_.join("\n"))this.quarkIds_=t;else{if(t.length!=e.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1);this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);n=this.rendered;this.rendered=!1;for(var i=0;i<this.arguments_.length;i++){var r=this.getInput("ARG"+i);r&&(r=r.connection.targetConnection,this.quarkConnections_[this.quarkIds_[i]]=r,o&&r&&-1==t.indexOf(this.quarkIds_[i])&&(r.disconnect(),r.getSourceBlock().bumpNeighbours()))}this.arguments_=[].concat(e);this.argumentVarModels_=[];for(i=0;i<this.arguments_.length;i++)e=b.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[i],""),this.argumentVarModels_.push(e);this.updateShape_();if(this.quarkIds_=t)for(i=0;i<this.arguments_.length;i++)(t=this.quarkIds_[i])in this.quarkConnections_&&(r=this.quarkConnections_[t],b.Mutator.reconnect(r,this,"ARG"+i)||delete this.quarkConnections_[t]);(this.rendered=n)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var t=this.getField("ARGNAME"+e);if(t){b.Events.disable();try{t.setValue(this.arguments_[e])}finally{b.Events.enable()}}else t=new b.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(b.ALIGN_RIGHT).appendField(t,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(b.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var t=0;t<this.arguments_.length;t++){var n=b.utils.xml.createElement("arg");n.setAttribute("name",this.arguments_[t]);e.appendChild(n)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t);t=[];for(var n,o=[],i=0;n=e.childNodes[i];i++)"arg"==n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,o)},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo)if(e.type==b.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)){var t=this.getProcedureCall();!(t=b.Procedures.getDefinition(t,this.workspace))||t.type==this.defType_&&JSON.stringify(t.arguments_)==JSON.stringify(this.arguments_)||(t=null);if(!t){b.Events.setGroup(e.group);e=b.utils.xml.createElement("xml");(t=b.utils.xml.createElement("block")).setAttribute("type",this.defType_);var n=this.getRelativeToSurfaceXY(),o=n.y+2*b.SNAP_RADIUS;t.setAttribute("x",n.x+b.SNAP_RADIUS*(this.RTL?-1:1));t.setAttribute("y",o);n=this.mutationToDom();t.appendChild(n);(n=b.utils.xml.createElement("field")).setAttribute("name","NAME");n.appendChild(b.utils.xml.createTextNode(this.getProcedureCall()));t.appendChild(n);e.appendChild(t);b.Xml.domToWorkspace(e,this.workspace);b.Events.setGroup(!1)}}else e.type==b.Events.BLOCK_DELETE?(t=this.getProcedureCall(),(t=b.Procedures.getDefinition(t,this.workspace))||(b.Events.setGroup(e.group),this.dispose(!0,!1),b.Events.setGroup(!1))):e.type==b.Events.CHANGE&&"disabled"==e.element&&(t=this.getProcedureCall(),(t=b.Procedures.getDefinition(t,this.workspace))&&t.id==e.blockId&&((t=b.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),b.Events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),b.Events.setGroup(t)))},customContextMenu:function(e){if(this.workspace.isMovable()){var t={enabled:!0};t.text=b.Msg.PROCEDURES_HIGHLIGHT_DEF;var n=this.getProcedureCall(),o=this.workspace;t.callback=function(){var e=b.Procedures.getDefinition(n,o);e&&(o.centerOnBlock(e.id),e.select())};e.push(t)}},defType_:"procedures_defnoreturn"};b.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setOutput(!0);this.setStyle("procedure_blocks");this.setHelpUrl(b.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null;this.previousEnabledState_=!0},getProcedureCall:b.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:b.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:b.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:b.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:b.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:b.Blocks.procedures_callnoreturn.domToMutation,getVarModels:b.Blocks.procedures_callnoreturn.getVarModels,onchange:b.Blocks.procedures_callnoreturn.onchange,customContextMenu:b.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"};b.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(b.Msg.CONTROLS_IF_MSG_IF);this.appendValueInput("VALUE").appendField(b.Msg.PROCEDURES_DEFRETURN_RETURN);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setStyle("procedure_blocks");this.setTooltip(b.Msg.PROCEDURES_IFRETURN_TOOLTIP);this.setHelpUrl(b.Msg.PROCEDURES_IFRETURN_HELPURL);this.hasReturnValue_=!0},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("value",Number(this.hasReturnValue_));return e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value");this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(b.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()){e=!1;var t=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(t.type)){e=!0;break}}while(t=t.getSurroundParent());e?("procedures_defnoreturn"==t.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(b.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=t.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(b.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(b.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};b.Blocks.texts={};b.Constants.Text={};b.Constants.Text.HUE=160;b.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"¶"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]);b.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[b.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[b.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[b.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]];this.WHERE_OPTIONS_2=[[b.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[b.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[b.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]];this.setHelpUrl(b.Msg.TEXT_GET_SUBSTRING_HELPURL);this.setStyle("text_blocks");this.appendValueInput("STRING").setCheck("String").appendField(b.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);this.appendDummyInput("AT1");this.appendDummyInput("AT2");b.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(b.Msg.TEXT_GET_SUBSTRING_TAIL);this.setInputsInline(!0);this.setOutput(!0,"String");this.updateAt_(1,!0);this.updateAt_(2,!0);this.setTooltip(b.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=b.utils.xml.createElement("mutation"),t=this.getInput("AT1").type==b.INPUT_VALUE;e.setAttribute("at1",t);t=this.getInput("AT2").type==b.INPUT_VALUE;e.setAttribute("at2",t);return e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2");this.updateAt_(1,t);this.updateAt_(2,e)},updateAt_:function(o,i){this.removeInput("AT"+o);this.removeInput("ORDINAL"+o,!0);i?(this.appendValueInput("AT"+o).setCheck("Number"),b.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(b.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o);2==o&&b.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(b.Msg.TEXT_GET_SUBSTRING_TAIL));var e=new b.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=i){var n=this.getSourceBlock();n.updateAt_(o,t);n.setFieldValue(e,"WHERE"+o);return null}});this.getInput("AT"+o).appendField(e,"WHERE"+o);1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};b.Blocks.text_changeCase={init:function(){var e=[[b.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[b.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[b.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(b.Msg.TEXT_CHANGECASE_HELPURL);this.setStyle("text_blocks");this.appendValueInput("TEXT").setCheck("String").appendField(new b.FieldDropdown(e),"CASE");this.setOutput(!0,"String");this.setTooltip(b.Msg.TEXT_CHANGECASE_TOOLTIP)}};b.Blocks.text_trim={init:function(){var e=[[b.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[b.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[b.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(b.Msg.TEXT_TRIM_HELPURL);this.setStyle("text_blocks");this.appendValueInput("TEXT").setCheck("String").appendField(new b.FieldDropdown(e),"MODE");this.setOutput(!0,"String");this.setTooltip(b.Msg.TEXT_TRIM_TOOLTIP)}};b.Blocks.text_print={init:function(){this.jsonInit({message0:b.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:b.Msg.TEXT_PRINT_TOOLTIP,helpUrl:b.Msg.TEXT_PRINT_HELPURL})}};b.Blocks.text_prompt_ext={init:function(){var e=[[b.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[b.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(b.Msg.TEXT_PROMPT_HELPURL);this.setStyle("text_blocks");var t=this,e=new b.FieldDropdown(e,function(e){t.updateType_(e)});this.appendValueInput("TEXT").appendField(e,"TYPE");this.setOutput(!0,"String");this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?b.Msg.TEXT_PROMPT_TOOLTIP_TEXT:b.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(e){this.outputConnection.setCheck("NUMBER"==e?"Number":"String")},mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("type",this.getFieldValue("TYPE"));return e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};b.Blocks.text_prompt={init:function(){this.mixin(b.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[b.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[b.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],t=this;this.setHelpUrl(b.Msg.TEXT_PROMPT_HELPURL);this.setStyle("text_blocks");e=new b.FieldDropdown(e,function(e){t.updateType_(e)});this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new b.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1));this.setOutput(!0,"String");this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?b.Msg.TEXT_PROMPT_TOOLTIP_TEXT:b.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:b.Blocks.text_prompt_ext.updateType_,mutationToDom:b.Blocks.text_prompt_ext.mutationToDom,domToMutation:b.Blocks.text_prompt_ext.domToMutation};b.Blocks.text_count={init:function(){this.jsonInit({message0:b.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:b.Msg.TEXT_COUNT_TOOLTIP,helpUrl:b.Msg.TEXT_COUNT_HELPURL})}};b.Blocks.text_replace={init:function(){this.jsonInit({message0:b.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:b.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:b.Msg.TEXT_REPLACE_HELPURL})}};b.Blocks.text_reverse={init:function(){this.jsonInit({message0:b.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:b.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:b.Msg.TEXT_REVERSE_HELPURL})}};b.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,i=0;o=t.fieldRow[i];i++)if(e==o.name){t.insertFieldAt(i,this.newQuote_(!0));t.insertFieldAt(i+2,this.newQuote_(!1));return}console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){e=this.RTL?!e:e;return new b.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"“":"”")}};b.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(b.Constants.Text.QUOTE_IMAGE_MIXIN);this.quoteField_("TEXT")};b.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("items",this.itemCount_);return e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10);this.updateShape_()},decompose:function(e){var t=e.newBlock("text_create_join_container");t.initSvg();for(var n=t.getInput("STACK").connection,o=0;o<this.itemCount_;o++){var i=e.newBlock("text_create_join_item");i.initSvg();n.connect(i.previousConnection);n=i.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)e.push(t.valueConnection_),t=t.nextConnection&&t.nextConnection.targetBlock();for(t=0;t<this.itemCount_;t++){var n=this.getInput("ADD"+t).connection.targetConnection;n&&-1==e.indexOf(n)&&n.disconnect()}this.itemCount_=e.length;this.updateShape_();for(t=0;t<this.itemCount_;t++)b.Mutator.reconnect(e[t],this,"ADD"+t)},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection;t++;e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var t=this.appendValueInput("ADD"+e);0==e&&t.appendField(b.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}};b.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(b.Constants.Text.QUOTE_IMAGE_MIXIN);this.itemCount_=2;this.updateShape_();this.setMutator(new b.Mutator(["text_create_join_item"]))};b.Extensions.register("text_append_tooltip",b.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));b.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip(function(){return b.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")})};b.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=b.utils.xml.createElement("mutation");e.setAttribute("at",!!this.isAt_);return e},domToMutation:function(e){e="false"!=e.getAttribute("at");this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0);this.removeInput("ORDINAL",!0);e&&(this.appendValueInput("AT").setCheck("Number"),b.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(b.Msg.ORDINAL_NUMBER_SUFFIX));b.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(b.Msg.TEXT_CHARAT_TAIL));this.isAt_=e}};b.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(e){(e="FROM_START"==e||"FROM_END"==e)!=this.isAt_&&this.getSourceBlock().updateAt_(e)});this.updateAt_(!0);var n=this;this.setTooltip(function(){var e=n.getFieldValue("WHERE"),t=b.Msg.TEXT_CHARAT_TOOLTIP;"FROM_START"!=e&&"FROM_END"!=e||!(e="FROM_START"==e?b.Msg.LISTS_INDEX_FROM_START_TOOLTIP:b.Msg.LISTS_INDEX_FROM_END_TOOLTIP)||(t+="  "+e.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0"));return t})};b.Extensions.register("text_indexOf_tooltip",b.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION);b.Extensions.register("text_quotes",b.Constants.Text.TEXT_QUOTES_EXTENSION);b.Extensions.registerMutator("text_join_mutator",b.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,b.Constants.Text.TEXT_JOIN_EXTENSION);b.Extensions.registerMutator("text_charAt_mutator",b.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,b.Constants.Text.TEXT_CHARAT_EXTENSION);b.Blocks.variables={};b.Constants.Variables={};b.Constants.Variables.HUE=330;b.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);b.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(t={text:b.Msg.RENAME_VARIABLE,enabled:!0,callback:b.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},i=this.getField("VAR").getText(),o={text:b.Msg.DELETE_VARIABLE.replace("%1",i),enabled:!0,callback:b.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(t),e.unshift(o));else{var t,n="variables_get"==this.type?(t="variables_set",b.Msg.VARIABLES_GET_CREATE_SET):(t="variables_get",b.Msg.VARIABLES_SET_CREATE_GET),o={enabled:0<this.workspace.remainingCapacity()},i=this.getField("VAR").getText();o.text=n.replace("%1",i);(n=b.utils.xml.createElement("field")).setAttribute("name","VAR");n.appendChild(b.utils.xml.createTextNode(i));(i=b.utils.xml.createElement("block")).setAttribute("type",t);i.appendChild(n);o.callback=b.ContextMenu.callbackFactory(this,i);e.push(o)}}};b.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();b.Variables.renameVariable(e,t)}};b.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();e.deleteVariableById(t.getId());e.refreshToolboxSelection()}};b.Extensions.registerMixin("contextMenu_variableSetterGetter",b.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);b.Constants.VariablesDynamic={};b.Constants.VariablesDynamic.HUE=310;b.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);b.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(t={text:b.Msg.RENAME_VARIABLE,enabled:!0,callback:b.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},r=this.getField("VAR").getText(),i={text:b.Msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:b.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(t),e.unshift(i));else{var t=this.getFieldValue("VAR"),n=this.workspace.getVariableById(t).type;if("variables_get_dynamic"==this.type){t="variables_set_dynamic";var o=b.Msg.VARIABLES_GET_CREATE_SET}else t="variables_get_dynamic",o=b.Msg.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();i.text=o.replace("%1",r);(o=b.utils.xml.createElement("field")).setAttribute("name","VAR");o.setAttribute("variabletype",n);o.appendChild(b.utils.xml.createTextNode(r));(r=b.utils.xml.createElement("block")).setAttribute("type",t);r.appendChild(o);i.callback=b.ContextMenu.callbackFactory(this,r);e.push(i)}},onchange:function(e){e=this.getFieldValue("VAR");e=b.Variables.getVariable(this.workspace,e);("variables_get_dynamic"==this.type?this.outputConnection:this.getInput("VALUE").connection).setCheck(e.type)}};b.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();b.Variables.renameVariable(e,t)}};b.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();e.deleteVariableById(t.getId());e.refreshToolboxSelection()}};b.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",b.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN);b.JavaScript=new b.Generator("JavaScript");b.JavaScript.addReservedWords("Blockly,break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,const,null,true,false,Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,Image,Option,Worker,Event,Range,File,FileReader,Blob,BlobBuilder,Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan");b.JavaScript.ORDER_ATOMIC=0;b.JavaScript.ORDER_NEW=1.1;b.JavaScript.ORDER_MEMBER=1.2;b.JavaScript.ORDER_FUNCTION_CALL=2;b.JavaScript.ORDER_INCREMENT=3;b.JavaScript.ORDER_DECREMENT=3;b.JavaScript.ORDER_BITWISE_NOT=4.1;b.JavaScript.ORDER_UNARY_PLUS=4.2;b.JavaScript.ORDER_UNARY_NEGATION=4.3;b.JavaScript.ORDER_LOGICAL_NOT=4.4;b.JavaScript.ORDER_TYPEOF=4.5;b.JavaScript.ORDER_VOID=4.6;b.JavaScript.ORDER_DELETE=4.7;b.JavaScript.ORDER_AWAIT=4.8;b.JavaScript.ORDER_EXPONENTIATION=5;b.JavaScript.ORDER_MULTIPLICATION=5.1;b.JavaScript.ORDER_DIVISION=5.2;b.JavaScript.ORDER_MODULUS=5.3;b.JavaScript.ORDER_SUBTRACTION=6.1;b.JavaScript.ORDER_ADDITION=6.2;b.JavaScript.ORDER_BITWISE_SHIFT=7;b.JavaScript.ORDER_RELATIONAL=8;b.JavaScript.ORDER_IN=8;b.JavaScript.ORDER_INSTANCEOF=8;b.JavaScript.ORDER_EQUALITY=9;b.JavaScript.ORDER_BITWISE_AND=10;b.JavaScript.ORDER_BITWISE_XOR=11;b.JavaScript.ORDER_BITWISE_OR=12;b.JavaScript.ORDER_LOGICAL_AND=13;b.JavaScript.ORDER_LOGICAL_OR=14;b.JavaScript.ORDER_CONDITIONAL=15;b.JavaScript.ORDER_ASSIGNMENT=16;b.JavaScript.ORDER_YIELD=17;b.JavaScript.ORDER_COMMA=18;b.JavaScript.ORDER_NONE=99;b.JavaScript.ORDER_OVERRIDES=[[b.JavaScript.ORDER_FUNCTION_CALL,b.JavaScript.ORDER_MEMBER],[b.JavaScript.ORDER_FUNCTION_CALL,b.JavaScript.ORDER_FUNCTION_CALL],[b.JavaScript.ORDER_MEMBER,b.JavaScript.ORDER_MEMBER],[b.JavaScript.ORDER_MEMBER,b.JavaScript.ORDER_FUNCTION_CALL],[b.JavaScript.ORDER_LOGICAL_NOT,b.JavaScript.ORDER_LOGICAL_NOT],[b.JavaScript.ORDER_MULTIPLICATION,b.JavaScript.ORDER_MULTIPLICATION],[b.JavaScript.ORDER_ADDITION,b.JavaScript.ORDER_ADDITION],[b.JavaScript.ORDER_LOGICAL_AND,b.JavaScript.ORDER_LOGICAL_AND],[b.JavaScript.ORDER_LOGICAL_OR,b.JavaScript.ORDER_LOGICAL_OR]];b.JavaScript.init=function(e){b.JavaScript.definitions_=Object.create(null);b.JavaScript.functionNames_=Object.create(null);b.JavaScript.variableDB_?b.JavaScript.variableDB_.reset():b.JavaScript.variableDB_=new b.Names(b.JavaScript.RESERVED_WORDS_);b.JavaScript.variableDB_.setVariableMap(e.getVariableMap());for(var t=[],n=b.Variables.allDeveloperVariables(e),o=0;o<n.length;o++)t.push(b.JavaScript.variableDB_.getName(n[o],b.Names.DEVELOPER_VARIABLE_TYPE));e=b.Variables.allUsedVarModels(e);for(o=0;o<e.length;o++)t.push(b.JavaScript.variableDB_.getName(e[o].getId(),b.Variables.NAME_TYPE));t.length&&(b.JavaScript.definitions_.variables="var "+t.join(", ")+";")};b.JavaScript.finish=function(e){var t,n=[];for(t in b.JavaScript.definitions_)n.push(b.JavaScript.definitions_[t]);delete b.JavaScript.definitions_;delete b.JavaScript.functionNames_;b.JavaScript.variableDB_.reset();return n.join("\n\n")+"\n\n\n"+e};b.JavaScript.scrubNakedValue=function(e){return e+";\n"};b.JavaScript.quote_=function(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"};b.JavaScript.multiline_quote_=function(e){return e.split(/\n/g).map(b.JavaScript.quote_).join(" + '\\n' +\n")};b.JavaScript.scrub_=function(e,t,n){var o="";if(!e.outputConnection||!e.outputConnection.targetConnection){var i=e.getCommentText();i&&(i=b.utils.string.wrap(i,b.JavaScript.COMMENT_WRAP-3),o+=b.JavaScript.prefixLines(i+"\n","// "));for(var r=0;r<e.inputList.length;r++)e.inputList[r].type==b.INPUT_VALUE&&(i=e.inputList[r].connection.targetBlock())&&(i=b.JavaScript.allNestedComments(i))&&(o+=b.JavaScript.prefixLines(i,"// "))}e=e.nextConnection&&e.nextConnection.targetBlock();return o+t+(n=n?"":b.JavaScript.blockToCode(e))};b.JavaScript.getAdjusted=function(e,t,n,o,i){n=n||0;i=i||b.JavaScript.ORDER_NONE;e.workspace.options.oneBasedIndex&&n--;var r=e.workspace.options.oneBasedIndex?"1":"0";e=0<n?b.JavaScript.valueToCode(e,t,b.JavaScript.ORDER_ADDITION)||r:n<0?b.JavaScript.valueToCode(e,t,b.JavaScript.ORDER_SUBTRACTION)||r:o?b.JavaScript.valueToCode(e,t,b.JavaScript.ORDER_UNARY_NEGATION)||r:b.JavaScript.valueToCode(e,t,i)||r;if(b.isNumber(e))e=Number(e)+n,o&&(e=-e);else{if(0<n){e=e+" + "+n;var s=b.JavaScript.ORDER_ADDITION}else n<0&&(e=e+" - "+-n,s=b.JavaScript.ORDER_SUBTRACTION);o&&(e=n?"-("+e+")":"-"+e,s=b.JavaScript.ORDER_UNARY_NEGATION);s=Math.floor(s);i=Math.floor(i);s&&s<=i&&(e="("+e+")")}return e};b.JavaScript.colour={};b.JavaScript.colour_picker=function(e){return[b.JavaScript.quote_(e.getFieldValue("COLOUR")),b.JavaScript.ORDER_ATOMIC]};b.JavaScript.colour_random=function(e){return[b.JavaScript.provideFunction_("colourRandom",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.colour_rgb=function(e){var t=b.JavaScript.valueToCode(e,"RED",b.JavaScript.ORDER_COMMA)||0,n=b.JavaScript.valueToCode(e,"GREEN",b.JavaScript.ORDER_COMMA)||0;e=b.JavaScript.valueToCode(e,"BLUE",b.JavaScript.ORDER_COMMA)||0;return[b.JavaScript.provideFunction_("colourRgb",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+t+", "+n+", "+e+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.colour_blend=function(e){var t=b.JavaScript.valueToCode(e,"COLOUR1",b.JavaScript.ORDER_COMMA)||"'#000000'",n=b.JavaScript.valueToCode(e,"COLOUR2",b.JavaScript.ORDER_COMMA)||"'#000000'";e=b.JavaScript.valueToCode(e,"RATIO",b.JavaScript.ORDER_COMMA)||.5;return[b.JavaScript.provideFunction_("colourBlend",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+t+", "+n+", "+e+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists={};b.JavaScript.lists_create_empty=function(e){return["[]",b.JavaScript.ORDER_ATOMIC]};b.JavaScript.lists_create_with=function(e){for(var t=Array(e.itemCount_),n=0;n<e.itemCount_;n++)t[n]=b.JavaScript.valueToCode(e,"ADD"+n,b.JavaScript.ORDER_COMMA)||"null";return["["+t.join(", ")+"]",b.JavaScript.ORDER_ATOMIC]};b.JavaScript.lists_repeat=function(e){return[b.JavaScript.provideFunction_("listsRepeat",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(b.JavaScript.valueToCode(e,"ITEM",b.JavaScript.ORDER_COMMA)||"null")+", "+(e=b.JavaScript.valueToCode(e,"NUM",b.JavaScript.ORDER_COMMA)||"0")+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists_length=function(e){return[(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_MEMBER)||"[]")+".length",b.JavaScript.ORDER_MEMBER]};b.JavaScript.lists_isEmpty=function(e){return["!"+(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_MEMBER)||"[]")+".length",b.JavaScript.ORDER_LOGICAL_NOT]};b.JavaScript.lists_indexOf=function(e){var t="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",n=b.JavaScript.valueToCode(e,"FIND",b.JavaScript.ORDER_NONE)||"''",t=(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_MEMBER)||"[]")+"."+t+"("+n+")";return e.workspace.options.oneBasedIndex?[t+" + 1",b.JavaScript.ORDER_ADDITION]:[t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists_getIndex=function(e){var t=e.getFieldValue("MODE")||"GET",n=e.getFieldValue("WHERE")||"FROM_START",o=b.JavaScript.valueToCode(e,"VALUE","RANDOM"==n?b.JavaScript.ORDER_COMMA:b.JavaScript.ORDER_MEMBER)||"[]";switch(n){case"FIRST":if("GET"==t)return[o+"[0]",b.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==t)return[o+".shift()",b.JavaScript.ORDER_MEMBER];if("REMOVE"==t)return o+".shift();\n";break;case"LAST":if("GET"==t)return[o+".slice(-1)[0]",b.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==t)return[o+".pop()",b.JavaScript.ORDER_MEMBER];if("REMOVE"==t)return o+".pop();\n";break;case"FROM_START":e=b.JavaScript.getAdjusted(e,"AT");if("GET"==t)return[o+"["+e+"]",b.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==t)return[o+".splice("+e+", 1)[0]",b.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==t)return o+".splice("+e+", 1);\n";break;case"FROM_END":e=b.JavaScript.getAdjusted(e,"AT",1,!0);if("GET"==t)return[o+".slice("+e+")[0]",b.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==t)return[o+".splice("+e+", 1)[0]",b.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==t)return o+".splice("+e+", 1);";break;case"RANDOM":o=b.JavaScript.provideFunction_("listsGetRandomItem",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+o+", "+("GET"!=t)+")";if("GET"==t||"GET_REMOVE"==t)return[o,b.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==t)return o+";\n"}throw Error("Unhandled combination (lists_getIndex).")};b.JavaScript.lists_setIndex=function(e){function t(){if(n.match(/^\w+$/))return"";var e=b.JavaScript.variableDB_.getDistinctName("tmpList",b.Variables.NAME_TYPE),t="var "+e+" = "+n+";\n";n=e;return t}var n=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_MEMBER)||"[]",o=e.getFieldValue("MODE")||"GET",i=e.getFieldValue("WHERE")||"FROM_START",r=b.JavaScript.valueToCode(e,"TO",b.JavaScript.ORDER_ASSIGNMENT)||"null";switch(i){case"FIRST":if("SET"==o)return n+"[0] = "+r+";\n";if("INSERT"==o)return n+".unshift("+r+");\n";break;case"LAST":if("SET"==o)return(e=t())+(n+"[")+n+".length - 1] = "+r+";\n";if("INSERT"==o)return n+".push("+r+");\n";break;case"FROM_START":i=b.JavaScript.getAdjusted(e,"AT");if("SET"==o)return n+"["+i+"] = "+r+";\n";if("INSERT"==o)return n+".splice("+i+", 0, "+r+");\n";break;case"FROM_END":i=b.JavaScript.getAdjusted(e,"AT",1,!1,b.JavaScript.ORDER_SUBTRACTION);e=t();if("SET"==o)return e+(n+"[")+n+".length - "+i+"] = "+r+";\n";if("INSERT"==o)return e+(n+".splice(")+n+".length - "+i+", 0, "+r+");\n";break;case"RANDOM":e=t();e+="var "+(i=b.JavaScript.variableDB_.getDistinctName("tmpX",b.Variables.NAME_TYPE))+" = Math.floor(Math.random() * "+n+".length);\n";if("SET"==o)return e+(n+"[")+i+"] = "+r+";\n";if("INSERT"==o)return e+(n+".splice(")+i+", 0, "+r+");\n"}throw Error("Unhandled combination (lists_setIndex).")};b.JavaScript.lists.getIndex_=function(e,t,n){return"FIRST"==t?"0":"FROM_END"==t?e+".length - 1 - "+n:"LAST"==t?e+".length - 1":n};b.JavaScript.lists_getSublist=function(e){var t=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_MEMBER)||"[]",n=e.getFieldValue("WHERE1"),o=e.getFieldValue("WHERE2");if("FIRST"==n&&"LAST"==o)t+=".slice(0)";else if(t.match(/^\w+$/)||"FROM_END"!=n&&"FROM_START"==o){switch(n){case"FROM_START":var i=b.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":i=t+".length - "+(i=b.JavaScript.getAdjusted(e,"AT1",1,!1,b.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(o){case"FROM_START":e=b.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=t+".length - "+(e=b.JavaScript.getAdjusted(e,"AT2",0,!1,b.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=t+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}t=t+".slice("+i+", "+e+")"}else{i=b.JavaScript.getAdjusted(e,"AT1");e=b.JavaScript.getAdjusted(e,"AT2");var r=b.JavaScript.lists.getIndex_,s={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},t=b.JavaScript.provideFunction_("subsequence"+s[n]+s[o],["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==n||"FROM_START"==n?", at1":"")+("FROM_END"==o||"FROM_START"==o?", at2":"")+") {","  var start = "+r("sequence",n,"at1")+";","  var end = "+r("sequence",o,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+t+("FROM_END"==n||"FROM_START"==n?", "+i:"")+("FROM_END"==o||"FROM_START"==o?", "+e:"")+")"}return[t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists_sort=function(e){var t=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_FUNCTION_CALL)||"[]",n="1"===e.getFieldValue("DIRECTION")?1:-1;e=e.getFieldValue("TYPE");return[t+".slice().sort("+b.JavaScript.provideFunction_("listsGetSortCompare",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+e+'", '+n+"))",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists_split=function(e){var t=b.JavaScript.valueToCode(e,"INPUT",b.JavaScript.ORDER_MEMBER),n=b.JavaScript.valueToCode(e,"DELIM",b.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(e=e.getFieldValue("MODE")))t=t||"''",e="split";else{if("JOIN"!=e)throw Error("Unknown mode: "+e);t=t||"[]",e="join"}return[t+"."+e+"("+n+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.lists_reverse=function(e){return[(b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.logic={};b.JavaScript.controls_if=function(e){var t=0,n="";b.JavaScript.STATEMENT_PREFIX&&(n+=b.JavaScript.injectId(b.JavaScript.STATEMENT_PREFIX,e));do{var o=b.JavaScript.valueToCode(e,"IF"+t,b.JavaScript.ORDER_NONE)||"false",i=b.JavaScript.statementToCode(e,"DO"+t)}while(b.JavaScript.STATEMENT_SUFFIX&&(i=b.JavaScript.prefixLines(b.JavaScript.injectId(b.JavaScript.STATEMENT_SUFFIX,e),b.JavaScript.INDENT)+i),n+=(0<t?" else ":"")+"if ("+o+") {\n"+i+"}",++t,e.getInput("IF"+t));(e.getInput("ELSE")||b.JavaScript.STATEMENT_SUFFIX)&&(i=b.JavaScript.statementToCode(e,"ELSE"),b.JavaScript.STATEMENT_SUFFIX&&(i=b.JavaScript.prefixLines(b.JavaScript.injectId(b.JavaScript.STATEMENT_SUFFIX,e),b.JavaScript.INDENT)+i),n+=" else {\n"+i+"}");return n+"\n"};b.JavaScript.controls_ifelse=b.JavaScript.controls_if;b.JavaScript.logic_compare=function(e){var t={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],n="=="==t||"!="==t?b.JavaScript.ORDER_EQUALITY:b.JavaScript.ORDER_RELATIONAL;return[(b.JavaScript.valueToCode(e,"A",n)||"0")+" "+t+" "+(e=b.JavaScript.valueToCode(e,"B",n)||"0"),n]};b.JavaScript.logic_operation=function(e){var t="AND"==e.getFieldValue("OP")?"&&":"||",n="&&"==t?b.JavaScript.ORDER_LOGICAL_AND:b.JavaScript.ORDER_LOGICAL_OR,o=b.JavaScript.valueToCode(e,"A",n);e=b.JavaScript.valueToCode(e,"B",n);if(o||e){var i="&&"==t?"true":"false",o=o||i;e=e||i}else e=o="false";return[o+" "+t+" "+e,n]};b.JavaScript.logic_negate=function(e){var t=b.JavaScript.ORDER_LOGICAL_NOT;return["!"+(b.JavaScript.valueToCode(e,"BOOL",t)||"true"),t]};b.JavaScript.logic_boolean=function(e){return["TRUE"==e.getFieldValue("BOOL")?"true":"false",b.JavaScript.ORDER_ATOMIC]};b.JavaScript.logic_null=function(e){return["null",b.JavaScript.ORDER_ATOMIC]};b.JavaScript.logic_ternary=function(e){return[(b.JavaScript.valueToCode(e,"IF",b.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(b.JavaScript.valueToCode(e,"THEN",b.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(e=b.JavaScript.valueToCode(e,"ELSE",b.JavaScript.ORDER_CONDITIONAL)||"null"),b.JavaScript.ORDER_CONDITIONAL]};b.JavaScript.loops={};b.JavaScript.controls_repeat_ext=function(e){var t=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):b.JavaScript.valueToCode(e,"TIMES",b.JavaScript.ORDER_ASSIGNMENT)||"0",n=b.JavaScript.statementToCode(e,"DO"),n=b.JavaScript.addLoopTrap(n,e);e="";var o=b.JavaScript.variableDB_.getDistinctName("count",b.Variables.NAME_TYPE),i=t;t.match(/^\w+$/)||b.isNumber(t)||(e+="var "+(i=b.JavaScript.variableDB_.getDistinctName("repeat_end",b.Variables.NAME_TYPE))+" = "+t+";\n");return e+"for (var "+o+" = 0; "+o+" < "+i+"; "+o+"++) {\n"+n+"}\n"};b.JavaScript.controls_repeat=b.JavaScript.controls_repeat_ext;b.JavaScript.controls_whileUntil=function(e){var t="UNTIL"==e.getFieldValue("MODE"),n=b.JavaScript.valueToCode(e,"BOOL",t?b.JavaScript.ORDER_LOGICAL_NOT:b.JavaScript.ORDER_NONE)||"false",o=b.JavaScript.statementToCode(e,"DO");t&&(n="!"+n);return"while ("+n+") {\n"+(o=b.JavaScript.addLoopTrap(o,e))+"}\n"};b.JavaScript.controls_for=function(e){var t=b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE),n=b.JavaScript.valueToCode(e,"FROM",b.JavaScript.ORDER_ASSIGNMENT)||"0",o=b.JavaScript.valueToCode(e,"TO",b.JavaScript.ORDER_ASSIGNMENT)||"0",i=b.JavaScript.valueToCode(e,"BY",b.JavaScript.ORDER_ASSIGNMENT)||"1",r=b.JavaScript.statementToCode(e,"DO"),r=b.JavaScript.addLoopTrap(r,e);if(b.isNumber(n)&&b.isNumber(o)&&b.isNumber(i)){var s=Number(n)<=Number(o);e="for ("+t+" = "+n+"; "+t+(s?" <= ":" >= ")+o+"; "+t;e=(1==(t=Math.abs(Number(i)))?e+(s?"++":"--"):e+(s?" += ":" -= ")+t)+") {\n"+r+"}\n"}else e="",(s=n).match(/^\w+$/)||b.isNumber(n)||(e+="var "+(s=b.JavaScript.variableDB_.getDistinctName(t+"_start",b.Variables.NAME_TYPE))+" = "+n+";\n"),(n=o).match(/^\w+$/)||b.isNumber(o)||(e+="var "+(n=b.JavaScript.variableDB_.getDistinctName(t+"_end",b.Variables.NAME_TYPE))+" = "+o+";\n"),e+="var "+(o=b.JavaScript.variableDB_.getDistinctName(t+"_inc",b.Variables.NAME_TYPE))+" = ",e=(e=b.isNumber(i)?e+(Math.abs(i)+";\n"):e+"Math.abs("+i+");\n")+"if ("+s+" > "+n+") {\n"+(b.JavaScript.INDENT+o)+" = -"+o+";\n",e+="}\n",e+="for ("+t+" = "+s+"; "+o+" >= 0 ? "+t+" <= "+n+" : "+t+" >= "+n+"; "+t+" += "+o+") {\n"+r+"}\n";return e};b.JavaScript.controls_forEach=function(e){var t=b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE),n=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_ASSIGNMENT)||"[]",o=b.JavaScript.statementToCode(e,"DO"),o=b.JavaScript.addLoopTrap(o,e);e="";var i=n;n.match(/^\w+$/)||(e+="var "+(i=b.JavaScript.variableDB_.getDistinctName(t+"_list",b.Variables.NAME_TYPE))+" = "+n+";\n");return e+"for (var "+(n=b.JavaScript.variableDB_.getDistinctName(t+"_index",b.Variables.NAME_TYPE))+" in "+i+") {\n"+(b.JavaScript.INDENT+t+" = "+i+"["+n+"];\n"+o)+"}\n"};b.JavaScript.controls_flow_statements=function(e){var t="";b.JavaScript.STATEMENT_PREFIX&&(t+=b.JavaScript.injectId(b.JavaScript.STATEMENT_PREFIX,e));b.JavaScript.STATEMENT_SUFFIX&&(t+=b.JavaScript.injectId(b.JavaScript.STATEMENT_SUFFIX,e));if(b.JavaScript.STATEMENT_PREFIX){var n=b.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(e);n&&!n.suppressPrefixSuffix&&(t+=b.JavaScript.injectId(b.JavaScript.STATEMENT_PREFIX,n))}switch(e.getFieldValue("FLOW")){case"BREAK":return t+"break;\n";case"CONTINUE":return t+"continue;\n"}throw Error("Unknown flow statement.")};b.JavaScript.math={};b.JavaScript.math_number=function(e){return[e=Number(e.getFieldValue("NUM")),0<=e?b.JavaScript.ORDER_ATOMIC:b.JavaScript.ORDER_UNARY_NEGATION]};b.JavaScript.math_arithmetic=function(e){var t=(n={ADD:[" + ",b.JavaScript.ORDER_ADDITION],MINUS:[" - ",b.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",b.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",b.JavaScript.ORDER_DIVISION],POWER:[null,b.JavaScript.ORDER_COMMA]}[e.getFieldValue("OP")])[0],n=n[1],o=b.JavaScript.valueToCode(e,"A",n)||"0";e=b.JavaScript.valueToCode(e,"B",n)||"0";return t?[o+t+e,n]:["Math.pow("+o+", "+e+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.math_single=function(e){var t=e.getFieldValue("OP");if("NEG"==t)return"-"==(e=b.JavaScript.valueToCode(e,"NUM",b.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,b.JavaScript.ORDER_UNARY_NEGATION];e="SIN"==t||"COS"==t||"TAN"==t?b.JavaScript.valueToCode(e,"NUM",b.JavaScript.ORDER_DIVISION)||"0":b.JavaScript.valueToCode(e,"NUM",b.JavaScript.ORDER_NONE)||"0";switch(t){case"ABS":var n="Math.abs("+e+")";break;case"ROOT":n="Math.sqrt("+e+")";break;case"LN":n="Math.log("+e+")";break;case"EXP":n="Math.exp("+e+")";break;case"POW10":n="Math.pow(10,"+e+")";break;case"ROUND":n="Math.round("+e+")";break;case"ROUNDUP":n="Math.ceil("+e+")";break;case"ROUNDDOWN":n="Math.floor("+e+")";break;case"SIN":n="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":n="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":n="Math.tan("+e+" / 180 * Math.PI)"}if(n)return[n,b.JavaScript.ORDER_FUNCTION_CALL];switch(t){case"LOG10":n="Math.log("+e+") / Math.log(10)";break;case"ASIN":n="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":n="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":n="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+t)}return[n,b.JavaScript.ORDER_DIVISION]};b.JavaScript.math_constant=function(e){return{PI:["Math.PI",b.JavaScript.ORDER_MEMBER],E:["Math.E",b.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",b.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",b.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",b.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",b.JavaScript.ORDER_ATOMIC]}[e.getFieldValue("CONSTANT")]};b.JavaScript.math_number_property=function(e){var t=b.JavaScript.valueToCode(e,"NUMBER_TO_CHECK",b.JavaScript.ORDER_MODULUS)||"0",n=e.getFieldValue("PROPERTY");if("PRIME"==n)return[b.JavaScript.provideFunction_("mathIsPrime",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+t+")",b.JavaScript.ORDER_FUNCTION_CALL];switch(n){case"EVEN":var o=t+" % 2 == 0";break;case"ODD":o=t+" % 2 == 1";break;case"WHOLE":o=t+" % 1 == 0";break;case"POSITIVE":o=t+" > 0";break;case"NEGATIVE":o=t+" < 0";break;case"DIVISIBLE_BY":o=t+" % "+(e=b.JavaScript.valueToCode(e,"DIVISOR",b.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[o,b.JavaScript.ORDER_EQUALITY]};b.JavaScript.math_change=function(e){var t=b.JavaScript.valueToCode(e,"DELTA",b.JavaScript.ORDER_ADDITION)||"0";return(e=b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE))+" = (typeof "+e+" == 'number' ? "+e+" : 0) + "+t+";\n"};b.JavaScript.math_round=b.JavaScript.math_single;b.JavaScript.math_trig=b.JavaScript.math_single;b.JavaScript.math_on_list=function(e){var t=e.getFieldValue("OP");switch(t){case"SUM":e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_MEMBER)||"[]";e+=".reduce(function(x, y) {return x + y;})";break;case"MIN":e="Math.min.apply(null, "+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_COMMA)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_COMMA)||"[]")+")";break;case"AVERAGE":e=(t=b.JavaScript.provideFunction_("mathMean",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":e=(t=b.JavaScript.provideFunction_("mathMedian",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":e=(t=b.JavaScript.provideFunction_("mathModes",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":e=(t=b.JavaScript.provideFunction_("mathStandardDeviation",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":e=(t=b.JavaScript.provideFunction_("mathRandomList",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(e=b.JavaScript.valueToCode(e,"LIST",b.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+t)}return[e,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.math_modulo=function(e){return[(b.JavaScript.valueToCode(e,"DIVIDEND",b.JavaScript.ORDER_MODULUS)||"0")+" % "+(e=b.JavaScript.valueToCode(e,"DIVISOR",b.JavaScript.ORDER_MODULUS)||"0"),b.JavaScript.ORDER_MODULUS]};b.JavaScript.math_constrain=function(e){return["Math.min(Math.max("+(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_COMMA)||"0")+", "+(b.JavaScript.valueToCode(e,"LOW",b.JavaScript.ORDER_COMMA)||"0")+"), "+(e=b.JavaScript.valueToCode(e,"HIGH",b.JavaScript.ORDER_COMMA)||"Infinity")+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.math_random_int=function(e){var t=b.JavaScript.valueToCode(e,"FROM",b.JavaScript.ORDER_COMMA)||"0";e=b.JavaScript.valueToCode(e,"TO",b.JavaScript.ORDER_COMMA)||"0";return[b.JavaScript.provideFunction_("mathRandomInt",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+t+", "+e+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.math_random_float=function(e){return["Math.random()",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.math_atan2=function(e){var t=b.JavaScript.valueToCode(e,"X",b.JavaScript.ORDER_COMMA)||"0";return["Math.atan2("+(b.JavaScript.valueToCode(e,"Y",b.JavaScript.ORDER_COMMA)||"0")+", "+t+") / Math.PI * 180",b.JavaScript.ORDER_DIVISION]};b.JavaScript.procedures={};b.JavaScript.procedures_defreturn=function(e){var t=b.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),b.Procedures.NAME_TYPE),n="";b.JavaScript.STATEMENT_PREFIX&&(n+=b.JavaScript.injectId(b.JavaScript.STATEMENT_PREFIX,e));b.JavaScript.STATEMENT_SUFFIX&&(n+=b.JavaScript.injectId(b.JavaScript.STATEMENT_SUFFIX,e));n=n&&b.JavaScript.prefixLines(n,b.JavaScript.INDENT);var o="";b.JavaScript.INFINITE_LOOP_TRAP&&(o=b.JavaScript.prefixLines(b.JavaScript.injectId(b.JavaScript.INFINITE_LOOP_TRAP,e),b.JavaScript.INDENT));var i=b.JavaScript.statementToCode(e,"STACK"),r=b.JavaScript.valueToCode(e,"RETURN",b.JavaScript.ORDER_NONE)||"",s="";i&&r&&(s=n);r=r&&b.JavaScript.INDENT+"return "+r+";\n";for(var a=[],l=0;l<e.arguments_.length;l++)a[l]=b.JavaScript.variableDB_.getName(e.arguments_[l],b.Variables.NAME_TYPE);n="function "+t+"("+a.join(", ")+") {\n"+n+o+i+s+r+"}";n=b.JavaScript.scrub_(e,n);b.JavaScript.definitions_["%"+t]=n;return null};b.JavaScript.procedures_defnoreturn=b.JavaScript.procedures_defreturn;b.JavaScript.procedures_callreturn=function(e){for(var t=b.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),b.Procedures.NAME_TYPE),n=[],o=0;o<e.arguments_.length;o++)n[o]=b.JavaScript.valueToCode(e,"ARG"+o,b.JavaScript.ORDER_COMMA)||"null";return[t+"("+n.join(", ")+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.procedures_callnoreturn=function(e){return b.JavaScript.procedures_callreturn(e)[0]+";\n"};b.JavaScript.procedures_ifreturn=function(e){var t="if ("+(b.JavaScript.valueToCode(e,"CONDITION",b.JavaScript.ORDER_NONE)||"false")+") {\n";b.JavaScript.STATEMENT_SUFFIX&&(t+=b.JavaScript.prefixLines(b.JavaScript.injectId(b.JavaScript.STATEMENT_SUFFIX,e),b.JavaScript.INDENT));e.hasReturnValue_?(e=b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_NONE)||"null",t+=b.JavaScript.INDENT+"return "+e+";\n"):t+=b.JavaScript.INDENT+"return;\n";return t+"}\n"};b.JavaScript.texts={};b.JavaScript.text=function(e){return[b.JavaScript.quote_(e.getFieldValue("TEXT")),b.JavaScript.ORDER_ATOMIC]};b.JavaScript.text_multiline=function(e){(e=b.JavaScript.multiline_quote_(e.getFieldValue("TEXT"))).includes("\n")&&(e="("+e+")");return[e,b.JavaScript.ORDER_ATOMIC]};b.JavaScript.text.forceString_=function(e){return b.JavaScript.text.forceString_.strRegExp.test(e)?e:"String("+e+")"};b.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/;b.JavaScript.text_join=function(e){switch(e.itemCount_){case 0:return["''",b.JavaScript.ORDER_ATOMIC];case 1:return e=b.JavaScript.valueToCode(e,"ADD0",b.JavaScript.ORDER_NONE)||"''",[e=b.JavaScript.text.forceString_(e),b.JavaScript.ORDER_FUNCTION_CALL];case 2:var t=b.JavaScript.valueToCode(e,"ADD0",b.JavaScript.ORDER_NONE)||"''";e=b.JavaScript.valueToCode(e,"ADD1",b.JavaScript.ORDER_NONE)||"''";return[e=b.JavaScript.text.forceString_(t)+" + "+b.JavaScript.text.forceString_(e),b.JavaScript.ORDER_ADDITION];default:t=Array(e.itemCount_);for(var n=0;n<e.itemCount_;n++)t[n]=b.JavaScript.valueToCode(e,"ADD"+n,b.JavaScript.ORDER_COMMA)||"''";return[e="["+t.join(",")+"].join('')",b.JavaScript.ORDER_FUNCTION_CALL]}};b.JavaScript.text_append=function(e){var t=b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE);e=b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_NONE)||"''";return t+" += "+b.JavaScript.text.forceString_(e)+";\n"};b.JavaScript.text_length=function(e){return[(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_FUNCTION_CALL)||"''")+".length",b.JavaScript.ORDER_MEMBER]};b.JavaScript.text_isEmpty=function(e){return["!"+(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_MEMBER)||"''")+".length",b.JavaScript.ORDER_LOGICAL_NOT]};b.JavaScript.text_indexOf=function(e){var t="FIRST"==e.getFieldValue("END")?"indexOf":"lastIndexOf",n=b.JavaScript.valueToCode(e,"FIND",b.JavaScript.ORDER_NONE)||"''",t=(b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_MEMBER)||"''")+"."+t+"("+n+")";return e.workspace.options.oneBasedIndex?[t+" + 1",b.JavaScript.ORDER_ADDITION]:[t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.text_charAt=function(e){var t=e.getFieldValue("WHERE")||"FROM_START",n=b.JavaScript.valueToCode(e,"VALUE","RANDOM"==t?b.JavaScript.ORDER_NONE:b.JavaScript.ORDER_MEMBER)||"''";switch(t){case"FIRST":return[n+".charAt(0)",b.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[n+".slice(-1)",b.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[n+".charAt("+(e=b.JavaScript.getAdjusted(e,"AT"))+")",b.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[n+".slice("+(e=b.JavaScript.getAdjusted(e,"AT",1,!0))+").charAt(0)",b.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[b.JavaScript.provideFunction_("textRandomLetter",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+n+")",b.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")};b.JavaScript.text.getIndex_=function(e,t,n){return"FIRST"==t?"0":"FROM_END"==t?e+".length - 1 - "+n:"LAST"==t?e+".length - 1":n};b.JavaScript.text_getSubstring=function(e){var t=b.JavaScript.valueToCode(e,"STRING",b.JavaScript.ORDER_FUNCTION_CALL)||"''",n=e.getFieldValue("WHERE1"),o=e.getFieldValue("WHERE2");if("FIRST"!=n||"LAST"!=o)if(t.match(/^'?\w+'?$/)||"FROM_END"!=n&&"LAST"!=n&&"FROM_END"!=o&&"LAST"!=o){switch(n){case"FROM_START":var i=b.JavaScript.getAdjusted(e,"AT1");break;case"FROM_END":i=t+".length - "+(i=b.JavaScript.getAdjusted(e,"AT1",1,!1,b.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(o){case"FROM_START":e=b.JavaScript.getAdjusted(e,"AT2",1);break;case"FROM_END":e=t+".length - "+(e=b.JavaScript.getAdjusted(e,"AT2",0,!1,b.JavaScript.ORDER_SUBTRACTION));break;case"LAST":e=t+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}t=t+".slice("+i+", "+e+")"}else{i=b.JavaScript.getAdjusted(e,"AT1");e=b.JavaScript.getAdjusted(e,"AT2");var r=b.JavaScript.text.getIndex_,s={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},t=b.JavaScript.provideFunction_("subsequence"+s[n]+s[o],["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==n||"FROM_START"==n?", at1":"")+("FROM_END"==o||"FROM_START"==o?", at2":"")+") {","  var start = "+r("sequence",n,"at1")+";","  var end = "+r("sequence",o,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+t+("FROM_END"==n||"FROM_START"==n?", "+i:"")+("FROM_END"==o||"FROM_START"==o?", "+e:"")+")"}return[t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.text_changeCase=function(e){var t={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];e=b.JavaScript.valueToCode(e,"TEXT",t?b.JavaScript.ORDER_MEMBER:b.JavaScript.ORDER_NONE)||"''";return[t?e+t:b.JavaScript.provideFunction_("textToTitleCase",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+e+")",b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.text_trim=function(e){var t={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_MEMBER)||"''")+t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.text_print=function(e){return"window.alert("+(b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_NONE)||"''")+");\n"};b.JavaScript.text_prompt_ext=function(e){var t="window.prompt("+(e.getField("TEXT")?b.JavaScript.quote_(e.getFieldValue("TEXT")):b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_NONE)||"''")+")";"NUMBER"==e.getFieldValue("TYPE")&&(t="Number("+t+")");return[t,b.JavaScript.ORDER_FUNCTION_CALL]};b.JavaScript.text_prompt=b.JavaScript.text_prompt_ext;b.JavaScript.text_count=function(e){var t=b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_MEMBER)||"''";e=b.JavaScript.valueToCode(e,"SUB",b.JavaScript.ORDER_NONE)||"''";return[b.JavaScript.provideFunction_("textCount",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+t+", "+e+")",b.JavaScript.ORDER_SUBTRACTION]};b.JavaScript.text_replace=function(e){var t=b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_MEMBER)||"''",n=b.JavaScript.valueToCode(e,"FROM",b.JavaScript.ORDER_NONE)||"''";e=b.JavaScript.valueToCode(e,"TO",b.JavaScript.ORDER_NONE)||"''";return[b.JavaScript.provideFunction_("textReplace",["function "+b.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+t+", "+n+", "+e+")",b.JavaScript.ORDER_MEMBER]};b.JavaScript.text_reverse=function(e){return[(b.JavaScript.valueToCode(e,"TEXT",b.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",b.JavaScript.ORDER_MEMBER]};b.JavaScript.variables={};b.JavaScript.variables_get=function(e){return[b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE),b.JavaScript.ORDER_ATOMIC]};b.JavaScript.variables_set=function(e){var t=b.JavaScript.valueToCode(e,"VALUE",b.JavaScript.ORDER_ASSIGNMENT)||"0";return b.JavaScript.variableDB_.getName(e.getFieldValue("VAR"),b.Variables.NAME_TYPE)+" = "+t+";\n"};b.JavaScript.variablesDynamic={};b.JavaScript.variables_get_dynamic=b.JavaScript.variables_get;b.JavaScript.variables_set_dynamic=b.JavaScript.variables_set;return b});this["this.v3d"]=this["this.v3d"]||{};this.v3d.PE=function(exports,v3d,ace,createjs,Blockly,interact){"use strict";v3d=v3d&&Object.prototype.hasOwnProperty.call(v3d,"default")?v3d.default:v3d;ace=ace&&Object.prototype.hasOwnProperty.call(ace,"default")?ace.default:ace;createjs=createjs&&Object.prototype.hasOwnProperty.call(createjs,"default")?createjs.default:createjs;Blockly=Blockly&&Object.prototype.hasOwnProperty.call(Blockly,"default")?Blockly.default:Blockly;interact=interact&&Object.prototype.hasOwnProperty.call(interact,"default")?interact.default:interact;function getBoundingClientRectFixed(e){e=e.getBoundingClientRect();-1!==navigator.userAgent.indexOf("Chrome")&&(e={bottom:e.bottom/window.devicePixelRatio,height:e.height/window.devicePixelRatio,left:e.left/window.devicePixelRatio,right:e.right/window.devicePixelRatio,top:e.top/window.devicePixelRatio,width:e.width/window.devicePixelRatio,x:e.x/window.devicePixelRatio,y:e.y/window.devicePixelRatio});return e}var _setPosition=ace.require("ace/tooltip").Tooltip.prototype.setPosition;ace.require("ace/tooltip").Tooltip.prototype.setPosition=function(e,t){var n=_tabCollection.getActiveWS().scale,o=getBoundingClientRectFixed(this.$parentNode);_setPosition.call(this,(e-o.x)/n,(t-o.y)/n)};ace.require("ace/virtual_renderer").VirtualRenderer.prototype.screenToTextCoordinates=function(e,t){var n,o=_tabCollection.getActiveWS().scale;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left;t=i[0]}else n=getBoundingClientRectFixed(this.scroller);i=e+this.scrollLeft-n.left-this.$padding*o,e=i/this.characterWidth/o,e=this.$blockCursor?Math.floor(e):Math.round(e),o=Math.floor((t+this.scrollTop*o-n.top)/this.lineHeight/o);return this.session.screenToDocumentPosition(o,Math.max(e,0),i)};ace.require("ace/layer/gutter").Gutter.prototype.getRegion=function(e){var t=_tabCollection.getActiveWS().scale,n=this.$padding||this.$computePadding(),o=getBoundingClientRectFixed(this.element);return e.x<n.left*t+o.left?"markers":this.$showFoldWidgets&&e.x>o.right-n.right*t?"foldWidgets":void 0};var BLOCK_BRING_TO_FRONT="block_bring_to_front",BLOCK_DRAG_HIDE="block_drag_hide",BLOCK_DRAG_SHOW="block_drag_show",BLOCK_READY="block_ready",WS_DRAG_HIDE="ws_drag_hide",WS_DRAG_SHOW="ws_drag_show",BlockBringToFront=function(e){if(e){BlockBringToFront.superClass_.constructor.call(this,e);this.recordUndo=!1}};Blockly.utils.object.inherits(BlockBringToFront,Blockly.Events.BlockBase);Object.assign(BlockBringToFront.prototype,{type:BLOCK_BRING_TO_FRONT});var BlockDragHide=function(e){if(e){BlockDragHide.superClass_.constructor.call(this,e);this.recordUndo=!1}};Blockly.utils.object.inherits(BlockDragHide,Blockly.Events.BlockBase);Object.assign(BlockDragHide.prototype,{type:BLOCK_DRAG_HIDE});var BlockDragShow=function(e){if(e){BlockDragShow.superClass_.constructor.call(this,e);this.recordUndo=!1}};Blockly.utils.object.inherits(BlockDragShow,Blockly.Events.BlockBase);Object.assign(BlockDragShow.prototype,{type:BLOCK_DRAG_SHOW});var Ready=function(e){e&&Ready.superClass_.constructor.call(this,e)};Blockly.utils.object.inherits(Ready,Blockly.Events.Create);Object.assign(Ready.prototype,{type:BLOCK_READY});var WsDragHide=function(e){WsDragHide.superClass_.constructor.call(this);this.workspaceId=e.id;this.recordUndo=!1};Blockly.utils.object.inherits(WsDragHide,Blockly.Events.Abstract);Object.assign(WsDragHide.prototype,{type:WS_DRAG_HIDE});var WsDragShow=function(e){WsDragShow.superClass_.constructor.call(this);this.workspaceId=e.id;this.recordUndo=!1};Blockly.utils.object.inherits(WsDragShow,Blockly.Events.Abstract);Object.assign(WsDragShow.prototype,{type:WS_DRAG_SHOW});var Events={BlockBringToFront:BlockBringToFront,BlockDragHide:BlockDragHide,BlockDragShow:BlockDragShow,Ready:Ready,WsDragHide:WsDragHide,WsDragShow:WsDragShow,BLOCK_BRING_TO_FRONT:BLOCK_BRING_TO_FRONT,BLOCK_DRAG_HIDE:BLOCK_DRAG_HIDE,BLOCK_DRAG_SHOW:BLOCK_DRAG_SHOW,BLOCK_READY:BLOCK_READY,WS_DRAG_HIDE:WS_DRAG_HIDE,WS_DRAG_SHOW:WS_DRAG_SHOW},Dropdown=function(e,t,n){Dropdown.superClass_.constructor.call(this,e,t,n)};Blockly.utils.object.inherits(Dropdown,Blockly.FieldDropdown);Object.assign(Dropdown.prototype,{doClassValidation_:function(e){return e},doValueUpdate_:function(e){this.selectedIndex_=-1;Dropdown.superClass_.doValueUpdate_.call(this,e)}});function NumberSlider(e,t,n,o,i,r,s){NumberSlider.superClass_.constructor.call(this,e,t,n,i,r,s);this.step_=void 0===o?.1:o}Blockly.utils.object.inherits(NumberSlider,Blockly.FieldNumber);Object.assign(NumberSlider,{fromJson:function(e){return new NumberSlider(e.value,void 0,void 0,void 0,void 0,void 0,e)}});Object.assign(NumberSlider.prototype,{fromXml:function(e){NumberSlider.superClass_.fromXml.call(this,e);this.setConstraints(e.getAttribute("min"),e.getAttribute("max"));this.setValue(e.textContent);this.step_=Number(e.getAttribute("step"))},toXml:function(e){(e=NumberSlider.superClass_.toXml.call(this,e)).setAttribute("min",this.getMin());e.setAttribute("max",this.getMax());e.setAttribute("step",this.step_);return e},render_:function(){NumberSlider.superClass_.render_.call(this);if(this.slider){var e=this.doClassValidation_(this.htmlInput_.value);null!==e&&(this.slider.value=e)}},showEditor_:function(){NumberSlider.superClass_.showEditor_.call(this);this.editor_=this.dropdownCreate_();Blockly.DropDownDiv.getContentDiv().appendChild(this.editor_);Blockly.DropDownDiv.setColour("white","silver");Blockly.DropDownDiv.showPositionedByField(this,this.disposeWidget_.bind(this))},dropdownCreate_:function(){var t=this,e=document.createElement("div");Blockly.utils.dom.addClass(e,"puzzlesNumberSlider");var n=document.createElement("span");n.innerHTML=this.getMin();var o=this.slider=document.createElement("input");o.type="range";o.min=this.getMin();o.max=this.getMax();o.step=this.step_;o.value=this.getValue();o.addEventListener("input",function(e){t.setEditorValue_(o.value)});var i=document.createElement("span");i.innerHTML=this.getMax();e.appendChild(n);e.appendChild(o);e.appendChild(i);return e},disposeWidget_:function(){}});Blockly.Css.register([".puzzlesNumberSlider span {","    vertical-align: middle;","    font-family: sans-serif;","    font-size: 11pt;","}",".puzzlesNumberSlider input[type=range] {","    -webkit-appearance: none;","    margin: 10px 5px;","    vertical-align: middle;","}",".puzzlesNumberSlider input[type=range]:focus {","    outline: none;","}",".puzzlesNumberSlider input[type=range]::-webkit-slider-runnable-track {","    width: 100%;","    height: 5px;","    cursor: pointer;","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","    background: #ffffff;","    border-radius: 0px;","    border: 1px solid #000000;","}",".puzzlesNumberSlider input[type=range]::-webkit-slider-thumb {","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","    border: 1px solid #000000;","    height: 20px;","    width: 8px;","    border-radius: 0px;","    background: #c8c8c8;","    cursor: pointer;","    -webkit-appearance: none;","    margin-top: -8.5px;","}",".puzzlesNumberSlider input[type=range]:focus::-webkit-slider-runnable-track {","    background: #ffffff;","}",".puzzlesNumberSlider input[type=range]::-moz-range-track {","    width: 100%;","    height: 5px;","    cursor: pointer;","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","    background: #ffffff;","    border-radius: 0px;","    border: 1px solid #000000;","}",".puzzlesNumberSlider input[type=range]::-moz-range-thumb {","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","    border: 1px solid #000000;","    height: 20px;","    width: 8px;","    border-radius: 0px;","    background: #c8c8c8;","    cursor: pointer;","}",".puzzlesNumberSlider input[type=range]::-ms-track {","    width: 100%;","    height: 5px;","    cursor: pointer;","    background: transparent;","    border-color: transparent;","    color: transparent;","}",".puzzlesNumberSlider input[type=range]::-ms-fill-lower {","    background: #f2f2f2;","    border: 1px solid #000000;","    border-radius: 0px;","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","}",".puzzlesNumberSlider input[type=range]::-ms-fill-upper {","    background: #ffffff;","    border: 1px solid #000000;","    border-radius: 0px;","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","}",".puzzlesNumberSlider input[type=range]::-ms-thumb {","    box-shadow: 0px 0px 0px #000000, 0px 0px 0px #0d0d0d;","    border: 1px solid #000000;","    height: 20px;","    width: 8px;","    border-radius: 0px;","    background: #c8c8c8;","    cursor: pointer;","    height: 5px;","}",".puzzlesNumberSlider input[type=range]:focus::-ms-fill-lower {","    background: #ffffff;","}",".puzzlesNumberSlider input[type=range]:focus::-ms-fill-upper {","    background: #ffffff;","}"]);Blockly.fieldRegistry.register("number_slider",NumberSlider);function MultilineInputAdvanced(e,t,n){this.editor_=null;this.foreignObj_=null;this.scheduleAsyncRefresh=!0;null==e&&(e="");MultilineInputAdvanced.superClass_.constructor.call(this,e,t,n)}Blockly.utils.object.inherits(MultilineInputAdvanced,Blockly.Field);Object.assign(MultilineInputAdvanced.prototype,{SERIALIZABLE:!0,initView:function(){this.foreignObj_=Blockly.utils.dom.createSvgElement("foreignObject",{class:"multilineInputAdvanced__foreignObject"},this.fieldGroup_);var e=document.createElement("div");e.setAttribute("xmlns","http://www.w3.org/1999/xhtml");e.classList.add("multilineInputAdvanced__editorRoot");e.addEventListener("pointerdown",function(e){Blockly.hideChaff();e.stopPropagation()});e.addEventListener("pointerover",function(e){e.stopPropagation()});this.foreignObj_.appendChild(e);this.editor_=ace.edit(e,{fontSize:"11pt",maxLines:40,minLines:3,scrollSpeed:1.5,tabSize:4});this.editor_.session.setValue(this.getValue());this.editor_.getSession().on("change",function(e,t){this.setValue(this.editor_.getValue())}.bind(this));this.editor_.renderer.on("afterRender",function(){this.forceRerender();e.classList.add("u-static")}.bind(this))},render_:function(){MultilineInputAdvanced.superClass_.render_.call(this);this.updateSize_();if(this.scheduleAsyncRefresh){this.scheduleAsyncRefresh=!1;setTimeout(function(){this.forceRerender()}.bind(this),0)}},updateSize_:function(){this.size_.width=MultilineInputAdvanced.EDITOR_DEFAULT_WIDTH;var e=this.editor_.renderer.getOption("minLines"),t=this.editor_.renderer.getOption("maxLines"),t=Math.min(Math.max(this.editor_.getSession().getScreenLength(),e),t);this.size_.height=t*this.editor_.renderer.lineHeight+this.editor_.renderer.scrollBarH.getHeight();this.foreignObj_.setAttribute("width",this.size_.width);this.foreignObj_.setAttribute("height",this.size_.height)},setHighlighting:function(e){this.editor_.session.setMode("ace/mode/".concat(e));this.editor_.session.setOption("useWorker","css"!=e)},fixScrollBars:function(){var e=this.editor_.renderer.scrollBarH;e.element.scrollLeft=e.scrollLeft;e=this.editor_.renderer.scrollBarV;e.element.scrollTop=e.scrollTop}});Object.assign(MultilineInputAdvanced,{EDITOR_DEFAULT_WIDTH:735,fromJson:function(e){return new MultilineInputAdvanced(Blockly.utils.replaceMessageReferences(e.text),void 0,e)}});Blockly.Css.register(["\n    /* This makes the editor visible inside the 1x1 sized foreign object element */\n    .multilineInputAdvanced__foreignObject {\n        overflow: visible;\n    }\n\n    .blocklyDisabled > .blocklyEditableText > .multilineInputAdvanced__foreignObject {\n        opacity: 0.5;\n    }\n\n    .u-static {\n        position: static !important;\n    }\n"]);Blockly.fieldRegistry.register("multilineinput_advanced",MultilineInputAdvanced);var Fields={Dropdown:Dropdown,MultilineInputAdvanced:MultilineInputAdvanced,NumberSlider:NumberSlider};function SimpleIcon(e){SimpleIcon.superClass_.constructor.call(this,e);this.imageElement_=null;this.imgContainer_=null}Blockly.utils.object.inherits(SimpleIcon,Blockly.Icon);Object.assign(SimpleIcon.prototype,{OFFSET_X:3,OFFSET_Y:3,setVisible:function(e){},drawIcon_:function(e){Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},e);this.imgContainer_=Blockly.utils.dom.createSvgElement("g",{transform:"translate(".concat(this.OFFSET_X,", ").concat(this.OFFSET_Y,")")},e);null!==this.imageElement_&&this.imgContainer_.appendChild(this.imageElement_)},setImageElement:function(e){if(this.imgContainer_){null!==this.imageElement_&&this.imgContainer_.removeChild(this.imageElement_);this.imgContainer_.appendChild(e)}this.imageElement_=e},getIconGroupElement:function(){return this.iconGroup_}});function TooltipIcon(e){TooltipIcon.superClass_.constructor.call(this,e);this.tooltip=""}Blockly.utils.object.inherits(TooltipIcon,SimpleIcon);Object.assign(TooltipIcon.prototype,{createIcon:function(){if(!this.iconGroup_){SimpleIcon.prototype.createIcon.call(this);Blockly.Tooltip.bindMouseEvents(this.iconGroup_);this.setTooltip(this.tooltip)}},setTooltip:function(e){this.tooltip=e;this.iconGroup_&&(this.iconGroup_.tooltip=e)}});var Icons={SimpleIcon:SimpleIcon,TooltipIcon:TooltipIcon};function ProxyDefBlock(e,n){return new Proxy(e,{get:function(e,t){switch(t){case"isProxyProcDefBlock_":return!0;case"proxyTarget_":return e;case"svgGroup_":return;case"isMovable":return function(){return!1};case"getChildren":return function(){return[]};case"workspace":return n;default:return e[t]}}})}function stripWorkspaceProxies(t){return t.getTopBlocks().filter(function(e){if(e.isProxyProcDefBlock_){t.removeTopBlock(e);return!0}return!1})}var Procedures={ProxyDefBlock:ProxyDefBlock,stripWorkspaceProxies:stripWorkspaceProxies};Blockly.Msg.CLEAN_UP="Straighten Puzzles Up";Blockly.Msg.COLLAPSE_ALL="Collapse Puzzles";Blockly.Msg.COLLAPSE_BLOCK="Collapse Puzzle";Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 puzzles?";Blockly.Msg.DELETE_BLOCK="Delete Puzzle";Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Puzzles";Blockly.Msg.DISABLE_BLOCK="Disable Puzzle";Blockly.Msg.ENABLE_BLOCK="Enable Puzzle";Blockly.Msg.EXPAND_ALL="Expand Puzzles";Blockly.Msg.EXPAND_BLOCK="Expand Puzzle";Blockly.Msg.RESET_VIEWPORT_DIMENSIONS="Reset Viewport Dimensions";Blockly.Msg.SAVE_BLOCK_TO_LIBRARY="Save Puzzle to Library";Blockly.Msg.SAVE_X_BLOCKS_TO_LIBRARY="Save %1 Puzzles to Library";Blockly.Msg.DEPRECATED_PUZZLE_WARNING="This puzzle is deprecated although still works.";Blockly.Msg.DELETE_VARIABLE_CONFIRMATION='Delete %1 uses of "%2" variable?';Blockly.Msg.LOGIC_COMPARE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#comparison";Blockly.Msg.LOGIC_OPERATION_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#logical_operators_and_or";Blockly.Msg.LOGIC_NEGATE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#logical_operator_not";Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#true_false";Blockly.Msg.LOGIC_NULL_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#null";Blockly.Msg.LOGIC_TERNARY_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#test";Blockly.Msg.CONTROLS_IF_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Logic.html#if_else";Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Loops.html#repeat";Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Loops.html#repeat_while_until";Blockly.Msg.CONTROLS_FOR_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Loops.html#count_with";Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Loops.html#for_each";Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Loops.html#break_continue";Blockly.Msg.TEXT_TEXT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#text";Blockly.Msg.TEXT_JOIN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#create_text";Blockly.Msg.TEXT_APPEND_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#append_text";Blockly.Blocks.text_append.helpUrl=Blockly.Msg.TEXT_APPEND_HELPURL;Blockly.Msg.TEXT_LENGTH_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#length";Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#is_empty";Blockly.Msg.TEXT_INDEXOF_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#find";Blockly.Msg.TEXT_CHARAT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#get_letter";Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#get_region";Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#adjust_case";Blockly.Msg.TEXT_TRIM_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#trim_spaces";Blockly.Msg.TEXT_PROMPT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#prompt";Blockly.Msg.TEXT_COUNT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#count";Blockly.Msg.TEXT_REPLACE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#replace";Blockly.Msg.TEXT_REVERSE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#reverse";Blockly.Msg.MATH_NUMBER_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#number";Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#arithmetic_operation_two_inputs";Blockly.Msg.MATH_SINGLE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#arithmetic_operation_single_input";Blockly.Msg.MATH_TRIG_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#trigonometric_functions";Blockly.Msg.MATH_CONSTANT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#constants";Blockly.Msg.MATH_ROUND_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#round";Blockly.Msg.MATH_ONLIST_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#operations_on_list";Blockly.Msg.MATH_MODULO_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#remainder";Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#clamp";Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#random_integer";Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#random_fraction";Blockly.Blocks.math_number_property.helpUrl="https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#check";Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#create_empty";Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#create";Blockly.Msg.LISTS_REPEAT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#create_with_item_repeated";Blockly.Msg.LISTS_LENGTH_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#length";Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#is_empty";Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#find";Blockly.Msg.LISTS_GET_INDEX_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#get_remove";Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#set_insert";Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#get_sub_list";Blockly.Msg.LISTS_SORT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#sort";Blockly.Msg.LISTS_SPLIT_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#list_text_conversion";Blockly.Msg.LISTS_REVERSE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#reverse";Blockly.Msg.VARIABLES_GET_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Variables.html#variables_get";Blockly.Msg.VARIABLES_SET_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Variables.html#variables_set";Blockly.Msg.MATH_CHANGE_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Variables.html#variables_change";Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Procedures.html";Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Procedures.html";Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Procedures.html#procedure_with_return";Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Procedures.html#procedure_with_return";Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="https://www.soft8soft.com/docs/manual/en/puzzles/Procedures.html#if_return";Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified puzzles.";Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if puzzle.";Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if puzzle.";Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if puzzle.";Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some puzzles several times.";Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some puzzles.";Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some puzzles.";Blockly.Msg.CONTROLS_FOR_TOOLTIP='Have the variable "%1" take on the values from the start number to the end number, counting by the specified interval, and do the specified puzzles.';Blockly.Msg.CONTROLS_FOREACH_TOOLTIP='For each item in a list, set the variable "%1" to the item, and then do some puzzles.';Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="This puzzle may only be used within a loop.";Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get region from letter #";Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get region from letter # from end";Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get region from first letter";Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a procedure with no output.";Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a procedure with an output.";Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Trigger the procedure puzzle '%1'.";Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Trigger the procedure puzzle '%1' and use its output.";Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the procedure.";Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this procedure.";Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Jump to Procedure Puzzle";Blockly.Msg.PROCEDURES_IFRETURN_WARNING="This puzzle may only be used within a procedure.";Blockly.Msg.MATH_CONSTRAIN_TITLE="clamp %1 min %2 max %3";Blockly.Msg.MISSING_BLOCK_DEFINITION="This puzzle is not defined properly.";var _variablesToDom=Blockly.Xml.variablesToDom;Blockly.Xml.variablesToDom=function(e){e=_variablesToDom(e);e.childNodes.forEach(function(e){null===e.getAttribute("type")&&e.setAttribute("type","")});return e};var DELETE_VARIABLE_ID_MULTI_WS="DELETE_VARIABLE_ID_MULTI_WS",RENAME_VARIABLE_ID_MULTI_WS="RENAME_VARIABLE_ID_MULTI_WS";function extendWorkspaceContextMenu(e){Blockly.WorkspaceSvg.prototype.configureContextMenu=e}function extendBlockContextMenu(e){Blockly.BlockSvg.prototype.configureContextMenu=e}function extendFieldVariableContextMenu(e,t){Blockly.FieldVariable.prototype.configureDropdownMenu=e;Blockly.FieldVariable.prototype.onItemSelectedCb=t}function extendProcedureCallCustomMenu(e,t){procCallReturnCb=e;procCallNoReturnCb=t}var procCallReturnCb=null,_callreturnCustomContextMenu=Blockly.Blocks.procedures_callreturn.customContextMenu;Blockly.Blocks.procedures_callreturn.customContextMenu=function(e){_callreturnCustomContextMenu.call(this,e);procCallReturnCb&&procCallReturnCb.call(this,e)};var procCallNoReturnCb=null,_callnoreturnCustomContextMenu=Blockly.Blocks.procedures_callnoreturn.customContextMenu;Blockly.Blocks.procedures_callnoreturn.customContextMenu=function(e){_callnoreturnCustomContextMenu.call(this,e);procCallNoReturnCb&&procCallNoReturnCb.call(this,e)};function overridePaste(e){Blockly.overridePasteCb=e}function overrideAlert(e){Blockly.alert=e}function overrideConfirm(e){Blockly.confirm=e}function overridePrompt(e){Blockly.prompt=e}function set_BlockDragSurfaceSvg_ClearAndHideCb(e){Blockly.BlockDragSurfaceSvg.prototype.clearAndHideCb=e}function set_BlockDragSurfaceSvg_SetBlocksAndShowCb(e){Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShowCb=e}function set_BlockSvg_BringToFrontCb(e){Blockly.BlockSvg.prototype.bringToFrontCb=e}function set_WorkspaceDragSurfaceSvg_ClearAndHideCb(e){Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHideCb=e}function set_WorkspaceDragSurfaceSvg_SetContentsAndShowCb(e){Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShowCb=e}Blockly.Flyout.prototype.CORNER_RADIUS=0;var BlocklyExt={Events:Events,Fields:Fields,Icons:Icons,Procedures:Procedures,DELETE_VARIABLE_ID_MULTI_WS:DELETE_VARIABLE_ID_MULTI_WS,RENAME_VARIABLE_ID_MULTI_WS:RENAME_VARIABLE_ID_MULTI_WS,extendBlockContextMenu:extendBlockContextMenu,extendProcedureCallCustomMenu:extendProcedureCallCustomMenu,extendWorkspaceContextMenu:extendWorkspaceContextMenu,extendFieldVariableContextMenu:extendFieldVariableContextMenu,overridePaste:overridePaste,overrideAlert:overrideAlert,overrideConfirm:overrideConfirm,overridePrompt:overridePrompt,set_BlockDragSurfaceSvg_ClearAndHideCb:set_BlockDragSurfaceSvg_ClearAndHideCb,set_BlockDragSurfaceSvg_SetBlocksAndShowCb:set_BlockDragSurfaceSvg_SetBlocksAndShowCb,set_BlockSvg_BringToFrontCb:set_BlockSvg_BringToFrontCb,set_WorkspaceDragSurfaceSvg_ClearAndHideCb:set_WorkspaceDragSurfaceSvg_ClearAndHideCb,set_WorkspaceDragSurfaceSvg_SetContentsAndShowCb:set_WorkspaceDragSurfaceSvg_SetContentsAndShowCb},App=null,AppAdapter={update:function(e){(App=e)instanceof v3d.App&&(this._listeners=this._listeners.filter(function(e){0<e.count&&e.cb(App);return 0<--e.count}))},_listeners:[],_addListener:function(e,t){this._listeners.push({cb:e,count:t})},ready:function(e){null!==App?e(App):this._addListener(e,1)}},emptyObject=Object.freeze({});function isUndef(e){return null==e}function isDef(e){return null!=e}function isTrue(e){return!0===e}function isFalse(e){return!1===e}function isPrimitive(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function isObject(e){return null!==e&&"object"==typeof e}var _toString=Object.prototype.toString;function toRawType(e){return _toString.call(e).slice(8,-1)}function isPlainObject(e){return"[object Object]"===_toString.call(e)}function isRegExp(e){return"[object RegExp]"===_toString.call(e)}function isValidArrayIndex(e){var t=parseFloat(String(e));return 0<=t&&Math.floor(t)===t&&isFinite(e)}function isPromise(e){return isDef(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function toString(e){return null==e?"":Array.isArray(e)||isPlainObject(e)&&e.toString===_toString?JSON.stringify(e,null,2):String(e)}function toNumber(e){var t=parseFloat(e);return isNaN(t)?e:t}function makeMap(e,t){for(var n=Object.create(null),o=e.split(","),i=0;i<o.length;i++)n[o[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var isBuiltInTag=makeMap("slot,component",!0),isReservedAttribute=makeMap("key,ref,slot,slot-scope,is");function remove(e,t){if(e.length){t=e.indexOf(t);if(-1<t)return e.splice(t,1)}}var hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty.call(e,t)}function cached(t){var n=Object.create(null);return function(e){return n[e]||(n[e]=t(e))}}var camelizeRE=/-(\w)/g,camelize=cached(function(e){return e.replace(camelizeRE,function(e,t){return t?t.toUpperCase():""})}),capitalize=cached(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),hyphenateRE=/\B([A-Z])/g,hyphenate=cached(function(e){return e.replace(hyphenateRE,"-$1").toLowerCase()});function polyfillBind(n,o){function e(e){var t=arguments.length;return t?1<t?n.apply(o,arguments):n.call(o,e):n.call(o)}e._length=n.length;return e}function nativeBind(e,t){return e.bind(t)}var bind=Function.prototype.bind?nativeBind:polyfillBind;function toArray(e,t){t=t||0;for(var n=e.length-t,o=new Array(n);n--;)o[n]=e[n+t];return o}function extend(e,t){for(var n in t)e[n]=t[n];return e}function toObject(e){for(var t={},n=0;n<e.length;n++)e[n]&&extend(t,e[n]);return t}function noop(e,t,n){}var no=function(e,t,n){return!1},identity=function(e){return e};function looseEqual(t,n){if(t===n)return!0;var e=isObject(t),o=isObject(n);if(!e||!o)return!e&&!o&&String(t)===String(n);try{var i=Array.isArray(t),r=Array.isArray(n);if(i&&r)return t.length===n.length&&t.every(function(e,t){return looseEqual(e,n[t])});if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(i||r)return!1;i=Object.keys(t),r=Object.keys(n);return i.length===r.length&&i.every(function(e){return looseEqual(t[e],n[e])})}catch(e){return!1}}function looseIndexOf(e,t){for(var n=0;n<e.length;n++)if(looseEqual(e[n],t))return n;return-1}function once(e){var t=!1;return function(){if(!t){t=!0;e.apply(this,arguments)}}}var SSR_ATTR="data-server-rendered",ASSET_TYPES=["component","directive","filter"],LIFECYCLE_HOOKS=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],config={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:no,isReservedAttr:no,isUnknownElement:no,getTagNamespace:noop,parsePlatformTagName:identity,mustUseProp:no,async:!0,_lifecycleHooks:LIFECYCLE_HOOKS},unicodeRegExp=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function isReserved(e){e=(e+"").charCodeAt(0);return 36===e||95===e}function def(e,t,n,o){Object.defineProperty(e,t,{value:n,enumerable:!!o,writable:!0,configurable:!0})}var bailRE=new RegExp("[^"+unicodeRegExp.source+".$_\\d]");function parsePath(e){if(!bailRE.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}var hasProto="__proto__"in{},inBrowser="undefined"!=typeof window,inWeex="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,weexPlatform=inWeex&&WXEnvironment.platform.toLowerCase(),UA=inBrowser&&window.navigator.userAgent.toLowerCase(),isIE=UA&&/msie|trident/.test(UA),isIE9=UA&&0<UA.indexOf("msie 9.0"),isEdge=UA&&0<UA.indexOf("edge/"),isAndroid=UA&&0<UA.indexOf("android")||"android"===weexPlatform,isIOS=UA&&/iphone|ipad|ipod|ios/.test(UA)||"ios"===weexPlatform,isChrome=UA&&/chrome\/\d+/.test(UA)&&!isEdge,isPhantomJS=UA&&/phantomjs/.test(UA),isFF=UA&&UA.match(/firefox\/(\d+)/),nativeWatch={}.watch,supportsPassive=!1,_isServer;if(inBrowser)try{var opts={};Object.defineProperty(opts,"passive",{get:function(){supportsPassive=!0}});window.addEventListener("test-passive",null,opts)}catch(e){}var isServerRendering=function(){void 0===_isServer&&(_isServer=!inBrowser&&!inWeex&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV));return _isServer},devtools=inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function isNative(e){return"function"==typeof e&&/native code/.test(e.toString())}var hasSymbol="undefined"!=typeof Symbol&&isNative(Symbol)&&"undefined"!=typeof Reflect&&isNative(Reflect.ownKeys),_Set,_Set="undefined"!=typeof Set&&isNative(Set)?Set:function(){function e(){this.set=Object.create(null)}e.prototype.has=function(e){return!0===this.set[e]};e.prototype.add=function(e){this.set[e]=!0};e.prototype.clear=function(){this.set=Object.create(null)};return e}(),warn=noop,uid=0,Dep=function(){this.id=uid++;this.subs=[]};Dep.prototype.addSub=function(e){this.subs.push(e)};Dep.prototype.removeSub=function(e){remove(this.subs,e)};Dep.prototype.depend=function(){Dep.target&&Dep.target.addDep(this)};Dep.prototype.notify=function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()};Dep.target=null;var targetStack=[];function pushTarget(e){targetStack.push(e);Dep.target=e}function popTarget(){targetStack.pop();Dep.target=targetStack[targetStack.length-1]}var VNode=function(e,t,n,o,i,r,s,a){this.tag=e;this.data=t;this.children=n;this.text=o;this.elm=i;this.ns=void 0;this.context=r;this.fnContext=void 0;this.fnOptions=void 0;this.fnScopeId=void 0;this.key=t&&t.key;this.componentOptions=s;this.componentInstance=void 0;this.parent=void 0;this.raw=!1;this.isStatic=!1;this.isRootInsert=!0;this.isComment=!1;this.isCloned=!1;this.isOnce=!1;this.asyncFactory=a;this.asyncMeta=void 0;this.isAsyncPlaceholder=!1},prototypeAccessors={child:{configurable:!0}};prototypeAccessors.child.get=function(){return this.componentInstance};Object.defineProperties(VNode.prototype,prototypeAccessors);var createEmptyVNode=function(e){void 0===e&&(e="");var t=new VNode;t.text=e;t.isComment=!0;return t};function createTextVNode(e){return new VNode(void 0,void 0,void 0,String(e))}function cloneVNode(e){var t=new VNode(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);t.ns=e.ns;t.isStatic=e.isStatic;t.key=e.key;t.isComment=e.isComment;t.fnContext=e.fnContext;t.fnOptions=e.fnOptions;t.fnScopeId=e.fnScopeId;t.asyncMeta=e.asyncMeta;t.isCloned=!0;return t}var arrayProto=Array.prototype,arrayMethods=Object.create(arrayProto),methodsToPatch=["push","pop","shift","unshift","splice","sort","reverse"];methodsToPatch.forEach(function(r){var s=arrayProto[r];def(arrayMethods,r,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,o=s.apply(this,e),i=this.__ob__;switch(r){case"push":case"unshift":n=e;break;case"splice":n=e.slice(2)}n&&i.observeArray(n);i.dep.notify();return o})});var arrayKeys=Object.getOwnPropertyNames(arrayMethods),shouldObserve=!0;function toggleObserving(e){shouldObserve=e}var Observer=function(e){this.value=e;this.dep=new Dep;this.vmCount=0;def(e,"__ob__",this);if(Array.isArray(e)){hasProto?protoAugment(e,arrayMethods):copyAugment(e,arrayMethods,arrayKeys);this.observeArray(e)}else this.walk(e)};Observer.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)defineReactive$$1(e,t[n])};Observer.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)observe(e[t])};function protoAugment(e,t){e.__proto__=t}function copyAugment(e,t,n){for(var o=0,i=n.length;o<i;o++){var r=n[o];def(e,r,t[r])}}function observe(e,t){if(isObject(e)&&!(e instanceof VNode)){var n;hasOwn(e,"__ob__")&&e.__ob__ instanceof Observer?n=e.__ob__:shouldObserve&&!isServerRendering()&&(Array.isArray(e)||isPlainObject(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Observer(e));t&&n&&n.vmCount++;return n}}function defineReactive$$1(n,e,o,t,i){var r=new Dep,s=Object.getOwnPropertyDescriptor(n,e);if(!s||!1!==s.configurable){var a=s&&s.get,l=s&&s.set;a&&!l||2!==arguments.length||(o=n[e]);var c=!i&&observe(o);Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(n):o;if(Dep.target){r.depend();if(c){c.dep.depend();Array.isArray(e)&&dependArray(e)}}return e},set:function(e){var t=a?a.call(n):o;if(e!==t&&(e==e||t==t)&&(!a||l)){l?l.call(n,e):o=e;c=!i&&observe(e);r.notify()}}})}}function set(e,t,n){if(Array.isArray(e)&&isValidArrayIndex(t)){e.length=Math.max(e.length,t);e.splice(t,1,n);return n}if(t in e&&!(t in Object.prototype))return e[t]=n;var o=e.__ob__;if(e._isVue||o&&o.vmCount)return n;if(!o)return e[t]=n;defineReactive$$1(o.value,t,n);o.dep.notify();return n}function del(e,t){if(Array.isArray(e)&&isValidArrayIndex(t))e.splice(t,1);else{var n=e.__ob__;if(!(e._isVue||n&&n.vmCount)&&hasOwn(e,t)){delete e[t];n&&n.dep.notify()}}}function dependArray(e){for(var t=void 0,n=0,o=e.length;n<o;n++){(t=e[n])&&t.__ob__&&t.__ob__.dep.depend();Array.isArray(t)&&dependArray(t)}}var strats=config.optionMergeStrategies;function mergeData(e,t){if(!t)return e;for(var n,o,i,r=hasSymbol?Reflect.ownKeys(t):Object.keys(t),s=0;s<r.length;s++)if("__ob__"!==(n=r[s])){o=e[n];i=t[n];hasOwn(e,n)?o!==i&&isPlainObject(o)&&isPlainObject(i)&&mergeData(o,i):set(e,n,i)}return e}function mergeDataOrFn(n,o,i){return i?function(){var e="function"==typeof o?o.call(i,i):o,t="function"==typeof n?n.call(i,i):n;return e?mergeData(e,t):t}:o?n?function(){return mergeData("function"==typeof o?o.call(this,this):o,"function"==typeof n?n.call(this,this):n)}:o:n}strats.data=function(e,t,n){return n?mergeDataOrFn(e,t,n):t&&"function"!=typeof t?e:mergeDataOrFn(e,t)};function mergeHook(e,t){e=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return e&&dedupeHooks(e)}function dedupeHooks(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}LIFECYCLE_HOOKS.forEach(function(e){strats[e]=mergeHook});function mergeAssets(e,t,n,o){e=Object.create(e||null);return t?extend(e,t):e}ASSET_TYPES.forEach(function(e){strats[e+"s"]=mergeAssets});strats.watch=function(e,t,n,o){e===nativeWatch&&(e=void 0);t===nativeWatch&&(t=void 0);if(!t)return Object.create(e||null);if(!e)return t;var i,r={};extend(r,e);for(i in t){var s=r[i],a=t[i];s&&!Array.isArray(s)&&(s=[s]);r[i]=s?s.concat(a):Array.isArray(a)?a:[a]}return r};strats.props=strats.methods=strats.inject=strats.computed=function(e,t,n,o){0;if(!e)return t;var i=Object.create(null);extend(i,e);t&&extend(i,t);return i};strats.provide=mergeDataOrFn;var defaultStrat=function(e,t){return void 0===t?e:t};function normalizeProps(e,t){var n=e.props;if(n){var o,i,r={};if(Array.isArray(n)){o=n.length;for(;o--;)"string"==typeof(i=n[o])&&(r[camelize(i)]={type:null})}else if(isPlainObject(n))for(var s in n){i=n[s];r[camelize(s)]=isPlainObject(i)?i:{type:i}}e.props=r}}function normalizeInject(e,t){var n=e.inject;if(n){var o=e.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)o[n[i]]={from:n[i]};else if(isPlainObject(n))for(var r in n){var s=n[r];o[r]=isPlainObject(s)?extend({from:r},s):{from:s}}}}function normalizeDirectives(e){var t=e.directives;if(t)for(var n in t){var o=t[n];"function"==typeof o&&(t[n]={bind:o,update:o})}}function assertObjectType(e,t,n){isPlainObject(t)||warn('Invalid value for option "'+e+'": expected an Object, but got '+toRawType(t)+".")}function mergeOptions(n,o,i){"function"==typeof o&&(o=o.options);normalizeProps(o);normalizeInject(o);normalizeDirectives(o);if(!o._base){o.extends&&(n=mergeOptions(n,o.extends,i));if(o.mixins)for(var e=0,t=o.mixins.length;e<t;e++)n=mergeOptions(n,o.mixins[e],i)}var r,s={};for(r in n)a(r);for(r in o)hasOwn(n,r)||a(r);function a(e){var t=strats[e]||defaultStrat;s[e]=t(n[e],o[e],i,e)}return s}function resolveAsset(e,t,n,o){if("string"==typeof n){var i=e[t];if(hasOwn(i,n))return i[n];e=camelize(n);if(hasOwn(i,e))return i[e];t=capitalize(e);return hasOwn(i,t)?i[t]:i[n]||i[e]||i[t]}}function validateProp(e,t,n,o){var i=t[e],r=!hasOwn(n,e),t=n[e],n=getTypeIndex(Boolean,i.type);if(-1<n)if(r&&!hasOwn(i,"default"))t=!1;else if(""===t||t===hyphenate(e)){r=getTypeIndex(String,i.type);(r<0||n<r)&&(t=!0)}if(void 0===t){t=getPropDefaultValue(o,i,e);e=shouldObserve;toggleObserving(!0);observe(t);toggleObserving(e)}return t}function getPropDefaultValue(e,t,n){if(hasOwn(t,"default")){var o=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"==typeof o&&"Function"!==getType(t.type)?o.call(e):o}}function getType(e){e=e&&e.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){if(!Array.isArray(t))return isSameType(t,e)?0:-1;for(var n=0,o=t.length;n<o;n++)if(isSameType(t[n],e))return n;return-1}function handleError(e,t,n){pushTarget();try{if(t)for(var o=t;o=o.$parent;){var i=o.$options.errorCaptured;if(i)for(var r=0;r<i.length;r++)try{if(!1===i[r].call(o,e,t,n))return}catch(e){globalHandleError(e,o,"errorCaptured hook")}}globalHandleError(e,t,n)}finally{popTarget()}}function invokeWithErrorHandling(e,t,n,o,i){var r;try{if((r=n?e.apply(t,n):e.call(t))&&!r._isVue&&isPromise(r)&&!r._handled){r.catch(function(e){return handleError(e,o,i+" (Promise/async)")});r._handled=!0}}catch(e){handleError(e,o,i)}return r}function globalHandleError(t,e,n){if(config.errorHandler)try{return config.errorHandler.call(null,t,e,n)}catch(e){e!==t&&logError(e)}logError(t)}function logError(e,t,n){if(!inBrowser&&!inWeex||"undefined"==typeof console)throw e;console.error(e)}var isUsingMicroTask=!1,callbacks=[],pending=!1,timerFunc;function flushCallbacks(){pending=!1;for(var e=callbacks.slice(0),t=callbacks.length=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&isNative(Promise))var p=Promise.resolve(),timerFunc=function(){p.then(flushCallbacks);isIOS&&setTimeout(noop)},isUsingMicroTask=!0;else if(isIE||"undefined"==typeof MutationObserver||!isNative(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())timerFunc="undefined"!=typeof setImmediate&&isNative(setImmediate)?function(){setImmediate(flushCallbacks)}:function(){setTimeout(flushCallbacks,0)};else{var counter=1,observer=new MutationObserver(flushCallbacks),textNode=document.createTextNode(String(counter));observer.observe(textNode,{characterData:!0});timerFunc=function(){counter=(counter+1)%2;textNode.data=String(counter)};isUsingMicroTask=!0}function nextTick(e,t){var n;callbacks.push(function(){if(e)try{e.call(t)}catch(e){handleError(e,t,"nextTick")}else n&&n(t)});if(!pending){pending=!0;timerFunc()}if(!e&&"undefined"!=typeof Promise)return new Promise(function(e){n=e})}var seenObjects=new _Set;function traverse(e){_traverse(e,seenObjects);seenObjects.clear()}function _traverse(e,t){var n,o,i=Array.isArray(e);if(!(!i&&!isObject(e)||Object.isFrozen(e)||e instanceof VNode)){if(e.__ob__){var r=e.__ob__.dep.id;if(t.has(r))return;t.add(r)}if(i){n=e.length;for(;n--;)_traverse(e[n],t)}else{n=(o=Object.keys(e)).length;for(;n--;)_traverse(e[o[n]],t)}}}var normalizeEvent=cached(function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),o="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=o?e.slice(1):e,once:n,capture:o,passive:t}});function createFnInvoker(e,i){function r(){var e=arguments,t=r.fns;if(!Array.isArray(t))return invokeWithErrorHandling(t,null,arguments,i,"v-on handler");for(var n=t.slice(),o=0;o<n.length;o++)invokeWithErrorHandling(n[o],null,e,i,"v-on handler")}r.fns=e;return r}function updateListeners(e,t,n,o,i,r){var s,a,l,c;for(s in e){a=e[s];l=t[s];c=normalizeEvent(s);if(!isUndef(a))if(isUndef(l)){isUndef(a.fns)&&(a=e[s]=createFnInvoker(a,r));isTrue(c.once)&&(a=e[s]=i(c.name,a,c.capture));n(c.name,a,c.capture,c.passive,c.params)}else if(a!==l){l.fns=a;e[s]=l}}for(s in t)isUndef(e[s])&&o((c=normalizeEvent(s)).name,t[s],c.capture)}function mergeVNodeHook(e,t,n){e instanceof VNode&&(e=e.data.hook||(e.data.hook={}));var o,i=e[t];function r(){n.apply(this,arguments);remove(o.fns,r)}isUndef(i)?o=createFnInvoker([r]):isDef(i.fns)&&isTrue(i.merged)?(o=i).fns.push(r):o=createFnInvoker([i,r]);o.merged=!0;e[t]=o}function extractPropsFromVNodeData(e,t,n){t=t.options.props;if(!isUndef(t)){var o={},i=e.attrs,r=e.props;if(isDef(i)||isDef(r))for(var s in t){var a=hyphenate(s);checkProp(o,r,s,a,!0)||checkProp(o,i,s,a,!1)}return o}}function checkProp(e,t,n,o,i){if(isDef(t)){if(hasOwn(t,n)){e[n]=t[n];i||delete t[n];return 1}if(hasOwn(t,o)){e[n]=t[o];i||delete t[o];return 1}}}function simpleNormalizeChildren(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function normalizeChildren(e){return isPrimitive(e)?[createTextVNode(e)]:Array.isArray(e)?normalizeArrayChildren(e):void 0}function isTextNode(e){return isDef(e)&&isDef(e.text)&&isFalse(e.isComment)}function normalizeArrayChildren(e,t){for(var n,o,i,r=[],s=0;s<e.length;s++)if(!isUndef(n=e[s])&&"boolean"!=typeof n){i=r[o=r.length-1];if(Array.isArray(n)){if(0<n.length){if(isTextNode((n=normalizeArrayChildren(n,(t||"")+"_"+s))[0])&&isTextNode(i)){r[o]=createTextVNode(i.text+n[0].text);n.shift()}r.push.apply(r,n)}}else if(isPrimitive(n))isTextNode(i)?r[o]=createTextVNode(i.text+n):""!==n&&r.push(createTextVNode(n));else if(isTextNode(n)&&isTextNode(i))r[o]=createTextVNode(i.text+n.text);else{isTrue(e._isVList)&&isDef(n.tag)&&isUndef(n.key)&&isDef(t)&&(n.key="__vlist"+t+"_"+s+"__");r.push(n)}}return r}function initProvide(e){var t=e.$options.provide;t&&(e._provided="function"==typeof t?t.call(e):t)}function initInjections(t){var n=resolveInject(t.$options.inject,t);if(n){toggleObserving(!1);Object.keys(n).forEach(function(e){defineReactive$$1(t,e,n[e])});toggleObserving(!0)}}function resolveInject(e,t){if(e){for(var n=Object.create(null),o=hasSymbol?Reflect.ownKeys(e):Object.keys(e),i=0;i<o.length;i++){var r=o[i];if("__ob__"!==r){for(var s=e[r].from,a=t;a;){if(a._provided&&hasOwn(a._provided,s)){n[r]=a._provided[s];break}a=a.$parent}if(!a&&"default"in e[r]){var l=e[r].default;n[r]="function"==typeof l?l.call(t):l}}}return n}}function resolveSlots(e,t){if(!e||!e.length)return{};for(var n,o={},i=0,r=e.length;i<r;i++){var s=e[i],a=s.data;a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot;if(s.context!==t&&s.fnContext!==t||!a||null==a.slot)(o.default||(o.default=[])).push(s);else{a=a.slot,a=o[a]||(o[a]=[]);"template"===s.tag?a.push.apply(a,s.children||[]):a.push(s)}}for(n in o)o[n].every(isWhitespace)&&delete o[n];return o}function isWhitespace(e){return e.isComment&&!e.asyncFactory||" "===e.text}function normalizeScopedSlots(e,t,n){var o,i,r=0<Object.keys(t).length,s=e?!!e.$stable:!r,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&n&&n!==emptyObject&&a===n.$key&&!r&&!n.$hasNormal)return n;o={};for(var l in e)e[l]&&"$"!==l[0]&&(o[l]=normalizeScopedSlot(t,l,e[l]))}else o={};for(i in t)i in o||(o[i]=proxyNormalSlot(t,i));e&&Object.isExtensible(e)&&(e._normalized=o);def(o,"$stable",s);def(o,"$key",a);def(o,"$hasNormal",r);return o}function normalizeScopedSlot(e,t,n){function o(){var e=arguments.length?n.apply(null,arguments):n({});return(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:normalizeChildren(e))&&(0===e.length||1===e.length&&e[0].isComment)?void 0:e}n.proxy&&Object.defineProperty(e,t,{get:o,enumerable:!0,configurable:!0});return o}function proxyNormalSlot(e,t){return function(){return e[t]}}function renderList(e,t){var n,o,i,r,s;if(Array.isArray(e)||"string"==typeof e){n=new Array(e.length);for(o=0,i=e.length;o<i;o++)n[o]=t(e[o],o)}else if("number"==typeof e){n=new Array(e);for(o=0;o<e;o++)n[o]=t(o+1,o)}else if(isObject(e))if(hasSymbol&&e[Symbol.iterator]){n=[];for(var a=e[Symbol.iterator](),l=a.next();!l.done;){n.push(t(l.value,n.length));l=a.next()}}else{r=Object.keys(e);n=new Array(r.length);for(o=0,i=r.length;o<i;o++){s=r[o];n[o]=t(e[s],s,o)}}isDef(n)||(n=[]);n._isVList=!0;return n}function renderSlot(e,t,n,o){var i,r=this.$scopedSlots[e];if(r){n=n||{};o&&(n=extend(extend({},o),n));i=r(n)||t}else i=this.$slots[e]||t;n=n&&n.slot;return n?this.$createElement("template",{slot:n},i):i}function resolveFilter(e){return resolveAsset(this.$options,"filters",e)||identity}function isKeyNotMatch(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function checkKeyCodes(e,t,n,o,i){n=config.keyCodes[t]||n;return i&&o&&!config.keyCodes[t]?isKeyNotMatch(i,o):n?isKeyNotMatch(n,e):o?hyphenate(o)!==t:void 0}function bindObjectProps(o,i,r,s,a){if(r)if(isObject(r)){Array.isArray(r)&&(r=toObject(r));var l,e;for(e in r)!function(t){if("class"===t||"style"===t||isReservedAttribute(t))l=o;else{var e=o.attrs&&o.attrs.type;l=s||config.mustUseProp(i,e,t)?o.domProps||(o.domProps={}):o.attrs||(o.attrs={})}var n=camelize(t),e=hyphenate(t);if(!(n in l||e in l)){l[t]=r[t];a&&((o.on||(o.on={}))["update:"+t]=function(e){r[t]=e})}}(e)}else;return o}function renderStatic(e,t){var n=this._staticTrees||(this._staticTrees=[]),o=n[e];if(o&&!t)return o;markStatic(o=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1);return o}function markOnce(e,t,n){markStatic(e,"__once__"+t+(n?"_"+n:""),!0);return e}function markStatic(e,t,n){if(Array.isArray(e))for(var o=0;o<e.length;o++)e[o]&&"string"!=typeof e[o]&&markStaticNode(e[o],t+"_"+o,n);else markStaticNode(e,t,n)}function markStaticNode(e,t,n){e.isStatic=!0;e.key=t;e.isOnce=n}function bindObjectListeners(e,t){if(t)if(isPlainObject(t)){var n,o=e.on=e.on?extend({},e.on):{};for(n in t){var i=o[n],r=t[n];o[n]=i?[].concat(i,r):r}}else;return e}function resolveScopedSlots(e,t,n,o){t=t||{$stable:!n};for(var i=0;i<e.length;i++){var r=e[i];if(Array.isArray(r))resolveScopedSlots(r,t,n);else if(r){r.proxy&&(r.fn.proxy=!0);t[r.key]=r.fn}}o&&(t.$key=o);return t}function bindDynamicKeys(e,t){for(var n=0;n<t.length;n+=2){var o=t[n];"string"==typeof o&&o&&(e[t[n]]=t[n+1])}return e}function prependModifier(e,t){return"string"==typeof e?t+e:e}function installRenderHelpers(e){e._o=markOnce;e._n=toNumber;e._s=toString;e._l=renderList;e._t=renderSlot;e._q=looseEqual;e._i=looseIndexOf;e._m=renderStatic;e._f=resolveFilter;e._k=checkKeyCodes;e._b=bindObjectProps;e._v=createTextVNode;e._e=createEmptyVNode;e._u=resolveScopedSlots;e._g=bindObjectListeners;e._d=bindDynamicKeys;e._p=prependModifier}function FunctionalRenderContext(e,t,n,i,o){var r,s=this,a=o.options;hasOwn(i,"_uid")?(r=Object.create(i))._original=i:i=(r=i)._original;var o=isTrue(a._compiled),l=!o;this.data=e;this.props=t;this.children=n;this.parent=i;this.listeners=e.on||emptyObject;this.injections=resolveInject(a.inject,i);this.slots=function(){s.$slots||normalizeScopedSlots(e.scopedSlots,s.$slots=resolveSlots(n,i));return s.$slots};Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return normalizeScopedSlots(e.scopedSlots,this.slots())}});if(o){this.$options=a;this.$slots=this.slots();this.$scopedSlots=normalizeScopedSlots(e.scopedSlots,this.$slots)}a._scopeId?this._c=function(e,t,n,o){o=createElement(r,e,t,n,o,l);if(o&&!Array.isArray(o)){o.fnScopeId=a._scopeId;o.fnContext=i}return o}:this._c=function(e,t,n,o){return createElement(r,e,t,n,o,l)}}installRenderHelpers(FunctionalRenderContext.prototype);function createFunctionalComponent(e,t,n,o,i){var r=e.options,s={},a=r.props;if(isDef(a))for(var l in a)s[l]=validateProp(l,a,t||emptyObject);else{isDef(n.attrs)&&mergeProps(s,n.attrs);isDef(n.props)&&mergeProps(s,n.props)}var c=new FunctionalRenderContext(n,s,i,o,e),e=r.render.call(null,c._c,c);if(e instanceof VNode)return cloneAndMarkFunctionalResult(e,n,c.parent,r);if(Array.isArray(e)){for(var u=normalizeChildren(e)||[],d=new Array(u.length),h=0;h<u.length;h++)d[h]=cloneAndMarkFunctionalResult(u[h],n,c.parent,r);return d}}function cloneAndMarkFunctionalResult(e,t,n,o,i){e=cloneVNode(e);e.fnContext=n;e.fnOptions=o;t.slot&&((e.data||(e.data={})).slot=t.slot);return e}function mergeProps(e,t){for(var n in t)e[camelize(n)]=t[n]}var componentVNodeHooks={init:function(e,t){e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive?componentVNodeHooks.prepatch(e,e):(e.componentInstance=createComponentInstanceForVnode(e,activeInstance)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions;updateChildComponent(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;if(!n._isMounted){n._isMounted=!0;callHook(n,"mounted")}e.data.keepAlive&&(t._isMounted?queueActivatedComponent(n):activateChildComponent(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?deactivateChildComponent(t,!0):t.$destroy())}},hooksToMerge=Object.keys(componentVNodeHooks);function createComponent(e,t,n,o,i){if(!isUndef(e)){var r,s=n.$options._base;isObject(e)&&(e=s.extend(e));if("function"==typeof e){if(isUndef(e.cid)&&void 0===(e=resolveAsyncComponent(r=e,s)))return createAsyncPlaceholder(r,t,n,o,i);t=t||{};resolveConstructorOptions(e);isDef(t.model)&&transformModel(e.options,t);var a=extractPropsFromVNodeData(t,e);if(isTrue(e.options.functional))return createFunctionalComponent(e,a,t,n,o);s=t.on;t.on=t.nativeOn;if(isTrue(e.options.abstract)){var l=t.slot;t={};l&&(t.slot=l)}installComponentHooks(t);l=e.options.name||i;return new VNode("vue-component-"+e.cid+(l?"-"+l:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:a,listeners:s,tag:i,children:o},r)}}}function createComponentInstanceForVnode(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},t=e.data.inlineTemplate;if(isDef(t)){n.render=t.render;n.staticRenderFns=t.staticRenderFns}return new e.componentOptions.Ctor(n)}function installComponentHooks(e){for(var t=e.hook||(e.hook={}),n=0;n<hooksToMerge.length;n++){var o=hooksToMerge[n],i=t[o],r=componentVNodeHooks[o];i===r||i&&i._merged||(t[o]=i?mergeHook$1(r,i):r)}}function mergeHook$1(n,o){function e(e,t){n(e,t);o(e,t)}e._merged=!0;return e}function transformModel(e,t){var n=e.model&&e.model.prop||"value",o=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;e=t.on||(t.on={}),n=e[o],t=t.model.callback;isDef(n)?(Array.isArray(n)?-1===n.indexOf(t):n!==t)&&(e[o]=[t].concat(n)):e[o]=t}var SIMPLE_NORMALIZE=1,ALWAYS_NORMALIZE=2;function createElement(e,t,n,o,i,r){if(Array.isArray(n)||isPrimitive(n)){i=o;o=n;n=void 0}isTrue(r)&&(i=ALWAYS_NORMALIZE);return _createElement(e,t,n,o,i)}function _createElement(e,t,n,o,i){if(isDef(n)&&isDef(n.__ob__))return createEmptyVNode();isDef(n)&&isDef(n.is)&&(t=n.is);if(!t)return createEmptyVNode();if(Array.isArray(o)&&"function"==typeof o[0]){(n=n||{}).scopedSlots={default:o[0]};o.length=0}i===ALWAYS_NORMALIZE?o=normalizeChildren(o):i===SIMPLE_NORMALIZE&&(o=simpleNormalizeChildren(o));var r,s;o="string"==typeof t?(s=e.$vnode&&e.$vnode.ns||config.getTagNamespace(t),config.isReservedTag(t)?new VNode(config.parsePlatformTagName(t),n,o,void 0,void 0,e):n&&n.pre||!isDef(r=resolveAsset(e.$options,"components",t))?new VNode(t,n,o,void 0,void 0,e):createComponent(r,n,e,o,t)):createComponent(t,n,e,o);if(Array.isArray(o))return o;if(isDef(o)){isDef(s)&&applyNS(o,s);isDef(n)&&registerDeepBindings(n);return o}return createEmptyVNode()}function applyNS(e,t,n){e.ns=t;"foreignObject"===e.tag&&(n=!(t=void 0));if(isDef(e.children))for(var o=0,i=e.children.length;o<i;o++){var r=e.children[o];isDef(r.tag)&&(isUndef(r.ns)||isTrue(n)&&"svg"!==r.tag)&&applyNS(r,t,n)}}function registerDeepBindings(e){isObject(e.style)&&traverse(e.style);isObject(e.class)&&traverse(e.class)}function initRender(i){i._vnode=null;i._staticTrees=null;var e=i.$options,t=i.$vnode=e._parentVnode,n=t&&t.context;i.$slots=resolveSlots(e._renderChildren,n);i.$scopedSlots=emptyObject;i._c=function(e,t,n,o){return createElement(i,e,t,n,o,!1)};i.$createElement=function(e,t,n,o){return createElement(i,e,t,n,o,!0)};t=t&&t.data;defineReactive$$1(i,"$attrs",t&&t.attrs||emptyObject,null,!0);defineReactive$$1(i,"$listeners",e._parentListeners||emptyObject,null,!0)}var currentRenderingInstance=null,target;function renderMixin(e){installRenderHelpers(e.prototype);e.prototype.$nextTick=function(e){return nextTick(e,this)};e.prototype._render=function(){var t,n=this,e=n.$options,o=e.render,e=e._parentVnode;e&&(n.$scopedSlots=normalizeScopedSlots(e.data.scopedSlots,n.$slots,n.$scopedSlots));n.$vnode=e;try{currentRenderingInstance=n;t=o.call(n._renderProxy,n.$createElement)}catch(e){handleError(e,n,"render");t=n._vnode}finally{currentRenderingInstance=null}Array.isArray(t)&&1===t.length&&(t=t[0]);t instanceof VNode||(t=createEmptyVNode());t.parent=e;return t}}function ensureCtor(e,t){(e.__esModule||hasSymbol&&"Module"===e[Symbol.toStringTag])&&(e=e.default);return isObject(e)?t.extend(e):e}function createAsyncPlaceholder(e,t,n,o,i){var r=createEmptyVNode();r.asyncFactory=e;r.asyncMeta={data:t,context:n,children:o,tag:i};return r}function resolveAsyncComponent(t,n){if(isTrue(t.error)&&isDef(t.errorComp))return t.errorComp;if(isDef(t.resolved))return t.resolved;var e=currentRenderingInstance;e&&isDef(t.owners)&&-1===t.owners.indexOf(e)&&t.owners.push(e);if(isTrue(t.loading)&&isDef(t.loadingComp))return t.loadingComp;if(e&&!isDef(t.owners)){var o=t.owners=[e],i=!0,r=null,s=null;e.$on("hook:destroyed",function(){return remove(o,e)});var a=function(e){for(var t=0,n=o.length;t<n;t++)o[t].$forceUpdate();if(e){o.length=0;if(null!==r){clearTimeout(r);r=null}if(null!==s){clearTimeout(s);s=null}}},l=once(function(e){t.resolved=ensureCtor(e,n);i?o.length=0:a(!0)}),c=once(function(e){if(isDef(t.errorComp)){t.error=!0;a(!0)}}),u=t(l,c);if(isObject(u))if(isPromise(u))isUndef(t.resolved)&&u.then(l,c);else if(isPromise(u.component)){u.component.then(l,c);isDef(u.error)&&(t.errorComp=ensureCtor(u.error,n));if(isDef(u.loading)){t.loadingComp=ensureCtor(u.loading,n);0===u.delay?t.loading=!0:r=setTimeout(function(){r=null;if(isUndef(t.resolved)&&isUndef(t.error)){t.loading=!0;a(!1)}},u.delay||200)}isDef(u.timeout)&&(s=setTimeout(function(){s=null;isUndef(t.resolved)&&c(null)},u.timeout))}i=!1;return t.loading?t.loadingComp:t.resolved}}function isAsyncPlaceholder(e){return e.isComment&&e.asyncFactory}function getFirstComponentChild(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(isDef(n)&&(isDef(n.componentOptions)||isAsyncPlaceholder(n)))return n}}function initEvents(e){e._events=Object.create(null);e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&updateComponentListeners(e,t)}function add(e,t){target.$on(e,t)}function remove$1(e,t){target.$off(e,t)}function createOnceHandler(t,n){var o=target;return function e(){null!==n.apply(null,arguments)&&o.$off(t,e)}}function updateComponentListeners(e,t,n){updateListeners(t,n||{},add,remove$1,createOnceHandler,target=e);target=void 0}function eventsMixin(e){var i=/^hook:/;e.prototype.$on=function(e,t){if(Array.isArray(e))for(var n=0,o=e.length;n<o;n++)this.$on(e[n],t);else{(this._events[e]||(this._events[e]=[])).push(t);i.test(e)&&(this._hasHookEvent=!0)}return this};e.prototype.$once=function(e,t){var n=this;function o(){n.$off(e,o);t.apply(n,arguments)}o.fn=t;n.$on(e,o);return n};e.prototype.$off=function(e,t){if(!arguments.length){this._events=Object.create(null);return this}if(Array.isArray(e)){for(var n=0,o=e.length;n<o;n++)this.$off(e[n],t);return this}var i,r=this._events[e];if(!r)return this;if(!t){this._events[e]=null;return this}for(var s=r.length;s--;)if((i=r[s])===t||i.fn===t){r.splice(s,1);break}return this};e.prototype.$emit=function(e){var t=this._events[e];if(t){t=1<t.length?toArray(t):t;for(var n=toArray(arguments,1),o='event handler for "'+e+'"',i=0,r=t.length;i<r;i++)invokeWithErrorHandling(t[i],this,n,this,o)}return this}}var activeInstance=null;function setActiveInstance(e){var t=activeInstance;activeInstance=e;return function(){activeInstance=t}}function initLifecycle(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n;e.$root=n?n.$root:e;e.$children=[];e.$refs={};e._watcher=null;e._inactive=null;e._directInactive=!1;e._isMounted=!1;e._isDestroyed=!1;e._isBeingDestroyed=!1}function lifecycleMixin(e){e.prototype._update=function(e,t){var n=this,o=n.$el,i=n._vnode,r=setActiveInstance(n);n._vnode=e;n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1);r();o&&(o.__vue__=null);n.$el&&(n.$el.__vue__=n);n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)};e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()};e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){callHook(e,"beforeDestroy");e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||remove(t.$children,e);e._watcher&&e._watcher.teardown();for(var n=e._watchers.length;n--;)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--;e._isDestroyed=!0;e.__patch__(e._vnode,null);callHook(e,"destroyed");e.$off();e.$el&&(e.$el.__vue__=null);e.$vnode&&(e.$vnode.parent=null)}}}function mountComponent(e,t,n){e.$el=t;e.$options.render||(e.$options.render=createEmptyVNode);callHook(e,"beforeMount");t=function(){e._update(e._render(),n)};new Watcher(e,t,noop,{before:function(){e._isMounted&&!e._isDestroyed&&callHook(e,"beforeUpdate")}},!0);n=!1;if(null==e.$vnode){e._isMounted=!0;callHook(e,"mounted")}return e}function updateChildComponent(e,t,n,o,i){var r=o.data.scopedSlots,s=e.$scopedSlots,s=!!(r&&!r.$stable||s!==emptyObject&&!s.$stable||r&&e.$scopedSlots.$key!==r.$key),r=!!(i||e.$options._renderChildren||s);e.$options._parentVnode=o;e.$vnode=o;e._vnode&&(e._vnode.parent=o);e.$options._renderChildren=i;e.$attrs=o.data.attrs||emptyObject;e.$listeners=n||emptyObject;if(t&&e.$options.props){toggleObserving(!1);for(var a=e._props,l=e.$options._propKeys||[],c=0;c<l.length;c++){var u=l[c],d=e.$options.props;a[u]=validateProp(u,d,t,e)}toggleObserving(!0);e.$options.propsData=t}n=n||emptyObject;s=e.$options._parentListeners;e.$options._parentListeners=n;updateComponentListeners(e,n,s);if(r){e.$slots=resolveSlots(i,o.context);e.$forceUpdate()}}function isInInactiveTree(e){for(;e=e&&e.$parent;)if(e._inactive)return 1}function activateChildComponent(e,t){if(t){e._directInactive=!1;if(isInInactiveTree(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)activateChildComponent(e.$children[n]);callHook(e,"activated")}}function deactivateChildComponent(e,t){if(t){e._directInactive=!0;if(isInInactiveTree(e))return}if(!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)deactivateChildComponent(e.$children[n]);callHook(e,"deactivated")}}function callHook(e,t){pushTarget();var n=e.$options[t],o=t+" hook";if(n)for(var i=0,r=n.length;i<r;i++)invokeWithErrorHandling(n[i],e,null,e,o);e._hasHookEvent&&e.$emit("hook:"+t);popTarget()}var queue=[],activatedChildren=[],has={},waiting=!1,flushing=!1,index=0;function resetSchedulerState(){index=queue.length=activatedChildren.length=0;waiting=flushing=!(has={})}var currentFlushTimestamp=0,getNow=Date.now;if(inBrowser&&!isIE){var performance=window.performance;performance&&"function"==typeof performance.now&&getNow()>document.createEvent("Event").timeStamp&&(getNow=function(){return performance.now()})}function flushSchedulerQueue(){currentFlushTimestamp=getNow();flushing=!0;var e,t;queue.sort(function(e,t){return e.id-t.id});for(index=0;index<queue.length;index++){(e=queue[index]).before&&e.before();t=e.id;has[t]=null;e.run()}var n=activatedChildren.slice(),o=queue.slice();resetSchedulerState();callActivatedHooks(n);callUpdatedHooks(o);devtools&&config.devtools&&devtools.emit("flush")}function callUpdatedHooks(e){for(var t=e.length;t--;){var n=e[t],o=n.vm;o._watcher===n&&o._isMounted&&!o._isDestroyed&&callHook(o,"updated")}}function queueActivatedComponent(e){e._inactive=!1;activatedChildren.push(e)}function callActivatedHooks(e){for(var t=0;t<e.length;t++){e[t]._inactive=!0;activateChildComponent(e[t],!0)}}function queueWatcher(e){var t=e.id;if(null==has[t]){has[t]=!0;if(flushing){for(var n=queue.length-1;index<n&&queue[n].id>e.id;)n--;queue.splice(n+1,0,e)}else queue.push(e);if(!waiting){waiting=!0;nextTick(flushSchedulerQueue)}}}var uid$2=0,Watcher=function(e,t,n,o,i){this.vm=e;i&&(e._watcher=this);e._watchers.push(this);if(o){this.deep=!!o.deep;this.user=!!o.user;this.lazy=!!o.lazy;this.sync=!!o.sync;this.before=o.before}else this.deep=this.user=this.lazy=this.sync=!1;this.cb=n;this.id=++uid$2;this.active=!0;this.dirty=this.lazy;this.deps=[];this.newDeps=[];this.depIds=new _Set;this.newDepIds=new _Set;this.expression="";if("function"==typeof t)this.getter=t;else{this.getter=parsePath(t);this.getter||(this.getter=noop)}this.value=this.lazy?void 0:this.get()};Watcher.prototype.get=function(){pushTarget(this);var e,t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;handleError(e,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&traverse(e);popTarget();this.cleanupDeps()}return e};Watcher.prototype.addDep=function(e){var t=e.id;if(!this.newDepIds.has(t)){this.newDepIds.add(t);this.newDeps.push(e);this.depIds.has(t)||e.addSub(this)}};Watcher.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds;this.newDepIds=n;this.newDepIds.clear();n=this.deps;this.deps=this.newDeps;this.newDeps=n;this.newDeps.length=0};Watcher.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():queueWatcher(this)};Watcher.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||isObject(e)||this.deep){var t=this.value;this.value=e;if(this.user)try{this.cb.call(this.vm,e,t)}catch(e){handleError(e,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,e,t)}}};Watcher.prototype.evaluate=function(){this.value=this.get();this.dirty=!1};Watcher.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()};Watcher.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||remove(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var sharedPropertyDefinition={enumerable:!0,configurable:!0,get:noop,set:noop};function proxy(e,t,n){sharedPropertyDefinition.get=function(){return this[t][n]};sharedPropertyDefinition.set=function(e){this[t][n]=e};Object.defineProperty(e,n,sharedPropertyDefinition)}function initState(e){e._watchers=[];var t=e.$options;t.props&&initProps(e,t.props);t.methods&&initMethods(e,t.methods);t.data?initData(e):observe(e._data={},!0);t.computed&&initComputed(e,t.computed);t.watch&&t.watch!==nativeWatch&&initWatch(e,t.watch)}function initProps(n,o){var i=n.$options.propsData||{},r=n._props={},s=n.$options._propKeys=[];!n.$parent||toggleObserving(!1);for(var e in o)!function(e){s.push(e);var t=validateProp(e,o,i,n);defineReactive$$1(r,e,t);e in n||proxy(n,"_props",e)}(e);toggleObserving(!0)}function initData(e){var t=e.$options.data;isPlainObject(t=e._data="function"==typeof t?getData(t,e):t||{})||(t={});for(var n=Object.keys(t),o=e.$options.props,i=(e.$options.methods,n.length);i--;){var r=n[i];o&&hasOwn(o,r)||isReserved(r)||proxy(e,"_data",r)}observe(t,!0)}function getData(e,t){pushTarget();try{return e.call(t,t)}catch(e){handleError(e,t,"data()");return{}}finally{popTarget()}}var computedWatcherOptions={lazy:!0};function initComputed(e,t){var n,o=e._computedWatchers=Object.create(null),i=isServerRendering();for(n in t){var r=t[n],s="function"==typeof r?r:r.get;i||(o[n]=new Watcher(e,s||noop,noop,computedWatcherOptions));n in e||defineComputed(e,n,r)}}function defineComputed(e,t,n){var o=!isServerRendering();if("function"==typeof n){sharedPropertyDefinition.get=o?createComputedGetter(t):createGetterInvoker(n);sharedPropertyDefinition.set=noop}else{sharedPropertyDefinition.get=n.get?o&&!1!==n.cache?createComputedGetter(t):createGetterInvoker(n.get):noop;sharedPropertyDefinition.set=n.set||noop}Object.defineProperty(e,t,sharedPropertyDefinition)}function createComputedGetter(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e){e.dirty&&e.evaluate();Dep.target&&e.depend();return e.value}}}function createGetterInvoker(e){return function(){return e.call(this,this)}}function initMethods(e,t){e.$options.props;for(var n in t)e[n]="function"!=typeof t[n]?noop:bind(t[n],e)}function initWatch(e,t){for(var n in t){var o=t[n];if(Array.isArray(o))for(var i=0;i<o.length;i++)createWatcher(e,n,o[i]);else createWatcher(e,n,o)}}function createWatcher(e,t,n,o){isPlainObject(n)&&(n=(o=n).handler);"string"==typeof n&&(n=e[n]);return e.$watch(t,n,o)}function stateMixin(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t);Object.defineProperty(e.prototype,"$props",n);e.prototype.$set=set;e.prototype.$delete=del;e.prototype.$watch=function(e,t,n){if(isPlainObject(t))return createWatcher(this,e,t,n);(n=n||{}).user=!0;var o=new Watcher(this,e,t,n);if(n.immediate)try{t.call(this,o.value)}catch(e){handleError(e,this,'callback for immediate watcher "'+o.expression+'"')}return function(){o.teardown()}}}var uid$3=0;function initMixin(e){e.prototype._init=function(e){var t=this;t._uid=uid$3++;t._isVue=!0;e&&e._isComponent?initInternalComponent(t,e):t.$options=mergeOptions(resolveConstructorOptions(t.constructor),e||{},t);initLifecycle((t._renderProxy=t)._self=t);initEvents(t);initRender(t);callHook(t,"beforeCreate");initInjections(t);initState(t);initProvide(t);callHook(t,"created");t.$options.el&&t.$mount(t.$options.el)}}function initInternalComponent(e,t){var n=e.$options=Object.create(e.constructor.options),e=t._parentVnode;n.parent=t.parent;e=(n._parentVnode=e).componentOptions;n.propsData=e.propsData;n._parentListeners=e.listeners;n._renderChildren=e.children;n._componentTag=e.tag;if(t.render){n.render=t.render;n.staticRenderFns=t.staticRenderFns}}function resolveConstructorOptions(e){var t=e.options;if(e.super){var n=resolveConstructorOptions(e.super);if(n!==e.superOptions){e.superOptions=n;var o=resolveModifiedOptions(e);o&&extend(e.extendOptions,o);(t=e.options=mergeOptions(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function resolveModifiedOptions(e){var t,n,o=e.options,i=e.sealedOptions;for(n in o)o[n]!==i[n]&&((t=t||{})[n]=o[n]);return t}function Vue(e){this._init(e)}initMixin(Vue);stateMixin(Vue);eventsMixin(Vue);lifecycleMixin(Vue);renderMixin(Vue);function initUse(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(-1<t.indexOf(e))return this;var n=toArray(arguments,1);n.unshift(this);"function"==typeof e.install?e.install.apply(e,n):"function"==typeof e&&e.apply(null,n);t.push(e);return this}}function initMixin$1(e){e.mixin=function(e){this.options=mergeOptions(this.options,e);return this}}function initExtend(e){e.cid=0;var s=1;e.extend=function(e){e=e||{};var t=this,n=t.cid,o=e._Ctor||(e._Ctor={});if(o[n])return o[n];function i(e){this._init(e)}var r=e.name||t.options.name;((i.prototype=Object.create(t.prototype)).constructor=i).cid=s++;i.options=mergeOptions(t.options,e);i.super=t;i.options.props&&initProps$1(i);i.options.computed&&initComputed$1(i);i.extend=t.extend;i.mixin=t.mixin;i.use=t.use;ASSET_TYPES.forEach(function(e){i[e]=t[e]});r&&(i.options.components[r]=i);i.superOptions=t.options;i.extendOptions=e;i.sealedOptions=extend({},i.options);return o[n]=i}}function initProps$1(e){for(var t in e.options.props)proxy(e.prototype,"_props",t)}function initComputed$1(e){var t,n=e.options.computed;for(t in n)defineComputed(e.prototype,t,n[t])}function initAssetRegisters(e){ASSET_TYPES.forEach(function(n){e[n]=function(e,t){if(t){if("component"===n&&isPlainObject(t)){t.name=t.name||e;t=this.options._base.extend(t)}"directive"===n&&"function"==typeof t&&(t={bind:t,update:t});return this.options[n+"s"][e]=t}return this.options[n+"s"][e]}})}function getComponentName(e){return e&&(e.Ctor.options.name||e.tag)}function matches(e,t){return Array.isArray(e)?-1<e.indexOf(t):"string"==typeof e?-1<e.split(",").indexOf(t):!!isRegExp(e)&&e.test(t)}function pruneCache(e,t){var n,o=e.cache,i=e.keys,r=e._vnode;for(n in o){var s=o[n];if(s){s=getComponentName(s.componentOptions);s&&!t(s)&&pruneCacheEntry(o,n,i,r)}}}function pruneCacheEntry(e,t,n,o){var i=e[t];!i||o&&i.tag===o.tag||i.componentInstance.$destroy();e[t]=null;remove(n,t)}var patternTypes=[String,RegExp,Array],KeepAlive={name:"keep-alive",abstract:!0,props:{include:patternTypes,exclude:patternTypes,max:[String,Number]},created:function(){this.cache=Object.create(null);this.keys=[]},destroyed:function(){for(var e in this.cache)pruneCacheEntry(this.cache,e,this.keys)},mounted:function(){var e=this;this.$watch("include",function(t){pruneCache(e,function(e){return matches(t,e)})});this.$watch("exclude",function(t){pruneCache(e,function(e){return!matches(t,e)})})},render:function(){var e=this.$slots.default,t=getFirstComponentChild(e),n=t&&t.componentOptions;if(n){var o=getComponentName(n),i=this.include,r=this.exclude;if(i&&(!o||!matches(i,o))||r&&o&&matches(r,o))return t;r=this.cache,o=this.keys,n=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;if(r[n]){t.componentInstance=r[n].componentInstance;remove(o,n);o.push(n)}else{r[n]=t;o.push(n);this.max&&o.length>parseInt(this.max)&&pruneCacheEntry(r,o[0],o,this._vnode)}t.data.keepAlive=!0}return t||e&&e[0]}},builtInComponents={KeepAlive:KeepAlive};function initGlobalAPI(t){var e={get:function(){return config}};Object.defineProperty(t,"config",e);t.util={warn:warn,extend:extend,mergeOptions:mergeOptions,defineReactive:defineReactive$$1};t.set=set;t.delete=del;t.nextTick=nextTick;t.observable=function(e){observe(e);return e};t.options=Object.create(null);ASSET_TYPES.forEach(function(e){t.options[e+"s"]=Object.create(null)});extend((t.options._base=t).options.components,builtInComponents);initUse(t);initMixin$1(t);initExtend(t);initAssetRegisters(t)}initGlobalAPI(Vue);Object.defineProperty(Vue.prototype,"$isServer",{get:isServerRendering});Object.defineProperty(Vue.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}});Object.defineProperty(Vue,"FunctionalRenderContext",{value:FunctionalRenderContext});Vue.version="2.6.12";var isReservedAttr=makeMap("style,class"),acceptValue=makeMap("input,textarea,option,select,progress"),mustUseProp=function(e,t,n){return"value"===n&&acceptValue(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},isEnumeratedAttr=makeMap("contenteditable,draggable,spellcheck"),isValidContentEditableValue=makeMap("events,caret,typing,plaintext-only"),convertEnumeratedValue=function(e,t){return isFalsyAttrValue(t)||"false"===t?"false":"contenteditable"===e&&isValidContentEditableValue(t)?t:"true"},isBooleanAttr=makeMap("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),xlinkNS="http://www.w3.org/1999/xlink",isXlink=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},getXlinkProp=function(e){return isXlink(e)?e.slice(6,e.length):""},isFalsyAttrValue=function(e){return null==e||!1===e};function genClassForVnode(e){for(var t=e.data,n=e,o=e;isDef(o.componentInstance);)(o=o.componentInstance._vnode)&&o.data&&(t=mergeClassData(o.data,t));for(;isDef(n=n.parent);)n&&n.data&&(t=mergeClassData(t,n.data));return renderClass(t.staticClass,t.class)}function mergeClassData(e,t){return{staticClass:concat(e.staticClass,t.staticClass),class:isDef(e.class)?[e.class,t.class]:t.class}}function renderClass(e,t){return isDef(e)||isDef(t)?concat(e,stringifyClass(t)):""}function concat(e,t){return e?t?e+" "+t:e:t||""}function stringifyClass(e){return Array.isArray(e)?stringifyArray(e):isObject(e)?stringifyObject(e):"string"==typeof e?e:""}function stringifyArray(e){for(var t,n="",o=0,i=e.length;o<i;o++)if(isDef(t=stringifyClass(e[o]))&&""!==t){n&&(n+=" ");n+=t}return n}function stringifyObject(e){var t,n="";for(t in e)if(e[t]){n&&(n+=" ");n+=t}return n}var namespaceMap={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},isHTMLTag=makeMap("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),isSVG=makeMap("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),isReservedTag=function(e){return isHTMLTag(e)||isSVG(e)};function getTagNamespace(e){return isSVG(e)?"svg":"math"===e?"math":void 0}var unknownElementCache=Object.create(null);function isUnknownElement(e){if(!inBrowser)return!0;if(isReservedTag(e))return!1;e=e.toLowerCase();if(null!=unknownElementCache[e])return unknownElementCache[e];var t=document.createElement(e);return-1<e.indexOf("-")?unknownElementCache[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:unknownElementCache[e]=/HTMLUnknownElement/.test(t.toString())}var isTextInputType=makeMap("text,number,password,search,email,tel,url");function query(e){if("string"!=typeof e)return e;e=document.querySelector(e);return e||document.createElement("div")}function createElement$1(e,t){var n=document.createElement(e);if("select"!==e)return n;t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple");return n}function createElementNS(e,t){return document.createElementNS(namespaceMap[e],t)}function createTextNode(e){return document.createTextNode(e)}function createComment(e){return document.createComment(e)}function insertBefore(e,t,n){e.insertBefore(t,n)}function removeChild(e,t){e.removeChild(t)}function appendChild(e,t){e.appendChild(t)}function parentNode(e){return e.parentNode}function nextSibling(e){return e.nextSibling}function tagName(e){return e.tagName}function setTextContent(e,t){e.textContent=t}function setStyleScope(e,t){e.setAttribute(t,"")}var nodeOps=Object.freeze({createElement:createElement$1,createElementNS:createElementNS,createTextNode:createTextNode,createComment:createComment,insertBefore:insertBefore,removeChild:removeChild,appendChild:appendChild,parentNode:parentNode,nextSibling:nextSibling,tagName:tagName,setTextContent:setTextContent,setStyleScope:setStyleScope}),ref={create:function(e,t){registerRef(t)},update:function(e,t){if(e.data.ref!==t.data.ref){registerRef(e,!0);registerRef(t)}},destroy:function(e){registerRef(e,!0)}};function registerRef(e,t){var n=e.data.ref;if(isDef(n)){var o=e.context,i=e.componentInstance||e.elm,o=o.$refs;t?Array.isArray(o[n])?remove(o[n],i):o[n]===i&&(o[n]=void 0):e.data.refInFor?Array.isArray(o[n])?o[n].indexOf(i)<0&&o[n].push(i):o[n]=[i]:o[n]=i}}var emptyNode=new VNode("",{},[]),hooks=["create","activate","update","remove","destroy"];function sameVnode(e,t){return e.key===t.key&&(e.tag===t.tag&&e.isComment===t.isComment&&isDef(e.data)===isDef(t.data)&&sameInputType(e,t)||isTrue(e.isAsyncPlaceholder)&&e.asyncFactory===t.asyncFactory&&isUndef(t.asyncFactory.error))}function sameInputType(e,t){if("input"!==e.tag)return!0;var e=isDef(n=e.data)&&isDef(n=n.attrs)&&n.type,n=isDef(n=t.data)&&isDef(n=n.attrs)&&n.type;return e===n||isTextInputType(e)&&isTextInputType(n)}function createKeyToOldIdx(e,t,n){for(var o,i={},r=t;r<=n;++r)isDef(o=e[r].key)&&(i[o]=r);return i}function createPatchFunction(e){for(var t,g={},n=e.modules,v=e.nodeOps,o=0;o<hooks.length;++o){g[hooks[o]]=[];for(t=0;t<n.length;++t)isDef(n[t][hooks[o]])&&g[hooks[o]].push(n[t][hooks[o]])}function r(e,t){function n(){0==--n.listeners&&s(e)}n.listeners=t;return n}function s(e){var t=v.parentNode(e);isDef(t)&&v.removeChild(t,e)}function _(e,t,n,o,i,r,s){isDef(e.elm)&&isDef(r)&&(e=r[s]=cloneVNode(e));e.isRootInsert=!i;if(!function(e,t,n,o){var i=e.data;if(isDef(i)){var r=isDef(e.componentInstance)&&i.keepAlive;isDef(i=i.hook)&&isDef(i=i.init)&&i(e,!1);if(isDef(e.componentInstance)){p(e,t);a(n,e.elm,o);isTrue(r)&&function(e,t,n,o){var i,r=e;for(;r.componentInstance;){r=r.componentInstance._vnode;if(isDef(i=r.data)&&isDef(i=i.transition)){for(i=0;i<g.activate.length;++i)g.activate[i](emptyNode,r);t.push(r);break}}a(n,e.elm,o)}(e,t,n,o);return!0}}}(e,t,n,o)){r=e.data,s=e.children,i=e.tag;if(isDef(i)){e.elm=e.ns?v.createElementNS(e.ns,i):v.createElement(i,e);l(e);f(e,s,t);isDef(r)&&b(e,t);a(n,e.elm,o)}else if(isTrue(e.isComment)){e.elm=v.createComment(e.text);a(n,e.elm,o)}else{e.elm=v.createTextNode(e.text);a(n,e.elm,o)}}}function p(e,t){if(isDef(e.data.pendingInsert)){t.push.apply(t,e.data.pendingInsert);e.data.pendingInsert=null}e.elm=e.componentInstance.$el;if(m(e)){b(e,t);l(e)}else{registerRef(e);t.push(e)}}function a(e,t,n){isDef(e)&&(isDef(n)?v.parentNode(n)===e&&v.insertBefore(e,t,n):v.appendChild(e,t))}function f(e,t,n){if(Array.isArray(t))for(var o=0;o<t.length;++o)_(t[o],n,e.elm,null,!0,t,o);else isPrimitive(e.text)&&v.appendChild(e.elm,v.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return isDef(e.tag)}function b(e,t){for(var n=0;n<g.create.length;++n)g.create[n](emptyNode,e);if(isDef(o=e.data.hook)){isDef(o.create)&&o.create(emptyNode,e);isDef(o.insert)&&t.push(e)}}function l(e){var t;if(isDef(t=e.fnScopeId))v.setStyleScope(e.elm,t);else for(var n=e;n;){isDef(t=n.context)&&isDef(t=t.$options._scopeId)&&v.setStyleScope(e.elm,t);n=n.parent}isDef(t=activeInstance)&&t!==e.context&&t!==e.fnContext&&isDef(t=t.$options._scopeId)&&v.setStyleScope(e.elm,t)}function y(e,t,n,o,i,r){for(;o<=i;++o)_(n[o],r,e,t,!1,n,o)}function C(e){var t,n,o=e.data;if(isDef(o)){isDef(t=o.hook)&&isDef(t=t.destroy)&&t(e);for(t=0;t<g.destroy.length;++t)g.destroy[t](e)}if(isDef(t=e.children))for(n=0;n<e.children.length;++n)C(e.children[n])}function A(e,t,n){for(;t<=n;++t){var o=e[t];if(isDef(o))if(isDef(o.tag)){!function e(t,n){if(isDef(n)||isDef(t.data)){var o,i=g.remove.length+1;isDef(n)?n.listeners+=i:n=r(t.elm,i);isDef(o=t.componentInstance)&&isDef(o=o._vnode)&&isDef(o.data)&&e(o,n);for(o=0;o<g.remove.length;++o)g.remove[o](t,n);isDef(o=t.data.hook)&&isDef(o=o.remove)?o(t,n):n()}else s(t.elm)}(o);C(o)}else s(o.elm)}}function c(e,t,n,o,i){for(var r,s,a,l=0,c=0,u=t.length-1,d=t[0],h=t[u],p=n.length-1,g=n[0],f=n[p],m=!i;l<=u&&c<=p;)if(isUndef(d))d=t[++l];else if(isUndef(h))h=t[--u];else if(sameVnode(d,g)){T(d,g,o,n,c);d=t[++l];g=n[++c]}else if(sameVnode(h,f)){T(h,f,o,n,p);h=t[--u];f=n[--p]}else if(sameVnode(d,f)){T(d,f,o,n,p);m&&v.insertBefore(e,d.elm,v.nextSibling(h.elm));d=t[++l];f=n[--p]}else if(sameVnode(h,g)){T(h,g,o,n,c);m&&v.insertBefore(e,h.elm,d.elm);h=t[--u];g=n[++c]}else{isUndef(r)&&(r=createKeyToOldIdx(t,l,u));if(isUndef(s=isDef(g.key)?r[g.key]:function(e,t,n,o){for(var i=n;i<o;i++){var r=t[i];if(isDef(r)&&sameVnode(e,r))return i}}(g,t,l,u)))_(g,o,e,d.elm,!1,n,c);else if(sameVnode(a=t[s],g)){T(a,g,o,n,c);t[s]=void 0;m&&v.insertBefore(e,a.elm,d.elm)}else _(g,o,e,d.elm,!1,n,c);g=n[++c]}u<l?y(e,isUndef(n[p+1])?null:n[p+1].elm,n,c,p,o):p<c&&A(t,l,u)}function T(e,t,n,o,i,r){if(e!==t){isDef(t.elm)&&isDef(o)&&(t=o[i]=cloneVNode(t));var s=t.elm=e.elm;if(isTrue(e.isAsyncPlaceholder))isDef(t.asyncFactory.resolved)?I(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(isTrue(t.isStatic)&&isTrue(e.isStatic)&&t.key===e.key&&(isTrue(t.isCloned)||isTrue(t.isOnce)))t.componentInstance=e.componentInstance;else{var a,l=t.data;isDef(l)&&isDef(a=l.hook)&&isDef(a=a.prepatch)&&a(e,t);o=e.children,i=t.children;if(isDef(l)&&m(t)){for(a=0;a<g.update.length;++a)g.update[a](e,t);isDef(a=l.hook)&&isDef(a=a.update)&&a(e,t)}if(isUndef(t.text))if(isDef(o)&&isDef(i))o!==i&&c(s,o,i,n,r);else if(isDef(i)){isDef(e.text)&&v.setTextContent(s,"");y(s,null,i,0,i.length-1,n)}else isDef(o)?A(o,0,o.length-1):isDef(e.text)&&v.setTextContent(s,"");else e.text!==t.text&&v.setTextContent(s,t.text);isDef(l)&&isDef(a=l.hook)&&isDef(a=a.postpatch)&&a(e,t)}}}function S(e,t,n){if(isTrue(n)&&isDef(e.parent))e.parent.data.pendingInsert=t;else for(var o=0;o<t.length;++o)t[o].data.hook.insert(t[o])}var E=makeMap("attrs,class,staticClass,staticStyle,key");function I(e,t,n,o){var i,r=t.tag,s=t.data,a=t.children;o=o||s&&s.pre;t.elm=e;if(isTrue(t.isComment)&&isDef(t.asyncFactory))return t.isAsyncPlaceholder=!0;if(isDef(s)){isDef(i=s.hook)&&isDef(i=i.init)&&i(t,!0);if(isDef(i=t.componentInstance)){p(t,n);return 1}}if(isDef(r)){if(isDef(a))if(e.hasChildNodes())if(isDef(i=s)&&isDef(i=i.domProps)&&isDef(i=i.innerHTML)){if(i!==e.innerHTML)return}else{for(var l=!0,c=e.firstChild,u=0;u<a.length;u++){if(!c||!I(c,a[u],n,o)){l=!1;break}c=c.nextSibling}if(!l||c)return}else f(t,a,n);if(isDef(s)){var d,h=!1;for(d in s)if(!E(d)){h=!0;b(t,n);break}!h&&s.class&&traverse(s.class)}}else e.data!==t.text&&(e.data=t.text);return 1}return function(e,t,n,o){if(!isUndef(t)){var i=!1,r=[];if(isUndef(e)){i=!0;_(t,r)}else{var s=isDef(e.nodeType);if(!s&&sameVnode(e,t))T(e,t,r,null,null,o);else{if(s){if(1===e.nodeType&&e.hasAttribute(SSR_ATTR)){e.removeAttribute(SSR_ATTR);n=!0}if(isTrue(n)&&I(e,t,r)){S(t,r,!0);return e}e=(a=e,new VNode(v.tagName(a).toLowerCase(),{},[],void 0,a))}var n=e.elm,a=v.parentNode(n);_(t,r,n._leaveCb?null:a,v.nextSibling(n));if(isDef(t.parent))for(var l=t.parent,c=m(t);l;){for(var u=0;u<g.destroy.length;++u)g.destroy[u](l);l.elm=t.elm;if(c){for(var d=0;d<g.create.length;++d)g.create[d](emptyNode,l);var h=l.data.hook.insert;if(h.merged)for(var p=1;p<h.fns.length;p++)h.fns[p]()}else registerRef(l);l=l.parent}isDef(a)?A([e],0,0):isDef(e.tag)&&C(e)}}S(t,r,i);return t.elm}isDef(e)&&C(e)}}var directives={create:updateDirectives,update:updateDirectives,destroy:function(e){updateDirectives(e,emptyNode)}};function updateDirectives(e,t){(e.data.directives||t.data.directives)&&_update(e,t)}function _update(t,n){var e,o,i,r=t===emptyNode,s=n===emptyNode,a=normalizeDirectives$1(t.data.directives,t.context),l=normalizeDirectives$1(n.data.directives,n.context),c=[],u=[];for(e in l){o=a[e];i=l[e];if(o){i.oldValue=o.value;i.oldArg=o.arg;callHook$1(i,"update",n,t);i.def&&i.def.componentUpdated&&u.push(i)}else{callHook$1(i,"bind",n,t);i.def&&i.def.inserted&&c.push(i)}}if(c.length){var d=function(){for(var e=0;e<c.length;e++)callHook$1(c[e],"inserted",n,t)};r?mergeVNodeHook(n,"insert",d):d()}u.length&&mergeVNodeHook(n,"postpatch",function(){for(var e=0;e<u.length;e++)callHook$1(u[e],"componentUpdated",n,t)});if(!r)for(e in a)l[e]||callHook$1(a[e],"unbind",t,t,s)}var emptyModifiers=Object.create(null);function normalizeDirectives$1(e,t){var n,o,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++){(o=e[n]).modifiers||(o.modifiers=emptyModifiers);(i[getRawDirName(o)]=o).def=resolveAsset(t.$options,"directives",o.name)}return i}function getRawDirName(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function callHook$1(t,n,o,e,i){var r=t.def&&t.def[n];if(r)try{r(o.elm,t,o,e,i)}catch(e){handleError(e,o.context,"directive "+t.name+" "+n+" hook")}}var baseModules=[ref,directives];function updateAttrs(e,t){var n=t.componentOptions;if(!(isDef(n)&&!1===n.Ctor.options.inheritAttrs||isUndef(e.data.attrs)&&isUndef(t.data.attrs))){var o,i,r=t.elm,s=e.data.attrs||{},a=t.data.attrs||{};isDef(a.__ob__)&&(a=t.data.attrs=extend({},a));for(o in a){i=a[o];s[o]!==i&&setAttr(r,o,i)}(isIE||isEdge)&&a.value!==s.value&&setAttr(r,"value",a.value);for(o in s)isUndef(a[o])&&(isXlink(o)?r.removeAttributeNS(xlinkNS,getXlinkProp(o)):isEnumeratedAttr(o)||r.removeAttribute(o))}}function setAttr(e,t,n){if(-1<e.tagName.indexOf("-"))baseSetAttr(e,t,n);else if(isBooleanAttr(t))if(isFalsyAttrValue(n))e.removeAttribute(t);else{n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t;e.setAttribute(t,n)}else isEnumeratedAttr(t)?e.setAttribute(t,convertEnumeratedValue(t,n)):isXlink(t)?isFalsyAttrValue(n)?e.removeAttributeNS(xlinkNS,getXlinkProp(t)):e.setAttributeNS(xlinkNS,t,n):baseSetAttr(e,t,n)}function baseSetAttr(t,e,n){if(isFalsyAttrValue(n))t.removeAttribute(e);else{if(isIE&&!isIE9&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var o=function(e){e.stopImmediatePropagation();t.removeEventListener("input",o)};t.addEventListener("input",o);t.__ieph=!0}t.setAttribute(e,n)}}var attrs={create:updateAttrs,update:updateAttrs};function updateClass(e,t){var n=t.elm,o=t.data,e=e.data;if(!(isUndef(o.staticClass)&&isUndef(o.class)&&(isUndef(e)||isUndef(e.staticClass)&&isUndef(e.class)))){e=genClassForVnode(t),t=n._transitionClasses;isDef(t)&&(e=concat(e,stringifyClass(t)));if(e!==n._prevClass){n.setAttribute("class",e);n._prevClass=e}}}var klass={create:updateClass,update:updateClass},RANGE_TOKEN="__r",CHECKBOX_RADIO_TOKEN="__c",target$1;function normalizeEvents(e){if(isDef(e[RANGE_TOKEN])){var t=isIE?"change":"input";e[t]=[].concat(e[RANGE_TOKEN],e[t]||[]);delete e[RANGE_TOKEN]}if(isDef(e[CHECKBOX_RADIO_TOKEN])){e.change=[].concat(e[CHECKBOX_RADIO_TOKEN],e.change||[]);delete e[CHECKBOX_RADIO_TOKEN]}}function createOnceHandler$1(t,n,o){var i=target$1;return function e(){null!==n.apply(null,arguments)&&remove$2(t,e,o,i)}}var useMicrotaskFix=isUsingMicroTask&&!(isFF&&Number(isFF[1])<=53);function add$1(e,t,n,o){if(useMicrotaskFix){var i=currentFlushTimestamp,r=t;t=r._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return r.apply(this,arguments)}}target$1.addEventListener(e,t,supportsPassive?{capture:n,passive:o}:n)}function remove$2(e,t,n,o){(o||target$1).removeEventListener(e,t._wrapper||t,n)}function updateDOMListeners(e,t){if(!isUndef(e.data.on)||!isUndef(t.data.on)){var n=t.data.on||{},e=e.data.on||{};target$1=t.elm;normalizeEvents(n);updateListeners(n,e,add$1,remove$2,createOnceHandler$1,t.context);target$1=void 0}}var events={create:updateDOMListeners,update:updateDOMListeners},svgContainer;function updateDOMProps(e,t){if(!isUndef(e.data.domProps)||!isUndef(t.data.domProps)){var n,o,i=t.elm,r=e.data.domProps||{},s=t.data.domProps||{};isDef(s.__ob__)&&(s=t.data.domProps=extend({},s));for(n in r)n in s||(i[n]="");for(n in s){o=s[n];if("textContent"===n||"innerHTML"===n){t.children&&(t.children.length=0);if(o===r[n])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===n&&"PROGRESS"!==i.tagName){var a=isUndef(i._value=o)?"":String(o);shouldUpdateValue(i,a)&&(i.value=a)}else if("innerHTML"===n&&isSVG(i.tagName)&&isUndef(i.innerHTML)){(svgContainer=svgContainer||document.createElement("div")).innerHTML="<svg>"+o+"</svg>";for(var l=svgContainer.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;l.firstChild;)i.appendChild(l.firstChild)}else if(o!==r[n])try{i[n]=o}catch(e){}}}}function shouldUpdateValue(e,t){return!e.composing&&("OPTION"===e.tagName||isNotInFocusAndDirty(e,t)||isDirtyWithModifiers(e,t))}function isNotInFocusAndDirty(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}function isDirtyWithModifiers(e,t){var n=e.value,e=e._vModifiers;if(isDef(e)){if(e.number)return toNumber(n)!==toNumber(t);if(e.trim)return n.trim()!==t.trim()}return n!==t}var domProps={create:updateDOMProps,update:updateDOMProps},parseStyleText=cached(function(e){var t={},n=/:(.+)/;e.split(/;(?![^(]*\))/g).forEach(function(e){if(e){e=e.split(n);1<e.length&&(t[e[0].trim()]=e[1].trim())}});return t});function normalizeStyleData(e){var t=normalizeStyleBinding(e.style);return e.staticStyle?extend(e.staticStyle,t):t}function normalizeStyleBinding(e){return Array.isArray(e)?toObject(e):"string"==typeof e?parseStyleText(e):e}function getStyle(e,t){var n,o={};if(t)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=normalizeStyleData(i.data))&&extend(o,n);(n=normalizeStyleData(e.data))&&extend(o,n);for(var r=e;r=r.parent;)r.data&&(n=normalizeStyleData(r.data))&&extend(o,n);return o}var cssVarRE=/^--/,importantRE=/\s*!important$/,setProp=function(e,t,n){if(cssVarRE.test(t))e.style.setProperty(t,n);else if(importantRE.test(n))e.style.setProperty(hyphenate(t),n.replace(importantRE,""),"important");else{var o=normalize(t);if(Array.isArray(n))for(var i=0,r=n.length;i<r;i++)e.style[o]=n[i];else e.style[o]=n}},vendorNames=["Webkit","Moz","ms"],emptyStyle,normalize=cached(function(e){emptyStyle=emptyStyle||document.createElement("div").style;if("filter"!==(e=camelize(e))&&e in emptyStyle)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<vendorNames.length;n++){var o=vendorNames[n]+t;if(o in emptyStyle)return o}});function updateStyle(e,t){var n=t.data,e=e.data;if(!(isUndef(n.staticStyle)&&isUndef(n.style)&&isUndef(e.staticStyle)&&isUndef(e.style))){var o,i,r=t.elm,n=e.staticStyle,e=e.normalizedStyle||e.style||{},s=n||e,e=normalizeStyleBinding(t.data.style)||{};t.data.normalizedStyle=isDef(e.__ob__)?extend({},e):e;var a=getStyle(t,!0);for(i in s)isUndef(a[i])&&setProp(r,i,"");for(i in a)(o=a[i])!==s[i]&&setProp(r,i,null==o?"":o)}}var style={create:updateStyle,update:updateStyle},whitespaceRE=/\s+/;function addClass(t,e){if(e=e&&e.trim())if(t.classList)-1<e.indexOf(" ")?e.split(whitespaceRE).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function removeClass(t,e){if(e=e&&e.trim())if(t.classList){-1<e.indexOf(" ")?e.split(whitespaceRE).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e);t.classList.length||t.removeAttribute("class")}else{for(var n=" "+(t.getAttribute("class")||"")+" ",o=" "+e+" ";0<=n.indexOf(o);)n=n.replace(o," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function resolveTransition(e){if(e){if("object"!=typeof e)return"string"==typeof e?autoCssTransition(e):void 0;var t={};!1!==e.css&&extend(t,autoCssTransition(e.name||"v"));extend(t,e);return t}}var autoCssTransition=cached(function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}}),hasTransition=inBrowser&&!isIE9,TRANSITION="transition",ANIMATION="animation",transitionProp="transition",transitionEndEvent="transitionend",animationProp="animation",animationEndEvent="animationend";if(hasTransition){if(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend){transitionProp="WebkitTransition";transitionEndEvent="webkitTransitionEnd"}if(void 0===window.onanimationend&&void 0!==window.onwebkitanimationend){animationProp="WebkitAnimation";animationEndEvent="webkitAnimationEnd"}}var raf=inBrowser?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function nextFrame(e){raf(function(){raf(e)})}function addTransitionClass(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);if(n.indexOf(t)<0){n.push(t);addClass(e,t)}}function removeTransitionClass(e,t){e._transitionClasses&&remove(e._transitionClasses,t);removeClass(e,t)}function whenTransitionEnds(t,e,n){var o=getTransitionInfo(t,e),i=o.type,e=o.timeout,r=o.propCount;if(!i)return n();function s(){t.removeEventListener(a,c);n()}var a=i===TRANSITION?transitionEndEvent:animationEndEvent,l=0,c=function(e){e.target===t&&++l>=r&&s()};setTimeout(function(){l<r&&s()},e+1);t.addEventListener(a,c)}var transformRE=/\b(transform|all)(,|$)/;function getTransitionInfo(e,t){var n,o=window.getComputedStyle(e),i=(o[transitionProp+"Delay"]||"").split(", "),r=(o[transitionProp+"Duration"]||"").split(", "),s=getTimeout(i,r),a=(o[animationProp+"Delay"]||"").split(", "),l=(o[animationProp+"Duration"]||"").split(", "),e=getTimeout(a,l),i=0,a=0;if(t===TRANSITION){if(0<s){n=TRANSITION;i=s;a=r.length}}else if(t===ANIMATION){if(0<e){n=ANIMATION;i=e;a=l.length}}else a=(n=0<(i=Math.max(s,e))?e<s?TRANSITION:ANIMATION:null)?(n===TRANSITION?r:l).length:0;return{type:n,timeout:i,propCount:a,hasTransform:n===TRANSITION&&transformRE.test(o[transitionProp+"Property"])}}function getTimeout(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map(function(e,t){return toMs(e)+toMs(n[t])}))}function toMs(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function enter(t,e){var n=t.elm;if(isDef(n._leaveCb)){n._leaveCb.cancelled=!0;n._leaveCb()}var o=resolveTransition(t.data.transition);if(!isUndef(o)&&!isDef(n._enterCb)&&1===n.nodeType){for(var i=o.css,r=o.type,s=o.enterClass,a=o.enterToClass,l=o.enterActiveClass,c=o.appearClass,u=o.appearToClass,d=o.appearActiveClass,h=o.beforeEnter,p=o.enter,g=o.afterEnter,f=o.enterCancelled,m=o.beforeAppear,v=o.appear,_=o.afterAppear,b=o.appearCancelled,y=o.duration,C=activeInstance,A=activeInstance.$vnode;A&&A.parent;){C=A.context;A=A.parent}o=!C._isMounted||!t.isRootInsert;if(!o||v||""===v){var T=o&&c?c:s,S=o&&d?d:l,E=o&&u?u:a,h=o&&m||h,I=o&&"function"==typeof v?v:p,k=o&&_||g,O=o&&b||f,w=toNumber(isObject(y)?y.enter:y),N=!1!==i&&!isIE9,R=getHookArgumentsLength(I),L=n._enterCb=once(function(){if(N){removeTransitionClass(n,E);removeTransitionClass(n,S)}if(L.cancelled){N&&removeTransitionClass(n,T);O&&O(n)}else k&&k(n);n._enterCb=null});t.data.show||mergeVNodeHook(t,"insert",function(){var e=n.parentNode,e=e&&e._pending&&e._pending[t.key];e&&e.tag===t.tag&&e.elm._leaveCb&&e.elm._leaveCb();I&&I(n,L)});h&&h(n);if(N){addTransitionClass(n,T);addTransitionClass(n,S);nextFrame(function(){removeTransitionClass(n,T);if(!L.cancelled){addTransitionClass(n,E);R||(isValidDuration(w)?setTimeout(L,w):whenTransitionEnds(n,r,L))}})}if(t.data.show){e&&e();I&&I(n,L)}N||R||L()}}}function leave(e,t){var n=e.elm;if(isDef(n._enterCb)){n._enterCb.cancelled=!0;n._enterCb()}var o=resolveTransition(e.data.transition);if(isUndef(o)||1!==n.nodeType)return t();if(!isDef(n._leaveCb)){var i=o.css,r=o.type,s=o.leaveClass,a=o.leaveToClass,l=o.leaveActiveClass,c=o.beforeLeave,u=o.leave,d=o.afterLeave,h=o.leaveCancelled,p=o.delayLeave,o=o.duration,g=!1!==i&&!isIE9,f=getHookArgumentsLength(u),m=toNumber(isObject(o)?o.leave:o),v=n._leaveCb=once(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null);if(g){removeTransitionClass(n,a);removeTransitionClass(n,l)}if(v.cancelled){g&&removeTransitionClass(n,s);h&&h(n)}else{t();d&&d(n)}n._leaveCb=null});p?p(_):_()}function _(){if(!v.cancelled){!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e);c&&c(n);if(g){addTransitionClass(n,s);addTransitionClass(n,l);nextFrame(function(){removeTransitionClass(n,s);if(!v.cancelled){addTransitionClass(n,a);f||(isValidDuration(m)?setTimeout(v,m):whenTransitionEnds(n,r,v))}})}u&&u(n,v);g||f||v()}}}function isValidDuration(e){return"number"==typeof e&&!isNaN(e)}function getHookArgumentsLength(e){if(isUndef(e))return!1;var t=e.fns;return isDef(t)?getHookArgumentsLength(Array.isArray(t)?t[0]:t):1<(e._length||e.length)}function _enter(e,t){!0!==t.data.show&&enter(t)}var transition=inBrowser?{create:_enter,activate:_enter,remove:function(e,t){!0!==e.data.show?leave(e,t):t()}}:{},platformModules=[attrs,klass,events,domProps,style,transition],modules=platformModules.concat(baseModules),patch=createPatchFunction({nodeOps:nodeOps,modules:modules});isIE9&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&trigger(e,"input")});var directive={inserted:function(e,t,n,o){if("select"===n.tag){o.elm&&!o.elm._vOptions?mergeVNodeHook(n,"postpatch",function(){directive.componentUpdated(e,t,n)}):setSelected(e,t,n.context);e._vOptions=[].map.call(e.options,getValue)}else if("textarea"===n.tag||isTextInputType(e.type)){e._vModifiers=t.modifiers;if(!t.modifiers.lazy){e.addEventListener("compositionstart",onCompositionStart);e.addEventListener("compositionend",onCompositionEnd);e.addEventListener("change",onCompositionEnd);isIE9&&(e.vmodel=!0)}}},componentUpdated:function(e,t,n){if("select"===n.tag){setSelected(e,t,n.context);var o=e._vOptions,i=e._vOptions=[].map.call(e.options,getValue);i.some(function(e,t){return!looseEqual(e,o[t])})&&(e.multiple?t.value.some(function(e){return hasNoMatchingOption(e,i)}):t.value!==t.oldValue&&hasNoMatchingOption(t.value,i))&&trigger(e,"change")}}};function setSelected(e,t,n){actuallySetSelected(e,t);(isIE||isEdge)&&setTimeout(function(){actuallySetSelected(e,t)},0)}function actuallySetSelected(e,t,n){var o=t.value,i=e.multiple;if(!i||Array.isArray(o)){for(var r,s,a=0,l=e.options.length;a<l;a++){s=e.options[a];if(i){r=-1<looseIndexOf(o,getValue(s));s.selected!==r&&(s.selected=r)}else if(looseEqual(getValue(s),o)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}i||(e.selectedIndex=-1)}}function hasNoMatchingOption(t,e){return e.every(function(e){return!looseEqual(e,t)})}function getValue(e){return"_value"in e?e._value:e.value}function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){if(e.target.composing){e.target.composing=!1;trigger(e.target,"input")}}function trigger(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0);e.dispatchEvent(n)}function locateNode(e){return!e.componentInstance||e.data&&e.data.transition?e:locateNode(e.componentInstance._vnode)}var show={bind:function(e,t,n){var o=t.value,t=(n=locateNode(n)).data&&n.data.transition,i=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;if(o&&t){n.data.show=!0;enter(n,function(){e.style.display=i})}else e.style.display=o?i:"none"},update:function(e,t,n){var o=t.value;if(!o!=!t.oldValue)if((n=locateNode(n)).data&&n.data.transition){n.data.show=!0;o?enter(n,function(){e.style.display=e.__vOriginalDisplay}):leave(n,function(){e.style.display="none"})}else e.style.display=o?e.__vOriginalDisplay:"none"},unbind:function(e,t,n,o,i){i||(e.style.display=e.__vOriginalDisplay)}},platformDirectives={model:directive,show:show},transitionProps={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function getRealChild(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?getRealChild(getFirstComponentChild(t.children)):e}function extractTransitionData(e){var t,n={},o=e.$options;for(t in o.propsData)n[t]=e[t];var i,r=o._parentListeners;for(i in r)n[camelize(i)]=r[i];return n}function placeholder(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function hasParentTransition(e){for(;e=e.parent;)if(e.data.transition)return 1}function isSameChild(e,t){return t.key===e.key&&t.tag===e.tag}var isNotTextNode=function(e){return e.tag||isAsyncPlaceholder(e)},isVShowDirective=function(e){return"show"===e.name},Transition={name:"transition",props:transitionProps,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(isNotTextNode)).length){var o=this.mode,i=n[0];if(hasParentTransition(this.$vnode))return i;var r=getRealChild(i);if(!r)return i;if(this._leaving)return placeholder(e,i);var s="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?s+"comment":s+r.tag:!isPrimitive(r.key)||0===String(r.key).indexOf(s)?r.key:s+r.key;var a=(r.data||(r.data={})).transition=extractTransitionData(this),n=this._vnode,s=getRealChild(n);r.data.directives&&r.data.directives.some(isVShowDirective)&&(r.data.show=!0);if(s&&s.data&&!isSameChild(r,s)&&!isAsyncPlaceholder(s)&&(!s.componentInstance||!s.componentInstance._vnode.isComment)){s=s.data.transition=extend({},a);if("out-in"===o){this._leaving=!0;mergeVNodeHook(s,"afterLeave",function(){t._leaving=!1;t.$forceUpdate()});return placeholder(e,i)}if("in-out"===o){if(isAsyncPlaceholder(r))return n;var l,n=function(){l()};mergeVNodeHook(a,"afterEnter",n);mergeVNodeHook(a,"enterCancelled",n);mergeVNodeHook(s,"delayLeave",function(e){l=e})}}return i}}},props=extend({tag:String,moveClass:String},transitionProps);delete props.mode;var TransitionGroup={props:props,beforeMount:function(){var o=this,i=this._update;this._update=function(e,t){var n=setActiveInstance(o);o.__patch__(o._vnode,o.kept,!1,!0);o._vnode=o.kept;n();i.call(o,e,t)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),o=this.prevChildren=this.children,i=this.$slots.default||[],r=this.children=[],s=extractTransitionData(this),a=0;a<i.length;a++){var l=i[a];if(l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")){r.push(l);((n[l.key]=l).data||(l.data={})).transition=s}}if(o){for(var c=[],u=[],d=0;d<o.length;d++){var h=o[d];h.data.transition=s;h.data.pos=h.elm.getBoundingClientRect();(n[h.key]?c:u).push(h)}this.kept=e(t,null,c);this.removed=u}return e(t,null,r)},updated:function(){var e=this.prevChildren,o=this.moveClass||(this.name||"v")+"-move";if(e.length&&this.hasMove(e[0].elm,o)){e.forEach(callPendingCbs);e.forEach(recordPosition);e.forEach(applyTranslation);this._reflow=document.body.offsetHeight;e.forEach(function(e){if(e.data.moved){var n=e.elm,e=n.style;addTransitionClass(n,o);e.transform=e.WebkitTransform=e.transitionDuration="";n.addEventListener(transitionEndEvent,n._moveCb=function e(t){if((!t||t.target===n)&&(!t||/transform$/.test(t.propertyName))){n.removeEventListener(transitionEndEvent,e);n._moveCb=null;removeTransitionClass(n,o)}})}})}},methods:{hasMove:function(e,t){if(!hasTransition)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach(function(e){removeClass(n,e)});addClass(n,t);n.style.display="none";this.$el.appendChild(n);t=getTransitionInfo(n);this.$el.removeChild(n);return this._hasMove=t.hasTransform}}};function callPendingCbs(e){e.elm._moveCb&&e.elm._moveCb();e.elm._enterCb&&e.elm._enterCb()}function recordPosition(e){e.data.newPos=e.elm.getBoundingClientRect()}function applyTranslation(e){var t=e.data.pos,n=e.data.newPos,o=t.left-n.left,n=t.top-n.top;if(o||n){e.data.moved=!0;e=e.elm.style;e.transform=e.WebkitTransform="translate("+o+"px,"+n+"px)";e.transitionDuration="0s"}}var platformComponents={Transition:Transition,TransitionGroup:TransitionGroup};Vue.config.mustUseProp=mustUseProp;Vue.config.isReservedTag=isReservedTag;Vue.config.isReservedAttr=isReservedAttr;Vue.config.getTagNamespace=getTagNamespace;Vue.config.isUnknownElement=isUnknownElement;extend(Vue.options.directives,platformDirectives);extend(Vue.options.components,platformComponents);Vue.prototype.__patch__=inBrowser?patch:noop;Vue.prototype.$mount=function(e,t){return mountComponent(this,e=e&&inBrowser?query(e):void 0,t)};inBrowser&&setTimeout(function(){config.devtools&&devtools&&devtools.emit("init",Vue)},0);var script={props:{isHidden:{type:Boolean,default:!0},headerText:{type:String,default:"Dialog Window"},messageText:{type:String,default:""},useInput:{type:Boolean,default:!1},inputDefaultValue:{type:String,default:""},inputPlaceholder:{type:String,default:""},inputTitle:{type:String,default:""},canCancel:{type:Boolean,default:!1},cancelButtonText:{type:String,default:""},canConfirm:{type:Boolean,default:!1},confirmButtonText:{type:String,default:""},cancelCb:{type:Function,default:null},confirmCb:{type:Function,default:null}},data:function(){return{userInputRelevant:!1,inputInvalid:!1,inputValue_:this.inputDefaultValue}},computed:{inputValue:{get:function(){return this.userInputRelevant?this.inputValue_:this.inputDefaultValue},set:function(e){this.inputInvalid=!1;this.inputValue_=e}},dialogClass:function(){return["modal-dialog",this.isHidden?"u-none":"u-flex"]},useButtons:function(){return this.canCancel||this.canConfirm}},mounted:function(){document.addEventListener("keydown",this.keydownHandler)},destroyed:function(){document.removeEventListener("keydown",this.keydownHandler)},methods:{onCancel:function(){this.cancelCb&&this.cancelCb(this.useInput?this.inputValue:void 0);this.discardInputValue()},onConfirm:function(){if(this.useInput&&""===this.inputValue){this.inputInvalid=!0;this.setInputFocus()}else{this.confirmCb&&this.confirmCb(this.useInput?this.inputValue:void 0);this.discardInputValue()}},keydownHandler:function(e){this.isHidden||e.stopPropagation();if(this.isHidden&&"KeyZ"===e.code&&e.ctrlKey)e.preventDefault();else switch(e.code){case"Escape":!this.isHidden&&this.canCancel&&this.onCancel();break;case"Enter":case"NumpadEnter":!this.isHidden&&this.canConfirm&&this.onConfirm()}},setInputFocus:function(){this.$nextTick(function(){this.$refs.inputElement&&this.$refs.inputElement.focus()})},discardInputValue:function(){this.inputValue="";this.userInputRelevant=!1}}};function normalizeComponent(e,t,n,o,i,r,s,a,l,c){if("boolean"!=typeof s){l=a;a=s;s=!1}var u,d="function"==typeof n?n.options:n;if(e&&e.render){d.render=e.render;d.staticRenderFns=e.staticRenderFns;d._compiled=!0;i&&(d.functional=!0)}o&&(d._scopeId=o);if(r){u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__);t&&t.call(this,l(e));e&&e._registeredComponents&&e._registeredComponents.add(r)};d._ssrRegister=u}else t&&(u=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))});if(u)if(d.functional){var h=d.render;d.render=function(e,t){u.call(t);return h(e,t)}}else{s=d.beforeCreate;d.beforeCreate=s?[].concat(s,u):[u]}return n}var isOldIE="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase()),HEAD;function createInjector(e){return function(e,t){return addStyle(e,t)}}var styles={};function addStyle(e,t){var n=isOldIE?t.media||"default":e,o=styles[n]||(styles[n]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);n=t.source;if(t.map){n+="\n/*# sourceURL="+t.map.sources[0]+" */";n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"}if(!o.element){o.element=document.createElement("style");o.element.type="text/css";t.media&&o.element.setAttribute("media",t.media);void 0===HEAD&&(HEAD=document.head||document.getElementsByTagName("head")[0]);HEAD.appendChild(o.element)}if("styleSheet"in o.element){o.styles.push(n);o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n")}else{e=o.ids.size-1,t=document.createTextNode(n),n=o.element.childNodes;n[e]&&o.element.removeChild(n[e]);n.length?o.element.insertBefore(t,n[e]):o.element.appendChild(t)}}}var __vue_script__=script,__vue_render__=function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{class:t.dialogClass},[e("div",{staticClass:"modal-dialog__window"},[e("div",{staticClass:"modal-dialog__header"},[e("div",{staticClass:"modal-dialog__header-text"},[t._v(t._s(t.headerText))])]),t._v(" "),e("div",{staticClass:"modal-dialog__content"},[""!==t.messageText?e("div",{staticClass:"modal-dialog__content-message u-text-center"},[t._v(t._s(t.messageText))]):t._e(),t._v(" "),t.useInput?e("input",{ref:"inputElement",staticClass:"modal-dialog__content-input",class:t.inputInvalid?"modal-dialog__content-input--invalid":"",attrs:{type:"text",placeholder:t.inputPlaceholder,title:t.inputTitle},domProps:{value:t.inputValue},on:{input:function(e){t.userInputRelevant=!0;t.inputValue=e.target.value}}}):t._e(),t._v(" "),t.useButtons?e("div",{staticClass:"modal-dialog__content-button-container"},[t.canCancel?e("div",{staticClass:"modal-dialog__content-button",on:{click:t.onCancel}},[t._v(t._s(t.cancelButtonText))]):t._e(),t._v(" "),t.canConfirm?e("div",{staticClass:"modal-dialog__content-button",on:{click:t.onConfirm}},[t._v(t._s(t.confirmButtonText))]):t._e()]):t._e()])])])},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;var __vue_inject_styles__=function(e){e&&e("data-v-4ac5beef_0",{source:"body,body.theme-light{--modal-dialog__content-backgroundColor:#f2f2f2;--modal-dialog__content-borderColor:#9b9b9b;--modal-dialog__content-message-color:#000;--modal-dialog__content-input-backgroundColor:#fff;--modal-dialog__content-input-borderColor:#9b9b9b;--modal-dialog__content-input-color:#000;--modal-dialog__content-input-placeholder-color:#b4b4b4;--modal-dialog__content-input--invalid-borderColor:red}body.theme-dark{--modal-dialog__content-backgroundColor:#1e1e1e;--modal-dialog__content-borderColor:#444;--modal-dialog__content-message-color:#c8c8c8;--modal-dialog__content-input-backgroundColor:#000;--modal-dialog__content-input-borderColor:#626262;--modal-dialog__content-input-color:#c8c8c8;--modal-dialog__content-input-placeholder-color:#666;--modal-dialog__content-input--invalid-borderColor:#ad2222}.modal-dialog{position:fixed;overflow:hidden;width:100%;height:100%;top:0;left:0;align-items:center;justify-content:center;z-index:1000;font-family:Rubik}.modal-dialog__window{overflow:hidden;padding:0;min-width:460px;max-height:600px;box-shadow:0 0 20px 0 rgba(0,0,0,.20392156862745098);user-select:none}.modal-dialog__header{width:100%;height:20px;background-color:#444}.modal-dialog__header-text{padding:0 6px;color:#fff;font-size:10pt;line-height:20px}.modal-dialog__content{overflow-x:hidden;overflow-y:auto;max-height:560px;padding:0 26px 26px;border:1px solid var(--modal-dialog__content-borderColor);border-top:none;background-color:var(--modal-dialog__content-backgroundColor)}.modal-dialog__content-message{margin:17px 0 13px;vertical-align:middle;color:var(--modal-dialog__content-message-color);font-size:12pt}.modal-dialog__content-input{width:calc(100% - 34px);height:16px;padding:9px 16px;border:1px solid var(--modal-dialog__content-input-borderColor);font-size:12pt;font-family:inherit;color:var(--modal-dialog__content-input-color);background-color:var(--modal-dialog__content-input-backgroundColor)}.modal-dialog__content-input::placeholder{color:var(--modal-dialog__content-input-placeholder-color)}.modal-dialog__content-input:focus{outline:none}.modal-dialog__content-input--invalid{border-color:var(--modal-dialog__content-input--invalid-borderColor)}.modal-dialog__content-button-container{display:flex;justify-content:center;margin-top:22px}.modal-dialog__content-button{display:inline-block;height:35px;min-width:85px;padding:0 15px;margin:0 11px;line-height:35px;color:#fff;background-color:#444;font-size:12pt;text-align:center;cursor:pointer}",map:void 0,media:void 0})},__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1,__vue_component__=normalizeComponent({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,!1,createInjector,void 0,void 0),_modalDialog=null;function getModalDialog(){if(null===_modalDialog){_modalDialog=new Vue(__vue_component__).$mount();document.body.appendChild(_modalDialog.$el)}return _modalDialog}function resetModalDialogProps(e){for(var t in e.$options.props)e[t]=e.$options.props[t].default}function openLibraryAddDialog(t,n){var o=getModalDialog();resetModalDialogProps(o);o.isHidden=!1;o.headerText="Add to Library";o.messageText="New library entry:";o.useInput=!0;o.inputPlaceholder="My Puzzles";o.canCancel=!0;o.cancelButtonText="Cancel";o.cancelCb=function(e){o.isHidden=!0;t&&t(e)};o.canConfirm=!0;o.confirmButtonText="Create";o.confirmCb=function(e){o.isHidden=!0;n&&n(e)};o.setInputFocus()}function openLibraryDeleteDialog(e,t,n){var o=getModalDialog();resetModalDialogProps(o);o.isHidden=!1;o.headerText="Delete Library Entry";o.messageText='Delete "'.concat(e,'" from library?');o.canCancel=!0;o.cancelButtonText="Cancel";o.cancelCb=function(e){o.isHidden=!0;t&&t(e)};o.canConfirm=!0;o.confirmButtonText="Delete";o.confirmCb=function(e){o.isHidden=!0;n&&n(e)}}function openTabAddDialog(t,n){var o=getModalDialog();resetModalDialogProps(o);o.isHidden=!1;o.headerText="Create New Tab";o.messageText="Enter name for new tab";o.useInput=!0;o.inputPlaceholder="My Tab";o.canCancel=!0;o.cancelButtonText="Cancel";o.cancelCb=function(e){o.isHidden=!0;t&&t(e)};o.canConfirm=!0;o.confirmButtonText="Create";o.confirmCb=function(e){o.isHidden=!0;n&&n(e)};o.setInputFocus()}function openTabDeleteDialog(e,t,n){var o=getModalDialog();resetModalDialogProps(o);o.isHidden=!1;o.headerText="Delete Tab";o.messageText='Do you want to delete "'.concat(e,'" tab?');o.canCancel=!0;o.cancelButtonText="Cancel";o.cancelCb=function(e){o.isHidden=!0;t&&t(e)};o.canConfirm=!0;o.confirmButtonText="Delete";o.confirmCb=function(e){o.isHidden=!0;n&&n(e)}}function openAlertDialog(e,t){var n=getModalDialog();resetModalDialogProps(n);n.isHidden=!1;n.headerText="Blockly Message";n.messageText=e;n.canConfirm=!0;n.confirmButtonText="OK";n.confirmCb=function(e){n.isHidden=!0;t&&t(e)}}function openConfirmDialog(e,t,n){var o=getModalDialog();resetModalDialogProps(o);o.isHidden=!1;o.headerText="Blockly Message";o.messageText=e;o.canCancel=!0;o.cancelButtonText="Cancel";o.cancelCb=function(e){o.isHidden=!0;t&&t(e)};o.canConfirm=!0;o.confirmButtonText="OK";o.confirmCb=function(e){o.isHidden=!0;n&&n(e)}}function openPromptDialog(e,t,n,o){var i=getModalDialog();resetModalDialogProps(i);i.isHidden=!1;i.headerText="Blockly Message";i.messageText=e;i.useInput=!0;i.inputDefaultValue=t;i.inputPlaceholder="variable name";i.canCancel=!0;i.cancelButtonText="Cancel";i.cancelCb=function(e){i.isHidden=!0;n&&n(e)};i.canConfirm=!0;i.confirmButtonText="OK";i.confirmCb=function(e){i.isHidden=!0;o&&o(e)};i.setInputFocus()}var BlocklyStorage={backupBlocks_:function(e){if("localStorage"in window){var t=Blockly.Xml.workspaceToDom(e),e=window.location.href.split("#")[0];window.localStorage.setItem(e,Blockly.Xml.domToText(t))}},backupOnUnload:function(e){var t=e||Blockly.getMainWorkspace();window.addEventListener("unload",function(){BlocklyStorage.backupBlocks_(t)},!1)},restoreBlocks:function(e){var t=window.location.href.split("#")[0];if("localStorage"in window&&window.localStorage[t]){e=e||Blockly.getMainWorkspace(),t=Blockly.Xml.textToDom(window.localStorage[t]);Blockly.Xml.domToWorkspace(t,e)}},link:function(e,t,n,i,o,r,s){var a=document.createElement("xml");i.tabs.forEach(function(e){var t=document.createElement("tab");t.setAttribute("name",e.name);t.setAttribute("type",e.type);t.setAttribute("active",e.id==i.activeTabId);t.setAttribute("scrollx",e.ws.scrollX);t.setAttribute("scrolly",e.ws.scrollY);t.setAttribute("scale",e.ws.scale);a.appendChild(t);for(var n=Blockly.Xml.workspaceToDom(e.ws),o=0;o<n.childNodes.length;o++)t.appendChild(n.childNodes[o].cloneNode(!0))});var l=document.createElement("editorsettings");"viewportX"in o&&l.setAttribute("viewport-x",o.viewportX);"viewportY"in o&&l.setAttribute("viewport-y",o.viewportY);"viewportW"in o&&l.setAttribute("viewport-w",o.viewportW);"viewportH"in o&&l.setAttribute("viewport-h",o.viewportH);"viewportHidden"in o&&l.setAttribute("viewport-hidden",o.viewportHidden);"toolboxLibraryMode"in o&&l.setAttribute("toolbox-library-mode",o.toolboxLibraryMode);"toolboxMinimizedMode"in o&&l.setAttribute("toolbox-minimized-mode",o.toolboxMinimizedMode);a.appendChild(l);o=Blockly.Xml.domToPrettyText(a),l=i.tabs.length?i.tabs[0].ws:null;BlocklyStorage.makeRequest_(e,t,n,"/storage/xml","xml",o,l,r,s)},linkLibrary:function(e,t,n,o,i,r){o=o||Blockly.getMainWorkspace();BlocklyStorage.makeRequest_(e,t,"","/storage/xml/library","xml",n,o,i,r)},linkLibraryDelete:function(e,t,n,o,i,r){o=o||Blockly.getMainWorkspace();BlocklyStorage.makeRequest_(e,t,"","/storage/xml/libdelete","xml",n,o,i,r)},retrieveXml:function(e,t,n){n=n||Blockly.getMainWorkspace();BlocklyStorage.makeRequest_(e,"/storage/key","key",t,n)},httpRequest_:null,makeRequest_:function(e,t,n,o,i,r,s,a,l){BlocklyStorage.httpRequest_&&BlocklyStorage.httpRequest_.abort();BlocklyStorage.httpRequest_=new XMLHttpRequest;BlocklyStorage.httpRequest_.name=i;BlocklyStorage.httpRequest_.onreadystatechange=function(){BlocklyStorage.handleRequest_(a,l)};BlocklyStorage.httpRequest_.open("POST",o);BlocklyStorage.httpRequest_.setRequestHeader("Content-Type","application/x-www-form-urlencoded");BlocklyStorage.httpRequest_.send(i+"="+encodeURIComponent(r)+"&xmlURL="+encodeURIComponent(e)+"&codeURL="+encodeURIComponent(t)+"&code="+encodeURIComponent(n));BlocklyStorage.httpRequest_.workspace=s},handleRequest_:function(e,t){if(4==BlocklyStorage.httpRequest_.readyState){if(200!=BlocklyStorage.httpRequest_.status)t&&t();else{t=BlocklyStorage.httpRequest_.responseText.trim();if("xml"==BlocklyStorage.httpRequest_.name){window.location.hash=t;e&&e()}else"key"==BlocklyStorage.httpRequest_.name&&t.length&&BlocklyStorage.loadXml_(t,BlocklyStorage.httpRequest_.workspace);BlocklyStorage.monitorChanges_(BlocklyStorage.httpRequest_.workspace)}BlocklyStorage.httpRequest_=null}}};BlocklyStorage.monitorChanges_=function(t){var e=Blockly.Xml.workspaceToDom(t),n=Blockly.Xml.domToText(e);var o=t.addChangeListener(function(){var e=Blockly.Xml.workspaceToDom(t),e=Blockly.Xml.domToText(e);if(n!=e){window.location.hash="";t.removeChangeListener(o)}})};BlocklyStorage.loadXml_=function(e,t){try{e=Blockly.Xml.textToDom(e)}catch(e){return}t.clear();Blockly.Xml.domToWorkspace(e,t)};BlocklyStorage.alert=function(e){window.alert(e)};var TAB_INIT="InitTab",TAB_MAIN="MainTab",TAB_SECONDARY="SecondaryTab",LABEL_INIT="init",LABEL_MAIN="main";function Tab(e){this.name=e;this.type="";this.id=Blockly.utils.genUid();this.ws=null;this.wsWrapperElem=document.createElement("div");this.wsWrapperElem.id=this.id;document.body.appendChild(this.wsWrapperElem)}Object.assign(Tab.prototype,{setActive:function(e){e?this.ws&&this.ws.markFocused():Blockly.hideChaff(!0);Blockly.selected&&Blockly.selected.unselect()},reset:function(){this.ws&&Blockly.svgResize(this.ws)},onBeforeDispose:function(){},dispose:function(){this.onBeforeDispose&&this.onBeforeDispose();if(this.ws){this.ws.dispose();this.ws=null}}});function typesCanBeShared(e,t){switch(e){case TAB_INIT:return t===TAB_INIT;case TAB_MAIN:case TAB_SECONDARY:return t===TAB_MAIN||t===TAB_SECONDARY;default:return!1}}function TabCollection(){this.tabs=[];this.activeTabId=""}Object.assign(TabCollection.prototype,{add:function(e){this.tabs.push(e);this.onAdd&&this.onAdd(e.id)},remove:function(e){e=this.getTabById(e);if(e){e.dispose();this.activeTabId="";this.tabs.splice(this.tabs.indexOf(e),1);this.onRemove&&this.onRemove(e.id)}},setActive:function(t){var e=this.activeTabId;this.activeTabId=t;this.tabs.forEach(function(e){e.setActive(e.id==t)});this.onSetActive&&this.onSetActive(e,t)},getActive:function(){return this.getTabById(this.activeTabId)},setActiveWS:function(e){e=this.getTabByWS(e);e&&this.setActive(e.id)},getActiveWS:function(){var e=this.getActive();return e?e.ws:null},getTabById:function(t){return this.tabs.find(function(e){return e.id==t})},getTabByWS:function(t){return this.tabs.find(function(e){return e.ws==t})||null},getPrev:function(e){e=this.tabs.indexOf(this.getTabById(e));return this.tabs[e-1]},getNext:function(e){e=this.tabs.indexOf(this.getTabById(e));return this.tabs[e+1]},resetTab:function(e){e=this.getTabById(e);e&&e.reset()},onAdd:function(e){},onRemove:function(e){},onSetActive:function(e,t){}});var BFUN=Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,AudioWebAudio="\nfunction ".concat(BFUN,"() {\n    this.audio = new v3d.Audio(new v3d.AudioListener());\n\n    this._muted = false;\n    this._volume = 1;\n}\n\nObject.assign(").concat(BFUN,".prototype, {\n\n    load: function(url) {\n        var scope = this;\n\n        var xhr = new XMLHttpRequest()\n        xhr.open('GET', url);\n        xhr.responseType = 'arraybuffer';\n\n        xhr.onload = function(e) {\n            if (this.status === 200) {\n                // new promise-based syntax is not currently supported in Safari\n                scope.audio.context.decodeAudioData(this.response, function(decodedData) {\n                    scope.audio.setBuffer(decodedData);\n                });\n            }\n        }\n\n        xhr.send();\n        return this;\n    },\n\n    play: function() {\n        if (this.audio.buffer === null) return;\n        this.audio.play();\n    },\n\n    pause: function() {\n        this.audio.pause();\n    },\n\n    stop: function() {\n        if (this.audio.buffer === null) return;\n        this.audio.stop();\n    },\n\n    rewind: function() {\n        if (this.audio.buffer === null) return;\n\n        var isPlaying = this.audio.isPlaying;\n        this.audio.stop();\n        if (isPlaying) {\n            this.audio.play();\n        }\n    },\n\n    setPlaybackRate: function(rate) {\n        this.audio.setPlaybackRate(rate);\n    },\n\n    isPlaying: function() {\n        return this.audio.isPlaying;\n    },\n\n    setLoop: function(looped) {\n        this.audio.setLoop(looped);\n    },\n\n    setVolume: function(volume) {\n        this._volume = volume;\n        if (!this._muted) {\n            this.audio.setVolume(volume);\n        }\n    },\n\n    setMuted: function(muted) {\n        this._muted = muted;\n        this.audio.setVolume(muted ? 0 : this._volume);\n    },\n\n});\n"),MediaHTML5="\nfunction ".concat(BFUN,"(isVideo) {\n    this.source = null;\n}\n\nObject.assign(").concat(BFUN,".prototype, {\n\n    load: function(url, isVideo) {\n        if (isVideo) {\n            this.source = document.createElement('video');\n            this.source.playsInline = true;\n            this.source.preload = 'auto';\n            this.source.autoload = true;\n            this.source.crossOrigin = 'anonymous';\n        } else {\n            this.source = document.createElement('audio');\n        }\n\n        this.source.src = url;\n        return this;\n    },\n\n    play: function() {\n        this.source.play();\n    },\n\n    pause: function() {\n        this.source.pause();\n    },\n\n    stop: function() {\n        this.source.pause();\n        this.source.currentTime = 0;\n    },\n\n    rewind: function() {\n        this.source.currentTime = 0;\n    },\n\n    setPlaybackRate: function(rate) {\n        this.source.playbackRate = rate;\n    },\n\n    isPlaying: function() {\n        return this.source.duration > 0 && !this.source.paused;\n    },\n\n    setLoop: function(looped) {\n        this.source.loop = looped;\n    },\n\n    setVolume: function(volume) {\n        this.source.volume = volume;\n    },\n\n    setMuted: function(muted) {\n        this.source.muted = muted;\n    },\n\n});\n");function provide(e,t){return Blockly.JavaScript.provideFunction_(e,t)}var Runtime={use:function(e){switch(e){case"AudioWebAudio":return provide(e,[AudioWebAudio]);case"MediaHTML5":return provide(e,[MediaHTML5]);default:return null}}},BFUN$1=Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,runtimeChunks={LIST_NONE:"\nvar LIST_NONE = '<none>';\n",retrieveObjectNames:'\n// utility function envoked by almost all V3D-specific puzzles\n// process object input, which can be either single obj or array of objects, or a group\nfunction retrieveObjectNames(objNames) {\n    var acc = [];\n    retrieveObjectNamesAcc(objNames, acc);\n    return acc;\n}\n\nfunction retrieveObjectNamesAcc(currObjNames, acc) {\n    if (typeof currObjNames == "string") {\n        acc.push(currObjNames);\n    } else if (Array.isArray(currObjNames) && currObjNames[0] == "GROUP") {\n        var newObj = getObjectNamesByGroupName(currObjNames[1]);\n        for (var i = 0; i < newObj.length; i++)\n            acc.push(newObj[i]);\n    } else if (Array.isArray(currObjNames) && currObjNames[0] == "ALL_OBJECTS") {\n        var newObj = getAllObjectNames();\n        for (var i = 0; i < newObj.length; i++)\n            acc.push(newObj[i]);\n    } else if (Array.isArray(currObjNames)) {\n        for (var i = 0; i < currObjNames.length; i++)\n            retrieveObjectNamesAcc(currObjNames[i], acc);\n    }\n}\n',notIgnoredObj:'\n// utility function envoked by almost all V3D-specific puzzles\n// filter off some non-mesh types\nfunction notIgnoredObj(obj) {\n    return (obj.type !== "AmbientLight" && obj.name !== ""\n            && !(obj.isMesh && obj.isMaterialGeneratedMesh));\n}\n',getObjectByName:"\n// utility function envoked by almost all V3D-specific puzzles\n// find first occurence of the object by its name\nfunction getObjectByName(objName) {\n    var objFound;\n    var runTime = _pGlob !== undefined;\n    objFound = runTime ? _pGlob.objCache[objName] : null;\n\n    if (objFound && objFound.name === objName)\n        return objFound;\n\n    appInstance.scene.traverse(function(obj) {\n        if (!objFound && notIgnoredObj(obj) && (obj.name == objName)) {\n            objFound = obj;\n            if (runTime) {\n                _pGlob.objCache[objName] = objFound;\n            }\n        }\n    });\n    return objFound;\n}\n",getObjectNamesByGroupName:"\n// utility function envoked by almost all V3D-specific puzzles\n// retrieve all objects which belong to the group\nfunction getObjectNamesByGroupName(targetGroupName) {\n    var objNameList = [];\n    appInstance.scene.traverse(function(obj){\n        if (notIgnoredObj(obj)) {\n            var groupNames = obj.groupNames;\n            if (!groupNames)\n                return;\n            for (var i = 0; i < groupNames.length; i++) {\n                var groupName = groupNames[i];\n                if (groupName == targetGroupName) {\n                    objNameList.push(obj.name);\n                }\n            }\n        }\n    });\n    return objNameList;\n}\n",getAllObjectNames:"\n// utility function envoked by almost all V3D-specific puzzles\n// retrieve all objects on the scene\nfunction getAllObjectNames() {\n    var objNameList = [];\n    appInstance.scene.traverse(function(obj) {\n        if (notIgnoredObj(obj))\n            objNameList.push(obj.name)\n    });\n    return objNameList;\n}\n",getCoordSystem:"\n/**\n * Retrieve coordinate system from the loaded scene\n */\nfunction getCoordSystem() {\n    var scene = appInstance.scene;\n\n    if (scene && \"v3d\" in scene.userData && \"coordSystem\" in scene.userData.v3d) {\n        return scene.userData.v3d.coordSystem;\n    } else {\n        // COMPAT: <2.17, consider replacing to 'Y_UP_RIGHT' for scenes with unknown origin\n        return 'Z_UP_RIGHT';\n    }\n}\n",coordsTransform:"\n/**\n * Transform coordinates from one space to another\n * Can be used with Vector3 or Euler.\n */\nfunction coordsTransform(coords, from, to, noSignChange) {\n\n    if (from == to)\n        return coords;\n\n    var y = coords.y, z = coords.z;\n\n    if (from == 'Z_UP_RIGHT' && to == 'Y_UP_RIGHT') {\n        coords.y = z;\n        coords.z = noSignChange ? y : -y;\n    } else if (from == 'Y_UP_RIGHT' && to == 'Z_UP_RIGHT') {\n        coords.y = noSignChange ? z : -z;\n        coords.z = y;\n    } else {\n        console.error('coordsTransform: Unsupported coordinate space');\n    }\n\n    return coords;\n}\n",coordsV3DToBlender:"\n/**\n * Transform coordinates from Verge3D to Blender/Max coordinate system.\n * Can be used with Vector3 or Euler.\n */\nfunction coordsV3DToBlender(coords, noSignChange) {\n\n    var y = coords.y, z = coords.z;\n\n    coords.y = noSignChange ? z : -z;\n    coords.z = y;\n\n    return coords;\n}\n",eulerV3DToBlenderShortest:"\n/**\n * Verge3D euler rotation to Blender/Max shortest.\n * 1) Convert from intrinsic rotation (v3d) to extrinsic XYZ (Blender/Max default\n *    order) via reversion: XYZ -> ZYX\n * 2) swizzle ZYX->YZX\n * 3) choose the shortest rotation to resemble Blender's behavior\n */\nvar eulerV3DToBlenderShortest = function() {\n\n    var eulerTmp = new v3d.Euler();\n    var eulerTmp2 = new v3d.Euler();\n    var vec3Tmp = new v3d.Vector3();\n\n    return function(euler, dest) {\n\n        var eulerBlender = eulerTmp.copy(euler).reorder('YZX');\n        var eulerBlenderAlt = eulerTmp2.copy(eulerBlender).makeAlternative();\n\n        var len = eulerBlender.toVector3(vec3Tmp).lengthSq();\n        var lenAlt = eulerBlenderAlt.toVector3(vec3Tmp).lengthSq();\n\n        dest.copy(len < lenAlt ? eulerBlender : eulerBlenderAlt);\n        return coordsTransform(dest, 'Y_UP_RIGHT', 'Z_UP_RIGHT');\n    }\n\n}();\n",isMeshObj:"\n/**\n * mesh or multi-material object\n */\nfunction isMeshObj(obj) {\n    if (obj.isMesh)\n        return true;\n\n    for (var i = 0; i < obj.children.length; i++) {\n        var child = obj.children[i];\n        if (child.isMesh && child.isMaterialGeneratedMesh)\n            return true;\n    }\n\n    return false;\n}\n",matGetColors:"\nfunction matGetColors(matName) {\n    var mat = v3d.SceneUtils.getMaterialByName(appInstance, matName);\n    if (!mat)\n        return [];\n\n    if (mat.isMeshNodeMaterial)\n        return Object.keys(mat.nodeRGBMap);\n    else if (mat.isMeshStandardMaterial)\n        return ['color', 'emissive'];\n    else\n        return [];\n}\n",matGetValues:"\nfunction matGetValues(matName) {\n\n    var mat = v3d.SceneUtils.getMaterialByName(appInstance, matName);\n    if (!mat)\n        return [];\n\n    if (mat.isMeshNodeMaterial)\n        return Object.keys(mat.nodeValueMap);\n    else if (mat.isMeshStandardMaterial)\n        return ['metalness', 'roughness', 'bumpScale', 'emissiveIntensity', 'envMapIntensity'];\n    else\n        return [];\n}\n",matGetEditableTextures:"\n/**\n * Retreive standard accessible textures for MeshNodeMaterial or MeshStandardMaterial.\n * If \"collectSameNameMats\" is true then all materials in the scene with the given name will\n * be used for collecting textures, otherwise will be used only the first found material (default behavior).\n */\nfunction matGetEditableTextures(matName, collectSameNameMats) {\n\n    var mats = [];\n    if (collectSameNameMats) {\n        mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n    } else {\n        var firstMat = v3d.SceneUtils.getMaterialByName(appInstance, matName);\n        if (firstMat !== null) {\n            mats = [firstMat];\n        }\n    }\n\n    var textures = mats.reduce(function(texArray, mat) {\n        var matTextures = [];\n        switch (mat.type) {\n            case 'MeshNodeMaterial':\n                matTextures = Object.values(mat.nodeTextures);\n                break;\n\n            case 'MeshStandardMaterial':\n                matTextures = [\n                    mat.map, mat.lightMap, mat.aoMap, mat.emissiveMap,\n                    mat.bumpMap, mat.normalMap, mat.displacementMap,\n                    mat.roughnessMap, mat.metalnessMap, mat.alphaMap, mat.envMap\n                ]\n                break;\n\n            default:\n                console.error('matGetEditableTextures: Unknown material type ' + mat.type);\n                break;\n        }\n\n        Array.prototype.push.apply(texArray, matTextures);\n        return texArray;\n    }, []);\n\n    return textures.filter(function(elem) {\n        // check Texture type exactly\n        return elem && (elem.constructor == v3d.Texture\n                || elem.constructor == v3d.DataTexture\n                || elem.constructor == v3d.VideoTexture);\n    });\n}\n",matReplaceEditableTexture:"\n/**\n * Replace accessible textures for MeshNodeMaterial or MeshStandardMaterial\n */\nfunction matReplaceEditableTexture(mat, oldTex, newTex) {\n\n    switch (mat.type) {\n        case 'MeshNodeMaterial':\n            for (var name in mat.nodeTextures) {\n                if (mat.nodeTextures[name] == oldTex) {\n                    mat.nodeTextures[name] = newTex;\n                }\n            }\n\n            break;\n\n        case 'MeshStandardMaterial':\n\n            var texNames = ['map', 'lightMap', 'aoMap', 'emissiveMap',\n                            'bumpMap', 'normalMap', 'displacementMap', 'roughnessMap',\n                            'metalnessMap', 'alphaMap', 'envMap'];\n\n            texNames.forEach(function(name) {\n                if (mat[name] == oldTex) {\n                    mat[name] = newTex;\n                }\n            });\n\n            break;\n\n        default:\n            console.error('matReplaceEditableTexture: Unsupported material type ' + mat.type);\n            break;\n    }\n\n}\n",eventGetOffsetCoords:'\nfunction eventGetOffsetCoords(e, touchId, dest) {\n    if (e instanceof MouseEvent) {\n        dest.set(e.offsetX, e.offsetY);\n    } else if (window.TouchEvent && e instanceof TouchEvent) {\n        var rect = e.target.getBoundingClientRect();\n        var touches = e.touches;\n        if (e.type == "touchstart" || e.type == "touchend" || e.type == "touchmove") {\n            touches = e.changedTouches;\n        }\n\n        var touch = touches[0];\n        for (var i = 0; i < touches.length; i++) {\n            if (touches[i].identifier == touchId) {\n                touch = touches[i];\n                break;\n            }\n        }\n\n        dest.set(touch.clientX - rect.left, touch.clientY - rect.top);\n    }\n    return dest;\n}\n',eventTouchIdGetFirst:'\nfunction eventTouchIdGetFirst(e) {\n    if (e instanceof MouseEvent) {\n        return -1;\n    } else if (window.TouchEvent && e instanceof TouchEvent) {\n        if (e.type == "touchstart" || e.type == "touchend" || e.type == "touchmove") {\n            return e.changedTouches[0].identifier;\n        } else {\n            return e.touches[0].identifier;\n        }\n    }\n    return -1;\n}\n',eventTouchIdChangedFilter:'\n/**\n * For "touchstart", "touchend" and "touchmove" events returns true if a touch\n * object with the provided touch id is in the changedTouches array, otherwise\n * - false. For other events returns true.\n */\nfunction eventTouchIdChangedFilter(e, touchId) {\n    if (window.TouchEvent && e instanceof TouchEvent) {\n        if (e.type == "touchstart" || e.type == "touchend" || e.type == "touchmove") {\n            var isChanged = false;\n            for (var i = 0; i < e.changedTouches.length; i++) {\n                if (e.changedTouches[i].identifier == touchId) {\n                    isChanged = true;\n                    break;\n                }\n            }\n            return isChanged;\n        }\n    }\n\n    return true;\n}\n',initDragOverInfo:"\nfunction initDragOverInfo() {\n    return {\n        draggedObjName: '',\n        downX: 0, downY: 0,\n        prevX: 0, prevY: 0,\n        currX: 0, currY: 0,\n        isDowned: false,\n        isMoved: false,\n        touchId: -1\n    };\n}\n",xrUtils:"\n_pGlob.getInputSource = function(controller) {\n    if (controller && controller.userData.v3d && controller.userData.v3d.inputSource) {\n        return controller.userData.v3d.inputSource\n    } else {\n        return null;\n    }\n};\n\n_pGlob.traverseNonControllers = function(obj, callback) {\n\n    if (obj.name.startsWith('XR_CONTROLLER_'))\n        return;\n\n    callback(obj);\n\n    var children = obj.children;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n\n        _pGlob.traverseNonControllers(children[i], callback);\n\n    }\n\n};\n\n_pGlob.xrGetIntersections = function(controller) {\n\n    controller.updateMatrixWorld(true);\n\n    _pGlob.mat4Tmp.identity().extractRotation(controller.matrixWorld);\n\n    var objList = [];\n\n    _pGlob.traverseNonControllers(appInstance.scene, function(obj) {\n        objList.push(obj);\n    });\n\n    var raycaster = new v3d.Raycaster();\n    raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\n    raycaster.ray.direction.set(0, 0, -1).applyMatrix4(_pGlob.mat4Tmp);\n\n    return raycaster.intersectObjects(objList);\n\n}\n\n_pGlob.xrOnSelect = function(event) {\n\n    var controller = event.target;\n\n    var intersections = _pGlob.xrGetIntersections(controller);\n\n    if (intersections.length > 0) {\n        var intersection = intersections[0];\n        var obj = intersection.object;\n\n        // save the object for the pickedObject block\n        _pGlob.pickedObject = getPickedObjectName(obj);\n\n        _pGlob.objClickInfo.forEach(function(el) {\n            var isPicked = obj && objectsIncludeObj(el.objNames, getPickedObjectName(obj));\n            el.callbacks[isPicked ? 0 : 1]();\n        });\n    } else {\n        _pGlob.objClickInfo.forEach(function(el) {\n            // missed\n            el.callbacks[1]();\n        });\n    }\n\n}\n",initObjectPicking:"\n// utility function used by the whenClicked, whenHovered and whenDraggedOver puzzles\nfunction initObjectPicking(callback, eventType, mouseDownUseTouchStart, mouseButtons) {\n\n    var elem = appInstance.renderer.domElement;\n    elem.addEventListener(eventType, pickListener);\n\n    if (eventType == 'mousedown') {\n\n        var touchEventName = mouseDownUseTouchStart ? 'touchstart' : 'touchend';\n        elem.addEventListener(touchEventName, pickListener);\n\n    } else if (eventType == 'dblclick') {\n\n        var prevTapTime = 0;\n\n        function doubleTapCallback(event) {\n\n            var now = new Date().getTime();\n            var timesince = now - prevTapTime;\n\n            if (timesince < 600 && timesince > 0) {\n\n                pickListener(event);\n                prevTapTime = 0;\n                return;\n\n            }\n\n            prevTapTime = new Date().getTime();\n        }\n\n        var touchEventName = mouseDownUseTouchStart ? 'touchstart' : 'touchend';\n        elem.addEventListener(touchEventName, doubleTapCallback);\n    }\n\n    var raycaster = new v3d.Raycaster();\n\n    function pickListener(event) {\n        event.preventDefault();\n\n        var xNorm = 0, yNorm = 0;\n        if (event instanceof MouseEvent) {\n            if (mouseButtons && mouseButtons.indexOf(event.button) == -1)\n                return;\n            xNorm = event.offsetX / elem.clientWidth;\n            yNorm = event.offsetY / elem.clientHeight;\n        } else if (event instanceof TouchEvent) {\n            var rect = elem.getBoundingClientRect();\n            xNorm = (event.changedTouches[0].clientX - rect.left) / rect.width;\n            yNorm = (event.changedTouches[0].clientY - rect.top) / rect.height;\n        }\n\n        _pGlob.screenCoords.x = xNorm * 2 - 1;\n        _pGlob.screenCoords.y = -yNorm * 2 + 1;\n        raycaster.setFromCamera(_pGlob.screenCoords, appInstance.camera);\n        var objList = [];\n        appInstance.scene.traverse(function(obj){objList.push(obj);});\n        var intersects = raycaster.intersectObjects(objList);\n        callback(intersects, event);\n    }\n}\n\nfunction objectsIncludeObj(objNames, testedObjName) {\n    if (!testedObjName) return false;\n\n    for (var i = 0; i < objNames.length; i++) {\n        if (testedObjName == objNames[i]) {\n            return true;\n        } else {\n            // also check children which are auto-generated for multi-material objects\n            var obj = getObjectByName(objNames[i]);\n            if (obj && obj.type == \"Group\") {\n                for (var j = 0; j < obj.children.length; j++) {\n                    if (testedObjName == obj.children[j].name) {\n                        return true;\n                    }\n                }\n            }\n        }\n    }\n    return false;\n}\n\n// utility function used by the whenClicked, whenHovered, whenDraggedOver, and raycast puzzles\nfunction getPickedObjectName(obj) {\n    // auto-generated from a multi-material object, use parent name instead\n    if (obj.isMesh && obj.isMaterialGeneratedMesh && obj.parent) {\n        return obj.parent.name;\n    } else {\n        return obj.name;\n    }\n}\n",getHTMLElement:"\n// utility functions envoked by the HTML puzzles\nfunction getElements(ids, isParent) {\n    var elems = [];\n    if (Array.isArray(ids) && ids[0] != 'CONTAINER' && ids[0] != 'WINDOW' &&\n        ids[0] != 'DOCUMENT' && ids[0] != 'BODY' && ids[0] != 'QUERYSELECTOR') {\n        for (var i = 0; i < ids.length; i++)\n            elems.push(getElement(ids[i], isParent));\n    } else {\n        elems.push(getElement(ids, isParent));\n    }\n    return elems;\n}\n\nfunction getElement(id, isParent) {\n    var elem;\n    if (Array.isArray(id) && id[0] == 'CONTAINER') {\n        if (appInstance !== null) {\n            elem = appInstance.container;\n        } else if (typeof _initGlob !== 'undefined') {\n            // if we are on the initialization stage, we still can have access\n            // to the container element\n            var id = _initGlob.container;\n            if (isParent) {\n                elem = parent.document.getElementById(id);\n            } else {\n                elem = document.getElementById(id);\n            }\n        }\n    } else if (Array.isArray(id) && id[0] == 'WINDOW') {\n        if (isParent)\n            elem = parent;\n        else\n            elem = window;\n    } else if (Array.isArray(id) && id[0] == 'DOCUMENT') {\n        if (isParent)\n            elem = parent.document;\n        else\n            elem = document;\n    } else if (Array.isArray(id) && id[0] == 'BODY') {\n        if (isParent)\n            elem = parent.document.body;\n        else\n            elem = document.body;\n    } else if (Array.isArray(id) && id[0] == 'QUERYSELECTOR') {\n        if (isParent)\n            elem = parent.document.querySelector(id);\n        else\n            elem = document.querySelector(id);\n    } else {\n        if (isParent)\n            elem = parent.document.getElementById(id);\n        else\n            elem = document.getElementById(id);\n    }\n    return elem;\n}\n",physicsUtils:"\n/**\n * Find physics body associated with the given object and remove it.\n */\n_pPhysics.findRemovePhysicsBody = function(obj) {\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData = _pPhysics.syncList[i];\n\n        if (syncData.obj == obj) {\n\n            if (syncData.type == 'SOFT_BODY')\n                _pPhysics.world.removeSoftBody(syncData.body);\n            else\n                _pPhysics.world.removeRigidBody(syncData.body);\n\n            Ammo.destroy(syncData.body);\n            _pPhysics.syncList.splice(i, 1);\n            i--;\n        }\n    }\n}\n\n/**\n * Find physics constraint associated with the given objects and remove it.\n */\n_pPhysics.findRemovePhysicsConstraint = function(obj1, obj2) {\n\n    for (var i = 0; i < _pPhysics.consList.length; i++) {\n\n        var consData = _pPhysics.consList[i];\n\n        if (consData.obj1 == obj1 && consData.obj2 == obj2) {\n\n            _pPhysics.world.removeConstraint(consData.cons);\n            Ammo.destroy(consData.cons);\n            _pPhysics.consList.splice(i, 1);\n            i--;\n\n        }\n\n    }\n\n}\n\n/**\n * Cleanup forces and velocities\n */\n_pPhysics.resetBody = function(body) {\n    body.clearForces();\n\n    var zeroVec = new Ammo.btVector3(0, 0, 0);\n\n    body.setLinearVelocity(zeroVec);\n    body.setAngularVelocity(zeroVec);\n}\n\n_pPhysics.setObjToBodyTransform = function(obj, body) {\n    var pos = obj.getWorldPosition(_pGlob.vec3Tmp);\n    var quat = obj.getWorldQuaternion(_pGlob.quatTmp);\n\n    _pPhysics.transTmp.setIdentity();\n    _pPhysics.transTmp.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));\n    _pPhysics.transTmp.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n\n    body.setWorldTransform(_pPhysics.transTmp);\n    body.getMotionState().setWorldTransform(_pPhysics.transTmp);\n}\n"},LIST_NONE,notIgnoredObj,getObjectNamesByGroupName,matGetEditableTextures,matGetColors,matGetValues;runtimeChunks.clipNameUsed="\n/**\n * Check if the given name of an animation clip is already used by existing\n * animations.\n */\nfunction ".concat(BFUN$1,"(name) {\n    return v3d.SceneUtils.getAnimationActionByName(appInstance, name) !== null;\n}\n");runtimeChunks.matNameUsed="\n/**\n * Check if the given material name is already used by materials on the scene.\n */\nfunction ".concat(BFUN$1,"(name) {\n    return v3d.SceneUtils.getMaterialByName(appInstance, name) !== null;\n}\n");runtimeChunks.acquireUniqueName='\n/**\n * Obtain a unique name from the given one. Names are tested with the given\n * callback function that should return a boolean "unique" flag. If the given\n * "name" is not considered unique, then "name2" is tested for uniqueness, then\n * "name3" and so on...\n */\nfunction '.concat(BFUN$1,'(name, isUniqueCb) {\n    var uniqueName = name;\n\n    if (isUniqueCb !== undefined) {\n        while (!isUniqueCb(uniqueName)) {\n            var r = uniqueName.match(/^(.*?)(\\d+)$/);\n            if (!r) {\n                uniqueName += "2";\n            } else {\n                uniqueName = r[1] + (parseInt(r[2], 10) + 1);\n            }\n        }\n    }\n\n    return uniqueName;\n}\n');runtimeChunks.getSceneAnimFrameRate="\n/**\n * Get the current scene's framerate.\n */\nfunction ".concat(BFUN$1,'(scene) {\n    if (scene && "v3d" in scene.userData && "animFrameRate" in scene.userData.v3d) {\n        return scene.userData.v3d.animFrameRate;\n    }\n    return 24;\n}\n');runtimeChunks.getSceneByAction="\n/**\n * Get a scene that contains the root of the given action.\n */\nfunction ".concat(BFUN$1,'(action) {\n    var root = action.getRoot();\n    var scene = root.type == "Scene" ? root : null;\n    root.traverseAncestors(function(ancObj) {\n        if (ancObj.type == "Scene") {\n            scene = ancObj;\n        }\n    });\n    return scene;\n}\n');runtimeChunks.RotationInterface="\nfunction ".concat(BFUN$1,"() {\n    /**\n     * For user manipulations use XYZ extrinsic rotations (which\n     * are the same as ZYX intrinsic rotations)\n     *     - Blender/Max/Maya use extrinsic rotations in the UI\n     *     - XYZ is the default option, but could be set from\n     *       some order hint if exported\n     */\n    this._userRotation = new v3d.Euler(0, 0, 0, 'ZYX');\n    this._actualRotation = new v3d.Euler();\n}\n\nObject.assign(").concat(BFUN$1,", {\n    initObject: function(obj) {\n        if (obj.userData.v3d.puzzles === undefined) {\n            obj.userData.v3d.puzzles = {}\n        }\n        if (obj.userData.v3d.puzzles.rotationInterface === undefined) {\n            obj.userData.v3d.puzzles.rotationInterface = new ").concat(BFUN$1,"();\n        }\n\n        var rotUI = obj.userData.v3d.puzzles.rotationInterface;\n        rotUI.updateFromObject(obj);\n        return rotUI;\n    }\n});\n\nObject.assign(").concat(BFUN$1,".prototype, {\n\n    updateFromObject: function(obj) {\n        var SYNC_ROT_EPS = 1e-8;\n\n        if (!this._actualRotation.equalsEps(obj.rotation, SYNC_ROT_EPS)) {\n            this._actualRotation.copy(obj.rotation);\n            this._updateUserRotFromActualRot();\n        }\n    },\n\n    getActualRotation: function(euler) {\n        return euler.copy(this._actualRotation);\n    },\n\n    setUserRotation: function(euler) {\n        // don't copy the order, since it's fixed to ZYX for now\n        this._userRotation.set(euler.x, euler.y, euler.z);\n        this._updateActualRotFromUserRot();\n    },\n\n    getUserRotation: function(euler) {\n        return euler.copy(this._userRotation);\n    },\n\n    _updateUserRotFromActualRot: function() {\n        var order = this._userRotation.order;\n        this._userRotation.copy(this._actualRotation).reorder(order);\n    },\n\n    _updateActualRotFromUserRot: function() {\n        var order = this._actualRotation.order;\n        this._actualRotation.copy(this._userRotation).reorder(order);\n    }\n\n});\n\n");LIST_NONE=extractFunc("LIST_NONE");AppAdapter.ready(function(e){notIgnoredObj=extractFunc("notIgnoredObj");getObjectNamesByGroupName=extractFunc("getObjectNamesByGroupName",{appInstance:e,notIgnoredObj:notIgnoredObj});matGetEditableTextures=extractFunc("matGetEditableTextures",{appInstance:e,v3d:v3d});matGetColors=extractFunc("matGetColors",{appInstance:e,v3d:v3d});matGetValues=extractFunc("matGetValues",{appInstance:e,v3d:v3d})});function extractFunc(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e,o=Object.keys(t),t=Object.values(t);return new Function(o.toString(),"".concat(runtimeChunks[e],"\n return ").concat(n,";")).apply(void 0,_toConsumableArray(t))}function sortNames(e,t){return(e=e[0].toUpperCase())<(t=t[0].toUpperCase())?-1:t<e?1:0}function getObjectList(e){var t=[];if(e.scene){e.scene.traverse(function(e){notIgnoredObj(e)&&t.push([e.name,e.name])});t.sort(sortNames)}t.push([LIST_NONE,LIST_NONE]);return t}function getGroupList(e){var i=[],r={};e.scene.traverse(function(e){if(notIgnoredObj(e)){var t=e.groupNames;if(t)for(var n=0;n<t.length;n++){var o=t[n];if(!r[o]){i.push([o,o]);r[o]=!0}}}});i.sort(sortNames);i.push([LIST_NONE,LIST_NONE]);return i}function getAnimationList(e){for(var t=[],n=0;n<e.actions.length;n++){var o=e.actions[n].getClip();t.push([o.name,o.name])}t.sort(sortNames);t.push([LIST_NONE,LIST_NONE]);return t}function getMaterialList(e){var t=[];if(e.scene||e.worldMaterial){var n={};e.scene.traverse(function(e){e=e.material;if(e&&e.name&&!n[e.name]){t.push([e.name,e.name]);n[e.name]=!0}});e=e.worldMaterial;e&&e.name&&!n[e.name]&&t.push([e.name,e.name]);t.sort(sortNames)}t.push([LIST_NONE,LIST_NONE]);return t}function getMorphTargetNames(e,t){t=e.scene.getObjectByName(t);if(void 0!==t){t=t.resolveMultiMaterial()[0].morphTargetDictionary;if(t)return Object.keys(t)}return[]}function isOutlineAvailable(e){return e.postprocessing&&e.postprocessing.outlinePass}function createXMLElement(e){return document.implementation.createDocument("","").createElement(e)}function disposeShadowBlock(e){if(e.connection&&e.connection.isConnected()){e=e.connection.targetBlock();e.isShadow()&&e.dispose()}}function updateShadowBlockStr(e,t){if(e.connection){var n=createXMLElement("xml");n.innerHTML=t;e.connection.setShadowDom(n.firstElementChild);n=e.connection.targetBlock();if(null===n)e.connection.respawnShadow_();else if(n.isShadow()){n.dispose();e.connection.respawnShadow_()}}}function getShadowBlockVirtual(e){var t=e.connection.targetBlock();if(t&&t.isShadow())return t;e=e.connection.getShadowDom();return null!==e?Blockly.Xml.domToBlock(e,new Blockly.Workspace):null}function mutatorReconnect(e,t,n){var o=e.getInput(t);if(null!==o){t=getShadowBlockVirtual(o),t=null===t?null:Blockly.Xml.blockToDom(t).outerHTML;updateShadowBlockStr(o,null);disposeShadowBlock(o);Blockly.Mutator.reconnect(n,e,o.name);updateShadowBlockStr(o,t)}}function getNonShadowConnection(e){var t=e.connection.targetBlock();return t&&!t.isShadow()?e.connection.targetConnection:null}function getEnvironmentImage(){return'var ENVIRONMENT_IMAGE = "data:image/x-hdr;base64,Iz9SQURJQU5DRQpTT0ZUV0FSRT1nZWdsIDAuNC4xNgpGT1JNQVQ9MzItYml0X3JsZV9yZ2JlCgotWSAxMjggK1ggMjU2CpiXnICYlpyAmJacgJiXnICYl5yAmJecgJiXnYCYl52AmJedgJiXnYCYl52AmJecgJiXnICYl5yAmJecgJiXnICYl52AmJedgJiXnYCYl52AmJecgJiXnICYl5yAmJecgJiXnICYl52AmJecgJiXnYCYl52AmJecgJiXnICYl5yAmJecgJiXnYCYl52AmJecgJiXnICYl5yAmJecgJiXnICYl52AmJedgJiXnYCYl52AmJedgJiXnYCYl52AmJedgJiXnYCYl52AmJecgJiXnICYl52AmJedgJiXnYCYl5yAmJecgJiXnICYlpyAmJacgJiXnICYlpyAmJacgJiWnICYlp2AmJedgJiXnYCYl5yAmJedgJiXnICYl5yAmJecgJiXnICYl5yAmJecgJiXnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYl5yAmJecgJiXnICYl5yAmJecgJiXnICYl52AmJecgJiXnYCYl5yAmJecgJiXnICYl5yAmJecgJiXnICYl5yAmJecgJiXnICYl52AmJedgJiXnYCYl52AmJedgJiXnICYl5yAmJecgJiXnICYl52AmJedgJiXnYCYl52AmJecgJiXnICYl5yAmJecgJiXnYCYl52AmJedgJiXnYCYl5yAmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJacgJiWnICYl52AmJedgJiXnYCYl52AmJedgJiXnICXlpyAmJacgJiWnICYlpyAmJacgJiWnICXlpyAmJacgJiWnICXlpyAmJacgJiWnICYlpyAmJadgJiXnYCYl52AmJedgJiXnYCYlpyAmJacgJiWnICYlpyAmJecgJiXnICYl5yAmJedgJiXnYCYl52AmJedgJiXnICYl5yAmJacgJiWnICYlp2AmJedgJiXnYCYl52AmJedgJiXnYCYl52AmJacgJiWnICYlpyAmJecgJiXnYCYl52AmJacgJiWnICYlpyAmJacgJiWnICYlpyAmJecgJeWnICXlpyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAl5acgJiWnICYlpyAmJacgJeWnICXlpyAl5acgJeWnICXlZyAl5WcgJeVnICXlZyAl5WcgJiWnICYlpyAl5acgJeWnICYlpyAmJacgJiWnYCYlp2AmJacgJiWnYCYlp2AmJadgJiXnYCYl52AmJedgJiXnYCYlpyAmJacgJiWnICYlpyAl5acgJiXnICYl5yAmJecgJiXnICYl5yAmJacgJiWnICYl52AmJedgJiXnYCYl52AmJedgJiXnICXlZyAl5WcgJiVnICYlpyAmJacgJiWnICYlpyAl5acgJeWnICXlZyAl5WcgJeWnICXlpyAl5WcgJiWnICXlZyAmJacgJiWnICYlpyAmJacgJeWnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAmJacgJiWnICYlpyAmJacgJiWnICYlpyAl5WcgJeVnICXlZyAl5WcgJeVnICYlpyAmJacgJiWnICYlpyAl5acgJeWnICXlpyAmJacgJiVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVm4CXlZuAl5WbgJeVm4CXlZyAl5WbgJeVm4CXlZyAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlpyAl5WcgJeVnICXlpyAl5acgJeWnICXlpyAl5WcgJeVnICXlZyAl5WcgJeVnICXlpyAmJacgJiWnICYl5yAmJacgJeWnICXlpyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WbgJeVm4CXlZuAl5WbgJeVnICXlZyAl5WcgJeVnICXlZyAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5acgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeWnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CWlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlJuAlpSagJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVnICXlZyAl5acgJeWnICXlpyAl5acgJeVnICXlZyAl5WcgJeVnICXlZyAmJWcgJiVnICYlZyAl5WcgJeVm4CXlZuAl5WbgJeVnICXlZyAl5WcgJeVm4CXlZqAl5WagJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZqAl5WagJeVmoCXlJqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZuAl5WbgJeVm4CXlZuAl5WbgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVm4CXlZuAl5WbgJeVmoCXlZuAl5WbgJeVm4CXlZuAl5WagJeVmoCXlZqAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWk5qAlpOZgJWTmYCWk5mAlpOagJaTmoCWlJqAlpSagJaUmoCWlJqAlpOagJaTmoCWk5qAlZOZgJaUmoCWlJqAlpOZgJaUmoCWlJmAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAl5WagJeVmoCXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WcgJeVnICXlZyAl5WbgJeVm4CXlZuAl5WbgJeVm4CXlZqAl5WbgJeVm4CXlZyAl5WbgJeVm4CXlZuAl5WagJeVm4CXlZqAl5WagJaUmoCWlJqAlpSagJaUmoCWlJqAl5WagJeVmoCXlZuAl5WagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZuAl5WbgJeVmoCXlZuAl5WbgJeVm4CXlZuAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAlZOagJWTmYCVk5mAlZOZgJWTmoCVk5qAlZOagJWTmoCVk5qAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOZgJaTmoCVk5qAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOZgJWTmYCWk5mAlpSZgJaUmoCWk5qAlpSagJaUmoCXlJqAl5SagJeVmoCXlZuAl5WagJeVmoCXlZqAl5WagJeVm4CXlZuAl5WbgJeVm4CXlZyAl5WcgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeUmoCXlJqAl5SagJeUmoCXlJqAl5SagJeUmoCXlJqAlpOZgJaTmYCWk5mAlpOZgJaTmYCWk5mAlpOZgJaTmYCWk5mAlpOZgJaUmYCXlJmAl5SZgJeUmoCXlJqAl5SagJeUmoCXlJqAl5SagJaUmYCWlJmAlpSZgJeUmoCXlJqAl5SagJeUmoCXlJqAl5SagJeUmoCXlJqAl5SagJeUmoCXlJqAl5SagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5SagJeVmoCXlJqAl5SagJaUmoCWk5qAlpOZgJaTmYCVk5mAlZOZgJWTmYCVk5iAlZOYgJWTmICVkpiAlZKYgJWSmICVk5iAlZOYgJWTmICVkpiAlZKYgJWSmICVkpiAlZKYgJWSmICVkpiAlZKYgJWSmICVkpiAlZKYgJWSmICVkpiAlZKYgJWSmICVk5iAlZKYgJWSmICVkpiAlZKYgJWTmICVk5iAlZOYgJWTmYCVk5mAlZOZgJWTmoCWk5qAlpSagJaTmoCWk5qAlpSagJaUmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WbgJeVnICXlZyAl5WcgJeVnICXlZyAl5WbgJeVmoCXlZuAl5WbgJeVnICXlZuAl5WbgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WbgJeVmoCXlZqAl5SagJaUmoCVlJqAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5mAlZOagJWTmoCVk5qAlpSagJaUmoCWlJqAlpSagJaUmoCWlJqAl5WagJeUmoCWk5qAlpSagJaUmoCWlJqAlpSagJWTmoCVk5mAlZOZgJWTmYCVk5mAlZOZgJWSmYCVkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpeAk5KXgJOSl4CTkpeAk5KYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJSSmICUkpiAlJKYgJWSmICVkpiAlZKYgJWTmICVk5mAlZOZgJWTmYCVk5mAlpOZgJaTmYCWk5mAlpSagJaTmoCXlJqAl5SagJeVmoCXlZqAl5WagJeVm4CXlZqAl5WagJeVmoCXlZqAl5SagJeUmoCXlZqAl5WagJeUmoCXk5qAl5OZgJeTmYCXk5mAl5OZgJeTmYCXk5mAlpOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICWk5iAlZOYgJaTmICWk5iAl5OYgJaTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlpOYgJaTmICXk5mAl5OZgJaTmYCWk5mAlpOZgJaTmYCXk5mAl5SagJeUmoCXlZqAl5WagJeUmoCXlJqAl5OZgJeTmYCWk5mAlpOZgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVkpiAlJKXgJSSl4CUkpeAk5KXgJOSl4CUkpeAlJKXgJOSl4CTkZeAk5GXgJORl4CTkZeAk5GXgJORl4CTkZeAk5KXgJORl4CTkZeAk5GXgJORl4CTkZeAk5GXgJORl4CTkpeAk5KXgJOSl4CTkpeAk5KYgJSSl4CUkpiAlJKYgJSSmICUkpiAlZKYgJWSmICVk5mAlZOZgJWTmYCVk5mAlZOZgJWTmYCVk5mAlpOagJeUmoCXlJqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WbgJeVnICXlZyAl5WcgJeVm4CXlZuAl5WbgJeVm4CXlZyAl5WbgJeVm4CXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeUmoCXlZqAl5WagJaVmoCWlJqAlZOagJWTmoCVk5mAlZOagJWTmYCVk5qAlZOagJWTmYCVk5qAlZOagJWTmYCVk5mAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOZgJWTmYCVk5mAlZOZgJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlpOagJeVmoCXlJqAlZOagJWTmoCVk5mAlZOZgJWTmICVk5iAlZOYgJSSmICUkpiAk5KYgJOSmICTkpeAk5KXgJOSl4CTkpeAk5GXgJORl4CSkZeAkpGXgJKRl4CSkZeAkpGXgJKRl4CSkZeAkpGXgJKRl4CSkJaAkpCWgJKQloCSkJaAkpCXgJKRl4CSkZeAkpCWgJKQloCSkJaAkpGWgJKRloCTkZeAk5GXgJORloCTkZaAk5GXgJORl4CTkZeAk5GXgJOSl4CTkpeAk5KXgJOSl4CTkpeAk5KXgJOSl4CUkpeAlZKYgJWSmICVkpiAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlpOYgJeTmYCXlJqAl5SagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeUmoCXlJqAl5WagJeVmoCXlJmAl5OZgJeTmICXk5iAlpOYgJaTmICWk5iAlpOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOXgJWSl4CVkpeAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWSmICVkpeAlZKXgJWTmICVk5iAlZOYgJWTmICVk5iAlpOYgJaTmICVk5iAlZOYgJWTmICVk5iAl5OYgJeTmYCXk5mAl5OagJeVmoCXlJqAl5OZgJeTmICWk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVkpiAlZKYgJWSl4CUkpeAlJKXgJOSl4CTkpeAk5KXgJORl4CTkZaAk5CWgJKQloCSkJaAkpCWgJKQloCSkJaAkpCWgJKQloCSkJaAkpCWgJKQloCSkJaAkpCWgJKQlYCSkJWAkpCVgJKQloCSkJaAkpCWgJKQloCSkJaAk5GXgJORl4CTkZeAk5GXgJORl4CTkpeAk5KXgJOSl4CUkpeAlJKYgJWSmICVk5iAlZOYgJWTmICVk5iAlZOZgJWTmoCXlJqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WbgJeVm4CXlpyAl5acgJiWnICYlpyAmJacgJeWnICXlpyAl5acgJeVnICXlZyAl5WcgJeVm4CXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlJqAl5WagJeVmoCXlZqAlZOagJWTmoCVk5mAlZOYgJWTmICVk5mAlZOagJWTmoCVk5mAlZOZgJWTmYCVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmYCVk5mAlZOZgJWTmYCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJaUmoCXlZqAl5SagJWTmoCVk5qAlZOYgJWTmICVk5iAlZOYgJWSmICTkpiAk5KYgJOSl4CTkZeAk5GXgJKRl4CSkJaAkpCWgJKQloCSkJaAkpCWgJKQloCSj5WAko+VgJGPlYCRj5WAkY+VgJGPlYCRj5WAkY+VgJGPlYCRj5WAkY+VgJGPlYCRj5WAkY+VgJGPlYCRj5SAkY+VgJGPlYCRj5WAkY+VgJGPlYCSj5WAko+VgJKQlYCSkJWAkpCVgJKQlYCSkJaAk5GWgJORl4CTkpeAk5KXgJOSl4CTkpeAk5KXgJOSl4CUkpeAlZKXgJWSl4CVk5iAlZOYgJWTmICVk5iAlZOYgJaTmICXlJmAl5SagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlZqAl5SZgJeUmYCXlJiAl5OYgJaTmICWk5iAlpOYgJaTmICWk5iAl5OYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOXgJWSl4CVkpeAlZKXgJWSl4CVk5eAlZOXgJWSl4CVk5eAlZKXgJWSl4CVkpeAlZKXgJWSl4CVkpeAlZKXgJWSl4CVk5iAlZOYgJWTmICVk5iAlZOYgJaTmICWk5iAlpOYgJaTmICWk5iAl5OYgJeUmYCXlJmAl5SagJeUmoCXlZqAl5WagJeUmYCXk5iAlpOYgJWTmICVk5iAlZOYgJWTmICVkpeAlZKXgJSSl4CUkpeAk5KXgJORloCTkZaAk5CWgJKQlYCSkJWAkpCVgJKQlYCSkJWAkpCVgJKPlYCRj5SAkY+UgJGPlICRj5SAkY6UgJGOlICRjpSAkY+UgJGPlICRj5SAkY6UgJGOlICRjpSAkY6UgJGPlYCSj5WAkpCVgJKQlYCSkJWAkpCVgJKQlYCSkJWAkpCWgJORloCTkpeAk5KXgJSSl4CVkpeAlZKYgJWTmICVk5iAlZOYgJWTmYCWlJqAl5WagJeVmoCXlZqAl5abgJeWm4CXlpuAmJabgJiWnICYl5yAmJecgJmXnICZmJ2AmZidgJmXnYCZl52AmZecgJiXnICYl5yAmJacgJiWnICYlpyAl5acgJeWnICXlZuAl5WbgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJWUmoCVk5qAlZOZgJWTmICVk5iAlZOYgJWTmYCVk5mAlZOZgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOZgJWTmYCVk5mAlZOZgJWTmoCVk5qAlZOagJWTmoCVk5qAlZOagJWUmoCVlJqAlpSagJWTmoCVlJqAlpSagJaUmoCXlZqAl5WagJeVmoCWlJqAlZSagJWTmYCVk5iAlZOYgJWTmICVk5iAk5KYgJOSl4CTkpeAkpGXgJKQl4CSkJaAkpCVgJKQlYCSj5WAkY6VgJGOlYCQjpSAkI6UgJCOlICQjpSAkI2TgJCNk4CPjZOAj42TgI+Nk4CQjZOAkI2TgI+Nk4CPjZOAj42TgI+Nk4CPjZOAj42TgJCNk4CQjZOAkI2TgJCNk4CQjZOAkI6TgJCOk4CRjpSAkY6UgJGOlICRjpSAko+UgJKQlYCSkJWAk5GWgJORl4CTkpeAk5KXgJOSl4CUkpeAlJKXgJWSl4CVkpeAlZOYgJWTmICWk5iAlpOYgJaTmICXlJmAl5WagJeVmoCXlZqAmJWagJiVmoCal5yAmZecgJmXm4CZl5uAmZebgJmWm4CZlpuAmZaagJiWmoCYlZqAl5WagJeVmYCXlZmAl5SYgJeUmICXk5iAl5OYgJeTmICWk5iAlpOYgJeTmICWk5iAlZOYgJWTl4CVk5eAlZKXgJWTl4CVkpeAlZOXgJWTl4CVk5eAlZOXgJWSl4CVkpeAlZKXgJWSl4CVkpeAlZKXgJWTl4CVk5eAlZOYgJWTmICVk5iAlpOYgJaTmICWk5iAl5SYgJeUmICXlJmAl5WZgJeVmoCXlZqAl5WagJeVmoCXlZqAl5WagJeVmoCXlJmAl5SZgJaTmICWk5iAlZOYgJWTmICVk5iAlZKXgJWSl4CUkpeAk5KXgJORloCTkJWAkpCVgJKQlYCSkJWAko+UgJGPlICRjpSAkY6UgJGOk4CQjpOAkI2TgJCNkoCQjZKAkI2SgJCNkoCQjZKAkI2SgJCNkoCQjZKAkI2SgJCNkoCQjZOAkI2TgJCNk4CQjpOAkI6TgJGOlICRjpSAkY6UgJKPlICSkJWAkpCVgJKQlYCSkJaAk5GXgJOSl4CUkpeAlZKYgJWTmICVk5iAlZOYgJaUmYCWlJqAl5WagJeVmoCYlpuAmJecgJmXnICZmJ2AmpidgJqYnYCamZ2AmpmegJuZnoCbmp6AnJqfgJyan4Cbmp+Am5qegJuZnoCamZ6AmpmegJqZnoCamZ6AmpidgJmYnYCZl5yAmJecgJiXnICYl5yAmJacgJiWnICXlpuAl5WbgJeVmoCXlZqAlpSagJWUmoCVk5mAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5mAlZOZgJWUmoCWlJqAlpSagJaUmoCWlZqAl5WagJeVmoCXlZqAl5WagJeVm4CXlZuAl5WbgJeVmoCXlZqAl5WagJeVm4CXlZuAl5WbgJeVm4CXlZuAl5WbgJeVmoCWlJqAlpSagJWUmoCVk5iAlZOYgJSSmICTkpeAk5KXgJKQl4CSkJaAkpCVgJKQlYCSj5WAkY6VgJCOlICQjpOAkI2TgI+Nk4CPjZKAj42SgI6NkoCOjJKAjoySgI6MkYCOjJKAjoySgI6MkoCOjJGAjoyRgI2MkYCNjJGAjoyRgI6MkYCOjJGAjoyRgI6MkoCOjZKAj42SgI+NkoCPjZKAkI2SgJCNkoCQjZKAkI6TgJGOk4CSj5SAkpCVgJKQlYCTkJWAk5GWgJOSl4CUkpeAlZKXgJWTmICWk5iAlpOYgJaUmICXlJmAl5WZgJeVmoCYlZqAmJaagJmXm4CZl5uAmZecgJmXnICal5yAnZqfgJyanoCcmp6AnJqegJuZnYCbmZ2Am5mdgJuYnICamJyAmpicgJmXm4CZl5uAmZaagJiWmoCYlZqAl5WZgJeVmYCXlZiAl5SYgJeUmICXlJiAl5OYgJeTmICWk5iAlpOXgJWTl4CVk5eAlZOXgJWTl4CVk5eAlZOXgJWTl4CVk5eAlZOXgJWTl4CVk5eAlZOXgJaTl4CWk5iAl5OYgJeUmICXlJiAl5SYgJeUmICXlZmAl5WZgJiVmoCYlZqAmJWagJiWmoCYlpqAmJaagJiWmoCZlpqAmZaagJmWmoCYlpqAmJWagJiVmoCXlZmAl5WZgJeUmYCXlJiAlpOYgJWTl4CVkpeAlJKXgJSSl4CTkZaAk5CVgJKQlYCSkJWAko+TgJGOk4CQjpOAkI2SgJCNkoCQjZKAj42SgI+NkoCOjJGAjoyRgI6MkYCOjJGAjoyRgI6MkYCOjJGAjoyRgI6MkYCOjJGAjoyRgI6MkYCOjZGAjo2RgI+NkoCPjZKAj42SgJCNkoCQjpOAkY+UgJKQlYCSkJWAkpCVgJOSl4CTkpeAlZKXgJWTmICVk5iAlpSZgJeVmYCXlZqAmJabgJmXm4CZmJyAmpidgJuZnoCbmp6AnJqfgJ2boICdm6CAnpyggJ6coYCfnaGAn52igJ+dooCfnaKAn52igJ+doYCfnaGAnpyhgJ6coYCenKGAnZuggJ2boICcmp+AnJqfgJuanoCamZ6AmpmdgJqYnYCZmJ2AmZecgJiXnICYlpuAl5abgJeVmoCXlZqAlpSagJaUmYCVk5mAlZOZgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmICVk5iAlZOZgJWUmYCWlJqAlpWagJaVmoCXlZqAl5WagJeVm4CXlpuAmJabgJiWm4CYl5yAmJecgJmXnICZl5yAmZecgJmYnYCamJ2AmpidgJqYnYCamJ2AmpidgJqYnYCamJ2AmZedgJmXnICYl5yAmJabgJeVm4CXlZqAlZSZgJWTmICVk5iAlJKXgJOSl4CSkZeAkpCWgJKQlYCSkJWAkY6VgJCOlICQjpOAj42SgI+NkoCOjJKAjYyRgI2LkYCNi5CAjYqQgI2KkICNipCAjIqQgIyKj4CMio+AjIqPgIyKj4CMio+AjIqPgIyKj4CMio+AjIqPgI2KkICNi5CAjYuQgI2LkYCOjJGAjoyRgI6MkoCPjZKAj42SgJCNkoCQjpOAko6TgJKQlICSkJWAk5CVgJORlYCUkpeAlZKXgJaTmICWlJiAl5WZgJeVmoCYlpqAmZaagJqXnICamJyAm5mdgJuZnYCbmZ2AnJqegJyanoCdm5+AnZufgKGfooChnqKAoJ6hgKCeoYCgnaCAn52ggJ+coICenJ+AnpufgJ2bnoCcmp2AnJmdgJuZnICbmJyAmpebgJmXmoCZlpqAmJaagJiVmYCXlZiAl5WYgJeVmICXlJiAl5OYgJeTmICXk5eAlpOXgJaTl4CWk5eAlpOXgJaTl4CWk5eAlpOXgJaTl4CWk5eAlpOXgJeTl4CXlJiAl5WYgJiVmYCYlZmAmJWZgJmWmYCZlpqAmZaagJmXmoCZl5uAmpebgJqYnICbmJyAm5mcgJuZnYCbmZ2Am5mdgJuZnYCbmZ2Am5mdgJuZnICamJyAmpibgJmXm4CZlpqAmJaagJeVmYCXlJmAlpSYgJWTl4CVkpeAlJKXgJORlYCTkJWAkpCUgJKOk4CQjpOAkI2SgI+NkoCPjZGAjoyRgI6MkICNi5CAjYuQgI2Kj4CNio+AjYqPgIyKj4CMio+AjIqPgIyKj4CNio+AjYqPgI2Kj4CNi5CAjYuQgI2LkICNi5CAjoyRgI6MkYCPjZKAj42SgJCOk4CRj5OAkpCUgJKQlYCTkpaAlJKXgJWTl4CWlJiAl5WZgJiWmoCZl5uAmpicgJuZnYCcmp6AnZufgJ6coICfnaGAn56hgKCfooChoKOAoqCkgKOhpYCjoqWApKOngKWjp4Clo6eApaOngKWjp4Clo6eApKOmgKOipoCjoaaAo6GlgKKhpYChn6SAoJ+jgKCeooCfnaGAnpyhgJ2coICdm5+AnJqfgJuZnoCamJ2AmZicgJmXnICYlpuAl5abgJeWmoCXlZqAl5WagJaVmoCWlJqAlZOZgJWTmICVk5iAlZOYgJWTmICVk5iAlZOYgJWTmYCWlJmAlpSagJaVmoCXlZqAl5WagJeWm4CYlpuAmZecgJmXnICamJ2AmpidgJuZnoCbmZ6Am5qegJyan4Ccmp+AnJufgJ2boICdnKCAnZyggJ6coICenKCAnpyggJ2coICdnKCAnZyggJ2boICcmp+Am5qegJuZnoCamZ6AmZecgJiWm4CXlZqAlpSZgJWTmICVk5iAlJKXgJORl4CSkJWAkpCVgJGOlICQjpOAj42SgI6MkoCNi5GAjYuQgI2KkICMio+Ai4mOgIuJjoCLiY6Ai4iOgIqIjYCKiI2AioiNgIqHjYCKh42AioeNgIqHjYCKiI2AioiNgIqIjYCLiI2Ai4iNgIuJjoCMiY6AjIqPgI2KkICNi5CAjoyRgI6NkYCQjZKAkI6SgJGOk4CSj5OAkpCVgJORlYCUkpaAlZOXgJaUmICXlZiAmJaagJmWmoCamJuAm5mdgJyanoCdm5+AnpyfgJ+coICgnaGAoJ6hgKCeooChn6KAoaCjgKGgo4CopqiAqKWogKelqICnpaeAp6SngKWjpoCloqWAo6GkgKOgo4Cin6KAoZ6hgKCdoICfnJ+AnpuegJ2anYCcmZyAm5icgJqXm4Cal5qAmZaZgJiVmYCYlZiAl5WYgJeUmICXk5eAl5OXgJeTl4CXk5eAl5OXgJeTl4CXk5eAl5OXgJeTl4CXk5eAl5SYgJeUmICYlZiAmJWZgJmWmYCZl5qAmpeagJqYm4CbmZyAm5mcgJyZnYCcmp2AnZuegJ6bn4CenJ+An5yggJ+doICgnqGAoJ6hgKCeoYCgnqGAoJ6hgKCeoYCgnaGAn5yggJ6cn4Cdm56AnJqdgJuZnICamJuAmZeagJiWmYCXlZiAlpSYgJWTl4CUkpaAk5GVgJKQlICSj5OAkI6SgJCNkoCPjJGAjouQgI2Lj4CNio+AjIqOgIyJjoCMiY2Ai4mNgIuIjYCLiI2AioiNgIqIjYCKiI2Ai4iNgIuIjYCLiI2Ai4mOgIyJjoCMiY6AjIqOgIyKj4CNi4+AjYyQgI6NkYCPjZKAkI6SgJKPk4CSkJWAk5KWgJSSl4CWlJeAl5WZgJmXm4CamJyAnJqdgJ2bn4CenaCAoJ6hgKGfo4CjoaSApKOmgKakp4CnpaiAqKapgKmnqoCqqKuAqqmsgKuqrYCsqq2ArKuugK2rroCtq66ArKuugKyrroCrqqyAq6msgKqorICpp6qAp6apgKelqIClpKiApKOmgKOhpYCioKSAoJ+jgJ+eooCenKCAnZufgJyanoCamZ2AmZicgJmXnICYl5yAl5abgJeVmoCXlZqAl5WagJaUmYCVk5iAlZOYgJWTmICWlJiAlpSZgJeVmYCXlZqAl5WagJeVmoCXlpqAmJabgJmXnICamJ2AmpmdgJuanoCcm5+AnZuggJ6coICfnaGAn56igKCeooChn6OAoaCkgKOhpYCjoaWAo6GlgKOipoCjo6aApKOngKSjp4Cjo6eAo6KmgKOhpYCioaWAoZ+jgKCeooCfnqGAnp2hgJ2bn4Cbmp6AmpmdgJmXnICYlpqAl5WZgJaUmICUkpeAk5KXgJKQlYCRj5SAkI6TgI+NkoCOjJGAjYuQgIyKj4CLiY6Ai4mNgIqIjYCJh42AiYeMgIiGjICIhoyAiIaLgIiFi4CIhYuAiIWLgIiFioCIhYuAiIWLgIiFi4CIhouAiIaLgImGi4CKh4yAioeMgIuIjYCLiY6AjIqOgI2Lj4COjJCAj42RgJCNkoCRj5OAkpCUgJORlYCVkpaAlpSXgJeVmYCZlpqAmpibgJuZnYCdm56AnpyggKCeoYChn6KAoqCjgKSipYClo6aApqSngKelqICopqiAqKeogKinqYCpp6mAsrCygLGvsYCwrrCAsK6wgK+tr4Cuq66AraqsgKupq4CqqKqAqKaogKakpoCloqWAo6GjgKKfooChnqCAn5yfgJ6bnoCdmp2AnJmcgJuYm4CZl5qAmJaYgJiVmICXlZeAl5OXgJeTl4CXk5eAl5OXgJeTl4CXk5eAl5OXgJeTl4CXlJeAl5WYgJiVmICZlpmAmpeagJqXmoCbmJuAnJmcgJ2bnYCenJ+An52fgKCeoIChn6GAop+igKOgo4CjoaSApKGkgKWjpYClo6aApqOngKekp4CnpaeAp6WngKelp4CmpKeApaOmgKSipYCjoaSAoqCjgKGfooCfnaCAnpyfgJyanYCbmZyAmZeagJiWmYCXlZiAlZOXgJSSlYCSkJSAko+TgJCNkoCPjZGAjoyQgI2Kj4CMio6Ai4mNgIuIjICKh4yAiYeLgImGi4CIhouAiIaLgIiGi4CIhouAiIaLgIiGi4CIhoqAiIaLgImGi4CJh4uAioeMgIqIjICLiI2AjImOgI2Kj4CNi5CAj4yRgJCNkoCRj5OAkpCUgJSSloCVk5eAl5WZgJmXm4CbmZyAnZuegJ+doIChn6KAo6GkgKWjpoCnpqiAqairgKuqrICtrK6Ar62wgLCvsYCysLOAs7G0gLSztYC1s7aAtrS3gLe1uIC3tbiAtrW4gLa1uIC2tLeAtbS2gLSztYCzsrSAsrCzgLCvsYCurbCArKuugKuprICpp6qAp6WpgKWkp4CjoqWAoaCkgKCeooCenaGAnZufgJuanoCamJ2AmZecgJiXm4CYlpqAl5WagJeVmYCWlJiAlZOYgJWTmICVk5iAlpSYgJeVmYCXlZmAl5WagJeVmoCYlpuAmZicgJqYnYCbmp6AnZufgJ6doYCgnqKAoZ+jgKKhpICjoqaApaOngKalqICnpqmAqaergKqoq4CrqayAq6mtgKyqrYCsq66ArauugK2rr4Ctq6+ArKuvgKyrroCrqa2AqqmsgKmnq4CopqmApqSogKSjpoCioaSAoJ+igJ+doYCdm5+Am5mdgJmXm4CXlpqAlpSYgJSSl4CTkZWAkY+UgJCNkoCOjJKAjYuQgIyKj4CLiY6AioiNgImHjICIhoyAiIWLgIeFioCGhImAhoSIgIWDiICFg4iAhYOIgIWDiICFg4iAhYOIgIWDiICGhIiAhoSJgIeEiYCHhYmAiIWKgIiGioCJh4uAioeMgIuJjYCMio6AjYuPgI6MkICQjZKAko+TgJORlICVkpaAlpSYgJiWmYCamJuAnJqdgJ6cn4CgnqGAoqCjgKSipYCmpKeAqKapgKqoqoCrqqyArauugK6tr4CwrrCAsa+xgLGvsYCxsLKAsrCygL68vYC9u72AvLq8gLu5uoC6uLmAuLa3gLa0toC0srSAsrCygLCur4Cuq62ArKmrgKqnqYCnpaeApaKlgKOgooChnqCAn5yfgJ6bnYCcmZyAm5ibgJmXmYCYlZiAmJWXgJeUl4CXk5eAl5OXgJeTl4CXk5eAl5OXgJeTl4CXlJeAmJWYgJmWmICal5mAm5ibgJyZm4Cdmp2An5yfgKCeoICin6GAo6GjgKWipICmpKaAp6WngKmmqICqqKqAq6mrgK2rrICurK6ArqyugK+tr4CvrbCAsK6wgLCusICvra+Ar62vgK6sroCsq6yAq6mrgKmnqoCopqiApqSmgKOhpIChn6KAn52fgJ2anYCbmJyAmZeagJeVmICVk5eAk5GUgJKPk4CQjpGAj4yQgI2Lj4CMio2Ai4mNgIqHjICJhoqAiIWKgIeFiYCHhIiAhoSIgIaEiICGg4iAhoOIgIaEiICGhIiAhoOIgIaEiICGhIiAh4SIgIeFiYCIhoqAiYaLgIqHjICLiI2AjIqOgI2Lj4CPjZGAkI6SgJKQlICUkpWAlpSXgJmWmoCbmZyAnZuegKCeoYCjoaOApqSmgKmnqYCrqqyArq2vgLGvsYCzsrSAtrW3gLm3uoC7uryAvr2+gMC+wIC8vL2Aurm7gL++wIDDw8SAxMPFgMTDxIDDwsSAwsHDgMC/wYC/vsCAvr2/gLy7vYC6ubuAuLa5gLW0t4CysbSAsK+xgK2sr4Crqa2AqKeqgKakqICkoqaAoaCjgJ+eooCdnKCAnJqegJqYnICYl5uAl5aagJeVmYCXlZiAlpSYgJWTmICVk5iAlZOYgJWUmYCXlZmAl5WagJiWm4CZl5yAmpidgJuanoCdm6CAnp2hgKGfo4CjoaWApKOngKalqYCpp6uAq6mtgK2sr4CvrrGAsbCygLOxtIC0s7WAtbS2gLa1t4C3triAuLe5gLi2uYC4t7qAuLe6gLi2uYC3tbiAtbS3gLSztYCysbOAsK+xgK6tr4Csq66AqqirgKemqYClo6aAoqCjgJ+eoYCdm5+AmpicgJiWmYCVlJeAk5KVgJKPlICPjZKAjoyQgIyKj4CLiY2AioiMgImGi4CHhYqAhoSJgIWDiICEgoeAhIGGgIOBhoCDgIWAgoCFgIKAhYCCgIWAgoCFgIOAhYCDgIWAg4CFgIOBhYCEgYaAhIKGgIWDh4CGg4iAh4WJgIiGioCKh4uAi4iMgI2KjoCOi4+AkI2RgJKQk4CUkpWAlpSXgJmWmoCbmZyAnpyegKCeoYCjoaSApqSmgKinqYCrqauArauugLCusICysbKAtbO1gLe1t4C4t7iAuri6gLy6vIC9u72Avby9gL69vYDKycqAycjJgMnHyIDHxseAxsTFgMPCw4DBwMCAvr2+gLy6u4C5t7iAtrO0gLOwsYCwra+AraqsgKqnqYCnpKaApKKjgKKfoYCgnZ+AnpudgJyZm4Cal5qAmZaYgJiVl4CXlJeAl5OWgJaTloCXk5WAl5OWgJeTloCXk5eAl5WXgJiVmICal5mAm5iagJ2anICfnJ6AoJ6ggKOgooCloqSAp6SmgKqnqYCsqauArautgLCur4CysLGAtbK0gLa0toC4treAubi5gLq4uoC5t7iAuri6gLu5u4C7ubuAurm6gLm4uYC4treAtrS2gLSytICysLKAsK6vgK2rrYCqqKqAp6WngKSipIChn6KAn5yfgJyanYCZl5qAl5WYgJSSlYCSkJOAkI6RgI6Mj4CMio2Ai4iMgIqHi4CIhoqAh4SIgIaDh4CFg4eAhIKGgISBhYCDgYWAg4CFgIOAhYCDgIWAg4CFgIOBhYCEgYWAhIGFgISBhYCEgoaAhYOHgIaDiICHhYmAiIaKgIqHi4CMiY2AjYuPgI+NkICRj5KAlJGVgJeVl4Cal5uAnZuegKCeoICjoqSAp6WngKupq4Cura+AsrCygLa0toC5uLmAvbu9gMC/wIDDwsOA397fgKuqq4GEhISCm5ubgpCPkILY19iBkZGSgdbV14DLysyA0M/RgM/O0IDNzM6Ay8rMgMnIyoDHxsiAxMPFgMLAw4C/vcCAu7q8gLi3uYC1s7aAsbCzgK2sr4CqqayAqKapgKWjp4CioaSAn56hgJ2bn4CbmZ2AmZebgJiWmoCXlZmAlpSYgJWUmYCVlJiAlZSYgJWUmICVlJiAlpSZgJeWmoCYl5uAmpidgJyan4CenKCAoJ6igKKhpYClo6eAqKeqgKqprICtrK+AsK+ygLOytYC2tbiAubi6gLu6vYC9vb+AwL/BgMHAwoDDwsSAwcDCgM3MzoClpaWB7+7vgdvb24GamZqB19bYgMLBw4DAv8GAvr2/gLu6vIC4t7mAtbS2gLKwsoCurK+Aq6msgKimqYCkoqWAoZ+igJ6cn4CamJyAl5WZgJSSloCSj5OAj42RgI2Lj4CLiY2AioeMgIiGioCHhImAhYOHgISBhoCDgIWAgn+EgIF+g4CAfoOAgH2CgH99gYB/fIGAf3yBgH98gYB/fYGAf32BgIB9goCAfoKAgX6DgIJ/g4CDgISAhIGFgIWChoCGg4eAiIWJgIqHi4CLiY2AjYuOgJCNkICSkJKAlZKVgJiWmICbmZuAnpyegKGfoYClo6WAqKeogKyqrICvrq+As7GygLa0toC6uLqAvbu9gMC/wIDCwcKAxMLDgL69voDBwMGAycfIgMrJyoDKycqA1dTUgNbU1YDU09OA09LSgNHQ0IDPzs6AzMvLgMnHx4DFxMSAwsDAgL68vIC6uLmAtrS1gLOwsYCvrK2Aq6mqgKilpoCkoaOAoZ6ggJ+cnoCdmpyAm5iZgJmWmICYlJeAl5OWgJaSlYCVkpSAlZKUgJaSlICWkpWAl5OWgJiVl4CZlpiAm5eagJ2am4CfnJ6AoZ6ggKSho4CnpKaAqqepgK2rrICwrq+As7GygLe0tYC6uLmAvbu7gL++voDCwMGAxMLDgMLBwoDQz8+As7KygYeHh4L9/f2BsrKygfHw8YDEw8OAw8LCgMHAwYC+vb6AvLq7gLm4uYC2tLWAsrCygK6troCqqaqAp6WmgKOho4CfnZ+AnJqcgJmWmYCWk5aAk5CTgJCOkYCOi46Ai4mMgImHioCIhYiAhoOHgIWChoCEgYWAg4CEgIJ/g4CBfoKAgX6CgIB9gYCAfYGAgH2BgIB9gYCAfYGAgH2BgIB9goCBfoKAgX+DgIJ/g4CDgISAhIKGgIaDh4CIhYmAiYeKgIyJjYCOi4+AkI6RgJORlICWlJeAmpibgJ6cnoCioKKApqSmgKqoq4Cvrq+As7K0gLi2uIC8u7yAwL/AgMTDxIDf3t+At7e3gZeWloK8vLyCxMTEgsTExILHx8eCxsbGgr29vYKmpqaC9vb2gZycnIHc29yA1dTWgNfW2IDU09WA0dHSgM7Nz4DLysyAx8bIgMTDxIC/v8GAu7u9gLe2uYCzsrSAr66wgKuqrYCnpqmApKOmgKGfo4CenaGAnJqegJqYnICYlpqAlpWZgJaTmICVk5iAlJOXgJSTl4CVk5eAlZOYgJaUmYCXlZqAmZecgJuZnoCdm6CAoJ6igKKhpYCmpKiAqaisgK2sr4Cxr7KAtLO2gLi4uoC8u76AwL/BgMPCxIDGxsiAycnLgMzLzYDMy82A1NTVgLe3t4Gtra2C7Ozsgvv7+4Lw8PCC2dnZgrq6uoKDg4OCpaWlgeLg4oDFxMWAwsHCgL+9v4C7ubuAtrW3gLKwsoCtq66AqaeqgKWjpoChn6KAnJuegJiXmoCVk5eAkpCTgI+NkICMio6AioiLgIiFioCGhIiAhIKGgIKAhICBfoOAgH2CgH98gYB+e4CA+/X/f/r1/n/59P1/+PP9f/jy/H/48vt/+PL7f/jz/H/59Px/+/X+f/z2/39/fICAgH2BgIF+goCCf4OAg4GEgIWChoCHhYiAiYeKgIyJjYCPjI+Ako+SgJWTlYCZl5mAnZudgKCfoICkoqSAqaeogK2rrYCxsLGAtrS2gLu5uoC/vr+Aw8HCgMfFxoDPzs+AioqKgdzc3IGJiYmC9fX1gaurq4Hq6eqA0M/PgKampoHj4+OA2djYgNzb24Da2dmA2NfXgNXU1IDS0dCAzs3NgMrIyIDGxMSAwb/AgL26u4C4traAs7GxgK+srYCqqKmApqSlgKOgoYCfnZ6AnZqbgJuXmYCZlZeAl5OWgJaSlICVkZOAlJCSgJSQkoCUkZKAlZGTgJaSlYCYlJaAmpaYgJyZmoCem5yAoZ6fgKShooCopaaAq6mqgK+troCzsbGAt7W1gLu5uoC/vr6AxMLCgMfFxYDLycmAzMvLgM/OzoCsrKyBp6enguLi4oLv7++C5eXlgtPT04K5ubmCjIyMgre3t4Hy8fKAyMfHgMXExIDCwMGAvby8gLm4uYC1s7SAsa+wgKyqq4CnpaaAo6CigJ6cnoCal5qAlpSWgJOQk4CQjZCAjIqNgIqHioCIhYiAhoOGgISBhYCCf4OAgX6CgIB9gYB/fICA/ff+f/v1/X/79fx/+vT8f/nz+3/58/t/+fP7f/r0+3/69f1/+/b+f/z3/39/fICAgH2BgIF+goCDgISAhYKGgIeEiICJhoqAjImMgI6Mj4CSj5KAlpOWgJmXmoCdm56AoqGjgKimqICtq62AsrGygLe2t4C8u7yAwb/AgM3LzIChoKCBk5OTgsLCwoLLy8uCzc3Ngs7OzoLNzc2C0NDQgtXV1YLY2NiC29vbguHh4YLa2tqCr6+vgtjY2IH7+/yA19fYgNra24DX1tiA09PUgM/P0IDLysyAxsXIgMLBw4C9vL6AuLe5gLOytYCurbCAqqirgKakqICioaSAn52hgJyanoCZmJyAl5WagJWUmYCUk5iAk5KWgJORloCTkZaAk5KWgJSSl4CVk5iAl5WagJiXnICbmp6AnpyhgKGgpIClpKiAqairgK2ssICysbSAtrW4gLu6vYDAv8KAxcTGgMnIyoDNzM6A0dDSgNTT1YDS0dOAoJ+ggaioqILu7u6C+/v7gvf394Lx8fGC5ubmgtvb24LX19eC2dnZgtLS0oKxsbGC9PP0gY2NjYHMy8yAwsDCgL28vYC4triAsrGzgK2sroCopqmAo6GkgJ6cn4CZl5uAlZOWgJGPk4COi4+AioiMgIiFiYCFg4eAg4CFgIF+g4B/fIGAfnuAgPn0/X/38fp/9e/5f/Tu93/z7fZ/8uz2f/Hr9X/w6/R/8ev0f/Hr9H/x6/R/8uz1f/Pt9X/07/d/9/H5f/n0+3/89v5/f3yAgIB9gYCCf4OAhIGFgIeEh4CKh4qAjYqNgJCOkICUkpSAmZaYgJ2bnYCioKGAp6WmgKuqq4Cxr7CAtrS1gLu6u4DBv8CAxsXFgM7NzYCPj4+B/Pz8gbCwsILDw8OCxMTEgsfHx4LBwcGCra2tgoODgoLY2NiCs7Ozgtzc3IH8+/uA3NvbgN/e3oDd29uA2tjYgNbU1IDS0M+AzcvLgMjGxYDDwMCAvbq7gLe1tYCyr7CAraqrgKmlpoCkoaKAoJ2egJyZmoCalpeAl5SVgJaSk4CUkJKAk4+RgJKPkYCSj5GAko+RgJSQkoCVkZOAlpOUgJmVl4CcmJqAn5ydgKKfoICmo6SAqqipgK+trYC0srKAuLa2gL68vIDDwcGAyMbGgMzLyoDQz8+Az87NgIeHh4GUlJSC4ODggu7u7oLp6emC4uLigtjY2ILOzs6CzMzMgs7OzoLKysqCr6+vgvr6+oGTkpKB0M/PgMTDw4C/vr6Aurm5gLWztICvrq6AqqipgKSipICfnZ6AmpiZgJaTlYCSj5GAjouOgIuIioCIhYeAhYKFgIOAg4CBfoGAf3yAgPz2/X/68/p/9/H4f/Xv93/z7fR/8uzzf/Ls83/y7PN/8u3zf/Lt83/z7fR/8+31f/Tt9X/17/Z/9vD4f/jy+X/69fx//ff/f4B9gYCCgIOAhYOGgIiFiYCLiYyAj42PgJORlICXlZiAnJqcgKGfooCnpaeAraytgLOxs4C4treAvr2+gO/u7oDm5uaBtra2gs7OzoLV1dWC29vbgt/f34Lk5OSC6enpgvDw8IL39/eC+vr6gvr6+oL5+fmC+Pj4gvX19YLu7u6Cx8fHgvHx8YH+/v+A2dnagNra24DW1deA0dHTgMzLzoDHxsmAwsHDgLy7voC3triAsbCzgKyqroCnpqmAo6GlgJ+doYCbmp6AmJebgJaUmYCUkpeAkpGWgJGPlICQj5SAkI+UgJGPlICSkJWAk5KXgJWUmYCYlpuAm5megJ6doYCioaWAp6WpgKyrroCwr7OAtrW4gLy7vYDBwMOAxsbIgMzLzYDQ0NKA1dTWgNfX2YDj4+SA9PT0gejo6IKGhoaDg4ODg4CAgIP4+PiC8fHxguvr64Lm5uaC5OTkguLi4oLe3t6C2dnZgtTU1IK+vr6Cjo6OgqmoqYHS0dKAu7q7gLW0toCwrrCAqqirgKSipYCenJ+AmZeagJSSloCQjZGAi4mNgIeFiYCEgoaAgn+DgH99gYD79v9/+PL7f/Tv93/x6/R/7+ryf+3n8H/s5u9/6uXtf+rk7X/p4+x/6eLrf+ji63/p4ut/6ePsf+rj7H/r5Ox/7Obuf+7o73/x6vJ/9O71f/fx+H/69Pt//vj+f4F+gYCEgYSAh4SGgIqHioCOi42AkpCRgJeVloCcmpuAoZ+hgKelpoCtq6yAsrGxgLm3t4C/vr6AxcTEgPr5+YDr6+uBtLS0gsnJyYLLy8uCzc3NgsvLy4LOzs6C0tLSgtTU1ILa2tqC9fX1gvT09ILt7e2CxcXFgurq6oH39/aA3t3cgN/d3IDb2dmA19XVgNLQ0IDNy8qAx8XEgMG+voC7uLeAtLGxgK+rrICppqaApaGigKCcnYCcmJmAmZSVgJaSk4CUj5GAko6PgJCMjoCPi42Aj4yNgJCMjoCRjY+Ak4+QgJWRkoCXlJWAm5eYgJ+bnICjoKGAqKWlgK2qqoCysLCAt7W1gL67u4DEwsGAycfHgM7NzIDT0tGA0tHQgLa1tYHJycmC////gvz8/IL19fWC7u7ugufn54Li4uKC3d3dgtvb24LY2NiC09PTgs3NzYLHx8eCt7e3go6OjoKrq6uB1tXVgL28vIC3traAsa+wgKuoqoCloqOAn5ydgJmXmICUkZOAj42OgIuIi4CIhYeAhIGEgIJ/gYD/+f9/+/X7f/fx93/07vR/8uvyf+/p73/t5+1/6+Trf+rj6n/p4+p/6ePqf+nj6n/p4up/6uPrf+rj63/q4+t/6+Xrf+zl7X/v6O9/8uzzf/Xw93/58/t//Pf/f4F+gYCEgYWAh4WIgIqIi4COjI+Ak5GUgJmXmYCenJ6ApKKkgKqoqoCwrq+Aubi5gKKhoYGfn5+Cz8/PgtTU1ILX19eC3d3dgunp6YL29vaCgYGBg4eHh4OLi4uDjo6Og4+Pj4OOjo6Di4uLg4eHh4ODg4OD/v7+gvf394Lt7e2CwcHBgtzc3IHs7O2A19fZgNbW2IDR0NOAy8rNgMXEx4C/vsGAubi7gLOytYCsq6+Ap6aqgKKgpYCdnKGAmZidgJaVmoCTkpeAkZCVgI+Ok4COjZKAjoySgI6MkoCOjJKAj42TgJGPlYCTkpeAlpWagJmYnYCenKGAoqGlgKemqYCtrK+As7K1gLm4u4DAv8GAxsXHgMzLzYDR0dOA1tbYgNjX2YCCgoOBoaGhgoODg4OMjIyDioqKg4mJiYOIiIiDiIiIg4iIiIOIiIiDhoaGg4ODg4P9/f2C8fHxguXl5YLd3d2C29vbgtbW1oLIyMiCnZ2dgrOzs4HJx8mAr66wgKmnqoCioaOAnJqdgJeVmICRj5OAjIqOgIiGiYCEgoaAgX6CgH57gID48vt/8+32f+7o8X/q5e1/5+Lqf+Xf6H/j3eZ/4tzlf+Hb43/f2uJ/39nif9/Z4H/f2eF/39rif+Da4n/i2uJ/4tzjf+Pc5X/l3+Z/6OHpf+rk63/t5+5/8evxf/Xv9X/68/p///n+f4J/goCGg4WAioeJgI+MjoCUkZKAmZeYgJ+dnoClo6SAq6mqgLKwsIC5t7eAy8nJgK+uroGgoKCCy8vLgtPT04LZ2dmC3d3dguHh4YLl5eWC7OzsgvPz84L09PSC9PT0goeHh4ODg4OD/v7+gvf394Ls7OyCubm5gsXExIHj4uGA3dvagNvY2IDW1NOA0M7NgMrHx4DEwL+AvLm4gLWysoCvq6uAqaWlgKOfn4CempqAmpWWgJaRkoCTj4+AkYyNgI+Li4COiYqAjYiKgI2IiYCNiYqAjoqLgJCMjYCSjo+AlZKTgJmWloCempuAo5+ggKilpYCuq6uAtLGxgLu4uIDCv7+AyMbFgM7MzIDT0tGA19bVgOPj44Hl5eWChYWFg4ODg4OCgoKDgoKCg4KCgoOCgoKDg4ODg4GBgYP9/f2C8/Pzgufn54La2tqC09PTgtDQ0ILKysqCvr6+gpeXl4Kvrq6By8nJgLGvr4CqqKiAo6ChgJyZmoCWk5WAkY6QgIyJi4CHhIaAg4CCgIB9f4D79fp/9vD1f/Lr8X/u5+1/6uPqf+jh53/l3+V/493jf+Lb4n/g2uB/39nff9/Y33/f199/39fff9/X33/f2N9/39nff+Da4H/i3ON/5d/mf+ji6X/r5u1/7+nxf/Pt9H/38fl//Pf+f4F+goCFgoaAiIaJgI2LjYCSkJOAmJaZgJ6cn4CkoqSAtrS2gM/Oz4G5ubmC1dXVgtbW1oLa2tqC4+PjgvHx8YKAgICDiYmJg5CQkIOXl5eDm5ubg56enoOfn5+DnZ2dg5mZmYOUlJSDjo6Og4iIiIOCgoKD+fn5gu7u7oLe3t6Cpqamgqamp4HS0tSA09PVgM3Nz4DHxsiAwcDCgLm4vICysbWArKqugKWkqICgn6OAmpmegJaVmoCTkZeAj46UgI2MkYCMipCAiomPgIqJjoCKiI6AiomPgIuKkICNjJGAkI6UgJOSl4CXlZqAm5qfgKCfpICmpamArayvgLOytoC6ub2AwcHEgMnIy4DPztGA1dXXgNbW2ICRkZKBu7u7goiIiIOMjIyDjIyMg42NjYOPj4+Dk5OTg5aWloOZmZmDmZmZg5iYmIOVlZWDj4+Pg4iIiIP///+C8PDwguTk5ILZ2dmC0dHRgszMzILCwsKCk5OTgpuam4GvrbCAnpyfgJeVmYCRkJOAjIqOgIiGiYCDgYWAf32BgPn0/H/z7vd/7unyf+rk7X/l3+h/4tzlf9/Z4n/d199/2tXdf9nS23/X0dl/1s/Xf9XP13/Vz9d/1c/Xf9XP13/Wz9d/18/Xf9jR2H/Z0tp/29Tcf93W3X/g2eB/493jf+fg5n/r5Op/7+nvf/Xu83/79Ph/gH1/gIWCg4CJhoiAjouNgJSSkoCamJmAoJ6egKakpICurKyA7uzsgP///4HExMSC09PTgtXV1YLb29uC5ubmgvPz84KAgICDhYWFg4mJiYOMjIyDjIyMg4qKioOUlJSDj4+Pg4mJiYODg4OD+/v7gvDw8ILc3NyCl5eXgo+OjoHV09KA19XTgNHPzYDLyMeAw8C/gLy4t4C1sbCAramogKaioYCgnJyAm5aWgJaRkoCSjY6Aj4qKgIyHiICLhYaAioWFgImFhYCJhYaAiYWGgIuGh4CNiImAj4uLgJKOj4CWkpOAm5iYgKGdnYCnpKSArqqqgLSysYC8urqAxMHBgMvJyIDRz86A29nYgICAgILz8/OChISEg4SEhIOFhYWDh4eHg4uLi4OPj4+DkpKSg5OTk4OSkpKDj4+Pg4mJiYOCgoKD9PT0guTk5ILX19eCy8vLgsTExILAwMCCt7e3gouLi4KRkZGBq6mpgJ6cnICXlJWAkY6PgIyIioCHg4WAgn+AgP73+3/38fV/8uvvf+zl6X/n4OV/5Nzhf+HZ33/e191/3NXbf9rT2X/Z0dd/19DWf9bP1X/UztR/1M3Uf9TN1H/UzdR/1M7Uf9XP1X/X0Nd/2dLZf9vV3H/e2N9/4Nrif+Pe5X/n4el/6+btf/Dq8X/18Pd/+/f+f4F/g4CGg4eAi4mMgJGPkoCXlZiAsrCygICAgILX19eC5ubmguDg4ILc3NyC39/fgunp6YL6+vqChoaGg46OjoOWlpaDnZ2dg6KiooOmpqaDp6eng6ampoOjo6ODnZ2dg5eXl4OQkJCDiIiIg/7+/oLt7e2C39/fgtTU1IK6urqC4ODggd3d3oDKys2AxsXIgL++wYC3trqAr6+ygKinq4CioaWAnJqfgJaVmoCSkJaAjoySgIuJj4CIh42AhoWLgIWEi4CFg4uAhYOLgIWEi4CHhoyAiYeOgIyKkICPjpOAk5KXgJeWm4CdnKGApKOngKuqroCysbWAurm9gMLBxIDKycyA0NDSgNPS1YCXmJiBy8vLgouLi4OMjIyDi4uLg42NjYOSkpKDmJiYg56enoOjo6ODpqamg6ampoOlpaWDoaGhg5ubm4OSkpKDioqKg4CAgIPu7u6C3d3dgtHR0YLLy8uCysrKgsXFxYKmpqaCpKSkgZSSloCRjpKAi4mNgIWDh4CBf4OA+/b/f/Tv+H/t6PB/5+Lrf+Ld5n/e2OF/2dPcf9bQ2H/UztZ/0szUf9HK0n/OyNB/zMbOf8zFzX/MxMx/ysPLf8nCyn/Kwsp/y8TLf8zGzX/Ox85/z8nQf9HJ0X/TzNJ/1c7Uf9jR13/b1Np/39jdf+Pc4X/p4uZ/7+jsf/Xu83/99vl/g3+BgIiFhoCNiouAk5CRgJmWloCfnJyAkpGRgaGhoYLS0tKC1tbWgtnZ2YLi4uKC7+/vgoCAgIOIiIiDkJCQg5aWloObm5uDnZ2dg5ycnIOZmZmDn5+fg5iYmIOSkpKDioqKg4GBgYPw8PCC4uLigtbW1oKysrKCurq6gdHOzYDPy8mAyMXDgMC8u4C4tLOAsKyrgKmko4ChnZyAm5aWgJaRkYCRjIyAjYeIgIqEhYCHgoKAhYCAgIR/f4CEf4CAhH+AgIWAgICGgYKAiIODgIqGhoCOioqAko6OgJeTk4CdmZmApKCggKuop4CzsK+Au7m4gMPBwIDLyceA1dPSgIWFhYL6+vqChYWFg4ODg4OFhYWDiIiIg46OjoOVlZWDmpqag52dnYOenp6DnZ2dg5mZmYOTk5ODi4uLg4ODg4P09PSC4eHhgtDQ0ILFxcWCv7+/gr6+voKwsLCC9fX1gcnGx4CVkZKAkY2OgIqHiICFgYOAgHx+gPny9X/y6+5/7OTof+Xd4n/g2N1/3NTZf9nR1n/VztN/08vQf9HJz3/QyM1/z8fMf83Fyn/MxMl/ysPJf8nCyH/Kw8h/y8PJf8vEyn/Lxcp/zMXLf83HzX/Pyc9/0cvSf9TO1X/X0dh/2tTcf97Z4H/j3uV/5+Lpf+3o73/07/d/+/f/f4KAg4CHhYmAjYuOgL69v4Di4eKBtbW2guPj44L09PSC8/PzgvLy8oL4+PiCgYGBg4aGhoOMjIyDkpKSg5mZmYOfn5+Do6Ojg6WlpYOmpqaDo6Ojg5+fn4OYmJiDkJCQg4eHh4P6+vqC5ubmgtXV1YLIyMiCwMDAgre3t4KHh4eC/f3/gLy7voC5ubyAsbG1gKmorICioaWAm5qfgJWUmYCQj5WAi4qQgIiGjICFg4qAgoGIgIGAhoCAfoWAf36FgH9+hYCAfoWAgYCGgIOCiICGhIuAioiOgI2MkoCSkZeAmJacgJ+eo4CnpqqAr66ygLe3uoDAv8OAyMjLgMzMz4CKiouBxMTEgoiIiIOIiIiDhoaGg4iIiIONjY2DlZWVg52dnYOkpKSDqKiog6urq4OqqqqDqKiog6Ojo4OcnJyDlJSUg4yMjIODg4OD9fX1gubm5oLZ2dmCy8vLgqWlpoLV1daB5uXogJaVmICNi4+AiIaLgIOBhYB+fICA9O/4f+3o8X/m4et/4Nvlf9vV33/W0Nl/0szVf8/J0n/Mxs5/ysPLf8fAyH/EvsV/w7zDf8K6wn/CusJ/wLrBf8C5wH/Aub9/v7m/f8C4v3/BusB/wrrCf8O8wn/FvcR/x7/Ff8nBx3/LxMl/zsfMf9LKz3/Wz9N/29PYf+HZ3X/n4ON/7ebqf/Xu8X/+9/p/hICBgIqHh4CQjY2Aubi4gcPDw4Ll5eWC39/fgtvb24Ld3d2C6Ojogvr6+oKGhoaDj4+Pg5eXl4Oenp6Do6Ojg6ampoOmpqaDpKSkg6KiooObm5uDk5OTg4qKioOAgICD7OzsgtnZ2YLLy8uCwsLCgrKysoLk4+OB1dLQgL+7uYC5tbOAsayqgKmjooChnJuAm5WUgJSPjoCOiIiAioODgIaAgICEfX2Agnt7gIB6eoD+8vN//vHxf/7x83//8/R/gXt7gIN9fYCFf3+AiIODgI2IiICSjY2AmJSTgJ+bmoCno6KAr6yqgLi0s4DAvbyAxcPCgO7t7YHx8fGCgICAg/39/YL+/v6Cg4ODg4qKioOTk5ODmZmZg56enoOhoaGDoaGhg56enoOampqDk5OTg4uLi4ODg4OD9/f3gufn54LZ2dmCzc3NgrCwsILo5+eB+fb2gJ6bm4CVkJGAjoqLgIiEhYCDfn+A/fT2f/Tr7n/t5eh/5t3hf9/X2n/a0dV/1czQf9HJzX/Oxsp/y8PHf8nBxX/Hv8N/xb3Cf8O7wH/Bub5/v7e8f7+3vH+/t7x/v7e8f763vH+/uL5/wLm+f8G6wH/Cu8J/w73Ef8a/xn/Iwch/ysTMf83Hz3/Qy9N/1M/Wf9nT23/c199/497mf+rl7n/y7fZ/+vb+f4F/g4CHhYmAi4qOgJSTloDT0tWAwsLDgaSkpILj4+OCg4ODg4eHh4OIiIiDioqKg4yMjIOPj4+DlJSUg5iYmIObm5uDnJycg5qamoOVlZWDj4+Pg4eHh4P8/PyC6enpgtjY2ILLy8uCwsLCgr+/v4K8vLyCubm5gpiYmIKGhoeBqaisgKinq4Cgn6SAmZidgJOSl4CNjJKAiIeNgISDiYCAf4aAfn2DgHx7goB6eYCA8/H/f/Lv/3/y8P9/eniAgHt6gYB8e4KAf36FgIOCiICHhoyAi4qQgJGQloCYl5yAoJ6jgKinq4CxsLSAubm8gMHAxIDr6u2AqampgvX19YLy8vKC8vLygvX19YKAgICDiYmJg5KSkoOampqDoKCgg6SkpIOmpqaDpKSkg6CgoIOampqDk5OTg4yMjIOGhoaDgICAg/f394Ll5eWCqampgrGwsoGysrWAl5WZgJGQlYCLiY6AhYOIgH99goD18Pt/6+fxf+Tf6X/c2OF/19Lbf9LN1n/NyNF/ycTNf8bAyn/DvsZ/wLrDf763v3+8tb1/urO6f7ixuH+3sLZ/ta61f7WutH+1rbN/ta2zf7Wts3+0rLJ/ta2zf7evtX+4sLZ/ubG3f7uzuH+8tbl/v7e8f8K6v3/FvcJ/yMDEf8vDx3/Ryc1/18/Sf97W2n/k3N9/7OTmf/Xt73//9/h/kY6OgLe3t4Gtra2C4eHhgvT09ILy8vKC8PDwgvf394KBgYGDhoaGg42NjYOVlZWDnJycg6KiooOlpaWDp6eng6ampoOampqDlJSUg42NjYODg4OD8fHxgt7e3oLOzs6Cw8PDgr+/v4K7u7uCtbW1goOCgoLW09GAqqWjgKagnoCemJaAl5GPgJGKiYCLhIOAhn9/gIN7e4CAeHiA+uzrf/bo6H/z5eV/8uTkf/Hk5H/x5OR/8uXlf/Tn53/46+t//fHxf4J8e4CGgH+Ai4WFgJGLi4CYk5GAn5qZgKeioYCwq6qAtLCvgL6+vYHU09OC4+PjguDg4ILi4uKC6urqgvv7+4KGhoaDjo6Og5WVlYOampqDnJycg5qamoOWlpaDkZGRg4qKioODg4OD+/v7gvHx8YLn5+eCxsbGgu7u7oHe29uAnZmYgJiUlICSjY2Ai4aHgIWAgICAe3uA9uzuf+7k5X/m3N5/39XXf9nP0n/Tys1/zsXIf8nAw3/FvMB/wrm9f7+3un+8tLd/ubG1f7evs3+2rrJ/ta6yf7Wtsn+0rLF/s6uvf7Krr3+yq7B/s6yxf7Wts3+2r7V/tq+1f7ewt3+5srl/u7W8f763v3/AusJ/wrzEf8bAx3/JxMx/zsnSf9PO13/Z1d5/4Nzlf+fi7H/v6/R/9/P8f4B+g4CFhIiAi4qOgJGPlICWlJmAycjLgMPCw4GxsbGC+fn5goiIiIOKioqDioqKg4qKioOLi4uDi4uLg4uLi4OJiYmDhISEg/39/YLv7++C4eHhgtfX14LOzs6CxsbGgsHBwYLBwcGCtra2gpCQkILAwMGB0NDTgJaVmYCZmJ2AlJOYgI6Nk4CIh46Ag4KJgIB+hYB7eoGA8e/+f+3q+X/p5/Z/5uT0f+Ti8n/k4vF/5eLyf+bk83/o5vV/6+n4f/Du/X97eoGAfn2EgIOCiICIh46Aj46UgJWUmoCdnKGApqSpgK6tsoC7ur2AiIiIgubm5oLh4eGC2NjYgtTU1ILa2tqC6enpgvr6+oKFhYWDjY2Ng5OTk4OXl5eDl5eXg5aWloOTk5ODjo6Og4iIiIOCgoKD/Pz8gu7u7oKvr7CCp6eogamprICYl5yAkpCVgIuKjoCFg4mAfn2CgPPv+n/r5/F/4t7pf9rV4H/Tz9l/zsnTf8nDzX/Ev8h/wLrDf722v3+5s7t/trC4f7OttX+xq7J/r6iwf66nrX+tpat/q6Oqf6ujqX+ro6h/q6Oof6qhqH+poaZ/qaClf6mgpX+qoqd/rKSof62lqn+upqt/sKisf7Kqrn+1rLB/uK+zf7qytn+9tLh/wrq9f8e+wn/Mw8Z/0snMf9nQ03/h2Nt/6uLjf/Xs7X/99fZ/hoKCgMnGxoDJyMiBr6+vgu3t7YKEhISDhoaGg4iIiIOKioqDjY2Ng5KSkoOXl5eDnJycg56enoOdnZ2DioqKg4SEhIP5+fmC6urqgt3d3YLS0tKCyMjIgsHBwYLAwMCCvb29gqKiooLi4eGB1tPRgJSOjICXj46AkYmIgIuEgoCGfn2AgXp5gPzt63/25uV/8OHgf+vc23/n2Nd/5dXVf+TV1X/k1dV/5NXVf+XW1n/n2dh/6tzbf+7h4H/15+Z/++7tf4J7e4CHgYCAjYeGgJSOjICblZSAoZyagIKAgIG7u7uC2dnZgs/Pz4LHx8eCyMjIgtPT04Lj4+OC8/PzgoCAgIOHh4eDjIyMg42NjYOMjIyDioqKg4WFhYOAgICD9fX1guzs7ILU1NSChYSEguXi4YCfmpmAmpWUgJONjYCMh4eAhoGBgIF7e4D37e1/7uPjf+XZ2n/d0tR/1svNf9DFx3/LwMJ/xru+f8G3uX+9s7V/urCyf7asr3+zqq1/sKeqf66lqH+so6Z/q6Klf6mhpH+ooKN/p5+if6aeoX+mnqJ/pp6jf6efpH+noKV/qKGmf6mip3+ro6l/rKWsf66nrn+wqrF/sqyzf7Sutn+3srp/u7a/f8C6w3/Dv8h/yMPNf83I0n/Tz9l/2dXff+Dc5n/o5O9/8e74f317gYCCgIWAh4aLgI2LkYCTkZeAmZidgOzr74CBgYGC4uLigoiIiIOJiYmDhISEg////4Lz8/OC6urqguLi4oLb29uC09PTgsrKyoLFxcWCzc3NgsvLy4Kjo6SC0tLTgfPz94ClpamAl5abgJGQlYCKiY6AhYSKgIWEi4CBgIeAfHuCgPHv/X/q6Pd/5ePzf+De7n/c2up/2Nbmf9bU5X/V0+N/1dPjf9TT43/W1OR/2Nbmf9za6n/g3e1/5ePyf+vp+H/y8P9/fXyDgIKBiICJh46Aj46VgJaVm4Camp+A8fH0gK6uroLW1taC19fXgs7OzoLLy8uCzs7OgtXV1YLc3NyC5+fngvT09IL+/v6CgoKCg4SEhIOEhISDgYGBg/z8/IL39/eC8fHxgsDAwIK1tbaBqqqugJiXnICSkJaAiomPgIOCiIB9fIKA8O34f+fk73/g3Od/2dTgf9HN13/LxdB/xMDKf7+6xH+6tL5/trC5f7Ottn+wqbJ/rKauf6mjq3+noKh/pZ6lf6Ocon+hmqB/oJief56XnH+elpt/nJWaf52Vmn+dlZp/nZWaf56Vmn+elZp/npaaf5+Wm3+gmJx/oZmdf6Obnn+lnaB/p5+if6qhpH+tpKd/sKeqf7OrrX+3rrF/vLO1f8C3un/GvL9/zMPFf9XLzX/c09R/5tzdf/Dm53/78fF/g35+gIqGhoDk4eGA8vHxgdLS0oKFhYWDiYmJg4qKioOKioqDi4uLg42NjYOOjo6DjY2Ng+zs7ILj4+OC2trags/Pz4LIyMiCzMzMgs/Pz4K5ubmCg4ODgpmXloG0rqyAkoyJgIyFg4CGgH6Ag3x6gIJ6eID96+h/9eXif+/e23/o19V/49LQf9/OzX/by8l/2cjGf9fGxX/WxcR/1cXEf9XFxH/VxcR/18jHf9vMyn/f0M9/5NXTf+rb2X/x4uB/+evof4F6eYCHgH+AjYaFgIyGhYCwr6+Br6+vgsbGxoLGxsaCwcHBgsHBwYLFxcWCy8vLgtPT04Lf39+C6enpgvDw8ILz8/OC9PT0gvHx8YLr6+uC5+fngt/f34KioaGCh4WFgZ+ZmICYkpKAkouLgIuFhYCFf3+AgHp5gPbp6X/s4OB/5NfYf9vPz3/Ux8h/zsHCf8e7vX/Ctrd/vbGyf7isrn+0qKp/sKWnf62ipH+qn6F/ppyef6Sam3+imJp/oZeZf5+WmH+dlJZ/m5KUf5uSlH+akpV/m5KVf5qSlX+bk5Z/m5OXf5yUmH+dlZp/npebf5+YnX+hmqB/o5yif6WepX+moKh/qaOrf6ynr3+wq7R/tK+4f7iyvH+8t8F/wbzGf8bCzH/Lx9J/0c3Zf9jV4X/h3ep/6eXyf/Hu+398e4GAgYCGgIaFjICMi5KAkI+WgLm5v4Df3+GB19fXgoKCgoP09PSC4eHhgtPT04LKysqCycnJgsnJyYLNzc2Ctra2gvn5+oGUk5WBrq6ygJaWm4CRkJWAi4uQgIaGi4CCgYeAfX2DgPLx/X/p6PZ/6Of2f+Lg8H/b2el/1tTkf9HP33/Ny9x/ysjZf8jG13/HxdZ/xsPUf8bD1H/Gw9V/xsTWf8fF1n/KyNl/zszdf9LQ4X/X1eZ/3dvrf+Tj8n/t6/p/e3qBgIB/hoCFhYyAh4eNgI6NkoCxsbaAhYWHgdLT1IGWlpeCvb29gs/Pz4LNzc2CyMjIgtDQ0ILX19eC2tragtzc3ILd3d2C3t7egt/f34Lg4OCC09PTgoCAgILDw8iAk5OagI6OlICHho2AgYCGgHt6gYDu6/l/5OHuf9rX5H/Tz9t/zMjVf8bCzn+/u8Z/ubS/f7Svun+vqrR/q6Wvf6iiq3+knqd/oZukf56YoH+clZx/mpOZf5iRl3+Xj5V/lY2Tf5OLj3+RiY5/kIiMf5CIjH+QiIt/kIiLf5CIi3+RiIt/komMf5KJjH+Siox/k4qNf5SMj3+WjZB/l46Rf5mQkn+bkpR/npWXf6GYmn+km55/qJ6hf6uipH+wpqh/tautf7qwsn/Btrh/x72/f87ExX/Wy8x/4NXVf+rf4H/16el///T0f4R+foCcl5eAqaengba1tYKCgoKDioqKg4eHh4ODg4OD/Pz8gvPz84LOzs6Cy8vLgsrKyoLLy8uCxcXFgp+enoLS0dCB1tHOgJKLiICKg4CAhn98gIN7eYD+7+p/9ufjf+na1n/m09B/5NHOf9/MyX/ax8R/1cLAf9G+u3/Nu7h/yri2f8i3tH/HtrR/x7Wzf8W0sn/FtLJ/x7Wzf8i3tX/Lurh/zr27f9LBv3/XxsR/3czKf+PT0H/q2td/8+Pff/rr53/77ut/hoF/gKGcmoDw7OuAw8LBgZGQkIK3traCw8PDgry8vILBwcGCyMjIgsvLy4LMzMyCzc3Ngs7OzoLPz8+C0NDQgsHBwYLX1taBq6algJSOjYCOiIeAiYKBgIN8e4D87+1/8uTjf+ja2X/g0tF/2MrKf9DCwn/Ju7t/xLa2f76xsX+4q6t/s6amf66ion+qnp9/p5ubf6OXmH+flJR/mo+Qf5OIiX+Hfn9/8+LlftjJzH7As7Z+rqOnfp2UmH6RiI1+h3+FfoB5f3757Pt9+/D/fYF8hH6HgYp+kIqUfpuUn36po65+vLXAftbN2X7t4/B+g32Ef5GLk3+ZlJt/oJqif6SeqH+noqx/q6awf66qtX+zr7p/uLTAf725xX/DwM1/ysfVf9HO3H/X1eR/3tzrf+bk83/u7fx/e3qCgH9/hoCDg4uAh4aOgKursYDb292By8vMguLi4oLZ2dmCz8/PgsnJyYKxsbKC4uLkgdbW24COjpSAiYmPgIaGjICDg4mAgICGgHx8g4Dy8f5/6ur3f+Pi8H/c2+l/0dDef8vK2X/KyNl/xsPVf8HA0X+/vc5/vLrLf7q4yn+4tsd/trTGf7WzxX+1s8V/tbPFf7WzxX+3tMZ/uLbHf7q4yn++vM1/wsDRf8fF1n/My9t/0tHif9nY6H/h4PB/5uT0f/Hv/X+CgoiAhoaMgImJj4CLi5GAlJSagMbFy4CkpaaBf3+Agre3t4LT09OCzMzMgsfHx4LGxsaCxcXFgsTExILFxcWCp6engpeXmYGPj5aAiIiQgIOCioB8fISA7uz7f+Xj8n/e3Ot/1dLhf83J2H/FwtB/v7vJf7m2w3+0sLx/rqq2f6mlsH+loKp/oJulf52XoH+Zk5x/l5GZf5ONlX+PiZB/iIKHf/nt+X7g1eB+yr/JfrOqs36elp5+kIiPfoZ+hH756/Z9693nfebZ5H3n2uV96NvmffDi7X2CeoB+i4KHfpeNkn6qn6R+wbS5ftfJzn7v3+N+hHt9f42DhX+SiIp/lYyNf5mPkH+ckpN/oJaXf6Sam3+pnp9/rqOkf7Soqn+6rq9/wbW2f8i8vX/QxMR/2czMf+HV1H/q3t1/9ejnf//x8H+KhIOAlpSUgbW1tYKBgYGDgICAg+vr64La2tqC0NDQgsrKyoLFxcWCnp6egqimpYGclZOAgXl2gIF4doD+7uh/9+fif/Hh3H/r2tZ/5dPPf9/Nyn/Zx8N/zbq3f8y3s3/KtrF/xbGuf8Kuq3+/q6h/vKmlf7mmo3+3pKF/taOgf7Sin3+0op9/taKgf7ekon+4pqN/uqelf7yqp3+/rap/w7Guf8e1sn/Murd/0cC9f9bFwn/YyMR/6tzYf/Xo5H/77el//vDsf4F6eICKhIGAwLu4gKOhoIGHh4aCvLy8gsPDw4K8vLyCurq6grq6uoK3t7eCuLi4gpqamYKFg4OBjoaFgImCgYCEfHyA//Duf/bm5X/t3dx/5NPSf9rLyn/UxMN/zLy8f8S1tH++r65/uaqpf7OlpH+uoJ9/qpubf6SXln+ajYx/g3h4f9fDxH6ml5l+9t7kfbakq33+5PV80b7QfL2tw3y0pr18rKK4fKigtXyim7F8opy2fKaivnyppsR8q6rLfK+u1Hyysdl8sbLefLK143y2u+t8ub/yfLrB+Xy7xP58YGaFfWlvkH14fqF9oaTIfW9wg36Xlal+xcHWfnp3gn+RjJh/oJunf6air3+qp7R/r6y6f7SxwH+5t8Z/wL3Nf8bE1X/Mytt/0tHif9jX6X/f3vF/5ub4f3d2gIB6eoSAfHyGgL6+xYCBgYKCzMzMgry8vILX19iBt7i+gIGCiYB/gIeAfHyEgHl5gIDu7fx/6un5f+Xl9X/g4O9/2trpf9TT43/NzNx/x8bWf8DA0H+1tMR/srHCf7GvwX+urb9/q6q7f6mnuH+npbZ/paS1f6Ois3+jobN/o6Kzf6Sis3+korR/paO1f6elt3+op7h/qqm6f62svn+xsMF/trTGf7u5y3+/vtB/w8LUf8bF1n/a2eh/4eHvf+bl9H/r6/l/8fH/f3t7goB/foaAgICHgISFi4Czs7mAp6epgYuLjIK3t7eCw8PDgsHBwYK5ubmChISFgr6+xYCAgImAfXyGgHh3gYDn5fh/3dztf9TS5H/Mytt/xsPVf727y3+3tMN/sq++f62quH+opLJ/o56rf52ZpX+ZlJ9/lI+Zf4uGj3/v5/h+wrrLfpaRoX7c1vF9oJ65fXNzjH28vep8rK7YfKWlzXyiocZ8n56+fJybuHybmLN8mZWvfJmUrHyZlKx8mZWtfJmUrXyYk6p8l5OqfJeSq3yZla58mZSsfJWPpnyUj6R8opuwfL20ynyAeIN9t6u0fYB3e36pnaB+2snMfoR5en+Rhod/mI2Of52Sk3+ilpd/p5ubf62hoX+0p6d/uq2uf8G0tH/Hurl/z8HAf9fJyH/f0dB/6NnYf/Hi4X+EfX2Ao6Cggbu7u4Ll5eWC29vbgtXV1YKioqKCm5mZgYyFg4Dv3tt/7dvYf+fW0n/k085/4tDMf9/MyX/byMR/1cK+f9C8uH/KtrJ/xLGtf76qpn+0n5t/tJ6Zf7Cbl3+rlpJ/pJCMf5uIhH+SgH1/jXt5f4h3dX+EdHJ/gnJwf4JycH+EdHF/hnZ0f4p6d3+Qf31/mYiFf6GQjX+smpd/sqCcf7imon+8qqZ/wrKuf9LCv3/VxsJ/2svGf9/QzH/l1tJ/693Yf/Dh3X/z5N9/gnt5gMfAv4C9u7qBlZWVgrS0tIK3t7eCsLCwgoCAgIK4srGAgHh3gPzr6n/z4uF/7Nvaf+TS0X/bysl/08LBf8y7uX/GtbN/v66sf7mopn+zo6F/rZ2bf6eYln+Zi4l/+eDefraio37v0dV9k36DfeG+ynzQsb580LLBfM2ywnzKscJ8xq/BfMWwwXzGssV8xLPHfMCyx3y8r8V8ua/GfLmxy3y5tNF8u7fYfL273ny/vuR8w8HrfMbE8XzHxvZ8x8r9fGRngn1maYd9Z2uLfWhsjn1obZF9aG6UfWhwl31pcZt9anOffWt1o31we6x9go2/fcPL/32XmbR+19XyfouJmH+gna1/pqO0f6qouX+vrsB/tbPGf7m4zH+/vtN/xcXZf8vL4H/R0ed/19juf93e9X/i4/p/6On/f7/AyICrrLSA6On8f+nq/H/l5fh/3t/xf9na7H/X1+l/1NXmf9HR4n/Nzt9/ycnbf8TD1X++vc5/t7bHf7CwwX+pqbl/pKOzf5qZqn+Wlad/i4uef4CAk392d4l/bW6Bf8zQ9H7Bxep+uLzgfrK2236xtdt+sbXafrO43X66vuV+wsbsfs3R935tb4J/d3iMf4OEl3+Oj6J/mpqsf6Oitn+wr8F/wMDRf8PD1H/Hxtd/zMzdf9LT5H/Y2Ol/29ztf9/g8X/l5fZ/5+j5f+jo+n96eoKAxsbNgMnJy4GYmJiC3t7fgY6Ol4Dl5ft/4uL4f9ra73/R0eZ/ysnef8TD13+8u85/uLbJf7Ctv3+pp7h/paKyf6CcrH+al6V/lZGef4iEkX/a1ex+npuxftDQ+H1/hKl9YWeKfVpfgH2xuvZ8r7bufK+26nyvtOZ8sbTifLCy3Xytrdd8q6rRfKqpynyppsd8qqbDfKqlv3yspL58raTBfKyjwHypo7x8pp64fKWetnylnrZ8pJ63fKOctnyhmbF8npeufJyUrHyak6l8mJGofJiRp3yXkKd8lo2jfJuRp3y/sMR8npCYfYB1d36/rq9+/ujpfpOGhn+bjY1/oJKSf6aYmH+snp5/sqOjf7eoqH++rq5/xbW1f8y8vH/Tw8N/28rKf+HQ0H+RioqA2tjYgcnJyYKPjY2BiIGAgNrIxn/byMZ/1sPAf9K/vH/Qvbl/z7u4f865tn/LtrJ/xrGtf8GsqH+3o59/pJGOf5B+e3/62tV+0LKwfqeKiH6PdXN+9sbHfd6ysn3Qpqh9x5+hfcCanX28l5p9upaYfbiVl322lJZ9tZOWfbaVmH25mJt9vZyffcSipX3NrK594Ly/fYBsbH6Yg4J+tqCdfv3m4n6ThoN/pJaTf7Wmon/Csq5/yrq1f8+/u3/Tw79/2cnEf93NyX/g0Mt/4dHMf4R8e4D9+PeA6+rqgdfW1oGRiomA5dHQf+bT0n/hzs1/28jGf9PAv3/Mubd/xbKwf8Ctq3+6p6V/tKGff66cmn+olpN/kYB+f9O5t36FcXF+oIKGffzJ0Xzwwcl87sHLfOzCzHzowc186MLQfOfE03zlxdR848TVfOHF1nzexth838fdfN/K4XzezON828rgfNjL4XzWzOd81c3sfNXR8XzY1fl8bm2BfXBvhX1zc4p9dHSOfXR2kX11d5V9dXmYfXZ6m312e559dHmffXJ5oH1yeqR9cXqnfXJ8q31zfrB9dIC1fXWCuX11g7x9dYTAfXaGxH2DlNV9Zm2Pfqqu0X56eox/l5apf6GgtX+lpbp/qam/f66uxX+0tMx/ubrSf7/A2X/Exd9/ycrkf8vM6H/IyuR/wsTef8XG3X/P0eZ/y8zhf8TF2n/AwdZ/vr7Tf7u80H+5us1/t7fKf7O0xn+rrL5/nJ2wf4iKnX9zdYh/wMbsfp2ly35+h65+ZW+Yfl5pkn5aZY5+WGSNflhji35XYot+V2KLfldiin5XYot+V2KLfldii35YY4x+WGSOflllj35aZpB+W2eSfl1plH5fa5d+Y3Ccfmp2o358h7N+t8DpfmxwhH99gJR/kZOmf6anun+2t8p/vr/Sf8PE13/HyNt/ycrdf8rL33/MzeF/0NHlf9LT53/R0uZ/5uf6f8/Q5n/KyuJ/ycnhf8fH33/Bwdl/vLzTf7a1y3+urcJ/pqW6f6Gfs3+enK9/mJaof5GPn399e4t/tLPPfm9xin5/iLh9ZG+bfWFqlX1haZJ9YWeOfWBmin1fZIZ9YGSDfV9jgH3Axf18wcX5fMPF9nzExfJ8xcXvfMfF7HzHw+h8x8LjfMjB4HzIwN18yMDbfMnB3XzIwN18yMDbfMe+2XzEvtd8xLzUfMC40Xy7s8t8t6/HfLSqwXyupr18qqG4fKacs3yim7B8o5mwfKSZr3ylma58ppetfKmZrXyplql8p5OifMKpt3yplZt9loaHfuLLyn6OgIB/mYqKf56Pjn+jk5N/qZiYf6+enX+2paR/vaurf8OxsX/Jt7d/z728f9G+vn+9t7aAuqSif7yopn/Kt7R/yLSxf8Ovq3/Aq6d/v6mkf7ymon+vm5d/mYaCf4FwbX/TtbF+rpOQfpqBf36OdnR+h25tfoFpZ37nt7V91KOifdChoH3LnZ59xpucfcKYmX2/lpd9vZWXfbuUln26lZZ9upSWfbiUln25lZh9uZWYfbmWmX25l5p9u5ibfbyanX29m559v52ffevKzX2PgIF+koKDfpaGh36jk5N+wa6tfu3W1H6NgH5/p5eUf7qppX/BsKt/w7Ktf8e1sX/LubZ/zLq3f8e1sn/ItLJ/y7azf864tn/Qurl/zLa1f8Swrn++qad/uKShf7OenH+tmZZ/p5KQf5SCf3/Wt7R+/tDMfZp2dn2JaGl9iGhqfYdoa32GaWx9hWptfYRqb32Cam99g2txfYVvdX2GcXl9hXN6fYV0fH2EdX19hHV+fYJ0fn3/5/t8+eT5fPPh9nzw4PZ87eD7fHVxgH10cYJ9dXOGfXZ1in14d459enqTfXx9l319f5t9f4GgfYGFpX2Ch6l9hImvfYaMs32Hjrd9h4+8fYeQv32Fj8J9g4/EfYCNxH1+i8Z9fYzJfX2NzX1+kNN9fpHYfX6S231+lN99hZzsfV1okX6mrNd+e32Tf5SVrX+bnLV/oKG7f6WnwX+qrMd/r7HNf7S203+2uNV/tLbTf7Gz0H+sr8p/qavFf7K0zH+ys8p/rK7Ef6mrwH+kpbt/lJasf32Aln/L1P9+oq3YfoaSvX54hLB+cX2ofmt3on5mcpx+Ym6Yflxnkn5YZZB+WWWQflhkj35ZZI9+WGSPflhkj35YZI9+WGSPflhkj35YZJB+WWWRflpmk35aZ5R+W2iVflxpl35ea5l+X2ybfmFunn5icKB+dIGufoeUwX6LmMZ+j53KfpWj0H6hrtx+tcLwfm1ziX+EiJ5/m560f62uxH+ztMp/tLXLf7a3zX+3uc9/sLHIf7GyzH+0tdB/tbbQf7a30X+0tM5/rq/If6ipwX+iorl/nJyyf5eWq3+SkaV/gH+Rf7O01n5nbIt+eIfCfWt5sX1qd6x9anWofWl0pH1pcqB9aXGdfWlxmn1rcZh9bXKWfW90ln1xdZR9dHaUfXR1kn10dI99cnOLfXBwh31wboR9bm2Afd3X+Xzc1PR82NDsfNfP6XzWzeV808vkfNTL5XzVzOV81szlfNfN5XzXy+V81MrifNLK4HzRyN58z8fcfM3F2nzNw9t8ysHXfMm903zEt8t8v6/EfLupvXy6pbl8uqO1fLqis3y7oLB8vqCufMGhrnzMqLN8nISIfZWBgX7ozMt+kIB+f5iHhn+ejIx/pJKRf6uYl3+yn51/uKSkf72pqX+/qqp/vqmof66Wk3+rk49/qpSPf7Wgm3+wm5d/mISAf/jVz37Jq6d+sJSQfqmMiX6liIV+n4N/fph7eH6QdHF+iW1rfoNnZX76xMB97rq2fdynpH3WoZ990Z+dfcycm33GmZh9w5aWfcCVlX2/lJV9vZSVfbuTlH27lJR9upSVfbqUln25lZZ9uZWWfbqWl327l5l9vZmbfcOgoX3z0dN9gXBxfoV0dH6KeXl+kYCAfpmHh36ejY1+opCQfqWTk360n55+3MLAfoh5dn+jkY5/sp+bf6+al3+xm5d/t5+cf7min3+8paJ/vqimf7ukon+1npx/r5iVf6mTj3+hiod/gW5rf6KEgX64ioh9m3FvfZpxcH2ZcnF9mXNzfZhzdH2Wc3V9lnZ4fZl5fX2afYF9m4CEfZqAhH2Xf4R9lH6DfZF8g32NeoJ9iniBfYV2f32CdHx9gHN9ff3k+Hz34/Z89OL6fPHj/3x2cYF9dHGEfXNyhn10dIp9dnePfXl5lH17fJh9fX+dfX6BoX2AhKd9goesfYWLsn2Hjrh9iZG9fYuUw32OmMt9kZzSfZSg2X2Vo959laTjfZSk5n2SpOl9jqHqfYqf6n2Jn+59iqLzfYuk+n2Mpv99RlSBfktZiH5xfrB+w8r9foeJo3+WmLR/nJ67f6GjwX+lqMd/qKvLf6eqyH+jpsR/n6LAf5yevH+WmLN/mJqzf4aKon9pboZ/oq/gfomXyH6BkMB+fYy8fnmHt35zgbF+bnurfml2pX5kcqB+YG6bfl5rmH5caZZ+WWaUfllmlH5ZZpN+WWaTfllmk35ZZpN+WWaTfllmk35aZ5R+WmeVflpoln5baZh+XGqZfl1rm35ebJ1+X26gfmFwo35icqV+ZXSnfnaEtX57irx+gI/BfoaVyH6NnM9+k6PWfpqp3X6eruJ+oLDkfqKy5n6uvPB+aG6Hf4CEnX+WmbJ/mZu0f5yeu3+for5/oaPAf6OlwX+kpsJ/oqS/f5yeuH+YmbJ/kpOrf4mJoH9sbYJ/gomvfoib4n11iMx9dIbIfXODwn1ygbx9c4C4fXSAtn12grR9eYOzfXyEsn1+hbF9f4WufX6Eqn19gaZ9e36hfXl8m313eZd9dXaRfXN0jn1xcop9cG+FfW5tgX3a1/t82NPzfNXP7HzTy+Z80cvlfNHK43zRyuJ80crhfNHK4XzRy+J80svkfNHL5HzSy+R808vkfNPJ4XzTyeF81cvjfNfL5HzbzuN838/kfOLP5Hzk0ON85M3hfODG2XzbvdB807TEfNCuvHzUr7t81q65fNest3zZrLN86be6fMako328oaB+hXRyf5WCgH+ciId/o46Mf6mUk3+vmph/sZqZf7Gal3+giIN/mH96f/nNxH66lY9+rY+Kfq6QjH6niYV+pIWBfqKCfn6ggHx+nXx4fph4c36Scm5+jGxpfoZnY36BYl9++Lu1fe+0rn3lq6Z93KSffdihnX3Tnpx9zZuafcqZmH3Hl5Z9xJaWfcGVlX3AlJR9vZOTfb2UlH29lJR9vJOUfbuUlH27lJV9vJWWfb2Wl33LpaZ95cDBfevHx330z899gG1tfoh1dX6PfHx+lICBfpiEg36ahYV+m4aFfpqEg36ag4J+oIiGfquPi37bta9+knt3f6WNiH+rko5/rpWRf7CXlH+slJF/po6Lf52FgX/qwbp+hWVhfrJ+eH2tenV9rXt3fat8eH2rfHp9q358fa2Cgn2wh4d9soqLfbCMjX2tiox9qIiKfaSGiX2hhIh9m4GGfZd/hH2SfIN9j3uCfYt5gH2Hd399hXV+fYNzfn2AdH19/Of5fPno/3x7dIJ9eXODfXhyhn13c4l9dnWMfXZ4j315eZN9e3yYfXx+nX1+gaJ9gYapfYOIrn2Fi7R9iJC7fYqSwH2Llcd9jpnOfZGe132Vo+B9mKfnfZur7n2crvR9n7L8fVFbgn5RXIV+UV2Hfk9ciH5OW4l+TVuLfkxbjX5NXJB+TV2Sfk1elX5gcal+rLjzfoOHpX+Ul7Z/mJy8f5uevn+YnLx/lZm4f42RsH90eph/qbf1fnmKxn5+j8d+hpbNfn+Qxn57i8F+d4e9fnSEuX5wgLR+a3uwfmh3qn5jcqV+YG+hfl5tnn5ca5x+W2qaflpomX5aaJl+WmiYfllomH5aaJd+WmiXflpol35aaJh+WmiYflpomX5bapt+XGudfl1sn35ebqF+X2+kfmFxp35jc6p+ZHWsfml5r35xgrh+dIW8fniJwX59jsd+g5XNfomb036PoNl+kqTefpSm4H6WqOF+lqfhfpWm336TpN1+gZLMfpWl4n5pb41/hoqof5KVsn+Ul7R/l5m3f5WYtX+Pka1/hYegf8HH935oc6B+hp7zfYCX6H1+lOJ9fpLcfX2Q1n19jtB9gI/OfYWTzn2Ils59iZXKfYiSxX2Gj799hIy5fYKJs31/ha59fYKofXt/on15fZ19d3qYfXV3k310dZB9cnKMfXBwhn1uboJ929j9fNjU83zV0O180svmfNLL5XzSy+V80cvkfNHL4nzRy+R80cvlfNHL5XzRy+V80crhfNHH33zRxd580cXefNHH33zVyeB82szifN7N4nzgzeF85tDifO3U5Xz12el8/N3tfP7c63z+1+V89s3YfO/EzHzrvMN867m+fO+6vXz3vL98/7+/fKaAfX2jh4R+g29sf5eBfn+choN/oouJf6OLiH+hioZ/u5SNfoViXX7zrqR997CmfYBcV36YdnF+o4F7fp98d36ceXN+mnZwfpdzbX6Ub2l+j2tlfotmYX6GYl1+gl9afv24r330sql97KylfeWnoH3hpJ592qGcfdWem33RnJl9zZmXfcqYlX3GlpV9w5STfcKUk33AlJN9v5OTfb2Sk329k5R9vZSUfb6Vln2+lZZ9zKWlfdaurn3bs7N947u7fe/GxX370dF9g25tfohzcn6MdnV+j3h3fpF6eX6Senl+lXx6fodta37qrql97K6nffq5s32og35+88e/fpqBfH+li4Z/nIN+f+e7s36EYVx+w4V8fb+De33AhX19wIZ/fcCIgn3CjId9x5KOfciVk33FlZJ9wJSRfb2RkH23jo59sYuMfayIin2ohol9o4SHfZ+Bhn2bf4V9ln2CfZJ8gn2Oe4B9inZ9fYZ1fH2DdHx9gnN9ff/l+Xz65v58e3OBfXhyg312coV9dnOIfXZ1i313do99eXiUfXt7mX19f599f4KlfYGFqn2EibF9hYy3fYeQvn2KlMR9jZfLfY+b032SoNt9laTjfZmp7H2crfV9n7L9fVFbg35SXod+VGCMflZjkX5YZpZ+WWiafllonH5XZ55+VWaeflRmoH5UZ6N+VGilflRpqH5fdLN+p7f4foGGqH+PlbZ/gYeof19niX+Dl9x+bYLHfmuAxH5qf8J+an+/fnSIxX55jMh+dYjDfnGEv35ugLt+a322fmh5sn5ldq5+YXKqfl9wpn5ebqN+XGyhfltrn35bap5+W2qefltqnX5aaZx+Wmmcflppm35aaZx+WmqcfltqnX5ba59+XWyhfl5to35fb6Z+YHGofmFzq35jda9+ZXeyfmZ5tX5rfbh+boG9fnCDwX5zh8V+d4vJfnyQz36AlNR+hZnZfoic3H6Knt9+i5/gfoyh4X6NoeB+fZLSfm6EyH5tgsZ+a4DDfnOHyX6isfJ+cHWUf4aJp3+Dh6R/YGSAf2Nxpn5FVYd+RFKCfomj/n2KpPt9iqH0fYyh732Qo+19kqTqfZKj5X2Qn959jZvXfYqXz32Ik8h9hpDCfYSNu32BibR9f4WvfX2Dqn18gKV9e36gfXh7mX12eJR9dHWQfXJyi31xcYd9b26DfdvZ/nzY1fZ81c7qfNLL5nzRyuR80cjgfNHI4HzQxt980MfhfNHI4XzQyOF80MfgfNDH3nzQxd58z8TbfMzE2HzNxNp81MfefNzK4Hzezd984szgfOfO3nzs0t988dXjfPna5nyBbnR9hHB1fYhyd32Mc3d9i3BzfYdrbX2FZ2h9hmVmfYhlZH2JZGJ9jWZjfal8eH2hgn1+gW1pf5V+en+TfHd//9PKfu2onX31raJ9/bKmfYJbVX6FXVZ+iGBZfpZvaH6edm9+m3NrfplvaH6XbWV+lGpjfpFnYH6OZF1+i2JbfodfWX6EXVd+gFtVfvqyp33yraN966mhfeSlnX3eoZt92J+ZfdWdmX3Rm5d9zJiVfceVkn3ElJJ9wpSSfcKUlH3ClJN9wJOTfb+Tk33Ak5R9wJWUfcecm33Kn559z6OifdarqX3gs7F96bu5ffTEwn39zMp9gmlnfoRraX6HbWx+i3BufodqZ37ysqt99bKqffizq337tKx9/rWufYBbWH6QaWN+x5uSfpJrY37Wj4N91o+EfdeRhn3Xkoh92JWLfdyZkH3en5Z93aCZfdmemH3UnJd9zpmVfciWk33Ck5F9vZCOfbiNjH2yiot9rIeKfaeFiH2ig4Z9noGFfZt+hH2XfoN9k3yCfY96gH2Kd399h3Z+fYN0fX2Bc319f3OAfX10gn17dIV9enWHfXl2i314eI99enuUfXx9mX1+gJ99f4OlfYKGqn2EibB9hYu1fYeOu32JksJ9jJXJfY6Zz32Qndh9k6HffZal532Zq/F9nrH8fVFbg35SXoh+VGGNflZjkn5YZph+W2mdfl1to35eb6d+YHKsfmBzsH5gdLN+XnKzfl1ytX5cc7h+XHO6flxzu35of8h+kabwfneP2n5wiNR+cIjUfnCI035wiNJ+b4fQfm+Gzn5uhct+cojLfnOIyn5whMV+bYHBfmp+vn5oe7p+ZXi1fmN1sX5hc65+X3Cqfl1up35bbKR+WWqhfllpoH5YaJ5+WGecflhnnH5YZ5x+WGecflhonX5YaJ5+WWmgflpron5bbKV+XW6ofl9wq35gc69+YnWzfmR3t35lebp+aX2+fmuAwn5ug8d+cYfMfnWL0X55j9V+fJPZfoCX3n6CmeF+g5vjfoWc5H6GneV+f5fffnWN2H5zi9d+conUfm+H0H5tg8t+aX/Ffml+wX57js5+b4G+fk9inX5MXpZ+S1yRfkpZjH5KWYp+TFqIfk1ahX5NWYN+ma/9fZaq9H2Uput9kqLkfY6d3H2MmtV9iZbNfYaRxX2Djb19gIm3fX+GsX19hK19fIGmfXl+oH13epl9dHeUfXR1kH1zcox9cnKJfXJwhn1xboJ93df6fNnS8nzWz+p82NHqfNjP6HzWzeZ81MzlfNbM5XzVy+V81MrkfNHI4HzQyN58zsbcfMzD2XzLwdd8zMDYfNLF2nzZyN183srffOTM3Hzq0N587NPhfPTX5Hz+2+d8gW91fYVvdX2KcXV9jnR3fZJ1eH2Wd3h9mXh4fZl2dX2YcW99l25rfZhtaH2db2l9onJsfcCJgX2og31+j2xnfumnnn36rqF9gVlSfoZcVX6KX1d+jmFZfpJjWn6UZVx+m21jfp5vZn6dbWR+nGxifppqYX6YaF9+lmdefpNlXH6RY1t+jWFZfopfWH6FXVZ+gVpVfvqwp33wq6F96aiefeOknH3doJp9152XfdKalX3Nl5N9yZWRfcaTkH3DkpB9wpKQfcGRj33AkpB9wJKRfcCSkX3ClJJ9xJaUfcmZl33Pn5x91qWifd6sqH3ns69977m1ffW/un38xL59gWRhfoJkYX73tKx9/LWsfYFcV36DXVd+hV5YfoZeWH6GXVd++aiafemYiX3qmYp97p2PffCgkn3yo5V99qibffaqnX3yqJ1976ecfeumnX3lpZx936Kafdiel33RmZR9zJeTfceVkn3Bko99uo6NfbOLi32th4p9qYaIfaSEh32gg4Z9noOIfZuCiH2WgId9k36GfY58hH2KeoJ9iHmDfYh8iH2GfYp9hHyNfYJ9j32Df5V9g4KZfYSEn32GhqN9h4mpfYiLrX2IjbJ9ipC4fY2Uvn2OlcN9kJnKfZKd0n2UoNp9laPhfZem6H2ZqvB9nK/5fU9ZgX5RXYd+VGCNfldkk35ZZ5l+W2qffl1tpX5fcat+YXSxfmN3t35ler1+Z33Cfmh/xn5ogMl+Zn/KfmV+y35kf81+ZH7OfmN/z35mgdN+c47gfnaR5H53keN+d5HifnaQ4H51j95+dI7cfnOM2H5yitR+cYjQfm6Fy35rgcZ+aH7BfmZ7vH5jd7d+YXSzfl9ysH5dcKx+W22oflpspn5ZaqR+WGmiflhpoX5YaKB+WGigflhpoX5ZaaJ+WWqjflpspX5cbqh+XW+rfl9xrn5gc7J+YnW2fmN4un5me79+aH3DfmqAx35rgst+bYXPfnCI1H5zi9h+dY7cfniS4H57leR+f5npfoGb7H6Dne5+g53ufnyX6357lut+eZTnfneR4351jt5+cYrYfm6G0X5hecF+WHC1flZsr35Vaal+VGekflNln35TZJt+U2KXflFgkX5QXox+T1yIfk5Zgn6Zrvx9lqrzfZOl6n2QoOF9jJvYfYmW0H2Ik8l9hI/BfYKLun2AiLR9gIawfX+FrH1+g6Z9foGhfXx/nX18fZh9e3uUfXp5kX15eY59eXiMfXd2h312c4R9dnGAfe7i/Xzq4Pp85tv1fOXb9Xzn3fZ859z2fOfc9Xzi2vB84dfufN/U63zb0OZ81crifNXJ33zYyt5828nefODK3Hznzd187dHffPPV4nz21uR8/9nkfINuc32IcHV9jHN2fY91eH2Udnh9mHd4fZx5eH2henh9pnx5fat+en2re3Z9q3hxfa54cX2zeXB9tnlvfcF/dH3mnpJ9/aqbfYldVH6OYFd+lGNafphmXH6daV5+oGtgfqNsYX6lb2N+p3BkfqZvZH6lbmN+pG1ifqJsYX6ga2B+nWlffploXn6VZl1+kGNbfotgWX6GXVd+gVtVfvuyp33zraR97aqifeann33go5192Z6ZfdOalX3PmZR9zJiUfcqWk33IlpJ9x5aTfceWk33GlZF9x5WRfciWkn3LmJV9z5uXfdWfmn3bpJ594amifemup33vs6t997iwff++tX39t659glxWfoZeWH6JYFl+jGFafo5iW36QYlt+hVhPfv2jkH2BU0p+g1VMfoZYT36IWlF+iVxTfohcVH6GWlN+glhRfv6uoH36raB99KugfeynnX3kopp93J6Yfdacln3PmJN9yZaTfcOUkX29kZB9uJCPfbWPkH2wjpB9rI2QfaqNkX2njZJ9pIySfaGLk32cipF9mIiPfZeHkX2WiJV9k4iWfZKJmX2RjJ99kI6ifY+Opn2Pj6p9kJKvfZOVtX2Ul7p9lJm+fZacxX2Yn8t9mqLRfZyl2X2eqeF9n6zofaCv732hsvZ9o7X/fVJchH5UX4h+VGGNfldkk35ZZ5l+W2ugfl1upn5gcq1+Y3a0fmV5u35nfcJ+aoHJfmyEz35uh9V+cIrafnGM3n5wjeF+b4zifm2K4n5si+N+bIrkfmuK4356mfN+fZv1fn2b9H58mfF+fJjvfnqW7H55lOh+dpDifnKM2n5wiNV+bYXQfmuCy35pf8Z+ZnzBfmV5vX5jd7h+YXW0fl9ysX5eca5+XW+sflxuqn5cbql+XG6pflxuqX5db6l+XnCrfl9xrX5gcq9+YXSyfmJ1tH5jeLh+ZXq9fmd9wX5pgMZ+a4PMfm6G0X5xidZ+covbfnOO3351kOR+d5LnfniU6356lu1+fJjwfn2a9H5/nPZ+gZ74foCe+n6BoP1+gaD8foCe+X59m/R+epfufneT6H5ngtN+XnnHfl54w35cdLx+XXO4fl1ys35ccK5+W22oflhpoH5VZZl+UmGSflBejX5PXIh+TVmCfpis+n2Up+99kKLmfY2c3H2MmtZ9ipfPfYqUyX2Kk8R9iZG+fYmPuX2JjrV9iY2xfYiLrX2Jiql9iIikfYaHn32GhZ59hoWcfYSDl32EgZN9gn+PfYF9jH2AfIp9f3qHfX55hn1+eYV9fnmFfX95hn19eIV9fHaCfXp1gX3z6P587+P5fOvg93zr3vV87dzxfO3a7Hzw2ep89NrqfPba6Xz42Od8+9bjfIBscX2FbnN9iHBzfY1ydX2SdXd9l3Z3fZp3d32feXd9pHt3fat+eX20g359u4eAfb2Gfn2/hHp9wYN4fcaDd33Jg3R904h5fe+Wgn2PX1R+mGVafp5oXX6kbGB+qW9ifq5yZH6ydGZ+s3VnfrV2aH62d2l+tndpfrV3aX60dmh+sXZpfq50aH6qcmZ+pG9kfp5rYX6XaF5+kWRcfoxiWn6HX1h+glxWfvyzqX30rqV97KqhfeWmnn3eopt92Z+Zfdacl33Tm5Z90ZuWfdCbl33Sm5h90p2YfdOdmH3Unpl915+afdqhnH3eo5194qaffeiqoX3urqR99bKnffy3q32BXFZ+hV1WfopgWX6PYlt+k2VcfpZmXX6ZZ19+kl9WfopXTH6OWk5+kFxQfpVgVX6XYld+lmJYfpViWH6UYlh+kWFXfoxdVH6IW1J+hFlRfoFYUX78r6N986uhfeunn33kpp5936Sffdqjn33Vop59zp+dfcmdnX3FnZ19wZyefb6cn326m599tpqffbOZn32vmJ99qpWcfaaTm32llJ59o5WhfZ+Uo32flqd9n5isfZ6Zr32cmrJ9mpq1fZqbuX2cnr99nqHFfaClzH2kqdN9p67bfaiw4X2psud9qrbvfay6+H2tvP99V1+DflhhiH5ZZI1+W2aSflxpmH5ebJ5+YG+kfmFyqn5idLB+ZHe2fmZ6vX5of8V+a4PNfm+I1X5xi9x+dI/jfnaS6X53le9+eJfzfnmZ9355mfl+dpf5fnSW+H5ylPZ+dZf5fkFSg39BUoN/QVGBf4Gg/n5/nfp+fZr1fnuX8H54lOp+dpHlfnSO335yi9p+b4fUfm2Ezn5rgsl+aX/Ffmh9wH5me71+ZXm5fmN3tn5idrR+YnWyfmJ1sn5idbJ+Y3WzfmR2tH5leLZ+Znm5fmd7vH5pfsB+bIHFfm2Eyn5wh9B+corWfnSN2353keJ+epTofnyY7n5+m/R+gJ35foGg/X5BUIB/QVGBf0FRgn9CUoN/QlKEf0JThX9CU4Z/QlOGf0JShX9BUoN/QVGCf4Gg/351k+9+ZYPafmOA1H5jf9B+ZX/MfmV9x35jesB+YHa4fl5ysX5bbql+WWmiflRkmX5SYJJ+UV6Nfk9ch35NWIF+l6z4fZeq8X2XqOp9mKblfZml332Yotl9lp/RfZScy32Um8Z9lJrCfZSYvn2Tlrl9k5W1fZKTsX2Tkq19kpGrfZGPp32PjaJ9jYqdfYuHmH2JhZN9iIOQfYiDj32Hg499h4KPfYeCjn2Igo99iIKPfYaBjX2Efop9g32JfYF7h32AeoZ9gXqFfYJ5g32Cd4F9g3eAfYV3f32HeH99h3Z9fYd0en2Ic3h9inN3fY50d32RdXd9lXZ2fZh2dX2dd3V9onl2fah7d32vf3p9uIV9fcGJgX3IjIJ9z46DfdSQg33Yj4F93Y9/feKOfH39m4N9jVhMfqNqXn6qbmF+sXNlfrh3aH6+emp+w31tfseAb37JgXB+yoNxfsyEc37KhHJ+yIJyfsSAcH6/fW5+uXttfrN4a36tdGd+pW9lfp1rYX6XaF5+kWRcfotgWX6FXld+gVtUfvixpn3wrKJ96KeefeOlnH3eopt926CZfdiemH3WnZd91Z2WfdWdln3XnZd926CZfeCjnX3kpp596amhfe+tpH32sah9/bWrfYJcVn6GXlh+imBZfo9jW36UZV1+mWdffp5qYH6ibGF+oGhdfpNaTX6ZX1J+nmNVfqJnWX6laVx+pmpdfqVqXX6jal1+oGldfp1nXH6YZFp+k2FWfo5fVX6LXlZ+iF5XfoVdV36BW1Z++7atffa1rn3wtK596bGtfeKurH3crat916ysfdGqqn3Mp6l9x6epfcOlqX2+o6l9uaGnfbOdpH2wnaR9rp2nfayeqn2pnax9qp+xfamhtn2norl9pqO8faSjwH2jpcR9pajJfaerz32qrtd9rbPefbC4532yvO59tL71fbbC/n1cY4N+XWWIfl5njH5faZF+YWyXfmNvnX5kcqR+ZnWqfmh4sH5perZ+an28fmuAw35sg8p+bobRfnGK2X50j+J+d5TrfnqY8358nPp+Pk+Afz9Qgn9AUYV/QFKHf0BSh38/UYd/PlCGfz1Phn9BU4l/RVaMf0RWin9DVYh/Q1OGf0JSg39BUYF/gaD+foCd+H59mfB+epXpfneR4n51jtx+c4vXfnGI0X5uhcx+bYPIfmyBxH5qfsB+aX2+fml8vH5ofLt+aHy7fmh8vH5pfb1+a3/AfmyBw35ug8d+cYbMfnOJ0n52jdh+eJHefnuU5X59mOt+gJzzfoOg+n5DUoB/RFSEf0VWh39GV4p/R1iMf0dZjn9IWY9/SFqRf0hakX9IWpJ/R1qSf0dZkX9FWI9/RFaMf0NUiX9AUYR/cJL0fm2N7H5riuV+aojffmyI235qhdR+Z4DKfmR7wn5hd7l+XnKxflttqX5XaKB+VGSYflRik35UYY5+U16JflNdhX5SXIF+prf9faa19n2jsO19oq3lfaCq3n2gqdl9oKfUfaClz32fo8p9naHEfZyev32bnLt9nJy4fZuatH2Yl619l5SpfZaSpH2UkKB9lI6dfZKNm32RjJl9kIuYfY+Ll32Ri5h9kYuZfZGLmH2Qi5d9jomVfY6IlH2MhZJ9ioOPfYuDjn2Mgo19jIGLfY2Bin2PgYl9koKJfZOBiX2VgId9lX+EfZh/g32af4J9nH5/fZ58fH2fe3l9oXl2faZ6dn2sfXh9tYJ7fb6Jf33HjYN90JCFfdmUh33imIl96puLffKdin34nId9i1VIfpBWSX6rbV5+uXdnfsJ8bH7KgXB+0oZzftiJdn7djHl+3456fuGPe37hj3t+3497ftyNeX7Xi3h+0ol3fsuGdX7EgXJ+u31ufrN3a36qc2d+om5jfppqYH6UZl1+jmNbfohfWH6DXVZ+/bSoffaxpn3wraR96qqifeaooH3kpp594qaefeKlnX3hpJx94aScfeWmnn3pqaF97qyjffSvpX36sqZ9gFpUfoRcVX6JX1d+jmJbfpVmXn6aaWB+oWxjfqdwZX6scmZ+sHRnfqNkVX6iYVF+qWdXfrBuXn60cWF+tXJifrZzZH61c2R+s3JkfrBxYn6sb2J+qG1hfqJqXn6daF1+mmhefpZnX36SZl5+jWRefoljXn6FYl5+gWFdfvq/uX3yu7d967m3fea4tn3ftrZ92bO1fdSytH3Pr7N9ya2yfcWrsX3BqrF9vaixfbimsH20pbF9sqW1fbKoun2xqb59r6rBfa2rxX2rq8h9q63Mfa2w0n2wtNl9s7jifba86n26wfJ9u8X5fV5kgH5fZoV+YWiKfmJrjn5jbJN+ZG+ZfmdzoH5qd6d+bHqvfm5+tn5wgbx+cYTDfnOHyn50itJ+do7afneR4X55lOl+fJnzfn+e/H5AUIJ/QVKFf0JUiX9DVYx/RFePf0VYkX9EWJJ/RFiTf0NYkn9DV5J/Q1eRf0lcln9JXJV/SVuTf0hakX9HWY5/RleLf0VWiH9EVIR/Q1KAf4Og+n6AnPJ+fZfrfnqU5H54kd5+d47ZfnWL035zic9+cYbKfnCEyH5vhMZ+b4PFfm6DxX5vg8V+cIXIfnKHy35zic5+dYvSfneO1356kt5+fZblfoCa636CnvN+hqL7fkRTgX9GVYZ/SFiKf0lajn9LXZJ/TF6Wf01gmH9OYZp/TmKdf09jn39PY6B/T2Ogf05in39MYZ1/S1+bf0ldmH9IW5R/QFOKfztOg392mf9+dJX4fnKS735wjud+cIzgfmyG1n5ogcx+ZXzDfmJ4u35gc7J+XG6pflxso35ca55+W2mYflpmk35ZZI1+WGKJflhhhX5XX4F+rrz5fa25832stu19q7Tmfamx332pr9p9qK3Ufaerzn2kpsh9o6XEfaSjwH2ioLp9n520fZ6csH2dmq19nZiqfZuWpX2Zk6J9l5OgfZeSn32XkZ99mJOgfZmToH2Ykp99l5GdfZaQnH2WkJx9lY+bfZSOmX2VjZh9lYuVfZWKk32WiZJ9mIqSfZuLk32ejJN9oIuRfaGKj32kio59p4qMfamJin2qh4Z9rYaEfa6DgH2xgn19t4V+fb+JgH3IjYR90JGGfdmViX3jmYp97p6NffmkkX2CVEl+iFVJfpleTn6eXk5+sGtbfsmAbn7UhnN+3Yx3fuaRe37uloB+9JqCfvechH75nYZ++Z6GfvachX7xmoN+6pWAfuKQfH7bjXp+1op5ftqNfH7pmYl+96SWfoNXUH+OX1h/lGRef5lpY3+aamV/mWplf5hqZX+UaGN/j2Rgf4deWn/5rqZ+35yWfsOKhH6qeXN+kmdifoBcV372saZ99a+kffmxpn2AWlR+hFxWfohfWH6NYll+k2RcfplnXn6eamB+pG1ifqtxZX60dWh+vHptfr15an6uaFZ+tWxafrtxXn7EeGZ+yHxpfsl9an7Jfmt+x31rfsV8a37Ce2t+v3prfrp5an60dmh+r3VofqtzaH6mcmh+oHFofppuZn6Ua2V+kGplfotoZH6GZmJ+gWRhfvvFwn3zw8F97MC/feW9vn3fu7192bi8fdO2un3PtLl9yrO7fcSwuX2/rLd9vKy4fbqtvH24rsB9t6/DfbWwx320scx9s7PRfbK01H2zt9l9trrhfbvA632/xfR9wsr9fWJngn5jaIZ+ZGuKfmZtkH5ncJV+aHKafml1oH5seKd+b3yvfnKBt351hcB+d4nHfnmNz357kdd+fZTgfn+Y6X6BnfJ+g6H7fkNTgn9EVYd/RVeMf0ZYkH9GWpN/R1uWf0lemn9JXpx/SV+ef0lgn39JX59/SF+ff0hdnX9MYqB/T2Sif09joH9OYp1/TWCaf0xfln9LXZJ/SlqOf0hYin9GVoV/RFOBf4ai+n6DnvJ+gZrrfn6X5H57k95+eZDZfnaN1H51i9F+dYrPfnSJzn50ic1+dInNfnWK0H53jNN+eY/YfnuS3H59luJ+gJrpfoOd8H6Gofd+RFOAf0ZVhH9IWIl/SluOf0xek39OYJh/UGOcf1JloX9TZ6R/VGmnf1Vqqn9Va6x/Vmyuf1Vsrn9Ua61/U2mrf1FnqH9PZaR/TGGff0JWkn9AVI5/P1KJfz1PhH95m/9+dZX1fnSS7X5xjeJ+bYfXfmqDzn5of8V+Znu9fmV4tX5kda5+YnKofmFvoX5gbJt+X2uWfl9pkn5eZ41+XWWIflxjg35bYYB+tcD3fbO88H2xueh9sLfifa+03X2tsdZ9rK7Rfausy32pqcZ9p6fBfaalvH2lo7h9o5+zfaGcrn2dmal9nZelfZ2YpX2dmKZ9n5mnfZ+ap32fmaZ9npimfZ6YpX2clqN9m5WifZmUoX2ak599npWgfZ+VoH2flJ59oJOcfaKTm32llJt9qZacfauVm32tlZp9sJWYfbOUln22lJV9t5KRfbmQjX28kIt9v4+JfcaRin3NlIt91JWLfduXi33jmo1976CPffulkn2EVUt+i1hMfpFaTX6lZVR+rWdVfrhtWn7aiHR+55B6fvKXgH78noV+gVBEf4RSRH+FUkV/h1NGf5FZTH+naVt/xn9wf+WWhn+BVk6Ajl9YgJhnYICda2SAn25ngKBuaICfb2mAnW5ogJttaICYa2eAlmpmgJVpZYCTaGWAkmhkgJFnZICQZ2OAkGZjgI9mYoCOZWGAi2JfgIZfXICAWleA7KWff9GSi3+0fHd/lGZgf+eelH62e3J+m2lgfptpXn6ibGF+qXBkfrF0Z365eWp+wXxtfsqAcH7Hemd+wnNefsp4Y37RfWd+2oVvft6Jc37finR+4Ip2ft6Kdn7binZ+2Yp3ftWIdn7PhnV+yYR1fsKBc367fnF+tX1xfq56cH6nd25+oHRsfppybH6Ub2p+jWtofolqZ36FaGZ+gGZlfvfJyX3wx8h96sTHfePBw33bvMB91Lm+fc62vH3Js7p9xLG6fcGxvn3Bs8N9wLXIfb61y328ts99urfSfbm51325u9t9ur7hfb3B6H3BxvF9xMv6fWNngX5kaYV+ZmyJfmdujn5pcZR+bHWbfm13oX5veqd+cn6vfnWDt353h8B+e4zJfn6R0n6Bldt+g5rkfoWd7X6Iovd+RVSBf0dWhn9JWo1/SlyRf0teln9LYJp/TGGef01jon9OZaZ/TmWof09mq39PZ6x/Tmesf05mrH9NZap/T2erf1Zsr39Va6x/VGmpf1Nopn9SZqF/UGOdf09hmH9NXpJ/SluNf0hYiH9GVYN/iqb+foah9n6Cne5+f5jnfn2U4H57ktx+eZDZfnmP1n54jtV+eI7UfniO1X54j9Z+epHafnyT3n5+luR+gJrqfoOe8X6Ho/l+RVOAf0dWhX9JWYp/S1yQf01flX9PYpt/UmWgf1Ropn9Wa6t/WG6vf1lws39acrd/W3O5f1x0u39cdLx/W3O7f1pyuX9YcLZ/VWyxf09mqX9GXJ1/RVqYf0NYk39CVY1/QFKIfz5PgX95mfh+d5bwfnOP435xi9p+cIfRfm6DyH5sgMF+any4fmh4sH5ndqp+Z3SlfmZyoH5lb5l+Y22TfmJqjn5haIl+X2aFfl5kgH67xPp9ucHxfbe96n21uuN9s7fefbK0132vsdB9ra7Lfa2sx32sqsJ9qqi+faekuH2mobJ9pJ6ufaOdrH2knqx9paCufaagrn2ln619o56rfaOcqn2inKl9opuofaGaqH2gmqd9n5ilfaGZpH2kmqV9ppqkfaiapH2sm6R9r52kfbKdpH21nqR9t56jfbqeoX2+nqB9wZ6efcSenH3Gm5h9ypuXfc6clX3WnpZ93KCWfeKglH3ooZN98KKSffunlX2FV0x+jVpPfpRdUH6cYVJ+sWtZfrpuW37Ecl1+6I94fveZgH6BT0J/i1RHf6loWX/aiXh/h1dNgJ9oXoCxdWuAun1ygLt/dIC6f3WAuH50gLZ9dICzfHOAsHtygKx5cYCpd3CApnVvgKNzboCgcm2AnXBrgJtuaoCYbWmAl2xpgJZsaICVa2iAlGtogJNrZ4CTameAk2pngJJpZoCSaWaAkmllgJJoZYCSaGWAkmhkgJJnY4CRZmKAjWJegIJZVYDel49/s3dvf4paUn/Winp+x39uftGFcn7bind+1YBrftd/Z37ihm5+6oxzfvOTe374mH9++ZmAfvmZgX74moJ+9pqEfvKahH7smIN+5ZWDft6SgX7UjX1+yoh6fsSGen68g3h+s392fqp8c36jeHF+m3RufpVxbX6Qb2x+im1qfoVqaX6AaGh++s7PffLKzX3rx8p948LHfdu/xX3VvMN90LnBfcu3wH3JuMR9x7rKfce8z33EvNF9wbzUfb+81329vtx9vb/gfb/C5n3Cx+59xsv3fWRogH5laoR+Z2yJfmlvjX5qcZJ+a3SYfm54n35we6Z+cn6sfnWDtX55iL5+fI3HfoCS0X6DmNt+h53mfoqi8H6Npvp+SFWCf0pZiX9NXZB/T2GXf1BjnH9RZaF/Umemf1Npq39Ua69/VGyzf1RttX9Vbrh/VW+6f1Vvun9Ubrl/U223f1Nstn9cdLx/W3O5f1pxtX9Zb7F/V2ysf1Rppn9SZZ9/T2KZf0xek39KW45/SFeIf0VUgn+HpPx+hJ/0foGb7X6Bmel+gZnnfoSb6X6KofJ+SlWBf1BbiH9VYI9/WGOTf1llln9bZpl/XGebf1pnm39YZZp/VWOYf1FglX9OXpJ/Tl+Uf09hmH9QY51/Umaif1RpqH9Xba5/WXC0f1tyuX9ddb5/XnfBf195xX9gesd/YHvIf2B6x39fecZ/XnfDf1t0vn9Sa7N/SmKnf0lgon9IXZ1/RluXf0RXkX9CVIl/P1GDf4Cf/n58mfF+epXnfneQ3X51i9N+dIjLfnGDwn5vgLp+bn2zfmx6rX5qd6V+aHOefmdxmH5mbpN+ZGyOfmJpiX5hZ4R+YGWAfr/H+X29xPF9u8Dqfbm94322udx9tLbVfbKyz32xsct9sK7Gfa6rwn2tqb59rai6faqmtX2qpLN9qqWzfaqks32ppLJ9qKOwfaagrn2loKx9pqCtfaagrX2ln619pZ+sfaSdqn2lnal9qZ6qfaqfqX2sn6h9sKCpfbWiqn25o6p9vKSqfb+lqX3Dpqh9x6aofcunp33QqKZ90aWhfdamoH3cp6B95auifeytoX3yrJ99+K2efYBXT36FWU9+jVxRfpZgU36eY1R+qGhXfrtwXX7HdWB+2n9ofpFYS3/Mf3F/hlVMgKNpX4C1d2yAvX1ygMGBdYDEhHiAxoZ6gMeIe4DGiHyAxYh9gMKHe4C/hXuAvIR6gLeBeYCzf3eAr312gKt7dICneHKApHZxgKF0b4Cecm6AnHFtgJpwbICYb2yAl29sgJZua4CWbmqAlW1qgJVtaoCVbWqAlWxpgJRsaYCUbGiAlWtogJVraICWa2eAlmtngJdqZoCYamaAmWplgJlqZICZaGOAk2JcgIBUToDRhnt/oGRZf/eTe37xjnR+/JV6foJOQH+IUkR/ilRGf4tVR3+LVUd/ilZIf4hWSX+FVEh/glNIf/2kkH7yoIx+5pmHftuTg37TkYN+yIx/fr2Ge36zgnh+qn11fqJ4c36bdXF+lXNvfo9wbn6Jbmx+hWxrfoFqan7+1dh9gm9xfoNydH701t193cPKfdjAx33Svcd9z73KffTm9n3Wz9l+iIaLf317gX+mpbJ+ysvpfcPF533GyO59ycz1fczQ/n2Chp9+oabAfpCVsn51fJx+bnWXfm93nH5xe6N+c36qfnWBsX55hrp+fIzDfoCRzX6El9h+iZ3kfoyj736QqPp+SVeCf0xbin9PX5J/UmOZf1RnoH9Waqd/WG2tf1lvsn9Zcbd/WnO8f1t1v39bdsN/XHfGf1x4x39ceMh/W3bHf1l0xH9XcsF/YXvIf2B6xH9ed79/XHO6f1lws39WbKx/U2ilf1Bkn39PYZp/U2Sef2Bwrn90gsd/iJbhf56q/H9ZXoqAYWaVgGpun4BwdKaAc3irgHZ6r4B4fLGAen6zgHt/tIB7gLaAfIC3gHyBuIB9gbqAfIG6gHyBu4B6gLqAeH63gHN7tIBtda2AZm+lgF5onYBUXpCASlWEgH6W7X9uh9l/ZH7Mf2J9zH9jfs9/ZH/Rf2N/0n9jf9F/Yn7Qf2F8zX9fesh/VW+8f09psn9OZq1/TGOnf0tgoH9JXZl/RlmSf0RVin9DVIZ/hKP/foKe9H5+mOl+fZTgfnmO1H53ist+dIbCfnKCun5xf7N+bnurfmx3o35qdJ1+aXKYfmdvkn5lbIx+ZGqIfmNog37Dy/59wMf1fcDF7313eYx+s7TGfoWGjn+6usF/8/P6f5eWmoCzsrWAzMzOgOLi5ID08/WAgH+AgYODhIGDg4SBgYGCgfj3+YDn5uiA0tLTgLm5uoCenZ+AgICBgMbFyH+PjZF/wb3Cfvft9321qLN9saOsfbSjrH24pq19vaiufcGpr33Fqq59yKutfc6trn3Trq992bCvfd2vrH3jsKp96rOrffK2rH35t6t9gFxVfoRdVH6JXlV+kGBVfpdjWH6haFp+q2xdfrNvXX7JeGR+n2FVf4VUTICfZ16ArHBmgLR3bIC8fHGAwoF1gMiGeYDMin2Az41/gNGPgYDSkYOA0pGEgNCRhIDMj4OAyI2CgMOKgIC/iH6AuYR8gLSCeoCwf3iAq3x2gKh6dICkeHOAoXZxgJ50cICcc2+AmnJugJlxboCYcG6AmHBtgJdwbYCXcG2Al3BtgJdvbICXb2yAlm5rgJdua4CXbmuAmG5rgJluaoCabmqAnG9qgJ5vaoCfb2qAoW9pgKJvaICkb2iApW9ngKVtZYCaZFuA8piIf41URX+RVkd/lltLf5peTn+bX09/ml9Qf5hfUH+WXlB/k11Qf49cT3+KWk5/g1ZMf/mmkn7sn45+4ZqMftSThn7HjYJ+vYh+frODe36qfnh+o3x3fpt3dH6UdHJ+j3Jwfo5zc37+5+d+7+Xmf5eSkoCEf4CAkIiKf+nO1X3gydF92cXOfdTDz33x6vJ+2NbZgJuanIGHh4iBiYmMgIKBkX7P0fV91df9fWxugn5tcId+zc7af9fY34C+wMeAr7LCf3d+oX51fqR+d4GpfnmEsH6Hk8R+rLrvfpys5X6Jm9l+iJzffo2i636Rqfd+SleBf0xaiH9QX5B/VGSZf1dpoX9abal/W3Gwf150t39fd71/YHnDf2F7yH9hfcx/YX7Pf2J/0n9jgNR/YX/Tf1990n9des9/W3jLf2N/0X9ifcx/X3nHf153w39ogM1/gpjuf1Jci4Bia5+AcHixgHqBvIB+hMGAfoXAgH6DvYB9gruAfYK6gH2CuYB+griAfoK4gH6Ct4B+greAfoK3gH6Ct4B/g7iAf4O5gICEuoCAhbyAgYa+gIKHwICDicOAhIrFgISLyICFjcuAho7OgIiQ0oCJk9aAi5XagI2X3oCOmeKAjJjggISR2IB2g8aAZXOwgFJgl4CAnf5/a4jhf2WD2X9kgdV/Yn7Rf1l1xn9Ubrx/Umu2f1Bor39OZah/TGKhf0pemX9IWpJ/R1mMf0VWhn+Ipf9+haD0foOc6n5+ldx+fJDTfnuMyn53h8F+dYS5fnJ/sH5we6h+bXehfmt0m35rcpZ+lJu8foyQn397fIOAvr/GgIaHiYGxsrSB3NzfgYGBgoKRkZKCnp6fgqmpqYKwsLGCtra3gru7u4K+vr+CwMDBgsLCwoLCwsOCw8LDgsLCw4LBwcGCv76/gry7vIK4t7iCsrKygqqqq4KhoaGClZSVgoWFhYLm5eaBvby9gZGQkYHS0NGAi4iJgKSfoH+soKN+0re8fc6ws33UsrR92rS1feG3tX3pubZ98Ly2ffW8tH38vrN9gmBZfodiWn6MY1p+kWRafphnW36ha11+q29hfrZ0Y36/dmR+1YBrfs2BdH+iamGAq3FngLV4bYC+fnOAxYR4gMyKfYDSj4GA15OFgNqWh4DcmIqA3ZqLgNyajIDamYyA1piLgNGViYDLkYaAxo6EgMCLgoC6h3+AtIN8gK+AeYCqfXeAp3t2gKR5dICgd3OAnnVygJx0cYCbc3CAmnNwgJlzcICZcnCAmXJvgJhyb4CYcW+AmHFugJhxboCYcG2AmXFtgJpxbYCccW2AnnJugKBzboCidG+ApXRvgKd1b4Cpdm+ArXdvgK93b4Cwdm6AsXVsgJ9nXoCcXUx/n19Of6VkUn+pZ1V/qWhWf6loV3+oaFh/pWhYf6FmV3+cZFZ/lWFVf45dUn+FWU5//KqXfu6jk37fm41+0pSIft6lnH6ljId/2sPAf6mUkn+lgHx+nXx5fpl7en6li4p+sqysgMLAwIHj4eGBsa+wgZ6am4D84el969TcfeHM1n3Zx9R9wb7Bf9bV1oGdnZ2CiIiJgoSEhoGsrLt+b3CBfnJ0hn51eIx+eXuSftLT2YCBgYOC8/T4gdXX34CLkrV+gouxfoONuH6Gkb5+fYScf77Bz4DGytiAb3ODgFljhn+SqPJ+lq//fk1ahn9PXo1/VGOWf1hpn39bbqh/XnOxf2B3uX9je8F/ZX7If2aAzn9ngtN/Z4PWf2iF2n9oht1/Z4bef2WE3X9jgtt/YH/Xf19+1n92k+9/TlyQgGZzroB8iMmAjJfagJGb3oCPmNqAjJXVgImR0ICGjcuAg4rGgIGIw4CAhsCAf4S9gH+Eu4B/hLqAf4S5gH+DuIB/g7iAf4O4gICEuICAhLiAgIW4gIGFuYCBhruAgoe9gIOIv4CEisKAhYvEgIaMx4CHjsqAh4/NgIiR0YCKk9WAi5XZgI6Y3oCQnOOAk5/pgJej7oCap/OAnav4gKCt/ICgrv2Am6n4gI2b5oB1g8eAWmijgEFPgYBhftR/V3TFf1Zxv39Tbbd/UWmvf09lp39OY6B/TF+Yf0tdkn9IWYt/R1aEf4un/X6JofJ+hJrlfoKW235+kNB+eovGfniHvX51grR+eYWzfnp/lX+qrLaAqaqugfHy9oGVlZeCqqutgrq6vILFxceCy8vNgs/P0ILQ0NGC0NDRgs/P0ILPz9CCzc3OgszMzILKysqCyMfIgsbGx4LFxcaCxcTFgsXExYLFxcWCxsbGgsfHyILJycmCy8rLgszMzYLOzs6Czs7Pgs/P0ILPz9CCz87PgszMzILHxseCvby9gq+ur4KbmpuCgYCAgr+9voHW0tKApJycf4Vycn7nvbt978C8ffjEvn3+xbx9gmJdfodkXX6MZl5+k2hffplqX36gbWF+qXFjfrR1ZX6/emh+yn1qft+HcH7XiXt/qG9mgLJ3bIC8fnOAxoZ5gM+Mf4DWkoSA3JiJgOGcjIDloZGA8bCfgJpzZoHmo5SA46KSgN+hkoDanZCA05mNgM2VioDGkIaAv4yDgLiHgICyg32ArYB6gKl9eYCle3eAonl1gKB3dICednOAnHVzgJt1coCbdXKAmnRygJp0cYCadHGAmnRxgJpzcYCac3CAmnNwgJtzcICddHCAnnRwgKB1cYCjdnGApndygKl5c4CsenSAsHx2gLR+doC4f3eAun92gLx/dYCrcGeAqWVTf61nVH+zbFl/t3Bdf7hxXn+4cV5/tnFff7NxYH+ub19/qG1ef6BpW3+YZFh/jl9Tf4VaUH/6q5p+6aKTftqajX7rzch/nZeWgb64uIHZz82AuZOPfqiGhH6lh4V+vaKhfpWSkoGko6OCubi4goqJiYLo5OWAhnh8fvLa4n3l0dt93MvXfeXi5X+IiIiCy8vLgrCwsYKsrK2By8vafnR0hn54eYx+e32Sfn+CmH6LjI+Bt7e5grS0toKhoqaBnqbLfo6WvX6Rm8V+laDPfs/W73/b3eOBhIWIgp2gqIGhrM9/ma/8fk1Zgn9QXop/U2KSf1donH9bbaV/X3Ovf2J4uH9lfMF/aIHKf2qE0X9rh9d/bIncf2yK339si+N/bYzmf2uL5n9sjOp/RVSKgHeSs4Flf4uDb4CmgZun8YCcqfGAnKjugJum64CYo+aAlZ/ggJGa2oCNldSAiZHOgIaNyYCDisSAgYjBgICGvoCAhr2AgIW7gICFuYCAhbmAgYW5gIGFuICBhbiAgYa5gIKGuYCChrqAg4e8gISJv4CEisGAhYvEgIeNxoCIj8mAiZDMgIqS0ICLk9OAjJXXgI6Y3ICQm+GAk5/ngJej7YCcqfSAoa77gFJZgIFUW4OBVVyEgYiYwYOImcCEaHSThGJtjYNWX4mBf43WgGJwr4BGU4eAYnzPf1NstH9RaKx/UGalf09jnn9OYJd/S1yPf0pZiX9IVoJ/jab5foif6n6FmuB+gZPUfn2Oyn56icB+d4W3fsLO/X7h5O6AhoeJgsPDxoLQ0NKC0NDSgs7O0ILJycuCwcHCgre3uYKsrK6CoKGigpSUlYKIiImC+/v9gejo6oHY2NmBy8vMgcC/wYG4t7iBsrKzga+vsIGvrq+BsbGxgba1toG9vb6Bx8fIgdTT1IHj4+OB9fX1gYWEhYKQkJCCnJydgqioqIK0s7SCvr2+gsbFxoLMzMyCz8/PgtDP0ILKycmCm5qagpmXl4GZj5B/68C+ffTEwH39yMJ9g2VhfodmYX6MaGF+kWpifphsY36fb2R+p3JmfrB2aH67e2p+yIBtftOEb37li3N+3o+Af651a4C4fHGAw4V4gM2Mf4DWk4WA3pqLgPKxoICEalyCg2pYhNuxkoT7yqeEgWdVhOqomIDnqJiA4qSWgNugk4DTmo+Ay5WLgMKQh4C7i4OAtYaAgLCDfYCrgHuAp315gKN7d4CgeXaAn3h1gJ13dYCdd3WAnHd1gJx3dICbdnSAm3Z0gJt2dICbdXOAm3VzgJx1coCddXKAnnZzgKB3c4CjeHSApXl0gKl7doCtfXeAsn95gLeCe4C8hX2AwId+gMSIf4DGiH6AtHhugLRsWH/HfGV/wXZhf8N3Y3/EeWR/xHpmf8N6Z3/AeWd/u3dmf7N0ZH+qb2F/oWpdf5ZkWH+LXlR/gVhPf/Gnl37gnZB+0MG+gJyYmIKsqamCsayrgdCppX6wjot+rY6NfsWpqX6tqqqBvby8gtHQ0IKamZmCgH5/gYx9gX723ed959LcfdzL133h3eF/iomKgtDP0IK1tbaCs7K0gdbX5n51dod+eXuNfnx/lH6Ag5l+jo6RgcDAwoLBwcOCsbK2gaiw1H6Sm8J+l6HMfpyo1n59gI2AlpebgsTFyYJ9foKCdnuNgFBbgn9PW4V/UmCNf1Zlln9aa6B/XnGqf2J2tH9mfL5/aYHHf2yG0H9vidh/cIzff3CO5H9wj+d/cZDrf3GR7X9vj+1/ZHybgWyIkoRifIOFYXyChYertYRfaY6BpbH5gKSw9oCkr/OAoKvugJul54CWn9+AkJnXgIyU0YCIj8uAhYzGgIOJwoCCh7+Agoe+gIKHvICChruAgYa6gIKGuYCChrmAgoa5gIKHuoCDh7uAg4i8gISJvYCFir+AhovCgIeNxICIjseAiZDLgIqSzYCLlNGAjJXVgI6X2YCPmt6Akp3kgJai6oCap/GAoK35gFNagIFXXoWBWmGIgV9pioJdaYOFa3iXhXeGp4WAkLSFcoChhZSm0ISKm8WDdICzgWl1t4BXcbx/U2uwf1JoqX9RZaJ/UGObf05fk39MXIx/SliFf5Cq/H6Lou9+iJ3kfoOW2H5/kM1+fIvDfnmHun5qcIh/e3yCgYODhoKoqauCn5+hgoiJi4Ll5emBu7y/gZWWmYHr6/GAt7e8gI6OkoDc3OV/rKyzf4eHjn/a2uZ+tbS/fpqZo36KiJF+f32GfvDs/X3r5/h96+b2fe7p9319eoF+hoOKfpOQmH6qp69+ysbNfvf1/H6cmp5/yMbKf4GAgoCopqiA2NfZgIuKi4Gvr6+B2NfXgYKBgYKYl5iCqaiogpKRkYKjoaGBrKKif+/DwX33yMN9gGZifoVnY36LaWR+kGxlfpZtZX6cb2Z+pHNnfqx2aX62emx+wn9ufs+Fcn7aiHN+6Yx0fuSUhX+zenCAvYF2gMmKfYDTk4WAgGJZgZ6AbIPes5SEq4pyhayLcoWbfWeFiW9bhe7An4See2iC7a2cgOmrnIDhppmA2KCUgM+aj4DGlIqAvo6GgLeJgoCxhX+ArYJ9gKh/e4CkfXmAont4gKB6d4CfeXeAnnl3gJ15doCdeHaAnHh2gJ14doCceHaAnHh1gJx3dYCcd3SAnnd1gKB4dYCieXWApHp2gKh8d4CrfnmAsIB7gLaEfYC8iICAwouDgMiOhYDNkIaA0JGGgL2AdYD72q6C8darhPHWqoSvmnuEp5J1g8CQdYDOgW1/y4Btf8V+bH++e2p/tHZnf6hwYn+caFx/kGFXf4ZbUn/4rJx+5qGUfv/w7YDDv7+CzcrKgs3Hx4Het7J+tJCOfq+Pjn7ApKN+qaamgb28vILR0NCCnJubgoSCgoGQg4d+9+DoferW4H3fzdl919TYf4iHiILQz9CCt7a3gra2t4Hg3/B+dXaIfnl7j359gJR+gYSbfoqLjoG/v8GCwsLEgrS1uYGttdl+kpzCfpiizX6dqdh+fYCNgJucn4LQ0tWCiouPgoWKnIBSXoV/UF2Hf1Nhj39XZ5l/XG2jf2Fzrn9lerh/aX/Df22FzX9widZ/co7ef3SQ5H90kul/c5Psf3WU8X9VbJyAuez8g3WUnIWBpK2FdZWdhWmFjIW67PmEkbXDg6u3/YCrtvqAq7f6gKez9IChrOuAm6TjgJSd2oCOltKAipHMgIeNx4CEisKAgoi/gIOIvoCDiLyAgoe7gIOHuoCDiLqAg4e6gIOHuoCDiLqAhIm7gISJvICFir2Ahou/gIaMwoCIjsWAiY/IgIqRy4CLk86AjJXSgI6X14CPmdqAkZvfgJOe5YCXo+uAnKnzgKOx/IBWXYOBWmKIgV9mjYGQoMuDZHCMhXB+noV9jK+FhZW7hYOTuIV4h6mFaneVha/E9oSOoM6CWnTAf1VttH9Uaqx/Umekf1Jln39QYpZ/Tl6Pf0tah39JVoB/jqXzfoqf536FmNp+gZLPfn2MxX57iLx+prLifnt+iYDCxM6AuLrDgH+BioCipbR/y9DsfomOqH51eZF+dHeMfnR1iX5ydIZ+cXKDfnBwgH7g3/t93tz2fdza8X3a1+192dXofdjT5X3Y1OV92tTmfdnU5X3Y0+J92NPhfdjT4X3X0+B919LgfdfP333Tzdt90c3afdHM2n3Sy9p91crafdfL133YzNh97+Hrfayjp36KhYd/39jaf6ilpoDGwsOAlZGRgOTR0X7xx8V9+8rGfYJnZH6HaWV+jWxmfpNuaH6ZcGh+n3Jofqd1an6weWx+un5ufsaDcn7ViXZ+34t1fuuOdn7omIl/tn1zgMGGeoDNj4KA3aqTgd2zlIShgmuFs5B3hbuXfYW2knmFpIRthZB1YIX+zamE8sOhg/KyoIDusaGA5qyegNylmIDSnZOAyZeOgMCRiYC5i4WAsoeBgK2Df4CogH2ApX57gKJ8eoCge3mAn3t4gJ56eICdeniAnXl3gJx5d4CdeniAnXp4gJ15d4CdeXeAnnl2gJ95doCgeneAo3t3gKZ8eICpfnqAroF8gLOEfoC5iIGAwI2FgMiRiYDPlYyA1ZiNgNiZjYDDhnqAv6mHhJKCZ4WjkXSFs59/hbikg4WgjnGFx7CMhLSefoO3i3KAxoFvf7t7a3+vdGZ/omxgf5VkWn+JXlR//a+ffuqkln776+iAxMDAgs/MzILTzs2B6MC8frSRjn6wkY5+u5+efqWiooG8urqC0dDQgp6dnYKIhYaBloiMfvvi7H3u2OR94c/bfc7Kzn+GhYaC0M/Qgri4uIK5ubqB6un5fnZ3iH56e45+fX+VfoKFnH6Hh4uBvr/AgsLDxYK3uLyBsbjdfpOcw36Yos1+nqrYfnp+ioCam5+C0dLWgouMkIKIjZ+AU1+Gf1FeiH9UY5F/WGiaf11vpX9idbB/Z3y7f2yCxn9wiNB/c43af3WR4n93lOl/d5buf3aW8X+s2u2CuOn2hISosYWLsbuFia64hX+gqYVwjpaFY32EhZ3H0oRnc5SBWV+AgbG9/4CuufqAp7HwgJ+o5oCXoN2AkZnUgIuTzYCIj8eAhYvCgIOJv4CEib6AhIm9gIOIu4CDiLqAhIi6gISJuoCEibqAhYm6gIWKuoCFiryAhou9gIeMv4CIjcKAiY/EgIqRyICLk8uAjZXPgI6W04CPmNeAkJrbgJGc34CTn+WAmKTsgJ2q9ICls/6AWF+FgV5li4Fja5CBc4GihGdzkIV0gqOFgZC0hYaXvYWCkbaFdYOkhWZzkIW1y/6Efo2zg1t1wn9WbrZ/VWyvf1Ropn9UZ6F/UmOYf09fkX9NW4l/SleBf5Cn9n6LoOh+h5nbfoKT0H5/jcV+e4i8fnmGtX58h7J+e4Stfn6Hq35+haZ+fIKifnuBnX56f5l+en2Ufnh7kX53eo1+dniKfnV2hn50dIN+dHSAfuXk/H3j4vh95OH0fePe8H3i3e594dzsfeLa7H3j2+x939rqfd/a6H3e2ud94Nrpfd/a6X3e2ed93dblfdvU4X3Y0+F92dPgfdzR3n3c0t593tPefeLT3H3n19996tbefe7W333z2N598dPWffLQ0X30zc5988fGffvMyX2DaGV+iWpmfo9uaH6VcGp+m3JqfqF0a36pd2t+snttfryAcH7JhXR+14t3fuKOeH7rjnd+65uMf7iAd4DEiX6A0JKFgIptW4OLcFyFnH5oha+NdIW7l32Fu5Z8hauKcoWWeWSFg2lXhaaGb4T1tqSA8bSkgOmwoYDfqJyA1KGWgMqZkIDBkoqAuo2HgLOIg4CthICAqYF+gKV/fICjfXuAoHx6gJ57eoCefHqAnnt6gJ17eYCde3mAnnt6gJ57eYCee3mAnnt5gJ96eICge3iAont5gKR9eoCnfnuAq4B8gK+DfoC1h4GAvIuFgMSQiYDMlY2A1JuRgNqek4Den5SAu5R9gYJ0XIWYh2yFq5h5hbqlhIW7p4WFrpt7hZqJbYWHeGCFhXZehMyGdH/Af29/s3dpf6VvYn+YZ1x/i19Wf4BZUH/spph+8eHegMO/voLQzc2C2dTTgfPMyH62kpB+sZKRfricm36gnZ2Burm5gtLQ0YKfnp+Ci4mKgZuOkn765O197tvlfePR3n3EwMV/hIOEgs/Oz4K5ubmCvLy9gXl6gX92d4h+e3yPfn6Bln6ChZx+hISHgb2+v4LDw8WCubq+gbS8336TnMN+mKPNfp6p2H54e4eAmZqdgtHS1oKMjZGCio+hgFRfhn9RXol/VWOSf1lpm39fcKZ/Y3axf2l9vX9thMh/corTf3WP3X93k+V/eZbrf3mY8H99nfh/sN/shHKRmYWAoquFiq+5hY2zvIWFqbKFd5efhWiEi4Wk0NuEcX6egVxjg4FbYICBs7/9gKy284CirOmAmaLegJOb1YCMlM2AiY/HgIWMwoCEir+AhYq+gIWKvYCEibuAhIm6gIWJuoCFibmAhYm5gIWKuYCFirqAhou8gIeMvoCIjcCAiY7CgIqQxYCLkciAjJTLgI6Wz4CPl9OAkJnXgJGb24CSnd+AlJ/kgJik64CdqvOAprT+gFhfhYFfZoyBZW2SgaCz4YNndJGFdYSlhYCQtIWDk7iFfIuuhW58m4VhbYmFprrphJqs5YFcdsR/V2+3f1Ztr39Uaad/VWihf1JkmX9QYJJ/TlyKf0tYgn+RqPd+jKHpfoea3H6DlNF+fo7GfnuIu354hLN+eYOvfn6Hr36Ciq9+goirfoCGpX6AhaB+f4Kcfn2AmH58gJV+fH6Sfnt8jn56eot+eXmIfnh4hH57eoZ+goGMfoyLlX6Wk51+npylfqWjq36qp65+qqevfqajq36enKN+lZOafo2Kkn6Cfod+8ez7feXg7n3k2+l94Nrofd/Y533j2OV95Nnkfeba5X3s3OZ9797nffLf5X323uZ9+d/mffbY333vzdJ97MfHffTKyX39zMl9g2hmfolsZ36Pbml+lXFrfpx0bH6jdm1+qnltfrN8b369gXJ+yYZ1fteMeH7ij3l+6Y12fuudjn+6g3mAxYyAgNGViYCVb2KB676chJV4Y4Wmhm+FtZJ4hbiVe4WtjHOFmHtlhc2liIT/zKuC+byqgPO5qIDqsqSA4KuegNWil4DKmpGAwZOMgLqOiICziYSAroaCgKmDgICmgH6Ao398gKF9fICffHuAnn17gJ59e4CefHuAnnx7gJ58e4CefXuAn317gJ98e4CffHuAoX16gKJ9e4CkfnyAp4B8gKuBfoCwhYCAtoiDgL2Nh4DGk4yAz5mQgNeelYDeopiA4qSZgPvYr4KKe2KFnYtvha+cfIW7p4WFuaSDhaiWd4WUhGmFgnRchYl5YYTPiXd/w4Fxf7R4an+mcGN/mWhcf4tgVn+AWVF/7aaZfubX1IDBvb2C0c7Ogt/Z2IH/2NR+tpORfrGTkn61mpp+nJmZgbm3t4LS0dGCoaCggo6MjYGgk5h++uTtfe7b5H3i0t19vLi8f4KBgoLPzs+Curq6gr+/wIF+foZ/dneJfnp8j35/gZZ+g4abfoCBhIG9vb+CxMTGgry9wYG6weR+k5zDfpmjzX6eqdd+dXiFgJiZnILR0taCjI6SgoyRo4BUX4Z/UV6Jf1VjkX9aaZt/XnCmf2R3sX9pfbx/boTIf3OL0393kN1/eZTlf3qX7H96mfB/epn0f4aqtIRsiZCFeJmhhYSnsIWKr7mFh6u0hXeYoIWEp7CEiaGwgmRqiYFfZoWBXWOCgbbC/4CuufWApK7ogJuk3oCTnNWAjZXNgImQx4CGjMKAhYu/gIWLvYCFiryAhYq7gIWKuoCFirmAhoq5gIaKuYCGirmAhou6gIeMvICIjL6AiY7AgImPwoCKkMWAi5LIgIyUzICOls+AkJjTgJGa14CSnNuAk53fgJSg5ICYpOuAnarygKSy/IBXXoSBXmaLgWVskoFpcZaBg5C4glxngYSkt+aEcX+fhXSCooVnc5CFW2aAhXB9nYR7h8mAXHXCf1ZutX9Wba5/VWmmf1VooX9TZJl/UGCRf01biX9KV4F/kqn3foyh6H6Imt1+hJXSfoCOxn57iLt+eIOzfnqEr36BirJ+ho6yfoeOr36cocB+z9Txfo2PnH+8vsp/8vT+f5aWm4C0tLmA0tPXgPDw9ICGhoiBk5KUgZ2dn4GmpqeBra2ugbOys4G2treBuLi5gbi4uYG3t7iBtLO0ga6ur4Gop6mBoJ+ggZWVloGJiYmB9vX3gNjY2YC6ubuAnJqcgP36/X/Gw8Z/lZGUf9rR1n6glpp+g3d6foBzdn783uN989HUfe7HyX3zych9/M7LfYNoZn6Ia2d+j25pfpVxa36cdG1+o3dufqt6b36zfXB+vYJzfsmHdn7WjHh+4Y95fuWMdX7qnpB/uYR7gMWNgoDRloqA25+RgOa4mYOMcV2FnH5ohaqJcYWcfmiFtZJ4hN+ylYKCY1mBgGFYgfvAr4DzuqqA6bOlgN+sn4DUo5mAypuSgMCUjYC5jomAsoqFgK2GgoCpg4CApoF/gKKAfoCgfn2An318gJ59fYCefn2Ann58gJ5+fICffn2An35+gKB+fYCgfn2AoH59gKF+fICjf32ApYB9gKiBfoCsg4CAsYaCgLeKhYC+j4mAxpWOgM+bk4DYoJeA36SbgOSnnICee2uBwauJhJiIbIWvm3uFt6OBhbCdfYWfjXCFjH1jhfXaroTpyqKC0Ip4f8OCcn+0eGp/pW9if5hnXH+LX1Z//7Ghfu2nmX7czMqAv7u7gtLPz4Lk396BhXFvf7aUkn6yk5J+s5eXfpiUlYG3traC0tHRgqOiooKSkJCBppiefvrj733t2uZ94tHdfbSwtH+Af4CCz87Pgru7u4LCwcOBg4OLf3d4iH56e45+foCVfoOFnH59foGBvLy+gsTFx4K/wMSBv8bpfpOcw36Yosx+nqrXfnJ2goCXmJuC0dLWgo2OkoKOk6WAU1+Ff1Feh39VY5B/Wmmaf15vpH9jdq9/aH27f26Exn9zitJ/dpDcf3mU5H96l+p/epjvf3qZ8n9jfo6CvvH+hHCOlYV7nKSFgaSthbLg7YRidoCDdHyYgWRri4FjaYmBYmiHgWBmhIG4w/+Ar7n0gKWu6ICcpN2Ak5zUgI6VzICJkMaAhozBgIWLvoCFi72Ahoq7gIaKuoCGirmAhoq5gIaKuYCHi7mAh4u5gIeLuoCHjLuAiI29gImOv4CKkMGAi5HEgIyTx4CNlMuAj5bPgJCY0oCRmtaAk5zbgJOe3oCUoOKAl6PogJyo74Cir/iAVl2BgVxjiIFiao+BZ2+TgWlxloFqcpaBZ2+UgX2Is4Fxfp+DaXaUhHF/n4RrdpqCfIjIgFlzvn9UbLJ/VWusf1RopX9VZ59/U2SYf09fj39MWod/SleAf5Cn9H6LoOd+h5nbfoSU0H5/jcV+e4e6fnuGtH7J0/1+5uv+f9PV3oCRkpaBsLG1gc7O0oHo6eyBgIGCgoyMjYKWlpiCn5+ggqenqIKtra6CsrKzgra2t4K5ubqCvLy8gr6+voK/v7+CwMDAgsDAwYLBwMGCwMDAgr+/wIK+vr6CvLy8grq6uoK3t7eCs7Ozgq6uroKoqKiCoaGhgpiYmIKOjo6Cg4ODgu/u7oHU09SBuLe3gZmYmIHr6OmAi4iJgPvr7H6Bb3B+9MnKffvOzH2CaGZ+h2tofo1uaX6UcWp+m3RtfqJ3bn6qem9+sn5xfryCdH7Hh3Z+1Ix4ft6NeH7eiHN+6J+Rf7iFfIDEjoSAz5aKgNqfkoCadGeBoYFrhMmihoTQp4uDp4FxgYFiWYGBY1mBgWNagf7Es4D4wK+A8LmqgOaypIDcq5+A0qOZgMibk4C/lI2At4+JgLGKhoCshoOAqISBgKWCgICigH+AoH9+gJ9+fYCefn6An39+gJ9/foCff3+An4B/gKCAf4CggICAoYB/gKGAf4CigH6ApIF/gKaBf4Cpg4CArIWCgLGIhIC2i4eAvY+KgMWVj4DOm5SA16GYgN6mnIDkqJ6A0ZaLgMd5Y3+tjHCB1LqVg8+4koSQgGaFk4NohYJ0XIXCrYqEhV5QgM6JeH/BgXJ/sXdqf6NuYn+WZlx/iV5Vf/2woX7qpZl+0sPAgL26uYLSz8+C6eTkgYp3dX+2k5J+spOTfq+VlX6TkJCBtrW1gtLR0YKlpKSClZOUgayfpX795fF97trofeHR332sqa1//Pv8gc7NzoK8vLyCxcTGgYeIj391d4d+enuOfn6AlH6ChZt+9fX8gLu7vYLFxceCwcLGgcTL7X6TnMF+mKLLfp2p1X7h5/9/lpeagtHS1oKOj5OCkJWmgFNehH9RXYZ/VGKOf1lomH9dbqJ/YnStf2h7uX9tgsR/conOf3aO2X94kuF/eZXnf3qX7H95l/B/epnzf4eruINhfIKFr93phICdqoNsdJKBYmqKgWNqioFkaoqBZGqJgWJph4FgZYOBuMP9gK+48oCkruaAnKTbgJSb0oCOlcuAipDFgIeNwICFir2Ahou8gIaLuoCGi7qAhou5gIeLuICHi7iAh4u4gIiMuYCIjLqAiI27gImNvICKj7+Ai5DCgIySxICNk8eAjpXKgI+XzYCRmdGAkpvVgJOd2YCUnt2AlJ/ggJah5YCapuuAn6zzgKe1/YBZYISBXmaKgWJqjoFmbZGBZm6SgWRskIFiaY6BXWSIgVdegoGksfiAmKTpgHyHx4BWb7l/Umquf1RpqH9TZ6F/VGadf1JilX9OXo1/TFmFf5Os/X6PpfB+ip/jfoaY2H6Dks5+fozCfnqHuH6QnMl+lJahgMjJzoGhoqSCurq8gsLCxILIyMqCzMzOgs/P0ILP0NGC0NHSgtDQ0YLQ0NGC0NDRgtDQ0YLPz9CCz8/Qgs/Pz4LOzs+Czs7Ogs7OzoLOzs6Czs7Ogs7OzoLOzs6Czs7Ogs/Pz4LPz8+Cz8/PgtDQ0ILQz9CC0M/QgtDP0ILQz9CCz87Pgs7NzoLMzMyCycjIgsPDw4K8u7uCrKurgu/t7YHRzc2Ax7W2fvLKy336zcx9gWlnfoZqZ36MbWl+k3Bqfpp0bH6hdm5+p3lufrB9cX65gXN+xIZ2ftCKeH7YinZ+1YRwfuOekX+3hn2Awo6EgMyWi4DWnpKA4KeZgOmun4DytqWA+LyrgPzAr4D/w7KA/8WzgP7Es4D5wbGA8rytgOu3qIDisKSA2KmegM6hmIDGmpOAvZSNgLaOioCwioaAq4eEgKeEgoCkgoGAooGAgKCAf4CfgH+AnoB/gJ+Af4CfgICAn4GAgKCBgYCggoGAoYKCgKKCgoCjg4KApIOCgKWDgoCmg4GAqYSCgKyGhICxiYaAtYyIgLyQi4DElY+AzJuTgNSgmIDcpZyA4aiegM+WjIDCdmJ/xnlkf9KEb3/ZinV/jWNSgODDm4LZv5iDhXFbgtKLeX/IhnZ/vH5vf611aH+fbGF/kmRaf4ZdVH/4rp9+5qOXfsi5t4C7uLeC09DQgu/p6YGQfXx/tJSSfrCUk36tk5R+j4yMgbSzs4LS0dGCpqWlgpiWl4Gzp6t+++fxffDd6H3k1OB9pKGlf/j3+YHOzc6Cvb29gsfHyYGNjZR/dXaHfnl6jX59f5N+goSafu/w9oC6uryCxsbIgsTFyYHI0PN+k5vBfpiiyn6dqNR+3OL6f5WVmYLR0taCj5CUgpKWp4BSXYJ/UFyEf1NgjH9YZpV/XGyef2FzqX9mebV/bIDAf3CHyn90jNR/dpDcf3eS4n94led/d5Xrf3eW7n94l/B/gJ/NgIGTyYBaYYOBXmWGgWBoiIFjaomBZGqJgWNph4FhZ4SBXmSBgbbA+YCstu6Ao6vjgJqi2ICTmtCAjpTJgIqQw4CHjL+AhYu8gIaLu4CGi7qAh4u5gIeLuICHi7iAh4u3gIeLuICIjLmAiY26gImNu4CJjryAio++gIuRwICMksOAjpTGgI+VyYCQl82AkZnQgJKb1ICTndiAlJ7bgJWf3oCVoeKAmKTngJ2p7oCjsPaAVVyAgVphhYFdZYmBYGeLgWFojIFgaIuBXmWJgVphhIGruP6Aoa7zgJei5oB6hsOAVGyzf1BmqH9SZqR/UmWdf1NkmX9RYZN/Tl2Lf0tYg3+Sqvp+jqTtfoqc4H6Fl9V+gZDKfn2LwH56h7d+mqTRfsHDzoB+foCCvr7Bgs7O0ILMzM6CyMjKgsTExYK/v8CCurq7grS1toKvr7CCqqqrgqWlpoKhoaKCnZ2egpmZmoKWlpeClJSUgpKSk4KRkZGCkJCQgpCQkIKQkJGCkpGSgpOTk4KVlZaCmJiYgpubnIKfn6CCo6OkgqioqIKtra2CsrKzgri3uIK9vL2CwsHCgsbGxoLKysqCzc3NgsfGxoKTkpKCiIaGgejX137wysp9+c3MfYFoZn6Famd+imxofpFvan6Xc2x+nnVtfqV4bn6tfHB+tX9yfr+DdH7Kh3Z+0Id0fsp9a37enJB/s4V9gL6NhIDHlYqA0p2RgNukmIDkrJ6A67OkgPG4qYD2vKyA+L+vgPjBsYD2v6+A8bytgOu4qoDks6aA3K2igNOmnIDKn5aAwpiRgLqTjYC0jomAroqHgKqHhYCmhYOApIOCgKGCgYCggYGAn4GBgJ+BgYCfgoKAn4KCgKCDgoChg4OAoYSEgKKEhICjhYSApIWEgKWGhYCmhoWAqIaFgKqHhYCtiIaAsIqHgLSMiYC6kIyAwZWPgMiZk4DQn5eA16ObgNylnIDKk4qAunJff791YX/LgGx/0oZzf9SIdH/UiXZ/04p3f9CJd3/KhnZ/wIFyf7V6bH+ncWV/mmlef41hWH+CWlJ/8qudfuGglX6/sK6Auba1gtPQ0IL07+6BloSDf7OTkn6wkpJ+rJKTfoqHh4GzsbGC0tHRgqinp4KbmZqBuK2yfvzm9H3w3ex949TkfZ2ZnX/09PWBzs3Ogr69voLKysyBk5Oaf3Z3h355eox+fX6SfoGEmX7p6vCAubm7gsbGyILHx8uBztX2fpKbwH6Yocl+nafSftfd9H+TlJiC0dLWgo+QlIKTmKmAUVyAf09agX9SX4l/VmSSf1pqm39fcKV/ZHawf2l9un9ug8R/cYjOf3OM1X90j9t/dZHgf3SR5H90kud/dJLpf2+O539icaiAWWCBgVxjhIFfZoaBYWiHgWJohoFhZ4SBX2SBgbnD/ICxu/KAqbLogKCo3oCYoNWAkpnNgI2Ux4CJj8GAh4y9gIaLu4CGi7mAh4u5gIeLuICHi7iAh4u3gIeLtoCIjLeAiI24gImNuICJjrqAio67gIqQvYCMkcCAjZLCgI6UxYCPlciAkJfLgJGZz4CSm9KAk5zWgJSe2YCVn9yAlaDfgJei44CapumAn6zwgKWy+ICsuf+AWF+CgVphhIFbYoWBW2KFgVlgg4Gtuv+ApbH2gJyo64CUn+CAeYO+gFFnrH9NY6J/T2Oef1BimH9RYpV/T1+Pf01biH9KV4F/kaj1fo2i6X6Im91+hJXSfoCQx359ir5+eoW1fo+bxn6cnqiAv8HFgYiIioKLi42CgYGDgvDw84He3+KBzs/SgcDAw4Gzs7WBp6epgZycnoGTk5SBioqMgYODhIH5+fuA7+7wgObm6IDg3+KA3NvdgNnY24DZ2NuA2trcgN7d4IDk4+WA7OvtgPX194CAgIGBh4eIgY+PkIGYmJmBo6Kjga6ur4G7uruBycjJgdjY2IHp6OmB+/r7gYeHh4KLi4uC3NragdjU1YDLurt+7cjJffbNzH3/0M59g2lnfohraH6Ob2l+lXFrfpt0bH6hdm1+qHpvfrB9cX65gHJ+woNzfsiCcX6/eGZ+2JqOf7CEfIC5i4KAw5OIgMybkIDVopaA3aibgOOuoIDptKWA7bipgO+6q4DvuquA7bmqgOm2qYDjsqaA3a6igNaonoDOopmAxpyVgL6WkIC3kYyAsY2JgKyKh4Coh4WApYWEgKODg4Chg4KAoIKCgJ+CgoCfg4OAoIODgKCEhIChhYWAooaGgKOGhoCkh4eApYiHgKWIiICmiIeAp4iIgKmJiICriomArYuJgLCMiYC0jouAuZGNgL+UkIDFmJOAy5yWgNGgmIDVoZmAw4+HgLBsWn+1b11/wntof8mBb3/Lg3J/yoRyf8mEc3/Gg3N/v4Bxf7Z7bX+rdGh/oG1if5RlW3+IXlZ//bGifuynm37cn5V+taelgLe0s4LU0dGC+fTzgZyLin+ykpJ+rpKTfquSlH6Gg4OBsbCwgtLR0YKpqKmCnpydgb6zuH785vR98N3sfeLU432Wk5d/8fDxgc3MzYK+vr+Czc3OgZmYn393d4d+enuMfnx/kX6BhJl+4+TqgLi4uoLHx8mCycrOgdHZ+X6Rmb5+l5/Gfpulz37S2O9/kpOWgtHS1oKQkZWClZmpgKG2/H6csv5+UF2Ff1Vij39ZaJd/XW2gf2Jzqn9mebR/a3+9f26Exn9wiM1/cYrTf3GM2H9xjNt/cY3ef3CN4H9sid5/YW6jgLC9/YBbYYCBXWSCgV5kgoFfZIKBXmOAgbjD+oCzvfOArLbrgKWt4oCdpdmAlp3QgJCXyoCMksSAiY+/gIaLu4CFirmAhou4gIeLt4CHi7eAh4u2gIiLtoCIjLaAiIy2gIiMtoCJjbiAio65gIuPu4CLkL2AjZK/gI6TwYCOlMSAj5bGgJGYyoCSmc2Ak5vQgJOc1ICUnteAlZ/agJWf3ICWod+AmKTkgJuo6YCgre+ApLL1gKi1+YCqt/uArLn9gKy5/YCqt/qApbH0gJ6q64CXouKAj5rYgHaAuIBNY6V/S1+cf01gmH9NX5N/T1+Qf01din9MWYV/lKz9fo+k8H6Ln+V+hpnZfoOSzn5/jsR+fIi7fnmEs35+irV+mJywf5WXoIC4usOAqKqxgIuMlIDn6vZ/v8HNf56gq3+EhY9/4eHyfsDA0H6nprV+k5OgfoaEkX57eoV+6OT4feDb7n3a1uh91tLkfdTQ4X3Uz9990czefdDL3n3RzN591dDifdnV533g2+596uX1fX56gn6HhYx+mJWcfq6rsn7Lxs5+8O3zfpGPkn+vrLB/1dLUf4F/gICdm5yAtrO0gKOgoIC/uLl/koKDfurHx33zzMt9/NDOfYFpZn6Hamd+i21pfpJvan6Xcmt+nHNrfqN3bX6qenB+sn1wfrp+cH6+fWx+tXJjftGXjX+sgnyAtYqCgL2Qh4DGl42Azp6TgNSjmIDbqZ2A4K2hgOOxpIDksqWA5LOlgOKypYDfsKSA2qyhgNSonoDOpJuAyJ6XgMGZk4C6lI+AtJCMgK6MiYCqiYeAp4eFgKSFhYCihISAoYSEgKCDhICghISAoIWFgKGFhoCihoeAooeIgKOIiYCkiYmApYqKgKaLi4Cni4uAqIyMgKmMjICrjIyArI2MgK6NjICxjo2AtJCOgLiSj4C9lJGAwZeSgMaalYDMnZeAzp2WgLuLhIClZlZ/qmpZf7Z1ZH+9e2t/vn1sf759bX+9fm5/uXxtf7J4an+qc2Z/oW1if5hoXn+MYVh/g1tUf/WtoH7ko5h+1puSfqyfnYC0sbGC1NHRgv75+YGikpF/r5KSfqySk36pkpR+gX9/ga+ur4LS0dGCq6qqgqGfoIHFusB+++Xzfe7c7H3h0+R9j4yQf+3s7YHMzM2Cv7/Ags/P0YGenqV/dnaGfnp7jH59f5J+gISZft7f5IC3t7mCx8fJgszM0IHV3Px+kJe6fpaew36ao8x+zNLof5GSlYLR0tWCkZKVgpaaqoCes/Z+ma/3fk9bgn9TYIp/V2WTf1tqm39fcKR/Y3Wtf2d6tn9qf75/bILFf22EyX9ths5/bIbRf2yH1H9rhtV/Z4PUf15rnYCsuPaAsb36gLTA+4C2wfyAt8L6gLXA94Cyu/GArbbrgKev44CgqNuAmaHTgJSazICPlcaAi5HBgIiOvYCGi7mAhYq3gIaKtoCHi7aAh4u2gIiMtYCIjLWAiIy1gImMtYCJjbaAio63gIuPuYCLkLqAjZG8gI6Tv4CPlMGAkJXDgJCXxoCSmMmAkprMgJObzoCUnNGAlJ3UgJWe14CVn9mAlZ/cgJeh34CZpOOAm6fogJ6r7ICgrO6AoKzvgKGu74CirvCAoa7ugJ6q6oCYo+KAkpzagIuU0IBzfLKASl+df0hblH9KXJF/SlqMf01ci39LWoV/SleAf5Go9n6MoOl+iJvffoSW1H6AkMl+fYvAfnqGt353g7B+dX+pfnZ/pn53fqJ+eX+gfnh9nH52e5d+dXmTfnN2jn5wdIh+b3GEfm9vgH7b3P192dn4fdbV8n3U0ep90s7kfc/L3n3Pyt19z8rdfc7K3H3Oydp9zcjYfc7J2X3Oydp9zsfYfc3F2H3Kxth9ysbXfcrF1H3JwtR9xsLQfcbCz33HwNB9xb7NfcS/zH3Jws59zcTQfdLF0n3WxtF93MnTfeHL1H3gyM994cfKfeHDxX3nxMZ978nKffjNzX3+zst9hGhmfopsaX6Pbml+k3BpfpdxaX6dc2p+o3Zsfqp5bX6xemx+tHdofqlsXn7Kk4t/qIF7gLCHgYC4jYWAv5OKgMWYj4DMnpSA0aOYgNWmm4DYqZ2A2aqegNmroIDYqqCA1amegNGmnIDMo5qAx5+XgMGblIC8lpGAtpKOgLCOi4Csi4iAqImHgKWHhoCjhoWAooWFgKGFhYCghYaAoIWGgKGHh4CiiIiAo4mKgKSKi4Cli4yApoyNgKiOjoCpj4+AqpCQgKyRkYCtkZGArpGRgK+RkICwkZGAspGQgLWSkYC3k5GAupWRgL6WkoDCmJOAxpqVgMialIC0h4GAmV9Rf5xiU3+pbl9/sHRmf7F1Zn+wdWd/sHZof6x0Zn+mcGR/n2xhf5hoXn+PY1p/hV1Vf/qwo37rqJx+3aCWfs+ZkX6jl5WAsq+vgtTS0YKBf3+CqZmZf66RkX6qkZJ+p5GUfvv294Cura2C0tHRgqyrq4Kko6OBzcLJfvrn833t3Ot939LjfYmGin/p6OmBy8vMgsDAwYLS0tOBo6Oqf3Z3hn56eot+fn+RfoGDl37Y2d+Atra4gsjIyoLOz9KB2eD+fo+Wt36UnMB+maLJfsjN43+QkZSC0dLVgpGSloKXm6qAnK/wfpaq8H6bsf1+UV2Gf1Vijn9YZ5Z/XGyef2Bxpn9jda5/Znm1f2d8u39ofr9/aH/Df2d/xX9ngMh/ZoDKf2J8yH9aZ5aAp7LsgKu28ICtuPGAsLrxgLC68ICuuO2Aq7TogKav4oChqduAnKPVgJadzoCRmMiAjZPCgIqQvoCIjbuAhou3gIWKtYCGirWAh4u1gIiLtICIjLSAiIy0gImMtICJjbWAio62gIuPt4CMkLmAjZG6gI6SvICPlL6AkJXAgJGXw4CSmMWAk5nIgJSayoCUm82AlJzQgJWd0oCVntWAlZ7WgJWf2ICVn9uAl6LegJik4YCapeOAm6blgJqm5ICZpOOAmaTjgJmk4YCXot+Ak53ZgI2X0YCHkMmAcHisgEdalH9FV41/R1iKf0dXhn9KWYV/SVeAf5Gp+H6No+1+iZzhfoWX2H6Bks5+f43FfnuJvH55hbR+d4KtfnV9pn5ze6F+dHyffnZ8nH51e5h+dHiTfnJ1jn5wcop+bnCFfm1ugX7X2Px91Nj3fdLV8X3P0et9zcrkfcvH3n3JxNh9ycTXfcnE133IxNZ9yMTWfcfD1H3IxNV9yMTWfcjD1H3IwdJ9xcDSfcTA0H3Ev859w73OfcC8zH3AvMl9wbvKfcC4yX2+uMZ9wbvHfcW9yX3Lv8t9zr/LfdPBy33Yw8192sPKfdnAxH3cwMJ948LFfevFyH3yyMl9+czJfYFnZX6Hamd+i21ofo9uaH6Sbmd+lm9nfpxyaX6idGp+qXVpfqpyZH6dZVl+w5CJf6R/eoCrhX+AsYqDgLePh4C9lIyAw5mQgMidk4DMoJaAzqOYgM+kmoDPpJqAzqSagMuimYDIoJiAxZ2WgMCalIC7l5GAt5OPgLKQjYCtjYqAqYqIgKaIh4Ckh4aAooaGgKKGh4ChhoeAoIaHgKGHiICiiIqAo4qLgKSMjYCmjY6AqI+QgKmRkoCrkpOArJSVgK6VlYCvlZaAsJaWgLGWloCxlZWAspWVgLSVlIC1lZSAt5WTgLmVk4C7lpOAvpeTgMCYk4DCl5OAroR/gItXSn+OWUx/nGZZf6NtYX+jbWF/pG5hf6JuYn+fbGB/mmlef5RmXH+OYll/hl5Wf/2ypH7uqZ1+4aKYftWck37Jlo9+mo+OgLCtrYLU0tKCg4GBgrCgoX+rj5F+qZCTfqeQlH707u+ArKurgtLR0YKtra2Cp6amgdXL0X745/R97d7sfd/T432CgIR/5eXmgcvLzILBwcGC1dXWgaior392d4V+eXmKfn1+kH6Bg5Z+09PZgLW1t4LIyMqC0NHVgW9ygX+OlLV+k5q9fpehx37DyN1/j5CTgtHS1YKSk5aCmZyrgJms6X6Spul+l6z0fk9agX9SX4h/VWOPf1hnl39cbJ5/X3Clf2F0rH9jdrF/Y3e0f2N4t39ieLl/Ynm8f2F4vX9ddbt/V2KOgKGr44CkruWAp7HmgKex5oCnsOWAp6/jgKSt34ChqdqAnaTUgJifzoCTmcmAj5XDgIyRv4CKj7uAh424gIaKtoCGirSAhoqzgIeKs4CIi7OAiIyzgImMs4CJjbSAio61gIuPtoCMkLeAjZG5gI6TuoCPlLyAkJW+gJKXwYCTmMOAlJnFgJSax4CVm8qAlp3MgJadz4CWntCAlp7SgJaf1ICVn9WAlZ/XgJWf2YCWoNqAl6HcgJei3YCWod2AlJ/agJKc14CRm9aAkJrUgI6X0ICKksqAg4vCgGx0pYBDVYt/QVKFf0NTgn+Jpv9+SFaAf46o936Mo+5+iJ3jfoWY2H6Dk9F+gI/Ifn2LwX57h7l+eISxfnaAqn50faV+cnqffnJ5m35yeZh+cnaTfnBzjn5ucYl+bG+FfmtsgX7T1fx90NH1fc3Q733Lzul9yMrjfcbF3X3EwNh9w7/VfcbC1X3EwNN9w77RfcK+0H3CvtB9wr7QfcK+0H3Cvc59wbrMfcC6zH2+usx9vrrJfb65yH27tsd9vLbHfbu2xX27tsR9ubPCfbm0wX29tsJ9wrXEfca3w33LusR9z7zGfdO9xX3VvMF92b7Bfd++w33mwcR97MbGffTKyH3+zcl9g2hmfodqZn6KbGZ+jWtlfpBsZX6UbmV+mnBmfqBwZn6fbGF+kl9UfruMhn+ffHiApoJ9gKuGgYCxi4WAto+IgLuTjIC/l4+Aw5qSgMadlYDGnpWAxp2VgMSdlYDDnJWAwJqUgL2Yk4C5lpGAtpOPgLKRjYCtjYuAqYuJgKeJiICliIeAo4eHgKKHiIChh4iAoYiIgKGIiYCiiYuAo4uMgKWNj4Cnj5GAqZKTgKuUlYCtlpeAr5iZgLGam4CzmpyAtJucgLScnIC1nJyAtZucgLabm4C3mpqAt5mZgLiZl4C5mJaAupeVgLuXlIC8lpOAvZWSgKiBfYD8n4l+gVJGf49fVH+XZ1x/l2dcf5dnXX+WZ1x/k2Vbf49jWn+LYFh/hV1Vf/6zpX7vqp5+4qOZftedlH7Ml5B+wpOOfpKHhoCtq6uC1NLRgoaEhIK3qal/qI+QfqaQkn6kkZN+6+fogKqpqoLS0dGCr66ugqqpqoHc09p+9ub3feve7X3e1OJ9+PT8fuLh4oHLy8uCwcHCgtfX2YGurbR/dnaFfnl5iH59fY5+gYKUfs7O04C0tLWCycnKgtPU14FydYN/jZSzfpKZu36Wn8N+v8PXf46PkYLR0tWCk5OXgpqeq4CWqOJ+jqLhfpOn636ar/l+UFuDf1JfiX9VY49/WGaWf1tqnH9cbaJ/XW+mf11wqX9dcat/XHGtf1xysH9bcLB/V22uf1Ndh4CbpNmAn6jdgKCp3ICgqNuAoKnagKCo2YCeptaAnKPSgJifzYCUmsiAkJbEgI2Sv4CLkLyAiY64gIeLtoCGirOAhoqygIaKsoCHi7KAiIyygImMsoCJjLKAio2zgIuPtICMkLaAjZG3gI+TuYCRlbuAkZa9gJKXv4CUmcKAlZvEgJacxoCXnciAl57KgJifzICYn86AmJ/QgJef0YCWn9KAlZ7SgJWe04CUntSAlJ3UgJSe1oCUnteAk53WgJGb04COl8+Ai5TMgIqTyoCJkceAho7DgIGIvIBqcqCAQFGDf32d+n6Cnvd+g57xfoql9H6Joex+h53kfoSY2n6Bk9F+fo7Jfn2Lw357ibx+eYSzfnaBrX51fqh+cnyhfnN7nn6Diap+o6jGfsLG4n7f4vx+foCLf46Qmn+en6l/rq+4f76+x3/NztV/3N3jf+np8H/29ft/gYCDgIaGiICLio2Ajo6QgJGQkoCTkpSAlJOWgJSTloCTkpWAkZGTgI6OkICLio2Ah4aIgIKBg4D49/p/6untf9zb33/OzNF/vbzAf62rr3+bmp1/jIqNf/jx+X7a09l+vra8fqGYnX6Adnp+2sTJfdW7wH3Zu8F937/BfefDxH3vx8Z99sjGff7Nyn2DaGR+hmlkfohpY36KaWJ+jWlifpNrY36Xa2J+lmddfohaUH62iYR/mnp3gKB/e4Clg36Aq4eCgK+LhYCzjoiAt5KMgLuWj4C9mJGAvpiRgL2YkYC8mJKAu5eRgLiVkIC1k46As5GOgLCQjYCtjoyAqoyKgKeKiYCliYiAo4iIgKGIiIChiImAoYiJgKGJioCiioyAo4yNgKWOkICnkJKAqpOVgKyWmICvmZqAsZudgLOen4C1oKGAt6GjgLmjpIC5o6SAuqKjgLqiooC6oaGAuqCggLqenoC6nZyAupuagLqZmIC5l5aAuZaUgLiUkYCif3yA5ZJ/fu2YhH6EWVB/jGFYf4xhWH+MYVh/i2FYf4lgWH+GXlZ/gltUf/uypX7vq59+4qOYftedlH7NmJF+xJOOfryQjH6Jf36Aq6iogtTR0YKIhoaCvbCxf6aOkX6jj5F+oo+SfuPf4ICpqKiC0tHRgrCvsIKtrK2B49vifvTl9n3p3ex929Lhfevn8H7e3t+BysrLgsLCw4La2tuBtLO6f3V2g354eId+fHyNfoCBk37Jyc6As7O0gsnJyoLV1tmBdXeGf42TsX6RmLl+lZ3Afrq+0n+NjpCC0dLVgpOUl4Kbn6yAk6Lcfouc2X6PouN+lanvfpyx/H5PW4N/UV6If1RhjX9VZJN/V2aYf1hom39YaZ5/V2qgf1dqoX9WaqN/VWijf1FloX+fsf9/lp/RgJmi04CaotOAmaHRgJqh0YCZoM+AmJ/NgJedyoCUmcaAkZbCgI6Tv4CLkbyAio65gIiMtYCHi7OAhomxgIWJsYCGirCAiIuxgImMsoCKjbKAio6ygIyPs4CNkLWAjpK2gJCTuICRlbqAk5e8gJWZv4CWmsGAl5zDgJmexoCZn8iAmqDKgJqhy4Cboc2Am6LOgJqiz4CZodCAmKDQgJaf0ICVndCAlJ3QgJOc0ICTnNGAkpvRgJGaz4CPl82Ai5TJgIiQxYCGjsKAhYy/gIOKvIB/hraAaXCcgHqY9n52lOt+epXofnyV436EnOZ+hJrgfoOX2X6Ak9F+fo7JfnqKwX56iLx+eYW2fneBsH50f6l+c3ykfnV9oX6ana5/2NrigLi4vIHc3eCB5+fqgfDw84H4+fyBgICBgoOEhYKHh4iCioqLgoyMjYKPj4+CkZGRgpOSk4KUlJWClpaWgpeXl4KXl5iCmJiYgpiYmYKYmJmCmJiZgpiXmIKXl5eClpaWgpWUlYKTk5OCkZGRgo+Pj4KNjI2CioqKgoeHh4KEg4SCgICAgvn5+YHx8PGB6Ofogd7d3oHGxcWBgoGBgdbQ0n/44Od91LnAfdu9v33iv8J96sTEfe/FxH33ycV9/cvGfYFmYn6DZWF+hGVffoZlX36KZ19+jmdefoxhWH78qpl9r4aCf5Z3dYCbfHmAoH98gKWEgICph4OArYuGgLGOiYC0kYuAtZONgLaUjoC2lI6AtZOOgLOSjYCxkIyAro6LgK2Oi4CsjYuAqYyLgKeKiYCkiYmAo4iJgKGIiICgiImAoYmKgKGJi4Cii4yAo4yOgKWPkYCnkZOAqpWWgK2YmoCwm52As5+hgLaipIC5paeAvKipgL2pq4C/qquAu6ipgOve34D36+yAvaipgL6mpoC+pKSAvKKhgLufnoC6nJuAuJmYgLeWlYC1k5KAnn57gNGHdn7XjHp+86iYfoFcVH+BW1R/gVtUf4FbVH+AW1R/+rOmfvSvo37rqp9+4KOZftWclH7NmJJ+xZSOfr2QjH62jYp+gnh4gKimpoLU0tKCioiJgsW5un+kjJB+oo2SfqCOk37b19iAp6amgtLR0YKxsbGCsK+wge3l637y5PV96NzsfdrR4X3h3eZ+2trbgcnJyoLDw8OC3dzegbq5v391dYN+eHiHfnt7jH5/gJJ+xMTJgLKys4LJycuC19jbgXh5iH+NkbB+kJe2fpScvn62usx/jIyPgtHS1YKUlZiCnaCsgJGe1X6Il9F+i5zafpGj5X6WqvF+mrD7fk9agn9QXIZ/UV6Kf1Jgjn9SYpF/UmKTf1JjlH9RYpV/UWKXf09hln9LXpR/mKnxf5GZyICTm8qAlJvJgJSayICTmsiAlJrHgJOZxoCSmMOAkJXAgI6TvYCMkLqAio63gImMtICHi7KAhoqwgIWJr4CGia+Ah4qvgIiLsICKjbGAi46xgIyPsoCNkLSAjpK1gJCUt4CSlrmAlJi8gJaavoCYncGAmp/EgJyhxoCeo8mAn6TMgJ+lzoCfps6An6bPgJ+m0ICdpdCAnKPQgJqi0ICYoM+Alp7OgJSczYCTm82AkprMgJGZy4CPl8qAjZXHgIqSxICGjr+Ag4q8gIGIuYCAhrWAfYOxgGhtl4Bzj+V+cIvbfnOM2H51jNR+fZPYfn6S035+kc9+fI7IfnqKwn54hrt+d4W2fnaCsX51f6t+c32lfnJ7oX53fqF+g4WNgNHS1YGwsLKCzMzOgs7Oz4LOzs+Cz8/Qgs/P0ILPz9GCz8/Qgs/P0ILQ0NGC0NDRgtDQ0YLQ0NGC0NDRgtDQ0YLQ0NGC0NDQgtDQ0ILQ0NCC0NDQgtDQ0ILQ0NCC0NDQgtDQ0ILQ0NCC0NDQgtDQ0ILQ0NCC0M/Qgs/Pz4LPz8+Cz87Pgs/Oz4LOzc6Czs3Ogs3NzYLMzMyCvLy8gv38/IHFw8SAkoaJftK4v33Xu7993r7AfeXBwn3pwsJ978XCffXHwn35x8F9+8a+ff3Eu32AYlx+g2JcfoVhWn6CXFR+6qCTfamDgH+SdnSAlnl3gJt8eoCfgH2Ao4SBgKeHg4CqioaArIyIgK6OioCvj4qAro6KgK2OioCsjYmAqouIgKiKiICoiomAp4uJgKWKiYCkiYmAooiJgKGIiYCfiIiAoIiKgKCKjIChi42AooyOgKSPkYCnkpSAqpWYgK2Zm4CxnqCAtaKkgLmmqIC8qqyAv62vgMCvsIDAsLKAgHt8gcPCw4Hp6OqB8vHzgdTS04GIgoOBwKysgL6mpoC9o6OAu5+fgLicm4C1mJeAspOTgJt9e4C+fG5+w4BxfuCekH7wrqJ+76yhfu+toX7wraF+7ayhfumqn37kp51+3KKZftOclH7Klo9+xJSOfryQjH61jYp+sIuJfvTk43+lo6OC1NLSgoyLi4LNwsN/oYyPfqCLkX6ejZJ+09DRgKWkpYLS0dGCsrKygrOys4H27/Z+8OP0febb7H3b0+N919TdftfW14HJycqCw8PEgt/f4IG/v8V/dXSBfnd4h357fIx+f4CSfr+/xICxsbKCysrLgtra3YF6fIp/jJCtfpCWtH6Tmrt+sbbHf4uLjoLR0tSClJWYgp6hrYCOms5+hZLJfoeW0X6Lndt+kaPlfpWp7n6Xrfd+mrH+fk1Zgn9NWoV/TVuHf01ciH9NXIp/TFuKf0tbjH9JWot/RleJf5Kh5H+Nk8CAjpTBgI6VwYCOlMCAjpTAgI+VwICPlb+AjpO9gI2Su4CLj7iAiY21gIiMs4CHi7GAhoqwgIaJr4CGia6AhomugIiLroCJjK+Aio2wgIuPsYCNkLOAj5K0gJGUtoCTl7mAlpq8gJmcv4Cbn8KAnaLFgKClyYCiqMuApKnOgKWr0ICkqc2AzdHtgK6z1YCjqtKAoqnSgKCn0oCdpdCAmqLPgJigzYCWncyAk5vKgJKZyICQl8eAjpXFgIyTwoCJkL+AhYy7gIKIt4B/hbOAfYOwgHuArIBma5KAbIXVfmqCzX5sgsl+boPGfniMzH55jMh+eovGfnmIwH53hrp+d4S2fnaCsX51gKx+c32nfnF6oX5weZ1+dHqefuzv/3+7vMCBnZ2fgrW1t4K1tbaCs7O1grKys4KxsbKCsLCxgq+vsIKurq+Cra2ugq2trYKsrK2CrKusgqurrIKrq6uCqqqrgqqqq4KqqqqCqqqqgqqqqoKqqqqCqqqqgqqqq4KqqquCq6urgqurrIKsrKyCrKysgq2trYKtra6Crq6ugq+vr4KwsLCCsbGxgrKysoKzs7OCtbS1gqinqILi4eKBsK6vgIh9gn7QuL5907nAfdm8wH3gvcF947/AfejAv33swb5978C8ffG/un3yvrd99L20ffi9sn36uq599K+ifdmXjH2kgH9/jnNzgJJ3dYCWenmAmn18gJ6Bf4ChhIGApIaEgKaIhYCoioeAqIqHgKiKh4CmiYeApYmGgKSIhoCjh4aApIiIgKOJiICiiYiAoYiIgKCIiYCfiImAn4iJgJ+Ji4Cgi42Aoo2PgKOPkYCmkpSAqZWYgK2anICxn6GAtaOlgLqoqoC+rK+Ava2vgNHExoCUkJGB0M/RgfLx84H6+vuB+vn7gYGBgoKFhYaCg4ODgt/d3oGVkJGByre3gLigoYC5np+AtZmZgLGVlICYfXyArXJmfrB2an7OlIp+3qWcft6jmn7do5l+3qOaft2jmn7aopl+1p+YftCblX7HlY9+wJGMfruPi361jIp+r4qIfqqJh37m1tV/o6GhgtTS0oKPjY2C1svMf52JjX6dio9+m4uQfszJyoCjoqOC0tHRgrSztIK2tbaBf3yAf+7j833k2ux92tLkfc7L1X7T09SByMjJgsTExYLh4eOBxcXKf3R0gH52eIV+enyLfn5/kH66ur+AsLCxgsrKy4Lc3N+BfX6Lf4qOqn6OlLF+kpe4fq2xwn+JioyC0dLUgpWVmIKgoq6Ai5fHfoCOwX6Ckcd+hpbQfouc2X6OoeJ+kaXqfpOo8H6TqvR+k6v5fpKs/H6Rq/5+SFaAf0dVgH9GVYB/RVOAf4Oh/X6Mmdh/iI64gImPuYCJj7mAio+5gIqPuYCMkbmAjJG5gIuQuICLjraAiY2zgIiMsYCHi7CAhoqugIWJrYCGia2AhomsgIaJrICIi62AioyugIuOsICNkLGAj5KzgJGVtoCUl7iAl5q7gJqev4CeosOAoabHgKSqy4Corc6Aqq/RgKux0IB8fYmBzs7VgX59gILx8PaBnZ6ogbS624Ckq9OAoqnTgJ+m0ICco82AmJ/LgJWcyICSmcaAj5bDgI2UwYCLkb6AiI67gISKt4CBh7OAfoOvgHuAq4B5fqeAZWmOgGZ9xn5ker5+Znq7fmh7uH5zhsF+dYe/fnaGvX51hLh+dIGzfnSAr35zfqt+cn2nfnF6on5weJ1+b3aZfnB1l36Ag5J/rK20gIyMkIGhoaSBoKCjgZ+fooGenqCBnZ2fgZubnoGbm5yBmpmbgZmZmoGYmJmBmJeZgZeXmIGXlpiBlpaXgZaWl4GWlpeBlpaXgZaVl4GWlZeBlpWXgZaVl4GWlZeBlpaXgZaWl4GWlpeBl5eXgZeXmIGYl5iBmJiZgZmZmoGamZqBm5qbgZubnIGcnJ2Bnp2egZ+en4GUk5SBy8nKgK2oq3/fzNR9y7S8fc+2vn3Vub192bm+fd27vX3gvLx947y6feW7uH3nurZ957exfei2r33rtax967GnfeWmnH3KjoZ9nn18f4pxcYCOdHSAknh3gJZ7eoCafn2AnIF/gJ+DgYChhYOAooaEgKKGhYCihoWAoYaEgKCFhICghYSAn4WFgKCHhoCgiIiAn4iIgKCIiYCfiImAn4iKgJ+Ji4CfioyAoIyOgKKOkICkkZSAp5WXgKuZnICwn6GAtaSngLWmqIDJvb+AhoKDgbe1toHj4uSB9vb3gYGBgoKIiImCkZGSgpOTlIKZmZqCm5ubgpSUlIKNjI2ChoaGgvLx8oG4tbaB++7vgLqmpoCtlJWAl35+gJ1pYH6gbGJ+v42Efs6dln7OnJR+zZuTfs+blH7PnJV+zpuWfsqZlH7FlZB+vZCMfreNiX6zi4l+romIfqmIh36lhoZ+18nKf6Cfn4LT0tKCkZCQgt7U1X+aiYx+moqOfpmKkH7FwsOAoaChgtHR0YK1tLWCubi5gYOAhH/t4/N94tnrfdjR5H3Ewct+0M/RgcjIyILFxcWC5OTlgcvK0H/n5/59dneEfnp6iX59fo9+tbW5gK6vsILLy8yC3t7hgX+BjX+Jjad+jJKufpCWtH6prL1/iImLgtHS1IKVlpmCoaOugIeTwX59i7p+fo2/foKRx36Fls9+iJrXfoud3X6MoON+jKHmfouh6n6Joet+h6Drfoaf7H6Enut+g53tfoGb7H56leh+hZHLf4SJsYCEibGAhYqygIaKsoCHjLOAiY20gImOtICJjbOAiIyygIiLsICHiq6AhomtgIWIq4CFiKuAhomrgIaJqoCHiauAiIusgIqNroCMj6+Aj5KygJGUtICUl7eAl5u6gJufv4Cgo8OApKjIgKitzICqr82AxMjigJaWoIHf3uSBhIOGgoaGiIKDgoWCi4uNgo2Nj4KAf4KCra63gc7T8YChqM6An6XOgJuhyoCWnceAk5rEgJCWwYCNk72AipC7gIiNt4CEirSAgYavgH6Cq4B6f6eAeHyjgGNnioBfdLd+XnKxfmFzr35jda1+b4C2fnGBtX5ygbR+cX+wfnF9q35xfKh+cHulfnB5on5veJ5+bnaZfm51ln5tcpN+cXeUfoGGoX6Sla5+lpqxfpWYrn6Wlqt+lZWnfpOTpX6Sk6J+kpGgfpGPnX6Qjpt+j42Zfo+MmH6PjZh+j42Xfo+Nln6NjZZ+jYyWfo2LlX6NjJZ+jYuUfo2LlH6Ni5R+jYuUfouJkn6LiJF+ioiPfoqHj36Kho9+ioaPfoiGj36Iho1+iISMfoeDjH6Gg4p+hYKJfoeCiH6Ig4l+hn+FfvPk733Rwct9w7C6fceyun3LtLt90LW7fdK2u33Vtrl92be5fdy3t33ctrN93bSxfduwrH3dr6p93q6nfdyooH3VnZR9uoV+fZh6en+Hb3CAi3NzgI52doCSeXmAlnx8gJh/foCagYCAnIKBgJ2DgoCdhIOAnYOCgJyDgoCcg4OAnIODgJ2EhICdhYaAnoeIgJ2HiICeiImAnoiKgJ6Ji4CeioyAn4uOgKGNkICjkJOAppSWgKqYm4CvnqGAtKSngLmpq4D89feAzs3PgeXk5oHz8vSBgoKDgo2MjYKZmZmCoqKjgqqpqoKqqquCs7Ozgra2t4KwsLCCpqangpqam4KNjY6ChISEgvv7/IHa2duB8OTlgJV+foCPYlp+kWRcfrGGgH7Cl5J+wJWPfsGUj37ClZB+w5aSfsOWkn7AlJF+upCNfrSLiH6viIZ+q4eGfqeGhn6khYZ+oIWFfsq+vn+dnJyC09LSgpOSkoLm3d9/l4iNfpiJjn6Xio9+vru8gJ+fn4LR0dGCtrW2gry7vIGIhYl/7eT1feDZ633X0eN9urfBfszMzYHHx8iCxcXGgufn6IHR0NZ/6eX9fXd2g355eoh+fX2NfrCwtYCtrq+CysvMguHh44GCg49/iIulfouQqn6QlLF+pai4f4eIioLR0dSClpeZgqKlr4CGkLt+eoe1fnuJuH5+jb9+gZHGfoSUzH6FltF+hpjWfoaZ2X6Fmdt+gpfafn+V2n5+ldt+e5LZfnuS2n53kNl+corVfn+KwH9/hKqAgIWrgIKFq4CDh6yAhYmugIaKr4CHiq+Ah4uvgIaKrYCHia2AhoirgIWIqoCFiKmAhoiqgIaIqYCGiamAh4qqgIqMrICMjq6AjpCwgJCTsoCTlrWAl5q5gJyfvYChpMOApqrIgLa604CMjZaBxsbMgfj3/IGEhIaChoaIgoiHiYKKiYuChoaIgpCPkYKRkZOCkZGTgpCPkoKIiIqC2dnfgZKTnoG2u9qAmJ7FgJWawoCRl7+AjZO7gIqPt4CHjLSAhIiwgIGFrIB9gaiAeX2jgHd6n4BiZoeAWmypfllqo35dbaR+X2+jfmt7rn5ufK1+bnysfm57qX5ueqZ+bXiifm54oH5vd51+bnaafm51ln5tc5N+bHKPfm1yjX5zd5F+eXyUfnl8kn55eo9+eHmMfnd3iX52dYZ+dXSDfnRzgX7m4/594+D5fePf9n3j3/Z949/zfePf8X3g3/F9397xfd/b8X3f2u9939vwfd/a7X3f2u1939rtfd7a7H3b1uh92tbnfdrV5H3Y0uN92tPjfdjR433W0eN91tHhfdbP333Uzd590s3afdLJ2X3Sydh91svYfdbK133Pwc19wrS+fb+uuX3DsLd9xrC3fcmxuX3Ns7d9z7O2fdOztn3VtLV91bKxfdSurH3RqqZ90aikfdKmoX3PoJl9xpWOfa1+eH2UeHl/hG9vgIhycoCMdXWAj3h5gJJ7e4CUfH2Aln5+gJh/gICZgYGAmYGBgJmBgYCYgIGAmIGBgJmCg4Cag4SAm4SGgJyGh4CchoiAnIeJgJ2IioCdiYuAnouNgJ+Mj4Chj5KApJKVgKiXmYCtnJ+AsqOmgLiqrIC5rK+AwsHCgePj5IH5+fqBi4uLgpiYmIKkpKSCr6+wgri4uYK/v7+Cvb29gsbGxoLLy8uCx8fHgr6+voKysrOCp6angpeXmIKHh4eC6urrgby6u4GRfn+AgltVfoRdVn6mgH1+t5GOfrWQjX62j4x+uZGOfrqSj365kpB+t4+OfrGMin6siIZ+qIWEfqWEhH6ihIR+n4OEfpyChH6+srN/m5magtPS0oKWlJWC8Ojrf5aGjX6ViI9+loqQfre0toCdnZ2C0dHRgre3t4K+vr+BjYuPf+vj9H3f2Ot91dDjfbKwuX7IyMmBxsbHgsbGx4Lp6euB2Njdf+nm/313doR+enqHfn19jH6rq7CArKytgsvLzILj4+aBhYaSf4aKoX6Kj6d+jpOufqGjsn+GhoiC0dHTgpeXmYKkprCAg422fniEr355hbF+e4i3fn6LvX5/jcJ+gI/GfoGRyn6Bks1+gJLOfn2Qzn55jcx+d4vMfnOIyH5yh8l+b4TGfmuAxH58hbd/fICkgH6BpYB/g6eAgYSogIOGqoCEh6qAhYirgIaIq4CFiKqAhIepgIWHqICFh6iAhYengIWIqICGiKiAh4mpgImLqoCLjayAjY+ugJCSsICTlbOAlpm3gJueu4CgpMGAp6vIgKuwy4C3t76B9/b7gYGAg4KFhIaCh4aIgoqJi4KNjI6Cjo6QgouKjIKVlJaClpaYgpWVl4KTk5WCkJCSgo2Nj4KJiIuC4+LmgaitzICXnMKAkpe9gI6TuYCKj7WAh4uxgIOHrYCAhKmAfICkgHl8oIB2eZyAYmWEgFVlnX5TZJd+WGeZfltqmX5pd6Z+anilfmt4pH5seKN+bHegfmx2nX5tdpx+bnWZfm10l35tdJR+bXKRfmtxjn5scYx+c3eQfnt9ln59f5Z+fH6Tfnt7j356eox+eHiIfnd2hX52dYN+dXOAfunl/X3p5fx96eX8fenl+n3o5fd95eX3feXk933l4Pd95eD2feXj933l4PV95eDzfeXg833k4PN95N/xfeHc7n3g2+x94NnpfeDa6X3f1+l93NfofdzY5n3c1uV92tPlfdjT4X3Y0OF92NDffdrR3X3az9t90MPPfcO1wH29rbh9wK63fcGtt33Fr7d9xq+1fcqwtH3MsLN9zrCyfc6tr33KqKh9xqOifcWhn33Fnpp9wZiSfbmNiH2ieHV9kHd4f4Nub4CHcXOAinR2gI13eICPeXqAkXt8gJJ8fICUfX6AlX5/gJV+f4CVfn+AlX+AgJV/gYCXgYKAmIKEgJmEhoCahYeAmoaIgJuHiYCciIuAnImMgJ2LjoCgjpGAopGUgKWVmICqmp2Ar6CjgLanqoC8r7KA5NzegPHw8oGFhYWCjIyMgp2dnYKrq6uCt7a3gsDAwYLKysqCz8/PgsvKy4LV1dWC3NzcgtjY2ILS0tKCycnJgry8vIKqqqqCkZGSgoKCg4Lr6uuBt6qsgPCroX30r6V9nXx5fq6OjX6sjIp+royKfrGOjX6zj49+sY+Ofq+Mi36qiYh+poWFfqKDg36fgoN+nYKDfpqBg36YgIN+sqepf5iXl4LT0tKCmJeXgvv09n+Vh41+lYiPfpSJkX6xrrCAm5ubgtHR0YK4uLiCwcHCgZORlX/r5PZ93trrfdXR5H2rqbN+xcXGgcbGxoLHx8eC7Oztgd/e5H/o5P19d3aDfnp6h358fIt+p6ergKurrILLy82C5ebogYmKlH+FiZ5+iYykfo6Rq36dn61/hYWHgtHR04KXmJqCpqixgIGKsX52gKh+doGqfniDsH56hrV+e4e4fnuJu358i79+fIvCfnuLwn54icJ+dIa/fnKEvn5tf7l+a324fmd7tn5jd7N+eICuf3p9n4B7fqGAfYCjgICDpICBhKaAg4WngIOGp4CEhqeAhIengISGpoCEhqaAhIalgIWGpYCFh6aAhoingIiJqICJi6mAjI6rgI6QrYCRlLGAlZi1gJqcuYCfor6ApqrFgK+zzoDKzeOA+fj9gfz7/4GCgYSCiIeJgouLjYKPjpCCkpKTgpSTlYKPj5GCmZmbgpybnYKampyCmJiagpaWmIKQj5GCg4OFgv38/4GDhI6BmZ/CgJOYvICOk7eAio+zgIeLroCDh6qAgIOmgHx/oYB4e52AdXiZgGJkgoBRYJJ+UF6NflRhj35YZJB+ZnOdfmd0nn5odJ1+anScfmpzmn5qc5l+a3OXfmxzlX5sc5N+bHKRfmxyj35qcIx+bHCKfnR3j358f5Z+gIKXfn+AlH59fZB+fHyNfnt7in56eoh+eXmFfnh2gn54dYF+d3aBfnd3gX53dYF+7+v/fe/r/33r6v596+b9fevm+n3r5/x96+b5fevm+X3r5vl96+b5fevm+X3q5PV95+Lzfefi8X3n4PB9497wfeLd7H3j3ex949vsfeDa7H3f2up939fofd/W5n3f1+R93NTgfdDG0n3BtcJ9u624fb6uuH2+rLZ9wa20fcKts33ErLJ9x62xfcisr33GqKp9waKjfbydnX26mpl9uZaVfbSPi32shYF9mHRyfY52eX+BbnCAhXFzgIh0dYCKdneAjXh6gI96e4CPenuAkXt9gJJ8foCSfX6Akn1+gJN+gICUf4GAlYCDgJaChICXg4aAmIWHgJmGiICah4qAm4mLgJyKjYCdjI+AoI+SgKOTloCnl5uArJ2ggLKkp4C5rK+AvLCzgK2rrIGDg4SCmJiYgqSkpIKnp6iCubm5gsTExYLOzc6C1dXVgtvb24LV1daC4uLjgurq6oLo6OiC4uLigtfX14LHx8eCsLCwgqSkpIKUk5SCgH+AgpWSk4HjqKF94qWefZR4d36ni4x+pYmJfqeJin6qjIx+rI2NfqyMjH6oiYp+pIaGfp+Cg36cgIF+moCBfph/gn6Xf4N+lYCDfqacnn+VlJSC09LSgpqZmYKDf4GAk4eOfpSJj36TiZF+qqiqgJmZmYLR0dGCubm5gsTDxYGYl5t/6+X3fd3d733W1el9paOtfsHBwoHFxcaCx8fIgu/v8IHm5ep/6eT6fXd1gX55eIV+fHuKfqKjpoCqqquCy8vNgujo6oGMjZh/hIicfoiLon6NkKl+mZuof4SEhoLR0dOCmJiagqipsoB/iKx+dH6kfnR9pX52f6l+doKtfneDsH53hLJ+eIW2fneFt351hLd+dIK2fnCAs35sfLF+Z3isfmV1q35hcqh+XW6lfnN7pX94e5uAen2dgHx/n4B+gaGAgIOjgIGEpICChaSAg4WkgIOFpICDhaSAhIakgISGpICEhqOAhoekgIeIpYCIiqeAioypgI2Pq4CQkq6Ak5axgJibtoCdoLuApKjCgK2yy4C3u9OAoKGogYeGiIKHhomCgoKEgouKjIKRkJKClZWWgpqZm4KdnZ+CmZmagqWkpoKlpaaCo6OkgqCfoYKZmJqCi4qMgoWEhoKEhIWCycnOgZqfvoCVmryAkJS2gIqOsICHiqyAg4aogICCpIB8f5+AeXubgHZ3l4DCxv9/TVuJfkxZhH5QXYZ+VF+IfmJuln5mcJd+ZnCXfmdxln5ocJV+aXGVfmpxk35qcZF+a3GQfmtxjn5rcIx+a2+KfqWpwX6ztcB/gYKHgIaGi4Dr7PV/zc3Wf7Ozu3+enqV/jIyTf319g3/h3+p+zszYfr68yH6xrrp+p6SvfqCdqH6ZmKJ+k5OdfpCNmH6Ni5V+jIqUfoyKk36Ni5R+j42WfpKQmX6WlJ1+m5ihfqCep36ppq9+tbK7fsPAyX7U0Nh+6ujwfoKBhn+TkpZ/p6apf7+9wX/b2d1/+/r9f4KBg4DHxcl/xL7Ffr+yvX28rbh9vKy2fb6stH2/q7J9wKqwfcKqsH3CqK19vqSnfbmdoH20mJp9sJOUfa+Qj32oh4V9ooB9fZBwcH2MdXh/gG5wgINwc4CGc3WAiHV3gIt3eYCMeXuAjXp7gI56fYCPe36Aj3x+gJB9foCRfYCAkn+BgJSBg4CVgoSAloOGgJeFiICZhomAmYiLgJuJjICci46Ano6RgKGRlICklZiAqJqdgK6go4C0qKuAvLCzgM/GyYDr6+yBkJCQgqenqIK3t7iCubm6gry8vYLLy8yC1tbWgtzc3YLg4OCC3Nzcguzr7IL19fWC8vHygunp6YLc3N2CyMfIgr6+voK2tbaCoaGigoqKioLc29yB7NfVftGcl32OdnZ+oImLfp+HiX6hh4l+pIqLfqaLjX6liox+o4eJfp6DhX6af4J+l36AfpZ+gX6UfoF+k3+CfpF/g36bk5V/kpGSgtLS0oKcm5yCiIWHgJGGjX6Rh45+kYiRfqOho4CXl5eC0dHRgrq6uoLHx8iBnp2hf+rl+H3f3vJ92djsfZ6dp36+vr+BxMTFgsjIyYLy8fOB7u3xf+nl+H13dYB+eXmFfn18in6enqKAqKmpgszMzYLq6+2BkJGbf4SHmn6IiqB+jY+mfpWXo3+Dg4WC0NHSgpmZm4Kpq7OAfoanfnN7nn5yfKF+dHykfnR+p350f6l+dICrfnWArX5zf61+cX6tfm99rH5real+Z3alfmJwoH5fbp5+W2qbflhnmH5wdp5/d3mXgHl8moB8fpyAfoCegICCoICBg6GAgYShgIKEoYCChKKAg4WigISFooCEhqKAhIaigIaHo4CHiaSAiYqmgIuMqICOkKuAkZOugJWXsoCanbiAoqW/gKqux4C0udGAwMTZgO3s8YGLi42Cjo2PgoyMjoKMi42CmZiagqKho4Knp6iCq6usgqioqYK3triCt7e4grGwsoKop6mCl5aYgo2MjoKMi4yCiIeJgoCAgYLJzOOAl5y8gJKVtoCMj6+Ah4qqgIOGpYB/gqGAfH+dgHl7moB2d5aAwcT5f5Ss/32SqfZ9nLH8fVFcgH5gao9+ZG2SfmRukX5lbpF+Z2+RfmhvkX5ob49+aW+OfmpwjX5rcIt+a2+KfmtviH6nqbV/nJ2fgY2NjoKnp6iCoqKjgpubnIKUlJWCjo6PgoeHiIKBgYKC+Pj5ge7u74Hl5eaB3t3fgdfX2IHR0dKBzMzNgcjIyYHFxcaBw8PEgcLCw4HCwsOBw8PEgcTExoHHx8iBy8rMgc/P0IHV1NWB29vcgeLi44Hr6uuB9PT1gf7+/4GFhYWCi4uLgpKRkoKYmJmCn5+fgqWlpoKYmJiCwcHBgYKBgoDHvsl9t6u2fbustn28q7R9u6mxfb2psX2+qK59vKWqfbegpH2ymp19rZSXfaiOkH2liot9oIOCfZp7en2Ha2x9iXV4f/3b4X+BcHKAhHJ1gIZ0d4CJdnmAinh6gIt5e4CMenyAjXt+gI57foCOfH6AkH6AgJF/goCTgYSAlIKFgJWDhoCXhYiAmIeKgJmIjICaio2AnIyQgJ6Pk4ChkpaApZaagKqcoICwo6eAt6uvgLuxtIChn6CBhIOEgpycnIKzs7OCxMPEgs3NzoLHx8iCzMzMgtnY2YLg4OCC5OTkguHh4YLx8fGC+fn5gvPz84Lq6uqC2NjYgtHR0YLOzs+CwMDAgq2troKWlpeCf3+AgtLP0IDFl5R9inR2fpqHiX6ZhId+m4WIfp+Iin6giYt+n4eLfp2FiH6agoV+ln+BfpR9gH6SfYF+kX2BfpB+gn6QfoN+koqNf4+Oj4LS0tKCn56ego6LjYCQhox+kIeOfpCIkX6dm52AlZWVgtHR0oK7u7yCysrLgaSjqH/r5vp95eD0fdva7n2YlqF+urq7gcTDxILIyMmC9fT2gfX0+X/r5/x9eHaBfnp6hH59fYl+mpqdgKeoqILMzc2C7e3vgZWVnn+Eh5p+iIqffoyOpH6Sk59/goKDgtDQ0oKZmpuCq620gH2CoX5yd5l+cXibfnJ6nn5ye6B+cnujfnJ8pX5yfKZ+cHumfm15pH5rd6J+ZnOefmJvmn5dapV+WmeTfldkj35TYIx+cHWaf3d4lYB5epeAe32agH1/nIB/gJ2AgIKfgIGDn4CCg5+AgoOggIOEoICEhaGAhIWhgIWGoYCGh6KAiImkgImLpYCMjaiAj5GrgJOVroCXmrSAnqG6gKapwoCws8uAu7/WgJKTmoGJiYuCjo6QgpOTlYKZmJqCm5qcgp+foIKwsLGCurq7gsHAwoK/vsCCz8/QgsvLzILBwMKCra2ugp6en4KZmJmCkZGSgoyMjYKIh4mCr6+1gZicuYCTl7WAjZCvgIiLqYCDhaSAf4KfgHx+nIB5e5iAdneUgMDD9X+Oo+59i6DmfZWo632esPN9XmeIfmFqjH5ja4x+ZGyMfmVsjH5mbYx+Z22Lfmhuin5pbol+am6JfmtviH5rb4d+nqCrf6Cgo4Gbm52CxMXGgsrKy4LNzc6Czs7Pgs/P0ILPz9CC0NDRgs/P0ILPz9CCzs7Pgs3NzoLNzc6CzMzNgsvLzILLy8yCysrLgsrKy4LKysuCysrLgsrKy4LKysuCy8vMgsvLy4LMzMyCzc3Ngs3NzYLOzs6Cz8/Pgs/Pz4LPz8+Cz8/Pgs/Pz4LOzc6CzMzNgsrJyoLHxseCq6urgsrKyoH6+Pt/wbfDfbaqtn25rLZ9uaq0fbiosX25p699uaatfbejqX20nqR9rZebfaeRlH2hi419n4eIfZh/f32Rd3d9gGhpfYd0eH/72+F/gG9ygIJydYCFdHaAh3Z4gIl3eoCKeXyAi3l8gIt6fYCNe36Ajnx/gI99gYCRf4KAkoGEgJOChYCUhIeAloWJgJeHioCYiIyAmouOgJyNkYCekJOAopSYgKaYnICrnqKAsqaqgLmusoDOx8qA5eTmgY2NjYKmpqaCu7u8gsvLy4LW1taC29rbgtDQ0ILV1dWC39/ggufn54Li4eKC8vLygvn5+YLx8fGC4uLigtvb24Lf3t+C1dXVgsfHx4K2treCoKChgoeHh4LLysuB0L+/foRxdH6VhIh+lIKGfpaDhn6ahol+m4eKfpqGiX6ZhId+l4GFfpN+gn6RfYF+kH2Bfo99gn6OfoJ+jX2DfomBhH+Mi4yC0tLSgqCgoIKUkpSAjoaNfo+Hjn6PiJF+l5WXgJOTk4LR0dGCvLy9gs3NzoGrqq9/7en8febi9n3c3PB9kpGbfre2uIHDw8OCycnKgvf3+YF+foGAdnWAfnl3g357eoR+fX2JfpaVmYCmpqeCzM3Ngu/v8YGZmaJ/hIeZfoiKnX6LjaN+jpCbf4CBgoLQ0NKCmpqcgq2vtYB8gZ5+cXaVfm91ln5vd5h+b3eafnB4nH5weJ5+b3iffm13nn5qdZx+Z3KafmNulX5eapF+WWSLflZhiH5SXoV+TlqCfm9zln92d5OAeHqVgHp8l4B9fpqAfoCbgICBnYCBgp2AgYOegIKDnoCDhJ+AhIWfgIWGoICGh6CAh4iigIiJo4CKi6WAjY6ogJGSq4CUlq+Ampy1gKCju4CqrcSAtbnPgMPH2oDp6O2BjIyOgpKSlIKampyCpaSmgrCwsYK4t7mCw8PEgtvb3ILo6OmC4eHigvj3+ILu7u+C09PUgr28vYKysbOCpKSlgpmYmoKRkJKCiomLgvv6/YG4u9GAlJi0gI6RroCIi6iAg4WigICCnoB8fpqAeXuXgHZ3koC/wvF/iJvefYea2X2Qod59manlfVtkgn5fZ4Z+YWmHfmJph35kaoh+ZWuIfmZsiH5nbId+aW2Gfmlthn5qboZ+a26Ffqeqv36AgIWAhIWHgbm5u4HQ0NOB4+PlgfX294GDg4OCioqLgpGRkoKXl5iCnJydgqGhooKlpaWCqKiogqqqq4KsrK2Crq6vgq+vsIKwsLGCsbGxgrGxsYKwsLGCsLCwgq+ur4Ktra2Cq6urgqioqYKlpaaCoqKigp2dnoKYmJmCkpKTgouLjIKEhISC+Pj5gefn6IHU1NWBv7/AgZWVloGhoKGA1tLZfratuX21q7d9t6u3fbaps322qLF9taaufbWkrH2zoah9sJ2jfamWmn2ij5N9nYmNfZiEh32Re319inN1ffXL0HyGdHh/+dvif/7f5n+BcnWAhHR3gIZ2eYCHd3qAiXh8gIl5fICKen2AjHt+gI18gICOfoGAkH+DgJGBhYCSgoaAlISHgJWGiYCWh4uAmImNgJqLj4CcjpGAnpGUgKKVmYCnmp6ArKCkgLKoq4C1rK+ApaSlgfz8/YGWlpaCrq2ugsHAwYLQ0NCC29vbguHh4YLh4eGC1dXWgtvb24Lk5OSC39/fgvDw8IL19fWC5ubmgt/f34Lm5uaC4eHhgtjX2ILKysuCu7u7gqioqIKQkJCC9vX2gdnX2ICAcHR+kIKHfo+AhX6RgYZ+lYSIfpeFiX6XhYh+lYKHfpN/hX6PfYF+jnyAfo59gX6NfIJ+jX2Dfot8g37+8fd+iYmJgtLS0oKjoqOCm5mbgI2Gjn6PiJB+j4mRfpGPkoCRkJGC0NDRgr29voLR0NKBs7O4f/Dr/33n5fh9393xfY6Ml36zs7SBwsLCgsrKyoL6+vyBg4KFgHh1gX55eIJ+e3qEfn58iH6RkZSApaWmgs3NzoLy8vSBnZ2lf4SHl36IiZx+i42hfouNl39/gIGC0NDRgpubnIKvsbeAfICcfm90kX5tdJJ+bnSUfm10lH5tdZd+bXWYfmx0mH5rc5d+aHCVfmRtkn5gao1+W2WIflVfgn6luf99nrL5fZar8n1ucZB/dneRgHh5k4B7e5aAfH6YgH5/mYB/gJuAgIGbgIGCnICCg52Ag4OdgIOEnoCFhZ6AhoaggIeIoYCKiqOAi4ylgI6PqICSk6uAlpiwgJuetYCjpr2ArbDHgLi80ICam6GBh4eJgo+OkIKYl5mCpKOlgrW0toLKysuC3t7fgufm54Ly8vOChISEg4CAgIOOjo6DgoKCg+rq64Lg3+CCycnKgrOztIKioqOClpaXgo6Nj4KIh4iCrq60gZOWsYCOka2AiYumgISGoYCAgp2AfH6ZgHl6lYB2d5GAwMLvf4WV0X2ElM19jJvTfZWj2n2ywfl9XWSAfmBmgn5iaIN+Y2mEfmRphH5la4V+Z2uFfmhshH5pbYR+am6Ffmtug35sb4R+dHaKfoGDlX6bm61+v7/Pfu3u/H6Skpl/sbG3f9LS2H/09Pp/i4uOgJycn4CtrK+AvLy/gMrKzYDW1tmA4eHkgOrq7YDx8fOA9vX4gPj4+oD4+PuA9/b5gPPy9IDs7O6A5OPlgNnY24DNzM6Av7/BgLCvsYCgn6GAj46QgPr4/X/X1tp/tbS4f5aTmH/w7fV+vbvCfpaTm3706/t90srYfbqzwX2zq7h9tay4fbesuX21qrV9taixfbSmr32yo6x9saGofa6co32llJp9n42TfZiHjH2UgoZ9jHl8fYVydX3xztV8hHR5f/fb43/83+d/gXJ2gIN0eICFdnmAhnd7gIh4fICIeX2Ainp+gIt7f4CMfYGAjn6CgI9/g4CQgYWAkoOGgJOEiICUhomAloeLgJeKjYCajJCAnI+TgJ+SloCjlpqAp5ufgK2hpYC0qa2A2NHUgNvb3YGDg4SCnJycgrGxsoLDw8OC0dHRgtvb24Lj4+OC6Ofogubm54LY2NiC3Nzcgtra2oLs6+yC5+fngt/f34Lo6OiC5eXmguDg4YLZ2dmCzs7OgsHBwYKvr6+CmJiYgoCAgYLMy82BlpGTf4uAhX6Lf4R+jX+EfpGChn6Tg4h+k4KIfpGBhn6PfoR+jHuBfot6gH6Ke4B+inyBfop9g36KfoN+7uPofoaFhoLS0tKCpaSlgqGgooCNho9+j4mSfo+Kk36LioyAj46PgtDQ0YK+vr+C1NTVgbu6v395d4F+6ej8feLf9X2LiJR+sLCxgcHBwoLLy8uC/f3/gYeGiYB3d4F+enmDfnx6hn5+fYd+jY2QgKSkpYLOzs6C9fT2gaGhqX+FhpZ+iImbfouNoH6IiZN/fn6AgtDQ0YKbnJ2CsrO5gHyAm35vc49+bHKOfmxyj35scpB+bHKRfmtykn5qcZJ+aHCRfmVtjn5haop+XGWEflhhgH6ktfR9nrDufZep6H2PoeF9bXCNf3Z3kIB5epKAe3uUgHx9loB+f5iAf4CZgICBmYCBgpuAgoOcgIOEnICDhJyAhYWegIeHn4CIiaGAioujgIyNpICPkKeAkpSrgJeZsICdn7aApai9gLCzyIC+wdKA4+PngYaGiIKQj5GCnJyegq6ur4LIx8mC5eXmgoGBgoONjY2Djo6Og5GRkYOTk5ODmpqbg42NjYOLi4uDgH+Ag+Xl5oLJyMqCsLCxgp+en4KSkZOCiYmKgvn3+4G+wNOAj5KrgImLpoCFhqCAgYKcgH1+l4B5epOAdnaPgMHC7X+BkMZ9gI7CfYiVyH2Rnc99rrzufbfF+H29yf19YWaBfmJngX5jZ4F+ZWqDfmhshH5obIN+aW2Dfmptg35rboJ+bW+BfnV3iX6BgpR+h4eYfoeHln6GhpR+hYWSfoSEkH6Eg5B+hIKOfoSDj36Ego1+g4GNfoGBjX6CgYx+gYGLfoGBin6Bf4p+gX6KfoF+in6Bfoh+gH6Ifn5+iH5+fYd+fnyGfn58hX5/fIV+fnyEfn57g359eoN+fXuDfn16g357eYJ+e3mCfnt5gH57d4B+eniAfvXu/n317f197eX1fdfP3X29t8V9ta66fbWuun21rLp9taq2fbOosn2yprB9sKOsfa+hqX2qm6J9oZOafZyNk32Wh419kYGGfYh4e32BcXR97c7ZfIR1en/23OR/++Dof4BydoCCdHiAhHZ5gIV3e4CHeHyAiHp9gIl7f4CLfICAjH2CgI1/g4CPgISAkIKGgJKDh4CThYmAlIaLgJaIjICXio6Amo2RgJyPlICfkpeAopebgKecoICtoqeAs6mtgO7p7IDW1tiBgICBgpmZmYKurq+CwL/Ags3NzYLX19eC39/fguXl5YLo6OiC5ubngtbW1oLQ0NCC2trbgtra2oLk5OSC5OTkguPi44Lf39+C2NjZgs/Oz4LCwsKCsbGxgpubm4KDg4OC4uLjgainqICGfYN+h32Dfol9g36Mf4V+joGGfpCBh36PgIV+jH2Efol6gH6HeX9+h3qAfoh8gn6IfYR+iH6Eft/W3n6DgoOC0tLSgqenp4Kpp6mAjYeQfo+Jk36Pi5R+hYSGgI2MjYLQ0NGCwMDAgtfX2IHDwsd/eniCfuvr/33l4fl9h4WRfqysrYHAwMGCy8vLgoCAgYKLi42AeXiCfnt7hX5+fIZ+gH6KfomJjICioqOCzs7Ogvf3+YGlpq1/hYWVfoeJmn6LjZ9+hYaPf/v7/YHQ0NGCnJ2egrS1u4B8gJh+bnKMfmxwin5rcYx+a3GNfmtxjX5qb41+aW+NfmdtjH5jaoh+X2aEfrLD/H2ru/R9nq3lfZmo4H2Rodh9ipnSfWxuin93d4+AeXmRgHt7k4B9fZWAfn6WgH9/l4CAgJiAgYKagIODm4CDhJuAhYWcgIaGnYCHh5+AiYqggIuLooCNjqSAkJGngJSVq4CYmrCAnqC2gKapvoCytMiAu73PgMnIzYH49/uBhYWHgpWVloKtra+Czc3Ogu/v8IKJiYmDmZmZg6WlpYOgn6CDg4ODg52dnoOjo6ODmZmZg4uLjIP49/iC1tbXgre3uIKfnqCCj4+QgoeGiIJ/foCCyMnbgJCSqoCKjKSAhYefgIGCm4B9fpaAeXqSgHZ3joDBwep/f4y9fX2JuH2FkL19jZfEfau35X21wfB9vMf3fcHL/H3Ezf19xs79fWVpgH5na4J+aWyCfmptgn5rboJ+a26Bfm5vgH53eIp+hIWWfoyNm36MjJl+ioqXfoqIln6Jh5V+iYeUfomGkn6IhpJ+iIaSfoaGkn6GhpF+hoaQfoWFkH6FhY9+hYSPfoWEj36Fg45+hYOMfoWDjH6Egox+g4GLfoOBin6DgYp+goCJfoF/iH6Bf4h+gX+IfoF+hn6AfYZ+gH2GfoB9hX6AfIV+f3yFfn98hH5/e4N+f3uDfvbt+33c1OJ9wbnHfbixvn23sL19ta27fbOqt32xqLN9sKaxfa6jrX2soKl9p5qifZ+Tmn2ajpV9lIiOfY+Ch32Fd3t9/d/ofOXN2HyDdXp/9tzlf/rg6X+AcneAgnR5gIN2eoCFd3uAhnh9gIh6foCJe3+AinyBgIx+goCNf4SAj4GFgJCChoCRhIiAk4aKgJWHi4CWiY2AmIuPgJqNkoCckJSAn5SYgKKXnICnnKGAraOngLSqroC8trmAysnLgYGBgYKYmJiCqqqqgre3t4LBwcKCyMjIgs3NzYLR0dGC09PTgtPT04LQ0NCCl5eXgrKysoLU1NWC2NjYgtra24La2tqC2dnZgtTU1ILOzs6Cw8PEgrW1tYKkpKSCjY2NguLi44GZlZh/gXqAfoJ5f36EeoF+h32Dfop+hH6MgIZ+jH6Ffop9g36HeoB+hXl/foV6gH6Ge4J+h32Efod9hH7RydB+//7/gdLS0oKpqamCsK+xgI2HkX6OipR+j4yVfn9/gYCKiouC0NDRgsHAwYLb2tyBy8rPf3x6hH53doF+6eT8fYSBjX6oqKqBwMDAgszMzIKBgYKCkJCSgHp6hH59fIZ+f32JfoGAjH6GhYiAoaGigs7OzoL6+vuBq6uyf4WGlX6Iipl+jI6efoKDjH/5+fuB0NDRgp2dnoK3t72Ae36Wfm5yiX5rb4d+a3CJfmtwiX5qb4l+aG6JfmdtiX5la4d+YWeDfrvI/32wvvN9prTofZil132UoNJ9jJnLfYWTxn1rbId/d3eNgHl5kIB7e5KAfX2UgH5+lYB/gJaAgYGXgIKCmYCDg5qAhISbgIWGnICHh52AiIiegIqKoICLjKKAjo6kgJCRp4CUlaqAmZqvgJ+htYCnqb2AsrXIgL/C1ICRkpeBfn2AgoiIioKYmJqCs7O0gtXV1oL6+fqCj4+Pg5+foIOsrKyDq6urg46OjoOysrKDurq6g66uroOdnZ6DioqLg+3t7oLJyMqCrKusgpuanIKRkJKC19bbgZaYroCQkqqAioyjgIWGnoCBgpqAfX6VgHp6kYB2d42AwMHnf32ItH18hq99hI62fYuUu32qtd59tL/qfbvF8X3Ayfd9w8z5fcXN933L0v59Z2qAfmlsgX5qbYB+a22BfmxtgH51dod+jY6efo6Pn36QkJ5+kJCdfo+Om36OjZp+joyafo6Mmn6OjJh+jYuXfouLl36LipV+i4qUfoqJlH6KiJR+ioiUfoqIlH6KiJN+ioiSfoqIkX6JiJF+iIeRfoiGj36Iho9+h4WOfoaEjX6GhI1+hoSMfoaDi36Egot+hIKLfoWCi36EgYl+g4GJfoOBiH6DgYh+hICIfoOAh36BfoV+gn6GftnT4X25s8F9ubC9fbauvH2yq7d9sKm0fa6msX2soq19qp+pfaSZon2dk5p9mY+WfZOIkH2Ngoh9gXZ6ffXe53zeytV8gnV7f/Tc5X/54el//uXuf4F0eYCDdnuAhHd8gIZ5fYCHen+AiXt/gIp9gYCMfoOAjYCEgI+BhoCQg4eAkYSIgJOGioCUiIyAloqOgJiLkICajpOAnJGVgJ+UmYCjmJ2Ap52hgKyip4Czqq6Atq6ygJybnIH5+fqBlpWWgqurq4K7u7uCx8fHgs/Pz4LT09OC1tbWgtbW1oLT09OCzMzMgsHBwYLLy8uC39/gguvr64Lv7u+C7+/vguzs7ILn5ueC3d3egtDQ0IK/v8CCqKipgo2NjoKZmZqB6Nrkffru+3367Pl9/+/8fYN6gH6GfIN+iH6Efol+hH6IfIN+hXmAfoR4f36EeYF+hXuDfoZ9hX6HfYV+w7vCfvj4+IHS0tKCq6urgrm3uoCNiJJ+jouUfo+Nln719Ph/iIiJgtDQ0ILCwcKC3t7fgdXU2X99fIZ+eXeCfu3o/X2Bf4h+paWmgb+/v4LMzM2Cg4OEgpWUl4B8e4V+fn2IfoB/iX6CgYx+goGEgKCgoYLOzs+C/f3+gbGxt3+HhpR+iYqZfo2Onn6AgIh/9vf5gdDQ0YKenp+Cubq/gHt+k35tcId+a2+FfmpuhX5qboZ+aG2FfmdshX5ma4R+Y2iCfsDL/X25xPZ9r7rrfaOv3H2VoM19kJvGfYmUwX2Dj7x9amyEf3d3jIB5eY+Ae3uRgH19k4B/fpSAf4CWgIGBl4CCgpiAg4OZgISEmoCGhpuAh4ecgIiInoCKiqCAjIyhgI6PpICRkqaAlZaqgJmaroCgobSAp6m8gLK0x4C/wtOA09XigOvq74GHh4mCmJiZgra1t4Lc29yCg4ODg5mZmYOtra2Dtra2g8zMzIPNzc2D0dHRg8XFxYO/v7+Dq6urg5SUlIP6+fuC0dDRgrCwsYKcnJ6CkZCSgoKDioGWmK+AkJKogIuLooCFhp2AgoKZgH5+lIB6e5CAd3eMgMHB5n98hax9eoKnfYOLr32JkbN9qbLYfbK84326wux9wMjzfcPK9H3GzPV9zNL6fdHW/n1qbIB+1dr/fdjb/33a3P99xsfXfq+vs4CTk5WBmJiagfPz94C8u7+Aj4+SgNvb4n+op65/goKIf9DQ236urbh+mpijfpCOmn6PjZl+j42Zfo+NmX6PjZl+j42Yfo+Nln6OjZZ+jYyWfo2LlX6Ni5R+jYuUfouKk36LiZJ+i4mSfouJkn6QjpZ+oJ2mfr27xH7s6vJ+l5aaf8bFyX+DgoOArKutgODf4YCPj5CBmZiZgdTU1YCQjpJ/vbXDfbu0wX24sb59ta26fbKrtn2up7N9q6Svfaigqn2jmqN9nJObfZePln2QiI99iYGHff7s9nzv3OZ82svXfIJ2fH/z3eZ/+OHqf/3l7n+BdXqAg3d7gIR4fYCGen6Ah3uAgIl8gYCKfYKAjH+EgI2BhYCPgoeAkIOIgJGEiYCShouAlIiNgJaKj4CYjJGAmo+TgJyRloCflZmAopidgKadoYCroqeAsqqugLmxtYDf2t6A5ubngY2NjoKjo6SCtLS1gsHBwYLKysqCz8/QgtHR0oLQ0NCCysrLgtjY2ILX19eC39/fgtrZ2oLf39+C6Ojogunp6oLp6emC5OTkgtra2oLNzc2Cubm6gqCgoYKDg4OC9/X3f87DzX3x5/V98ub0ffbp933/8P19g3qBfoV8g36GfIN+hXuCfoN5gH6CeH9+g3qBfoR8g36FfYV+hX2GfravuH7x8fKB0dHRgq2trYLBwMKAjImSfo2KlH6PjZd+6+rvf4aGh4LQz9CCw8PDguLh44Hf3uJ/fn6Ifnt6hX54doF+gH6IfqGhooG+vb6Czc3NgoWFhYKZmZyAfnyHfn9+iX6BgYp+hIKNfn5+gYCenp+Cz8/Pgn9/gIK2trx/iIeUfoqLmX6Oj55+fX2Ff/T09oHQ0NGCn5+ggru8wYB7fpJ+bXCFfmtug35qboN+aW2Dfmhsgn5na4J+ZWmAfsTN+32+xvR9tsDsfau14H2gqtJ9k5zEfY6Xvn2HkLh9gYuzfWprgX93d4uAeXmNgHt7kIB+fZKAf3+UgICAlYCBgZaAgoKXgIODmYCFhZmAhoabgIeInYCJiZ6Ai4uggI2OooCPj6SAkpKmgJWWqoCZmq2An6CzgKaouoCwssSAvcDQgMfK2YC5uL2BhoWHgpaWmIKysrOC2djZgoKCgoOXl5eDpKSlg8PDxIPh4eGD1dXVg+Xl5YPNzc6Ds7Ozg6enp4OUlJSD+vr6gtDP0YKurq+Cm5ucgn5+gIKjpbiAlZetgI+RpoCKi6GAhoacgIKDmIB/f5SAe3uQgHd3jIDDwuZ/e4KlfXh/n32Bh6d9h42sfaev0X2xudt9ucDmfcDG7n3EyvJ9yMzzfczR+H3R1vx91dn/fdfa/n3Z3P99297+fejp+X6Ojo+BlpaXgsHBwYK+vr6Cs7O0gqenp4KampqCjIyNgv39/4Hl5eWBzs7Pgbq6u4GoqKmBmZmagY2MjoGDgoSB9vX4gOvq7YDi4uWA397hgN7e4IDh4OOA6OfpgPLx84CAf4GBiYmKgZWUlYGjo6SBtLS1gcfHyIHd3d2B9fX1gYeHiIKVlZWCoqKjgq+vr4K6urqCwsLCgqemp4K6urqBv73Bf764xX29tcN9u7PBfbewvH2zrbh9r6m0faqkr32mn6l9oJmjfZqTm32UjZV9jYePfYeAiH397/p87N3pfNnN2XyBdn1/89/of/fi7H/85u9/gHV6gIN3fICEeX6Ahnp/gId8gYCJfYKAin6DgIyAhICNgYaAj4OIgJCEiYCRhYqAk4eMgJSJjoCWi5CAmI2SgJmPlICckZaAn5WagKKYnYCmnKGAqqKmgLCorIC3sLSAubO3gMLBw4GEhIWCm5ucgqysrIK5ubmCwcHCgsbGxoLIyMiCxcXFgtTU1ILg4OGC1dXVgt7d3oLn5+eC2tragtfX14Le3t6C4ODhgtzc3ILT09SCxcTFgrCwsIKWlZaCycnKgfjs8n3Hvsl96OHufejg7X3v5PF99+v5ff/x/n2CeoF+g3uBfoJ5gH6BeH9+gXh/foJ6gX6DfIR+g32FfoJ9hX6rpa5+6urrgdHR0YKvr7CCycnLgIuJkn6Oi5V+kY+ZfuHg5X+EhIWC0NDQgsTExILl5eaB6Ojtf4B/iX59e4Z+eniCfn59h36dnZ6Bvby9gs3NzoKGhoeCn56hgH9+iX6BgIt+g4ONfoaEj3719Pp/nZ2egs/Pz4KBgYKCvbzBf4iIlX6MjJl+j4+dfnp6gX/y8vSB0NDRgp+goYK/v8OAfH2Qfm5xg35rboF+am2BfmlsgH5na4B+zdT+fcjP+X3CyfN9vMTufbO85H2osNZ9nqbKfZKavX2MlLd9hIyvfX+Hqn1ra4B/d3eKgHp5jIB7e4+Afn2RgH9/k4CAgJSAgoGVgIODl4CEhJiAhYWZgIeHmoCIiJyAiomegIyMn4COjqKAkJCkgJOTpoCWlqmAmZqtgJ6fsYClpriArrDBgLm8zIDGydiAg4SJgYGBg4KRkJKCrKutgtDQ0YL29veCi4uLg6enp4PExMSD19fXg8vKy4PY2NiDz8/Pg7W1tYOZmZqDi4uLg+/v8ILJyMmCqqmrgpiYmoKvr7WBmp2xgJSWq4COkKSAioufgIaGm4CCg5eAf3+TgHx7j4B4d4uAxMPlf3uBn313fZl9f4SgfYeMqH2mrMt9r7bWfbrA4X3Axel9xMrufcfL7n3M0PR90dT4fdbZ/H3Z3P19293+fd3f/32wsMB+wsLGgOjo6oGpqaqCu7u8gsTExILKysuCzs7PgtDQ0YLQ0NGCz8/Qgs3MzYLKysqCxsbHgsPDxILAwMGCvb2+gru7u4K5uLmCt7e4gra2t4K2treCt7e3gri4uIK6urqCvLy9gr+/v4LCwsKCxcXGgsnIyYLMy8yCzs3Ogs/P0ILPz9CCzs3OgsrKy4LFxcWCvb29grCwsYKGhoaCg4KDgYKAhH/Bush9v7nFfb22w325sr99ta65fbGqtX2rpbB9paCqfZ6ao32Yk5x9ko2WfYyIkH2FgYp9f3mAfene63zWz9x8gXZ9f/Pf6X/34+1//ejyf4B2eoCCeH2AhHl+gIV6gICHfIGAiX6DgIp/hICMgYaAjYKHgI+EiYCQhYqAkoaLgJOIjYCVio+AloyRgJiNkoCZj5SAnJKXgJ+VmoChmJ2ApZyhgKmhpoCvpquAta2ygLmytoCRkJKB8/P0gZCQkYKjo6SCsbGygrm5uoK8vLyCvb2+gs7OzoLa2tqC39/fgtPT04LZ2dmC5eXlguXl5oLZ2NmC0NDQgtXV1YLS0tOCysrKgru7u4KlpaWCi4uLguDf4YCHfYR9v7nEfd/Z6H3f2ed95t7rfe/l83347Pt9f3iAfoB5gX6AeH9+/u78ff7v/X2AeoF+gnyEfoN9hX6CfoZ+oJylfuPi5IHR0dGCsbGygtLS1ICMipR+joyWfpGPmX7W1tt/goKDgs/Pz4LFxcWC6enqgfLx9n+DgYp+fn6Hfnt6hH59e4V+mZmagbu7vILNzc6CiIiIgqSkp4CBgIt+g4ONfoaFj36IhpJ+7e3zf5ycnILPz9CCg4KDgsPCyH+JiZR+jIuYfo+PnH7v8P1+7+/xgc7Oz4Kenp+Cvb3BgHt8jX5ucIJ+19v/fdXa/33T2P190NX8fczR933GzPJ9wcftfbvB532yudx9pq7PfZyjw32Rl7Z9ipGvfYKJp319hKJ91tb9fnh3ioB6eYyAfHyOgH5+kICAf5OAgoGUgIOCloCEg5eAhYWYgIaGmYCIh5uAiYmcgIqKnYCMjJ+Ajo6hgJCQo4CTk6aAlpapgJmarICenrGApKW2gKutvYC1t8eAwMPSgMzO2oDm5uqBiYmLgp+eoIK6uruC3dzdgoiIiIOfn6CDs7Ozg7+/v4O0tLSDv7+/g7q6uoOrq6uDlZWVg/b294LW1teCubm6gqKho4KQkJKC1tflgJqcr4CTlamAjo+jgIqKnoCGhpqAgoKWgH9/koB8e46AeHeKgMTC4n96f5l9d3uTfX+DnH2Hi6N9pKrFfa600H24vdx9v8PjfcLG5n3Gyel9y87wfdHU9H3W2fl92dz8fdvd+33e3vx9dnaEftvb6X6BgYSA5OTngJmZm4G8vL2B3Nzdgfn5+4GKioqClpaXgqGhoYKpqaqCsbGxgra2t4K7u7yCvr6/gsHBwoLDw8SCxcXFgsbFxoLGxsaCxsbGgsbGxoLFxcWCxMPEgsLCwoK/v7+CvLy8gre3uIKysrKCq6usgqOjo4KZmZmCjY2NgoCAgILj4+SBxMTEgaKho4H6+fuAmpmbgIiGiX/s5fN9w73KfcG7yX2+uMV9urPAfbewu32yrLd9raexfaeirH2gnKV9mJSdfZCNln2Kh499hIGKfXx5gH3l3et81dLgfIB3fX/z4Op/9+Tvf/3p9H+AdnuAg3h+gIR6f4CFe4CAh32CgIl+g4CLgIWAjIKHgI6DiICPhYqAkYaLgJKHjICTiY6AlYuQgJaMkYCYjpOAmpCVgJyTmICelZqAoZidgKWcoYCooKWArqWqgLOrsIC5sraA2NTYgNra24GEhISCmJiYgqWlpYKsrKyCtbW2gsnJyYLT09SC2dnZgtra24LOzs6C09PTgt/f34Lj4uOC4eHhgtPT04LExMWCxMPEgr29vYKurq+CmJeYgvb19oGqqKp/gnuBfbayvX3V0uB91tLgfdzX5X3l3ut97+b0ffbs+3367/19+u78ffns+3357fx9fnmAfoB7hH6CfYZ+gn6HfpSRmn7Hx8iBwsLDgqurrILX1tmAjYuVfpCOl36TkZt+zczRf4CAgILPz8+CxsbGgu3s7oF+foCAhIONfoCAin59e4Z+e3qEfpWVloG6uruCzs7PgomJioKqqqyAg4KMfoWEj36IhpJ+iYmUfubm63+ampuCz8/QgoSDhILIx81/iomVfoyMl36Ojpp+4N/sftLS04Gtra6C/f3/gZSUmIB2d4Z+29//fdjb/H3W2vt909f5fc/T9n3KzvF9xcrsfcDF5326v+B9sLbWfaWqyH2boLx9j5SufYiNp32Ahp99fIGbfdTU+H55eImAe3qMgH18joB/fpCAgICSgIKBlICEg5WAhYSXgIaGmICIh5mAiYibgIqKnICLi52AjY2fgI+OoICRkKOAk5OlgJWWqICZmauAnZ2vgKKjs4CoqrqAsLLBgLq8y4DBw9CAtLS4gX9/gYKLi42CpKSlgsvLzILx8PKCioqKg5ubm4OmpqaDn5+fg6WlpYOfn6CDk5OTg4ODg4Pk4+WCu7q8gqKio4KXlpiC7OvvgZ+gsYCYmq2Ak5SngI6PooCKip6AhoeZgIODlYB/f5GAfHuOgHl4iYDEw+F/eX2TfXV5jn1+gpZ9h4qffaKnvn2tsct9tbnUfbu/233Bw999xcfmfcvO633R0vB91df1fdrc+X3d3vp93t74feDg+31zc4B+enqHfoGBjX6JiZV+srK/fn9/hX+zs7h/8PD2f5qanYC+vsGA4+PmgIODhYGVlZaBo6OlgbCwsYG6uruBw8LEgcnJyoHNzc6B0M/RgdDP0YHOzs+BysrLgcTExYG9vL6BsrKzgaamp4GYmJmBiIiJgezr7YDHx8mAo6KkgIB/gYC/vcF/h4aKf7q3wH6HhIx+8ev5feXe7X3Tzdt9yMLQfca/zX3Fvst9wrvIfb63w326s799ta+5fa+ps32ppK59op6nfZmVnn2QjpZ9iYiQfYGAiX3y7/184d7rfNHR33z+7ft+8uHrf/jm8H/96/V/gXd8gIN5foCEe4CAhnyBgIh+g4CJf4SAi4GGgI2DiICPhIqAkIaLgJGHjICSiI2Ak4mPgJWLkICWjZKAmI+UgJqRloCck5iAnpabgKGYnYCknKCAqJ+kgKykqYCwqa6Ata+zgLWwtIC6ubuB7u7vgYqJioKVlZaCp6engru7u4LGxcaCzc3OgtPT1ILV1daCycnJgs7NzoLX19iC2trbgtnZ2YLU1NSCyMjIgrOztIKqqqqCnp6egomJiYK9vb6Bx8LIffrw/Xyvrbl9y8vYfc3L2H3Sz9x93Nfkfeff7X3u5fR98un4ffTp+H306fl99uv7fXx4gH5+eoN+gHyEfoB9hn6IhY9+8/P1gH9/gIL19PaBrayvgIyKlH6PjZd+kZCafrSzuH/j4+SBvr2+grq6uoLj4+SBf36BgIWFj36CgYx+f32Hfnt7hH6NjY6BtLO0gsjIyYKGhoeCqqqtgISDjn6GhY9+iIeSfoqJlH7Q0NV/iYmJgrW1toLj4+SBs7O5f4WFkH6FhI9+hYSQfrOyvX78/P+Avr6/gX5+gIGbm6J/4OP/fdrc+n3Y2/p91tn5fdLW9X3O0fF9yc3sfcXI6H2/w+J9t7vZfa+00H2jqMF9mZ62fY6SqH2Hi6F9gYWafX2Bln3X1vd+eXiJgHx7jIB+fY6AgH+QgIGAkoCDgpSAhISVgIaFl4CHhpiAiIiZgIqJm4CLipyAjIyegI6Nn4CPj6GAkZGjgJSTpYCWlqeAmJmqgJycrYCgobKApaa2gKytvIC0tcSAvL7MgH5+g4Hm5emBgYGDgpSTlYKqqqyCxsbHguTj5IL+/f6CiIiIg4SEhYOIiImDg4ODg/Hx8oLY2NmCv77AgqmpqoKTkpSCh4eJgp+fpIGbna+Al5irgJKTpYCOjqGAioqdgIeHmYCDg5WAgICRgH18joB5eIqAw8Lef3p9kH14eox9foCSfYeJm32gpLh9rbDGfbS3z326vNV9v8LbfcbI5H3Mzup90dLufdbX833b2/Z93t74feDh+n3i4vx95eX9fXNzgH51dYJ+d3eEfnp6hn59fYl+f3+LfoGAjH6Dg45+hISPfoWEj36GhJB+i4mVfpiWon6pqLN+vLvGfs7N137d3OZ+6unyfu/u+H7w7vd+6unyft/e537Qz9h+v73HfquosX6Zl59+ioiQfoF+h35/fYV+fnuDfnx5gX7z7v597uf3febi8X3i3et93tfmfdnS4X3SzNp9zcjVfcvE0n3IwtB9x8DNfcS+yn3BusZ9vLbBfbexu32xq7V9q6awfaSgqX2alqB9kpCZfYuKlH2Cgop99PL/fODg7XzV1uR8/O37fvLi7X/56PN//u34f4F4fYCDen+AhXyBgIZ9g4CIf4SAioCFgIuCh4CNg4mAj4WLgJCHjICRiI2Ak4mOgJSLkICVjJGAl46TgJmQlYCakZeAnJOZgJ6VmoChmJ2Ao5uggKefo4CqoqeArqesgLOssICyrLCAkI+Rgc/P0IHz8/SBkJCQgqGhooKvr6+Curq6gsPCw4LJycmCzMzNgsLCwoLHx8eCz8/Pgs/Oz4LLy8yCxsbHgr6+voKzs7OCnJydgomJiYL09PWB+/n8gIF9hX18eYB9q6u2fcLD0H3FxdJ9zMrXfdXR333f2uh95+Hwfe3l9H3u5vZ97+b1ffHp+X327v99fXqCfn98hX6AfYZ+gn+Jfquqr3+2tbiAysrMgLq5vn+HhY9+iYeRfouJkn6BgIR/kJCRgfj4+YH9/f+Bo6OkgczL0H+Eg41+gYGLfn9+iX59e4Z+1dTXgIeGh4KWlpeCzc3OgYiIioCBgYt+g4KMfoOCjX6Eg45+lZWaf6urrIHa2duBhYWGgXx8gX98e4Z+enqFfnl4hH6Eg45+p6etf8HBx3/r7Ph+gYGNftvc933a2/d92Nr2fdbY9H3R1PF9zdDsfcnL6X3Ex+R9vsHdfbe51H2uscp9o6a8fZqdsX2OkaN9h4qcfYGEln19gJJ91tTzfnl4h4B8e4uAf36OgICAkICCgZKAhIOUgIWFloCGhZaAiIeYgImJmoCLipuAjIudgI2NnoCPj6CAkJChgJKSo4CUlKWAlpangJmZqYCbnKyAn5+vgKOktICoqbiArq++gLW3xYC5u8iA3N3ogKamq4Hu7fGBjo2Pgp2dnoKxsLKCxsbHgtjY2YLT0tSC2djags7Oz4K8vL6Crayugp+foYKPj5GC2dnegYiIjoGkpbWAm5utgJaWqICSkqSAjo6ggIuLnICHh5mAhISVgIGAkYB9fI2AeXiJgMTC3X98fY19eXqIfYCBj32IiZd9oKKzfausvn20tst9urzRfb/A133HyOF9zc7nfdLS633X1/B93Nz1fd/f+X3i4/x95OX+fXNzgH50dIF+dXWBfnV1gX51dYF+dnWCfnZ1gn52doF+eHeCfnh4g355eIN+eXmEfnp6hX57e4Z+fHuFfnx8hn59e4Z+fXuHfn58h35+fIZ+fHuFfnx5g357eYJ+enmCfnl3gH7x7f597+v8fe3o+n3q5fZ95+LyfeTf8H3i3e194NrqfdzW5n3Z0+N919LhfdfR333Wz959083bfdDK133Nx9V9y8XSfcnDzn3Fv8p9wrvHfb23wn24sr19sq23faunsH2loap9m5mhfZSSm32NjJV9hoWNfX19hX3k5PF84ODufIB5gH/z4+5/++r1f4B3fYCCeX+AhHuAgIZ9goCHfoSAiYCGgIuCh4CMg4iAjoWKgJCGjICRiI2AkomPgJOKkICVjJGAlo2SgJiPlICZkJaAm5KXgJ2UmYCelpuAoZidgKOboICmnqOAqKGmgKylqoCwqa6As62xgMK+woChoaKB19fYgfv7/IGNjY6Cm5ucgqenqIKxsbKCubm6gr6+voK2traCurq7gsHBwYK/vr+Cubm6grKys4KoqKmCnJycgo2MjYLz8vSBu7q7gZOPk4B9fIN9e3uBfaiqtX26vcl9v8HNfcjI1X3R0N592NbkfeDc633m4fF96ePzfevk833u5/d98uz8fXx5gX5+e4R+f32GfoF+iH6Egot+lZOcfqyqtH6al6F+g4GKfoWCjH6Fg41+o6GrftfW23+4uLqAycnLgJGQk4D08/1+goCLfoF/iX5/foh+fn2Hftzc4X+AgIGBj4+QgcfHyYCcm6B/fXyHfn19hn59fYd+fXyGfq6uuX7z8/h/iYmMgKmpr3+RkJt+dnWAfuno/33m5fx95eT7febm/H3g3/Z93970fd7d9H3c3PV929v1fdjZ833V1vB90dPsfc3O6H3IyeN9wsXefb3A2H23udB9rbDFfaKlt32ZnKx9j5GffYiKmX2Cg5J9foCPfdbV8X55eIeAfXyLgH9+joCBgJCAg4KSgIWElICHhpaAiIeXgImImYCKipqAjIucgI2MnYCOjp6Aj4+fgJGQoYCTkqOAlJSlgJaWpoCYmKmAm5urgJ6eroCiorKApaa1gKmruoCusL+AtLXEgLq8yYC+wM2AxcfSgIuMkYHY2NyBjYyOgpuanIKlpKaCoKCigqalp4KioqSCmZmbgn59gIKoqK2By8zZgKOltYChorOAnZ6vgJmZq4CVlaaAkZKjgI+PoICLi5yAiIiYgIWElYCBgJGAfXyMgHl4iIDEw9x/fn6MfXl6hX2BgYx9ioqWfaGisH2oqbh9srPEfbm5zH29vtF9xcXZfcvK4H3R0ed92djwfd7e9n3i4vp95eX+fXNzgH50dIF+dXWBfnZ1gn52doJ+d3eDfnh4hH54eIN+d3eCfnh3g354d4N+d3eCfnd3gn54eIJ+eHeBfnh2gX54doF+d3aAfnd2gH54doB+7+v/fe3p/X3s6fp97On6fern+X3p5PZ96OP1fefi833m4vJ95ODxfeTf8H3i3ex94tzrfeDa6n3e2Oh93NflfdvU5H3Z0+F919HffdXQ3X3Tzdl90MrYfc7I1X3LxdF9xsDLfcK9yH2+ucR9ubS+fbOvuX2uqrR9pqOrfZ6bo32XlZ19jo6VfYeHjn2Af4d97u77fOrr+Hyelp1/+Or1f/7v+n+BeX+Ag3uAgIV9goCHfoSAiYCFgIqCh4CMg4mAjYWKgI+Gi4CQh42AkomPgJOKkICUjJGAlo2SgJeOk4CYkJWAmpGWgJuTmICdlJqAn5ecgKGZnoCjm6CApZ2igKigpYCqo6iAraargLGqr4CzrbKAsaywgM3JzYCWlZeB09LUgf39/oGMjIyCmZmZgqOjo4KqqquCpKSlgqioqYKsq6yCp6engqCgoIKXlpeCi4uLgu7t74GrqqyB2NTYgJuWm4CHgoiAqaexfX5+hX2nq7V9s7jDfbm8yH3Cw9B9y8rYfdPS4X3a1+Z94NzqfeTf7X3p4vF97ef2ffLs/H17eIB+fnuDfn98hX6Afod+gn+IfoOAiX6CgIl+goCKfoOBi36Egot+hIKMfoSCjH6KiZN+m5mjfqinsH6ioat+i4qUfoB/iX6Af4l+f36Jfn9+iX6mpbB+8vH7fn9/hH/Qz9l+kpKcfnt6hX57eoV+e3qFfnp5hH57e4V+goGMfn59iH54eIN+d3aBfnZ2gX51dYB+6Of9febm/H3k5Pt94uL4feDf9X3e3fN93d3zfdvb8X3X1+1909TqfdHS6H3NzeN9yMnefcPE2n29vtF9t7jLfa+wwX2kpbR9m5ypfZKTn32Ki5Z9hISQfX+AjH3Y1fB+enmHgH58i4CAf46AgoGQgISDk4CHhZWAiIeWgImImICKiZmAjIubgI2MnICOjZ2Aj4+fgJCPn4CSkaGAk5OjgJWUpYCXlqaAmZmogJubq4Cdna2AoKGwgKOks4Cmp7aAqaq6gK2uvYCxs8GAtbfFgLm7yYC8vsyAu73KgOvt+IC/v8OBgoKEgoaFh4KEhIaCy8vPgX5+hIGvsb+Aqqy7gKaouICio7OAnp+wgJubrICXmKiAlJSlgJKSooCPjp+Ai4ubgIiImICGhZWAgoGQgH59jIB6eYeAxsTdf39/in16eoJ9g4KKfY+PmH2io659qam1fbCwvX22tsV9u7vKfcPC033Jyd190dDlfdnZ733f3/Z95OP7fefn/311dYF+dXWCfnZ2gn52doJ+d3eDfnl5hX56eYZ+enmEfnl4hH55eYR+eXmEfnl4hH55eIR+enmEfnp5g356eYN+eniCfnl4gX54d4F+eHeBfnh3gH54doB+7+z+fe/r/X3v6/x97ur7fevn+H3q5vd96uX1fejk833n4/J95eDvfePe7X3i3ex94dzqfeDa6X3e2OZ929bjfdnT4X3X0d591c/cfdPN2n3Qy9d9zMbSfcfBzH3Dvsl9v7vFfbq2wH22sbp9r6y1faimrn2hn6d9mJeefZCQln2IiY59gICGfXx8g32tqrJ939Tcf4B5foCDfIGAhH2CgIZ+g4CHgIWAiYGGgIqCh4CLg4mAjYWKgI6Gi4CQh42AkYmOgJKKj4CUi5GAlY2SgJeOk4CYkJWAmZGWgJqSl4Cck5iAnZWagJ+XnIChmZ6Ao5uggKWdooCnoKWAqaKngKukqYCup6yAsaqvgLOtsoC1r7SAtK+zgLu2uoCAf4CBv7/AgfPy9IGGhoeCkJCQgo6OjoKRkZGCkZCRgouLjIL+/f+Bx8bIgYSDhIG0sLSAop2igKGcooCdmJ6AmJSZgN/Y4n6Fho19q6+5fba6xH26vch9wMLNfcfH0n3Pztt919Tifd3a533h3Op95eDtfevl9H3w6/t9e3iAfn17g35/fIR+gH2GfoF/h36CgIl+g4GKfoOBin6EgYt+hIKLfoSCjH6Egox+g4GLfoOBi36CgYp+goGKfoGAin6BgIp+gX+JfoB/in6Af4l+gH+Jfn9+iH5/foh+f36Ifn59h358fIZ+fHyGfnx8hn58e4V+e3qFfnp5hH55eYN+eHiCfnh4gn53d4F+dnaAfuvq/33p6P195ub7feTk+X3i4fV94N/yfd7d8X3b2u5919bpfdPT5X3R0eR9zc3gfcnJ233Ew9V9vb7Nfbi4x32wsb99p6i0fZ6eqX2Xl6B9jY2WfYeHkH2Cgot9hoSSf318iYCAfoyAgoCOgIOCkICFhJOAh4aVgImIl4CKiZiAi4uagI2Mm4COjZyAj46egJGQn4CSkaCAk5KhgJSTo4CVlaSAl5emgJmZqICbm6uAnZ2tgKCgr4CiorKApKW0gKantoCoqbiAq6y7gK6vvoCxs8GAs7XDgLS2xIC1t8WAsrTCgMXG0oCAgIWBw8TRgKyuvICsrr2Aqaq6gKant4CjpLSAn6CwgJydrYCZmqqAlpengJSUpICRkaGAjo6egIyLm4CJiJiAhoWUgIOCkICAf42AfnyKgN7b83+Yl6J9f36DfYeFin2Wlp19oqOrfamps32wsLp9trXBfbq6x33Ew9N9y8vcfdLS5X3Z2e5939/2feTk+33o6P99dXWBfnZ2gn53d4J+d3eDfnh4hH56eoZ+fHuHfnt6hn56eoV+e3uFfnt7hX57eoV+e3qFfnx7hn58eoV+e3qEfnt5g356eYJ+eXiBfnl4gX56eIF+eXiBfnl3gH7x7v998O3+ffDs/X3v6/x97er6fezo+H3s6Ph96+b1fejk833m4fF95ODvfePe7X3i3et94Nvpfd3Y5n3b1uN92NPgfdbQ3H3Tztp90MvXfczH0n3JxM99xsHLfcK+yH29ucJ9uLS9fbKvuH2rqbF9pKKqfZybon2UlJt9jY2TfYaFi32BgYd9lI2Tf4B5foCDfIGAhX+DgIeAhYCIgYaAiYKIgIuEiYCMhYqAjYaLgI6Gi4CPiI2AkYmOgJKKj4CTi5GAlYySgJaOk4CXj5WAmZGWgJqSl4Cbk5iAnJSZgJ6Wm4Cfl52AoZmegKOboICknaKAp5+kgKmhp4Cqo6iArKWqgK6nrICwqq6AsqyxgLStsoC1r7SAtbC0gLOusoDe29+AqKepgd7d34Hm5ueB6urrgdbV14GenZ6B0s/SgK2orYCtqa6Aq6asgKijqICloKWAop2igJ2ZnoCAfICA0M3VfaWosH24u8R9vcDKfcTG0X3MzNd90M/bfdXS3n3a1uJ939vnfePe6n3o5PF97en3ffPv/n19eoJ+f32FfoF+hn6Bf4d+goCJfoOBiX6Egop+g4KKfoSCi36Eg4x+hIOMfoSDjH6Dgox+g4KLfoOCi36Dgot+g4KLfoKBin6BgYp+gYCKfoGAiX6Af4l+gH+JfoB/iX5/foh+fn2Hfn59h35+fYd+fXyGfnx8hn58e4V+enqEfnl5g355eYN+eHiCfnd3gX52doB+6un9fefn+n3l5fl94+P2feHh833f3/J93d3vfdnY6n3U1OV90dHhfc7N3H3Kydh9xcTSfb++y324uMR9srG8faurtn2jo6t9mpqgfZKRl32Li5F9nJykfc/M33+CgIyAhIKOgIWEkICGhZKAh4aUgImHlYCKiZeAi4qYgIyLmoCOjJuAj46dgJCPnoCRkZ+Ak5KhgJSTooCVlKOAlpalgJiXpoCamamAnJurgJ2drYCfn6+AoaGxgKOjsoCkpbSApqa1gKiot4CpqrmAq6y7gKyuvICur72Arq++gK2vvoCsrryAq627gKqruoCoqbiAp6i3gKWmtYCjo7OAoKGwgJ6eroCbnKuAmZmpgJeXpoCUlKOAkZGggI+PnoCNjJuAi4qZgImJl4CHhpSAhYSRgIOCj4B/foqAt7XEfv35/3yJh4p9m5qffaamrH2trbV9s7K9fbu6xn2/vsx9x8bVfc7O3n3V1Od92trufd/g9H3j5Pp96Oj+fXZ2gX53d4N+eHiDfnh5hH55eYZ+enqGfnt7h357e4d+e3uGfnx7hn58e4Z+fHuGfnx7hn59fIZ+fHuFfnx7hX58e4R+e3qDfnt6g357eoR+e3uEfnt6g357eYJ+eXiBfvLv/33y7/598u7+ffHt/X3u6vt97en5fe3p+X3s6Ph96uX0fefi8X3l4e595N/tfeLe633g2+l93dnmfdvW4n3X0t591M/bfdLN2H3OytV9zMfSfcnFz33Gwsx9wb3Hfbu3wX20srp9r620famnrn2joql9m5uhfZCQlX2KiY59jo2Sffjp8H+Ben6AhH2BgIeAhICIgYaAioOHgIuEiYCNhouAjoeMgI+IjICQiY6AkYqPgJKLkICTjJGAlY6TgJaPlICXkJWAmJGWgJmSl4Cbk5iAnJSZgJ2Wm4Cfl5yAoJmegKKboICjnKKApZ6jgKegpYCpoqeAqqOogKylqoCup6yAr6mugLGrsICzrLGAtK6zgLWwtYC2sbaAuLK3gLOvs4DEwMSAf36Agevo7IC3s7iAsq6zgLOvtICyrbKAsKywgK6proCrp6uAqaSogKahpoCinaKAnpmdgPjv93+4s7t+tri/fb2+x33Hx9F90M/afdbU4H3a1+J92tfifdzY433i3el96eXxfe/q93308P19fXqBfn99hH6Bf4d+goCHfoKAiX6DgYl+g4GKfoOBin6Egot+hIOLfoWDjH6Fg4x+hYOMfoSCi36Egot+hIKLfoSDjH6Eg4x+g4KMfoOCjH6CgYt+goGKfoGAin6BgIl+gH+Jfn9/iH5/fod+fn2Hfn19h359fYZ+fXyGfnx7hX57eoR+enqDfnl5gn54eIF+d3aAfu3s/33r6v596en7fefm+H3k5PV94+L0feHg8n3c3Ox92NfnfdPT4X3Pztx9y8rXfcbF0X3BwMp9vLvFfbe1vn2xsLl9qKitfZybnn2WlJh9lZSYfX99h3+Bf4mAhYOOgIeFkICIhpKAiYiUgIuJlYCMipeAjIuYgI2MmYCOjZqAj46bgJCPnYCRkJ6AkpGggJSToYCVlKOAlpWkgJeWpYCZmKeAmpqpgJycq4CenqyAn5+ugKGhsICiorGAo6OygKSltIClprWAp6i3gKipuICpqbiAqaq5gKmquYCpqrmAqKm4gKept4Cmp7aApaa1gKSltICjo7KAoaGwgJ+froCdnayAm5uqgJmZqICYl6aAlpWkgJSUooCTk6GAkpGegJCPnICOjZqAjIuXgImJlYCHhpKAhIOPgNjV6H+/vMV9h4SFfZiXmn2rqbB9tLS8fbm4wX2+vch9xcTSfcvK2X3R0eF92djpfd7e8H3i4vV95eX6fejo/X11dYB+d3eCfnl5hH56eoR+e3qGfnt7hn58e4Z+fHyHfnx8h359fYd+fXyGfn18hn59fIZ+fXyGfn18hn59fIZ+fXyFfn18hX58e4R+fHuEfnx7hH58e4R+fHqDfnt6gn56eYF+eniAfnp4gH7y7/998O38ffDs+33v7Pt97+v6fe3q933q5vR96OTyfebh7n3k4O194t7rfeDb6H3d2eV92dXgfdfT3X3U0Nt90c3Yfc7L1H3Lx9F9xsPNfcK/yH2+u8R9uri/fbSyuX2vrbR9qaeufZ2coX2TkpZ9z8nOfZiPk3+AeHuAgnp9gIV9gICHgIOAiYKGgIuEiICNhoqAjoeMgI+IjYCQiY6AkYqPgJKMkICUjZGAlY6TgJaPlICYkZaAmZKXgJqTmICblJmAnJWagJ2XnICfmJ2AoZqfgKKboYCknaKApZ+kgKegpYCooqeAqqSpgKymq4CuqK2AsKqvgLGssICzrbKAtK+0gLWwtYC3sraAuLO4gLm0uYC5tbmAubW5gLi0uIC4s7iAt7O3gLayt4C1sbWAtLC0gLOus4CxrLGAr6qugK2orICqpKmAqKKmgKSeo4Cgmp+Al5KYgM/J0n+tqbF+x8XPfc3M1n3W1N993Nrlfd7b5X3g3OV95uLtfezo9H3x7fl99fH+fXx6gX5/fYN+gH6FfoF/hn6CgIh+goGJfoOBiX6EgYp+hIOLfoSDjH6Fg4x+hYOMfoWEjH6Eg4x+hIOMfoSEjH6FhI1+hIOMfoSDjH6Dgot+g4KLfoKBin6CgYp+gYGKfoGBin6BgIl+gICJfn9+iH5+foh+f36Ifn5+h359fYZ+fHyFfnx7hH56eoN+eXiBfnh4gX54d4B+d3eAfu3s/n3q6fp95+f4feXl9n3j4vN93t7sfdrZ533X1eN909LffdDO2n3My9Z9x8bRfcLByn29u8N9trW7fauqrX2hnqF9w8DHfYeFkH98e4WAg4KMgIaFkICJh5KAioiTgIuKlYCNi5aAjoyYgI+NmYCQj5qAkZCcgJKRnYCTkp+AlJOggJWUooCWlaOAl5akgJeXpYCYmKaAmpmogJubqoCdnKuAnp6sgJ+froChobCAoqKxgKKjsYCjpLKApKW0gKWmtICmprWApqe2gKeot4CnqLaAp6i2gKantoCmpraApaa0gKSls4CjpLKAoqKxgKGhsICgoK+An5+tgJ6erICdnaqAnJupgJqap4CZmaWAl5ekgJaVooCUk5+AkpGdgI+Pm4CNjJiAioqWgIiHk4CEg4+Azczff5STnn6Wk5Z9paSofbSzun28u8V9wcHLfcjI033Qz9191dXjfdrZ6X3e3u594+L0fefn+X3q6v19dnaAfnh4gn56eYN+e3qEfnt7hX58fIZ+fXyHfn59h35+foh+fn6Ifn5+iH5+fYZ+fX2Ffn59hn5+fYd+fn6Hfn59h35+fYd+fnyGfn58hX5+fIV+fnyFfn17hH58e4N+fHqCfnt6gn57eoJ+enmBfvPw/33y7/598+/+ffPu/X3w7Pt97er4fevn9X3p5fJ95+PvfeTg7H3i3ut94NznfdzZ433a1uB91tPdfdPP2X3QzNZ9zcrSfcrHz33GxMx9w8DIfb27wn21s7p9rKqvfaOgpX3Pyc59hX2Af+PV2n/+7vR/hX2AgIZ+gYCIgIOAioGEgIuDhoCNhIiAjoaKgI+Ii4CRiY2AkoqOgJOMkICUjZGAlY6SgJaPlICYkZWAmZKXgJqTmICblJmAnJaagJ6XnICfmJ2AoJqfgKKcoYCjnaKApZ+kgKegpYCooqeAqqSpgKymq4CuqK2AsKqvgLGssYCzrrKAtK+0gLWxtYC2sbaAuLO4gLi0uIC5tLmAurW6gLq2uoC6trqAurW6gLm1uYC5tLmAubO4gLizt4C3sraAtrC0gLSusoCxq6+Ar6isgKymqoCpoqeApZ+kgKGboYCemJ6AlI+VgMzG0H+4tL1+1dLafdfU3X3e2+R95eHrferm8X3v7Pd99PD8fffz/319e4F+fnyCfn99hH6AfoV+gYCHfoOBiH6Eg4p+hYOKfoWDi36FhIx+hoSMfoaEjH6GhY1+hYSNfoWEjX6FhY1+hoWNfoWEjX6FhIx+hIOLfoSDi36Eg4t+hIKLfoOCi36Dgot+goKKfoGBin6BgIl+gICIfoB/iH5/fod+fn2Gfn59hX59fIV+fHuEfnp6gn56eYJ+eXmBfnh4gH7u7f597Ov7feno+X3m5vV95OPxfeDf7X3d3Ol92trmfdjX433V1N990dDafc3M1X3Hxc59vbzCfbWzuH3b1+F9fXyGf9vZ7X9/foqAgoGMgIWDj4CHhpGAiYiTgIyKlYCNjJeAj42ZgJCOmoCRkJuAkpGcgJOSnoCUk5+AlpSggJaWooCYl6OAmZilgJqZpoCbmqeAm5uogJ2cqoCenqyAn5+tgKCgroChoa+AoqKxgKOjsoCkpLKApaWzgKWmtICmprSApqe1gKeotoCoqLeAqKm3gKipt4CpqbeAqKm3gKiptoCoqLaAp6i1gKeotYCmprSApaazgKSlsoCjo7CAoaKvgKCgrYCenquAnJypgJuap4CZmaWAl5ajgJWUoYCTkp+AkJCcgI6NmYCLipeAh4eUgISEkYB9fYmAsLDBf6Ohrn6xr7V9tbS8fcHAyX3LytV91NPgfdnZ5n3e3ex94uHwfebl9X3q6fl97Ov+fXd3gH55eIJ+enqDfnt7hX59fYZ+fX2Gfn59h35/foh+f3+Ifn9/iH5/f4d+f36Hfn19hX5+fYV+f36HfoB/iH6Af4h+gH+IfoB/iH6Af4d+f36Hfn9+hn5+fYV+fXyDfn17g359e4N+fHuCfnx6gX57eYF+enmAfvXx/3308P198u78fe/s+X3t6fZ96+fzfenm8X3n4+995OHtfeHe6X3e2+Z93NnjfdvY4n3Y1N591NHafdHP133Oy9N9ycbNfcG+xX23tLp9rquwfebe5H2IgYR/5tjef4F5fICDe36AhHx/gIqBhYCLgoaAjISHgI2FiICOhomAkIeKgJGIjICRiY2AkoqOgJSMj4CVjZGAlo6SgJePk4CYkJSAmZKWgJqTl4CblJiAnJWZgJ2Xm4CfmJyAoJmegKGbn4CjnaGApZ6jgKagpYCooqeAqqSogKumqoCtqKyAr6qugLGssICzrbKAtK+zgLawtYC3sraAuLO3gLm0uYC6tbmAu7a6gLu2u4C8t7uAvbe8gL23vIC9t7uAvbe7gLy2u4C7tbmAurS4gLiytoC2r7OAtK2xgLGqroCup6yAq6WpgKihp4Cln6WAo52jgKCbooCfmqGAmJOagN/Z5n/m4e5+6eTtfeHd5X3r5/B98u75ffbz/n18e4B+fnyCfn9+hH6Bf4V+goCGfoOCiH6Egoh+hIOJfoSCiX6Eg4l+hYOKfoaEi36HhY1+h4aNfoeFjX6HhY1+h4aOfoeGjn6GhY1+hoWNfoaFjH6FhIx+hYSMfoWEjH6Fg4x+hIOMfoSDi36Dg4p+goKKfoGBiH6Af4d+f3+Hfn9/hn5+foZ+fn2Gfn19hH58e4N+e3qCfnp6gX55eIB+8e//fe/u/X3u6/p96+v5feno933l5PJ94+LvfeHg7H3d3Oh92NfhfdDO133Hxcx9wL7EfYmIkH6Tkp5/6Of8f4OCjoCFhI+AhYWRgIeGkoCIh5OAiYiVgIuKloCNjJiAj46agJCPm4CSkZyAk5KegJSTn4CVlKCAl5WhgJeWooCYl6OAmpmkgJuapoCcnKiAnZ2pgJ6eqoCgn6yAoaGtgKKir4Cjo7CApaWxgKams4Cnp7SAqKi1gKmptoCpqreAqqu4gKuruYCrrLmArK26gKytuoCsrbqArK26gK2tuoCsrbqArK26gKusuYCrrLiAqqu3gKmqtoCoqbWApqezgKWlsoCjo7CAoaKugJ+grICenqqAnJyogJqap4CXl6SAlZWigJOToICQkJ6Ajo6cgI2NmoCLi5iAioqXgImIlYCEhJCAyMjbf9DP4n7My9V9wb/JfczL1X3V1OB93t7sfeXl9H3q6fh97u7+fXh4gH55eYF+enqCfnp6hH58fIR+fX2Gfn5+hn5+fod+f3+IfoB/iH6Af4h+gYCJfoCAiH5/f4d+gH+HfoGAiH6BgIh+gYCIfoGAiH6BgIh+gYCIfoGAh36Af4d+f36Gfn99hX5+fYR+fn2Efn18g359e4N+fHuCfnx6gX57eoF+9fL/ffPw/H3x7vt97+z4fe7q9n3s6PR96ebyfefk8H3m4+595OHsfeLg6n3g3eh93NnifdfU3X3QzdV9x8XMfb68wX25trp9koyQfp2VmX/x4+p/hHyAgIV9gYCHfoKAh3+CgIiAg4COhomAj4eKgJCIi4CRiYyAkoqNgJOLjoCUjI+AlY2QgJaOkYCXj5KAmJCTgJmRlICakZWAmpKWgJuTl4CclJiAnZWZgJ6WmoCfl5uAoJidgKGanoCjm5+ApJ2hgKafo4CooaWAqqOngKulqYCtp6uAr6mtgLGrr4CzrbGAta+zgLawtYC4sraAurS4gLu1uYC8trqAvbe7gL24vIC+uLyAv7i8gL+4vYC/ub2Avri8gL63u4C9trqAu7W5gLqzt4C4sbWAtq+zgLWusYCzrLCAsaqvgK+proCtp62Aq6asgKmkqoCno6mApaGogKOgp4Cin6aAnpujgIF/h4CfnaZ/npyjfuzn8H3w7PV99/T+fX59gn6Bf4V+goGHfoSCiH6Fg4p+hYSLfoaFi36GhIt+hoWMfoaGjH6Ghox+h4aNfoiHjX6Hh41+h4eNfoiHjn6Ih45+h4eOfoeGjn6Hho1+hoaNfoaFjH6GhY1+hoWNfoWFjH6FhIt+hYSLfoSDi36Dgop+goKIfoGBiH6BgIh+gICIfn9/hn5+foV+fX2Efn19hH59fIN+fHuCfnt6gX56eYB+eXmAfvHw/n3u7vt96+r2fefm8n3h4Ot919bffc3L0n3d2uN9y8nYfri3yH9+fomAhoaSgIeHk4CJiJSAiomVgIuKl4CMi5iAjYyZgI6NmoCPjpuAkI+cgJGRnYCTkp+AlJOggJWVoYCXlqKAmJejgJmYpICZmaWAmpqmgJubp4CdnKiAnp2qgJ+eqoCgoKyAoqGtgKOjr4ClpbGApqaygKens4CoqLWAqaq2gKurt4CsrLmAra26gK2uuoCurruArq+8gK+wvYCwsb2AsLG9gLCxvoCwsb6AsLG9gK+wvICvr7yArq+7gK2uuoCsrbmAq6u4gKmqtoCoqLWApqezgKWlsoCjo7CAoKGugJ+frYCdnauAm5upgJmZp4CXmKaAlpakgJWVo4CUlKKAk5OhgJKSoICQkJ6Aj4+cgI6Om4CLi5iAdXWBgJWUo3+Qj5l+zMrTfdPS3X3e3ep95ub0fezt/H15eYF+enuDfnx8hH59fYV+fX6Gfn5+hn5/f4d+gH+HfoCAiH6BgIl+gYCJfoGAiH6BgIh+gICIfoGBiH6BgYl+goGJfoGBiX6BgYh+gYGIfoGBiH6CgYh+gYCHfoGAh36Af4Z+gH+Ffn9+hX5/foV+fn2Efn18g359fIJ+fHqBfnt5gH728/999fL+ffPx/X3y7/t98Oz4fe7r9n3r6fR96ebxfeXj7H3h3ud929jgfdTR2H3Myc99xMHGfeDZ4H3b0Nd+wre8f4F5fYCHgIOAiICDgImBhICKgoWAi4OGgIyEh4CNhYiAkomNgJKKjoCTi46AlIyPgJWNkICWjpGAl4+TgJiQlICZkZWAm5KWgJuTl4CclJiAnZWZgJ6WmoCfl5qAoJibgKGZnICimp2Ao5uegKScn4ClnKCApp6igKefo4CooaSAqqKmgKukp4CtpamAr6ergLGprYCyq6+Ata2xgLavs4C4sbSAubO2gLq0t4C8tbmAvba6gL63uoC+t7uAv7i8gL+4vIC/uLyAvri7gL63u4C9trqAvba6gLy1uYC8tbiAu7S3gLqzt4C5sraAuLG1gLawtYC0r7SAs62zgLGssoCvq7GAramwgKuor4Cppq6AqKWtgKajrICkoqqAoZ+pgJaUnYDh3ut/iIaOf5eVm3749Px9fXyAfoF/hX6Dgod+hoSKfoeGi36Hhox+iIeNfomIjn6KiI5+iomPfoqIj36KiZB+iomQfoqIj36JiI9+iYiPfoqIkH6KiJB+iYiPfoiIj36IiI5+iIeOfoiHjn6Hho1+hoaNfoaFjH6GhYx+hYWMfoWEi36Eg4p+g4OKfoOCiX6CgYh+gYGIfoGBiH6Af4d+f3+Ffn5+hH59fYN+fHyCfnt6gH7y8P197Ov2feTh633a2OB95eHqfbSyv36gn6x/6ur/f4iIlICKipaAi4uXgIyLl4CNjJiAjY2ZgI+Om4CPj5yAkJCdgJGRnoCSkp+Ak5OggJSUoYCWlaOAl5akgJiXpYCZmaaAmpqngJuaqICcnKiAnZyqgJ6dqoCfnquAn5+sgKCgrYChoa2AoqKugKOjr4CkpLGApqazgKiotICpqbaAqqq3gKusuICtrrqArq+7gK+wvICwsL2AsLG+gLGyvoCysr+AsrO/gLKzwICytMCAsrTAgLKzv4Cysr+AsLK/gLCxvoCvsL2Arq+8gK2uu4CsrbqAqqu4gKmpt4CnqLaApaa0gKSks4CjpLGAoqKwgKChr4CfoK6Anp+tgJ2eq4CcnKqAm5upgJqaqICYmaeAl5elgJWWo4CUlaKAk5OhgJKSoICQkZ6AiYmVgNPS5X+BgIt/iomSftnY433h4Ox96ej2fXh4gH57e4N+fn6Ffn9/h36AgIh+gYGIfoKBiX6Cgop+goKJfoKCin6Dgop+g4OKfoODin6Dg4p+g4OKfoOCin6Dg4p+g4KKfoODiX6Dg4p+g4OJfoODiX6DgYh+goGIfoGBiH6BgYd+gYCGfoGAhn6Af4Z+f36Ffn59g35+fIJ+fXuBfnx7gH57eoB+9vP+ffLw+n3u6/V96ObvfeLg6H3b2N9909DVfczJzn3e2N59wLe9fqqhpn/z5ex/iIGEgImChYCKgoaAi4OHgIyEh4CNhYiAjoaJgI+HioCQh4uAkYmMgJWNkICWjpGAl4+SgJiQk4CZkZSAmpKVgJuTloCclJeAnZWYgJ6WmYCfl5qAoJibgKGYnICimp2Ao5uegKScn4ClnaGApp6igKefo4CooKSAqqGlgKujpoCspKiAraWpgK6mqoCwqKuAsamtgLKrroC0rLCAta6xgLevs4C4sLSAubK1gLqztoC7tLiAvba5gL63uoC/uLyAwLm9gMG6vYDBur6Awbq+gMG7voDBu76Awbu/gMG7v4DBu76AwLq+gMC5vYC/uLyAvbe7gLy2uoC6tbqAubS5gLeyuIC2sbeAtLC2gLKutYCwrbSArquzgKyqsoCqqLCAqKavgKelroClo62ApKKrgKGgqYCUkpuA4+Duf5WUnX+zsLl+g4KGfoF/g36CgYZ+hYOIfoeGjH6KiY5+i4mPfouKj36LipB+jIuRfoyLkX6Mi5F+jIuSfoyLkX6Mi5J+jIuSfouLkX6LipF+i4qQfoqJkH6KiZB+iYmPfomIj36IiI9+iIiOfoiHjn6Hh41+h4aNfoaFjH6FhYt+hYWLfoSEin6Dgol+gYGIfoB/hX59fIJ+9PP+ffDt933q5/B95uTsfYOCiH7T0eB+qai1f+rp/X+JiZSAjYyZgI6NmYCOjpqAj4+bgJCQnICRkJ2AkZGdgJKSn4CTk6CAlJSggJWUoYCWlaOAl5ejgJiYpYCZmaaAmpqngJubqICcnKmAnZ2rgJ6erICfoK2AoKCugKGhr4CiorCAo6OxgKSksYClpbKApqazgKentICnqLWAqKm2gKmqtoCqq7iAq6u4gKytuoCtrruAr7C8gLCxvoCxsr6AsrK/gLKzwICztMGAs7XCgLO1woCztcKAs7XCgLS1woC0tcKAs7XCgLO0woCytMGAsrPBgLGzwICxscCAr7G/gK+vvoCtr72ArK68gKytu4CrrLqAqau5gKipt4CnqLaApqe0gKSls4CjpLKAoqOxgKChr4CfoK6Anp+sgJ2dq4CbnKqAmpuogJmZp4CYmKaAlpekgJWVoYCUlKCAlJOfgIqJlIDY1ud/kI+Zf6qnsn7p5/J95OLtfevq9n3y8f19fHuCfn5+hX6BgIh+goKKfoODin6Dg4p+hISLfoWFjH6GhY1+h4WNfoaFjX6FhYx+hYWMfoWFjH6GhYx+hoWMfoaFjH6GhYx+hoWMfoWEi36Eg4p+g4KJfoOCiH6CgYh+goGHfoGAhn6Af4R+fn2Dfn18gX739f998e/5fevo8X3l4ul93tzifdnW3H3X09h9hYGFfuHW3H6yqa5/8+btf4qDh4CNhYmAjYWJgI6GioCOh4qAj4eKgI+Ii4CQiIuAkYmMgJGKjYCSio6Ak4uPgJSMkICZkZSAmZKVgJqSloCbk5eAnJSYgJ2VmYCelpqAn5ebgKCYnIChmZ2AopqegKObn4CknKCApZ2hgKaeooCnoKOAqaGlgKqipoCro6eArKWogK6mqoCvp6uAsKmsgLKqroCzrK+AtK2wgLWusoC3sLOAuLG1gLmytoC7tLeAvLW5gL63uoC/uLuAwLm9gMG6voDCu7+Aw7zAgMS9wYDEvsKAxb/CgMW/woDFv8KAxb/DgMW/w4DFv8KAxb/CgMS/woDEvsGAwr3BgMG8wIDAu7+Avrm+gL24voC7t72Aura8gLi0u4C2s7qAtLG4gLOwt4CxrraAr6y1gK2rs4CrqbKAqaixgKimsICmpa6ApaOtgKOiq4CioKqAmpmigIOCioDIxdJ/i4mRf7i2vn6KiY5+g4KGfoWDh36HhYl+iIeLfomIjn6LipB+jIuRfo2LkX6Mi5F+jIuSfo2Mkn6NjJJ+jYySfoyMkn6Mi5J+jIuRfouLkX6LipB+ioqQfoqJj36JiI5+iIiOfoiHjX6Hhox+hYSKfoOCh36Af4R+fXyBfvb1/X3y7/d98/H5fY+OlX7Rz91+nJqmf9PS43+Dgo2Ajo6ZgJCPm4CRkJyAkZGdgJKRnYCSkp6Ak5KfgJOToICUlKCAlZWhgJaVooCWlqOAl5ekgJiYpYCZmaaAmpqngJubqICcnaqAnZ2rgJ6erICfn62AoKCugKKir4Cjo7GApKSygKWms4Cmp7SAp6i1gKipt4CpqriAqqu5gKusuoCsrbuAra68gK+vvYCvsL2AsLG+gLGyv4Cys8CAs7TCgLS1w4C0tsSAtbbEgLa3xYC3uMWAt7nHgLi5x4C5u8iAubvIgLm7yIC5u8iAubvIgLm7yIC5u8iAuLrIgLi5yIC3uceAtrjGgLa3xYC0tsSAtLXDgLO0woCys8GAsbLAgLCxv4Cur72Ara68gKytu4Cqq7mAqaq4gKeptoCmp7WApaWzgKOksoCio7CAoaGvgJ+grYCenqyAnZ2rgJubqYCZmqaAmZmlgJiXo4CXlqKAl5WggJaUn4CRj5mAfnyEgMK+yn+IhY1/s6+5fn9+g37t6/V98O75ffTy/X18e4F+fX2Dfn9+hH6AgIZ+goGHfoODiX6Eg4p+hIOKfoWEi36FhIt+hYSLfoSEiX6Eg4l+hIOJfoSDiH6Dgoh+g4KIfoKBh36BgIV+f36Efn59gn749v999PH6fe/s9H3r6PB95uTqfeLf5X3n4+l9k46Tft3U236knKB/3dHXf4V+goCOh4uAj4iMgI+IjICQiYyAkImMgJGJjYCSio6AkouOgJOLj4CTjI+AlIyPgJSNkICVjZGAlo6SgJePkoCYkJOAnJSYgJ2VmYCelpqAn5eagJ+Xm4CgmJyAoZmdgKKanoCjm5+ApJyggKaeoYCnn6OAqKCkgKmhpYCqoqaAq6OngKylqICtpqmArqergLCorICxqq2AsquvgLStsIC1rrKAt7CzgLixtIC5sraAurO3gLy1uIC9trqAv7i8gMC6vYDBu76Awry/gMS9wYDFvsKAxb/DgMbAw4DHwcSAx8LFgMjCxYDIwsaAyMLGgMjCxoDIwsaAyMLGgMfCxYDHwsWAxsHFgMXAxIDEv8OAwr7DgMG9woDAu8GAvrrAgL25v4C7uL+Aura+gLi1vIC2tLuAtLK6gLKwuYCwr7eArq22gK2stYCsqrSAqqmzgKmosYCop7CApqWugKWkrYCko6yAo6GrgKGfqYCbmqOAi4qTgOfl9H+5t8N/kI+Yf9bT3n6pp69+jo2SfomHi36HhYp+hoWJfoaFiX6Hhop+iIaLfoeFin6GhYp+h4WKfoeGi36Ghot+hYSJfoSDiH6DgoZ+goGFfoGAhH6Af4N+gH+DfoOCh36SkJd+trS+fuzq+X6amaR/w8LQf+3s/n+JiJKAkZGcgJOSnYCTkp6Ak5OegJSTn4CUlJ+AlZSggJWVoYCWlaGAlpaigJeXo4CXl6SAmJikgJmZpYCamqaAm5ungJycqICcnKmAnp6qgJ+frICfoK2AoaGugKKir4Cjo7CApKSxgKWlsoCmprSAp6i1gKiptoCpqriAq6u5gKytuoCtrruArq+8gK+wvYCwsb+AsrPAgLO0woC0tcOAtbbEgLa3xYC3ucaAuLrHgLm7yIC6vMmAu73KgLy9y4C9vsuAvb7NgL7AzYC+wM6AvsDOgL/AzoC/wc6Av8HPgL/Bz4C/wc+Av8HOgL7AzoC+wM2Avb/MgLy+y4C7vMqAurvJgLm7yIC4useAt7jGgLa3xYC0tsOAs7TCgLKzwYCwsb+Ar7C+gK2uvICsrbuAqqy5gKmqt4CoqbaApqe1gKWms4CjpLGAoqOwgKChroCfn62Anp6rgJ6eqoCdnKiAnJumgJuapYCamaOAmpiigJmXoICZlp+AmJWegJSRmYCIhIuA5d7pf7q0vX+RjZR/3NbhfqilrH6HhYl++PX+ffTy+3308/t99fT8fff1/X349v99+Pb/fXx7gH59fIF+fXuAfvf1/n329fx99vT9ffTy+n3y8Ph98e72ffDt9H3x7vV9/Pf+fZWRlX69trx+/PH4fqOcoX/Mwsh/9+vxf4qEh4CRio2AkouPgJOLj4CTi4+Ak4yPgJOMkICUjJCAlI2QgJWNkYCVjpGAlY6RgJaOkoCXj5OAl4+TgJeQlICYkJSAmZGUgJmSlYCbk5aAm5SXgKCYnICgmZyAoZmdgKKanoCjm56ApJyggKWdoICmnqGAp5+igKigpICpoaWAqqOmgKujp4CspaiAraapgK6nqoCwqKyAsamtgLKrroCzrK+AtK2xgLavsoC3sLSAuLG1gLmztoC7tLiAvLW5gL23uoC/uLyAwLq9gMK7v4DDvMCAxL7BgMW/woDGwMOAx8HFgMjCxYDJw8eAycPHgMnEx4DKxciAy8XIgMvFyYDLxcmAysXIgMrFyIDJxMeAycPHgMjDx4DHwseAxsHGgMXAxYDDv8WAwr7EgMG9w4C/vMKAvrvBgLy5wIC6uL+Aube+gLe1vYC1s7yAs7K7gLGwuYCwr7iAr663gK6stoCsq7SAq6qzgKqpsoCpqLGAp6awgKalr4ClpK6ApKOtgKOiq4CioaqAoaCqgKCfqICdnKaAlpWfgI2MlYB/f4eA5+b0f9PR33++vMh/ray2f6GgqX+YlqB/kZCZf46MlX+Ni5R/j42Wf5SSnH+amaN/o6Ksf7Gvu3/Ew9F/1dTjf+rp+n+BgYqAi4qVgJKRnICVlJ+AlpWggJaVoICWlqGAlpahgJaWoYCWlqGAlpahgJeWooCXl6KAmJijgJmYpICZmaWAmpmlgJqapoCbm6eAnJuogJycqICdnamAnp6qgJ+fq4CfoKyAoKCtgKGhroCioq+Ao6OwgKSksYClprOApqe0gKeotYCpqbaAqqq4gKuruYCsrbqAra68gK+wvYCwsb6AsbK/gLKzwIC0tcKAtbbDgLa3xYC3ucaAubrIgLq7yYC7vMqAvL7LgL2/zIC+wM2Av8HOgMDCz4DBwtCAwsPRgMLE0YDDxdKAw8XTgMTG04DExtOAxMbTgMTG04DExtOAw8XSgMPF0oDCxNKAwsTRgMHD0IDAws+Av8HOgL7AzYC9v8yAvL7LgLu8yoC5u8mAuLrIgLe5xoC2t8WAtLbDgLO0wYCxssCAsLG+gK6wvYCtrruAq6y6gKqruICoqreAp6i1gKams4CkpbGAo6OwgKKir4Choa6AoaCsgKCfqoCfnqmAnp2ngJ6cpoCdm6WAnZqkgJyZooCbmKCAm5efgJqWnoCalp2AmZWbgJiTmYCUj5SAjIeMgIJ9goDr4+t/1c7Wf8O8w3+yq7F/o52jf5qVmn+VkJV/ko2Rf5KMkX+SjZJ/l5GWf52XnH+ooqd/ubG2f8rBx3/a0dh/8+jvf4R+goCNhoqAkoyQgJSOkoCVjpKAlY6SgJWPk4CWj5OAlo+TgJaPk4CWj5OAl4+TgJePk4CXkJOAl5CUgJiQlICYkZWAmZGVgJmSlYCakpaAmpOWgJuTl4CblJeAnJSYgJyVmICdlpmAnpaagJ+Xm4Cjm5+ApJyggKWdoYCmnqKApp+igKego4CooaSAqaGlgKqjpoCrpKeArKSogK2mqYCupqqAr6irgLCprICyqq6As6uvgLStsIC1rrGAtq+zgLewtIC5srWAurO2gLu0uIC8trmAvbe7gL+4vIDAur2Awbu/gMO8wIDEvsGAxb/CgMbAxIDGwcSAyMLFgMjDxoDKxMeAysTIgMrFyIDLxsmAzMbKgMzGyoDMxsqAzMbKgMzGyoDMxsqAysbKgMrGyoDKxMmAyMTIgMfDyIDGwsiAxcHGgMTAxoDCv8WAwb7EgMC9xIC+vMOAvbvCgLu5wYC5uMCAuLa/gLa1voC0tL2As7K7gLKxuoCwr7mAr664gK6ttoCsrLWAq6u0gKqps4CpqLKAqKexgKemsICmpa+ApqWugKWkrYCko6yAo6KrgKKhq4ChoKqAoJ+pgJ+eqICfnqeAnp2ngJ6dp4CdnKaAnZymgJ2bpoCcm6WAm5qkgJuapICamaSAmpmkgJqZpICamaSAmpmjgJqZo4CZmaOAmpmjgJmZo4CZmKOAmpmkgJqZpICamaSAmpmkgJqapYCbmqWAm5qlgJuapoCbm6aAm5umgJybp4CcnKeAnZyogJ2dqYCenqqAn56rgJ+fq4CgoKyAoaGtgKGhroCioq6Ao6OvgKSksIClpbGApaazgKentICoqLWAqaq3gKqruICrrLmArK26gK2uu4Cur7yAsLG+gLGyv4Czs8GAtLXCgLW2w4C2t8SAt7jFgLi6x4C6u8iAu7zKgLy+y4C9v8yAv8DNgMDBz4DBws+AwsPQgMPE0YDDxdKAxMbTgMXH1IDGyNWAxsjVgMfI1YDHydWAx8nVgMfJ1YDHydWAxsjVgMbI1YDGyNWAxcjUgMXH04DExtOAw8XSgMLE0YDBw9CAwMLPgL/BzoC+wM2Avb/MgLy9yoC6vMmAubrIgLe5xoC2t8WAtbbDgLO0woCxs8CAsLG/gK+wvYCtrruArK26gKuruICpqreAp6i1gKams4ClpbKApaWxgKSkr4Cjoq6AoqGsgKKhq4ChoKqAoZ+ogKCep4CgnaaAn5ykgJ+bo4CemqKAnpqhgJ6ZoICdmZ+AnZiegJyXnYCcl5yAnJecgJyWm4CblpuAm5WagJqUmYCalJiAmpSYgJmTmICZk5iAmZOYgJmTl4CZk5eAmZKXgJiSloCYkpaAmJKWgJiSloCYkpaAmJGWgJiSloCYkpaAmJKWgJmSloCZkpaAmpOXgJqTl4Cak5eAmpOXgJqTl4Cak5eAm5SXgJuUmICclJiAnJWYgJyVmICdlZmAnZaagJ6XmoCel5uAn5ibgKCYnICgmZyAoZmdgKKanoCim56App+igKego4CooKSAqaGlgKmipoCqo6aAq6SngKylqICtpqmArqeqgK+oq4CwqayAsaqtgLKrroCzrLCAtK2xgLausoC3sLOAt7G0gLmytYC6s7eAu7S4gLy2uYC+t7uAv7i8gMC5vYDBu76Awry/gMO9wIDEvsKAxsDDgMbAxIDHwsWAyMLGgMnEx4DKxMeAy8bJgMvGyYDLxsmAzMfKgM3Hy4DNx8uAzcfLgM3Hy4DMx8uAzMfLgMvHy4DLx8uAysbLgMnGyoDIxcmAx8TJgMbDyYDFwseAxMDHgMPAxoDBvsaAwL7FgL69xIC9u8OAvLrCgLq5wYC5t8CAt7a/gLa1voC0tL2As7K8gLKxuoCxsLmAr6+4gK6ut4CtrLaArKu1gKuqtICqqbOAqamygKmosYCop7CAp6avgKalroClpK6ApKOtgKSjrYCjoqyAoqGrgKGgqoChoKqAoKCqgKCfqYCgn6mAn5+pgJ+eqICfnqiAnp2ogJ6dp4CenaeAnp2ngJ2cp4CdnKeAnZyngJ2cp4CdnKeAnZyngJ2dqICdnKeAnZyngJ2dqICenaiAnp6pgJ6eqYCenqmAn56pgJ+eqoCfn6qAoKCrgKCgrIChoayAoaGtgKKiroCjo6+Ao6OvgKSksIClpbGApaaygKans4CnqLSAqKi1gKmptoCqq7eAq6y5gKytuYCtrruAr6+8gLCwvYCxsb6AsbK/gLO0wIC0tcKAtrfEgLe4xYC4ucaAubrHgLq8yYC8vcqAvb7LgL6/zYC/wM6AwMLPgMLD0IDCxNGAw8XRgMTG04DFx9SAxsjVgMfJ1YDHydeAyMrXgMjK14DJy9eAycvXgMnL14DJy9eAycvXgMnL14DJy9eAx8nXgMfJ14DHydWAxsfVgMbH1IDExtOAxMbSgMLE0YDCw9CAwMLPgL/AzYC+v8yAvL7LgLu9yYC6u8iAuLrGgLe4xYC2t8SAtLbCgLO0wYCxsr+AsLG+gK+wvYCurruArK26gKusuICpqreAqKm1gKiotICnp7OApqaxgKalsIClpK6ApaOtgKSirICjoaqAo6CpgKOgqICin6eAop6mgKGdpYChnaSAoZyjgKCcooCgm6GAoJuggJ+an4CfmZ+An5megJ6ZnYCemJ2AnpicgJ2XnICdl5yAnZecgJ2Xm4CclpuAnJaagJyWmoCclZqAnJWZgJyVmYCclZmAnJWZgJyWmoCclpqAnJaagJyWmYCclpqAnJaagJyWmoCdlpqAnZaagJ2WmoCdlpqAnpeagJ6Xm4CfmJuAn5icgJ+YnICgmJyAoJmcgKCZnYChmp6AopqegKKbn4CjnJ+ApJyggKSdoIClnqGApp6igKmipoCqo6aAq6OngKukqICspaiAraapgK6nqoCvqKuAsKisgLGqrYCyq66AsquvgLOssIC0rbGAta+ygLews4C4sbWAubK1gLqzt4C7tLiAvLW5gL23uoC+uLuAwLm9gMG6voDBvL+Aw7zAgMO+wYDFv8KAxsDEgMfBxYDIwsWAycPHgMnDx4DKxciAy8XJgMvGyoDMx8uAzMfLgMzIy4DNyMuAzcnMgM3JzIDNycyAzcnMgMzIzIDMyMyAy8fMgMvHzIDKx8uAycXLgMnFy4DHxMqAxsPJgMXCyYDEwciAw8DHgMG/x4DAvsWAv73FgL28xIC8usOAurrCgLm4wYC4t8CAt7a/gLW1voC0s72As7K8gLKxu4CxsLqAsK+5gK+ut4CurbaAray2gKyrtYCrq7SAq6qzgKqpsoCpqLKAqKexgKensICnprCApqWvgKWlr4ClpK6ApKOtgKSjrYCjoq2Ao6KsgKOirICioayAoqGrgKKhq4CioauAoaCrgKGgqoCgoKqAoKCqgKCgqoCgoKqAoKCrgKCgq4CgoKuAoKCrgKCgq4CgoKuAoaCrgKGhrIChoayAoqGsgKKirYCioq2Ao6KugKOjr4CkpK+ApKSwgKWlsYClpbGApqaygKens4Cnp7OAqKi0gKmptYCqqraAqqu3gKusuICsrLmAra26gK6uu4CvsLyAsLG9gLGyvoCys8CAs7TBgLS1woC1tsOAt7jEgLi5xoC5useAurzJgLu9yYC8vsuAvr/MgL/AzYDAws6AwcPQgMLE0IDDxdKAxMbSgMXH04DFx9SAx8nVgMfJ1oDJy9aAycvYgMnL2IDLzNiAy8zYgMvM2IDLzNiAy8zYgMvM2IDLzNiAyczYgMnL2IDJy9eAyMrWgMfJ1oDHydWAxsjUgMXH1IDExtKAw8XRgMHD0IDBws+AwMHOgL7AzIC9vsuAu73JgLq7yIC5useAuLnFgLe4xYC1tsOAtLXBgLO0wICys7+AsLG+gK+wvYCur7yAra66gKusuICrq7eAqqq2gKqptICpqLOAqKeygKinsYCnpq+Ap6WugKakrYCmo6uApaKqgKWhqYCkoaiApKCngKSgpoCjn6WAo5+lgKOepICjnaOAo52igKKdooCinKGAoZuggKCboICgm5+AoJufgKCan4Cgmp+AoJqegKCZnoCfmZ2An5mdgJ+ZnYCfmZ2An5mdgJ+ZnYCfmZ2An5mdgJ+ZnYCfmZ2An5mdgKCZnYCgmZ2AoJmdgKCZnYCgmp2AoZqegKGanoChm56AopufgKKbn4Cim5+Ao5yfgKOcoICknaCApJ2hgKWeoYClnqKApp+igKafo4CnoKSAqKGkgKmipYCspamAraapgK6mqoCup6qAr6irgLCprICxqq2AsaqugLKrr4CzrLCAtK2xgLWusYC2r7OAt7CzgLixtYC5sraAurO3gLu0uIC8tbmAvba6gL63u4C/ubyAwLq9gMG7voDCvL+Aw73BgMS+woDFv8OAxsHEgMfBxYDIw8aAycPGgMrEyIDKxciAy8bJgMzGyoDMxsqAzcjLgM3IzIDOyMyAzsjMgM7IzIDOycyAzsnMgM3IzYDNyM2AzMjNgMzIzIDLx8yAysfMgMrGzIDJxsyAyMXLgMfEyoDGw8qAxcPKgMTByIDDwciAwb/HgMC/xoC/vcaAvbzFgLy7xIC7usOAurnCgLi4wYC3tsCAtra/gLW1voC1tL2As7O8gLKyu4CxsbqAsLC5gLCvuICvrreArq23gK2stoCsrLWArKu1gKuqtICqqrOAqqmzgKmosoCop7GAqKexgKemsICnprCApqawgKalr4Clpa+ApaSugKWkroClpK6ApKSugKSkroCkpK6ApKOugKSjroCko66Ao6OugKOjroCjo66Ao6OugKSjroCko66ApKOugKSjr4CkpK+ApKSvgKWksIClpbCApqWxgKamsYCmprKAp6eygKens4CoqLSAqam0gKmptYCqqraAqqu2gKurt4CsrLiAra25gK2uuoCurruAr6+8gLCwvYCxsb2AsrO/gLOzwIC0tMGAtbbCgLa2w4C3uMSAuLnGgLm6x4C6u8iAu7zJgLy9yoC9vsuAvr/MgL/BzYDBws+AwsPQgMPF0YDExdKAxcbTgMXH04DGyNSAx8jVgMjK1YDIyteAycvXgMrM2IDKzNiAy83ZgMvN2YDLzdmAy83ZgMvN2YDLzdmAy83ZgMrM2YDKzNiAyszXgMjK14DIytaAyMrVgMfI1YDGyNSAxcfTgMTG0oDDxdGAwsTQgMHCz4C/wc6Av8DMgL2/y4C8vcqAu7zIgLq7yIC5usaAuLjFgLa3xIC1tsOAtLXBgLO0wICys7+AsbK+gLCwvYCvr7uArq66gK2tuYCtrLeArKu2gKuqtYCrqrSAq6mzgKqosYCpp7CAqaavgKilrYCnpKyAp6SsgKekq4Cno6qAp6KpgKaiqICmoaeApqGmgKahpoCloKWApaClgKWfpICkn6OApJ6jgKSeooCknaKAo52igKOdooCjnaGAo52hgKOcoYCjnKGAo5yhgKOcoYCjnKGAo5yggKOcoICinKCAo5yggKOcoICjnKCAo52hgKOdoYCknaGApJ2hgKSdoYCknaGApZ6igKWeooCln6KApZ+igKafooCmn6OApqCjgKegpICooaSAqaGlgKmipoCqoqaAqqOmgKujp4CrpKiAr6irgK+orICwqa2AsaqugLKrroCzrK+As6ywgLStsYC1rrGAta+ygLaws4C3sbSAuLK1gLmztoC6tLeAu7S4gLy2uYC9trqAvri7gL+4vIDAub2AwLq+gMK7v4DCvcCAxL3BgMS/woDGwMOAxsDEgMfBxYDIwsaAyMPGgMnEyIDKxciAy8bJgMvGyYDMx8qAzcjLgM3Iy4DNyMyAzsnMgM7JzYDOyc2AzsnNgM7JzYDNyc2AzcnNgM3JzYDMyM2Ay8jNgMvIzYDKx82AycfMgMnGzIDIxcuAx8TLgMbEy4DFwsmAxMLJgMLByYDCwMiAwL/IgL++xoC9vcaAvbvFgLu7xIC6ucOAubnCgLi4wYC4t8CAtra/gLa1voC0tL2AtLO9gLOyu4CysbuAsbC6gLCvuYCwr7iAr664gK6ut4CurbeAray2gKystYCsq7WAq6q0gKqqtICqqbOAqqmzgKmosoCoqLKAqKexgKinsYCop7GAp6exgKensYCnp7GAp6exgKensYCnp7GAp6axgKemsYCnprGAp6axgKensYCnp7KAp6exgKensoCnp7KAp6eygKensoCoqLOAqKizgKmotICpqbSAqam1gKqqtYCrqraAq6u3gKyst4CsrLiAra24gK2tuYCurrqAr6+7gK+vu4CwsLyAsbG9gLKyvoCys7+As7TAgLS1wYC1tsKAtrfDgLe4xIC4ucaAubrGgLq7yIC7vMiAvL3JgL2/y4C+v8uAv8DNgMDBzYDBws+AwsTQgMPF0YDExtKAxcbTgMbI1IDGyNWAyMnVgMjJ1oDJyteAycvXgMnL2IDKzNiAy8zYgMvN2YDLzdmAy83ZgMvN2YDLzdmAy83ZgMvN2YDLzdiAy83YgMrM2IDJy9iAycvXgMjK14DIydaAx8nVgMbI1IDFx9OAxMbSgMTF0YDCxNCAwcLPgMDCzYC/wM2Avr/LgL2+y4C8vcmAu7zIgLm7x4C4ucaAuLjEgLa4xIC2tsKAtLXBgLS0wICys7+AsrK+gLGxvYCwsLuAsK+6gK+uuYCurbiArqy2gK2stYCtq7SArKqzgKupsoCrqLCAqqiwgKqnr4Cqp66AqqatgKmmrICppauAqaSrgKmkqoCpo6mAqaOogKijqICooqeAp6KmgKehpoCnoaaAp6GmgKehpYCmoKWApqClgKagpYCmoKWApqCkgKagpICmoKSApqCkgKagpICmoKSApqCkgKago4CmoKOApqCkgKagpICnoKSAp6CkgKegpICnoKSAp6GlgKihpYCooaWAqaKmgKmipoCpoqaAqaOmgKqjp4Cqo6eAq6SogKylqICspamAraapgK2mqoCtp6qArqergLGrroCyq6+As6ywgLStsIC0rrGAta6ygLavsoC2sLOAt7G0gLixtYC5sraAurO3gLu0uIC8tbmAvLa5gL23uoC+t7uAv7m8gMC5vYDAu76Awru/gMK8wIDEvcCAxL7CgMW/woDFwMSAx8DEgMfCxYDIwsWAycTHgMnEx4DLxcmAy8XJgMzHyoDNx8uAzcfLgM3Iy4DNycyAzsnNgM7JzYDOyc2AzsnNgM7KzYDOys6AzsrOgM3JzoDNyc6AzcnOgMzJzoDLyM6Ay8fNgMrHzYDJx82AyMXNgMfFzIDGxMuAxcTLgMXDy4DEwsmAwsHJgMHAyYDAv8eAv77HgL69x4C9vMWAvLvFgLu6xIC6ucOAubnCgLm3wYC3t8CAt7bAgLa1v4C1tL6AtLS9gLSzvICzsryAsrK7gLKxu4CxsLqAsbC5gLCvuYCvrriAr663gK6tt4CtrbaAray2gKystoCsq7WArKu1gKurtYCrqrWAq6q0gKuqtICqqrSAqqq0gKqqtICqqrSAqqq0gKqqtICqqrSAqqq0gKqptICqqbSAqqq0gKqqtICqqrWAqqq1gKqqtYCqqrWAq6u2gKurtoCsrLeArKy3gKysuICtrbiAra25gK6uuYCurrqAr6+6gK+wu4CwsLyAsbG9gLGyvYCysr6AsrO+gLO0wIC0tMCAtbXBgLa2woC3t8OAt7jEgLi5xYC5usaAurvHgLu8yIC8vcmAvb7KgL6/y4C/wM2AwMHNgMDCzoDCw8+AwsTQgMTF0YDExdKAxcfSgMXH1IDHyNSAx8nVgMjK1oDJy9aAycvXgMrM2IDLzdiAy83YgMvN2YDLzdmAy83ZgMzN2YDMztmAzM7agMzO2oDLzdmAy83ZgMvN2YDLzdiAy8zYgMnL14DJy9aAycrWgMfJ1YDHydSAxsjUgMXH04DFxtKAxMXRgMLE0IDCw8+AwMLOgMDBzYC+wMyAvr/LgL2+yoC8vcmAu7zIgLm7xoC5ucWAt7nEgLe3xIC2t8KAtbXBgLW1wYC0tMCAs7O+gLKyvYCxsbuAsbC6gLCvuYCwrriAr663gK+ttoCurLWArqu0gK2rs4CtqrKAramxgKypsICsqK+ArKiugKynroCrp62Aq6asgKumq4CrpauAqqWqgKqlqYCqpKmAqqSpgKqkqYCqpKiAqaOogKmjqICpo6eAqaOngKmjp4Cpo6eAqaOngKmjp4Cpo6eAqaOngKmjp4Cpo6eAqaOngKmjp4Cqo6eAqqOngKqjp4Cqo6eAqqSngKqkp4CqpKiAq6SogKylqYCspamArKWpgK2mqoCtpqqAraeqgK6nq4CvqKuAr6isgK+prICwqa2AsKqtgLGqroC0rbGAta6ygLWvsoC2r7OAt7C0gLextYC4srWAubK2gLmzt4C6tLeAu7W4gLy1uYC8trqAvre6gL64vIC/ubyAwLm9gMG6voDBu7+AwrzAgMO9wIDDvsGAxb/CgMXAw4DGwMSAx8HFgMfBxYDIw8aAycPHgMrFyIDKxcmAy8bJgMzHyoDMx8qAzcjLgM3IzIDOyMyAzsnMgM7JzYDOyc2AzsrNgM7KzoDOys6AzsrOgM7KzoDNys6AzcnOgMzJzoDMyc6AzMjOgMvIzoDKx86AycfOgMnHzYDIxsyAx8XMgMbEzIDFw8uAxMPKgMPCyoDCwcqAwcDJgMDAyYDAv8iAvr7HgL69x4C8vMWAvLvFgLq6w4C6usOAurnDgLm5wYC4t8GAt7fAgLe2wIC2tb+AtbW+gLW0voC0s72AtLO8gLOyvICysruAsrG7gLGwuoCwsLqAsK+5gLCvuYCvr7mAr664gK+uuICvrriArq24gK6tt4CtrbeAra23gK2tt4CtrbeAray3gK2st4CtrLeAray3gK2st4CsrLeArKy3gK2st4CtrbeAra24gK2tuICtrbiArq24gK6uuYCurrmAr6+5gK+vuoCvr7qAsLC7gLCwvICxsbyAsbG8gLKyvYCysr6As7O/gLO0v4C0tMCAtLXAgLW2wYC2t8KAt7fDgLe4w4C4ucWAubrFgLq6x4C6u8eAu7zIgLy9yYC9vsqAvr/LgL/AzIDAwcyAwcHOgMHCzoDCw9CAw8TQgMPF0YDFxtKAxcfTgMbH1IDHyNSAyMnVgMjK1YDJytaAysvXgMrM14DKzNeAy8zYgMvN2YDMztmAzM7ZgMzO2YDMztmAzM7ZgMzO2YDMztqAzM7ZgMzO2YDLzdmAy8zYgMrM2IDKzNeAysvXgMnK14DJytWAyMrVgMfJ1IDHyNSAxcfTgMXG0oDDxdGAw8TQgMLDz4DBw86AwMHOgMDBzIC+wMyAvr/KgLy+yYC8vMiAurvHgLq6x4C5ucWAuLnFgLe4w4C3t8OAtrbBgLW1wIC1tL+AtLO+gLOyvICzsryAsrG6gLKwuYCxsLmAsa+4gLCut4CwrraAsK21gLCttICvrLOAr6uygK+rsoCuqrGArqmwgK6pr4Ctqa6AraiugK2orYCtqK2AraesgK2nrICsp6yArKergKymq4CspqqArKaqgKymqoCspqqArKaqgKylqoCspqqArKaqgKymqoCspqqArKaqgKymqoCspqqArKaqgKymqoCtpqqAraeqgK2nqoCtp6qAraeqgK2nq4CuqKuAr6isgK+orICvqayAsKmtgLCqrYCxqq6AsaqugLKrr4Cyq6+AsqyvgLOssIC0rbCAt7C0gLextIC4sbWAuLK1gLmzt4C6s7eAurS4gLu1uIC8tbmAvLa6gL23uoC9t7uAv7i8gL+5vIDAur2Awbq+gMG8v4DDvL+Aw73BgMO9wYDFvsKAxb/DgMbAxIDGwcWAx8HFgMjDxoDIw8aAysTHgMrEyIDLxciAzMbKgMzGyoDMx8qAzMfLgM3IzIDOyMyAzsnMgM7JzYDOys2AzsrOgM7KzoDOys6AzsrPgM7Kz4DOys+AzcrPgM3Kz4DNys+AzMnPgMzJz4DLyM+AysjOgMrHzoDJx86AyMbNgMjGzYDHxcyAxsTMgMXDzIDEw8yAw8LKgMPByoDBwcqAwcDJgMC/yIC/v8iAvr3HgL29xoC9vMaAvLzFgLy7xYC6usSAurrDgLm4woC4uMGAuLfBgLe3wIC3t8CAtrW/gLW1v4C1tL6AtLS9gLSzvYCzs7yAs7K8gLOyvICysryAsrK7gLKxu4CxsbuAsbC6gLGwuoCwsLqAsLC6gLCwuoCwsLqAsK+6gLCvuoCwr7mAr6+5gK+vuYCvr7mAr6+5gK+vuoCwr7qAsK+6gLCwuoCwsLqAsLC7gLGwu4CxsLuAsbG8gLGxvICysryAsrK9gLKyvYCzs76As7O/gLO0v4C0tL+AtbXBgLW1wYC2tsKAt7fDgLe3w4C4uMSAuLjFgLm6xYC6usaAurvGgLu8yIC8vMiAvL3JgL29yoC+v8qAv7/MgL/BzIDBwc2AwcLOgMLDz4DDxM+Aw8XQgMTF0YDFxtKAxsbTgMbI04DGyNSAyMnVgMjK1YDJytaAysvXgMrM14DKzNiAy8zYgMzN2YDMzdmAzM7ZgMzO2YDMztqAzM7ZgMzO2YDMztmAzM7ZgMzO2YDMztmAzM3ZgMzN2YDLzdiAyszXgMrM14DKy9eAycvWgMjK1YDIydWAx8jUgMbI04DFxtOAxcbRgMTF0YDDxdCAw8TPgMHDzoDBws6AwMHNgL/AzIC+v8uAvb7KgLy9yYC8vMiAurvHgLq6xoC5usWAuLnEgLi4w4C3t8KAt7bBgLa1wIC1tb+AtbS+gLWzvYC0s7yAtLK7gLOxuoCzsbmAs7C4gLKwuICyr7eAsq+2gLKutYCxrrWAsa20gLGts4CxrLOAsKyygLCssYCwq7GAsKuwgLCrsICwqq+AsKqvgK+qroCvqq6Ar6mugK+proCvqa6Ar6mugK+prYCvqK2Ar6itgK+prYCvqa2Ar6mtgK+prYCvqa2Ar6mtgK+prYCvqa2AsKmtgLCqrYCwqq6AsKqugLCqroCwqq6AsaqugLGrr4Cyq6+AsquvgLKssICzrbCAs62wgLStsYC0rrGAta6ygLWusoC2r7OAtrCzgLmztoC6s7eAurS3gLu1uIC7tbiAvLa5gLy2uoC9trqAvbi7gL+4u4C/uLyAv7q9gMG6vYDBu7+Awru/gMK8wIDCvcGAxL3BgMS/woDEv8KAxsDDgMbBxIDHwcSAyMLGgMjCxoDJw8eAysTIgMrEyIDLxsmAy8bJgMvGyoDMx8qAzcjLgM3Iy4DNyMyAzsnMgM7JzYDOyc2AzsnNgM7KzoDOys+AzsrPgM7Kz4DOys+AzcrPgM3Kz4DNys+AzcnPgMzJz4DMyc+Ay8jPgMrIz4DKyM+AycfOgMnHzoDIxs2AyMbNgMbFzYDGxM2AxcTMgMTDy4DDwsuAwsLLgMLByoDBwcqAwcDJgMC/yIC/v8iAv77IgL29xoC9vcaAvLvGgLu7xIC7u8SAu7rEgLq6w4C6ucKAubjCgLi4wYC4t8GAt7bBgLa2wIC2tr+AtrW/gLW1v4C1tb6AtbS+gLW0vYC0s72As7O9gLOzvYCzs72As7O9gLOyvICzsryAs7K8gLOyvICysryAsrK8gLKyvICysryAsrK8gLKyvICysr2AsrK9gLKyvYCzsr2As7O9gLOzvoCzs76As7O+gLOzv4C0tL+AtLS/gLW1v4C1tcCAtbXBgLa2wYC2tsGAtrbCgLe3woC4uMOAuLnEgLm5xIC6usWAurrGgLq7xoC7u8eAu7zIgLy9yIC9vcqAvb/KgL6/yoC/v8uAv8HMgMHBzYDBws2AwsLPgMLEz4DDxNCAxMXRgMTG0YDGxtOAxsfTgMfI04DIyNSAyMnVgMjK1YDJytaAycvWgMrL14DLzNiAy8zYgMvN2IDLzdmAzM3ZgMzN2YDMztmAzM7ZgMzO2YDNztqAzc7ZgMzO2YDMztmAzM7ZgMzN2YDMzdmAy83YgMvM2IDKzNeAysvXgMnL1oDJytaAyMrVgMjJ1YDHyNSAxsjTgMbH04DFxtKAxMbRgMTE0YDDxM+AwsPPgMHCzoDBwc2Av8HMgL/Ay4C+v8uAvb7KgLy9yYC7vMiAu7vHgLq7xoC6usWAubrEgLm4w4C4uMKAuLfBgLi2wYC3tsCAtrW/gLa1voC2tL2AtbO8gLWzu4C1srqAtbG6gLSxuYCzsLiAs7C3gLOwt4Czr7aAs6+2gLOvtYCzr7WAs660gLOutICzrrOAs62ygLKtsoCyrbGAsqyxgLKssYCyrLGAsqyxgLKssICyrLCAsqywgLKssICyrLCAsqywgLKrsICyrLCAsqywgLKssICyrLCAsqywgLKssICzrLCAs62wgLOtsYCzrbGAs62xgLStsYC0rrGAtK6ygLSusoC1rrKAta+zgLavs4C2sLOAtrC0gLextIC4sbWAuLG1gLiytoC7tbmAvLa5gL22uYC9trqAvbe7gL64u4C/uLyAv7m9gMC5vYDAub2AwLu/gMG7v4DCvL+Awr3AgMS9wIDEvsKAxL/CgMa/woDGwMSAxsDEgMfBxYDHwsaAx8LGgMnDx4DJxMeAysTIgMvGyYDLxsmAy8bJgMzGyoDMx8uAzcfLgM3Iy4DNyMyAzsnNgM7JzYDOyc2AzsnOgM7KzoDOys+AzsrPgM7Kz4DOys+AzcrPgM3Kz4DNytCAzcrQgM3K0IDNydCAzMnPgMvJz4DLyM+AysjPgMnHz4DJx8+AyMfOgMfGzoDHxs2Ax8bNgMbFzYDFxM2AxMTNgMTDzIDCwsuAwsLLgMLBy4DAwMmAwMDJgMC/yYC/v8iAv7/HgL69x4C9vcaAvb3GgL28xoC8u8aAu7vEgLu6xIC6ucSAubnDgLm5woC5uMKAuLjCgLi4wYC4t8GAt7fBgLe2wIC2tsCAtrbAgLa2wIC2tr+AtrW/gLa1v4C1tb+AtbW/gLW1v4C1tL+AtbS/gLW0v4C1tL+AtbS/gLW0v4C1tL+AtbS/gLW1v4C1tb+AtbXAgLa1wIC2tsCAtrbAgLa2wIC2tsGAtrbBgLa2woC3t8KAt7fCgLi4woC4uMOAuLjEgLm5xIC5ucWAurrGgLu7xoC7u8eAu7zHgLy9x4C9vciAvb3JgL2+yYC/v8uAv7/LgL/Ay4DAwMyAwMHNgMHCzYDCws6AwsTPgMPE0IDExdCAxMbQgMXG0oDGx9KAxsfTgMfI1IDHydSAyMnVgMnK1oDJy9aAycvWgMrL14DLzNeAy8zYgMvN2IDMzdmAzM3ZgMzO2YDNztmAzc7ZgM3O2YDNztqAzc7agM3O2oDNztqAzc7ZgMzO2YDMztmAzM3ZgMzN2IDLzdiAy83YgMvM2IDKy9eAycvWgMnL1oDJytaAyMnUgMfJ1IDHx9SAxsfSgMbH0oDFxtKAxMbQgMTE0IDCxM+AwsPPgMLCzYDAws2AwMDMgL/Ay4C/v8uAvb/JgL29yYC9vciAu7zHgLu7xoC7u8aAurrEgLq5xIC5ucOAubjCgLm4wYC4t8CAuLa/gLi2v4C3tb6At7S9gLa0vIC2s7uAtrO6gLazuoC2srmAtrK5gLayuIC2sbiAtrG4gLWxt4C1sbaAtbC2gLWwtYC1sLWAta+0gLWvtIC1r7SAtK+zgLWvs4C0r7OAta+zgLWvs4C1r7OAta+zgLWvs4C0rrKAtK6zgLWvs4C1r7OAta+zgLWvs4C1r7OAta+zgLWvs4C2sLOAtrCzgLawtIC2sLSAtrC0gLextIC3sbWAuLG1gLiytYC4sraAubK2gLmztoC5s7eAubO3gLq0uIC7tLiAvri7gL64u4C+uLyAv7m9gMC5vYDAub2AwLq+gMC7voDCu76Awru/gMK9wIDDvcCAxL7BgMS+woDFvsKAxcDEgMXAxIDHwMSAx8HFgMfCxYDIwsaAycPHgMnEx4DKxMeAy8XJgMvFyYDLxsmAzMfKgMzHy4DMx8uAzMfLgM3IzIDNycyAzsnMgM7JzYDOyc6AzsnOgM7KzoDOy8+AzsvPgM7L0IDOy9CAzsvQgM7L0IDNytCAzcrQgM3K0IDNytCAzMrQgMzJ0IDMydCAy8nQgMvJ0IDKyNCAycjPgMnHz4DJx86AyMfOgMfGzoDHxc6AxsXOgMXFzoDFxM2AxMTMgMTDzIDDwsyAwsLLgMLCy4DCwMuAwMDKgMDAyYDAv8mAv77JgL6+yIC+vseAvr3HgL69x4C9vcaAvbzFgLy7xYC7u8WAu7vEgLu6xIC7usSAurnEgLq5xIC5ucOAubjCgLm4woC4uMKAuLjCgLi4woC4uMKAuLjCgLi4woC4uMKAuLfBgLi3wYC4t8GAuLfBgLi3wYC3t8GAuLfCgLi3woC4t8KAuLjCgLi4woC4uMKAuLjDgLi4w4C5uMOAubnEgLm5xIC5ucSAubnEgLm6xYC6usWAu7vFgLu7xoC7u8eAu7zHgLy9x4C9vcmAvb7JgL6+yYC+vsmAvr7KgL/Ay4DAwMuAwMDMgMHCzIDCws2AwsLOgMLDzoDDxM6AxMTQgMTF0IDExdCAxcXRgMXH0oDGx9KAx8fUgMfJ1IDIydSAycnVgMnK1YDJy9aAysvWgMvL14DLzNeAy8zXgMvM2IDMzdiAzM3ZgMzO2YDMztmAzc7ZgM3O2YDNztmAzc7agM3O2oDNztqAzc7agM3O2YDMztmAzM3ZgMzN2YDMzdiAzM3YgMvM2IDLzNeAy8zXgMrL14DKy9aAycvWgMnK1YDIydWAx8nUgMfI1IDHx9OAxsfSgMXG0oDFxdGAxMXQgMTE0IDDxM+AwsPOgMLCzoDAwsyAwMDMgMDAy4C+v8uAvr/KgL6+yYC9vciAvb3HgL29x4C9u8WAvLvFgLu7xIC7usSAu7nDgLq5woC6uMGAubjAgLm3wIC5t7+Auba+gLi2voC4tb2AuLW8gLi0vIC4tLuAuLS7gLi0uoC4s7qAuLO5gLizuYC4s7iAuLO4gLiyuIC4sreAuLK3gLeyt4C3sbaAt7G2gLextoC4sbaAuLG2gLextoC4sbaAt7G2gLextoC4sbaAt7G1gLixtoC4sraAuLK2gLiytoC4sraAuLK2gLiytoC5s7aAubO3gLmzt4C5s7eAurS4gLq0uIC6tLiAu7S4gLu0uIC7tbmAvLa5gLy2uYC9trqAvbe7gMC5vYDAur6AwLu+gMG7voDCu7+AwrzAgMK8wIDDvMCAw73BgMO+woDEvsKAxb7CgMXAw4DGwMOAx8DEgMfBxYDHwsWAyMLFgMnDx4DJw8eAycPHgMrFyIDKxcmAysXJgMvFyYDMxsqAzMfKgMzHyoDNx8uAzcjMgM7IzIDOycyAzsnNgM7JzoDOys6AzsrOgM7Kz4DOys+Az8rQgM/L0IDPy9CAzsvQgM7L0IDOy9CAzsrQgM7K0YDNytCAzcrRgM3K0YDMytGAzMrRgMzK0YDLydCAysnQgMrJ0IDKyNCAycjQgMnH0IDIx9CAx8fQgMfHz4DHxc6AxsXOgMXFzoDFxM6AxMPNgMPDzIDDw8yAw8LMgMLCy4DCwsqAwsLKgMLAyoDAwMqAwMDJgMDAyYDAvsmAv77JgL6+yIC+vseAvr3HgL28x4C8vMaAvLzGgLy8xoC8vMWAvLvFgLy7xYC7u8WAu7vFgLu7xYC7u8WAu7rFgLu6xYC7usSAu7rEgLq6xIC6usSAurnEgLq5xIC5ucSAubnEgLq5xIC6ucSAurrFgLq6xYC6usWAu7rFgLu7xYC7u8WAu7vFgLu7xYC7u8aAvLzHgLy8x4C8vMeAvLzHgLy9yIC9vcmAvr7JgL6+yYC+vsqAvr/KgMDAyoDAwMuAwMDMgMDBzIDBwsyAwsLNgMLDzoDCw86Aw8PPgMPE0IDDxdCAxcXQgMXF0YDFx9GAxcfRgMfH0oDHx9OAx8jTgMjJ1IDJydWAycrVgMnK1YDKytaAysvXgMrM14DLzNeAy8zYgMzN2IDMzdmAzM3ZgMzO2YDMztmAzc7ZgM3O2oDOz9qAzs/agM7P2oDOz9qAzc7agM3O2oDNztmAzc7ZgMzO2YDMztmAzM7ZgMzN2YDMzdiAy83YgMvM14DKzNeAysvXgMrL1oDJytWAycrVgMjJ1YDIydSAx8jTgMfI04DHx9OAxsfRgMXG0YDFxdGAxMXQgMPE0IDDw86AwsPOgMLCzoDCwsyAwMLMgMDBzIDAwMuAwMDKgL6+yYC+vsmAvr7IgL69x4C+vMeAvbzFgLy7xYC8u8SAvLvDgLy6w4C7ucKAu7nCgLu5wYC7uMCAu7e/gLu3v4C7t76Aure+gLq2vYC5tr2Aura8gLm2vIC5tryAubW7gLm1u4C5tbqAubW6gLm0uYC5tLmAubS5gLm0uYC5tLmAurS5gLq0uIC6tLiAurS4gLq0uIC6tLiAurS4gLq0uIC6tLiAurS4gLu0uIC7tLmAu7S5gLu0uYC7tbmAu7W5gLy2uoC8trqAvLa6gLy2uoC8trqAvLa6gLy3u4C9t7uAvre7gL64u4C+uLyAvrm8gL+5vIDBu8CAwbzAgMO8wIDDvcGAw77BgMO+wYDEvsGAxb7CgMXAw4DFwMOAxsDDgMbBxYDGwcWAx8HFgMjCxoDIw8aAyMPGgMnDxoDKxMiAysXIgMrFyIDLxcmAy8bJgMzGyoDMxsqAzMbKgM3HzIDNyMyAzcjMgM3IzIDOyc2AzsnOgM7KzoDOys6AzsrPgM/Kz4DPys+Az8vPgM/L0IDPy9CAz8vRgM/L0YDOy9GAzsvRgM7L0YDOy9GAzsvRgM3L0YDNy9GAzcrRgM3K0YDMytGAzMrRgMzK0YDLydGAysnRgMrI0YDKyNCAycjQgMjI0IDIx8+AyMbPgMbGz4DGxs+AxsXPgMXFzoDFxc6AxcXOgMTDzYDDw8yAw8PMgMPDzIDDwsyAwsHMgMHBy4DBwcqAwcDKgMHAyoDAwMqAwMDJgMC/yIDAvsiAv77IgL6+yIC+vsiAvr7IgL6+yIC+vseAvr3HgL68x4C9vMaAvbzGgLy8xoC8vMaAvLzGgLy8xoC8vMaAvLzGgLy8xoC8vMaAvLzGgLy8xoC8vMaAvLzGgLy8xoC8vMaAvLzGgLy8x4C8vMeAvbzIgL29yIC+vsiAvr7IgL6+yIC+vsiAvr7KgL+/yoC/v8qAwMDKgMDAyoDAwMuAwMDMgMHBzIDBwcyAwcHNgMHCzoDDw86Aw8POgMPDz4DDxM+AxMXPgMXFz4DFxdGAxcbRgMbG0YDGxtKAxsjTgMfI04DIyNOAyMjVgMjK1YDIytWAysrVgMrL1oDKzNeAyszXgMvM14DMzNeAzM3YgMzN2IDMzdiAzM3YgMzO2YDNztmAzc7ZgM3O2oDNz9qAzc/agM3P2oDNz9qAzc/agM3P2oDNz9qAzc/agM3P2oDNztqAzc7ZgM3O2IDMztiAzM3YgMzN2IDMzdiAzMzXgMvM14DKzNeAysvXgMrK1oDJytWAyMrVgMjJ1IDIyNSAx8jTgMbI04DGx9OAxsbRgMXG0YDFxdGAxcXPgMPFz4DDw8+Aw8POgMLDzoDCw86AwcHNgMHBzIDAwMuAwMDKgMDAyoDAv8iAwL7IgL++x4C+vcaAvrzGgL68xYC+vMWAvrzEgL67w4C9u8OAvbvDgLy6woC8usGAvLnBgLy5wIC8ucCAvLnAgLy4v4C8uL+AvLe+gLy3voC8t72AvLe9gLy3vIC8t7yAvLe8gLy3vIC8t7yAvLe8gLy3u4C8t7uAvLe7gLy3u4C8t7uAvLe7gLy3u4C8t7uAvLe7gLy3u4C8t7uAvLe7gL23u4C9t7uAvre7gL64vIC+uLyAvri8gL65vIC/ubyAv7m8gL+5vIC/ub2AwLq+gMC6voDBu76Awbu+gMG7v4DBu7+Aw77BgMS+wYDFvsKAxb/DgMW/w4DGv8OAxsDEgMbBxYDGwcWAx8HFgMjBxYDIw8aAyMPGgMnDxoDKxMiAysTIgMrFyIDKxciAy8XJgMzGyoDMxsqAzMbKgMzGyoDMx8uAzcjMgM3IzIDNyM2AzcjNgM3JzYDOys2AzsrOgM7Kz4DOys+Az8rPgM/Lz4DPy9CAz8vRgM/L0YDPy9GAz8zRgM/M0YDPzNGAz8zRgM/M0YDPzNKAzszSgM7L0oDOy9KAzcvSgM3L0oDNy9KAzcrSgMzK0oDMytKAzMrRgMvK0YDLytGAysnRgMrI0YDKyNGAycjRgMjI0YDIyNGAyMfRgMfG0YDGxs+AxsbPgMbGz4DGxc+AxcXOgMXFzYDFxc2AxcTNgMTDzYDDw82Aw8PMgMPDzIDDwsyAwsHMgMHBzIDBwcuAwcHKgMHByoDBwMqAwcDKgMG/yoDAv8qAv7/KgL+/yoC/v8mAv7/JgL+/yYC/v8iAv7/IgL+/yIC/vsiAv77IgL++yIC/v8iAv7/JgL+/yYC/v8mAv7/JgL+/yYC/v8mAv7/JgL+/yYC/v8mAv7/KgL+/yoC/v8qAv7/KgL+/yoDAwMqAwMDLgMHBzIDBwcyAwcHMgMHBzIDBws2AwsLNgMPDzYDDw82Aw8POgMPDz4DDxM+AxMXPgMXFz4DFxdCAxcXRgMXG0YDGxtGAxsbSgMbI04DGyNOAyMjTgMjI1IDIydSAyMrUgMrK1IDKytaAysvWgMrL1oDLzNaAy8zXgMzM14DMzdiAzM3YgMzN2IDMzdiAzc3YgM3O2YDNztmAzc7ZgM3O2oDNz9qAzs/agM7P2oDOz9qAzs/agM7P2oDOz9qAzs/agM7P2oDOz9qAzc/agM3O2oDNztmAzc7ZgM3O2YDNzdiAzM3YgMzN2IDMzdiAzMzXgMvM14DKy9aAysvWgMrK1YDJytSAyMrUgMjJ1IDIyNSAyMjTgMfI04DGx9OAxsbRgMbG0YDFxtGAxcXRgMXFz4DFxc+AxMTPgMPDzoDDw82Aw8LNgMLBzIDBwcyAwcHLgMHByoDBwMqAwb/JgMG/yIDAv8iAwL7HgMC+xoC/vsaAv73FgL+9xYC/vMWAv7zEgL+8w4C/vMOAvrvCgL67woC+u8GAvrrBgL66wYC+usGAvrrAgL66wIC+usCAvrq/gL66v4C+ub+Avrm/gL65v4C+ub6Avrm+gL+5voC/ub6Av7m+gL+5voC/ub6Av7m+gL+6voC/ur6Av7q+gL+5voC/ur6Av7q+gMC6voDAur6AwLq+gMC6voDBur6Awbu/gMG7v4DBvL+Awry/gMK8wIDDvMCAw73BgMO9wYDDvsGAw77BgMbAxIDGwMSAxsHEgMfBxIDIwcWAyMLGgMjDxoDIw8aAyMPGgMnDxoDKw8eAysTIgMrEyIDKxMiAy8TIgMvGyYDLxsqAy8bKgMzGy4DMx8uAzcjLgM3Iy4DNyMyAzcjNgM3IzYDOyc2AzsnNgM7Kz4DPys+Az8rPgM/Kz4DPy8+Az8vQgM/L0YDPy9GAz8vRgM/L0YDPy9GAz8zSgM/M0oDPzNKAz8zSgM/M0oDPzNKAz8zSgM/M0oDPzNKAzszSgM7L0oDNy9KAzcvSgM3L0oDNy9KAzcvSgMzL0oDMytKAy8rSgMvK0oDLytKAysrSgMrK0oDKydKAycjSgMnI0oDIyNGAyMjRgMjI0YDIyNGAyMbRgMfG0YDGxs+AxsbPgMbGz4DGxM+AxsTPgMTEzoDExM6AxMTNgMTDzYDEw82AxMPNgMPDzYDDw82Aw8PMgMPDy4DDwsuAw8HLgMLBy4DCwcuAwsHLgMHBy4DCwcuAwcHLgMHBy4DBwcuAwcHLgMHBy4DBwcuAwcHLgMHBy4DBwcuAwcHLgMHBy4DBwcuAwcHLgMHBy4DBwcuAwcHLgMHBzIDCwsyAwsLNgMLCzYDCws2AwsLNgMPDzYDDw82Aw8POgMPDzoDDw8+AxMTPgMTEz4DExM+AxMTPgMTF0YDFxtGAxcbRgMbG0YDGxtGAxsbRgMbH0oDHyNKAyMjSgMjI04DIyNSAyMrUgMjK1IDJytSAysrVgMrK1oDKy9aAy8vWgMvL14DLzNeAy83YgMzN2IDMzdiAzc3YgM3N2YDNztmAzc7ZgM3P2YDNz9mAzc/agM3P2oDOz9qAzs/agM7P2oDOz9qAzs/agM7P2oDOz9qAzs/agM7P2oDOz9qAzs/agM7P2oDOz9qAzc/agM3P2YDNztmAzc7ZgM3O2YDNztmAzc3ZgMzN2IDLzdiAy8zXgMvL1oDLy9aAysvWgMrL1oDKytaAysrUgMnK1IDIytSAyMjUgMjI04DIyNKAxsjSgMbG0oDGxtGAxsbRgMbG0YDFxdCAxMTPgMTEz4DEw82AxMPNgMPDzYDDw8yAw8PLgMPCy4DDwcuAw8HKgMPByoDDwMmAwsDJgMK/yIDBv8iAwb/HgMG/xoDBvsaAwb7GgMG+xYDBvsWAwb7EgMG9xIDBvcSAwbzDgMG8w4DBvMOAwbzDgMG8woDBvMKAwbzCgMG8woDBvMGAwbzBgMG8wYDBvMGAwbzBgMG8wYDBvMGAwbzBgMG8wYDBvMGAwbzAgMG8wIDCvMCAwrzAgMK8wYDDvMGAw73BgMO9wYDDvcGAw73BgMO+wYDDvsGAxL7CgMS+woDEvsOAxL/DgMS/w4DFv8OAxb/DgMa/w4DIwsaAyMLGgMjCx4DJwseAycPIgMnEyIDJxMiAycTIgMnEyIDKxMmAy8XJgMvGyYDLxsqAy8bKgMzGy4DNyMuAzcjLgM3IzYDNyM2AzcjNgM3JzYDNyc2AzsnNgM7JzoDOyc+Az8nPgM/Kz4DPys+Az8vQgM/L0IDPy9CAz8vQgNDL0IDQzNKA0MzSgNDN0oDQzdKA0M3SgNDN0oDQzdKA0M3TgNDN04DQzdSAz83UgM/N1IDPzdSAz83UgM/N1IDOzdSAzszUgM7M1IDNzNSAzcvUgM3L1IDNy9SAzcvUgMzL04DMy9OAy8vUgMvK04DLytOAy8nTgMrJ0oDJydKAycnSgMnJ0oDJydKAycnSgMnI0oDIyNKAyMjQgMjI0IDIx9CAyMbQgMjG0IDHxtCAxsbQgMbG0IDGxs+AxsbPgMbFz4DFxM+AxcTPgMTEz4DExM+AxMTOgMTEzoDExM6AxMTNgMTEzoDExM2AxMTNgMTDzYDDw82Aw8LNgMLCzYDCws2Aw8LNgMPCzYDDws2Aw8LNgMPCzYDDw82Aw8PNgMPDzYDDw82AxMPOgMTEz4DExM+AxMTPgMTEz4DExM+AxMTPgMTEz4DExM+AxMXPgMXF0IDFxtCAxsbQgMbG0IDGxtCAxsbRgMbH0oDHyNKAyMjSgMjI0oDIyNKAyMjSgMjI0oDIyNSAycnUgMnJ1IDJydSAycrVgMnL1oDJy9aAysvWgMvL1oDLy9aAy8vXgMvM14DLzdiAzM3YgM3N2IDNzdiAzc7ZgM3O2YDNztmAzs/ZgM7P2YDOz9mAzs/ZgM7P2YDOz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/Q2oDP0NqAz9DagM/Q2oDOz9qAzs/agM7P2oDOz9mAzc/ZgM3P2YDNztmAzc7ZgM3O2YDNztmAzc3YgM3N2IDMzdiAy83YgMvM14DLy9eAy8vWgMvL1oDKy9aAycrWgMnJ1YDJydSAyMnUgMjI1IDIyNKAyMjSgMfH0oDHyNKAx8fSgMbG0IDGxtCAxsbQgMbEz4DGxM+AxcTPgMXEzoDExM2AxMPNgMTCzIDEwsuAxMLLgMTCy4DEwsuAxMLKgMTByYDDwcmAw8HIgMPAyIDDwMiAw8DIgMPAx4DCv8eAwr/GgMK/xoDCv8aAwr/FgMK/xYDCv8WAwr/EgMK/xIDCv8SAwr/EgMK/xIDCv8SAwr/EgMK+xIDCvsSAw77DgMO+w4DDvsOAw77DgMS/w4DEv8OAxL/DgMS/xIDEv8OAxL/DgMS/w4DEv8SAxL/EgMW/xIDGv8SAxsDEgMbAxIDGwcSAxsHEgMbBxIDHwcWAyMHFgMjBxYDIwsaAycTIgMnEyYDJxMmAy8TJgMvFyYDLxsmAy8bJgMvGyoDLxsuAy8bLgM3Hy4DNx8uAzcfMgM3HzYDNyM2AzcnNgM7JzYDOyc6AzsnOgM7JzoDOyc6AzsnOgM7Lz4DOy9CAz8vQgM/L0IDPy9CAz8vQgNDL0YDQzNKA0MzSgNDM0oDQzdKA0M3SgNDN04DQzdSA0M3UgNDN1IDQzdSA0M3UgNDN1IDQzdSA0M3UgNDN1IDQzdSA0M3UgM/N1IDPzdSAz83UgM7N1IDOzdSAzs3UgM7N1IDOzdSAzs3UgM3N1IDNzNSAzczUgM3L1IDNy9SAzcvUgMzL1IDLy9SAy8vUgMvL1IDLytSAy8rUgMvJ1IDKydSAycnSgMnJ0oDJydKAycnSgMnI0oDJx9KAycfSgMfH0oDHx9KAx8fSgMfH0IDHx9CAx8fQgMfG0IDHxtCAx8bQgMbG0IDGxtCAxsbQgMbG0IDGxtCAxsbQgMbG0IDGxtCAxsbPgMbFz4DFxc+AxcXPgMXFz4DGxc+AxsXPgMbFz4DGxdCAxsbQgMbG0IDGxtCAxsbQgMbG0IDGxtCAxsbQgMbG0IDGxtCAxsbQgMbG0IDGxtGAx8fRgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8jTgMjI04DJydSAycnUgMnJ1IDJydSAycnUgMnJ1IDJydSAycrVgMrL1YDLy9WAy8vVgMvL1YDLy9aAy8zXgMvM14DMzdeAzM3XgM3N14DNzdeAzc3YgM3O2YDNztmAzc7ZgM7O2YDOztmAzs/agM7P2oDOz9uAztDbgM/Q24DO0NuAz9DbgM/Q24DP0NuAz9DbgM/Q24DP0NuAz9DbgM/Q24DP0NuAz9DbgM/Q24DP0NuAz9DbgM7Q24DOz9qAzs/agM7P2oDOz9qAzs/agM7P2YDOztmAzs7ZgM7O2YDNztmAzc7ZgM3N2IDNzdeAzM3XgMzN14DLzNeAy8zXgMvL1oDLy9WAysvVgMnK1YDJydSAycnUgMnJ1IDIydSAyMnUgMjI04DHx9KAx8fSgMfH0oDHx9GAx8bQgMfG0IDHxtCAx8bPgMbGzoDGxc6AxsTOgMbEzYDGxM2AxsTNgMbEzIDGxMuAxsPLgMbDy4DGw8uAxsLKgMbCyoDGwsmAxcLJgMXCyYDFwsmAxcLJgMXByIDEwciAxMHIgMXBx4DFwceAxcHHgMXBx4DFwceAxcHHgMXBxoDFwcaAxcHGgMbBxoDGwcaAxsHGgMbBxoDGwcaAxsHGgMbBxoDGwcaAxsHGgMbBxoDHwcaAx8LGgMfCxoDHwsaAx8LHgMfCx4DHwseAyMLHgMjCx4DJw8eAycPHgMnDx4DJxMiAycTIgMvGy4DLx8uAzMfLgMzHy4DMx8yAzMfMgMzHzIDMx8yAzMjMgM3JzYDOyc2AzsnOgM7JzoDOyc6AzsnOgM7JzoDOy8+AzsvQgM/L0IDPy9CA0MvQgNDL0IDQy9GA0MzSgNDM0oDQzNKA0MzSgNDM0oDQzNKA0MzSgNDM04DRzdOA0c3TgNHN04DRztOA0c7UgNHO1IDRztWA0c7VgNHO1YDRztWA0c7VgNDO1YDQztWA0M7VgNDO1YDQztWA0M7VgNDO1YDQztWA0M7VgM/O1YDPztWAz87VgM7N1YDOzdWAzszVgM7M1YDOzNWAzszVgM3M1YDMzNWAzMzVgMzM1YDMy9WAzMvVgMvL1YDLy9WAy8vUgMvL04DLy9OAy8vTgMvL04DLytOAy8nTgMvJ04DJydOAycnTgMnJ04DJydKAycnSgMnJ0oDJydKAycnSgMnI0oDIx9KAyMfSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAx8fSgMfH0oDHx9KAyMfSgMjI0oDIyNOAycnTgMnJ04DJydOAycnTgMnJ04DJydOAycnTgMnK1IDJytWAy8vVgMvL1YDLy9WAy8vVgMvL1YDLy9WAy8vVgMvM14DLzNeAzMzXgMzM14DMzNeAzMzXgMzM14DMzdiAzM7ZgM3O2YDOztmAzs7ZgM7O2YDOztmAzs/agM7P2oDO0NuAztDbgM/Q24DP0NuAz9DbgNDQ24DQ0NuA0NDbgNDQ24DQ0NuA0NDbgNDQ24DQ0duA0NHbgNDR24DQ0duA0NHbgNDR24DQ0duA0NDbgNDQ24DQ0NuA0NDbgM/Q24DP0NuAz9DbgM/Q24DP0NuAztDagM7P2oDOz9qAzs/agM7O2YDOztmAzc7ZgM3O2YDMzdiAzM3YgMzM14DMzNeAzMzXgMvM14DLy9aAy8vVgMvL1YDLy9WAysvVgMrL1YDKytWAysrUgMnJ04DJydOAycnTgMnJ0oDJyNKAycfSgMnH0YDIx9CAyMfQgMfH0IDHxs+Ax8bOgMfGzoDHxs6Ax8bOgMfGzoDHxs6Ax8bNgMfFzYDHxcyAx8XMgMfEzIDHxMyAx8TLgMfEy4DHxMuAx8TLgMfEyoDHxMqAx8TKgMfEyoDHxMqAx8TKgMfDyYDHw8mAx8LJgMfCyYDHwsmAx8PJgMfDyYDHw8mAx8PJgMfEyYDHxMmAyMTJgMnEyYDJxMmAycTJgMnEyYDJxMmAycTJgMnEyYDJxMmAycTJgMnFyYDJxcmAy8bJgMvGyoDLxsqAy8bLgMvGy4DMyc6AzcnOgM7JzoDOyc6AzsnOgM7JzoDOyc6AzsnOgM7Kz4DOy8+AzsvQgM7L0IDOy9CAz8vQgNDL0IDQy9CA0MvRgNDM0oDQzNKA0MzSgNDM0oDRzNKA0czTgNHM04DQzNOA0c3TgNHN04DRztOA0c7TgNHO04DRztOA0s7VgNLO1YDSztWA0s7VgNLO1YDSztWA0s/VgNLO1YDSztWA0s7VgNLO1YDRztaA0c/WgNHP14DRz9eA0c/XgNHP14DRz9eA0M7XgNDO14DQzteA0M7XgNDO14DQzteA0M7XgNDO14DQzteAz87XgM7O14DOzteAzs7XgM7O14DOzdeAzszXgM3M14DMzNeAzMzVgMzM1YDMzNWAzMzVgMzM1YDMzNWAzMzVgMzM1YDMy9WAy8vVgMvL1YDLy9WAy8vVgMvL1IDLy9SAy8vTgMvL04DLy9OAy8rTgMvK04DKydOAysnTgMnJ04DJydOAycnTgMrJ04DKydOAysnTgMrJ04DKydOAysnTgMrJ04DKydOAysnTgMrJ04DKydOAycnTgMnJ04DKytOAysrUgMrK1IDKytSAysrUgMvL1IDLy9SAy8vVgMvL1YDLy9WAy8vVgMvL1YDLy9WAy8vVgMvL1YDLy9WAy8vVgMvM1oDMzNeAzMzXgMzM14DMzNeAzMzXgMzM14DMztiAzM7ZgM3O2YDOztmAzs7ZgM7O2YDOztmAzs7ZgM7P2YDO0NqAz9DagNDQ2oDQ0NqA0NDagNDQ2oDQ0NuA0NDbgNDQ24DQ0duA0NHbgNDR24DQ0dyA0NHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dLcgNHS3IDR0tyA0dLcgNHS3IDR0tyA0dLcgNHS3IDQ0tyA0NHcgNDR3IDQ0duA0NHbgNDR24DQ0NuA0NDbgNDQ24DQ0NqA0NDagM/Q2oDO0NqAzs/agM7P2YDOztmAzs7ZgM7O2YDOztmAzs7ZgMzO2YDMztiAzMzXgMzM14DMzNeAzMzXgMzM14DMzNeAzMzXgMzL1YDLy9WAy8vVgMvL1YDLy9OAy8rTgMvJ04DLydOAy8nSgMvJ0oDKydKAycnSgMnI0YDJyNGAycfQgMnH0IDJx9CAycfQgMnH0IDJx9CAycfPgMnHz4DJx86AycfOgMnGzoDJxs6AycbNgMnGzYDJxs2AycXNgMnGzYDJxs2AycXNgMnGzIDJxcyAycXMgMnFy4DJxcuAycXLgMnFy4DJxcuAycXLgMrFy4DKxcuAysXLgMvFy4DLxcuAy8XLgMvFy4DLxsyAy8bMgMvHzIDLx8yAy8fMgMvHzIDLx8yAy8fMgMzHzIDMx8yAzMfNgMzHzYDMyM2AzsrQgM7K0IDPytCAz8rQgM/K0IDPytCAz8rQgNDK0YDQytGA0MzRgNDM0YDQzNGA0MzRgNDM0YDQzNKA0czTgNHM04DRzdOA0c7TgNHO04DRztOA0c7UgNHO1YDRztWA0c7VgNHO1YDRztWA0c7VgNLP1YDSz9WA0s/VgNLP1YDS0NaA0tDXgNLQ14DS0NeA0tDXgNLQ14DS0NeA0tDXgNLQ14DS0NeA0tDXgNLQ14DS0NeA0dDXgNHQ14DR0NiA0dDYgNHQ2IDR0NiA0dDYgNHQ2IDR0NiA0dDYgNDQ2IDQ0NiA0M/YgNDP2IDQz9iA0M/YgNDP2IDQztiAz87YgM7O2IDOztiAzs7YgM7O14DOzteAzs7XgM7O14DOzteAzs7XgM7O14DOzteAzszXgM7M14DNzNeAzMzXgMzM14DMzNeAzMzXgMzM1oDMzNaAzMzWgMzM1oDMzNaAzMzWgMzM1YDMzNWAzMzVgMzL1YDMzNWAzMzVgMzM1YDMzNWAzMzVgMzM1YDMzNWAzMzWgMzM1oDMzNaAzMzWgMzM1oDMzNaAzMzWgMzM14DMzNeAzMzXgMzM14DMzNeAzMzXgMzM14DMzNeAzMzXgMzM14DMzNeAzMzXgMzM14DMzNeAzMzXgM3N2IDNztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7ZgM7P2oDP0NqA0NDagNDQ2oDQ0NqA0NDagNDQ2oDQ0NqA0NHcgNDR3IDQ0dyA0NHcgNDR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0tyA0dLcgNHS3IDR0tyA0dLcgNHS3YDR0t2A0dLdgNHT3oDR0t2A0dLdgNHS3YDR0t2A0dLdgNHS3YDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDQ0dyA0NHcgNDQ24DQ0NuA0NDagNDQ2oDQ0NqA0NDagNDQ2oDQ0NqAz9DagM7P2oDOztqAzs7ZgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDMzNeAzMzXgMzM14DMzNaAzMzVgMzM1YDMy9WAzMrVgMzK1YDMytSAzMrTgMzK04DMytOAzMrTgMzK04DMytOAzMrSgMvJ0YDLydGAysnRgMrJ0YDKydGAysnRgMrJ0IDKydCAysnQgMrI0IDKydCAysjQgMrI0IDKydCAysjQgMvI0IDLyM+AysjPgMrHzoDLx86Ay8fOgMvHzoDMyM6AzMfOgMzIzoDMyM6AzMfOgMzIzoDMx86AzMfOgMzIzoDMyM6AzMnOgMzJzoDMyc6AzMnOgMzJzoDMyc6AzcnPgM3Jz4DOyc+AzsnPgM7K0IDOytCAzsrQgM/M0YDPzNGAz8zSgM/M0oDQzNKA0MzTgNDM04DRzNOA0czTgNHN04DRztOA0c7TgNHO04DRztSA0c7VgNHO1YDSztWA0s7VgNPP1YDTz9WA08/VgNPP1oDTz9aA08/WgNPP1oDTz9aA08/WgNPP1oDTz9aA08/WgNPP1oDT0NaA09DXgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA0tHZgNLR2YDS0dmA0dHZgNHR2YDR0NmA0dDZgNHQ2YDR0NmA0c/ZgNHP2YDRz9qA0c/agNDP2oDPz9mAz8/ZgM/P2IDPz9iAz8/YgM/P2IDPz9iAz8/YgM/P2IDPz9iAz8/YgM/P2IDPztiAz87YgM/O2IDPztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM7O2IDOztiAzs7YgM/P2YDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDP0duA0NHcgNDR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dLcgNHS3IDR0t2A0tLdgNLT3YDS092A09PegNPT3oDT096A09PegNPT3oDT096A09PegNPT3oDT096A09PegNPT3oDT096A09PegNPT3oDT096A09PdgNLT3YDS092A0tPdgNHT3YDR092A0dLdgNHS3IDR0tyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNDR3IDP0NuAz9DagM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDOztiAzs7YgM7O2IDOztiAzs7YgM7O14DOztaAzs7WgM7N1oDOzNaAzszWgM7M1oDOzNWAzszVgM7M1YDOzNWAzszVgM7M1YDOzNSAzsvUgM3L04DMytOAzMrTgMzK04DMytOAzcrTgM3K04DNytOAzcrSgM3K0oDNytGAzcrRgM3K0YDNytGAzcrRgM3K0YDNytGAzsrRgM7K0YDOytGAzsrRgM7K0YDOytGAzsrRgM7K0YDOytGAzsrRgM7K0YDOytGAzsrRgM7K0YDOytGAzsrRgM7K0YDOytGAz8rRgM/K0YDPy9GAz8vRgM/M0YDPzNGAz8zRgM/M0YDRztWA0c7VgNHO1YDRztWA0c7VgNHO1YDRztWA0s7VgNLP1YDTz9WA08/VgNPP1YDTz9aA08/WgNPP1oDTz9aA08/WgNPP1oDT0NaA09DWgNPQ1oDT0daA09HXgNTR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTR2IDV0diA1dHYgNTR2IDU0dmA1NHagNTR2oDU0dqA1NHagNTR2oDU0tqA1NLagNTS2oDU0tqA1NLagNTS2oDU0tqA1NPagNPS2oDT0dqA09HagNPR2oDT0dqA09HagNPR2oDT0dqA09HagNPR2oDT0dqA09HagNLR2oDS0dqA0tHagNHR24DR0dqA0dHagNHR2oDR0dqA0dHagNHR2oDR0dqA0dHagNHR2oDR0dqA0dHagNHR2oDR0dqA0dDagNHP2oDQz9qA0M/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDPz9qAz8/agM/P2oDQ0NqA0NDagNDR2oDR0duA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHcgNHS3IDR092A0dPdgNLT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPU3oDT1N+A09TfgNPU3oDT1N6A09TegNPU3oDT1N+A09TegNPU34DT1N+A09TegNPU34DT1N6A09TegNPT3oDT096A09PdgNPT3oDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A0tPdgNHT3YDR0tyA0dLcgNHS3IDR0tyA0dHcgNHR3IDR0dyA0dHcgNHR3IDR0dyA0dHbgNDQ24DQ0NuAz8/agM/P2oDPz9qAz8/agM/P2oDPz9mAz8/YgM/P2IDPz9iAz87YgM/O2IDPztiAz87YgM/O14DPzteAz87WgM/O1oDPztaAz87WgM/O1oDPztaAz83WgM/N1YDPzdWAz83VgM/N1YDPzdWAz83VgM/M1YDPzNWAz8zVgM/M1YDPzNSAz8zUgM/M1IDPzNSAz8zUgM/M04DPzNSAz8zTgM/M04DPzNOAz8zTgM/M04DPzNOAz8zTgM/M04DPzNOAz8zTgM/M04DPzNOAz8zTgM/M04DPzNOA0M3TgNHN04DRzdOA0c7UgNHO1IDRztSA0c7VgNHO1YDRztWA08/WgNPP1oDTz9aA08/WgNPP1oDTz9aA09DXgNPR14DT0diA1NHYgNTR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTS2YDU09qA1NPagNTT2oDU09qA1NPagNXT2oDV09qA1dPagNXT2oDV09qA1dPagNXT2oDU09qA1NPagNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNPT24DT09uA09PbgNPT24DT09uA09PcgNPT24DT09uA09PbgNPT24DT09uA09PbgNPS24DT0tuA09LbgNPT24DT09uA09PbgNPR24DT0duA0tHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNLR24DS0duA0dHbgNHR24DR0duA0dHbgNLS24DS0tyA09PcgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09TegNPU3oDT1N6A09TegNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A09TfgNPU3oDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNLT3IDR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0duA0dHbgNHR24DR0dqA0dHagNHR2oDR0dqA0dHagNHR2oDR0NqA0c/agNHP2YDRz9iA0c/YgNHP2IDRz9iA0c/YgNHP2IDRz9iA0c/YgNHP2IDRz9iA0c/YgNHP2IDRz9iA0c/XgNHP1oDRz9aA0c/WgNHP1oDRz9aA0c7WgNHP1oDRz9aA0c/WgNHO1oDRztaA0c7WgNHO1oDRztaA0c/WgNHP1oDRz9aA0c/WgNHP1oDRz9aA0c/WgNLP1oDSz9aA0s/WgNLP1oDTz9aA08/WgNPP1oDTz9aA08/WgNPP1oDTz9aA08/WgNTR2YDU0tmA1NLZgNTR2YDU0tmA1NPagNTT2oDU09qA1NPagNTT2oDU09qA1NPagNXT2oDV09qA1dPagNXT2oDW09qA1tPagNbT2oDW09qA1tPagNbT24DW09uA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU3IDW1N2A1tTdgNbU3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNXU3YDU1N2A1NTdgNTU3YDU1N2A1NTdgNTU3YDU1N2A1NTdgNTU3YDU1N2A1NTdgNTU3YDU1N2A1NTdgNTU3YDU1N2A1NTdgNTT3YDU1N2A1NTdgNTU3YDU092A1NPdgNTT3YDU092A1NPdgNTT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDU092A1NTdgNTT3YDU092A1NTdgNTU3YDU1N6A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NXfgNTV34DU1d+A1NXfgNTV34DV1t+A1dbggNbW4IDW1uGA1tbhgNbW4YDW1uCA1tbggNbW4IDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4IDW1uCA1tbggNbW4IDV1uCA1dbggNXW4IDV1eCA1dXggNXV34DV1d+A1dXggNXW4IDW1uCA1dbggNXV4IDU1d+A1NXfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU3oDT1N2A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3YDT092A09PdgNPT3IDT09uA09PbgNPT24DT09uA09LbgNPR24DT0duA09HbgNPR24DT0dqA09HagNPR2oDT0dqA09HagNPR2oDT0dqA09HagNPR2oDT0dqA09HagNPR2oDT0dqA09HagNPR2YDT0dmA09HZgNPR2YDT0dmA09HZgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDT0diA09HYgNPR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTR2IDU0diA1NHYgNTR2IDU0diA1NHZgNTR2YDW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DW1NuA1tTbgNbU24DX1N2A19TdgNjU3YDY1N2A2NTdgNjV3YDY1d2A2NXdgNfV3YDX1N2A2NXdgNjW3YDY1t2A2NbdgNjW3YDY1t2A2NbdgNjW3YDY1t2A2NbdgNfW3YDX1t2A19begNjW34DX1t+A19bfgNfW34DX1t+A1tbfgNbW34DW1t+A1tbfgNfW34DX1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tXfgNbV34DW1d+A1tbfgNbW34DW1d+A1tTfgNbU34DW1N+A1tTfgNbU34DW1N+A1dTfgNbU34DW1N+A1dTfgNXU34DU1N+A1NTfgNXU34DV1N+A1dTfgNXU34DU1N+A1NTfgNTU34DV1N+A1dTfgNXU34DV1N+A1dTfgNXU34DV1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1dTfgNbV34DW1d+A1tbfgNbW34DW1t+A1tbfgNbW4IDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDX1+GA19fhgNfX4YDX1+GA1tfhgNbX4YDW1+GA1tfhgNbX4YDX1+GA19fhgNfX4oDX1+KA19fhgNfX4YDX1+GA1tfhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uGA1tbhgNbW4YDW1uCA1tbggNbW4IDV1d+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTfgNTU34DU1N+A1NTegNTU3YDU1N2A1NTdgNTU3YDU092A1NPdgNTT3YDU092A1NPdgNTT3YDU092A1NPdgNTT3YDU1N2A1NPdgNTT3IDU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1NPbgNTT24DU09uA1dPbgNbT24DV09uA1tPbgNbT24DW09uA1tPbgNbT24DW09uA1tPbgNbT24DW09uA1tPbgNbT24DW09uA2NbdgNjW3YDY1t2A2NbdgNjW3YDY1t2A2NbdgNjW3YDY1t2A2NbdgNjW3oDY1t+A2NbfgNjW34DY1t+A2NbegNjW3oDY1t+A2NbfgNjW34DY1t+A2NbfgNjW34DY1t+A2NbfgNjW34DY1t+A2NbfgNjW34DZ19+A2dffgNnX34DZ19+A2NffgNjX34DY19+A2NffgNjX34DY19+A2NffgNjX34DY1+CA2NfggNjX4IDY1+CA2NfggNjX4IDY1+CA2NfggNjX4IDY1+CA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NfggNjX4IDY1+CA2NfggNjX4IDY1+CA2NjggNjX4IDY1uCA2NfggNjX4IDY1+CA2NjggNjY4IDY2OCA2NfggNjX4IDY1uCA2NbggNfW4IDX1uCA19bggNbW4IDX1uCA1tbggNfW4IDX1uCA19bggNfW4IDY1uCA19bggNjX4IDY1+CA2NbggNfX4IDX1+CA19fggNjX4IDY1+CA2NfggNjX4IDY1+CA19bggNfW4IDW1uCA19bggNfW4IDW1uCA1tbggNbW4IDX1uCA2NfggNjX4IDY2OCA2NjhgNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OGA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjhgNfX4IDX1+CA1tbggNbW4IDW1uCA1tbggNbW4IDW1uCA1tbggNbW4IDW1uCA1tbggNbW4IDW1uCA1tbggNbW4IDW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1t+A1tbfgNbW34DW1d+A1tXegNbW34DW1t+A1tbfgNbW3oDW1d6A1tXdgNbV3YDW1d2A1tXegNbV3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNbU3YDW1N2A1tTdgNfU3YDY1d2A2NXdgNjV3YDY1d2A2NXdgNjV3YDY1t2A2NbdgNjV3YDY1d2A2NXdgNjV3YDY1t2A2NbdgNnY4IDZ2N+A2djfgNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djhgNnY4oDZ2OGA2djhgNnY4YDZ2OKA2djigNnY4oDZ2OKA2djigNnY4oDZ2OKA2djigNnY4oDZ2eKA2dnigNnZ4oDZ2eKA2djigNnZ4oDZ2eKA2dnigNnY4oDZ2OKA2djigNnY4oDZ2OKA2dnigNnZ4oDZ2OKA2djigNnZ4oDZ2OKA2djigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2djigNnY4oDZ2OKA2djigNnY4oDZ2OKA2djigNnY4oDZ2OKA2djigNjY4oDZ2OKA2djigNnY4oDZ2OKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnY4oDZ2eKA2dnigNnZ4oDZ2eKA2djigNjY4oDY2OKA2djigNnZ4oDZ2eKA2dnigNnZ4oDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eOA2dnkgNnZ5IDZ2eSA2dnjgNnZ44DZ2eOA2dnjgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eOA2dnjgNnZ44DZ2eOA2dnjgNnZ44DZ2eKA2dnigNnZ4oDZ2OKA2NjigNjY4oDY2OKA2NjigNnY4oDZ2OKA2djigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2NjigNjY4oDY2OKA2djigNnY4oDZ2OGA2NjhgNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY2OCA2NjggNjY4IDY1+CA2NffgNjX34DZ1+CA2djggNnX4IDZ19+A2NffgNjX34DY19+A2djfgNnY34DZ2N+A2djggNnY4IDZ2N+A2djggNnY4IDZ2OCA2djggNnY4IDZ2OCA2djggNnY4IDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ44Db2eOA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eOA29njgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2eSA29nkgNvZ5IDb2uSA29nkgNva5IDb2eSA29nkgNvZ5IDa2eSA2tnkgNva5IDb2uSA29vkgNvb5IDb2uSA29nkgNvZ5IDb2eSA29rkgNvb5IDb2uSA29vkgNva5IDb2uSA29rkgNva5IDb2eSA29nkgNvZ5IDb2uSA29rkgNva5IDb2uSA29rkgNva5IDb2uSA29rkgNva5IDb2+SA29vkgNvb5IDb2+SA29vkgNva5IDb2eSA29nkgNvZ5IDb2uSA29vkgNvb5IDb2+SA29vkgNvb5IDb2+SA29vkgNvb5IDb2+WA29vlgNvb5YDb2+WA29vlgNvb5IDb2+WA29vkgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5IDb2+SA29vkgNvb5IDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+SA29vlgNvb5YDb2+SA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+SA29vkgNvb5IDb2+SA29vkgNvb5YDb2+SA29vlgNvb5YDb2+SA29vkgNvb5IDb2+SA29vkgNva5IDb2uSA29vkgNvb5IDb2+SA29vkgNva5IDa2eSA2tnkgNvZ5IDa2eSA2dnkgNnZ5IDZ2eSA2tnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2dnkgNnZ5IDZ2eSA2tnkgNrZ5IDb2eSA29nkgNrZ5IDZ2eOA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDZ2eKA2dnigNnZ4oDa2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNrZ4oDa2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA2tnigNvZ4oDb2eKA29nigNvZ4oDb2eKA29nigNvZ4oDb2eKA3dvkgN3b5IDd2+SA3dvkgN3b5IDc2+SA3NvkgNzb5IDd2+SA3dvkgN3b5IDd2+SA3dvkgN3b5IDd2+SA3dvkgN3b5IDd2+SA3dvlgN3b5YDd2+WA3dvkgN3b5IDd2+SA3dvkgN3b5IDd2+SA3NvkgNzb5IDc2+SA3NvkgN3b5IDd2+SA3dvlgN3b5YDd2+WA3dvlgN3b5YDd2+WA3dvlgN3b5YDd2+WA3dvlgN3b5YDd2+WA3dvlgN3b5YDd2+WA3dvlgN3b5YDd2+WA3NvlgNzb5YDc2+WA3NvlgNzb5YDc2+WA29vlgNzb5YDb2+WA29vlgNzb5YDd2+WA3dvlgN3b5YDc2+WA3NvlgNzb5YDc2+WA29vlgNvb5YDb2+WA29vlgNvb5YDc2+WA3NvlgNzb5YDd2+WA3NvlgNzb5YDc2+WA3NvlgNzb5YDd2+WA3dvlgN3b5YDd3OWA3dzlgN3c5YDd3OWA3dvlgN3b5YDd2+WA3NvlgNzb5YDc2+WA3NvlgNvb5YDb2+WA29vlgNvb5YDc2+WA3NvlgNzc5YDd3OWA3dzlgN3c5YDd2+WA3dvlgNzb5YDc2+WA3NvlgN3c5YDd3OWA3dzlgN3c5YDc2+WA3NvlgNzc5YDd3eWA3d3mgN3d5oDd3eaA3dzmgN3c5oDd3eWA3d3lgN3d5YDd3eWA3dzlgN3c5oDd3OWA3dzmgN3c5oDd3eaA3d3lgN3c5YDd3OWA3d3lgN3c5YDc3OWA3dzmgN3d5YDd3eWA3d3lgN3d5oDd3OWA3NzlgNzc5YDd3OWA3dzlgN3c5YDd3OWA3dzlgN3c5YDd3OaA3dzlgN3c5oDd3eaA3d3mgN3d54Dd3eeA3d3mgN3c5YDc3OWA3NvlgNvb5YDb2+WA29vlgNzb5YDc3OWA3NzlgN3c5YDc3OWA29vlgNzb5YDc2+WA3dzlgN3d5YDd3OWA3dvlgN3b5YDd3OWA3dzlgN3c5YDd3OWA3NvlgNzb5YDd3OWA3NvlgN3b5YDd3OWA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNvb5YDb2+WA29vlgNzb5YDc2+WA29vlgNvb5YDb2+WA29vlgNvb5IDb2+SA29vlgNvb5IDb2+SA29vkgNvb5IDb2+SA29vkgNvb5IDb2+SA29vkgNvb5IDb2+SA29vkgNvb5IDb2+SA29vkgNvb5IDd2+SA3dvkgN3b5IDd2+SA3dvkgNzb5IDc2+SA3NvkgN3b5IDd2+SA3dvkgN3b5IDd2+SA3NvkgNvb5IDb2+SA29vkgNzb5IDc2+SA3NvkgN3b5IDd2+SA3dvkgN7d54De3eeA3t3ngN7d5oDe3eaA3d3mgN3d5oDd3eaA3t3mgN7d54De3eaA3t3mgN7d5oDe3eaA3t3mgN7d5oDe3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3mgN7d54De3eeA3t3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN3d54Dd3eeA3d3ngN3d54De3eeA3t3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3t3ngN7d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3t3ngN7d54De3eeA3d3ngN3d54Dd3eeA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3d3ngN7d54De3eeA3t3ngN7d54De3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3t3ngN7d54De3ueA3t7ngN7d54De3eeA3t3ngN3d54De3eeA3t7ngN7d54De3eeA3t3ngN3d54De3eeA3t7ngN7e54De3ueA3t3ngN7d54De3eeA3t3ngN7e54De3ueA3t7ngN7d54De3eeA3d3ngN7d54De3eeA3t7ngN7e54De3ueA3t3ngN7d54De3eeA3d3ngN7d54De3eeA3t7ngN7e54De3ueA3t3ngN3d54Dd3eeA3t3ngN7d54De3eeA3t7ngN7e54De3eeA3t3ngN7d54De3eeA3t7ngN7e54De3ueA3t7ngN7d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54De3eeA3t3ngN7d54De3ueA3t3ngN7d54Dd3eeA3d3ngN3d54De3eeA3t3ngN7d54Dd3eeA3t3ngN7d54De3ueA3t7ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3t3ngN7d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eeA3d3ngN3d54Dd3eaA3d3mgN3d5oDd3eaA3d3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d5oDe3eaA3t3ngN7d54De3eeA3t3ngN7d54De3eeA3t3ngN7d5oDd3eaA3d3mgN3d5oDd3eaA3d3mgN3d5oDe3eaA3t3mgN7d54DOzdiAzs3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzc3YgM7N2IDPzdiAz83YgM7N2IDOzdiAzs3YgM3N2IDOzdiAz83YgM/O2IDPztiAz87YgM/O2IDPzdiAz83YgM/O2IDOzdiAz87YgM/N2IDOzdiAzc3YgM3N2IDNzdiAzs3YgM/N2IDPzdiAz83YgM/N2IDPzdiAz83YgM/N2IDOzdiAz83YgM7N2IDPzdiAz83YgM/N2IDOzdiAzs3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDPztiAz87YgM/O2IDPzdiAzs3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDOzdiAzc3YgM7N2IDOzdiAzs3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM7N2IDPzdiAz87YgM/O2IDPztiAz87YgM7N2IDOzdiAzs3YgM7N2IDOzdiAzs3YgM7N2IDOzdiAz87YgM/O2IDPztiAz8/YgM/P2IDPz9iAz87YgM/N2IDOzdiAz87YgM/O2IDPztiAz83YgM/N2IDPztiAz83YgM/N2IDPzdiAz83YgM7N2IDNzdiAzc3YgM7N2IDOzdiAzs3YgM7N2IDPzdiAzs3YgM3N2IDOzdiAzs3YgM7N2IDOztiAzs3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDOzdiAzs3YgM/N2IDOzdiAzs3YgM7N2IDOzdiAz83YgM/O2IDPztiAz87YgM/N2IDOzdiAzs3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM7N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDOzdiAzs3YgM7N2IDOzdiAzs3YgM7N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDNzdiAzc3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDOzdiAzs3YgM/N2IDOzdiAz83YgM7N2IDOzdiAzs3YgM3N2IDNzdiAzc3YgM3N2IDNzdiAzs3YgM/N2IDPzdiAzs3YgM7N2IDPzdiAzs3YgM7N2IDOzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDOztiAzs3YgM/N2IDPzdiAz83YgM7N2IDNzdiAzc3YgM3N2IDNzdiAzs3YgM7N2IDPzdiAz83YgM/N2IDPzdiAzs3YgM7N2IDOzdiAzs3YgM/N2IDPztiAz87YgM/O2IDPztiAz83YgM7N2IDOzdiA";'}function getNormalGenCode(){return"\n/*\n    Converts a pre-loaded image to normal map, returned as new image in Data URL format.\n    Parameters:\n    {\n        width: 256, // pixels\n        height: 256, // pixels\n        strength: 2.5, // 0.01 to 5\n        level: 7.0, // 4 to 10\n        blur: 0.0, // -32 to 32\n        filter: 'Sobel', // or 'Scharr'\n        invertR: false,\n        invertG: false,\n        invertHeight: false\n    }\n    Based on NormalMap Online by Christian Petry\n    Source: https://github.com/cpetry/NormalMap-Online\n    Live: https://cpetry.github.io/NormalMap-Online/\n*/\n\nvar NORMALGEN = NORMALGEN || {};\n\nNORMALGEN.normalCanvas = null;\nNORMALGEN.renderer = null;\n\nNORMALGEN.convert = function(heightImage, params) {\n\n    // init renderer\n\tvar normalCanvas = NORMALGEN.normalCanvas = NORMALGEN.normalCanvas ||\n\t\tdocument.createElement('canvas');\n\tvar renderer = NORMALGEN.renderer = NORMALGEN.renderer ||\n\t\tnew v3d.WebGLRenderer({ alpha: false, antialias: true, canvas: normalCanvas });\n\trenderer.setSize(params.width, params.height);\n\n\t// init normal map shader\n\tvar normalShader = NORMALGEN.NormalMapShader;\n\tvar normalUniforms = v3d.UniformsUtils.clone(normalShader.uniforms);\n\n    // set width and height\n    normalUniforms['dimensions'].value =\n        [params.width, params.height, 0];\n\n    // set strength and level\n    normalUniforms['dz'].value =\n        1.0 / params.strength * (1.0 + Math.pow(2.0, params.level));\n\n    // set filter\n    normalUniforms['type'].value = (params.filter == 'Sobel') ? 0 : 1;\n\n    // set inversion flags\n    normalUniforms['invertR'].value = params.invertR ? -1 : 1;\n    normalUniforms['invertG'].value = params.invertG ? -1 : 1;\n    normalUniforms['invertH'].value = params.invertHeight ? -1 : 1;\n\n    // setup texture\n\tvar heightTex\t\t  = new v3d.Texture(heightImage);\n\theightTex.minFilter   = heightTex.magFilter = v3d.NearestFilter;\n\theightTex.needsUpdate = true;\n\tnormalUniforms['tHeightMap'].value = heightTex;\n\n    // setup material\n\tvar normalMat = new v3d.ShaderMaterial({\n\t\tfragmentShader: normalShader.fragmentShader,\n\t\tvertexShader: normalShader.vertexShader,\n\t\tuniforms: normalUniforms\n\t});\n\n    // setup mesh\n\tvar geometry = new v3d.PlaneBufferGeometry(1, 1, 1, 1);\n\tvar mesh = new v3d.Mesh(geometry, normalMat);\n\tmesh.name = 'NORMALGEN_MESH';\n\n    // setup scene\n\tvar scene = new v3d.Scene();\n\tscene.add(mesh);\n\tvar camera = new v3d.OrthographicCamera(1/-2, 1/2, 1/2, 1/-2, 0, 1);\n\tvar normalPass = new v3d.RenderPass(scene, camera);\n\n\t// blur passes\n\tvar gaussianPassY = new v3d.ShaderPass(NORMALGEN.VerticalBlurShader);\n\tvar gaussianPassX = new v3d.ShaderPass(NORMALGEN.HorizontalBlurShader);\n\n    // set blur params\n\tgaussianPassY.uniforms['v'].value = params.blur / params.width / 5;\n\tgaussianPassX.uniforms['h'].value = params.blur / params.height / 5;\n\n    // setup render target\n\tvar rtParams = { minFilter: v3d.NearestFilter, magFilter: v3d.NearestFilter,\n\t    format: v3d.RGBAFormat, stencilBufer: false };\n\tvar renderTarget = new v3d.WebGLRenderTarget(params.width, params.height, rtParams);\n\n    // setup composer\n\tvar composer = new v3d.EffectComposer(renderer, renderTarget);\n\tcomposer.setSize(params.width, params.height);\n\tcomposer.addPass(normalPass);\n\tcomposer.addPass(gaussianPassY);\n\tcomposer.addPass(gaussianPassX);\n\n    // draw\n    composer.render(1/60);\n\n\t// retrieve image\n\tvar resultImage = normalCanvas.toDataURL();\n\n\t// clean up\n\tnormalMat.dispose();\n\tscene.dispose();\n\tcomposer.dispose();\n\trenderer.dispose();\n\n\treturn resultImage;\n}\n\n\nNORMALGEN.NormalMapShader = {\n\tuniforms: {\n\t\t'type': \t\t{type: '1i', value: 0},\n    \t'invertR': \t\t{type: '1f', value: 1},\n    \t'invertG': \t\t{type: '1f', value: 1},\n    \t'invertH': \t\t{type: '1f', value: 1},\n    \t'dz':           {type: '1f', value: 0},\n    \t'dimensions': \t{type: 'fv', value: [0, 0, 0]},\n    \t'tHeightMap': \t{type: 't', value: null }\n\t},\n\n\tvertexShader: [\n\t\t'precision mediump float;',\n        'varying vec2 vUv;',\n\t\t'varying vec2 step;',\n        'uniform vec3 dimensions;',\n        'void main() {',\n\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\t\t\t'step = vec2(-1.0 / dimensions.x, -1.0 / dimensions.y);', // - to switch from glsl orientation to my orientation :D\n\t\t\t'vUv = uv;',\n\t\t'}'\n\t].join('\\n'),\n\n\tfragmentShader: [\n\t\t'precision mediump float;',\n        'uniform vec3 dimensions;',\n        'varying vec2 vUv;',\n        'varying vec2 step;',\n        'uniform float dz;',\n        'uniform float invertR;',\n        'uniform float invertG;',\n        'uniform float invertH;',\n        'uniform int type;',\n\t\t'uniform sampler2D tHeightMap;',\n\n\t\t'void main(void) {',\n\t\t'\tvec2 tlv = vec2(vUv.x - step.x, vUv.y + step.y );',\n\t\t'\tvec2 lv  = vec2(vUv.x - step.x, vUv.y \t\t   );',\n\t\t'\tvec2 blv = vec2(vUv.x - step.x, vUv.y - step.y);',\n\t\t'\tvec2 tv  = vec2(vUv.x \t\t  , vUv.y + step.y );',\n\t\t'\tvec2 bv  = vec2(vUv.x \t\t  , vUv.y - step.y);',\n\t\t'\tvec2 trv = vec2(vUv.x + step.x, vUv.y + step.y );',\n\t\t'\tvec2 rv  = vec2(vUv.x + step.x, vUv.y \t\t   );',\n\t\t'\tvec2 brv = vec2(vUv.x + step.x, vUv.y - step.y);',\n\t\t'\ttlv = vec2(tlv.x >= 0.0 ? tlv.x : (1.0 + tlv.x), \ttlv.y >= 0.0\t? tlv.y : (1.0  + tlv.y));',\n\t\t'\ttlv = vec2(tlv.x < 1.0  ? tlv.x : (tlv.x - 1.0 ), \ttlv.y < 1.0   \t? tlv.y : (tlv.y - 1.0 ));',\n\t\t'\tlv  = vec2( lv.x >= 0.0 ?  lv.x : (1.0 + lv.x),  \tlv.y  >= 0.0 \t?  lv.y : (1.0  +  lv.y));',\n\t\t'\tlv  = vec2( lv.x < 1.0  ?  lv.x : ( lv.x - 1.0 ),   lv.y  < 1.0  \t?  lv.y : ( lv.y - 1.0 ));',\n\t\t'\tblv = vec2(blv.x >= 0.0 ? blv.x : (1.0 + blv.x), \tblv.y >= 0.0 \t? blv.y : (1.0  + blv.y));',\n\t\t'\tblv = vec2(blv.x < 1.0  ? blv.x : (blv.x - 1.0 ), \tblv.y < 1.0 \t? blv.y : (blv.y - 1.0 ));',\n\t\t'\ttv  = vec2( tv.x >= 0.0 ?  tv.x : (1.0 + tv.x),  \ttv.y  >= 0.0 \t?  tv.y : (1.0  +  tv.y));',\n\t\t'\ttv  = vec2( tv.x < 1.0  ?  tv.x : ( tv.x - 1.0 ),   tv.y  < 1.0 \t?  tv.y : ( tv.y - 1.0 ));',\n\t\t'\tbv  = vec2( bv.x >= 0.0 ?  bv.x : (1.0 + bv.x),  \tbv.y  >= 0.0 \t?  bv.y : (1.0  +  bv.y));',\n\t\t'\tbv  = vec2( bv.x < 1.0  ?  bv.x : ( bv.x - 1.0 ),   bv.y  < 1.0 \t?  bv.y : ( bv.y - 1.0 ));',\n\t\t'\ttrv = vec2(trv.x >= 0.0 ? trv.x : (1.0 + trv.x), \ttrv.y >= 0.0 \t? trv.y : (1.0  + trv.y));',\n\t\t'\ttrv = vec2(trv.x < 1.0  ? trv.x : (trv.x - 1.0 ), \ttrv.y < 1.0   \t? trv.y : (trv.y - 1.0 ));',\n\t\t'\trv  = vec2( rv.x >= 0.0 ?  rv.x : (1.0 + rv.x),  \trv.y  >= 0.0 \t?  rv.y : (1.0  +  rv.y));',\n\t\t'\trv  = vec2( rv.x < 1.0  ?  rv.x : ( rv.x - 1.0 ),   rv.y  < 1.0   \t?  rv.y : ( rv.y - 1.0 ));',\n\t\t'\tbrv = vec2(brv.x >= 0.0 ? brv.x : (1.0 + brv.x), \tbrv.y >= 0.0 \t? brv.y : (1.0  + brv.y));',\n\t\t'\tbrv = vec2(brv.x < 1.0  ? brv.x : (brv.x - 1.0 ), \tbrv.y < 1.0   \t? brv.y : (brv.y - 1.0 ));',\n\t\t'\tfloat tl = abs(texture2D(tHeightMap, tlv).r);',\n\t\t'\tfloat l  = abs(texture2D(tHeightMap, lv ).r);',\n\t\t'\tfloat bl = abs(texture2D(tHeightMap, blv).r);',\n\t\t'\tfloat t  = abs(texture2D(tHeightMap, tv ).r);',\n\t\t'\tfloat b  = abs(texture2D(tHeightMap, bv ).r);',\n\t\t'\tfloat tr = abs(texture2D(tHeightMap, trv).r);',\n\t\t'\tfloat r  = abs(texture2D(tHeightMap, rv ).r);',\n\t\t'\tfloat br = abs(texture2D(tHeightMap, brv).r);',\n\t\t'   float dx = 0.0, dy = 0.0;',\n\t\t'   if(type == 0){',\t// Sobel\n\t\t'\t\tdx = tl + l*2.0 + bl - tr - r*2.0 - br;',\n\t\t'\t\tdy = tl + t*2.0 + tr - bl - b*2.0 - br;',\n\t\t'   }',\n\t\t'   else{',\t\t\t\t// Scharr\n\t\t'\t\tdx = tl*3.0 + l*10.0 + bl*3.0 - tr*3.0 - r*10.0 - br*3.0;',\n\t\t'\t\tdy = tl*3.0 + t*10.0 + tr*3.0 - bl*3.0 - b*10.0 - br*3.0;',\n\t\t'   }',\n\t\t'\tvec4 normal = vec4(normalize(vec3(dx * invertR * invertH * 255.0, dy * invertG * invertH * 255.0, dz)), texture2D(tHeightMap, vUv).a);',\n\t\t'\tgl_FragColor = vec4(normal.xy * 0.5 + 0.5, normal.zw);',\n\t\t'}'\n\t].join('\\n')\n};\n\n\nNORMALGEN.HorizontalBlurShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { type: 't', value: null },\n\t\t'h':        { type: 'f', value: 3.0 / 512.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t\t'vUv = uv;',\n\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\n\t].join('\\n'),\n\n\tfragmentShader: [\n\n\t\t'uniform sampler2D tDiffuse;',\n\t\t'uniform float h;',\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t\t'vec4 sum = vec4( 0.0 );',\n\t\t\t'float lef4 = vUv.x - 4.0 * h;',\n\t\t\t'float lef3 = vUv.x - 3.0 * h;',\n\t\t\t'float lef2 = vUv.x - 2.0 * h;',\n\t\t\t'float lef1 = vUv.x - 1.0 * h;',\n\t\t\t'float rig1 = vUv.x + 1.0 * h;',\n\t\t\t'float rig2 = vUv.x + 2.0 * h;',\n\t\t\t'float rig3 = vUv.x + 3.0 * h;',\n\t\t\t'float rig4 = vUv.x + 4.0 * h;',\n\n\t\t\t'lef4 = lef4 >= 0.0 ? lef4 : (1.0 + lef4);',\n\t\t\t'lef4 = lef4 < 1.0  ? lef4 : (lef4 - 1.0 );',\n\t\t\t'lef3 = lef3 >= 0.0 ? lef3 : (1.0 + lef3);',\n\t\t\t'lef3 = lef3 < 1.0  ? lef3 : (lef3 - 1.0 );',\n\t\t\t'lef2 = lef2 >= 0.0 ? lef2 : (1.0 + lef2);',\n\t\t\t'lef2 = lef2 < 1.0  ? lef2 : (lef2 - 1.0 );',\n\t\t\t'lef1 = lef1 >= 0.0 ? lef1 : (1.0 + lef1);',\n\t\t\t'lef1 = lef1 < 1.0  ? lef1 : (lef1 - 1.0 );',\n\t\t\t'rig1 = rig1 >= 0.0 ? rig1 : (1.0 + rig1);',\n\t\t\t'rig1 = rig1 < 1.0  ? rig1 : (rig1 - 1.0 );',\n\t\t\t'rig2 = rig2 >= 0.0 ? rig2 : (1.0 + rig2);',\n\t\t\t'rig2 = rig2 < 1.0  ? rig2 : (rig2 - 1.0 );',\n\t\t\t'rig3 = rig3 >= 0.0 ? rig3 : (1.0 + rig3);',\n\t\t\t'rig3 = rig3 < 1.0  ? rig3 : (rig3 - 1.0 );',\n\t\t\t'rig4 = rig4 >= 0.0 ? rig4 : (1.0 + rig4);',\n\t\t\t'rig4 = rig4 < 1.0  ? rig4 : (rig4 - 1.0 );',\n\n\t\t\t'sum += texture2D( tDiffuse, vec2( lef4, vUv.y ) ) * 0.051;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( lef3, vUv.y ) ) * 0.0918;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( lef2, vUv.y ) ) * 0.12245;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( lef1, vUv.y ) ) * 0.1531;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( rig1, vUv.y ) ) * 0.1531;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( rig2, vUv.y ) ) * 0.12245;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( rig3, vUv.y ) ) * 0.0918;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( rig4, vUv.y ) ) * 0.051;',\n\t\t\t'if (h > 0.0){',\n\t\t\t'\tvec4 srcValue = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );',\n\t\t\t'\tsum = srcValue + srcValue - sum;',\n\t\t\t'}',\n\t\t\t'gl_FragColor = sum;',\n\t\t\t//'gl_FragColor = vec4(1,0,0,1);',\n\n\t\t'}'\n\n\t].join('\\n')\n\n};\n\n\nNORMALGEN.VerticalBlurShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { type: 't', value: null },\n\t\t'v':        { type: 'f', value: 3.0 / 512.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t\t'vUv = uv;',\n\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n\n\t\t'}'\n\n\t].join('\\n'),\n\n\tfragmentShader: [\n\n\t\t'uniform sampler2D tDiffuse;',\n\t\t'uniform float v;',\n\n\t\t'varying vec2 vUv;',\n\n\t\t'void main() {',\n\n\t\t\t'vec4 sum = vec4( 0.0 );',\n\t\t\t'float top4 = vUv.y - 4.0 * v;',\n\t\t\t'float top3 = vUv.y - 3.0 * v;',\n\t\t\t'float top2 = vUv.y - 2.0 * v;',\n\t\t\t'float top1 = vUv.y - 1.0 * v;',\n\t\t\t'float bot1 = vUv.y + 1.0 * v;',\n\t\t\t'float bot2 = vUv.y + 2.0 * v;',\n\t\t\t'float bot3 = vUv.y + 3.0 * v;',\n\t\t\t'float bot4 = vUv.y + 4.0 * v;',\n\n\t\t\t'top4 = top4 >= 0.0 ? top4 : (1.0 + top4);',\n\t\t\t'top4 = top4 < 1.0  ? top4 : (top4 - 1.0 );',\n\t\t\t'top3 = top3 >= 0.0 ? top3 : (1.0 + top3);',\n\t\t\t'top3 = top3 < 1.0  ? top3 : (top3 - 1.0 );',\n\t\t\t'top2 = top2 >= 0.0 ? top2 : (1.0 + top2);',\n\t\t\t'top2 = top2 < 1.0  ? top2 : (top2 - 1.0 );',\n\t\t\t'top1 = top1 >= 0.0 ? top1 : (1.0 + top1);',\n\t\t\t'top1 = top1 < 1.0  ? top1 : (top1 - 1.0 );',\n\t\t\t'bot1 = bot1 >= 0.0 ? bot1 : (1.0 + bot1);',\n\t\t\t'bot1 = bot1 < 1.0  ? bot1 : (bot1 - 1.0 );',\n\t\t\t'bot2 = bot2 >= 0.0 ? bot2 : (1.0 + bot2);',\n\t\t\t'bot2 = bot2 < 1.0  ? bot2 : (bot2 - 1.0 );',\n\t\t\t'bot3 = bot3 >= 0.0 ? bot3 : (1.0 + bot3);',\n\t\t\t'bot3 = bot3 < 1.0  ? bot3 : (bot3 - 1.0 );',\n\t\t\t'bot4 = bot4 >= 0.0 ? bot4 : (1.0 + bot4);',\n\t\t\t'bot4 = bot4 < 1.0  ? bot4 : (bot4 - 1.0 );',\n\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, top4 ) ) * 0.051;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, top3 ) ) * 0.0918;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, top2 ) ) * 0.12245;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, top1 ) ) * 0.1531;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, bot1 ) ) * 0.1531;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, bot2 ) ) * 0.12245;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, bot3 ) ) * 0.0918;',\n\t\t\t'sum += texture2D( tDiffuse, vec2( vUv.x, bot4 ) ) * 0.051;',\n\t\t\t'if (v > 0.0){',\n\t\t\t'\tvec4 srcValue = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );',\n\t\t\t'\tsum = srcValue + srcValue - sum;',\n\t\t\t'}',\n\t\t\t'gl_FragColor = sum;',\n\n\t\t'}'\n\n\t].join('\\n')\n};\n    "}function getTweenJSCode(){return'\n// Copyright (c) 2010-2019 Tween.js authors.\n// Easing equations Copyright (c) 2001 Robert Penner http://robertpenner.com/easing/\n// Code copied from https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.3.0/Tween.min.js\n\nvar _Group=function(){this._tweens={},this._tweensAddedDuringUpdate={}};_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,n){var e=Object.keys(this._tweens);\nif(0===e.length)return!1;for(t=void 0!==t?t:TWEEN.now();0<e.length;){this._tweensAddedDuringUpdate={};for(var i=0;i<e.length;i++){var r=this._tweens[e[i]];r&&!1===r.update(t)&&(r._isPlaying=!1,n||delete this._tweens[e[i]])}e=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group,TWEEN._nextId=0,TWEEN.nextId=function(){return TWEEN._nextId++},"undefined"==typeof window&&"undefined"!=typeof process&&process.hrtime?TWEEN.now=function(){var t=process.hrtime();\nreturn 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()},TWEEN.Tween=function(t,n){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,\nthis._startTime=null,this._easingFunction=TWEEN.Easing.Linear.None,this._interpolationFunction=TWEEN.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=n||TWEEN,this._id=TWEEN.nextId()},TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,n){return this._valuesEnd=t,void 0!==n&&(this._duration=n),this},start:function(t){for(var n in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?TWEEN.now()+parseFloat(t):t:TWEEN.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[n]instanceof Array){if(0===this._valuesEnd[n].length)continue;\nthis._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}void 0!==this._object[n]&&(this._valuesStart[n]=this._object[n],this._valuesStart[n]instanceof Array==!1&&(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,n=this._chainedTweens.length;t<n;\nt++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var n,e,i;if(t<this._startTime)return!0;\nfor(n in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),e=(t-this._startTime)/this._duration,e=0===this._duration||1<e?1:e,i=this._easingFunction(e),this._valuesEnd)if(void 0!==this._valuesStart[n]){var r=this._valuesStart[n]||0,a=this._valuesEnd[n];a instanceof Array?this._object[n]=this._interpolationFunction(a,i):("string"==typeof a&&(a="+"===a.charAt(0)||"-"===a.charAt(0)?r+parseFloat(a):parseFloat(a)),"number"==typeof a&&(this._object[n]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==e)return!0;\nif(0<this._repeat){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[n]&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo){var s=this._valuesStartRepeat[n];this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=s}this._valuesStart[n]=this._valuesStartRepeat[n]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,u=this._chainedTweens.length;o<u;o++)this._chainedTweens[o].start(this._startTime+this._duration);\nreturn!1}},TWEEN.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},\nInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var n=2.5949095;\nreturn(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},TWEEN.Interpolation={Linear:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=TWEEN.Interpolation.Utils.Linear;return n<0?a(t[0],t[1],i):1<n?a(t[e],t[e-1],e-i):a(t[r],t[e<r+1?e:r+1],i-r)},Bezier:function(t,n){for(var e=0,i=t.length-1,r=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein,s=0;s<=i;s++)e+=r(1-n,i-s)*r(n,s)*t[s]*a(i,s);return e},CatmullRom:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=TWEEN.Interpolation.Utils.CatmullRom;\nreturn t[0]===t[e]?(n<0&&(r=Math.floor(i=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],i-r)):n<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):1<n?t[e]-(a(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):a(t[r?r-1:0],t[r],t[e<r+1?e:r+1],t[e<r+2?e:r+2],i-r)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=TWEEN.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var i=[1];return function(t){var n=1;if(i[t])return i[t];for(var e=t;1<e;e--)n*=e;return i[t]=n}}(),CatmullRom:function(t,n,e,i,r){var a=.5*(e-t),s=.5*(i-n),o=r*r;return(2*n-2*e+a+s)*(r*o)+(-3*n+3*e-2*a-s)*o+a*r+n}}},function(t){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==t&&(t.TWEEN=TWEEN)}(this);\n    '}function createBlockOfType(e,t){t=e.newBlock(t);t.initSvg();t.render();return t}function connectBlockToEmptyInput(e,t){t.connection.connect(e.outputConnection)}function getWorkspaceProceduresNames(e){return e.getAllBlocks().filter(function(e){return"procedures_defnoreturn"===e.type||"procedures_defreturn"===e.type}).map(function(e){return e.getProcedureDef()[0]})}function getWorkspaceVariablesNames(e){return e.getAllVariables().map(function(e){return e.name})}function onBlockCreate(t,n){var o=t.onchange;t.setOnChange(function(e){if(e.type===BlocklyExt.Events.BLOCK_READY&&e.blockId===t.id){t.setOnChange(o||!1);n(t,e)}})}function isInputValueChanged(e,t,n){if("change"===e.type&&"field"===e.element){var o=t.getInputTargetBlock(n);if(o&&o.id===e.blockId)return 1}return"move"===e.type&&(e.oldParentId===t.id&&e.oldInputName===n||e.newParentId===t.id&&e.newInputName===n)}function fieldSetValidColor(e,t){e=e.textElement_;e&&(e.style.fill=t?"#000":"red")}function fieldSetValidator(t,n){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];t.setValidator(function(e){return n(t,e)});if(e){e=n(t,t.getValue());if(void 0!==e){t.setValue(e);fieldSetValidColor(t,!0)}}}function getSurroundParentOfType(e,t){for(var n=e.getSurroundParent();n&&n.type!=t;)n=n.getSurroundParent();return n}function workspaceSvgScrollTop(e){if(e.scrollbar){var t=e.getMetrics();if(t.contentWidth>2*t.viewWidth)var n=t.viewWidth/2-20;else{n=(t.contentWidth-t.viewWidth)/2;e.flyout_&&(n-=e.flyout_.width_/2)}t=t.contentHeight>2*t.viewHeight?t.viewHeight/2-20:(t.contentHeight-t.viewHeight)/2;e.scrollbar.set(n,t)}}function pasteBlockXMLToWorkspace(e,t){Blockly.Events.setGroup(!0);var n=t.getMetrics(),o=t.getOriginOffsetInPixels(),i=(n.viewWidth/2+n.absoluteLeft-o.x)/t.scale,o=(n.viewHeight/2+n.absoluteTop-o.y)/t.scale;e.setAttribute("x",i);e.setAttribute("y",o);t.paste(e);if(Blockly.selected){o=Blockly.selected.getHeightWidth(),t=40*(Math.random()-.5),e=40*(Math.random()-.5);Blockly.selected.moveBy(-o.width/2+t,-o.height/2+e)}Blockly.Events.setGroup(!1)}function generateBlockCode(e){var t=new Blockly.Workspace;t.addTopBlock(e);t.variableMap_=e.workspace.getVariableMap();e=Blockly.JavaScript.workspaceToCode(t);t.topBlocks_=[];t.variableMap_=new Blockly.VariableMap(this);t.dispose();return e}function blockHasNonShadowInputs(t){return void 0!==t.inputList.find(function(e){e=t.getInputTargetBlock(e.name);return null!==e&&!e.isShadow()})}function resetWorkspaceZoomPos(e){e.markFocused();e.setScale(e.options.zoomOptions.startScale);e.beginCanvasTransition();e.scrollCenter();setTimeout(e.endCanvasTransition.bind(e),500);Blockly.Touch.clearTouchIdentifier()}function collectMissingBlockDefsInfo(e){var o={};Array.from(e.getElementsByTagName("block")).forEach(function(e){var t=e.getAttribute("type");if(void 0===Blockly.Blocks[t]||void 0===Blockly.JavaScript[t]){var n=o[t]=o[t]||{needPrevStatement:!1,needNextStatement:!1,needOutput:!1,valueInputs:[],statementInputs:[]};!e.parentNode||"statement"!==e.parentNode.tagName&&"next"!==e.parentNode.tagName||(n.needPrevStatement=n.needPrevStatement||!0);null!==e.querySelector(":scope > next")&&(n.needNextStatement=n.needNextStatement||!0);e.parentNode&&"value"===e.parentNode.tagName&&(n.needOutput=n.needOutput||!0);Array.from(e.querySelectorAll(":scope > value")).forEach(function(e){e=e.getAttribute("name");-1===n.valueInputs.indexOf(e)&&n.valueInputs.push(e)});Array.from(e.querySelectorAll(":scope > statement")).forEach(function(e){e=e.getAttribute("name");-1===n.statementInputs.indexOf(e)&&n.statementInputs.push(e)})}});return o}function addDummyMissingBlockDefs(t){for(var e in t)!function(e){var n=t[e];Blockly.Blocks[e]={init:function(){var t=this;this.appendDummyInput().appendField(e);this.setPreviousStatement(n.needPrevStatement);this.setNextStatement(n.needNextStatement);this.setOutput(n.needOutput,null);this.setColour("red");this.setWarningText(Blockly.Msg.MISSING_BLOCK_DEFINITION);this.setTooltip(Blockly.Msg.MISSING_BLOCK_DEFINITION);n.valueInputs.forEach(function(e){t.appendValueInput(e)});n.statementInputs.forEach(function(e){t.appendStatementInput(e)})}};Blockly.JavaScript[e]=function(){return""}}(e)}var COLOR_ADVANCED="#5845f6",COLOR_INIT="#ef8252",COLOR_EVENTS="#b25050",COLOR_SELECT="#50b2b2",COLOR_SCENES="#e96868",COLOR_SCENES_PERCENTAGE="#e23636",COLOR_OPERATIONS="#50b271",COLOR_OPERATIONS_DARK="#50b291",COLOR_TIME="#6565dd",COLOR_HTML="#b26850",COLOR_HTML_DOCUMENT="#b27950",COLOR_SOUND_LOAD="#b2b250",COLOR_SOUND="#b2a250",COLOR_VR="#B122C4",COLOR_PHYSICS="#5f636e",COLOR_PP="#5c145b",COLOR_LOGIC="#5081b2",COLOR_LOOPS="#50b250",COLOR_TEXT="#50b291",COLOR_NUMBERS="#5060b2",COLOR_LISTS="#7150b2",COLOR_DICTS="#006fa5",COLOR_VARIABLES="#b25081",COLOR_PROCEDURES="#a250b2",COLOR_SYSTEM="#b28150",deprecatedBlocks={};Blockly.HSV_SATURATION=.55;Blockly.HSV_VALUE=.7;var BFUN$2=Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_,WHEN_DRAGGED_OVER_TYPE="whenDraggedOver",TMP_DEPRECATED_INPUT_NAME="%tmp_deprecated_input%",DEPRECATED_FIELD_INIT_VALUE="%deprecated_field_init_value%",__EXEC_SCRIPT_VARS_BUILTIN__="__EXEC_SCRIPT_VARS_BUILTIN__",__EXEC_SCRIPT_PROC_ID__="PROC";function getInitPuzzles(){return'\n<category name="Initialization" colour="'.concat(COLOR_INIT,'">\n    <block type="initSettings" allowInit="true"></block>\n    <block type="initPreloader" allowInit="true"></block>\n    <block type="percentage" allowInit="true"></block>\n    <block type="loadFont" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">path/to/font.ttf</field>\n            </shadow>\n        </value>\n        <value name="FONTFAMILY">\n            <shadow type="text">\n                <field name="TEXT">My Font</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n')}function getMainPuzzles(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return'\n<category name="Events" colour="'.concat(COLOR_EVENTS,'">\n    <block type="whenClicked">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="pickedObject"></block>\n    <block type="whenHovered">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="hoveredObject"></block>\n    <block type="whenMoved">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="DELTA">\n            <shadow type="math_number">\n                <field name="NUM">0.01</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="').concat(WHEN_DRAGGED_OVER_TYPE,'">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dragMove">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dragRotate">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dragScale">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Selectors" colour="').concat(COLOR_SELECT,'">\n    <label text="Select an object:"></label>\n    <block type="objectList"></block>\n    <sep gap="40"></sep>\n    <label text="Get all objects:"></label>\n    <block type="allObjectList"></block>\n    <sep gap="40"></sep>\n    <label text="Select a group of objects:"></label>\n    <block type="groupList"></block>\n    <sep gap="40"></sep>\n    <label text="Select an animation clip:"></label>\n    <block type="animationList"></block>\n    <sep gap="40"></sep>\n    <label text="Select a material:"></label>\n    <block type="materialList"></block>\n</category>\n<category name="Objects" colour="').concat(COLOR_OPERATIONS,'">\n    <block type="show">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="hide">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="isObjectVisible">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getObjectsFrom"></block>\n    <block type="cloneObject">\n        <value name="OBJECTINPUT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removeObject">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="snapToObject">\n        <value name="SNAPWHAT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="SNAPTO">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setObjTransform">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getObjTransform">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="applyObjLocalTransform">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setObjDirection">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="X">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="Y">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n        <value name="Z">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getObjDirection">\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getMorphFactor">\n        <value name="OBJ_NAME">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setMorphFactor">\n        <value name="OBJ_NAME">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="FACTOR">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="addAnnotation">\n        <value name="ANNOTATION">\n            <shadow type="text">\n                <field name="TEXT">1</field>\n            </shadow>\n        </value>\n        <value name="TARGET">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="CONTENTS">\n            <shadow type="text">\n                <field name="TEXT">Point of interest #1</field>\n            </shadow>\n        </value>\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT">poi1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removeAnnotation">\n        <value name="TARGET">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="openAnnotation">\n        <value name="VALUE">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="closeAnnotation">\n        <value name="VALUE">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="updateTextObject">\n        <value name="VALUE1">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="VALUE2">\n            <shadow type="text">\n                <field name="TEXT">Hello, Verge!</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="makeParent">\n        <value name="PARENT_WHAT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="PARENT_TO">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="distanceBetweenObjects">\n        <value name="OBJECT1">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="OBJECT2">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getObjCustomProps">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="outline">\n        <value name="TARGET">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setLightParam">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getLightParam">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Materials" colour="').concat(COLOR_OPERATIONS,'">\n    <block type="assignMaterial">\n        <value name="VALUE2">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="VALUE1">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="replaceTexture">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="NEW_TEX_URL">\n            <shadow type="text">\n                <field name="TEXT">./newTexture.png</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getTextureParam">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setMaterialColor">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="R">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n        <value name="G">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n        <value name="B">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getMaterialColor">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setMaterialValue">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="VALUE">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getMaterialValue">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getObjectMaterial">\n        <value name="VALUE">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="textureFromText">\n        <value name="TEXT">\n            <shadow type="text">\n                <field name="TEXT">Hello, Verge!</field>\n            </shadow>\n        </value>\n        <value name="WIDTH">\n            <shadow type="math_number">\n                <field name="NUM">1024</field>\n            </shadow>\n        </value>\n        <value name="HEIGHT">\n            <shadow type="math_number">\n                <field name="NUM">512</field>\n            </shadow>\n        </value>\n        <value name="FONTFAMILY">\n            <shadow type="text">\n                <field name="TEXT">Arial</field>\n            </shadow>\n        </value>\n        <value name="FONTSIZE">\n            <shadow type="math_number">\n                <field name="NUM">160</field>\n            </shadow>\n        </value>\n        <value name="OFFSET">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="generateNormalMap">\n        <value name="SRCURL">\n            <shadow type="text">\n                <field name="TEXT">./sourceImage.png</field>\n            </shadow>\n        </value>\n        <value name="STRENGTH">\n            <shadow type="math_number">\n                <field name="NUM">2.5</field>\n            </shadow>\n        </value>\n        <value name="LEVEL">\n            <shadow type="math_number">\n                <field name="NUM">7.0</field>\n            </shadow>\n        </value>\n        <value name="BLUR">\n            <shadow type="math_number">\n                <field name="NUM">0.0</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Animation" colour="').concat(COLOR_OPERATIONS,'">\n    <block type="playAnimationAdv">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="stopAnimation">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="pauseAnimation">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="resumeAnimation">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setAnimationFrame">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getAnimationFrame">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="isAnimationPlaying">\n        <value name="VALUE">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getAnimations">\n        <value name="OBJECTINPUT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="cloneAnimation">\n        <value name="ANIMATIONS">\n            <shadow type="animationList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n        <value name="TO">\n            <shadow type="math_number">\n                <field name="NUM">100</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="animateParam">\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n        <value name="TO">\n            <shadow type="math_number">\n                <field name="NUM">10</field>\n            </shadow>\n        </value>\n        <value name="DURATION">\n            <shadow type="math_number">\n                <field name="NUM">3</field>\n            </shadow>\n        </value>\n        <value name="REPEAT">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="animateParamUpdate"></block>\n    <block type="objConstraintAddLimit">\n        <value name="CONSTRAINT">\n            <shadow type="text">\n                <field name="TEXT">myConst</field>\n            </shadow>\n        </value>\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="MIN">\n            <shadow type="math_number">\n                <field name="NUM">-1</field>\n            </shadow>\n        </value>\n        <value name="MAX">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="objConstraintAddCopy">\n        <value name="CONSTRAINT">\n            <shadow type="text">\n                <field name="TEXT">myConst</field>\n            </shadow>\n        </value>\n        <value name="OBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="TARGETOBJ">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="objConstraintOperations">\n        <value name="CONSTRAINT">\n            <shadow type="text">\n                <field name="TEXT">myConst</field>\n            </shadow>\n        </value>\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Camera" colour="').concat(COLOR_OPERATIONS,'">\n    <block type="lookAt">\n        <value name="LOOKAT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="DURATION">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="tweenCameraExt">\n        <value name="DURATION">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="zoomCameraToObject">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="DURATION">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setActiveCamera">\n        <value name="CAMERA">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getActiveCamera"></block>\n    <block type="autoRotateCamera">\n        <value name="SPEED">\n            <shadow type="math_number">\n                <field name="NUM">2</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getCameraDirection"></block>\n</category>\n<category name="Scenes" colour="').concat(COLOR_SCENES,'">\n    <block type="loadScene">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">path/to/scene.gltf</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="appendScene">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">path/to/scene.gltf</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="unloadScene">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">path/to/scene.gltf</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="percentage2"></block>\n    <block type="enableRendering"></block>\n    <block type="disableRendering"></block>\n    <block type="createEnvironment">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT">myEnvMaterial</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="exportToGLTF">\n        <value name="OBJ_NAME">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="raycast">\n        <value name="INTERSECT_OBJS">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="addFog">\n        <value name="R">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n        <value name="G">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n        <value name="B">\n            <shadow type="math_number">\n                <field name="NUM">0.5</field>\n            </shadow>\n        </value>\n        <value name="DENSITY">\n            <shadow type="math_number">\n                <field name="NUM">0.03</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Time" colour="').concat(COLOR_TIME,'">\n    <block type="setTimeout" allowInit="true">\n        <value name="VALUE">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setInterval" allowInit="true">\n        <value name="VALUE">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="everyFrame"></block>\n    <block type="elapsed"></block>\n    <block type="elapsedTotal"></block>\n    <block type="setTimer" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT">myTimer</field>\n            </shadow>\n        </value>\n        <value name="VALUE">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="REPEAT">\n            <shadow type="math_number">\n                <field name="NUM">Infinity</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removeTimer" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT">myTimer</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getDateTime" allowInit="true"></block>\n</category>\n<category name="HTML" colour="').concat(COLOR_HTML,'">\n    <block type="addHTMLElement" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="TARGET_ID">\n            <shadow type="DOMObjectSelector">\n                <field name="DOM_OBJECT">CONTAINER</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setHTMLElemAttribute" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getHTMLElemAttribute" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="createCSSRule" allowInit="true">\n        <value name="CSS_RULE">\n            <shadow type="text">\n                <field name="TEXT">.myClass</field>\n            </shadow>\n        </value>\n        <value name="CSS_RULE_CONT">\n            <shadow type="text">\n                <field name="TEXT">color: red;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setHTMLElemStyle" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setCSSRuleStyle" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="eventHTMLElem" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getEventProperty" allowInit="true"></block>\n    <block type="DOMObjectSelector" allowInit="true"></block>\n    <block type="querySelector" allowInit="true">\n        <value name="QUERY">\n            <shadow type="text">\n                <field name="TEXT">div.myClass</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="createCanvasElem">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT">myCanvas</field>\n            </shadow>\n        </value>\n        <value name="WIDTH">\n            <shadow type="math_number">\n                <field name="NUM">1024</field>\n            </shadow>\n        </value>\n        <value name="HEIGHT">\n            <shadow type="math_number">\n                <field name="NUM">1024</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="drawLineObjectHTML">\n        <value name="OBJECTINPUT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="WIDTH">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="COLOR">\n            <shadow type="text">\n                <field name="TEXT">#F00</field>\n            </shadow>\n        </value>\n        <value name="OFFSET">\n            <shadow type="math_number">\n                <field name="NUM">5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removeLineObjectHTML">\n        <value name="OBJECTINPUT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="bindHTMLObject">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="OBJECTINPUT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="initFullscreen" allowInit="true">\n        <value name="ID">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="openWebPage" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">https://www.soft8soft.com/</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="socialShareLink" allowInit="true">\n        <value name="TITLE">\n            <shadow type="text">\n                <field name="TEXT">Verge3D Web Interactive</field>\n            </shadow>\n        </value>\n        <value name="TEXT">\n            <shadow type="text">\n                <field name="TEXT">Immerse yourself in a graphics experience powered by Verge3D!</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setUrlParam" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">https://sandbox.soft8soft.com/</field>\n            </shadow>\n        </value>\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="VALUE">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getUrlData" allowInit="true"></block>\n    <block type="takeScreenshot"></block>\n    <block type="downloadFile">\n        <value name="CONTENTS">\n            <shadow type="text">\n                <field name="TEXT">data:,</field>\n            </shadow>\n        </value>\n        <value name="FILENAME">\n            <shadow type="text">\n                <field name="TEXT">screenshot.png</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="openFile"></block>\n    <block type="openedFile"></block>\n</category>\n<category name="AR/VR" colour="').concat(COLOR_VR,'">\n    <block type="checkVRMode" allowInit="false"></block>\n    <block type="enterVRMode" allowInit="false"></block>\n    <block type="endVRMode" allowInit="false"></block>\n    <block type="checkARMode" allowInit="false"></block>\n    <block type="enterARMode" allowInit="false"></block>\n    <block type="arHitTest" allowInit="false">\n        <value name="SMOOTH">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="arHitPoint">allowInit="false"</block>\n    <block type="xrSessionEvent" allowInit="false"></block>\n    <block type="traverseControllers" allowInit="false"></block>\n    <block type="xrControllerProp" allowInit="false"></block>\n</category>\n<category name="Audio/Video" colour="').concat(COLOR_SOUND,'">\n    <block type="loadSoundAdv" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">./mySound.mp3</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="loadVideo" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">./myVideo.mp4</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="playSound" allowInit="true"></block>\n    <block type="pauseSound" allowInit="true"></block>\n    <block type="stopSound" allowInit="true"></block>\n    <block type="rewindSound" allowInit="true"></block>\n    <block type="setPlaybackRate" allowInit="true">\n        <value name="RATE">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="isSoundPlaying" allowInit="true"></block>\n    <block type="volume" allowInit="true">\n        <value name="VOLUME">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="soundVideoMute" allowInit="true"></block>\n    <block type="soundVideoUnmute" allowInit="true"></block>\n</category>\n<category name="Physics" colour="').concat(COLOR_PHYSICS,'">\n    <block type="createPhysicsWorld" allowInit="true">\n        <value name="GRAVITY">\n            <shadow type="math_number">\n                <field name="NUM">9.8</field>\n            </shadow>\n        </value>\n        <value name="FPS">\n            <shadow type="math_number">\n                <field name="NUM">120</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="createPhysicsBody">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="MASS">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="createSoftBody">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="MASS">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="PRESSURE">\n            <shadow type="math_number">\n                <field name="NUM">100</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removePhysicsBody">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="physicsBodyApplyParam">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="physicsBodyGetParam">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setBodyState">\n        <value name="OBJECT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="onSimulationTick"></block>\n    <block type="snapBody">\n        <value name="SNAPWHAT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="SNAPTO">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="addPhysicsConstraint">\n        <value name="OBJ1">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="OBJ2">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removePhysicsConstraint">\n        <value name="OBJ1">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="OBJ2">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="softBodyAnchor">\n        <value name="ANCHORWHAT">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="ANCHORTO">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="detectCollision">\n        <value name="OBJECT_A">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="OBJECT_B">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="collisionInfo"></block>\n</category>\n<category name="Post-processing" colour="').concat(COLOR_PP,'">\n    <block type="bloom">\n        <value name="THRESHOLD">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.8</field>\n            </shadow>\n        </value>\n        <value name="STRENGTH">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.3</field>\n            </shadow>\n        </value>\n        <value name="RADIUS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="brightnessContrast">\n        <value name="BRIGHTNESS">\n            <shadow type="number_slider">\n                <field name="NUM" min="-5" max="5" step="0.1">0.1</field>\n            </shadow>\n        </value>\n        <value name="CONTRAST">\n            <shadow type="number_slider">\n                <field name="NUM" min="-1" max="1" step="0.1">0.3</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dof">\n        <value name="FOCUS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="100" step="0.1">10</field>\n            </shadow>\n        </value>\n        <value name="APERTURE">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">1</field>\n            </shadow>\n        </value>\n        <value name="MAXBLUR">\n            <shadow type="number_slider">\n                <field name="NUM" min="0.001" max="0.1" step="0.001">0.01</field>\n            </shadow>\n        </value>\n        <value name="DEPTH_LEAK_THRESH">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.2</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="grayscale"></block>\n    <block type="ssaoAdv">\n        <value name="RADIUS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.1</field>\n            </shadow>\n        </value>\n        <value name="MIN_DIST">\n            <shadow type="number_slider">\n                <field name="NUM" min="0.001" max="0.01" step="0.001">0.005</field>\n            </shadow>\n        </value>\n        <value name="MAX_DIST">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.1</field>\n            </shadow>\n        </value>\n    </block>\n    \x3c!--<block type="ssaa"></block>--\x3e\n    <block type="refraction">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="DISTANCE">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">1</field>\n            </shadow>\n        </value>\n        <value name="RENDER_AFTER">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="ssr">\n        <value name="MATERIAL">\n            <shadow type="materialList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n        <value name="STEPS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="1000" step="1">100</field>\n            </shadow>\n        </value>\n        <value name="STRIDE">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">5</field>\n            </shadow>\n        </value>\n        <value name="BINARY_SEARCH_STEPS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">4</field>\n            </shadow>\n        </value>\n        <value name="THICKNESS">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="0.1" step="0.01">0.01</field>\n            </shadow>\n        </value>\n        <value name="MAX_DISTANCE">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="1000" step="1">100</field>\n            </shadow>\n        </value>\n        <value name="RESOLUTION">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">0.5</field>\n            </shadow>\n        </value>\n        <value name="JITTER">\n            <shadow type="number_slider">\n                <field name="NUM" min="0" max="10" step="0.1">1</field>\n            </shadow>\n        </value>\n        <value name="RENDER_AFTER">\n            <shadow type="objectList">\n                <field name="FIELDNAME">&lt;none&gt;</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="removePostprocessing"></block>\n</category>\n<category name="Logic" colour="').concat(COLOR_LOGIC,'">\n    <block type="controls_if" allowInit="true"></block>\n    <block type="controls_ifelse" allowInit="true"></block>\n    <block type="logic_compare" allowInit="true"></block>\n    <block type="logic_operation" allowInit="true"></block>\n    <block type="logic_negate" allowInit="true"></block>\n    <block type="logic_boolean" allowInit="true"></block>\n    <block type="logic_null" allowInit="true"></block>\n    <block type="logic_ternary" allowInit="true"></block>\n</category>\n<category name="Loops" colour="').concat(COLOR_LOOPS,'">\n    <block type="controls_repeat_ext" allowInit="true">\n        <value name="TIMES">\n            <shadow type="math_number">\n                <field name="NUM">8</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="controls_forEach" allowInit="true"></block>\n    <block type="controls_for" allowInit="true">\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="TO">\n            <shadow type="math_number">\n                <field name="NUM">8</field>\n            </shadow>\n        </value>\n        <value name="BY">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="controls_whileUntil" allowInit="true"></block>\n    <block type="controls_flow_statements" allowInit="true"></block>\n</category>\n<category name="Text" colour="').concat(COLOR_TEXT,'">\n    <block type="text" allowInit="true">\n        <field name="TEXT">Hello, Verge!</field>\n    </block>\n    <block type="textMultiline" allowInit="true">\n        <field name="TEXT">This is\nmulti-line\ntext</field>\n    </block>\n    \x3c!--\n        NOTE: workaround to match the textMultiline block height, because it\'s\n        not relevant yet then the flyout is shown (the block\'s editor field is\n        updated asynchronously a bit later).\n    --\x3e\n    <sep gap="54" allowInit="true"></sep>\n    <block type="text_join" allowInit="true"></block>\n    <block type="text_append" allowInit="true"></block>\n    <block type="text_replace" allowInit="true"></block>\n    <block type="text_reverse" allowInit="true"></block>\n    <block type="text_length" allowInit="true"></block>\n    <block type="text_isEmpty" allowInit="true"></block>\n    <block type="text_indexOf" allowInit="true"></block>\n    <block type="text_charAt" allowInit="true"></block>\n    <block type="text_getSubstring" allowInit="true"></block>\n    <block type="text_changeCase" allowInit="true"></block>\n    <block type="text_trim" allowInit="true"></block>\n    <block type="text_count" allowInit="true"></block>\n    <block type="textNewLine" allowInit="true"></block>\n    <block type="convertToNumber" allowInit="true"></block>\n    <block type="text_prompt_ext" allowInit="true"></block>\n</category>\n<category name="Numbers" colour="').concat(COLOR_NUMBERS,'">\n    <block type="math_number" allowInit="true">\n        <field name="NUM">0</field>\n    </block>\n    <block type="angle" allowInit="true">\n        <field name="ANGLE">45</field>\n    </block>\n    <block type="math_arithmetic" allowInit="true">\n        <value name="A">\n            <shadow type="math_number">\n                <field name="NUM">2</field>\n            </shadow>\n        </value>\n        <value name="B">\n            <shadow type="math_number">\n                <field name="NUM">2</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_single" allowInit="true">\n        <value name="NUM">\n            <shadow type="math_number">\n                <field name="NUM">4</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_round" allowInit="true">\n        <value name="NUM">\n            <shadow type="math_number">\n                <field name="NUM">2.5</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="toFixedPoint" allowInit="true">\n        <value name="PRECISION">\n            <shadow type="math_number">\n                <field name="NUM">2</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_number_property" allowInit="true">\n        <value name="NUMBER_TO_CHECK">\n            <shadow type="math_number">\n                <field name="NUM">2</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_constrain" allowInit="true"></block>\n    <block type="math_random_int" allowInit="true">\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n        <value name="TO">\n            <shadow type="math_number">\n                <field name="NUM">8</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_random_float" allowInit="true"></block>\n    <block type="math_modulo" allowInit="true">\n        <value name="DIVIDEND">\n            <shadow type="math_number">\n                <field name="NUM">8</field>\n            </shadow>\n        </value>\n        <value name="DIVISOR">\n            <shadow type="math_number">\n                <field name="NUM">3</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_on_list" allowInit="true"></block>\n    <block type="math_trig" allowInit="true">\n        <value name="NUM">\n            <shadow type="math_number">\n                <field name="NUM">45</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="math_constant" allowInit="true"></block>\n    <block type="createVector" allowInit="true">\n        <value name="X">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n        <value name="Y">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n        <value name="Z">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="setVectorValue" allowInit="true">\n        <value name="VALUE">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getVectorValue" allowInit="true"></block>\n    <block type="vectorMath" allowInit="true"></block>\n</category>\n<category name="Lists" colour="').concat(COLOR_LISTS,'">\n    <block type="lists_create_with" allowInit="true"></block>\n    <block type="lists_length" allowInit="true"></block>\n    <block type="lists_getIndex" allowInit="true"></block>\n    <block type="lists_setIndex" allowInit="true"></block>\n    <block type="lists_create_empty" allowInit="true"></block>\n    <block type="lists_repeat" allowInit="true"></block>\n    <block type="lists_reverse" allowInit="true"></block>\n    <block type="lists_isEmpty" allowInit="true"></block>\n    <block type="lists_indexOf" allowInit="true"></block>\n    <block type="listsCheckItem" allowInit="true"></block>\n    <block type="lists_getSublist" allowInit="true"></block>\n    <block type="lists_sort" allowInit="true"></block>\n    <block type="lists_split" allowInit="true"></block>\n</category>\n<category name="Dictionaries" colour="').concat(COLOR_DICTS,'">\n    <block type="dictCreateEmpty" allowInit="true"></block>\n    <block type="dictSet" allowInit="true">\n        <value name="KEY">\n            <shadow type="text">\n                <field name="TEXT">someKey</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dictGet" allowInit="true">\n        <value name="KEY">\n            <shadow type="text">\n                <field name="TEXT">someKey</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dictGetKeys" allowInit="true"></block>\n    <block type="dictCheck" allowInit="true">\n        <value name="KEY">\n            <shadow type="text">\n                <field name="TEXT">someKey</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="dictRemove" allowInit="true"></block>\n    <block type="dictIsEmpty" allowInit="true"></block>\n</category>\n<category name="Variables" custom="VARIABLE" colour="').concat(COLOR_VARIABLES,'"></category>\n<category name="Procedures" custom="PROCEDURE" colour="').concat(COLOR_PROCEDURES,'"></category>\n<category name="System" colour="').concat(COLOR_SYSTEM,'">\n    <block type="console.log" allowInit="true">\n        <value name="VALUE">\n            <shadow type="text">\n                <field name="TEXT">Hello, Verge!</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="printPerformanceInfo"></block>\n    <block type="featureAvailable" allowInit="true"></block>\n    <block type="getGPU"></block>\n    <block type="setScreenScale">\n        <value name="FACTOR">\n            <shadow type="math_number">\n                <field name="NUM">1</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="nativeScreenScale" allowInit="true"></block>\n    <block type="detectGamepad" allowInit="true"></block>\n    <block type="gamepadIndex" allowInit="true"></block>\n    <block type="getGamepadProp" allowInit="true">\n        <value name="INDEX">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n</category>\n<category name="Advanced" colour="').concat(COLOR_ADVANCED,'">\n    <block type="comment"></block>\n    <block type="execScript" allowInit="true">\n        <value name="TEXT">\n            <shadow type="textMultiline">\n                <field name="HIGHLIGHT_MODE">javascript</field>\n                <field name="TEXT">').concat(e.INIT_TAB?"// Built-in variables: v3d, VARS, PROC\nconsole.log('GPU Model: ' + v3d.Detector.getGPUModel());":"// Built-in variables: app, v3d, VARS, PROC\napp.scene.traverse(function(obj) {\n    obj.material = new v3d.MeshBasicMaterial({\n        color: new v3d.Color(Math.random(), Math.random(), Math.random())\n    });\n});","</field>\n            </shadow>\n        </value>\n    </block>\n    \x3c!--\n        NOTE: workaround to match the execScript block height, because it's\n        not relevant yet then the flyout is shown (the block's editor field is\n        updated asynchronously a bit later).\n    --\x3e\n    <sep gap=\"").concat(e.INIT_TAB?"54":"105",'" allowInit="true"></sep>\n    <block type="callJSFunction">\n        <field name="NAME">myJSFunction</field>\n    </block>\n    <block type="callJSFunctionWithReturn">\n        <field name="NAME">myJSFunction</field>\n    </block>\n    <block type="loadFile" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">./mydata.txt</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="sendData" allowInit="true">\n        <value name="URL">\n            <shadow type="text">\n                <field name="TEXT">./myURL.php</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="loadedFile" allowInit="true"></block>\n    <block type="readJSON" allowInit="true"></block>\n    <block type="readCSV" allowInit="true">\n        <value name="FROM">\n            <shadow type="math_number">\n                <field name="NUM">0</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="saveState"></block>\n    <block type="undoState"></block>\n    <block type="allVariableNames"></block>\n    <block type="getVariableValueByName">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT">name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getJavaScriptObject" allowInit="true"></block>\n    <block type="waitPromise" allowInit="true"></block>\n    <block type="promiseValue" allowInit="true"></block>\n    <block type="connector" allowInit="true"></block>\n</category>\n')}function getGlobalVars(){return"\n// global variables/constants used by puzzles' functions\n".concat(runtimeChunks.LIST_NONE,"\nvar _pGlob = {};\n\n_pGlob.objCache = {};\n_pGlob.fadeAnnotations = true;\n_pGlob.objClickInfo = [];\n_pGlob.pickedObject = '';\n_pGlob.objHoverInfo = [];\n_pGlob.hoveredObject = '';\n_pGlob.objMovementInfos = {};\n_pGlob.objDragOverCallbacks = [];\n_pGlob.objDragOverInfoByBlock = {}\n_pGlob.dragMoveOrigins = {};\n_pGlob.dragScaleOrigins = {};\n_pGlob.mediaElements = {};\n_pGlob.loadedFiles = {};\n_pGlob.loadedFile = '';\n_pGlob.promiseValue = '';\n_pGlob.animMixerCallbacks = [];\n_pGlob.arHitPoint = new v3d.Vector3(0, 0, 0);\n_pGlob.states = [];\n_pGlob.percentage = 0;\n_pGlob.animateParamUpdate = null;\n_pGlob.openedFile = '';\n_pGlob.xrSessionAcquired = false;\n_pGlob.xrSessionCallbacks = [];\n_pGlob.screenCoords = new v3d.Vector2();\n_pGlob.gamepadIndex = 0;\n\n_pGlob.AXIS_X = new v3d.Vector3(1, 0, 0);\n_pGlob.AXIS_Y = new v3d.Vector3(0, 1, 0);\n_pGlob.AXIS_Z = new v3d.Vector3(0, 0, 1);\n_pGlob.MIN_DRAG_SCALE = 10e-4;\n_pGlob.SET_OBJ_ROT_EPS = 1e-8;\n\n_pGlob.vec2Tmp = new v3d.Vector2();\n_pGlob.vec2Tmp2 = new v3d.Vector2();\n_pGlob.vec3Tmp = new v3d.Vector3();\n_pGlob.vec3Tmp2 = new v3d.Vector3();\n_pGlob.vec3Tmp3 = new v3d.Vector3();\n_pGlob.vec3Tmp4 = new v3d.Vector3();\n_pGlob.eulerTmp = new v3d.Euler();\n_pGlob.eulerTmp2 = new v3d.Euler();\n_pGlob.quatTmp = new v3d.Quaternion();\n_pGlob.quatTmp2 = new v3d.Quaternion();\n_pGlob.colorTmp = new v3d.Color();\n_pGlob.mat4Tmp = new v3d.Matrix4();\n_pGlob.planeTmp = new v3d.Plane();\n_pGlob.raycasterTmp = new v3d.Raycaster();\n_pGlob.intervals = {};\n\nvar _pPhysics = {};\n\n_pPhysics.tickCallbacks = [];\n_pPhysics.syncList = [];\n_pPhysics.consList = [];\n\n// internal info\n_pPhysics.collisionData = [];\n\n// goes to collision callback\n_pPhysics.collisionInfo = {\n    objectA: '',\n    objectB: '',\n    distance: 0,\n    positionOnA: [0, 0, 0],\n    positionOnB: [0, 0, 0],\n    normalOnB: [0, 0, 0]\n};\n\nvar _noWebAudioReported = false;\n")}function retrieveObjCode(){return"\n".concat(runtimeChunks.notIgnoredObj,"\n").concat(runtimeChunks.getObjectByName,"\n").concat(runtimeChunks.getAllObjectNames,"\n").concat(runtimeChunks.getObjectNamesByGroupName,"\n").concat(runtimeChunks.retrieveObjectNames,"\n")}function coordsTransformCode(){return"\n".concat(runtimeChunks.getCoordSystem,"\n").concat(runtimeChunks.coordsTransform,"\n").concat(runtimeChunks.eulerV3DToBlenderShortest,"\n")}function blockReady(t,n){t.rendered?AppAdapter.ready(function(e){n(t,e)}):onBlockCreate(t,function(t,e){AppAdapter.ready(function(e){t.workspace&&n(t,e)})})}function createLivePreviewIcon(e){var t=(e.workspace.isFlyout?e.workspace.options.parentWorkspace:e.workspace).options.pathToMedia,n="livePreviewEnabled",o="livePreviewDisabled",i=Blockly.utils.dom.createSvgElement("image",{href:"".concat(t,"./postprocessing-icon.svg")}),r=Blockly.utils.dom.createSvgElement("image",{href:"".concat(t,"./postprocessing-icon-crossed-out.svg")}),e=new BlocklyExt.Icons.TooltipIcon(e);e.setLPIconStatus=function(e){this.setImageElement(e?i:r);this.setTooltip(e?"Live preview is enabled.":"Live preview is disabled due to connected inputs.");this.getIconGroupElement().classList.remove(n,o);this.getIconGroupElement().classList.add(e?n:o)};e.createIcon();e.setLPIconStatus(!0);return e}function enablePPLivePreview(t){var n=createLivePreviewIcon(t);t.getIcons=function(){var e=Object.getPrototypeOf(this).getIcons.call(this);e.push(n);return e};function o(e){if(e.type===Blockly.Events.MOVE&&(e.newParentId===t.id||e.oldParentId===t.id)){i=!blockHasNonShadowInputs(t);n.setLPIconStatus(i)}if(e.type===Blockly.Events.CHANGE&&"field"===e.element&&i){e=t.workspace.getBlockById(e.blockId);e&&(e!==t&&getSurroundParentOfType(e,t.type)!==t||v3d.PL&&v3d.PL.eval&&v3d.PL.eval(generateBlockCode(t)))}}var i=!0,r=t.onchange;"function"==typeof r?t.setOnChange(function(e){r.call(this,e);o.call(this,e)}):t.setOnChange(o);blockReady(t,function(e,t){i=!blockHasNonShadowInputs(e);n.setLPIconStatus(i)})}function getMediaDir(e){return(e.workspace.isFlyout?e.workspace.options.parentWorkspace:e.workspace).options.pathToMedia}function initBlocks(){Blockly.Blocks.invisibleBlock={init:function(){this.translate(-9999,-9999)}};Blockly.Blocks.emptyBlock={init:function(){this.contextMenu=!1}};function e(e,t,n){var o={},i={};e.forEach(function(e){var t=e[0],n=e[1],e=e[2];o[t]=e;i[t]=n});return{_boolOptValues:o,_boolOptLabels:i,_boolOptColor:t,mutationToDom:function(){var e,t=document.createElement("mutation");for(e in this._boolOptValues)t.setAttribute(e.toLowerCase(),Boolean(this._boolOptValues[e]));return t},domToMutation:function(e){for(var t in this._boolOptValues)this._boolOptValues[t]="true"==e.getAttribute(t.toLowerCase());n&&n.call(this,null)},decompose:function(e){var t,n=e.newBlock("emptyBlock");n.setColour(this._boolOptColor);n.inputList.forEach(function(e){n.removeInput(e.name)});for(t in this._boolOptValues)n.appendDummyInput().appendField(this._boolOptLabels[t]).appendField(new Blockly.FieldCheckbox(this._boolOptValues[t]?"TRUE":"FALSE"),t).setAlign(Blockly.ALIGN_RIGHT);n.initSvg();return n},compose:function(e){for(var t in this._boolOptValues)this._boolOptValues[t]="TRUE"==e.getFieldValue(t);n&&n.call(this,e)}}}function d(e,t){t=t||"";return e.length?"function("+t+") {\n"+e+"}":"function("+t+") {}"}Blockly.Blocks.whenClicked={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("when clicked");this.appendDummyInput("X_RAY").appendField("x-ray").appendField(new Blockly.FieldCheckbox("FALSE"),"X_RAY");this.appendDummyInput("DOUBLE_CLICK").appendField(" double click / tap").appendField(new Blockly.FieldCheckbox("FALSE"),"DOUBLE_CLICK");this.appendDummyInput("MOUSE_BUTTONS").appendField(" mouse buttons:").appendField(new Blockly.FieldCheckbox("TRUE"),"LEFT_BUTTON").appendField(new Blockly.FieldCheckbox("TRUE"),"MIDDLE_BUTTON").appendField(new Blockly.FieldCheckbox("TRUE"),"RIGHT_BUTTON");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Waits until a user clicks on a specified 3D object\n            (or any object in a specified list or group, or any object on the\n            scene if the "all objects" puzzle is used) - then runs puzzles in\n            the "do" slot, or in the "missed: do" slot if the user clicks on\n            something else or on the background.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#when_clicked");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["advEventOptions","advanced event options"],["enableIfMissed",'enable "if missed" action',!1]],COLOR_EVENTS,function(e){this.updateShape_();e&&this.getInput("IF_MISSED_DO")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"IF_MISSED_DO")}));this.updateShape_()},saveConnections:function(e){var t=this.getInput("IF_MISSED_DO");t&&(e.ifMissedConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;e.enableIfMissed&&!this.getInput("IF_MISSED_DO")?this.appendStatementInput("IF_MISSED_DO").appendField("if missed: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.enableIfMissed&&this.getInput("IF_MISSED_DO")&&this.removeInput("IF_MISSED_DO");if(e.advEventOptions){this.getInput("DOUBLE_CLICK").setVisible(!0);this.getInput("MOUSE_BUTTONS").setVisible(!0);this.getInput("X_RAY").setVisible(!0);this.setInputsInline(!0)}else{this.getInput("DOUBLE_CLICK").setVisible(!1);this.getInput("MOUSE_BUTTONS").setVisible(!1);this.getInput("X_RAY").setVisible(!1);this.setInputsInline(!1)}}};Blockly.JavaScript.whenClicked=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",n="TRUE"==e.getField("X_RAY").getValue(),o="TRUE"==e.getField("DOUBLE_CLICK").getValue(),i=[];"TRUE"==e.getField("LEFT_BUTTON").getValue()&&i.push(0);"TRUE"==e.getField("MIDDLE_BUTTON").getValue()&&i.push(1);"TRUE"==e.getField("RIGHT_BUTTON").getValue()&&i.push(2);var r=Blockly.JavaScript.statementToCode(e,"DO"),s=Blockly.JavaScript.statementToCode(e,"IF_MISSED_DO");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);e=Blockly.JavaScript.provideFunction_("registerOnClick",["\n// whenClicked puzzle\nfunction ".concat(BFUN$2,"(objNames, xRay, doubleClick, mouseButtons, cbDo, cbIfMissedDo) {\n    objNames = retrieveObjectNames(objNames) || [];\n\n    var objNamesFiltered = objNames.filter(function(name) {\n        return name;\n    });\n\n    // for AR/VR\n    _pGlob.objClickInfo.push({\n        objNames: objNamesFiltered,\n        callbacks: [cbDo, cbIfMissedDo]\n    });\n\n    initObjectPicking(function(intersects, event) {\n\n        var isPicked = false;\n\n        var maxIntersects = xRay ? intersects.length : Math.min(1, intersects.length);\n\n        for (var i = 0; i < maxIntersects; i++) {\n            var obj = intersects[i].object;\n            var objName = getPickedObjectName(obj);\n\n            if (objectsIncludeObj(objNamesFiltered, objName)) {\n                // save the object for the pickedObject block\n                _pGlob.pickedObject = objName;\n                isPicked = true;\n                cbDo(event);\n            }\n\n        }\n\n        if (!isPicked) {\n            _pGlob.pickedObject = '';\n            cbIfMissedDo(event);\n        }\n\n    }, doubleClick ? 'dblclick' : 'mousedown', false, mouseButtons);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", [").concat(i.join(","),"], ").concat(d(r),", ").concat(d(s),");\n")};replaceDeprecated("whenClicked","when_clicked");Blockly.Blocks.pickedObject={init:function(){this.appendDummyInput().appendField("picked object");this.setColour(COLOR_EVENTS);this.setOutput(!0,["Object3D","String"]);this.setTooltip('Returns an object a user has clicked on. Intended for\n            use with the "when clicked" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#picked_object")}};Blockly.JavaScript.pickedObject=function(e){return["_pGlob.pickedObject",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.whenHovered={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("when hovered");this.appendDummyInput("X_RAY").appendField("x-ray").appendField(new Blockly.FieldCheckbox("FALSE"),"X_RAY");this.appendStatementInput("DO_OVER").appendField("over: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_OUT").appendField("out: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Waits until a user hovers over/out a specified 3D\n            object (or any object in a specified list or group, or any object\n            on the scene if the "all objects" puzzle is used) - then runs\n            puzzles in the "over/out: do" slot.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#when_hovered");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["advEventOptions","advanced event options"]],COLOR_EVENTS,function(e){this.updateShape_()}));this.updateShape_()},updateShape_:function(){if(this._boolOptValues.advEventOptions){this.getInput("X_RAY").setVisible(!0);this.setInputsInline(!0)}else{this.getInput("X_RAY").setVisible(!1);this.setInputsInline(!1)}}};Blockly.JavaScript.whenHovered=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",n="TRUE"==e.getField("X_RAY").getValue(),o=Blockly.JavaScript.statementToCode(e,"DO_OVER"),i=Blockly.JavaScript.statementToCode(e,"DO_OUT");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);Blockly.JavaScript.provideFunction_("initObjectHoveringCall",["\n// whenHovered puzzle\ninitObjectPicking(function(intersects, event) {\n\n    var prevHovered = _pGlob.hoveredObject;\n    var currHovered = '';\n\n    // search for closest hovered object\n\n    var lastIntersectIndex = Infinity;\n    _pGlob.objHoverInfo.forEach(function(el) {\n        var maxIntersects = el.xRay ? intersects.length : Math.min(1, intersects.length);\n\n        for (var i = 0; i < maxIntersects; i++) {\n            var obj = intersects[i].object;\n            var objName = getPickedObjectName(obj);\n\n            if (objectsIncludeObj(el.objNames, objName) && i <= lastIntersectIndex) {\n                currHovered = objName;\n                lastIntersectIndex = i;\n            }\n        }\n    });\n\n    if (prevHovered == currHovered) return;\n\n    // first - all \"out\" callbacks, then - all \"over\"\n    _pGlob.objHoverInfo.forEach(function(el) {\n        if (objectsIncludeObj(el.objNames, prevHovered)) {\n            // ensure the correct value of the hoveredObject block\n            _pGlob.hoveredObject = prevHovered;\n            el.callbacks[1](event);\n        }\n    });\n\n    _pGlob.objHoverInfo.forEach(function(el) {\n        if (objectsIncludeObj(el.objNames, currHovered)) {\n            // ensure the correct value of the hoveredObject block\n            _pGlob.hoveredObject = currHovered;\n            el.callbacks[0](event);\n        }\n    });\n\n    _pGlob.hoveredObject = currHovered;\n}, 'mousemove', false);\n    "]);e=Blockly.JavaScript.provideFunction_("registerOnHover",["\n// whenHovered puzzle\nfunction ".concat(BFUN$2,"(objNames, xRay, cbOver, cbOut) {\n    objNames = retrieveObjectNames(objNames) || [];\n    var objNamesFiltered = objNames.filter(function(name) {\n        return name;\n    });\n\n    _pGlob.objHoverInfo.push({\n        objNames: objNamesFiltered,\n        callbacks: [cbOver, cbOut],\n        xRay: xRay\n    });\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(d(o),", ").concat(d(i),");\n")};Blockly.Blocks.hoveredObject={init:function(){this.appendDummyInput().appendField("hovered object");this.setColour(COLOR_EVENTS);this.setOutput(!0,["Object3D","String"]);this.setTooltip('Returns an object a user has hovered over. Intended\n            for use with the "when hovered" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#hovered_object")}};Blockly.JavaScript.hoveredObject=function(e){return["_pGlob.hoveredObject",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.whenMoved={init:function(){this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("when moved");this.appendDummyInput();this.appendValueInput("DELTA").setCheck(["Number"]).appendField("with velocity >");this.appendStatementInput("DO_START").appendField("start: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_MOVE").appendField("while moving: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_STOP").appendField("stop: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Tracks any movements (position, rotation and scale) of\n            a specified object (or any object in a specified list or group, or\n            any object on the scene if the "all objects" puzzle is used). Runs\n            puzzles in the "start: do" slot if an object started moving, keeps\n            running puzzles in the "while moving: do" slot until an object\n            stops moving, then runs puzzles in the "stop: do" slot. The "velocity"\n            parameter denotes a per-second change of any coordinate (x, y or z)\n            of either of position, rotation or scale that is required to\n            trigger this puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#when_moved")}};Blockly.JavaScript.whenMoved=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"DELTA",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.statementToCode(e,"DO_START"),i=Blockly.JavaScript.statementToCode(e,"DO_MOVE"),e=Blockly.JavaScript.statementToCode(e,"DO_STOP");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("whenMoved",["\n// whenMoved puzzle\nfunction ".concat(BFUN$2,"(objNames, velocity, cbStart, cbMove, cbStop) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    function savePreviousCoords(objName, obj, prevIsMoving) {\n        // GC optimization\n        if (_pGlob.objMovementInfos[objName]) {\n            var info = _pGlob.objMovementInfos[objName];\n\n            info.prevPosX = obj.position.x;\n            info.prevPosY = obj.position.y;\n            info.prevPosZ = obj.position.z;\n            info.prevRotX = obj.rotation.x;\n            info.prevRotY = obj.rotation.y;\n            info.prevRotZ = obj.rotation.z;\n            info.prevScaX = obj.scale.x;\n            info.prevScaY = obj.scale.y;\n            info.prevScaZ = obj.scale.z;\n            info.prevIsMoving = prevIsMoving;\n        } else {\n            var info = {\n                prevPosX: obj.position.x,\n                prevPosY: obj.position.y,\n                prevPosZ: obj.position.z,\n                prevRotX: obj.rotation.x,\n                prevRotY: obj.rotation.y,\n                prevRotZ: obj.rotation.z,\n                prevScaX: obj.scale.x,\n                prevScaY: obj.scale.y,\n                prevScaZ: obj.scale.z,\n                prevIsMoving: prevIsMoving\n            };\n            _pGlob.objMovementInfos[objName] = info;\n        }\n\n        return info;\n    }\n\n    function checkMoving(objName, obj, elapsed) {\n\n        var info = _pGlob.objMovementInfos[objName] ||\n            savePreviousCoords(objName, obj, false);\n\n        var delta = velocity * elapsed;\n\n        var isMoving =\n            Math.abs(obj.position.x - info.prevPosX) > delta ||\n            Math.abs(obj.position.y - info.prevPosY) > delta ||\n            Math.abs(obj.position.z - info.prevPosZ) > delta ||\n            Math.abs(obj.rotation.x - info.prevRotX) > delta ||\n            Math.abs(obj.rotation.y - info.prevRotY) > delta ||\n            Math.abs(obj.rotation.z - info.prevRotZ) > delta ||\n            Math.abs(obj.scale.x - info.prevScaX) > delta ||\n            Math.abs(obj.scale.y - info.prevScaY) > delta ||\n            Math.abs(obj.scale.z - info.prevScaZ) > delta;\n\n        if (!info.prevIsMoving && isMoving) {\n            cbStart();\n            savePreviousCoords(objName, obj, true);\n        } else if (info.prevIsMoving && isMoving) {\n            cbMove();\n            savePreviousCoords(objName, obj, true);\n        } else if (info.prevIsMoving && !isMoving) {\n            cbStop();\n            savePreviousCoords(objName, obj, false);\n        } else {\n            savePreviousCoords(objName, obj, false);\n        }\n    }\n\n    function addToRender(objName) {\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        appInstance.renderCallbacks.push(function(elapsed, timeline) { checkMoving(objName, obj, elapsed); });\n    }\n\n    for (var i = 0; i < objNames.length; i++) {\n\n        var objName = objNames[i];\n        if (!objName)\n            continue;\n\n        addToRender(objName);\n    }\n}\n    ")])+"("+t+", "+n+", "+d(o)+", "+d(i)+", "+d(e)+");\n"};Blockly.Blocks[WHEN_DRAGGED_OVER_TYPE]={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("when dragged over");this.appendDummyInput("X_RAY").appendField("x-ray").appendField(new Blockly.FieldCheckbox("FALSE"),"X_RAY");this.appendStatementInput("DO_MOVE").appendField("move: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Waits until a user drags over a specified 3D object\n            (or any object in a specified list or group, or any object on the\n            scene if the "all objects" puzzle is used) with the mouse or a\n            touch gesture - then generates movement data for using in a "drag\n            move", "drag rotate" or "drag scale" puzzle. Also captures events\n            of started and stopped dragging.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#when_dragged");this.hasAdvEventOpts=!1;this.hasDoStart=!1;this.hasDoDrop=!1;this.updateShape_();this.setMutator(new Blockly.Mutator(["invisibleBlock"]))},mutationToDom:function(){if(!this.hasAdvEventOpts&&!this.hasDoStart&&!this.hasDoDrop)return null;var e=document.createElement("mutation");e.setAttribute("adv_event_opts",this.hasAdvEventOpts);e.setAttribute("do_start",this.hasDoStart);e.setAttribute("do_drop",this.hasDoDrop);return e},domToMutation:function(e){this.hasAdvEventOpts="true"==e.getAttribute("adv_event_opts");this.hasDoStart="true"==e.getAttribute("do_start");this.hasDoDrop="true"==e.getAttribute("do_drop");this.updateShape_()},decompose:function(e){e=e.newBlock("whenDraggedOverOptions");e.initSvg();e.setFieldValue(this.hasAdvEventOpts?"TRUE":"FALSE","ADV_EVENT_OPTS");e.setFieldValue(this.hasDoStart?"TRUE":"FALSE","START");e.setFieldValue(this.hasDoDrop?"TRUE":"FALSE","DROP");return e},compose:function(e){this.hasAdvEventOpts="TRUE"==e.getFieldValue("ADV_EVENT_OPTS");this.hasDoStart="TRUE"==e.getFieldValue("START");this.hasDoDrop="TRUE"==e.getFieldValue("DROP");this.updateShape_();this.getInput("DO_START")&&Blockly.Mutator.reconnect(e.startConnection_,this,"DO_START");this.getInput("DO_DROP")&&Blockly.Mutator.reconnect(e.dropConnection_,this,"DO_DROP")},saveConnections:function(e){var t=this.getInput("DO_START");t&&(e.startConnection_=t.connection.targetConnection);t=this.getInput("DO_DROP");t&&(e.dropConnection_=t.connection.targetConnection)},updateShape_:function(){if(this.hasAdvEventOpts){this.getInput("X_RAY").setVisible(!0);this.setInputsInline(!0)}else{this.getInput("X_RAY").setVisible(!1);this.setInputsInline(!1)}if(this.hasDoStart&&!this.getInput("DO_START")){this.appendStatementInput("DO_START").appendField("start: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.moveInputBefore("DO_START","DO_MOVE")}else!this.hasDoStart&&this.getInput("DO_START")&&this.removeInput("DO_START");if(this.hasDoDrop&&!this.getInput("DO_DROP")){this.appendStatementInput("DO_DROP").appendField("drop: do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.moveInputBefore("DO_DROP",null)}else!this.hasDoDrop&&this.getInput("DO_DROP")&&this.removeInput("DO_DROP")}};Blockly.Blocks.whenDraggedOverOptions={init:function(){this.setColour(COLOR_EVENTS);this.appendDummyInput().appendField("advanced event options").appendField(new Blockly.FieldCheckbox("FALSE"),"ADV_EVENT_OPTS");this.appendDummyInput().appendField("enable start action").appendField(new Blockly.FieldCheckbox("FALSE"),"START");this.appendDummyInput().appendField("enable drop action").appendField(new Blockly.FieldCheckbox("FALSE"),"DROP");this.setInputsInline(!1);this.contextMenu=!1}};Blockly.JavaScript[WHEN_DRAGGED_OVER_TYPE]=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",n="TRUE"==e.getField("X_RAY").getValue(),o=Blockly.JavaScript.statementToCode(e,"DO_START"),i=Blockly.JavaScript.statementToCode(e,"DO_MOVE"),r=Blockly.JavaScript.statementToCode(e,"DO_DROP"),s="'"+e.id+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);Blockly.JavaScript.provideFunction_("eventGetOffsetCoords",[runtimeChunks.eventGetOffsetCoords]);Blockly.JavaScript.provideFunction_("eventTouchIdGetFirst",[runtimeChunks.eventTouchIdGetFirst]);Blockly.JavaScript.provideFunction_("eventTouchIdChangedFilter",[runtimeChunks.eventTouchIdChangedFilter]);Blockly.JavaScript.provideFunction_("initDragOverInfo",[runtimeChunks.initDragOverInfo]);Blockly.JavaScript.provideFunction_("initObjectDraggingOverCall",["\n// whenDraggedOver puzzle\ninitObjectPicking(function(intersects, downEvent) {\n\n    _pGlob.objDragOverCallbacks.forEach(function(el) {\n\n        var maxIntersects = el[2] ? intersects.length : Math.min(1, intersects.length);\n\n        for (var i = 0; i < maxIntersects; i++) {\n            var obj = intersects[i].object;\n            var objName = getPickedObjectName(obj);\n\n            if (objectsIncludeObj([el[0]], objName)) {\n                el[1]({ downEvent: downEvent, draggedObjName: objName });\n            }\n\n        }\n\n    });\n\n}, 'mousedown', true);\n    "]);e=Blockly.JavaScript.provideFunction_("registerOnDrag",["\n// whenDraggedOver puzzle\nfunction ".concat(BFUN$2,'(objNames, xRay, cbStart, cbMove, cbDrop, blockId) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    var cb = function(cbParam) {\n\n        if (appInstance.controls) {\n            appInstance.controls.enabled = false;\n        }\n\n        if (!(blockId in _pGlob.objDragOverInfoByBlock)) {\n            _pGlob.objDragOverInfoByBlock[blockId] = initDragOverInfo();\n        }\n        var info = _pGlob.objDragOverInfoByBlock[blockId];\n\n        // NOTE: don\'t use more than one pointing event, e.g. don\'t process\n        // some events related to multitouch actions\n        if (info.isDowned) {\n            return;\n        }\n\n        var touchId = eventTouchIdGetFirst(cbParam.downEvent);\n        var coords = eventGetOffsetCoords(cbParam.downEvent, touchId,\n                _pGlob.vec2Tmp);\n\n        info.downX = info.prevX = info.currX = coords.x;\n        info.downY = info.prevY = info.currY = coords.y;\n        info.touchId = touchId;\n        info.isDowned = true;\n        info.isMoved = false;\n        info.draggedObjName = cbParam.draggedObjName;\n\n        cbStart(cbParam.downEvent);\n\n        var elem = appInstance.container;\n\n        var moveCb = function(e) {\n            if (!eventTouchIdChangedFilter(e, info.touchId)) {\n                // don\'t handle events not intended for this particular touch\n                return;\n            }\n\n            var coords = eventGetOffsetCoords(e, info.touchId, _pGlob.vec2Tmp);\n            info.prevX = info.currX;\n            info.prevY = info.currY;\n            info.currX = coords.x;\n            info.currY = coords.y;\n            cbMove(e);\n            info.isMoved = true;\n        }\n        var upCb = function(e) {\n            if (!eventTouchIdChangedFilter(e, info.touchId)) {\n                // don\'t handle events not intended for this particular touch\n                return;\n            }\n\n            var coords = eventGetOffsetCoords(e, info.touchId, _pGlob.vec2Tmp);\n            info.currX = coords.x;\n            info.currY = coords.y;\n            info.prevX = info.currX;\n            info.prevY = info.currY;\n            cbDrop(e);\n            info.isDowned = false;\n\n            elem.removeEventListener("mousemove", moveCb, false);\n            elem.removeEventListener("touchmove", moveCb, false);\n            elem.removeEventListener("mouseup", upCb, false);\n            elem.removeEventListener("touchend", upCb, false);\n            if (appInstance.controls) {\n                appInstance.controls.enabled = true;\n            }\n        }\n\n        elem.addEventListener("mousemove", moveCb, false);\n        elem.addEventListener("touchmove", moveCb, false);\n        elem.addEventListener("mouseup", upCb, false);\n        elem.addEventListener("touchend", upCb, false);\n    }\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n        _pGlob.objDragOverCallbacks.push([objName, cb, xRay]);\n    }\n}\n    ')]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(d(o),", ").concat(d(i),", ")+"".concat(d(r),", ").concat(s,");\n")};Blockly.Blocks.dragMove={init:function(){this.appendValueInput("TARGETOBJ").appendField("drag move").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("mode").appendField(new BlocklyExt.Fields.Dropdown([["X","X"],["Y","Y"],["Z","Z"],["XY","XY"],["XZ","XZ"],["YZ","YZ"],["XYZ","XYZ"]]),"MODE");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Moves a specified 3D object (or all objects in a\n            specified list or group, or all objects on the scene if the\n            "all objects" puzzle is used) in accordance to dragging movement\n            data generated by the "when dragged" puzzle. Use the drop-down menu\n            to limit the movement to a particular axis or plane, or not to\n            limit at all.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#drag_move")}};Blockly.JavaScript.dragMove=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("MODE")+"'",o="'"+e.id+"'",i=getSurroundParentOfType(e,WHEN_DRAGGED_OVER_TYPE),e=i?"'"+i.id+"'":"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);Blockly.JavaScript.provideFunction_("intersectPlaneCSS",["\nfunction ".concat(BFUN$2,"(plane, cssX, cssY, dest) {\n    var coords = _pGlob.vec2Tmp;\n    var rc = _pGlob.raycasterTmp;\n    coords.x = (cssX / appInstance.getWidth()) * 2 - 1;\n    coords.y = - (cssY / appInstance.getHeight()) * 2 + 1;\n    rc.setFromCamera(coords, appInstance.camera);\n    return rc.ray.intersectPlane(plane, dest);\n}\n    ")]);i=Blockly.JavaScript.provideFunction_("dragMove",["\n// dragMove puzzle\nfunction ".concat(BFUN$2,'(objNames, mode, blockId, parentDragOverBlockId) {\n    if (!appInstance.camera) return;\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    var info = _pGlob.objDragOverInfoByBlock[parentDragOverBlockId];\n    if (!info) return;\n\n    var draggedObj = getObjectByName(info.draggedObjName);\n    if (!draggedObj) return;\n\n    if (!(blockId in _pGlob.dragMoveOrigins)) {\n        _pGlob.dragMoveOrigins[blockId] = [];\n    }\n    var posOrigins = _pGlob.dragMoveOrigins[blockId];\n    var lenDiff = objNames.length - posOrigins.length;\n    for (var i = 0; i < lenDiff; i++) {\n        posOrigins.push(new v3d.Vector3());\n    }\n\n    for (var i = 0; i < objNames.length; i++) {\n        var obj = getObjectByName(objNames[i]);\n        if (!obj) {\n            continue;\n        }\n\n        var posOrigin = posOrigins[i];\n\n        if (!info.isMoved) {\n            // the object position before the first move is used as an initial value\n            posOrigin.copy(obj.position);\n        }\n\n        var coordSystem = getCoordSystem();\n\n        if (mode == "X" || mode == "Y" || mode == "Z") {\n\n            if (coordSystem == \'Z_UP_RIGHT\') {\n                var axis = mode == "X" ? _pGlob.AXIS_X : (mode == "Y" ? _pGlob.AXIS_Z : _pGlob.AXIS_Y);\n                var coord = mode == "X" ? "x" : (mode == "Y" ? "z" : "y");\n            } else {\n                var axis = mode == "X" ? _pGlob.AXIS_X : (mode == "Y" ? _pGlob.AXIS_Y : _pGlob.AXIS_Z);\n                var coord = mode == "X" ? "x" : (mode == "Y" ? "y" : "z");\n            }\n\n            var planeNor = appInstance.camera.getWorldDirection(_pGlob.vec3Tmp);\n            planeNor.cross(axis).cross(axis);\n            var plane = _pGlob.planeTmp.setFromNormalAndCoplanarPoint(planeNor, draggedObj.position);\n\n            var p0 = intersectPlaneCSS(plane, info.downX, info.downY, _pGlob.vec3Tmp);\n            var p1 = intersectPlaneCSS(plane, info.currX, info.currY, _pGlob.vec3Tmp2);\n            if (p0 && p1) {\n                obj.position[coord] = posOrigin[coord] + p1[coord] - p0[coord];\n            }\n        } else if (mode == "XY" || mode == "XZ" || mode == "YZ") {\n            if (coordSystem == \'Z_UP_RIGHT\') {\n                var normal = mode == "XY" ? _pGlob.AXIS_Y : (mode == "XZ" ? _pGlob.AXIS_Z : _pGlob.AXIS_X);\n                var coord0 = mode == "XY" ? "x" : (mode == "XZ" ? "x" : "y");\n                var coord1 = mode == "XY" ? "z" : (mode == "XZ" ? "y" : "z");\n            } else {\n                var normal = mode == "XY" ? _pGlob.AXIS_Z : (mode == "XZ" ? _pGlob.AXIS_Y : _pGlob.AXIS_X);\n                var coord0 = mode == "XY" ? "x" : (mode == "XZ" ? "x" : "y");\n                var coord1 = mode == "XY" ? "y" : (mode == "XZ" ? "z" : "z");\n            }\n\n            var plane = _pGlob.planeTmp.setFromNormalAndCoplanarPoint(normal, draggedObj.position);\n\n            var p0 = intersectPlaneCSS(plane, info.downX, info.downY, _pGlob.vec3Tmp);\n            var p1 = intersectPlaneCSS(plane, info.currX, info.currY, _pGlob.vec3Tmp2);\n            if (p0 && p1) {\n                obj.position[coord0] = posOrigin[coord0] + p1[coord0] - p0[coord0];\n                obj.position[coord1] = posOrigin[coord1] + p1[coord1] - p0[coord1];\n            }\n        } else if (mode == "XYZ") {\n            var planeNor = appInstance.camera.getWorldDirection(_pGlob.vec3Tmp);\n            var plane = _pGlob.planeTmp.setFromNormalAndCoplanarPoint(planeNor, draggedObj.position);\n\n            var p0 = intersectPlaneCSS(plane, info.downX, info.downY, _pGlob.vec3Tmp);\n            var p1 = intersectPlaneCSS(plane, info.currX, info.currY, _pGlob.vec3Tmp2);\n            if (p0 && p1) {\n                obj.position.addVectors(posOrigin, p1).sub(p0);\n            }\n        }\n        obj.updateMatrixWorld(true);\n    }\n}\n    ')]);return"".concat(i,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(e,");\n")};Blockly.Blocks.dragRotate={init:function(){this.appendValueInput("TARGETOBJ").appendField("drag rotate").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("axis").appendField(new BlocklyExt.Fields.Dropdown([["X","X"],["Y","Y"],["Z","Z"]]),"AXIS");this.appendDummyInput("SPACE").appendField("space").appendField(new BlocklyExt.Fields.Dropdown([["parent","PARENT"],["local","LOCAL"]]),"SPACE_TYPE");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Rotates a specified 3D object (or all objects in a\n            specified list or group, or all objects on the scene if the\n            "all objects" puzzle is used) in accordance to dragging movement\n            data generated by the "when dragged" puzzle. Use the drop-down menu\n            to limit the rotation to a particular axis. The "space" drop-down\n            allows for switching between "local" and "parent" coordinate spaces.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#drag_rotate");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["enableSpace",'use "space" option',!1]],COLOR_EVENTS,function(e){this.updateShape_()}));this.updateShape_()},updateShape_:function(){var e=this._boolOptValues;this.getInput("SPACE").setVisible(e.enableSpace)}};Blockly.JavaScript.dragRotate=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("AXIS")+"'",o=!e._boolOptValues.enableSpace||"PARENT"==e.getFieldValue("SPACE_TYPE"),i="'"+e.id+"'",r=getSurroundParentOfType(e,WHEN_DRAGGED_OVER_TYPE),e=r?"'"+r.id+"'":"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);r=Blockly.JavaScript.provideFunction_("dragRotate",["\n// dragRotate puzzle\nfunction ".concat(BFUN$2,'(objNames, mode, isParentSpace, blockId, parentDragOverBlockId) {\n    if (!appInstance.camera) return;\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    var info = _pGlob.objDragOverInfoByBlock[parentDragOverBlockId];\n    if (!info) return;\n\n    var coordSystem = getCoordSystem();\n\n    for (var i = 0; i < objNames.length; i++) {\n        var obj = getObjectByName(objNames[i]);\n        if (!obj) {\n            continue;\n        }\n\n        if (mode == "X" || mode == "Y" || mode == "Z") {\n            var objPos = obj.getWorldPosition(_pGlob.vec3Tmp);\n            objPos.project(appInstance.camera);\n\n            var objX = (objPos.x + 1) / 2 * appInstance.getWidth();\n            var objY = (-objPos.y + 1) / 2 * appInstance.getHeight();\n            var vecFrom = _pGlob.vec2Tmp.set(info.prevX - objX, objY - info.prevY);\n            var vecTo = _pGlob.vec2Tmp2.set(info.currX - objX, objY - info.currY);\n\n            if (coordSystem == \'Z_UP_RIGHT\')\n                var axis = _pGlob.vec3Tmp.copy(mode == "X" ? _pGlob.AXIS_X\n                        : (mode == "Y" ? _pGlob.AXIS_Z : _pGlob.AXIS_Y));\n            else\n                var axis = _pGlob.vec3Tmp.copy(mode == "X" ? _pGlob.AXIS_X\n                        : (mode == "Y" ? _pGlob.AXIS_Y : _pGlob.AXIS_Z));\n\n            var quat = _pGlob.quatTmp.setFromAxisAngle(axis, vecTo.angle() - vecFrom.angle());\n\n            // a rotation axis pointing backwards (i.e. co-directionally\n            // aligned with the view vector) should have inverted rotation\n            var objToCalcSpace = isParentSpace && obj.parent ? obj.parent : obj;\n            axis.applyQuaternion(objToCalcSpace.getWorldQuaternion(_pGlob.quatTmp2));\n\n            var viewVec = appInstance.camera.getWorldDirection(_pGlob.vec3Tmp2);\n            if (viewVec.dot(axis) > 0) {\n                quat.conjugate();\n            }\n\n            if (isParentSpace) {\n                obj.quaternion.premultiply(quat);\n            } else {\n                obj.quaternion.multiply(quat);\n            }\n            obj.updateMatrixWorld(true);\n        }\n    }\n}\n    ')]);return"".concat(r,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(e,");\n")};Blockly.Blocks.dragScale={init:function(){this.appendValueInput("TARGETOBJ").appendField("drag scale").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("axis").appendField(new BlocklyExt.Fields.Dropdown([["X","X"],["Y","Y"],["Z","Z"]]),"AXIS");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_EVENTS);this.setTooltip('Scales a specified 3D object (or all objects in a\n            specified list or group, or all objects on the scene if the\n            "all objects" puzzle is used) in accordance to dragging movement\n            data generated by the "when dragged" puzzle. Use the drop-down menu\n            to limit scaling to a particular axis.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Events.html#drag_scale")}};Blockly.JavaScript.dragScale=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("AXIS")+"'",o="'"+e.id+"'",i=getSurroundParentOfType(e,WHEN_DRAGGED_OVER_TYPE),e=i?"'"+i.id+"'":"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);i=Blockly.JavaScript.provideFunction_("dragScale",["\n// dragScale puzzle\nfunction ".concat(BFUN$2,'(objNames, mode, blockId, parentDragOverBlockId) {\n    if (!appInstance.camera) return;\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    var info = _pGlob.objDragOverInfoByBlock[parentDragOverBlockId];\n    if (!info) return;\n\n    if (!(blockId in _pGlob.dragScaleOrigins)) {\n        _pGlob.dragScaleOrigins[blockId] = [];\n    }\n    var scaleOrigins = _pGlob.dragScaleOrigins[blockId];\n    var lenDiff = objNames.length - scaleOrigins.length;\n    for (var i = 0; i < lenDiff; i++) {\n        scaleOrigins.push(new v3d.Vector3());\n    }\n\n    var coordSystem = getCoordSystem();\n\n    for (var i = 0; i < objNames.length; i++) {\n        var obj = getObjectByName(objNames[i]);\n        if (!obj) {\n            continue;\n        }\n\n        var scaleOrigin = scaleOrigins[i];\n\n        if (!info.isMoved) {\n            // the object scale before the first move is used as an initial value\n            scaleOrigin.copy(obj.scale);\n        }\n\n        if (mode == "X" || mode == "Y" || mode == "Z") {\n            if (coordSystem == \'Z_UP_RIGHT\')\n                var coord = mode == "X" ? "x" : (mode == "Y" ? "z" : "y");\n            else\n                var coord = mode == "X" ? "x" : (mode == "Y" ? "y" : "z");\n\n            var objPos = obj.getWorldPosition(_pGlob.vec3Tmp);\n            objPos.project(appInstance.camera);\n\n            var objX = (objPos.x + 1) / 2 * appInstance.getWidth();\n            var objY = (-objPos.y + 1) / 2 * appInstance.getHeight();\n\n            var vecFrom = _pGlob.vec2Tmp.set(info.downX - objX, objY - info.downY);\n            var vecTo = _pGlob.vec2Tmp2.set(info.currX - objX, objY - info.currY);\n\n            obj.scale[coord] = Math.max(scaleOrigin[coord]\n                    * vecTo.dot(vecFrom) / vecFrom.lengthSq(), _pGlob.MIN_DRAG_SCALE);\n            obj.updateMatrixWorld(true);\n        }\n    }\n}\n    ')]);return"".concat(i,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(e,");\n")};Blockly.Blocks.objectList={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-objects.svg",16,16,"*")).appendField(new BlocklyExt.Fields.Dropdown([[LIST_NONE,LIST_NONE]]),"FIELDNAME");this.setColour(COLOR_SELECT);this.setOutput(!0,"Object3D");this.setTooltip("The drop-down contains an alphabetized list of all\n            objects on the scene.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Selectors.html#select_object");blockReady(this,function(e,n){e=e.getField("FIELDNAME");e.menuGenerator_=function(){return getObjectList(n)};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,t===LIST_NONE||n.scene.getObjectByName(t))})})}};Blockly.JavaScript.objectList=function(e){return["'"+e.getFieldValue("FIELDNAME")+"'",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.allObjectList={init:function(){this.appendDummyInput().appendField("all objects");this.setColour(COLOR_SELECT);this.setOutput(!0,"Object3D");this.setTooltip("Denotes all objects on the scene so that an operation\n            can be applied to them in bulk. Not iterable.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Selectors.html#all_objects")}};Blockly.JavaScript.allObjectList=function(e){return["['ALL_OBJECTS']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.groupList={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-groups.svg",16,16,"*")).appendField(new BlocklyExt.Fields.Dropdown([[LIST_NONE,LIST_NONE]]),"FIELDNAME");this.setColour(COLOR_SELECT);this.setOutput(!0,"Object3D");this.setTooltip("The drop-down contains an alphabetized list of all\n            object groups presented in the scene. An operation can be applied\n            to a group of objects in bulk. Not iterable.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Selectors.html#select_group");blockReady(this,function(e,t){e=e.getField("FIELDNAME");e.menuGenerator_=function(){return getGroupList(t)};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,t===LIST_NONE||getObjectNamesByGroupName(t).length)})})}};Blockly.JavaScript.groupList=function(e){return["['GROUP', '"+e.getFieldValue("FIELDNAME")+"']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.animationList={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-animations.svg",16,16,"*")).appendField(new BlocklyExt.Fields.Dropdown([[LIST_NONE,LIST_NONE]]),"FIELDNAME");this.setColour(COLOR_SELECT);this.setOutput(!0,"Animation");this.setTooltip("The drop-down contains an alphabetized list of all\n            animation clips presented in the scene. An animation clip is named\n            according to the object to which animation is applied in Blender, 3ds Max, or Maya.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Selectors.html#select_animation");blockReady(this,function(e,n){e=e.getField("FIELDNAME");e.menuGenerator_=function(){return getAnimationList(n)};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,t===LIST_NONE||v3d.SceneUtils.getAnimationActionByName(n,t))})})}};Blockly.JavaScript.animationList=function(e){return["'"+e.getFieldValue("FIELDNAME")+"'",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.materialList={init:function(){this.appendDummyInput().appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-materials.svg",16,16,"*")).appendField(new BlocklyExt.Fields.Dropdown([[LIST_NONE,LIST_NONE]]),"FIELDNAME");this.setColour(COLOR_SELECT);this.setOutput(!0,"Material");this.setTooltip("The drop-down contains an alphabetized list of all\n            materials that are present in the scene.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Selectors.html#select_material");blockReady(this,function(e,n){e=e.getField("FIELDNAME");e.menuGenerator_=function(){return getMaterialList(n)};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,t===LIST_NONE||v3d.SceneUtils.getMaterialByName(n,t))})})}};Blockly.JavaScript.materialList=function(e){return["'"+e.getFieldValue("FIELDNAME")+"'",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.show={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("show");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Makes a specified object, that was initially or\n            previously hidden, visible. Also works for a list of objects,\n            a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#show")}};Blockly.JavaScript.show=function(e){return t(e,!0)};Blockly.Blocks.hide={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("hide");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Makes a specified object invisible. Also works for\n            a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#hide")}};Blockly.JavaScript.hide=function(e){return t(e,!1)};function t(e,t){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("changeVis",["\n// show and hide puzzles\nfunction ".concat(BFUN$2,"(objNames, bool) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i]\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n        obj.visible = bool;\n    }\n}\n    ")])+"("+e+", "+t+");\n"}Blockly.Blocks.isObjectVisible={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("is visible");this.setInputsInline(!1);this.setOutput(!0,"Boolean");this.setColour(COLOR_OPERATIONS);this.setTooltip("Checks if an object (or any of objects in a list) is currently visible.\n            If it so, returns true, otherwise returns false.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#is_visible")}};Blockly.JavaScript.isObjectVisible=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("isObjectVisible",["\n// isObjectVisible puzzle\nfunction ".concat(BFUN$2,"(objNames) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return false;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i]\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n        if (obj.visible)\n            return true;\n    }\n    return false;\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getObjectsFrom={init:function(){this.appendDummyInput().appendField("get").appendField(new BlocklyExt.Fields.Dropdown([["all","ALL"],["annotation","ANNOTATION"],["bone","BONE"],["camera","CAMERA"],["empty","EMPTY"],["mesh","MESH"],["light","LIGHT"]]),"TYPE");this.appendValueInput("OBJ").appendField("objects from").setCheck(["Object3D","String","Array"]);this.setInputsInline(!0);this.setOutput(!0,"Array");this.setColour(COLOR_OPERATIONS);this.setTooltip("This universal puzzle allows you to:\n        - get the list of objects contained in a group thus making it iterable;\n        - convert the output of the *all objects* puzzle to a list thus making it iterable;\n        - get children of some parent object.\n        By using the dropdown you can also filter off objects of a kind (e.g. cameras, lamps, annotations, etc).\n        ");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_objects_from")}};Blockly.JavaScript.getObjectsFrom=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ",Blockly.JavaScript.ORDER_NONE)||"''",e="'"+e.getFieldValue("TYPE")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("isMeshObj",[runtimeChunks.isMeshObj]);return[Blockly.JavaScript.provideFunction_("getObjectsFrom",["\n\nfunction getObjectsFromCollect(obj, type, out) {\n    if (!notIgnoredObj(obj))\n        return;\n\n    switch (type) {\n    case 'ALL':\n        if (out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'ANNOTATION':\n        if (obj.isAnnotation && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'BONE':\n        if (obj.isBone && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'CAMERA':\n        if (obj.isCamera && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'EMPTY':\n        if (!obj.isAnnotationControl && !obj.isBone && !obj.isCamera && !obj.isGroup &&\n                !obj.isLine && !obj.isLOD && !obj.isLight && !isMeshObj(obj) && !obj.isPoints &&\n                !obj.isScene && !obj.isSprite && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'LIGHT':\n        if (obj.isLight && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    case 'MESH':\n        if (isMeshObj(obj) && out.indexOf(obj.name) < 0)\n            out.push(obj.name);\n        break;\n    default:\n        console.error('getObjectsFrom: Unknown object type: ' + type);\n        break;\n    }\n\n    for (var i = 0; i < obj.children.length; i++) {\n        var child = obj.children[i];\n        getObjectsFromCollect(child, type, out);\n    }\n}\n\n// getObjectsFrom puzzle\nfunction ".concat(BFUN$2,"(objNames, type) {\n\n    var out = [];\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i]\n        if (!objName)\n            continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n\n        getObjectsFromCollect(obj, type, out);\n    }\n\n    return out;\n}\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.cloneObject={init:function(){this.appendValueInput("OBJECTINPUT").setCheck(["Object3D","String"]).appendField("clone object");this.setOutput(!0,"Array");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_OPERATIONS);this.setTooltip('Makes an object copy, generates a unique name for\n            the new object and immediately adds it to the scene. Outputs the new object.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#clone")}};Blockly.JavaScript.cloneObject=function(e){e=Blockly.JavaScript.valueToCode(e,"OBJECTINPUT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("findUniqueObjectName",["\n// cloneObject puzzle\nfunction ".concat(BFUN$2,'(name) {\n    function objNameUsed(name) {\n        return Boolean(getObjectByName(name));\n    }\n    while (objNameUsed(name)) {\n        var r = name.match(/^(.*?)(\\d+)$/);\n        if (!r) {\n            name += "2";\n        } else {\n            name = r[1] + (parseInt(r[2], 10) + 1);\n        }\n    }\n    return name;\n}\n    ')]);return[Blockly.JavaScript.provideFunction_("cloneObject",["\n// cloneObject puzzle\nfunction ".concat(BFUN$2,"(objName) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n    var newObj = obj.clone();\n    newObj.name = findUniqueObjectName(obj.name);\n    appInstance.scene.add(newObj);\n    return newObj.name;\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.removeObject={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("remove object");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Removes a specified object from the scene.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#remove")}};Blockly.JavaScript.removeObject=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("removeObject",["\n// removeObject puzzles\nfunction ".concat(BFUN$2,"(objNames) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i]\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj || !obj.parent)\n            continue;\n\n        obj.parent.remove(obj);\n\n        // clean object cache\n        _pGlob.objCache = {};\n    }\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.snapToObject={init:function(){this.appendValueInput("SNAPWHAT").appendField("snap").setCheck(["Object3D","String"]);this.appendValueInput("SNAPTO").appendField("to object").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Moves an object to the position of another object\n            by copying its transform data. Also copies rotation and scale.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#snap_to_object")}};Blockly.JavaScript.snapToObject=function(e){var t=Blockly.JavaScript.valueToCode(e,"SNAPWHAT",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"SNAPTO",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("snapToObject",["\n// snapToObject puzzle\nfunction ".concat(BFUN$2,"(objName, targetObjName) {\n    if (!objName || !targetObjName)\n        return;\n    var obj = getObjectByName(objName);\n    var targetObj = getObjectByName(targetObjName);\n    if (!obj || !targetObj)\n        return;\n    obj.copyTransform(targetObj);\n    obj.updateMatrixWorld(true);\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.setObjTransform={init:function(){this.appendValueInput("TARGETOBJ").appendField("set").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["position","position"],["rotation","rotation"],["scale   ","scale"]]),"MODE").appendField("to");this.appendValueInput("X").appendField("X:").setCheck("Number");this.appendValueInput("Y").appendField("Y:").setCheck("Number");this.appendValueInput("Z").appendField("Z:").setCheck("Number");this.appendDummyInput().appendField("offset").appendField(new Blockly.FieldCheckbox("FALSE"),"OFFSET");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Moves, rotates or scales an object according to\n            specified transform data. The "offset" checkbox enables moving/rotating/scaling\n            an object relatively to the original position/rotation/scale.\n            Any of the axis inputs can be left blank. Also works for a list of objects,\n            a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#set_transform")}};Blockly.JavaScript.setObjTransform=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("MODE")+"'",o=Blockly.JavaScript.valueToCode(e,"X",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"Y",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"Z",Blockly.JavaScript.ORDER_NONE)||"''",s="TRUE"==e.getField("OFFSET").getValue();Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("RotationInterface",[runtimeChunks.RotationInterface]);return Blockly.JavaScript.provideFunction_("setObjTransform",["\n// setObjTransform puzzle\nfunction ".concat(BFUN$2,"(objNames, mode, x, y, z, offset) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    function setObjProp(obj, prop, val) {\n        if (!offset) {\n            obj[mode][prop] = val;\n        } else {\n            if (mode != \"scale\")\n                obj[mode][prop] += val;\n            else\n                obj[mode][prop] *= val;\n        }\n    }\n\n    var inputsUsed = _pGlob.vec3Tmp.set(Number(x !== ''), Number(y !== ''),\n            Number(z !== ''));\n    var coords = _pGlob.vec3Tmp2.set(x || 0, y || 0, z || 0);\n\n    if (mode === 'rotation') {\n        // rotations are specified in degrees\n        coords.multiplyScalar(v3d.Math.DEG2RAD);\n    }\n\n    var coordSystem = getCoordSystem();\n\n    coordsTransform(inputsUsed, coordSystem, 'Y_UP_RIGHT', true);\n    coordsTransform(coords, coordSystem, 'Y_UP_RIGHT', mode === 'scale');\n\n    for (var i = 0; i < objNames.length; i++) {\n\n        var objName = objNames[i];\n        if (!objName) continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj) continue;\n\n        if (mode === 'rotation' && coordSystem == 'Z_UP_RIGHT') {\n            // Blender/Max coordinates\n\n            // need all the rotations for order conversions, especially if some\n            // inputs are not specified\n            var euler = eulerV3DToBlenderShortest(obj.rotation, _pGlob.eulerTmp);\n            coordsTransform(euler, coordSystem, 'Y_UP_RIGHT');\n\n            if (inputsUsed.x) euler.x = offset ? euler.x + coords.x : coords.x;\n            if (inputsUsed.y) euler.y = offset ? euler.y + coords.y : coords.y;\n            if (inputsUsed.z) euler.z = offset ? euler.z + coords.z : coords.z;\n\n            /**\n             * convert from Blender/Max default XYZ extrinsic order to v3d XYZ\n             * intrinsic with reversion (XYZ -> ZYX) and axes swizzling (ZYX -> YZX)\n             */\n            euler.order = \"YZX\";\n            euler.reorder(obj.rotation.order);\n            obj.rotation.copy(euler);\n\n        } else if (mode === 'rotation' && coordSystem == 'Y_UP_RIGHT') {\n            // Maya coordinates\n\n            // Use separate rotation interface to fix ambiguous rotations for Maya,\n            // might as well do the same for Blender/Max.\n\n            var rotUI = ").concat(e,'.initObject(obj);\n            var euler = rotUI.getUserRotation(_pGlob.eulerTmp);\n            // TODO(ivan): this probably needs some reasonable wrapping\n            if (inputsUsed.x) euler.x = offset ? euler.x + coords.x : coords.x;\n            if (inputsUsed.y) euler.y = offset ? euler.y + coords.y : coords.y;\n            if (inputsUsed.z) euler.z = offset ? euler.z + coords.z : coords.z;\n\n            rotUI.setUserRotation(euler);\n            rotUI.getActualRotation(obj.rotation);\n        } else {\n\n            if (inputsUsed.x) setObjProp(obj, "x", coords.x);\n            if (inputsUsed.y) setObjProp(obj, "y", coords.y);\n            if (inputsUsed.z) setObjProp(obj, "z", coords.z);\n\n        }\n\n        obj.updateMatrixWorld(true);\n    }\n\n}\n    ')])+"("+t+", "+n+", "+o+", "+i+", "+r+", "+s+");\n"};Blockly.Blocks.getObjTransform={init:function(){this.appendValueInput("TARGETOBJ").appendField("get").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("'s").appendField(new BlocklyExt.Fields.Dropdown([["position","position"],["rotation","rotation"],["scale   ","scale"]]),"MODE");this.appendDummyInput().appendField(" ").appendField(new BlocklyExt.Fields.Dropdown([["x","x"],["y","y"],["z","z"],["xyz","xyz"]]),"COORD");this.setInputsInline(!0);this.setOutput(!0,["Number","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip('Retrieves the position, rotation or scale data of an object.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_transform")}};Blockly.JavaScript.getObjTransform=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("MODE")+"'",o="'"+e.getFieldValue("COORD")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("RotationInterface",[runtimeChunks.RotationInterface]);return[Blockly.JavaScript.provideFunction_("getObjTransform",["\n// getObjTransform puzzle\nfunction ".concat(BFUN$2,"(objName, mode, coord) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n\n    var coordSystem = getCoordSystem();\n\n    var transformVal;\n\n    if (mode === 'rotation' && coordSystem == 'Z_UP_RIGHT') {\n        transformVal = eulerV3DToBlenderShortest(obj.rotation,\n                _pGlob.eulerTmp);\n    } else if (mode === 'rotation' && coordSystem == 'Y_UP_RIGHT') {\n        // Maya coordinates\n        // Use separate rotation interface to fix ambiguous rotations for Maya,\n        // might as well do the same for Blender/Max.\n\n        var rotUI = ").concat(e,".initObject(obj);\n        transformVal = rotUI.getUserRotation(_pGlob.eulerTmp);\n    } else {\n        transformVal = coordsTransform(obj[mode].clone(), 'Y_UP_RIGHT',\n                coordSystem, mode === 'scale');\n    }\n\n    if (mode === 'rotation') {\n        transformVal.x = v3d.MathUtils.radToDeg(transformVal.x);\n        transformVal.y = v3d.MathUtils.radToDeg(transformVal.y);\n        transformVal.z = v3d.MathUtils.radToDeg(transformVal.z);\n    }\n\n    if (coord == 'xyz') {\n        // remove order component for Euler vectors\n        return transformVal.toArray().slice(0, 3);\n    } else {\n        return transformVal[coord];\n    }\n}\n    ")])+"("+t+", "+n+", "+o+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.applyObjLocalTransform={init:function(){this.appendValueInput("TARGETOBJ").appendField("change").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("local").appendField(new BlocklyExt.Fields.Dropdown([["position","position"],["rotation","rotation"],["scale   ","scale"]]),"MODE");this.appendDummyInput().appendField("by");this.appendValueInput("X").appendField("X:").setCheck("Number");this.appendValueInput("Y").appendField("Y:").setCheck("Number");this.appendValueInput("Z").appendField("Z:").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Moves, rotates or scales an object according to\n            specified transform data in its local space. Any of the axis inputs\n            can be left blank. Also works for a list of objects, a group\n            (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#change_local_transform")}};Blockly.JavaScript.applyObjLocalTransform=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("MODE")+"'",o=Blockly.JavaScript.valueToCode(e,"X",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"Y",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"Z",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("applyObjLocalTransform",["\n// applyObjLocalTransform puzzle\nfunction ".concat(BFUN$2,'(objNames, mode, x, y, z) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    var defValue = mode == "scale" ? 1 : 0;\n    if (typeof x != "number") x = defValue;\n    if (typeof y != "number") y = defValue;\n    if (typeof z != "number") z = defValue;\n\n    var coords = coordsTransform(_pGlob.vec3Tmp.set(x, y, z), getCoordSystem(), \'Y_UP_RIGHT\', mode == \'scale\');\n\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj) continue;\n\n        // don\'t transform values for cameras, their local space happens\n        // to be the same as for Blender/Max cameras, bcz their different\n        // rest orientation balances difference in coordinate systems\n        var useTransformed = !obj.isCamera;\n        var xVal = useTransformed ? coords.x : x;\n        var yVal = useTransformed ? coords.y : y;\n        var zVal = useTransformed ? coords.z : z;\n\n        switch (mode) {\n        case "position":\n            if (_pGlob.xrSessionAcquired && obj.isCamera) {\n                v3d.WebXRUtils.translateVRCamera(obj, _pGlob.AXIS_X, xVal);\n                v3d.WebXRUtils.translateVRCamera(obj, _pGlob.AXIS_Y, yVal);\n                v3d.WebXRUtils.translateVRCamera(obj, _pGlob.AXIS_Z, zVal);\n            } else {\n                obj.translateX(xVal);\n                obj.translateY(yVal);\n                obj.translateZ(zVal);\n            }\n            break;\n        case "rotation":\n            if (_pGlob.xrSessionAcquired && obj.isCamera) {\n                v3d.WebXRUtils.rotateVRCamera(obj, _pGlob.AXIS_X, v3d.Math.degToRad(xVal));\n                v3d.WebXRUtils.rotateVRCamera(obj, _pGlob.AXIS_Y, v3d.Math.degToRad(yVal));\n                v3d.WebXRUtils.rotateVRCamera(obj, _pGlob.AXIS_Z, v3d.Math.degToRad(zVal));\n            } else {\n                obj.rotateX(v3d.Math.degToRad(xVal));\n                obj.rotateY(v3d.Math.degToRad(yVal));\n                obj.rotateZ(v3d.Math.degToRad(zVal));\n            }\n            break;\n        case "scale":\n            obj.scale.x *= xVal;\n            obj.scale.y *= yVal;\n            obj.scale.z *= zVal;\n            break;\n        }\n\n        obj.updateMatrixWorld(true);\n    }\n}\n    ')]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(r,");\n")};Blockly.Blocks.setObjDirection={init:function(){this.appendValueInput("TARGETOBJ").appendField("set object direction").setCheck(["Object3D","String","Array"]);this.appendValueInput("X").appendField("X:").setCheck("Number");this.appendValueInput("Y").appendField("Y:").setCheck("Number");this.appendValueInput("Z").appendField("Z:").setCheck("Number");this.appendDummyInput().appendField("point").appendField(new Blockly.FieldCheckbox("TRUE"),"POINT");this.appendDummyInput().appendField("lock up").appendField(new Blockly.FieldCheckbox("FALSE"),"LOCK_UP");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Set object direction.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#set_object_direction")}};Blockly.JavaScript.setObjDirection=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"X",Blockly.JavaScript.ORDER_NONE)||"0",o=Blockly.JavaScript.valueToCode(e,"Y",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(e,"Z",Blockly.JavaScript.ORDER_NONE)||"0",r="TRUE"==e.getField("POINT").getValue(),s="TRUE"==e.getField("LOCK_UP").getValue();Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("setObjDirection",["\n// setObjDirection puzzle\nfunction ".concat(BFUN$2,"(objNames, x, y, z, isPoint, lockUp) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    var coords = coordsTransform(_pGlob.vec3Tmp.set(x, y, z), getCoordSystem(), 'Y_UP_RIGHT');\n\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj) continue;\n\n        if (!isPoint) {\n            coords.normalize().add(obj.position);\n        }\n\n        if (lockUp) {\n            // NOTE: partially copy-pasted from LockedTrackConstraint\n\n            var targetWorldPos = new v3d.Vector3(coords.x, coords.y, coords.z);\n\n            var lockDir = new v3d.Vector3(0, 1, 0);\n\n            if (obj.isCamera || obj.isLight)\n                var trackDir = new v3d.Vector3(0, 0, -1);\n            else\n                var trackDir = new v3d.Vector3(0, 0, 1);\n\n            var projDir = new v3d.Vector3();\n            var plane = _pGlob.planeTmp;\n\n            var objWorldPos = new v3d.Vector3();\n            objWorldPos.setFromMatrixPosition(obj.matrixWorld);\n\n            plane.setFromNormalAndCoplanarPoint(lockDir, objWorldPos);\n            plane.projectPoint(targetWorldPos, projDir).sub(objWorldPos);\n\n            var sign = _pGlob.vec3Tmp2.crossVectors(trackDir, projDir).dot(lockDir) > 0 ? 1 : -1;\n\n            obj.setRotationFromAxisAngle(plane.normal, sign * trackDir.angleTo(projDir));\n\n            if (obj.parent) {\n                obj.parent.matrixWorld.decompose(_pGlob.vec3Tmp2, _pGlob.quatTmp, _pGlob.vec3Tmp2);\n                obj.quaternion.premultiply(_pGlob.quatTmp.inverse());\n            }\n\n        } else {\n\n            obj.lookAt(coords.x, coords.y, coords.z);\n\n        }\n\n        obj.updateMatrixWorld(true);\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(r,", ").concat(s,");\n")};Blockly.Blocks.getObjDirection={init:function(){this.appendValueInput("TARGETOBJ").appendField("get object direction").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["x","X"],["y","Y"],["z","Z"],["xyz","XYZ"],["horizontal","HORIZONTAL"]]),"COORD");this.setInputsInline(!0);this.setOutput(!0,["Number","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip("Returns an object's direction vector or numeric X, Y, Z vector components.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_object_direction")}};Blockly.JavaScript.getObjDirection=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",e="'"+e.getFieldValue("COORD")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);return[Blockly.JavaScript.provideFunction_("getObjDirection",["\n// getObjDirection puzzle\nfunction ".concat(BFUN$2,"(objName, coord) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n\n    var dir = obj.getWorldDirection(_pGlob.vec3Tmp);\n\n    var coordSystem = getCoordSystem();\n    coordsTransform(dir, 'Y_UP_RIGHT', coordSystem);\n\n    switch (coord) {\n    case 'X':\n        return dir.x;\n    case 'Y':\n        return dir.y;\n    case 'Z':\n        return dir.z;\n    case 'XYZ':\n        return dir.toArray();\n    case 'HORIZONTAL':\n        switch (coordSystem) {\n        case 'Y_UP_RIGHT':\n            dir.y = 0;\n            dir.normalize();\n            return [dir.x, 0, dir.z];\n        default:\n            dir.z = 0;\n            dir.normalize();\n            return [dir.x, dir.y, 0];\n        }\n    default:\n        console.error(\"get object direction: Wrong coords\");\n        return;\n    }\n};\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getMorphFactor={init:function(){var n=this;function o(e){var t=n.getInputTargetBlock("OBJ_NAME");if(t)return getMorphTargetNames(e,t.getFieldValue("FIELDNAME"));return[]}this.appendValueInput("OBJ_NAME").appendField("get morph factor").setCheck(["Object3D","String"]);this.appendDummyInput("").appendField("target").appendField(new BlocklyExt.Fields.Dropdown([["<no targets>","<no targets>"]]),"TARGET_NAME");this.setOnChange(function(e){isInputValueChanged(e,this,"OBJ_NAME")&&this.getField("TARGET_NAME").callValidator(this.getFieldValue("TARGET_NAME"))});this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(COLOR_OPERATIONS);this.setTooltip("Gets a factor for the specified morph target on the\n                specified object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_morph_factor");blockReady(this,function(e,n){e=e.getField("TARGET_NAME");e.menuGenerator_=function(){var e=o(n).map(function(e){return[e,e]});e.length||(e=[["<no targets>","<no targets>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<o(n).indexOf(t))})})}};Blockly.JavaScript.getMorphFactor=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ_NAME",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("TARGET_NAME")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("getMorphFactor",["\nfunction ".concat(BFUN$2,"(objName, targetName) {\n\n    if (objName && targetName) {\n        var obj = getObjectByName(objName);\n\n        if (obj) {\n            obj = obj.resolveMultiMaterial()[0];\n            if (obj.morphTargetDictionary && targetName in obj.morphTargetDictionary) {\n                var idx = obj.morphTargetDictionary[targetName];\n                return obj.morphTargetInfluences[idx];\n            }\n        }\n    }\n\n    return 0;\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setMorphFactor={init:function(){var n=this;function o(e){var t=n.getInputTargetBlock("OBJ_NAME");if(t)return getMorphTargetNames(e,t.getFieldValue("FIELDNAME"));return[]}this.appendValueInput("OBJ_NAME").appendField("set morph factor").setCheck(["Object3D","String"]);this.appendDummyInput("").appendField("target").appendField(new BlocklyExt.Fields.Dropdown([["<no targets>","<no targets>"]]),"TARGET_NAME");this.appendValueInput("FACTOR").appendField("to").setCheck(["Number"]);this.setOnChange(function(e){isInputValueChanged(e,this,"OBJ_NAME")&&this.getField("TARGET_NAME").callValidator(this.getFieldValue("TARGET_NAME"))});this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Sets a factor for the specified morph target on the\n                specified object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#set_morph_factor");blockReady(this,function(e,n){e=e.getField("TARGET_NAME");e.menuGenerator_=function(){var e=o(n).map(function(e){return[e,e]});e.length||(e=[["<no targets>","<no targets>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<o(n).indexOf(t))})})}};Blockly.JavaScript.setMorphFactor=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ_NAME",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("TARGET_NAME")+"'",o=Blockly.JavaScript.valueToCode(e,"FACTOR",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("setMorphFactor",["\nfunction ".concat(BFUN$2,"(objName, targetName, factor) {\n\n    if (objName && targetName) {\n        var obj = getObjectByName(objName);\n        if (obj) {\n            obj.resolveMultiMaterial().forEach(function(objR) {\n                if (objR.morphTargetDictionary && targetName in objR.morphTargetDictionary) {\n                    var idx = objR.morphTargetDictionary[targetName];\n                    objR.morphTargetInfluences[idx] = Number(factor);\n                }\n            });\n        }\n    }\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.assignMaterial={init:function(){this.appendValueInput("VALUE2").setCheck(["Material","String"]).appendField("assign material");this.appendValueInput("VALUE1").setCheck(["Object3D","String","Array"]).appendField("to object(s)");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Assigns a material to an object, completely replacing the old material.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#assign_material")}};Blockly.JavaScript.assignMaterial=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE1",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"VALUE2",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);var o=Blockly.JavaScript.provideFunction_("acquireUniqueName",[runtimeChunks.acquireUniqueName]),e=Blockly.JavaScript.provideFunction_("matNameUsed",[runtimeChunks.matNameUsed]);return Blockly.JavaScript.provideFunction_("assignMat",["\n// assignMaterial puzzle\nfunction ".concat(BFUN$2,"(objNames, matName) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames || !matName)\n        return;\n    var mat = v3d.SceneUtils.getMaterialByName(appInstance, matName);\n    if (!mat)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (obj) {\n            var firstSubmesh = obj.resolveMultiMaterial()[0];\n\n            var hasSkinning = firstSubmesh.isSkinnedMesh;\n            var influences = firstSubmesh.morphTargetInfluences;\n            var hasMorphing = influences !== undefined && influences.length > 0;\n\n            if (hasSkinning || hasMorphing) {\n                var newMat = mat.clone();\n                newMat.name = ").concat(o,"(mat.name, function(name) {\n                    return !").concat(e,"(name);\n                });\n\n                if (hasSkinning) {\n                    newMat.skinning = true;\n                }\n\n                if (hasMorphing) {\n                    newMat.morphTargets = true;\n                    if (firstSubmesh.geometry.morphAttributes.normal !== undefined) {\n                        newMat.morphNormals = true;\n                    }\n                }\n\n                firstSubmesh.material = newMat;\n            } else {\n                firstSubmesh.material = mat;\n            }\n        }\n    }\n}\n    ")])+"("+t+", "+n+");\n"};Blockly.Blocks.replaceTexture={init:function(){var t=this;function o(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetEditableTextures(e)}return[]}this.appendDummyInput("OLD_TEX_NAME_INPUT").appendField("replace texture").appendField(new BlocklyExt.Fields.Dropdown([["<no textures>","<no textures>"]]),"OLD_TEX_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.appendValueInput("NEW_TEX_URL").appendField("with").setCheck(["String","Promise","Video","Canvas"]);this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("OLD_TEX_NAME").callValidator(this.getFieldValue("OLD_TEX_NAME"))});this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Replaces a texture found for a specified material\n                with the one loaded from the provided URI.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#replace_texture");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["enableDoSlot",'enable "once ready do" slot',!1],["flexTexInput","flexible texture input",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();if(e){this.getInput("DO")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"DO");this.getInput("OLD_TEX_NAME_FLEX")&&Blockly.Mutator.reconnect(e.oldTexNameFlexConnection_,this,"OLD_TEX_NAME_FLEX")}}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("OLD_TEX_NAME");e.menuGenerator_=function(){var e=o(),n={},e=e.filter(function(e){var t=n[e.name];n[e.name]=!0;return!t}).map(function(e){return[e.name,e.name]});e.length||(e=[["<no textures>","<no textures>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<o().map(function(e){return e.name}).indexOf(t))})})},saveConnections:function(e){var t=this.getInput("DO");t&&(e.ifMissedConnection_=t.connection.targetConnection);t=this.getInput("OLD_TEX_NAME_FLEX");t&&(e.oldTexNameFlexConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;e.enableDoSlot&&!this.getInput("DO")?this.appendStatementInput("DO").appendField("once ready do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.enableDoSlot&&this.getInput("DO")&&this.removeInput("DO");if(e.flexTexInput&&!this.getInput("OLD_TEX_NAME_FLEX")){this.appendValueInput("OLD_TEX_NAME_FLEX").appendField("replace texture").setCheck(["String"]);this.moveInputBefore("OLD_TEX_NAME_FLEX","MATERIAL");this.getInput("OLD_TEX_NAME_INPUT").setVisible(!1)}else if(!e.flexTexInput&&this.getInput("OLD_TEX_NAME_FLEX")){this.removeInput("OLD_TEX_NAME_FLEX");this.getInput("OLD_TEX_NAME_INPUT").setVisible(!0)}}};Blockly.JavaScript.replaceTexture=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("OLD_TEX_NAME_INPUT").isVisible()?"'"+e.getFieldValue("OLD_TEX_NAME")+"'":Blockly.JavaScript.valueToCode(e,"OLD_TEX_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";var o=Blockly.JavaScript.valueToCode(e,"NEW_TEX_URL",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.statementToCode(e,"DO");Blockly.JavaScript.provideFunction_("matGetEditableTexturesCode",[runtimeChunks.matGetEditableTextures]);Blockly.JavaScript.provideFunction_("matReplaceEditableTextureCode",[runtimeChunks.matReplaceEditableTexture]);e=Blockly.JavaScript.provideFunction_("replaceTexture",["\n// replaceTexture puzzle\nfunction ".concat(BFUN$2,"(matName, texName, texUrlOrElem, doCb) {\n\n    var textures = matGetEditableTextures(matName, true).filter(function(elem) {\n        return elem.name == texName;\n    });\n\n    if (!textures.length)\n        return;\n\n    if (texUrlOrElem instanceof Promise) {\n\n        texUrlOrElem.then(function(response) {\n           processImageUrl(response);\n        }, function(error) {});\n\n    } else if (typeof texUrlOrElem == 'string') {\n\n        processImageUrl(texUrlOrElem);\n\n    /**\n     * NOTE: not checking for the MediaHTML5 constructor, because otherwise this\n     * puzzle would always provide the code that's not needed most of the time\n     */\n    } else if (texUrlOrElem instanceof Object && texUrlOrElem.source\n            instanceof HTMLVideoElement) {\n\n        processVideo(texUrlOrElem.source);\n\n    } else if (texUrlOrElem instanceof HTMLCanvasElement) {\n\n        processCanvas(texUrlOrElem);\n\n    } else {\n\n        return;\n\n    }\n\n    function processImageUrl(url) {\n\n        var isHDR = (url.search(/\\.hdr$/) > 0);\n\n        if (!isHDR) {\n            var loader = new v3d.ImageLoader();\n            loader.setCrossOrigin('Anonymous');\n        } else {\n            var loader = new v3d.FileLoader();\n            loader.setResponseType('arraybuffer');\n        }\n\n        loader.load(url, function(image) {\n            // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n            var isJPEG = url.search(/\\.(jpg|jpeg)$/) > 0 || url.search(/^data\\:image\\/jpeg/) === 0;\n\n            textures.forEach(function(elem) {\n\n                if (!isHDR) {\n                    elem.image = image;\n                } else {\n                    // parse loaded HDR buffer\n                    var rgbeLoader = new v3d.RGBELoader();\n                    var texData = rgbeLoader.parse(image);\n\n                    // NOTE: reset params since the texture may be converted to float\n                    elem.type = v3d.UnsignedByteType;\n                    elem.encoding = v3d.RGBEEncoding;\n\n                    elem.image = {\n                        data: texData.data,\n                        width: texData.width,\n                        height: texData.height\n                    }\n\n                    elem.magFilter = v3d.LinearFilter;\n                    elem.minFilter = v3d.LinearFilter;\n                    elem.generateMipmaps = false;\n                    elem.isDataTexture = true;\n\n                }\n\n                elem.format = isJPEG ? v3d.RGBFormat : v3d.RGBAFormat;\n                elem.needsUpdate = true;\n\n                // update world material if it is using this texture\n                var wMat = appInstance.worldMaterial;\n                if (wMat)\n                    for (var texName in wMat.nodeTextures)\n                        if (wMat.nodeTextures[texName] == elem)\n                            appInstance.updateEnvironment(wMat);\n\n            });\n\n            // exec once\n            doCb();\n\n        });\n    }\n\n    function processVideo(elem) {\n        var videoTex = new v3d.VideoTexture(elem);\n        videoTex.flipY = false;\n        videoTex.name = texName;\n\n        var videoAssigned = false;\n\n        var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n        mats.forEach(function(mat) {\n\n            textures.forEach(function(tex) {\n                matReplaceEditableTexture(mat, tex, videoTex);\n            });\n\n            mat.needsUpdate = true;\n            videoAssigned = true;\n        });\n\n        if (videoAssigned)\n            doCb();\n\n    }\n\n    function processCanvas(elem) {\n        var canvasTex = new v3d.CanvasTexture(elem);\n        canvasTex.flipY = false;\n        canvasTex.name = texName;\n\n        var canvasAssigned = false;\n\n        var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n        mats.forEach(function(mat) {\n\n            textures.forEach(function(tex) {\n                matReplaceEditableTexture(mat, tex, canvasTex);\n            });\n\n            mat.needsUpdate = true;\n            canvasAssigned = true;\n        });\n\n        if (canvasAssigned) {\n\n            if (v3d.PL) {\n                v3d.PL.canvasTextures = v3d.PL.canvasTextures || {};\n                v3d.PL.canvasTextures[canvasTex.image.id] = canvasTex;\n            }\n\n            doCb();\n        }\n\n    }\n}\n    ")]);return"".concat(e,"(").concat(n,", ").concat(t,", ").concat(o,", ").concat(d(i),");\n")};Blockly.Blocks.getTextureParam={init:function(){var t=this;function o(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetEditableTextures(e)}return[]}this.appendDummyInput("").appendField("get").appendField(new BlocklyExt.Fields.Dropdown([["width","WIDTH"],["height","HEIGHT"],["aspect","ASPECT"],["dimensions","WIDTH_HEIGHT"]]),"WHAT");this.appendDummyInput("TEX_NAME_INPUT").appendField("of texture").appendField(new BlocklyExt.Fields.Dropdown([["<no textures>","<no textures>"]]),"TEX_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("TEX_NAME").callValidator(this.getFieldValue("TEX_NAME"))});this.setInputsInline(!0);this.setOutput(!0,["Number","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip("Get param value of the texture found for a specified material.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#get_texture_param");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["flexTexInput","flexible texture input",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("TEX_NAME_FLEX")&&Blockly.Mutator.reconnect(e.texNameFlexConnection_,this,"TEX_NAME_FLEX")}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("TEX_NAME");e.menuGenerator_=function(){var e=o(),n={},e=e.filter(function(e){var t=n[e.name];n[e.name]=!0;return!t}).map(function(e){return[e.name,e.name]});e.length||(e=[["<no textures>","<no textures>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<o().map(function(e){return e.name}).indexOf(t))})})},saveConnections:function(e){var t=this.getInput("TEX_NAME_FLEX");t&&(e.texNameFlexConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.flexTexInput&&!this.getInput("TEX_NAME_FLEX")){this.appendValueInput("TEX_NAME_FLEX").appendField("of texture").setCheck(["String"]);this.moveInputBefore("TEX_NAME_FLEX","MATERIAL");this.getInput("TEX_NAME_INPUT").setVisible(!1)}else if(!e.flexTexInput&&this.getInput("TEX_NAME_FLEX")){this.removeInput("TEX_NAME_FLEX");this.getInput("TEX_NAME_INPUT").setVisible(!0)}}};Blockly.JavaScript.getTextureParam=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("TEX_NAME_INPUT").isVisible()?"'"+e.getFieldValue("TEX_NAME")+"'":Blockly.JavaScript.valueToCode(e,"TEX_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";var o="'"+e.getFieldValue("WHAT")+"'";Blockly.JavaScript.provideFunction_("matGetEditableTexturesCode",[runtimeChunks.matGetEditableTextures]);e=Blockly.JavaScript.provideFunction_("getTextureParam",["\n// getTextureParam puzzle\nfunction ".concat(BFUN$2,"(matName, texName, what) {\n\n    var textures = matGetEditableTextures(matName).filter(function(elem) {\n        return elem.name == texName;\n    });\n\n\n    var validTex = textures.length && textures[0].image ? textures[0] : null;\n\n    var widthProp = validTex instanceof v3d.VideoTexture ? 'videoWidth' : 'width';\n    var heightProp = validTex instanceof v3d.VideoTexture ? 'videoHeight' : 'height';\n\n    switch (what) {\n    case 'WIDTH':\n        if (!validTex || !validTex.image[widthProp]) return 0;\n        return validTex.image[widthProp];\n        break;\n    case 'HEIGHT':\n        if (!validTex || !validTex.image[heightProp]) return 0;\n        return validTex.image[heightProp];\n        break;\n    case 'ASPECT':\n        if (!validTex || !validTex.image[widthProp] || !validTex.image[heightProp]) return 0;\n        return validTex.image[widthProp] / validTex.image[heightProp];\n        break;\n    case 'WIDTH_HEIGHT':\n        if (!validTex || !validTex.image[widthProp] || !validTex.image[heightProp]) return [0, 0];\n        return [validTex.image[widthProp], validTex.image[heightProp]];\n        break;\n    }\n}\n    ")]);return["".concat(e,"(").concat(n,", ").concat(t,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setMaterialColor={init:function(){var t=this;function n(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetColors(e)}return[]}this.appendDummyInput("COL_NAME_INPUT").appendField("set color").appendField(new BlocklyExt.Fields.Dropdown([["<no colors>","<no colors>"]]),"MAT_COL_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.appendValueInput("R").appendField("to R:").setCheck("Number");this.appendValueInput("G").appendField("G:").setCheck("Number");this.appendValueInput("B").appendField("B:").setCheck("Number");this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("MAT_COL_NAME").callValidator(this.getFieldValue("MAT_COL_NAME"))});this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Set R, G and B components of a color parameter found for a specified material.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#materials_set_color");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["flexColInput","flexible color input",!1],["useCSSColor","use CSS color code",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();if(e){this.getInput("COL_NAME_FLEX")&&Blockly.Mutator.reconnect(e.colNameFlexConnection_,this,"COL_NAME_FLEX");this.getInput("CSS")&&Blockly.Mutator.reconnect(e.cssColorConnection_,this,"CSS");this.getInput("R")&&Blockly.Mutator.reconnect(e.rColorConnection_,this,"R");this.getInput("G")&&Blockly.Mutator.reconnect(e.gColorConnection_,this,"G");this.getInput("B")&&Blockly.Mutator.reconnect(e.bColorConnection_,this,"B")}}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("MAT_COL_NAME");e.menuGenerator_=function(){var e=n().map(function(e){return[e,e]});e.length||(e=[["<no colors>","<no colors>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<n().indexOf(t))})})},saveConnections:function(e){var t=this.getInput("COL_NAME_FLEX");t&&(e.colNameFlexConnection_=t.connection.targetConnection);t=this.getInput("CSS");t&&(e.cssColorConnection_=t.connection.targetConnection);t=this.getInput("R");t&&(e.rColorConnection_=t.connection.targetConnection);t=this.getInput("G");t&&(e.gColorConnection_=t.connection.targetConnection);t=this.getInput("B");t&&(e.bColorConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.flexColInput&&!this.getInput("COL_NAME_FLEX")){this.appendValueInput("COL_NAME_FLEX").appendField("set color").setCheck(["String"]);this.moveInputBefore("COL_NAME_FLEX","MATERIAL");this.getInput("COL_NAME_INPUT").setVisible(!1)}else if(!e.flexColInput&&this.getInput("COL_NAME_FLEX")){this.removeInput("COL_NAME_FLEX");this.getInput("COL_NAME_INPUT").setVisible(!0)}if(e.useCSSColor&&!this.getInput("CSS")){this.appendValueInput("CSS").appendField("to CSS color:").setCheck(["String"]);this.removeInput("R");this.removeInput("G");this.removeInput("B")}else if(!e.useCSSColor&&this.getInput("CSS")){this.removeInput("CSS");this.appendValueInput("R").appendField("to R:").setCheck("Number");this.appendValueInput("G").appendField("G:").setCheck("Number");this.appendValueInput("B").appendField("B:").setCheck("Number")}}};Blockly.JavaScript.setMaterialColor=function(e){var t,n,o=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("COL_NAME_INPUT").isVisible()?"'"+e.getFieldValue("MAT_COL_NAME")+"'":Blockly.JavaScript.valueToCode(e,"COL_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";n=e.getInput("CSS")&&Blockly.JavaScript.valueToCode(e,"CSS",Blockly.JavaScript.ORDER_NONE)||"''";var i=Blockly.JavaScript.valueToCode(e,"R",Blockly.JavaScript.ORDER_NONE)||"0",r=Blockly.JavaScript.valueToCode(e,"G",Blockly.JavaScript.ORDER_NONE)||"0",s=Blockly.JavaScript.valueToCode(e,"B",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("matGetColorsCode",[runtimeChunks.matGetColors]);e=Blockly.JavaScript.provideFunction_("setMaterialColor",["\n// setMaterialColor puzzle\nfunction ".concat(BFUN$2,"(matName, colName, r, g, b, cssCode) {\n\n    var colors = matGetColors(matName);\n\n    if (colors.indexOf(colName) < 0)\n        return;\n\n    if (cssCode) {\n        var color = new v3d.Color(cssCode);\n        color.convertSRGBToLinear();\n        r = color.r;\n        g = color.g;\n        b = color.b;\n    }\n\n    var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n\n    for (var i = 0; i < mats.length; i++) {\n        var mat = mats[i];\n\n        if (mat.isMeshNodeMaterial) {\n            var rgbIdx = mat.nodeRGBMap[colName];\n            mat.nodeRGB[rgbIdx].x = r;\n            mat.nodeRGB[rgbIdx].y = g;\n            mat.nodeRGB[rgbIdx].z = b;\n        } else {\n            mat[colName].r = r;\n            mat[colName].g = g;\n            mat[colName].b = b;\n        }\n        mat.needsUpdate = true;\n\n        if (mat === appInstance.worldMaterial)\n            appInstance.updateEnvironment(mat);\n    }\n}\n    ")]);return"".concat(e,"(").concat(o,", ").concat(t,", ").concat(i,", ").concat(r,", ").concat(s,", ").concat(n,");\n")};Blockly.Blocks.getMaterialColor={init:function(){var t=this;function n(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetColors(e)}return[]}this.appendDummyInput("COL_NAME_INPUT").appendField("get color").appendField(new BlocklyExt.Fields.Dropdown([["<no colors>","<no colors>"]]),"MAT_COL_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.appendDummyInput().appendField(" ").appendField(new BlocklyExt.Fields.Dropdown([["red","R"],["green","G"],["blue","B"],["rgb","RGB"],["css (hex)","CSS_HEX"],["css (rgb)","CSS_RGB"]]),"COORD");this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("MAT_COL_NAME").callValidator(this.getFieldValue("MAT_COL_NAME"))});this.setInputsInline(!0);this.setOutput(!0,["Number","String","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip("Get color parameter found for a specified material.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#materials_get_color");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["flexColInput","flexible color input",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("COL_NAME_FLEX")&&Blockly.Mutator.reconnect(e.colNameFlexConnection_,this,"COL_NAME_FLEX")}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("MAT_COL_NAME");e.menuGenerator_=function(){var e=n().map(function(e){return[e,e]});e.length||(e=[["<no colors>","<no colors>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<n().indexOf(t))})})},saveConnections:function(e){var t=this.getInput("COL_NAME_FLEX");t&&(e.colNameFlexConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.flexColInput&&!this.getInput("COL_NAME_FLEX")){this.appendValueInput("COL_NAME_FLEX").appendField("get color").setCheck(["String"]);this.moveInputBefore("COL_NAME_FLEX","MATERIAL");this.getInput("COL_NAME_INPUT").setVisible(!1)}else if(!e.flexColInput&&this.getInput("COL_NAME_FLEX")){this.removeInput("COL_NAME_FLEX");this.getInput("COL_NAME_INPUT").setVisible(!0)}}};Blockly.JavaScript.getMaterialColor=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("COL_NAME_INPUT").isVisible()?"'"+e.getFieldValue("MAT_COL_NAME")+"'":Blockly.JavaScript.valueToCode(e,"COL_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";var o="'"+e.getFieldValue("COORD")+"'";Blockly.JavaScript.provideFunction_("matGetColorsCode",[runtimeChunks.matGetColors]);e=Blockly.JavaScript.provideFunction_("getMaterialColor",["\n// getMaterialColor puzzle\nfunction ".concat(BFUN$2,"(matName, colName, coord) {\n\n    var colors = matGetColors(matName);\n    if (colors.indexOf(colName) < 0)\n        return;\n\n    var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n\n    if (mats.length) {\n\n        var mat = mats[0];\n        var color = _pGlob.colorTmp;\n\n        if (mat.isMeshNodeMaterial) {\n            var rgbIdx = mat.nodeRGBMap[colName];\n\n            color.r = mat.nodeRGB[rgbIdx].x;\n            color.g = mat.nodeRGB[rgbIdx].y;\n            color.b = mat.nodeRGB[rgbIdx].z;\n\n        } else {\n\n            color.copy(mat[colName]);\n\n        }\n\n        switch (coord) {\n            case 'R':\n            case 'G':\n            case 'B':\n                return color[coord.toLowerCase()];\n                break;\n            case 'RGB':\n                return color.toArray();\n                break;\n            case 'CSS_HEX':\n            case 'CSS_RGB':\n                color.convertLinearToSRGB();\n\n                if (coord == 'CSS_HEX')\n                    return '#' + color.getHexString();\n                else\n                    return color.getStyle();\n                break;\n        }\n    }\n\n}\n    ")]);return["".concat(e,"(").concat(n,", ").concat(t,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setMaterialValue={init:function(){var t=this;function n(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetValues(e)}return[]}this.appendDummyInput("VAL_NAME_INPUT").appendField("set value").appendField(new BlocklyExt.Fields.Dropdown([["<no values>","<no values>"]]),"MAT_VAL_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.appendValueInput("VALUE").appendField("to:").setCheck("Number");this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("MAT_VAL_NAME").callValidator(this.getFieldValue("MAT_VAL_NAME"))});this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Set a value parameter found for a specified material.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#materials_set_value");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["flexValInput","flexible value input",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("VAL_NAME_FLEX")&&Blockly.Mutator.reconnect(e.valNameFlexConnection_,this,"VAL_NAME_FLEX")}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("MAT_VAL_NAME");e.menuGenerator_=function(){var e=n().map(function(e){return[e,e]});e.length||(e=[["<no values>","<no values>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<n().indexOf(t))})})},saveConnections:function(e){var t=this.getInput("VAL_NAME_FLEX");t&&(e.valNameFlexConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.flexValInput&&!this.getInput("VAL_NAME_FLEX")){this.appendValueInput("VAL_NAME_FLEX").appendField("set value").setCheck(["String"]);this.moveInputBefore("VAL_NAME_FLEX","MATERIAL");this.getInput("VAL_NAME_INPUT").setVisible(!1)}else if(!e.flexValInput&&this.getInput("VAL_NAME_FLEX")){this.removeInput("VAL_NAME_FLEX");this.getInput("VAL_NAME_INPUT").setVisible(!0)}}};Blockly.JavaScript.setMaterialValue=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("VAL_NAME_INPUT").isVisible()?"'"+e.getFieldValue("MAT_VAL_NAME")+"'":Blockly.JavaScript.valueToCode(e,"VAL_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";var o=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("matGetValuesCode",[runtimeChunks.matGetValues]);e=Blockly.JavaScript.provideFunction_("setMaterialValue",["\n// setMaterialValue puzzle\nfunction ".concat(BFUN$2,"(matName, valName, value) {\n\n    var values = matGetValues(matName);\n    if (values.indexOf(valName) < 0)\n        return;\n\n    var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n\n    for (var i = 0; i < mats.length; i++) {\n        var mat = mats[i];\n\n        if (mat.isMeshNodeMaterial) {\n            var valIdx = mat.nodeValueMap[valName];\n            mat.nodeValue[valIdx] = Number(value);\n        } else\n            mat[valName] = Number(value);\n\n        if (mat === appInstance.worldMaterial)\n            appInstance.updateEnvironment(mat);\n    }\n}\n    ")]);return"".concat(e,"(").concat(n,", ").concat(t,", ").concat(o,");\n")};Blockly.Blocks.getMaterialValue={init:function(){var t=this;function n(){var e=t.getInputTargetBlock("MATERIAL");if(e){e=e.getFieldValue("FIELDNAME");return matGetValues(e)}return[]}this.appendDummyInput("VAL_NAME_INPUT").appendField("get value").appendField(new BlocklyExt.Fields.Dropdown([["<no values>","<no values>"]]),"MAT_VAL_NAME");this.appendValueInput("MATERIAL").appendField("in material").setCheck(["Material","String"]);this.setOnChange(function(e){isInputValueChanged(e,this,"MATERIAL")&&this.getField("MAT_VAL_NAME").callValidator(this.getFieldValue("MAT_VAL_NAME"))});this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(COLOR_OPERATIONS);this.setTooltip("Get a value parameter found for a specified material.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#materials_get_value");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["flexValInput","flexible value input",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("VAL_NAME_FLEX")&&Blockly.Mutator.reconnect(e.valNameFlexConnection_,this,"VAL_NAME_FLEX")}));this.updateShape_();blockReady(this,function(e,t){e=e.getField("MAT_VAL_NAME");e.menuGenerator_=function(){var e=n().map(function(e){return[e,e]});e.length||(e=[["<no values>","<no values>"]]);return e};fieldSetValidator(e,function(e,t){fieldSetValidColor(e,-1<n().indexOf(t))})})},saveConnections:function(e){var t=this.getInput("VAL_NAME_FLEX");t&&(e.valNameFlexConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.flexValInput&&!this.getInput("VAL_NAME_FLEX")){this.appendValueInput("VAL_NAME_FLEX").appendField("get value").setCheck(["String"]);this.moveInputBefore("VAL_NAME_FLEX","MATERIAL");this.getInput("VAL_NAME_INPUT").setVisible(!1)}else if(!e.flexValInput&&this.getInput("VAL_NAME_FLEX")){this.removeInput("VAL_NAME_FLEX");this.getInput("VAL_NAME_INPUT").setVisible(!0)}}};Blockly.JavaScript.getMaterialValue=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''";t=e.getInput("VAL_NAME_INPUT").isVisible()?"'"+e.getFieldValue("MAT_VAL_NAME")+"'":Blockly.JavaScript.valueToCode(e,"VAL_NAME_FLEX",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("matGetValuesCode",[runtimeChunks.matGetValues]);e=Blockly.JavaScript.provideFunction_("getMaterialValue",["\n// getMaterialValue puzzle\nfunction ".concat(BFUN$2,"(matName, valName) {\n\n    var values = matGetValues(matName);\n    if (values.indexOf(valName) < 0)\n        return;\n\n    var mats = v3d.SceneUtils.getMaterialsByName(appInstance, matName);\n\n    if (mats.length) {\n        var mat = mats[0];\n\n        if (mat.isMeshNodeMaterial) {\n            var valIdx = mat.nodeValueMap[valName];\n            return mat.nodeValue[valIdx];\n        } else\n            return mat[valName];\n    }\n}\n    ")]);return["".concat(e,"(").concat(n,", ").concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getObjectMaterial={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String"]).appendField("get material");this.setInputsInline(!1);this.setOutput(!0,"Material");this.setColour(COLOR_OPERATIONS);this.setTooltip("Retrieves the name of a material assigned to an object.\n            If multiple materials are assigned to the same object, returns the first one.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#get_material")}};Blockly.Blocks.getObjectMaterial={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String"]).appendField("get material");this.setInputsInline(!1);this.setOutput(!0,"Material");this.setColour(COLOR_OPERATIONS);this.setTooltip("Retrieves the name of a material assigned to an object.\n            If multiple materials are assigned to the same object, returns the first one.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#get_material")}};Blockly.JavaScript.getObjectMaterial=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("getObjectMaterial",["\n// getObjectMaterial puzzle\nfunction ".concat(BFUN$2,"(objNames) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return '';\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i]\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n\n        obj = obj.resolveMultiMaterial()[0];\n\n        if (obj.material && typeof obj.material.name == \"string\")\n            return obj.material.name;\n    }\n    return '';\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.textureFromText={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("texture from text");this.appendValueInput("WIDTH").setCheck("Number").appendField("width");this.appendValueInput("HEIGHT").setCheck("Number").appendField("height");this.appendValueInput("FONTFAMILY").setCheck("String").appendField("font family");this.appendValueInput("FONTSIZE").setCheck("Number").appendField("size");this.appendDummyInput().appendField("align").appendField(new BlocklyExt.Fields.Dropdown([["center","CENTER"],["left","LEFT"],["right","RIGHT"],["fit","FIT"]]),"ALIGN");this.appendValueInput("OFFSET").setCheck("Number").appendField("offset");this.setInputsInline(!1);this.setColour(COLOR_OPERATIONS);this.setOutput(!0,"String");this.setTooltip("Creates a texture from the specified text.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#texture_from_text")}};Blockly.JavaScript.textureFromText=function(e){var t=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"WIDTH",Blockly.JavaScript.ORDER_NONE)||"1024",o=Blockly.JavaScript.valueToCode(e,"HEIGHT",Blockly.JavaScript.ORDER_NONE)||"512",i=Blockly.JavaScript.valueToCode(e,"FONTFAMILY",Blockly.JavaScript.ORDER_NONE)||"'Arial'",r=Blockly.JavaScript.valueToCode(e,"FONTSIZE",Blockly.JavaScript.ORDER_NONE)||"160",s="'"+e.getFieldValue("ALIGN")+"'",e=Blockly.JavaScript.valueToCode(e,"OFFSET",Blockly.JavaScript.ORDER_NONE)||"0";return[Blockly.JavaScript.provideFunction_("textureFromText",["\n// textureFromText puzzle\nfunction ".concat(BFUN$2,"(text, width, height, family, size, align, offset) {\n\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    // clear color first to prevent severe pixelating\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.font = size + 'px ' + family;\n    ctx.fillStyle = 'black';\n\n    var x;\n    switch (align) {\n    case 'CENTER':\n        ctx.textAlign = 'center';\n        x = width/2;\n        break;\n    case 'LEFT':\n        ctx.textAlign = 'left';\n        x = offset;\n        break;\n    case 'RIGHT':\n        ctx.textAlign = 'right';\n        x = width - offset;\n        break;\n    case 'FIT':\n        function fit(min, max) {\n            if (max - min < 1)\n                return min;\n            var test = min + (max - min)/2;\n            ctx.font = test + 'px ' + family;\n            var measured = ctx.measureText(text).width;\n            return (measured > width - 2 * offset) ? fit(min, test) : fit(test, max);\n        }\n        size = fit(0, height);\n        x = offset;\n        // no fit performed\n        if ((height - size) < 1) {\n            ctx.textAlign = 'center';\n            x = width/2;\n        }\n        break;\n    }\n    var y = height/2 + size/4;\n    ctx.fillText(text, x, y);\n    return canvas.toDataURL();\n}\n    ")])+"("+t+", "+n+", "+o+", "+i+", "+r+", "+s+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.generateNormalMap={init:function(){this.appendValueInput("SRCURL").setCheck("String").appendField("generate normal map");this.appendValueInput("STRENGTH").setCheck("Number").appendField("strength");this.appendValueInput("LEVEL").setCheck("Number").appendField("level");this.appendValueInput("BLUR").setCheck("Number").appendField("blur / sharp");this.appendDummyInput().appendField("filter").appendField(new BlocklyExt.Fields.Dropdown([["Sobel","Sobel"],["Scharr","Scharr"]]),"FILTER");this.appendDummyInput("INVERT_R").appendField("invert R").appendField(new Blockly.FieldCheckbox("FALSE"),"INVERT_R");this.appendDummyInput("INVERT_G").appendField("invert G").appendField(new Blockly.FieldCheckbox("FALSE"),"INVERT_G");this.appendDummyInput("INVERT_G").appendField("invert height").appendField(new Blockly.FieldCheckbox("FALSE"),"INVERT_HEIGHT");this.setInputsInline(!1);this.setColour(COLOR_OPERATIONS);this.setOutput(!0,"Promise");this.setTooltip("Converts an image to normal map.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Materials.html#generate_normal_map")}};Blockly.JavaScript.generateNormalMap=function(e){var t=Blockly.JavaScript.valueToCode(e,"SRCURL",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"STRENGTH",Blockly.JavaScript.ORDER_NONE)||"2.5",o=Blockly.JavaScript.valueToCode(e,"LEVEL",Blockly.JavaScript.ORDER_NONE)||"7.0",i=Blockly.JavaScript.valueToCode(e,"BLUR",Blockly.JavaScript.ORDER_NONE)||"0.0",r="'"+e.getFieldValue("FILTER")+"'",s="TRUE"==e.getField("INVERT_R").getValue(),a="TRUE"==e.getField("INVERT_G").getValue(),e="TRUE"==e.getField("INVERT_HEIGHT").getValue();Blockly.JavaScript.provideFunction_("NormalGenCode",[getNormalGenCode()]);return[Blockly.JavaScript.provideFunction_("generateNormalMap",["\n// generateNormalMap puzzle\nfunction ".concat(BFUN$2,"(srcURL, strength, level, blur, filter, invertR, invertG, invertHeight) {\n\n    return new Promise(function(resolve, reject) {\n\n        var heightImage = new Image();\n        heightImage.src = srcURL;\n        heightImage.onload = function() {\n\n            var output = NORMALGEN.convert(heightImage,\n                {\n                    width: heightImage.width,\n                    height: heightImage.height,\n                    strength: strength,\n                    level: level,\n                    blur: blur,\n                    filter: filter,\n                    invertR: invertR,\n                    invertG: invertG,\n                    invertHeight: invertHeight\n                }\n            );\n            resolve(output);\n        };\n\n        heightImage.onerror = function() {\n\n            var pink = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAC' +\n                'QkWg2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wgNDjoFwUNXbAAAABpJREF' +\n                'UKM9jfF52jYEUwMRAIhjVMKph6GgAAOxFAlM1pWHTAAAAAElFTkSuQmCC';\n\n            resolve(pink); // return a pink image instead of failing\n        };\n\n    });\n\n}\n    ")])+"("+t+", "+n+", "+o+", "+i+", "+r+", "+s+", "+a+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.addAnnotation={init:function(){this.appendDummyInput().appendField("add annotation");this.appendValueInput("ANNOTATION").setCheck("String");this.appendValueInput("TARGET").appendField("to").setCheck(["Object3D","String"]);this.appendValueInput("CONTENTS").appendField("with").setCheck("String");this.appendValueInput("ID").appendField("id").setCheck("String");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Add a 2D marker to an object that a user can expand\n            by clicking on it to see the object description.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#add_annotation")}};Blockly.JavaScript.addAnnotation=function(e){return n(e,!0)};Blockly.Blocks.removeAnnotation={init:function(){this.appendDummyInput().appendField("remove annotation from");this.appendValueInput("TARGET").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Removes a previously added annotation from an object.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#remove_annotation")}};Blockly.JavaScript.removeAnnotation=function(e){return n(e,!1)};function n(e,t){var n=Blockly.JavaScript.valueToCode(e,"ANNOTATION",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"TARGET",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"CONTENTS",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("handleAnnot",["\n// addAnnotation and removeAnnotation puzzles\nfunction ".concat(BFUN$2,"(add, annot, objNames, contents, id) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n        // check if it already has an annotation and remove it\n        for (var j = 0; j < obj.children.length; j++) {\n            var child = obj.children[j];\n            if (child.type == \"Annotation\") {\n                obj.remove(child);\n                appInstance.container.removeChild(child.annotation);\n            }\n        }\n        if (add) {\n            var aObj = new v3d.Annotation(appInstance.container, annot, contents);\n            aObj.name = annot;\n            aObj.fadeObscured = _pGlob.fadeAnnotations;\n            if (id) {\n                aObj.annotation.id = id;\n                aObj.annotationDialog.id = id+'_dialog';\n            }\n            obj.add(aObj);\n        }\n    }\n}\n    ")])+"("+t+", "+n+", "+o+", "+i+", "+e+");\n"}Blockly.Blocks.openAnnotation={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("open annotation");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Open annotation dialog");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#open_annotation")}};Blockly.JavaScript.openAnnotation=function(e){return o(e,!0)};Blockly.Blocks.closeAnnotation={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("close annotation");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Close annotation dialog");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#close_annotation")}};Blockly.JavaScript.closeAnnotation=function(e){return o(e,!1)};function o(e,t){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("openCloseAnnotation",["\n// show and hide puzzles\nfunction ".concat(BFUN$2,"(objNames, bool) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName)\n            continue;\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n\n        if (obj.isAnnotation)\n            obj.setDialogVisibility(bool);\n    }\n}\n    ")])+"("+e+", "+t+");\n"}Blockly.Blocks.updateTextObject={init:function(){this.appendValueInput("VALUE1").setCheck(["Object3D","String","Array"]).appendField("update text object(s)");this.appendValueInput("VALUE2").setCheck("String").appendField("with");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Generates a new mesh for a text object according to specified textual content.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#update_text_object")}};Blockly.JavaScript.updateTextObject=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE1",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"VALUE2",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("updateTextObj",["\n// updateTextObject puzzle\nfunction ".concat(BFUN$2,"(objNames, text) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n        var obj = getObjectByName(objName);\n        if (!obj || !obj.geometry || !obj.geometry.cloneWithText)\n            continue;\n        obj.geometry = obj.geometry.cloneWithText(String(text));\n    }\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.makeParent={init:function(){this.appendValueInput("PARENT_WHAT").appendField("parent").setCheck(["Object3D","String"]);this.appendValueInput("PARENT_TO").appendField("to object").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Creates a parent relation between objects,\n            so that the first object follows position/rotation/scale of the second one.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#parent")}};Blockly.JavaScript.makeParent=function(e){var t=Blockly.JavaScript.valueToCode(e,"PARENT_WHAT",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"PARENT_TO",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("makeParent",["\n// makeParent puzzle\nfunction ".concat(BFUN$2,'(objName, targetObjName) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n    if (targetObjName && targetObjName !== LIST_NONE) {\n        var targetObj = getObjectByName(targetObjName);\n        if (!targetObj)\n            return;\n    } else {\n        obj.traverseAncestors(function(ancObj) {\n            if (ancObj.type == "Scene")\n                targetObj = ancObj;\n        });\n    }\n    var matOffset = new v3d.Matrix4();\n    matOffset.getInverse(targetObj.matrixWorld);\n    matOffset.multiply(obj.matrixWorld);\n    matOffset.decompose(obj.position, obj.quaternion, obj.scale);\n    targetObj.add(obj);\n\n    obj.updateMatrixWorld(true);\n}\n    ')])+"("+t+", "+e+");\n"};Blockly.Blocks.distanceBetweenObjects={init:function(){this.appendValueInput("OBJECT1").appendField("distance between").setCheck(["Object3D","String"]);this.appendValueInput("OBJECT2").appendField("and").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(COLOR_OPERATIONS);this.setTooltip('Outputs the distance between two specified objects.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#distance")}};Blockly.JavaScript.distanceBetweenObjects=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT1",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"OBJECT2",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("getDistanceBetweenObjects",["\n// distanceBetweenObjects puzzle\nfunction ".concat(BFUN$2,"(objName1, objName2) {\n    if (!objName1 || !objName2)\n        return;\n    var obj1 = getObjectByName(objName1);\n    var obj2 = getObjectByName(objName2);\n    if (!obj1 || !obj2)\n        return;\n    return obj1.getWorldPosition(_pGlob.vec3Tmp).distanceTo(obj2.getWorldPosition(_pGlob.vec3Tmp2));\n}\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getObjCustomProps={init:function(){this.appendValueInput("VALUE").setCheck(["Object3D","String","Array"]).appendField("get custom props");this.setInputsInline(!1);this.setOutput(!0,"Dictionary");this.setColour(COLOR_OPERATIONS);this.setTooltip("Returns a dictionary with custom properties assigned to an object in Blender, 3ds Max, or Maya.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_custom_props")}};Blockly.JavaScript.getObjCustomProps=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("getObjCustomProps",["\n// getObjCustomProps puzzle\nfunction ".concat(BFUN$2,'(objName) {\n    if (!objName)\n        return {};\n\n    var obj = getObjectByName(objName);\n\n    if (obj && "v3d" in obj.userData && "customProps" in obj.userData.v3d) {\n        return obj.userData.v3d.customProps;\n    } else\n        return {};\n}\n    ')])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.outline={init:function(){this.appendValueInput("TARGET").setCheck(["Object3D","String","Array"]).appendField("outline").appendField(new BlocklyExt.Fields.Dropdown([["enable","ENABLE"],["disable","DISABLE"]]),"DO_WHAT").appendField("for");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Applies or removes the outline effect to/from a specified object.\n            To unlock this puzzle, enable the outline effect in Blender, 3ds Max, or Maya.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#outline");blockReady(this,function(e,n){isOutlineAvailable(n)||e.setWarningText("Enable Outlining in Blender, 3ds Max, or Maya!");fieldSetValidator(e.getField("DO_WHAT"),function(e,t){fieldSetValidColor(e,isOutlineAvailable(n))})})}};Blockly.JavaScript.outline=function(e){var t=Blockly.JavaScript.valueToCode(e,"TARGET",Blockly.JavaScript.ORDER_NONE)||"''",e="'"+e.getFieldValue("DO_WHAT")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("outline",["\n// outline puzzle\nfunction ".concat(BFUN$2,'(objNames, doWhat) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    if (!appInstance.postprocessing || !appInstance.postprocessing.outlinePass)\n        return;\n    var outlineArray = appInstance.postprocessing.outlinePass.selectedObjects;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        var obj = getObjectByName(objName);\n        if (!obj)\n            continue;\n        if (doWhat == "ENABLE") {\n            if (outlineArray.indexOf(obj) == -1)\n                outlineArray.push(obj);\n        } else {\n            var index = outlineArray.indexOf(obj);\n            if (index > -1)\n                outlineArray.splice(index, 1);\n        }\n    }\n}\n    ')])+"("+t+", "+e+");\n"};Blockly.Blocks.setLightParam={init:function(){this.appendDummyInput().appendField("set").appendField(new BlocklyExt.Fields.Dropdown([["color (vector)","COLOR_VECTOR"],["color (css/rgb)","COLOR_CSS_RGB"],["color (css/hex)","COLOR_CSS_HEX"],["intensity","INTENSITY"]]),"TYPE");this.appendValueInput("PARAM").setCheck(["Number","Array","String"]).appendField("");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("to light");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Set parameter (vector or value) to a light.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#set_light_param");function t(e){var t=this.getFieldValue("TYPE"),n=this.getInput("PARAM");switch(t){case"COLOR_VECTOR":n.setCheck("Array");break;case"INTENSITY":n.setCheck("Number");break;default:n.setCheck("String")}}var n=this.onchange;"function"==typeof n?this.setOnChange(function(e){n.call(this,e);t.call(this,e)}):this.setOnChange(t)}};Blockly.JavaScript.setLightParam=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"PARAM",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("setLightParam",["\n// setLightParam puzzle\nfunction ".concat(BFUN$2,"(type, objNames, param) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj || !obj.isLight)\n            return;\n\n        switch (type) {\n        case 'COLOR_VECTOR':\n            obj.color.r = param[0];\n            obj.color.g = param[1];\n            obj.color.b = param[2];\n            break;\n        case 'COLOR_CSS_HEX':\n        case 'COLOR_CSS_RGB':\n            var color = _pGlob.colorTmp.set(param);\n            color.convertSRGBToLinear();\n            obj.color.r = color.r;\n            obj.color.g = color.g;\n            obj.color.b = color.b;\n            break;\n        case 'INTENSITY':\n            obj.intensity = param;\n            break;\n        }\n\n    });\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.getLightParam={init:function(){this.appendDummyInput().appendField("get").appendField(new BlocklyExt.Fields.Dropdown([["color (vector)","COLOR_VECTOR"],["color (css/hex)","COLOR_CSS_HEX"],["color (css/rgb)","COLOR_CSS_RGB"],["intensity","INTENSITY"]]),"TYPE");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("from light");this.setInputsInline(!0);this.setOutput(!0,["Number","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip("Get parameter (vector or value) from a light.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Objects.html#get_light_param")}};Blockly.JavaScript.getLightParam=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.valueToCode(e,"PARAM",Blockly.JavaScript.ORDER_NONE);Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("getLightParam",["\n// getLightParam puzzle\nfunction ".concat(BFUN$2,"(type, objName) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj || !obj.isLight)\n        return;\n\n    switch (type) {\n    case 'COLOR_VECTOR':\n        return [obj.color.r, obj.color.g, obj.color.b];\n        break;\n    case 'COLOR_CSS_HEX':\n        var color = _pGlob.colorTmp.copy(obj.color).convertLinearToSRGB();\n        return '#' + color.getHexString();\n        break;\n    case 'COLOR_CSS_RGB':\n        var color = _pGlob.colorTmp.copy(obj.color).convertLinearToSRGB();\n        return color.getStyle();\n        break;\n    case 'INTENSITY':\n        return obj.intensity;\n        break;\n    }\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.playAnimation={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("play animation");this.appendDummyInput().appendField("loop").appendField(new BlocklyExt.Fields.Dropdown([["auto","AUTO"],["once","LoopOnce"],["repeat","LoopRepeat"],["pingpong","LoopPingPong"]]),"LOOP");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Plays an animation clip. Animation clip names\n            correspond to objects to which animation is assigned in Blender, 3ds Max, or Maya\n            (only one animation clip can be assigned per object).\n            The drop-down can be used to change the animation mode - "auto" allows for\n            using the animation mode specified in Blender, 3ds Max, or Maya.\n            Also works for a list of animation clips.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#play_animation");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *play animation* puzzle from the toolbox.")}};Blockly.JavaScript.playAnimation=function(e){return i(e,"PLAY",!0)};Blockly.Blocks.playAnimationExt={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("play animation");this.appendValueInput("FROM").appendField("from").setCheck(["Number"]);this.appendValueInput("TO").appendField("to").setCheck(["Number"]);this.appendDummyInput().appendField("reversed").appendField(new Blockly.FieldCheckbox("FALSE"),"REVERSED");this.appendStatementInput("DO").appendField("when finished do");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Plays an animation clip. Animation clip names\n            correspond to objects to which animation is assigned in Blender, 3ds Max, or Maya\n            (only one animation clip can be assigned per object).\n            Use the "from" and "to" fields to specify the frame range.\n            The "reversed" checkbox enables reversed play back.\n            Puzzles in the "when finished do" slot are processed once the animation is finished\n            (this only is valid for the "once" animation mode).\n            Also works for a list of animation clips.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#play_animation");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *play animation* puzzle from the toolbox.")}};Blockly.JavaScript.playAnimationExt=function(e){return i(e,"PLAY",!0)};Blockly.Blocks.playAnimationAdv={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("play animation");this.appendValueInput("FROM").appendField("from").setCheck(["Number"]);this.appendValueInput("TO").appendField("to").setCheck(["Number"]);this.appendValueInput("SPEED").appendField("with speed").setCheck(["Number"]);this.appendDummyInput("REVERSED").appendField("reversed").appendField(new Blockly.FieldCheckbox("FALSE"),"REVERSED");this.appendDummyInput("LOOP").appendField(" loop").appendField(new BlocklyExt.Fields.Dropdown([["auto","AUTO"],["once","LoopOnce"],["repeat","LoopRepeat"],["pingpong","LoopPingPong"]]),"LOOP");this.appendStatementInput("DO").appendField("when finished do");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Plays an animation clip. Animation clip names\n            correspond to objects to which animation is assigned in Blender, 3ds Max, or Maya\n            (only one animation clip can be assigned per object).\n            Use the "from" and "to" fields to specify the frame range.\n            Use the "speed" field to specify the playback speed.\n            The "reversed" checkbox enables reversed playback.\n            The "loop" field allows to specify the playback behavior.\n            Puzzles in the "when finished do" slot are processed once the animation is finished\n            (this only is valid for the "once" animation mode).\n            Also works for a list of animation clips.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#play_animation");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["advPlaybackOptions","advanced playback options",!1],["enableWhenFinished","when finished slot",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();if(e){this.getInput("FROM")&&Blockly.Mutator.reconnect(e.fromConnection_,this,"FROM");this.getInput("TO")&&Blockly.Mutator.reconnect(e.toConnection_,this,"TO");this.getInput("SPEED")&&Blockly.Mutator.reconnect(e.speedConnection_,this,"SPEED");this.getInput("DO")&&Blockly.Mutator.reconnect(e.doConnection_,this,"DO")}}));this.updateShape_()},saveConnections:function(e){var t=this.getInput("FROM");t&&(e.fromConnection_=t.connection.targetConnection);t=this.getInput("TO");t&&(e.toConnection_=t.connection.targetConnection);t=this.getInput("SPEED");t&&(e.speedConnection_=t.connection.targetConnection);t=this.getInput("DO");t&&(e.doConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.advPlaybackOptions){this.getInput("FROM")||this.appendValueInput("FROM").appendField("from").setCheck(["Number"]);this.getInput("TO")||this.appendValueInput("TO").appendField("to").setCheck(["Number"]);this.getInput("SPEED")||this.appendValueInput("SPEED").appendField("with speed").setCheck(["Number"]);this.getInput("REVERSED").setVisible(!0);this.moveInputBefore("REVERSED","LOOP");this.moveInputBefore("SPEED","REVERSED");this.moveInputBefore("TO","SPEED");this.moveInputBefore("FROM","TO")}else{this.getInput("FROM")&&this.removeInput("FROM");this.getInput("TO")&&this.removeInput("TO");this.getInput("SPEED")&&this.removeInput("SPEED");this.getInput("REVERSED").setVisible(!1)}if(e.enableWhenFinished){this.getInput("DO")||this.appendStatementInput("DO").appendField("when finished do");this.moveInputBefore("DO",null)}else this.getInput("DO")&&this.removeInput("DO")}};Blockly.JavaScript.playAnimationAdv=function(e){return i(e,"PLAY")};Blockly.Blocks.stopAnimation={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("stop animation");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Stops playing back an animation clip.\n            Also works for a list of animation clips.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#stop_animation")}};Blockly.JavaScript.stopAnimation=function(e){return i(e,"STOP")};Blockly.Blocks.pauseAnimation={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("pause animation");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Pauses an animation clip playback so that it can be resumed later\n            starting from the frame it was paused on.\n            Also works for a list of animation clips.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#pause_animation")}};Blockly.JavaScript.pauseAnimation=function(e){return i(e,"PAUSE")};Blockly.Blocks.resumeAnimation={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("resume animation");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Resumes a previously paused animation clip.\n            Also works for a list of animation clips.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#resume_animation")}};Blockly.JavaScript.resumeAnimation=function(e){return i(e,"RESUME")};Blockly.Blocks.setAnimationFrame={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("set animation");this.appendValueInput("FROM").appendField("frame").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Sets an animation clip to a specified frame.\n            Also works for a list of animation clips.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#set_animation_frame")}};Blockly.JavaScript.setAnimationFrame=function(e){return i(e,"SET_FRAME")};function i(e,t,n){var o=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_NONE)||"null",r=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_NONE)||"null",s="'"+(e.getFieldValue("LOOP")||"AUTO")+"'",a=Blockly.JavaScript.valueToCode(e,"SPEED",Blockly.JavaScript.ORDER_NONE)||"1",l=e.getField("REVERSED"),c="TRUE"==(c=l&&l.isVisible()?l.getValue():"FALSE"),u=Blockly.JavaScript.statementToCode(e,"DO"),l=Blockly.JavaScript.provideFunction_("getSceneByAction",[runtimeChunks.getSceneByAction]),e=Blockly.JavaScript.provideFunction_("getSceneAnimFrameRate",[runtimeChunks.getSceneAnimFrameRate]);Blockly.JavaScript.provideFunction_("initAnimationMixer",["\nvar ".concat(BFUN$2," = function() {\n\n    function onMixerFinished(e) {\n        var cb = _pGlob.animMixerCallbacks;\n        var found = [];\n        for (var i = 0; i < cb.length; i++) {\n            if (cb[i][0] == e.action) {\n                cb[i][0] = null; // desactivate\n                found.push(cb[i][1]);\n            }\n        }\n        for (var i = 0; i < found.length; i++) {\n            found[i]();\n        }\n    }\n\n    return function ").concat(BFUN$2,"() {\n        if (appInstance.mixer && !appInstance.mixer.hasEventListener('finished', onMixerFinished))\n            appInstance.mixer.addEventListener('finished', onMixerFinished);\n    };\n\n}();\n    ")]);e=Blockly.JavaScript.provideFunction_("operateAnimation",["\n// animation puzzles\nfunction ".concat(BFUN$2,'(operation, animations, from, to, loop, speed, callback, isPlayAnimCompat, rev) {\n    if (!animations)\n        return;\n    // input can be either single obj or array of objects\n    if (typeof animations == "string")\n        animations = [animations];\n\n    function processAnimation(animName) {\n        var action = v3d.SceneUtils.getAnimationActionByName(appInstance, animName);\n        if (!action)\n            return;\n        switch (operation) {\n        case \'PLAY\':\n            if (!action.isRunning()) {\n                action.reset();\n                if (loop && (loop != "AUTO"))\n                    action.loop = v3d[loop];\n                var scene = ').concat(l,"(action);\n                var frameRate = ").concat(e,"(scene);\n\n                // compatibility reasons: deprecated playAnimation puzzles don't\n                // change repetitions\n                if (!isPlayAnimCompat) {\n                    action.repetitions = Infinity;\n                }\n\n                var timeScale = Math.abs(parseFloat(speed));\n                if (rev)\n                    timeScale *= -1;\n\n                action.timeScale = timeScale;\n                action.timeStart = from !== null ? from/frameRate : 0;\n                if (to !== null) {\n                    action.getClip().duration = to/frameRate;\n                } else {\n                    action.getClip().resetDuration();\n                }\n                action.time = timeScale >= 0 ? action.timeStart : action.getClip().duration;\n\n                action.paused = false;\n                action.play();\n\n                // push unique callbacks only\n                var callbacks = _pGlob.animMixerCallbacks;\n                var found = false;\n\n                for (var j = 0; j < callbacks.length; j++)\n                    if (callbacks[j][0] == action && callbacks[j][1] == callback)\n                        found = true;\n\n                if (!found)\n                    _pGlob.animMixerCallbacks.push([action, callback]);\n            }\n            break;\n        case 'STOP':\n            action.stop();\n\n            // remove callbacks\n            var callbacks = _pGlob.animMixerCallbacks;\n            for (var j = 0; j < callbacks.length; j++)\n                if (callbacks[j][0] == action) {\n                    callbacks.splice(j, 1);\n                    j--\n                }\n\n            break;\n        case 'PAUSE':\n            action.paused = true;\n            break;\n        case 'RESUME':\n            action.paused = false;\n            break;\n        case 'SET_FRAME':\n            var scene = ").concat(l,"(action);\n            var frameRate = ").concat(e,"(scene);\n            action.time = from ? from/frameRate : 0;\n            action.play();\n            action.paused = true;\n            break;\n        }\n    }\n\n    for (var i = 0; i < animations.length; i++) {\n        var animName = animations[i];\n        if (animName)\n            processAnimation(animName);\n    }\n\n    initAnimationMixer();\n}\n    ")]);return"\n".concat(e,"('").concat(t,"', ").concat(o,", ").concat(i,", ").concat(r,", ").concat(s,", ").concat(a,",\n        ").concat(d(u),", ").concat(n,", ").concat(c,");\n\n    ")}Blockly.Blocks.getAnimationFrame={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String"]).appendField("get animation frame");this.setOutput(!0,"Number");this.setColour(COLOR_OPERATIONS);this.setTooltip("Get animation frame.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#get_animation_frame")}};Blockly.JavaScript.getAnimationFrame=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.provideFunction_("getSceneByAction",[runtimeChunks.getSceneByAction]),e=Blockly.JavaScript.provideFunction_("getSceneAnimFrameRate",[runtimeChunks.getSceneAnimFrameRate]);return[Blockly.JavaScript.provideFunction_("getAnimationFrame",["\n// getAnimationFrame puzzle\nfunction ".concat(BFUN$2,"(animName) {\n    if (!animName)\n        return;\n    var action = v3d.SceneUtils.getAnimationActionByName(appInstance, animName);\n    if (action) {\n        var scene = ").concat(n,"(action);\n        var frameRate = ").concat(e,"(scene);\n        return action.time * frameRate;\n    } else {\n        return;\n    }\n}\n    ")])+"("+t+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.cloneAnimation={init:function(){this.appendValueInput("ANIMATIONS").setCheck(["Animation","String","Array"]).appendField("clone animation");this.appendValueInput("FROM").setCheck(["Number"]).appendField("from");this.appendValueInput("TO").setCheck(["Number"]).appendField("to");this.setInputsInline(!0);this.setOutput(!0,["Animation","String","Array"]);this.setColour(COLOR_OPERATIONS);this.setTooltip("Clones an animation clip (or a list of animations) in\n                the specified range.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#clone_animation")}};Blockly.JavaScript.cloneAnimation=function(e){var t=Blockly.JavaScript.valueToCode(e,"ANIMATIONS",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.provideFunction_("clipNameUsed",[runtimeChunks.clipNameUsed]),r=Blockly.JavaScript.provideFunction_("acquireUniqueName",[runtimeChunks.acquireUniqueName]),s=Blockly.JavaScript.provideFunction_("getSceneByAction",[runtimeChunks.getSceneByAction]),e=Blockly.JavaScript.provideFunction_("getSceneAnimFrameRate",[runtimeChunks.getSceneAnimFrameRate]),i=Blockly.JavaScript.provideFunction_("cloneAnimation",["\n// cloneAnimation puzzle\nfunction ".concat(BFUN$2,'(animations, startFrame, endFrame) {\n\n    if (!animations) {\n        return;\n    }\n\n    // input can be either single obj or array of objects\n    if (typeof animations === "string") {\n        animations = [animations];\n    }\n\n    var newAnimations = animations.map(function(animName) {\n        if (animName) {\n            var sourceAction = v3d.SceneUtils.getAnimationActionByName(appInstance,\n                    animName);\n            if (sourceAction !== null) {\n                var scene = ').concat(s,"(sourceAction);\n                var frameRate = ").concat(e,"(scene);\n\n                var newClipName = ").concat(r,"(animName, function(name) {\n                    return !").concat(i,"(name);\n                });\n\n                var newClip = v3d.AnimationUtils.subclip(sourceAction.getClip(),\n                        newClipName, startFrame, endFrame, frameRate);\n                var newAction = appInstance.mixer.clipAction(newClip,\n                        sourceAction.getRoot());\n\n                newAction.setLoop(sourceAction.loop, sourceAction.repetitions);\n                newAction.clampWhenFinished = true;\n                appInstance.actions.push(newAction);\n                return newClipName;\n            }\n        }\n\n        return;\n    });\n\n    switch (newAnimations.length) {\n        case 0:\n            return;\n        case 1:\n            return newAnimations[0];\n        default:\n            return newAnimations;\n    }\n}\n    ")]);return["".concat(i,"(").concat(t,", ").concat(n,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.isAnimationPlaying={init:function(){this.appendValueInput("VALUE").setCheck(["Animation","String","Array"]).appendField("is anim playing");this.setOutput(!0,"Boolean");this.setColour(COLOR_OPERATIONS);this.setTooltip("Checks if an animation clip (or any of animations in a list) is currently being played back.\n            If it so, returns true, otherwise returns false.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#is_animation_playing")}};Blockly.JavaScript.isAnimationPlaying=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("isAnimationPlaying",["\n// isAnimationPlaying puzzle\nfunction ".concat(BFUN$2,'(animations) {\n    if (!animations)\n        return;\n    // input can be either single obj or array of objects\n    if (typeof animations == "string")\n        animations = [animations];\n    for (var i = 0; i < animations.length; i++) {\n        var animName = animations[i];\n        if (!animName)\n            continue;\n        var action = v3d.SceneUtils.getAnimationActionByName(appInstance, animName);\n        if (action && action.isRunning())\n            return true;\n    }\n    return false;\n}\n    ')])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getAnimations={init:function(){this.appendValueInput("OBJECTINPUT").setCheck(["Object3D","String","Array"]).appendField("get animation(s) of");this.setOutput(!0,"Array");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_OPERATIONS);this.setTooltip('Retrieves a specified object\'s animation clip.\n            Also works for a list of objects, a group (or a list of groups) or with the "all objects" puzzle.\n            The return value is always a list of animation clips (even if there is only one of them).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#get_animation")}};Blockly.JavaScript.getAnimations=function(e){e=Blockly.JavaScript.valueToCode(e,"OBJECTINPUT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("getAnimations",["\n// getAnimations puzzle\nfunction ".concat(BFUN$2,"(objNames) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    var animations = [];\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName)\n            continue;\n        // use objName as animName - for now we have one-to-one match\n        var action = v3d.SceneUtils.getAnimationActionByName(appInstance, objName);\n        if (action)\n            animations.push(objName);\n    }\n    return animations;\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.animateParam={init:function(){this.appendValueInput("FROM").appendField("animate param from").setCheck(["Number","Array","Dictionary"]);this.appendValueInput("TO").appendField("to").setCheck(["Number","Array","Dictionary"]);this.appendValueInput("DURATION").appendField("duration").setCheck("Number");this.appendDummyInput("EASING").appendField("easing").appendField(new BlocklyExt.Fields.Dropdown([["Linear","Linear"],["Cubic","Cubic"],["Elastic","Elastic"],["Circular","Circular"],["Bounce","Bounce"],["Back","Back"],["Quadratic","Quadratic"],["Exponential","Exponential"],["Sinusoidal","Sinusoidal"],["Quartic","Quartic"],["Quintic","Quintic"]]),"EASING");this.appendDummyInput("EASING2").appendField(".").appendField(new BlocklyExt.Fields.Dropdown([["InOut","InOut"],["In","In"],["Out","Out"]]),"EASING2");this.appendValueInput("REPEAT").appendField("repeat").setCheck("Number");this.appendDummyInput("YOYO").appendField("yoyo").appendField(new Blockly.FieldCheckbox("FALSE"),"YOYO");this.appendStatementInput("ON_UPDATE").appendField("on update do");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Animates a numeric parameter (or all parameters in a list or a dictionary)\n            in between "from" and "to", during a period specified with "duration" (in seconds).\n            Dropdown "easing" specifies animation mode.\n            Field "repeat" specifies the number of repetitions after the first animation is complete.\n            Checkbox "yoyo" enables backtrack movement (works for *repeat* > 1).\n            Puzzles in "on update do" slot are triggered every rendering frame while the parameter is animated.\n            Puzzles in "when finished do" slot are triggered once the animation is finished.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#animate_param");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["whenFinishedSlot","when finished slot",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("WHEN_FINISHED")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"WHEN_FINISHED")}));this.updateShape_()},updateShape_:function(){var e=this._boolOptValues;e.whenFinishedSlot&&!this.getInput("WHEN_FINISHED")?this.appendStatementInput("WHEN_FINISHED").appendField("when finished do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.whenFinishedSlot&&this.getInput("WHEN_FINISHED")&&this.removeInput("WHEN_FINISHED")}};Blockly.JavaScript.animateParam=function(e){var t=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_NONE)||"0",n=Blockly.JavaScript.valueToCode(e,"TO",Blockly.JavaScript.ORDER_NONE)||"1",o=Blockly.JavaScript.valueToCode(e,"DURATION",Blockly.JavaScript.ORDER_NONE)||"1",i="'"+e.getFieldValue("EASING")+"'",r="'"+e.getFieldValue("EASING2")+"'",s=Blockly.JavaScript.valueToCode(e,"REPEAT",Blockly.JavaScript.ORDER_NONE)||"0",a=e.getField("YOYO"),l="TRUE"==(l=a&&a.isVisible()?a.getValue():"FALSE"),c=Blockly.JavaScript.statementToCode(e,"ON_UPDATE"),a=Blockly.JavaScript.statementToCode(e,"WHEN_FINISHED");Blockly.JavaScript.provideFunction_("TweenJSCode",[getTweenJSCode()]);Blockly.JavaScript.provideFunction_("setupTweenUpdates",["\n// animateParam puzzle\nappInstance.renderCallbacks.push(function() { TWEEN.update(); });\n    "]);e=Blockly.JavaScript.provideFunction_("animateParam",["\n// animateParam puzzle\nfunction ".concat(BFUN$2,'(from, to, duration, easing, easing2, repeat, yoyo, on_update, when_finished) {\n\n    var mode = easing == "Linear" ?\n        TWEEN.Easing.Linear.None : TWEEN.Easing[easing][easing2];\n\n    var tweenObject = (typeof from != "number");\n\n    if (!tweenObject) { // number\n        from = [from];\n        to = [to];\n    }\n\n    var tween = new TWEEN.Tween(from)\n                    .to(to, duration * 1000)\n                    .easing(mode)\n                    .repeat(repeat)\n                    .yoyo(yoyo)\n                    .onUpdate(function (object) {\n                        if (tweenObject)\n                            _pGlob.animateParamUpdate = object;\n                        else // number\n                            _pGlob.animateParamUpdate = object[0];\n                        on_update();\n                    })\n                    .onComplete(function (object) {\n                        when_finished();\n                    })\n                    .start();\n}\n    ')]);return"\n".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(r,", ").concat(s,", ").concat(l,",\n    ").concat(d(c),",\n    ").concat(d(a),");\n\n    ")};Blockly.Blocks.animateParamUpdate={init:function(){this.appendDummyInput().appendField("updated value");this.setColour(COLOR_OPERATIONS_DARK);this.setOutput(!0,["Number","Array","Dictionary"]);this.setTooltip('Returns the in-between value produced by the "animate param" puzzle.\n            Depending on the type of the animated parameter, can be a number, a list or a dictionary.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#updated_value")}};Blockly.JavaScript.animateParamUpdate=function(e){return["_pGlob.animateParamUpdate",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.objConstraintAddLimit={init:function(){this.appendValueInput("CONSTRAINT").appendField("set").setCheck("String");this.appendValueInput("TARGETOBJ").appendField("constraint on").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("to limit").appendField(new BlocklyExt.Fields.Dropdown([["position X","POS_X"],["position Y","POS_Y"],["position Z","POS_Z"],["rotation X","ROT_X"],["rotation Y","ROT_Y"],["rotation Z","ROT_Z"],["scale X","SCALE_X"],["scale Y","SCALE_Y"],["scale Z","SCALE_Z"]]),"MODE");this.appendValueInput("MIN").appendField("min").setCheck(["Number"]);this.appendValueInput("MAX").appendField("max").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Creates a constraint to limit object position, rotation or scale along a selected axis.\n            Constraint *id* should be unique, otherwise an existing constraint with the same id will be replaced.\n            The *min* and *max* slots specify the range between which the movement is allowed.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#limit_transform")}};Blockly.JavaScript.objConstraintAddLimit=function(e){var t=Blockly.JavaScript.valueToCode(e,"CONSTRAINT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",o="'"+e.getFieldValue("MODE")+"'",i=Blockly.JavaScript.valueToCode(e,"MIN",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"MAX",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("objConstraintAddLimit",["\n// objConstraintAddLimit puzzle\nfunction ".concat(BFUN$2,"(constraintName, objNames, mode, min, max) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj || !obj.constraints) continue;\n\n        for (var j = obj.constraints.length - 1; j >= 0; j--) {\n            if (obj.constraints[j].name == constraintName) {\n                obj.constraints.splice(j, 1);\n            }\n        }\n\n        var coordSystem = getCoordSystem();\n\n        switch (mode) {\n            case 'POS_X':\n            case 'POS_Y':\n            case 'POS_Z':\n                var cons = new v3d.LimitLocationConstraint();\n                cons.name = constraintName;\n\n                if (coordSystem == 'Z_UP_RIGHT')\n                    var compIndex = mode == 'POS_X' ? 0 : (mode == 'POS_Y' ? 2 : 1);\n                else\n                    var compIndex = mode == 'POS_X' ? 0 : (mode == 'POS_Y' ? 1 : 2);\n\n                // swizzle sign and limits order\n                if (coordSystem == 'Z_UP_RIGHT' && mode == 'POS_Y') {\n                    cons.min.setComponent(compIndex, -max);\n                    cons.max.setComponent(compIndex, -min);\n                } else {\n                    cons.min.setComponent(compIndex, min);\n                    cons.max.setComponent(compIndex, max);\n                }\n                obj.constraints.push(cons);\n                break;\n\n            case 'ROT_X':\n            case 'ROT_Y':\n            case 'ROT_Z':\n                var cons = new v3d.LimitRotationConstraint();\n                cons.name = constraintName;\n\n                if (coordSystem == 'Z_UP_RIGHT')\n                    cons.axis = mode == 'ROT_X' ? 'X' : (mode == 'ROT_Y' ? 'Z' : 'Y');\n                else\n                    cons.axis = mode == 'ROT_X' ? 'X' : (mode == 'ROT_Y' ? 'Y' : 'Z');\n\n                // swizzle sign and limits order\n                if (coordSystem == 'Z_UP_RIGHT' && mode == 'ROT_Y') {\n                    cons.min = v3d.Math.degToRad(-max);\n                    cons.max = v3d.Math.degToRad(-min);\n                } else {\n                    cons.min = v3d.Math.degToRad(min);\n                    cons.max = v3d.Math.degToRad(max);\n                }\n\n                obj.constraints.push(cons);\n                break;\n\n            case 'SCALE_X':\n            case 'SCALE_Y':\n            case 'SCALE_Z':\n                var cons = new v3d.LimitScaleConstraint();\n                cons.name = constraintName;\n\n                if (coordSystem == 'Z_UP_RIGHT')\n                    var compIndex = mode == 'SCALE_X' ? 0 : (mode == 'SCALE_Y' ? 2 : 1);\n                else\n                    var compIndex = mode == 'SCALE_X' ? 0 : (mode == 'SCALE_Y' ? 1 : 2);\n\n                cons.min.setComponent(compIndex, min);\n                cons.max.setComponent(compIndex, max);\n                obj.constraints.push(cons);\n                break;\n        }\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(r,");\n")};Blockly.Blocks.objConstraintAddCopy={init:function(){this.appendValueInput("CONSTRAINT").appendField("set").setCheck("String");this.appendValueInput("OBJ").appendField("constraint on").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("to copy").appendField(new BlocklyExt.Fields.Dropdown([["position","POS"],["rotation","ROT"],["scale","SCALE"]]),"MODE");this.appendValueInput("TARGETOBJ").appendField("from").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Creates a constraint to copy object position, rotation or scale from another object.\n            Constraint *id* should be unique, otherwise an existing constraint with the same id will be replaced.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#copy_transform")}};Blockly.JavaScript.objConstraintAddCopy=function(e){var t=Blockly.JavaScript.valueToCode(e,"CONSTRAINT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"TARGETOBJ",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"OBJ",Blockly.JavaScript.ORDER_NONE)||"''",i="'"+e.getFieldValue("MODE")+"'";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("objConstraintAddCopy",["\n// objConstraintAddCopy puzzle\nfunction ".concat(BFUN$2,"(constraintName, targetObjName, objNames, mode) {\n\n    if (!targetObjName) return;\n    var targetObj = getObjectByName(targetObjName);\n    if (!targetObj) return;\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    for (var i = 0; i < objNames.length; i++) {\n        if (!objNames[i]) continue;\n        var obj = getObjectByName(objNames[i]);\n        if (!obj || !obj.constraints) continue;\n\n        for (var j = obj.constraints.length - 1; j >= 0; j--) {\n            if (obj.constraints[j].name == constraintName) {\n                obj.constraints.splice(j, 1);\n            }\n        }\n\n        if (mode == 'POS') {\n            var cons = new v3d.CopyLocationConstraint(targetObj);\n        } else if (mode == 'ROT') {\n            var cons = new v3d.CopyRotationConstraint(targetObj);\n        } else if (mode == 'SCALE') {\n            var cons = new v3d.CopyScaleConstraint(targetObj);\n        }\n\n        cons.name = constraintName;\n        obj.constraints.push(cons);\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,");\n")};Blockly.Blocks.objConstraintOperations={init:function(){this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["remove","REMOVE"],["mute","MUTE"],["unmute","UNMUTE"]]),"OPERATION");this.appendValueInput("CONSTRAINT").appendField("constraint").setCheck("String");this.appendValueInput("OBJECT").appendField("for object").setCheck(["Object3D","String","Array"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Removes, mutes or unmutes a constraint assigned to a specified object.\n            Other constraints assigned to this object (if any) will remain intact.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Animation.html#remove_mute_unmute_constraint");reformDeprecatedFields(this,{MUTE_SELECT:"OPERATION"})}};Blockly.JavaScript.objConstraintOperations=function(e){var t=Blockly.JavaScript.valueToCode(e,"CONSTRAINT",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("OPERATION")+"'",o=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("objConstraintOperations",["\n// objConstraintOperations puzzle\nfunction ".concat(BFUN$2,"(constraintName, operation, objNames) {\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) return;\n\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        if (!objName) continue;\n\n        var obj = getObjectByName(objName);\n        if (!obj || !obj.constraints) continue;\n\n        for (var j = obj.constraints.length - 1; j >= 0; j--) {\n            var c = obj.constraints[j];\n            if (c.name == constraintName) {\n                if (operation == 'REMOVE') {\n                    obj.constraints.splice(j, 1);\n                } else if (operation == 'MUTE') {\n                    c.mute = true;\n                } else if (operation == 'UNMUTE') {\n                    c.mute = false;\n                }\n            }\n        }\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};replaceDeprecated("objConstraintOperations","objConstraintMute");Blockly.Blocks.lookAt={init:function(){this.appendDummyInput().appendField("look at");this.appendValueInput("LOOKAT").setCheck(["Object3D","String"]);this.appendValueInput("DURATION").appendField("in").setCheck("Number");this.appendDummyInput().appendField("sec");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Smoothly animates the active camera so that it finally targets a specified object.\n            The numeric parameter specifies the time period over which the animation is performed (in seconds).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#look_at")}};Blockly.JavaScript.lookAt=r;Blockly.Blocks.tweenCameraExt={init:function(){this.appendDummyInput().appendField("tween camera to:");this.appendValueInput("POSITION").appendField("position of").setCheck(["Object3D","String","Array"]);this.appendValueInput("LOOKAT").appendField("look at").setCheck(["Object3D","String","Array"]);this.appendDummyInput("MOVEMENT_TYPE").appendField("move").appendField(new BlocklyExt.Fields.Dropdown([["linearly","LINEAR"],["spherically","SPHERICAL"]]),"MOVEMENT_TYPE");this.appendValueInput("DURATION").appendField("in").setCheck("Number");this.appendDummyInput().appendField("sec");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Smoothly animates the active camera so that its position\n            finally changes to the position of a specified object / 3D point,\n            and the camera targets another specified object / 3D point.\n            The numeric parameter specifies the time period over which the\n            animation is performed (in seconds). The position and the target\n            parameters can be specified either by scene objects or arrays of\n            X, Y and Z coordinates. The "move" parameter specifies the\n            interpolation between the starting and the ending points: linear or\n            spherical.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#tween_camera");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["whenFinishedSlot","when finished slot",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("DO")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"DO")}));this.updateShape_()},updateShape_:function(){var e=this._boolOptValues;e.whenFinishedSlot&&!this.getInput("DO")?this.appendStatementInput("DO").appendField("when finished do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.whenFinishedSlot&&this.getInput("DO")&&this.removeInput("DO")}};Blockly.JavaScript.tweenCameraExt=r;function r(e){var t=Blockly.JavaScript.valueToCode(e,"POSITION",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"LOOKAT",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"DURATION",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.statementToCode(e,"DO"),r="SPHERICAL"===e.getFieldValue("MOVEMENT_TYPE")?v3d.TweenSpherical:v3d.TweenLinear;Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("tweenCamera",["\n// tweenCamera puzzle\nfunction ".concat(BFUN$2,"(posOrObj, targetOrObj, duration, doSlot, movementType) {\n\n    if (Array.isArray(posOrObj)) {\n        var worldPos = _pGlob.vec3Tmp.fromArray(posOrObj);\n        worldPos = coordsTransform(worldPos, getCoordSystem(), 'Y_UP_RIGHT');\n    } else if (posOrObj) {\n        var posObj = getObjectByName(posOrObj);\n        if (!posObj) return;\n        var worldPos = posObj.getWorldPosition(_pGlob.vec3Tmp);\n    } else {\n        // empty input means: don't change the position\n        var worldPos = appInstance.camera.getWorldPosition(_pGlob.vec3Tmp);\n    }\n\n    if (Array.isArray(targetOrObj)) {\n        var worldTarget = _pGlob.vec3Tmp2.fromArray(targetOrObj);\n        worldTarget = coordsTransform(worldTarget, getCoordSystem(), 'Y_UP_RIGHT');\n    } else {\n        var targObj = getObjectByName(targetOrObj);\n        if (!targObj) return;\n        var worldTarget = targObj.getWorldPosition(_pGlob.vec3Tmp2);\n    }\n\n    duration = Math.max(0, duration);\n\n    if (appInstance.controls && appInstance.controls.tween) {\n        // orbit and flying cameras\n        if (!appInstance.controls.inTween) {\n            appInstance.controls.tween(worldPos, worldTarget, duration, doSlot,\n                    movementType);\n        }\n    } else {\n        // TODO: static camera, just position it for now\n        if (appInstance.camera.parent) {\n            appInstance.camera.parent.worldToLocal(worldPos);\n        }\n        appInstance.camera.position.copy(worldPos);\n        appInstance.camera.lookAt(worldTarget);\n        doSlot();\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(d(i),", ").concat(r,");\n")}Blockly.Blocks.zoomCameraToObject={init:function(){this.appendDummyInput().appendField("zoom camera to:");this.appendValueInput("OBJECT").setCheck(["Object3D","String"]);this.appendValueInput("DURATION").appendField("in").setCheck("Number");this.appendDummyInput().appendField("sec");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Smoothly zooms the active camera in or out so that the\n            specified object or a group of objects will be properly fit into the\n            camera view. The numeric parameter specifies the time period over\n            which the zooming is performed (in seconds).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#zoom_camera_to_object");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["whenFinishedSlot","when finished slot",!1]],COLOR_OPERATIONS,function(e){this.updateShape_();e&&this.getInput("DO")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"DO")}));this.updateShape_()},updateShape_:function(){var e=this._boolOptValues;e.whenFinishedSlot&&!this.getInput("DO")?this.appendStatementInput("DO").appendField("when finished do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.whenFinishedSlot&&this.getInput("DO")&&this.removeInput("DO")}};Blockly.JavaScript.zoomCameraToObject=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"DURATION",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.statementToCode(e,"DO");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("zoomCamera",["\n// zoomCamera puzzle\nfunction ".concat(BFUN$2,"(objNames, duration, doSlot) {\n\n    duration = Math.max(0, duration);\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames) {\n        return;\n    }\n\n    var zoomObjects = [];\n    objNames.forEach(function(name) {\n        var obj = getObjectByName(name);\n        if (obj) {\n            zoomObjects.push(obj);\n        }\n    });\n\n    if (!zoomObjects.length) {\n        return;\n    }\n\n    var pos = _pGlob.vec3Tmp, target = _pGlob.vec3Tmp2;\n    v3d.CameraUtils.calcCameraZoomToObjectsParams(appInstance.camera, zoomObjects,\n            pos, target);\n\n    if (appInstance.controls && appInstance.controls.tween) {\n        // orbit and flying cameras\n        if (!appInstance.controls.inTween) {\n            appInstance.controls.tween(pos, target, duration, doSlot);\n        }\n    } else {\n        // TODO: static camera, just position it for now\n        if (appInstance.camera.parent) {\n            appInstance.camera.parent.worldToLocal(pos);\n        }\n        appInstance.camera.position.copy(pos);\n        appInstance.camera.lookAt(target);\n        doSlot();\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(d(o),");\n")};Blockly.Blocks.setActiveCamera={init:function(){this.appendValueInput("CAMERA").setCheck(["Object3D","String"]).appendField("set active camera");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('Makes a specified camera active.\n            This can be used to change camera control mode ("orbit" vs "flying" vs "no controls"),\n            field of view and other settings on the fly.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#set_active_camera")}};Blockly.JavaScript.setActiveCamera=function(e){e=Blockly.JavaScript.valueToCode(e,"CAMERA",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("setActiveCamera",["\n// setActiveCamera puzzle\nfunction ".concat(BFUN$2,"(camName) {\n    var camera = getObjectByName(camName);\n    if (!camera || !camera.isCamera || appInstance.camera == camera)\n        return;\n    appInstance.setCamera(camera);\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.getActiveCamera={init:function(){this.appendDummyInput().appendField("active camera");this.setOutput(!0,"Object3D");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_OPERATIONS);this.setTooltip("Get active camera.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#active_camera")}};Blockly.JavaScript.getActiveCamera=function(e){Blockly.JavaScript.valueToCode(e,"OBJECTINPUT",Blockly.JavaScript.ORDER_NONE);Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return[Blockly.JavaScript.provideFunction_("getActiveCamera",["\n// getActiveCamera puzzle\nfunction ".concat(BFUN$2,"() {\n    var camera = appInstance.getCamera();\n    return camera.name;\n}\n    ")])+"()",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getCameraDirection={init:function(){this.appendDummyInput().appendField("get camera direction");this.appendDummyInput().appendField("from mouse/touch").appendField(new Blockly.FieldCheckbox("FALSE"),"MOUSE_TOUCH");this.appendDummyInput().appendField("inverted").appendField(new Blockly.FieldCheckbox("FALSE"),"INVERTED");this.setInputsInline(!0);this.setOutput(!0,"Array");this.setColour(COLOR_OPERATIONS);this.setTooltip("Returns a list of X, Y and Z components of the active camera's world direction vector.\n            If *from mouse/touch* is checked, this puzzle casts a ray from the camera to the cursor's screen position\n            and returns the direction of that ray.\n            If additionaly *inverted* is checked, then the cursor's screen position coordinates are negated.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#get_camera_direction")}};Blockly.JavaScript.getCameraDirection=function(e){var t="TRUE"==e.getField("MOUSE_TOUCH").getValue(),e="TRUE"==e.getField("INVERTED").getValue();Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);Blockly.JavaScript.provideFunction_("initGetCameraDirection",["\n\nfunction initGetCameraDirection() {\n    var coordsCallback = function(event) {\n        event.preventDefault();\n\n        var xNorm = 0, yNorm = 0;\n        if (event instanceof MouseEvent) {\n            xNorm = event.offsetX / elem.clientWidth;\n            yNorm = event.offsetY / elem.clientHeight;\n        } else if (event instanceof TouchEvent) {\n            var rect = elem.getBoundingClientRect();\n            xNorm = (event.changedTouches[0].clientX - rect.left) / rect.width;\n            yNorm = (event.changedTouches[0].clientY - rect.top) / rect.height;\n        }\n\n        _pGlob.screenCoords.x = xNorm * 2 - 1;\n        _pGlob.screenCoords.y = -yNorm * 2 + 1;\n    }\n\n    var elem = appInstance.container;\n    elem.addEventListener('mousemove', coordsCallback);\n    elem.addEventListener('mousedown', coordsCallback);\n    elem.addEventListener('mouseup', coordsCallback);\n    elem.addEventListener('touchstart', coordsCallback);\n    elem.addEventListener('touchend', coordsCallback);\n\n};\n\ninitGetCameraDirection();\n\n    "]);return[Blockly.JavaScript.provideFunction_("getCameraDirection",["\n// getCameraDirection puzzle\nvar ".concat(BFUN$2," = function() {\n\n    var coords = new v3d.Vector2();\n    var raycaster = new v3d.Raycaster();\n    var vec = new v3d.Vector3();\n\n    return function ").concat(BFUN$2,"(useMouseTouch, inverted) {\n        var camera = appInstance.camera;\n\n        if (useMouseTouch) {\n\n            if (inverted) {\n                coords.x = -_pGlob.screenCoords.x;\n                coords.y = -_pGlob.screenCoords.y;\n            } else {\n                coords.x = _pGlob.screenCoords.x;\n                coords.y = _pGlob.screenCoords.y;\n            }\n\n            raycaster.setFromCamera(coords, camera);\n            var dir = raycaster.ray.direction;\n\n        } else {\n            var dir = camera.getWorldDirection(vec);\n        }\n\n        return coordsTransform(dir, 'Y_UP_RIGHT', getCoordSystem()).toArray();\n    }\n}();\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.autoRotateCamera={init:function(){this.appendDummyInput().appendField("autorotate camera").appendField(new BlocklyExt.Fields.Dropdown([["on","ON"],["off","OFF"]]),"ON_OFF");this.appendValueInput("SPEED").appendField("speed").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip("Smoothly animates the active Orbit camera by rotating it around the target.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Camera.html#autorotate_camera")}};Blockly.JavaScript.autoRotateCamera=function(e){var t="ON"==e.getFieldValue("ON_OFF"),e=Blockly.JavaScript.valueToCode(e,"SPEED",Blockly.JavaScript.ORDER_NONE)||"0";return Blockly.JavaScript.provideFunction_("autoRotateCamera",["\n// autoRotateCamera puzzle\nfunction ".concat(BFUN$2,"(enabled, speed) {\n\n    if (appInstance.controls && appInstance.controls instanceof v3d.OrbitControls) {\n        appInstance.controls.autoRotate = enabled;\n        appInstance.controls.autoRotateSpeed = speed;\n    } else {\n        console.error('autorotate camera: Wrong controls type');\n    }\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.replaceScene={init:function(){var e=new Blockly.FieldTextInput("");e.setSpellcheck(!1);this.appendDummyInput().appendField("replace scene with").appendField(e,"URL");this.appendStatementInput("DO").appendField("when loaded do");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_OPERATIONS);this.setTooltip('When this puzzle is triggered, the current scene is unloaded\n            and a new scene is loaded from a specified .gltf file.\n            After loading is complete, the puzzles in the "when loaded do" slot are triggered.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#replace_scene");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *load scene* puzzle from the toolbox.")}};Blockly.JavaScript.replaceScene=function(e){var t=e.getField("URL").getValue();if(t){e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("replaceScene",["\n// replaceScene puzzle\n// set autoStart flag to avoid issues with logic / rendering cycle\n// reinitialization\nfunction ".concat(BFUN$2,"(url, callback) {\n\n    // compatibility measure: if appInstance.unload exists, then it's App's\n    // version with the new loading/unloading logic and it's needed to call\n    // App.unload before App.load\n    if (appInstance.unload) appInstance.unload();\n\n    // clean object cache\n    _pGlob.objCache = {};\n\n    appInstance.load(url, function() {\n        appInstance.enableControls();\n        callback();\n    }, null, false);\n}\n    ")])+"('"+t+"', "+d(e)+");\n"}};Blockly.Blocks.loadScene={init:function(){this.appendValueInput("URL").setCheck("String").appendField("load scene");this.appendValueInput("ALIAS").setCheck("String").appendField("as");this.appendStatementInput("DO_PROGRESS").appendField("on progress do");this.appendStatementInput("DO").appendField("when loaded do");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SCENES);this.setTooltip('When this puzzle is triggered, the current scene is unloaded\n            and a new scene is loaded from a specified .gltf file. After loading\n            is finished the puzzles in the "when loaded do" slot are triggered.\n            Also there can be enabled the "on progress do" slot. Puzzles placed\n            in this slot are continuously triggered during the loading and can\n            utilize the "percentage" puzzle. Once the scene is loaded it\'s\n            assigned a name which can be used to access and manipulate the scene\n            via various object-related puzzles. By default the assigned name\n            equals to the specified scene URL (e.g. \'path/to/scene.gltf\'). The\n            "alias" option if enabled allows to set the name manually.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#load_scene");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["enableOnProgress",'enable "on progress" action',!1],["enableAlias",'enable "alias" option',!1]],COLOR_SCENES,function(e){this.updateShape_();if(e){mutatorReconnect(this,"DO_PROGRESS",e.onProgressConnection_);mutatorReconnect(this,"ALIAS",e.aliasConnection_)}}));this.updateShape_()},saveConnections:function(e){var t=this.getInput("DO_PROGRESS");t&&(e.onProgressConnection_=getNonShadowConnection(t));t=this.getInput("ALIAS");t&&(e.aliasConnection_=getNonShadowConnection(t))},updateShape_:(s="MyScene",function(){var e=this._boolOptValues;if(e.enableOnProgress&&!this.getInput("DO_PROGRESS")){this.appendStatementInput("DO_PROGRESS").appendField("on progress do");this.moveInputBefore("DO_PROGRESS","DO")}else!e.enableOnProgress&&this.getInput("DO_PROGRESS")&&this.removeInput("DO_PROGRESS");var t=this.getInput("ALIAS");if(e.enableAlias&&!t){(t=this.appendValueInput("ALIAS")).setCheck("String").appendField("as");this.moveNumberedInputBefore(this.inputList.length-1,1);updateShadowBlockStr(t,'\n                    <shadow type="text">\n                        <field name="TEXT">'.concat(s,"</field>\n                    </shadow>\n                "))}else if(!e.enableAlias&&t){t=getShadowBlockVirtual(t);null!==t&&(s=t.getFieldValue("TEXT"));this.removeInput("ALIAS")}})};var s,a;Blockly.JavaScript.loadScene=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE);if(!n)return"";t=e.getInput("ALIAS")?Blockly.JavaScript.valueToCode(e,"ALIAS",Blockly.JavaScript.ORDER_NONE)||"''":n;var o=Blockly.JavaScript.statementToCode(e,"DO"),i=Blockly.JavaScript.statementToCode(e,"DO_PROGRESS"),e=Blockly.JavaScript.provideFunction_("loadScene",["\n// loadScene puzzle\nfunction ".concat(BFUN$2,"(url, sceneName, loadCb, progCb) {\n\n    appInstance.unload();\n\n    // clean object cache\n    _pGlob.objCache = {};\n\n    _pGlob.percentage = 0;\n    appInstance.loadScene(url, function(loadedScene) {\n        appInstance.enableControls();\n        loadedScene.name = sceneName;\n\n        _pGlob.percentage = 100;\n        loadCb();\n    }, function(percentage) {\n        _pGlob.percentage = percentage;\n        progCb();\n    }, null);\n}\n    ")]);return"".concat(e,"(").concat(n,", ").concat(t,", ").concat(d(o),", ").concat(d(i),");\n")};Blockly.Blocks.appendScene={init:function(){this.appendValueInput("URL").setCheck("String").appendField("append scene");this.appendValueInput("ALIAS").setCheck("String").appendField("as");this.appendStatementInput("DO_PROGRESS").appendField("on progress do");this.appendStatementInput("DO").appendField("when loaded do");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SCENES);this.setTooltip('When this puzzle is triggered a new scene is loaded\n            from a specified .gltf file and gets appended to the current scene.\n            After loading is finished the puzzles in the "when loaded do" slot\n            are triggered. Also there can be enabled the "on progress do" slot.\n            Puzzles placed in this slot are continuously triggered during the\n            loading and can utilize the "percentage" puzzle. The "Append Scene"\n            puzzle doesn\'t load cameras and lights from a new scene by default.\n            This behavior can be changed in the puzzle\'s options. Once the scene\n            is appended it\'s assigned a name which can be used to access and\n            manipulate the scene via various object-related puzzles. By default\n            the assigned name equals to the specified scene URL (e.g. \'path/to/scene.gltf\').\n            The "alias" option if enabled allows to set the name manually.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#append_scene");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["enableOnProgress",'enable "on progress" action',!1],["loadCameras","load camera objects",!1],["loadLights","load light objects",!1],["enableAlias",'enable "alias" option',!1]],COLOR_SCENES,function(e){this.updateShape_();if(e){mutatorReconnect(this,"DO_PROGRESS",e.onProgressConnection_);mutatorReconnect(this,"ALIAS",e.aliasConnection_)}}));this.updateShape_()},saveConnections:function(e){var t=this.getInput("DO_PROGRESS");t&&(e.onProgressConnection_=getNonShadowConnection(t));t=this.getInput("ALIAS");t&&(e.aliasConnection_=getNonShadowConnection(t))},updateShape_:(a="MyScene",function(){var e=this._boolOptValues;if(e.enableOnProgress&&!this.getInput("DO_PROGRESS")){this.appendStatementInput("DO_PROGRESS").appendField("on progress do");this.moveInputBefore("DO_PROGRESS","DO")}else!e.enableOnProgress&&this.getInput("DO_PROGRESS")&&this.removeInput("DO_PROGRESS");var t=this.getInput("ALIAS");if(e.enableAlias&&!t){(t=this.appendValueInput("ALIAS")).setCheck("String").appendField("as");this.moveNumberedInputBefore(this.inputList.length-1,1);updateShadowBlockStr(t,'\n                    <shadow type="text">\n                        <field name="TEXT">'.concat(a,"</field>\n                    </shadow>\n                "))}else if(!e.enableAlias&&t){t=getShadowBlockVirtual(t);null!==t&&(a=t.getFieldValue("TEXT"));this.removeInput("ALIAS")}})};Blockly.JavaScript.appendScene=function(e){var t,n=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE);if(!n)return"";t=e.getInput("ALIAS")?Blockly.JavaScript.valueToCode(e,"ALIAS",Blockly.JavaScript.ORDER_NONE)||"''":n;var o=Blockly.JavaScript.statementToCode(e,"DO"),i=Blockly.JavaScript.statementToCode(e,"DO_PROGRESS"),r=this._boolOptValues.loadCameras,s=this._boolOptValues.loadLights,e=Blockly.JavaScript.provideFunction_("appendScene",["\n// appendScene puzzle\nfunction ".concat(BFUN$2,"(url, sceneName, loadCameras, loadLights, loadCb, progCb) {\n    _pGlob.percentage = 0;\n\n    appInstance.appendScene(url, function(loadedScene) {\n        loadedScene.name = sceneName;\n        _pGlob.percentage = 100;\n        loadCb();\n    }, function(percentage) {\n        _pGlob.percentage = percentage;\n        progCb();\n    }, null, loadCameras, loadLights);\n}\n    ")]);return"".concat(e,"(").concat(n,", ").concat(t,", ").concat(r,", ").concat(s,", ").concat(d(o),", ").concat(d(i),");\n")};Blockly.Blocks.unloadScene={init:function(){this.appendValueInput("URL").setCheck("String").appendField("unload scene");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SCENES);this.setTooltip("Unloads the specified scene or its part from the\n            application. Use the empty text value in order to unload all scenes.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#unload_scene")}};Blockly.JavaScript.unloadScene=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("unloadScene",["\n// unloadScene puzzle\nfunction ".concat(BFUN$2,"(url) {\n    if (appInstance.scene) {\n        var scene = url === '' ? appInstance.scene : appInstance.scene.getObjectByName(url);\n        if (scene) appInstance.unload(scene);\n\n        if (!appInstance.scene) appInstance.renderer.clear();\n\n        // clean object cache\n        _pGlob.objCache = {};\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.percentage2={init:function(){this.appendDummyInput().appendField("percentage");this.setColour(COLOR_SCENES_PERCENTAGE);this.setOutput(!0,"Number");this.setTooltip('Returns the loading percentage for the preloader.\n            Intended for use with the "Load Scene" and "Append Scene" puzzle in\n            their "on progress do" callbacks.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#load_scene")}};Blockly.JavaScript.percentage2=function(e){return["Math.round(_pGlob.percentage)",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.enableRendering={init:function(){this.appendDummyInput().appendField("enable rendering");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SCENES);this.setTooltip("Resumes previously disabled rendering.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#enable_rendering")}};Blockly.JavaScript.enableRendering=function(e){var t=Blockly.JavaScript.provideFunction_("enableRendering",["\n// enableRendering puzzle\nfunction ".concat(BFUN$2,"() {\n    appInstance.enableRendering();\n}\n    ")]);return"".concat(t,"();\n")};Blockly.Blocks.disableRendering={init:function(){this.appendDummyInput().appendField("disable rendering");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"AA").appendField("anti-alias");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_SCENES);this.setTooltip('Disables rendering. The graphics won\'t be updated\n            but the user events will be captured and animation timelines will\n            progress. The "anti-alias" option is used to significantly increase\n            the rendering quality and compensate the loss of performance. This\n            option targets the next frame after the rendering stops.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#disable_rendering")}};Blockly.JavaScript.disableRendering=function(e){var t=!(!e.getField("AA")||"TRUE"!=e.getField("AA").getValue()),e=Blockly.JavaScript.provideFunction_("disableRendering",["\n// disableRendering puzzle\nfunction ".concat(BFUN$2,"(enableSSAA) {\n    appInstance.ssaaOnPause = enableSSAA;\n    appInstance.disableRendering(1);\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.createEnvironment={init:function(){this.appendValueInput("NAME").setCheck("String").appendField("create environment");this.appendDummyInput().appendField("with").appendField(new BlocklyExt.Fields.Dropdown([["color background","BACKGROUND_COLOR"],["texture background","BACKGROUND_TEXTURE"]]),"TYPE");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["onceReadyDoSlot",'enable "once ready do" slot',!1]],COLOR_SCENES,function(e){this.updateShape_();e&&this.getInput("ONCE_READY_DO")&&Blockly.Mutator.reconnect(e.ifMissedConnection_,this,"ONCE_READY_DO")}));this.updateShape_();this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SCENES);this.setTooltip("Create enviroment material with the given name and assign on the scene.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#create_environment")},updateShape_:function(){var e=this._boolOptValues;e.onceReadyDoSlot&&!this.getInput("ONCE_READY_DO")?this.appendStatementInput("ONCE_READY_DO").appendField("once ready do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT):!e.onceReadyDoSlot&&this.getInput("ONCE_READY_DO")&&this.removeInput("ONCE_READY_DO")}};Blockly.JavaScript.createEnvironment=function(e){var t=Blockly.JavaScript.valueToCode(e,"NAME",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("TYPE")+"'",o=d(Blockly.JavaScript.statementToCode(e,"ONCE_READY_DO"));Blockly.JavaScript.provideFunction_("ENVIRONMENT_IMAGE",[getEnvironmentImage()]);e=Blockly.JavaScript.provideFunction_("createEnvironment",["\n// createEnvironment puzzle\nfunction ".concat(BFUN$2,"(matName, type, onceReadyDo) {\n\n    var loader = new v3d.RGBELoader();\n\n    loader.load(ENVIRONMENT_IMAGE, function(tex) {\n\n        tex.name = 'Lighting Texture';\n        tex.encoding = v3d.RGBEEncoding;\n        tex.magFilter = v3d.LinearFilter;\n        tex.minFilter = v3d.LinearFilter;\n        tex.generateMipmaps = false;\n        tex.flipY = false;\n\n        if (type == 'BACKGROUND_COLOR') {\n            var background = new v3d.Color(0.044, 0.044, 0.044);\n        } else {\n            var background = tex.clone();\n            background.name = 'Background Texture';\n            background.needsUpdate = true;\n        }\n\n        var wMat = v3d.SceneUtils.createEnvironmentMaterial(matName, tex, background);\n\n        appInstance.worldMaterial = wMat;\n        appInstance.updateEnvironment(wMat);\n\n        onceReadyDo();\n\n    });\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.exportToGLTF={init:function(){this.appendValueInput("OBJ_NAME").appendField("export to glTF").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField("only visible").appendField(new Blockly.FieldCheckbox("TRUE"),"ONLY_VISIBLE");this.appendDummyInput().appendField("binary").appendField(new Blockly.FieldCheckbox("FALSE"),"BINARY");this.setInputsInline(!0);this.setOutput(!0,"Promise");this.setColour(COLOR_SCENES);this.setTooltip("Export object or scene to glTF 2.0.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#export_to_gltf")}};Blockly.JavaScript.exportToGLTF=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ_NAME",Blockly.JavaScript.ORDER_NONE)||"''",n="TRUE"==e.getField("ONLY_VISIBLE").getValue(),o="TRUE"==e.getField("BINARY").getValue();Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("exportToGLTF",["\n// exportToGLTF puzzle\nfunction ".concat(BFUN$2,"(objNames, onlyVisible, binary) {\n\n    if (objNames === '' || objNames === LIST_NONE) {\n\n        var objs = [appInstance.scene];\n\n    } else {\n\n        var objs = retrieveObjectNames(objNames).map(function(objName) {\n            return getObjectByName(objName);\n        });\n\n    }\n\n    if (objs.length) {\n\n        var gltfExporter = new v3d.GLTFExporter();\n\n        var options = {\n            onlyVisible: onlyVisible,\n            binary: binary,\n            trs: true\n        }\n\n        return new Promise(function(resolve, reject) {\n\n            gltfExporter.parse(objs, function(result) {\n\n                var dataUrl;\n\n                if (result instanceof ArrayBuffer) {\n\n                    dataUrl = URL.createObjectURL(new Blob([result], { type: 'application/octet-stream' }));\n\n                } else {\n\n                    var output = JSON.stringify(result, null, 2);\n                    dataUrl = URL.createObjectURL(new Blob([output], { type: 'text/plain' }));\n\n                }\n\n                resolve(dataUrl);\n\n            }, options);\n\n        });\n\n    };\n\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.raycast={init:function(){this.appendDummyInput().appendField("raycast");this.appendValueInput("FROM").appendField("from").setCheck(["Object3D","String","Array"]);this.appendValueInput("DIRECTION").appendField("direction").setCheck(["Object3D","String","Array"]);this.appendValueInput("INTERSECT_OBJS").appendField("intersect").setCheck(["Object3D","String","Array"]);this.setInputsInline(!0);this.setOutput(!0,"Array");this.setColour(COLOR_SCENES);this.setTooltip("Cast ray to intersect given objects");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#raycast")}};Blockly.JavaScript.raycast=function(e){Blockly.JavaScript.valueToCode(e,"OBJ_NAME",Blockly.JavaScript.ORDER_NONE);var t=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"DIRECTION",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"INTERSECT_OBJS",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);e=Blockly.JavaScript.provideFunction_("raycast",["\n// raycast puzzle\nfunction ".concat(BFUN$2,"(fromPosObj, dir, intersectObjs) {\n\n    if (!fromPosObj || !dir) {\n        console.error('raycast: missing input');\n        return [];\n    }\n\n    if (Array.isArray(fromPosObj)) {\n        var from = _pGlob.vec3Tmp.fromArray(fromPosObj);\n        from = coordsTransform(from, getCoordSystem(), 'Y_UP_RIGHT');\n    } else {\n        var posObj = getObjectByName(fromPosObj);\n        if (!posObj) {\n            console.error('raycast: raycast object not found');\n            return []\n        }\n        var from = posObj.getWorldPosition(_pGlob.vec3Tmp);\n    }\n\n    dir = _pGlob.vec3Tmp2.fromArray(dir);\n    dir = coordsTransform(dir, getCoordSystem(), 'Y_UP_RIGHT');\n\n    if (intersectObjs === '' || intersectObjs === LIST_NONE) {\n\n        var objs = [appInstance.scene];\n\n    } else {\n\n        var objs = retrieveObjectNames(intersectObjs).map(function(objName) {\n            return getObjectByName(objName);\n        });\n\n    }\n\n    if (objs.length) {\n        _pGlob.raycasterTmp.set(from, dir);\n        var intersects = _pGlob.raycasterTmp.intersectObjects(objs, true);\n\n        for (var i = 0; i < intersects.length; i++) {\n            var int = intersects[i];\n\n            int.object = getPickedObjectName(int.object);\n            int.point = coordsTransform(int.point, 'Y_UP_RIGHT', getCoordSystem()).toArray();\n\n            if (int.face)\n                int.normal = coordsTransform(int.face.normal, 'Y_UP_RIGHT', getCoordSystem()).toArray();\n\n            if (int.uv)\n                int.uv = int.uv.toArray();\n\n            delete int.face;\n            delete int.faceIndex;\n\n        }\n\n        return intersects;\n    } else {\n        return [];\n    }\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.addFog={init:function(){this.appendDummyInput().appendField("add fog with color");this.appendValueInput("R").appendField("R:").setCheck("Number");this.appendValueInput("G").appendField("G:").setCheck("Number");this.appendValueInput("B").appendField("B:").setCheck("Number");this.appendValueInput("DENSITY").appendField("density").setCheck("Number");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(COLOR_SCENES);this.setTooltip("Add the fog effect to the scene.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Scenes.html#add_fog")}};Blockly.JavaScript.addFog=function(e){var t=Blockly.JavaScript.valueToCode(e,"R",Blockly.JavaScript.ORDER_NONE)||"0",n=Blockly.JavaScript.valueToCode(e,"G",Blockly.JavaScript.ORDER_NONE)||"0",o=Blockly.JavaScript.valueToCode(e,"B",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(e,"DENSITY",Blockly.JavaScript.ORDER_NONE)||"0",e=Blockly.JavaScript.provideFunction_("addFog",["\n// addFog puzzle\nfunction ".concat(BFUN$2,"(r, g, b, density) {\n    appInstance.scene.fog = new v3d.FogExp2(_pGlob.colorTmp.setRGB(r, g, b),\n            density);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,");\n")};Blockly.Blocks.externalCall={};Blockly.Blocks.externalCall.init=function(){var e=new Blockly.FieldTextInput("",l);e.setSpellcheck(!1);this.appendDummyInput().appendField("when called from JS as").appendField(e,"NAME").appendField("","PARAMS");this.setMutator(new Blockly.Mutator(["puzzlesProceduresMutatorarg"]));this.setColour(COLOR_OPERATIONS);this.arguments_=[];this.argumentVarModels_=[];this.setStatements_(!0);this.statementConnection_=null;this.setTooltip('Allows for triggering Puzzles from the JavaScript code\n        of the application. Optionally retrieves parameters passed from\n        the JavaScript code and saves them as variables to be used by puzzles in the "do" slot.\n        See the Puzzles reference for more info.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#when_called_from_JS");this.setOnChange(function(e){this.setWarningText("".concat(Blockly.Msg.DEPRECATED_PUZZLE_WARNING," Use\n            v3d.puzzles.procedures object in the JavaScript code to access and call\n            procedures defined in Puzzles."))})};function l(e){return function(e,t){if(t.isInFlyout)return e;for(;function(e,t,n){for(var o=t.getAllBlocks(),i=0;i<o.length;i++)if(o[i]!=n){var r=o[i].getProcedureDefExternalCall;if(r&&Blockly.Names.equals(r(o[i]),e))return!0}return!1}(e,t.workspace,t);){var n=e.match(/^(.*?)(\d+)$/);n?e=n[1]+(parseInt(n[2],10)+1):e+="2"}return e}(e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""),this.sourceBlock_)}Blockly.Blocks.puzzlesProceduresMutatorarg={};Blockly.Blocks.puzzlesProceduresMutatorarg.init=function(){Blockly.Blocks.procedures_mutatorarg.init.apply(this);this.setColour(COLOR_OPERATIONS)};Blockly.Blocks.puzzlesProceduresMutatorarg.validator_=Blockly.Blocks.procedures_mutatorarg.validator_;Blockly.Blocks.puzzlesProceduresMutatorarg.deleteIntermediateVars_=Blockly.Blocks.procedures_mutatorarg.deleteIntermediateVars_;Blockly.Blocks.externalCall.getProcedureDefExternalCall=function(e){return e.getFieldValue("NAME")};Blockly.Blocks.externalCall.setStatements_=function(e){if(this.hasStatements_!==e){if(e){this.appendStatementInput("STACK").appendField("do");this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")}else this.removeInput("STACK",!0);this.hasStatements_=e}};Blockly.Blocks.externalCall.updateParams_=Blockly.Blocks.procedures_defnoreturn.updateParams_;Blockly.Blocks.externalCall.mutationToDom=Blockly.Blocks.procedures_defnoreturn.mutationToDom;Blockly.Blocks.externalCall.domToMutation=function(e){this.arguments_=[];this.argumentVarModels_=[];for(var t=0;o=e.childNodes[t];t++)if("arg"==o.nodeName.toLowerCase()){var n=o.getAttribute("name"),o=o.getAttribute("varid");this.arguments_.push(n);n=Blockly.Variables.getOrCreateVariablePackage(this.workspace,o,n,"");this.argumentVarModels_.push(n)}this.updateParams_();this.setStatements_("false"!==e.getAttribute("statements"))};Blockly.Blocks.externalCall.decompose=function(e){var t=e.newBlock("procedures_mutatorcontainer");t.setColour(this.getColour());t.initSvg();this.getInput("RETURN")?t.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):t.getInput("STATEMENT_INPUT").setVisible(!1);for(var n=t.getInput("STACK").connection,o=0;o<this.arguments_.length;o++){var i=e.newBlock("procedures_mutatorarg");i.setColour(this.getColour());i.initSvg();i.setFieldValue(this.arguments_[o],"NAME");i.oldLocation=o;n.connect(i.previousConnection);n=i.nextConnection}return t};Blockly.Blocks.externalCall.compose=function(e){this.arguments_=[];this.paramIds_=[];this.argumentVarModels_=[];for(var t=e.getInputTargetBlock("STACK");t;){var n=t.getFieldValue("NAME");this.arguments_.push(n);n=this.workspace.getVariable(n,"");this.argumentVarModels_.push(n);this.paramIds_.push(t.id);t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateParams_();e=e.getFieldValue("STATEMENTS");if(null!==e){e="TRUE"==e;if(this.hasStatements_!=e)if(e){this.setStatements_(!0);Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK");this.statementConnection_=null}else{e=this.getInput("STACK").connection;this.statementConnection_=e.targetConnection;if(this.statementConnection_){e=e.targetBlock();e.unplug();e.bumpNeighbours_()}this.setStatements_(!1)}}};Blockly.Blocks.externalCall.getProcedureDef=null;Blockly.Blocks.externalCall.getVars=Blockly.Blocks.procedures_defnoreturn.getVars;Blockly.Blocks.externalCall.getVarModels=Blockly.Blocks.procedures_defnoreturn.getVarModels;Blockly.Blocks.externalCall.renameVarById=Blockly.Blocks.procedures_defnoreturn.renameVarById;Blockly.Blocks.externalCall.updateVarName=Blockly.Blocks.procedures_defnoreturn.updateVarName;Blockly.Blocks.externalCall.displayRenamedVar_=Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_;Blockly.Blocks.externalCall.customContextMenu=Blockly.Blocks.procedures_defnoreturn.customContextMenu;Blockly.Blocks.externalCall.callType_=null;Blockly.JavaScript.externalCall=function(e){Blockly.JavaScript.procedures_defnoreturn(e);e=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE);Blockly.JavaScript.definitions_["%"+e]+="\nappInstance.ExternalInterface['"+e+"'] = "+e+";\n";return null};Blockly.Blocks.comment={init:function(){this.appendDummyInput().appendField(new Blockly.FieldTextInput("Place Your Comment Here"),"TEXT");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!1);this.setColour(COLOR_ADVANCED);this.setTooltip("Comment puzzle.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#comment");this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);this.quoteField_("TEXT")}};Blockly.JavaScript.comment=function(e){return"/* ".concat(e.getFieldValue("TEXT")," */\n")};Blockly.Blocks.callJSFunction={init:function(){var e=new Blockly.FieldTextInput("");e.setSpellcheck(!1);this.appendDummyInput("TOPROW").appendField("call external function").appendField(e,"NAME");this.setMutator(new Blockly.Mutator(["puzzlesProceduresMutatorargCallJS"]));this.arguments_=[];this.argumentVarModels_=[];this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_ADVANCED);this.setTooltip("Executes a function specified in the JavaScript code of the application.\n            Optionally passes parameters to be used as function arguments.\n            See the Puzzles reference for more info.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#call_external_function");blockReady(this,function(e,n){fieldSetValidator(e.getField("NAME"),function(e,t){fieldSetValidColor(e,n.ExternalInterface[t])})})}};Blockly.Blocks.callJSFunctionWithReturn={init:function(){var e=new Blockly.FieldTextInput("");e.setSpellcheck(!1);this.appendDummyInput("TOPROW").appendField("call external function").appendField(e,"NAME");this.setMutator(new Blockly.Mutator(["puzzlesProceduresMutatorargCallJS"]));this.arguments_=[];this.argumentVarModels_=[];this.setColour(COLOR_ADVANCED);this.setOutput(!0);this.setTooltip("Executes a function specified in the JavaScript code of the application and returns its output.\n            Optionally passes parameters to be used as function arguments.\n            See the Puzzles reference for more info.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#call_external_function");blockReady(this,function(e,n){fieldSetValidator(e.getField("NAME"),function(e,t){fieldSetValidColor(e,n.ExternalInterface[t])})})}};Blockly.Blocks.puzzlesProceduresMutatorargCallJS={};Blockly.Blocks.puzzlesProceduresMutatorargCallJS.init=function(){Blockly.Blocks.puzzlesProceduresMutatorarg.init.apply(this);this.setColour(COLOR_ADVANCED)};Blockly.Blocks.puzzlesProceduresMutatorargCallJS.validator_=Blockly.Blocks.puzzlesProceduresMutatorarg.validator_;Blockly.Blocks.puzzlesProceduresMutatorargCallJS.createNewVar_=Blockly.Blocks.puzzlesProceduresMutatorarg.createNewVar_;Blockly.Blocks.puzzlesProceduresMutatorargCallJS.deleteIntermediateVars_=Blockly.Blocks.puzzlesProceduresMutatorarg.deleteIntermediateVars_;Blockly.Blocks.callJSFunction.getProcedureCall=Blockly.Blocks.callJSFunctionWithReturn.getProcedureCall=function(){return this.getFieldValue("NAME")};Blockly.Blocks.callJSFunction.renameProcedure=Blockly.Blocks.callJSFunctionWithReturn.renameProcedure=function(){};Blockly.Blocks.callJSFunction.decompose=Blockly.Blocks.callJSFunctionWithReturn.decompose=Blockly.Blocks.externalCall.decompose;Blockly.Blocks.callJSFunction.compose=Blockly.Blocks.callJSFunctionWithReturn.compose=Blockly.Blocks.externalCall.compose;Blockly.Blocks.callJSFunction.mutationToDom=Blockly.Blocks.callJSFunctionWithReturn.mutationToDom=function(){var e=document.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var t=0;t<this.arguments_.length;t++){var n=document.createElement("arg");n.setAttribute("name",this.arguments_[t]);e.appendChild(n)}this.updateShape_();return e};Blockly.Blocks.callJSFunction.domToMutation=Blockly.Blocks.procedures_callnoreturn.domToMutation;Blockly.Blocks.callJSFunctionWithReturn.domToMutation=Blockly.Blocks.procedures_callreturn.domToMutation;Blockly.Blocks.callJSFunction.setProcedureParameters_=Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_;Blockly.Blocks.callJSFunctionWithReturn.setProcedureParameters_=Blockly.Blocks.procedures_callreturn.setProcedureParameters_;Blockly.Blocks.callJSFunction.updateShape_=Blockly.Blocks.procedures_callnoreturn.updateShape_;Blockly.Blocks.callJSFunctionWithReturn.updateShape_=Blockly.Blocks.procedures_callreturn.updateShape_;Blockly.Blocks.callJSFunction.updateParams_=Blockly.Blocks.callJSFunctionWithReturn.updateParams_=function(){for(var e=!1,t={},n=0;n<this.arguments_.length;n++){if(t["arg_"+this.arguments_[n].toLowerCase()]){e=!0;break}t["arg_"+this.arguments_[n].toLowerCase()]=!0}e?this.setWarningText("Warning: This function call has duplicate parameters."):this.setWarningText(null)};Blockly.Blocks.callJSFunction.setStatements_=Blockly.Blocks.callJSFunctionWithReturn.setStatements_=function(){};Blockly.JavaScript.callJSFunction=Blockly.JavaScript.callJSFunctionWithReturn=function(e){for(var t=Blockly.JavaScript.variableDB_.getName(e.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),n=[],o=0;o<e.arguments_.length;o++)n[o]=Blockly.JavaScript.valueToCode(e,"ARG"+o,Blockly.JavaScript.ORDER_COMMA)||"null";Blockly.JavaScript.provideFunction_("getJSFunction",["\n// callJSFunction puzzle\nfunction ".concat(BFUN$2,'(funcName) {\n    var jsFunc = appInstance.ExternalInterface[funcName];\n    if (typeof jsFunc == "function")\n        return jsFunc;\n    else\n        return function() {};\n}\n    ')]);if("callJSFunction"==e.type)return"getJSFunction('"+t+"')("+n.join(", ")+");\n";if("callJSFunctionWithReturn"==e.type)return["getJSFunction('"+t+"')("+n.join(", ")+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.execScript={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("exec script");this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("Executes the specified javascript code.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#exec_script")}};Blockly.Blocks.execScript.scopeInfo_={};Blockly.JavaScript.execScript=function(e){var t=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";t.includes("\n")&&(t="(".concat(t,")"));e=getSurroundParentOfType(e,"procedures_defnoreturn")||getSurroundParentOfType(e,"procedures_defreturn"),e=null===e?"":e.getProcedureDef();e in Blockly.Blocks.execScript.scopeInfo_||(Blockly.Blocks.execScript.scopeInfo_[e]=!0);return"".concat(!0?"var VARS = ".concat(__EXEC_SCRIPT_VARS_BUILTIN__,";\n"):"","\nFunction('app', 'v3d', 'VARS', 'PROC', ").concat(t,")(appInstance, v3d, VARS, ").concat(__EXEC_SCRIPT_PROC_ID__,");\n\n")};Blockly.Blocks.loadFile={init:function(){this.appendValueInput("URL").setCheck("String").appendField("load data");this.appendStatementInput("DO").appendField("once ready do");this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip('Attempts to load data from a specified location.\n            The puzzles in the "once ready do" slot are interpreted regardless of whether the attempt was a success.\n            The retrieved data can be accessed via the "loaded data" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#load_data")}};Blockly.JavaScript.loadFile=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("loadFile",["\n// loadFile puzzle\nfunction ".concat(BFUN$2,"(url, callback) {\n\n    var files = _pGlob.loadedFiles;\n\n    if (!url || (typeof url != 'string')) {\n        _pGlob.loadedFile = '';\n        callback();\n    } else if (url in files) {\n        _pGlob.loadedFile = files[url];\n        callback();\n    } else {\n        var loader = new v3d.FileLoader();\n        loader.load(url,\n            function(data) {\n                _pGlob.loadedFile = data;\n                callback();\n            },\n            function() {},\n            function() {\n                _pGlob.loadedFile = '';\n                callback();\n            }\n        );\n    }\n}\n    ")])+"("+t+", "+d(e)+");\n"};Blockly.Blocks.sendData={init:function(){this.appendValueInput("DATA").appendField("send data");this.appendValueInput("URL").setCheck("String").appendField("to");this.appendStatementInput("DO").appendField("once ready do");this.setInputsInline(!0);this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip('Attempts to send a specified data to a remote location using an asynchronous POST HTTP request.\n            The puzzles in the "once ready do" slot are interpreted regardless of whether the attempt was a success.\n            If there is any response data, it can be accessed via the "loaded data" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#send_data")}};Blockly.JavaScript.sendData=function(e){var t=Blockly.JavaScript.valueToCode(e,"DATA",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("sendData",["\n// sendData puzzle\nfunction ".concat(BFUN$2,"(data, url, callback) {\n    var req = new XMLHttpRequest();\n\n    req.onreadystatechange = function() {\n        if (req.readyState == 4 && req.status == 200) {\n            if (req.getResponseHeader('Content-Type').indexOf('application/json') > -1)\n                _pGlob.loadedFile = JSON.parse(req.responseText);\n            else\n                _pGlob.loadedFile = req.responseText;\n\n            callback();\n        }\n    };\n\n    req.open('POST', url, true);\n\n    if (typeof data == 'string') {\n        req.setRequestHeader('Content-type', 'text/plain');\n    } else {\n        // serialize to json\n        req.setRequestHeader('Content-type', 'application/json');\n        data = JSON.stringify(data);\n    }\n\n    req.send(data);\n}\n\n    ")])+"("+t+", "+n+", "+d(e)+");\n"};Blockly.Blocks.loadedFile={init:function(){this.appendDummyInput().appendField("loaded data");this.setColour(COLOR_ADVANCED);this.setOutput(!0,["String","Dictionary"]);this.setTooltip('Returns data retrieved by the "load data" or "send data" puzzles.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#loaded_data")}};Blockly.JavaScript.loadedFile=function(e){return["_pGlob.loadedFile",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.readJSON={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("read JSON from");this.setOutput(!0);this.setInputsInline(!0);this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_ADVANCED);this.setTooltip("Interprets text as JavaScript Object Notation data.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#read_JSON")}};Blockly.JavaScript.readJSON=function(e){e=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("readJSON",["\n// readJSON puzzle\nfunction ".concat(BFUN$2,'(text) {\n    try {\n        return JSON.parse(text);\n    } catch(e) {\n        console.error("Read JSON Puzzle: could not interpret data.");\n        return null;\n    }\n}\n    ')])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.readCSV={init:function(){this.appendValueInput("TEXT").setCheck("String").appendField("read CSV from");this.appendDummyInput().appendField("with delimiter").appendField(new BlocklyExt.Fields.Dropdown([[",",","],[";",";"],[":",":"],["{tab}","\t"],["{space}"," "]]),"DELIMIT");this.appendValueInput("FROM").appendField("from row").setCheck(["Number"]);this.setOutput(!0,"Array");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_ADVANCED);this.setTooltip('Interprets text as comma-separated values.\n            Returns a list of table rows, with each row represented as a list of values.\n            The delimiter can be selected with the drop-down to correspond a CSV file\'s export settings.\n            "From row" value denotes how many rows will be skipped starting from the top.\n            Table rows and values are accessed by their numeric indices starting from 0.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#read_CSV")}};Blockly.JavaScript.readCSV=function(e){var t=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("DELIMIT")+"'",e=Blockly.JavaScript.valueToCode(e,"FROM",Blockly.JavaScript.ORDER_NONE);return[Blockly.JavaScript.provideFunction_("readCSV",["\n// readCSV puzzle\nfunction ".concat(BFUN$2,"(text, delimit, from) {\n    return v3d.CSVParser.parse(text,\n        {delimiter: delimit, skipinitialrows: from});\n}\n    ")])+"("+t+", "+n+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.saveState={init:function(){this.appendValueInput("OBJECTS").setCheck(["Object3D","String","Array"]).appendField("save state of objects");this.appendValueInput("VARIABLES").setCheck("Array").appendField("variables");this.setInputsInline(!0);this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("Saves the state of specified objects and/or the values of variables specified by their names.\n            The objects are cloned and stored in memory. The values of the variables are retrieved and stored in memory for each specified variable name.\n            If this puzzle is called several times, the states are saved in stack so that it is possible to return to any previous state with the undo state puzzle.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#save_state")}};Blockly.JavaScript.saveState=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECTS",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"VARIABLES",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("saveState",["\n\nfunction ".concat(BFUN$2,"(objs, vars) {\n    var objsState = {};\n\n    objs = retrieveObjectNames(objs) || [];\n\n    for (var i = 0; i < objs.length; i++) {\n        var objName = objs[i];\n\n        if (objName) {\n            var obj = getObjectByName(objName);\n            if (obj) {\n                var objSaved = obj.clone(false);\n\n                // NOTE: single-material objects only\n                if (obj.material)\n                    objSaved.material = obj.material.clone();\n\n                objsState[objName] = objSaved;\n            } else\n                console.error('saveState: Wrong object name: ' + objName);\n        }\n    }\n\n    var varsState = {};\n\n    for (var i = 0; i < vars.length; i++) {\n        var varName = vars[i];\n        if (varName)\n            varsState[varName] = JSON.stringify(eval(varName));\n    }\n\n    _pGlob.states.push({\n        objects: objsState,\n        variables: varsState\n    });\n\n}\n\n    ")])+"("+t+", "+e+");"};Blockly.Blocks.undoState={init:function(){this.appendDummyInput().appendField("undo state");this.setInputsInline(!0);this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("Restores the state of objects and/or variables saved with the save state puzzle. If this puzzle is called several times, the states are restored from the stack which makes it possible to return to any previously saved state.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#undo_state")}};Blockly.JavaScript.undoState=function(e){return Blockly.JavaScript.provideFunction_("undoState",["\n\nfunction ".concat(BFUN$2,"() {\n\n    var state = _pGlob.states.pop();\n    if (!state)\n        return;\n\n    var objsState = state.objects;\n\n    for (var objName in objsState) {\n        var obj = getObjectByName(objName);\n\n        if (obj) {\n            var objSaved = objsState[objName];\n\n            obj.copy(objSaved, false);\n\n            if (objSaved.material)\n                obj.material = objSaved.material;\n        }\n    }\n\n    var varsState = state.variables;\n\n    for (var varName in varsState) {\n        eval(varName + '=' + varsState[varName]);\n    }\n\n}\n\n    ")])+"();"};Blockly.Blocks.allVariableNames={init:function(){this.appendDummyInput().appendField("all variable names");this.setColour(COLOR_ADVANCED);this.setOutput(!0,"Array");this.setTooltip("Returns a list with the names of all variables used in Puzzles.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#all_variable_names")}};Blockly.JavaScript.allVariableNames=function(e){var t=_tabCollection.tabs.find(function(e){return e.type==TAB_MAIN||e.type==TAB_SECONDARY}),n=[];void 0!==t&&(n=t.ws.getVariablesOfType().map(function(e){return Blockly.JavaScript.variableDB_.getName(e.name,Blockly.Variables.NAME_TYPE)}));return[JSON.stringify(n),Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.getVariableValueByName={init:function(){this.appendValueInput("NAME").setCheck("String").appendField("variable value by name");this.setColour(COLOR_ADVANCED);this.setOutput(!0);this.setTooltip("Returns the value of a variable specified by its name.\n            This puzzle works similarly to the standard variable value puzzle, yet does not require to select a variable from the predefined dropdown menu.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#variable_value_by_name")}};Blockly.JavaScript.getVariableValueByName=function(e){return['eval("try { eval('+(Blockly.JavaScript.valueToCode(e,"NAME",Blockly.JavaScript.ORDER_NONE)||"''")+') } catch(e) { }")',Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.getJavaScriptObject={init:function(){this.appendDummyInput().appendField("JavaScript object").appendField(new BlocklyExt.Fields.Dropdown([["window","window"],["arguments","arguments"],["this","this"]]),"TYPE");this.setInputsInline(!0);this.setOutput(!0);this.setColour(COLOR_ADVANCED);this.setTooltip("Get JavaScript object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#javascript_object")}};Blockly.JavaScript.getJavaScriptObject=function(e){return[e.getFieldValue("TYPE"),Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.waitPromise={init:function(){this.appendValueInput("PROMISE").setCheck("Promise").appendField("wait promise");this.appendStatementInput("ON_FULFILLED").appendField("once fulfilled do");this.appendStatementInput("ON_REJECTED").appendField("once rejected do");this.setColour(COLOR_ADVANCED);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip('Wait a promise to be fulfilled or rejected and run puzzles in\n                either "once fulfilled do" or "once rejected do" slot');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#wait_promise")}};Blockly.JavaScript.waitPromise=function(e){var t=Blockly.JavaScript.valueToCode(e,"PROMISE",Blockly.JavaScript.ORDER_NONE)||"null",n=Blockly.JavaScript.statementToCode(e,"ON_FULFILLED"),o=Blockly.JavaScript.statementToCode(e,"ON_REJECTED"),e=Blockly.JavaScript.provideFunction_("waitPromise",["\n// waitPromise puzzle\nfunction ".concat(BFUN$2,"(promise, onFulfilled, onRejected) {\n\n    if (promise) {\n\n        promise.then(function(value) {\n\n            window.pv = value;\n            _pGlob.promiseValue = value;\n            onFulfilled();\n\n        }, function(reason) {\n\n            _pGlob.promiseValue = reason;\n            onRejected();\n\n        });\n\n    } else {\n\n        _pGlob.promiseValue = 'Incorrect promise value';\n        onRejected();\n\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(d(n),", ").concat(d(o),");\n")};Blockly.Blocks.promiseValue={init:function(){this.appendDummyInput().appendField("promise value");this.setColour(COLOR_ADVANCED);this.setOutput(!0);this.setTooltip('Returns data retrieved by the "wait promise" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#promise_value")}};Blockly.JavaScript.promiseValue=function(e){return["_pGlob.promiseValue",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.connector={init:function(){this.appendValueInput("VALUE");this.setColour(COLOR_ADVANCED);this.setOutput(!1);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setTooltip("Facilitates connecting puzzles with each other.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Advanced.html#connector")}};Blockly.JavaScript.connector=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return"''"===e?"":"".concat(e,";\n")};Blockly.Blocks.initSettings={init:function(){this.appendDummyInput().appendField("configure application");this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"LOAD_COMP_ASSETS").appendField("compressed assets").setAlign(Blockly.ALIGN_LEFT);this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"FULLSCREEN").appendField("default fullscreen button").setAlign(Blockly.ALIGN_LEFT);this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"BKG_TRANSPARENCY").appendField("transparent background").setAlign(Blockly.ALIGN_LEFT);this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE"),"PRESERVE_DRAW_BUF").appendField("enable screenshots").setAlign(Blockly.ALIGN_LEFT);this.appendDummyInput().appendField(new Blockly.FieldCheckbox("TRUE"),"FADE_ANNOTATIONS").appendField("fade annotations").setAlign(Blockly.ALIGN_LEFT);this.setColour(COLOR_INIT);this.setTooltip("Set various initialization options for the application.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Initialization.html#configure_application")}};Blockly.JavaScript.initSettings=function(e){var t="TRUE"==e.getField("FADE_ANNOTATIONS").getValue(),n="TRUE"==e.getField("BKG_TRANSPARENCY").getValue(),o="TRUE"==e.getField("PRESERVE_DRAW_BUF").getValue(),i="TRUE"==e.getField("LOAD_COMP_ASSETS").getValue(),e="TRUE"==e.getField("FULLSCREEN").getValue();return"\n// initSettings puzzle\n_initGlob.output.initOptions.fadeAnnotations = ".concat(t,";\n_initGlob.output.initOptions.useBkgTransp = ").concat(n,";\n_initGlob.output.initOptions.preserveDrawBuf = ").concat(o,";\n_initGlob.output.initOptions.useCompAssets = ").concat(i,";\n_initGlob.output.initOptions.useFullscreen = ").concat(e,";\n    ")};Blockly.Blocks.initPreloader={init:function(){this.appendDummyInput().appendField("setup preloader");this.appendStatementInput("DO_START").appendField("on start do").setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_PROGRESS").appendField("on progress do").setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_END").appendField("on finish do").setAlign(Blockly.ALIGN_RIGHT);this.setColour(COLOR_INIT);this.setTooltip("Perform actions during the different stages of the preloder.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Initialization.html#setup_preloader")}};Blockly.JavaScript.initPreloader=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO_START"),n=Blockly.JavaScript.statementToCode(e,"DO_PROGRESS"),e=Blockly.JavaScript.statementToCode(e,"DO_END");return"\n// initPreloader puzzle\n_initGlob.output.initOptions.useCustomPreloader = true;\n_initGlob.output.initOptions.preloaderStartCb = function() {\n    _initGlob.percentage = 0;\n    (".concat(d(t),")();\n};\n_initGlob.output.initOptions.preloaderProgressCb = function(percentage) {\n    _initGlob.percentage = percentage;\n    (").concat(d(n),")();\n};\n_initGlob.output.initOptions.preloaderEndCb = function() {\n    _initGlob.percentage = 100;\n    (").concat(d(e),")();\n};\n    ")};Blockly.Blocks.percentage={init:function(){this.appendDummyInput().appendField("percentage");this.setColour(COLOR_INIT);this.setOutput(!0,"Number");this.setTooltip('Returns the loading percentage for the preloader.\n            Intended for use with the "Initialize Preloader" puzzle in its "progress" callback.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Initialization.html#setup_preloader")}};Blockly.JavaScript.percentage=function(e){return["Math.round(_initGlob.percentage)",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.loadFont={init:function(){this.appendValueInput("URL").setCheck("String").appendField("load font");this.appendValueInput("FONTFAMILY").setCheck("String").appendField("as font-family");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_INIT);this.setTooltip("Loads font from a specified URL and makes it accessible via font-family CSS rule.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Initialization.html#load_font")}};Blockly.JavaScript.loadFont=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"FONTFAMILY",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("loadFont",["\n// loadFont puzzle\nfunction ".concat(BFUN$2,"(url, family) {\n\n    if (!url || !family)\n        return;\n\n    // register in CSS\n    var elemStyle = document.createElement('style');\n    elemStyle.innerHTML = '@font-face { font-family: ' + family\n        + '; src: url(' + url + '); }';\n    document.body.appendChild(elemStyle);\n\n    // preload font\n    var elemDiv = document.createElement('div');\n    elemDiv.innerHTML = 'invisible text';\n    elemDiv.style.visibility = 'hidden';\n    elemDiv.style.fontFamily = family;\n    document.body.appendChild(elemDiv);\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.setTimeout={init:function(){this.appendDummyInput().appendField("after");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("second(s)");this.setInputsInline(!0);this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_TIME);this.setTooltip('Waits for a specified amount of time and\n            then triggers puzzles placed inside the "do" slot.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#after")}};Blockly.JavaScript.setTimeout=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("registerSetTimeout",["\n// setTimeout puzzle\nfunction ".concat(BFUN$2,"(timeout, callback) {\n    window.setTimeout(callback, 1000 * timeout);\n}\n    ")])+"("+t+", "+d(e)+");\n"};Blockly.Blocks.setInterval={init:function(){this.appendDummyInput().appendField("every");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("second(s)");this.setInputsInline(!0);this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_TIME);this.setTooltip('Waits for a specified amount of time and\n            then triggers puzzles placed inside the "do" slot. Then repeats.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#every")}};Blockly.JavaScript.setInterval=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("registerInterval",["\n// setInterval puzzle\nfunction ".concat(BFUN$2,"(timeout, callback) {\n    var timerId = window.setInterval(function() { callback(timerId) }, 1000 * timeout);\n}\n    ")])+"("+t+", "+d(e)+");\n"};Blockly.Blocks.everyFrame={init:function(){this.appendDummyInput().appendField("every frame");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_TIME);this.setTooltip('Triggers puzzles placed inside the "do" slot every rendering frame\n            (normally at the rate of 60 frames per second).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#every_frame")}};Blockly.JavaScript.everyFrame=function(e){e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("registerEveryFrame",["\n// everyFrame puzzle\nfunction ".concat(BFUN$2,'(callback) {\n    if (typeof callback == "function")\n        appInstance.renderCallbacks.push(callback);\n}\n    ')])+"("+d(e)+");\n"};Blockly.Blocks.elapsed={init:function(){this.appendDummyInput().appendField("elapsed delta");this.setColour(COLOR_TIME);this.setOutput(!0,"Number");this.setTooltip('Outputs the amount of time (in seconds) passed from the previous rendering frame.\n            Can be used with the "every frame" puzzle to implement frame-independent animation.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#elapsed_delta")}};Blockly.JavaScript.elapsed=function(e){return["appInstance.elapsed",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.elapsedTotal={init:function(){this.appendDummyInput().appendField("elapsed total");this.setColour(COLOR_TIME);this.setOutput(!0,"Number");this.setTooltip("Outputs the amount of time (in seconds) passed from application start.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#elapsed_total")}};Blockly.JavaScript.elapsedTotal=function(e){return["appInstance.clock.elapsedTime",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.setTimer={init:function(){this.appendDummyInput().appendField("set timer");this.appendValueInput("ID").setCheck(["String"]);this.appendValueInput("VALUE").appendField("interval").setCheck(["Number"]);this.appendDummyInput().appendField("second(s)");this.appendValueInput("REPEAT").appendField("repeat").setCheck(["Number"]);this.setInputsInline(!0);this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_TIME);this.setTooltip('Triggers puzzles placed inside the "do" slot after the\n                specified delay. Repeats this action the amount times specified\n                in the "repeat" slot each after the same delay. The specified\n                ID can be used to override or cancel the timer.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#set_timer")}};Blockly.JavaScript.setTimer=function(e){var t=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"REPEAT",Blockly.JavaScript.ORDER_NONE)||"''";null===e.getInputTargetBlock("REPEAT")&&(o=1);var i=Blockly.JavaScript.statementToCode(e,"DO"),e=Blockly.JavaScript.provideFunction_("registerSetTimer",["\n// setTimer puzzle\nfunction ".concat(BFUN$2,"(id, timeout, callback, repeat) {\n\n    if (id in _pGlob.intervals) {\n        window.clearInterval(_pGlob.intervals[id]);\n    }\n\n    _pGlob.intervals[id] = window.setInterval(function() {\n        if (repeat-- > 0) {\n            callback(_pGlob.intervals[id]);\n        }\n    }, 1000 * timeout);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(d(i),", ").concat(o,");\n")};Blockly.Blocks.removeTimer={init:function(){this.appendDummyInput().appendField("remove timer");this.appendValueInput("ID").setCheck(["String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_TIME);this.setTooltip("Removes a previosly set timer by using its ID.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#remove_timer")}};Blockly.JavaScript.removeTimer=function(e){e=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("registerRemoveTimer",["\n// removeTimer puzzle\nfunction ".concat(BFUN$2,"(id) {\n    if (id in _pGlob.intervals) {\n        window.clearInterval(_pGlob.intervals[id]);\n    }\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.getDateTime={init:function(){this.appendDummyInput().appendField("system date / time").appendField(new BlocklyExt.Fields.Dropdown([["full","FULL"],["time","TIME"],["year","YEAR"],["month","MONTH"],["day","DAY"],["week day","WEEK_DAY"],["hours","HOURS"],["minutes","MINUTES"],["seconds","SECONDS"],["milliseconds","MILLISECONDS"],["timezone","TIMEZONE"]]),"TYPE");this.appendDummyInput().appendField(" GMT").appendField(new Blockly.FieldCheckbox("FALSE"),"GMT");this.setInputsInline(!0);this.setOutput(!0,["String","Number"]);this.setColour(COLOR_TIME);this.setTooltip("Outputs system date and time.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Time.html#system_date_time")}};Blockly.JavaScript.getDateTime=function(e){var t="'"+e.getFieldValue("TYPE")+"'",e="TRUE"==e.getField("GMT").getValue();return[Blockly.JavaScript.provideFunction_("getDateTime",["\nfunction ".concat(BFUN$2,"(type, isGMT) {\n\n    var date = new Date();\n\n    function doubleDigits(num) {\n        return (num <= 9 ? \"0\" + num : \"\" + num);\n    }\n\n    switch (type) {\n        case 'FULL':\n            return isGMT ? date.toUTCString() : date.toString();\n        case 'TIME':\n            if (isGMT)\n                return doubleDigits(date.getUTCHours()) + ':' +\n                       doubleDigits(date.getUTCMinutes()) + ':' +\n                       doubleDigits(date.getUTCSeconds());\n            else\n                return doubleDigits(date.getHours()) + ':' +\n                       doubleDigits(date.getMinutes()) + ':' +\n                       doubleDigits(date.getSeconds());\n        case 'YEAR':\n            return isGMT ? date.getUTCFullYear() : date.getFullYear();\n        case 'MONTH':\n            return isGMT ? date.getUTCMonth()+1 : date.getMonth()+1;\n        case 'DAY':\n            return isGMT ? date.getUTCDate() : date.getDate();\n        case 'WEEK_DAY':\n            return isGMT ? date.getUTCDay()+1 : date.getDay()+1;\n        case 'HOURS':\n            return isGMT ? date.getUTCHours() : date.getHours();\n        case 'MINUTES':\n            return isGMT ? date.getUTCMinutes() : date.getMinutes();\n        case 'SECONDS':\n            return isGMT ? date.getUTCSeconds() : date.getSeconds();\n        case 'MILLISECONDS':\n            return isGMT ? date.getUTCMilliseconds() : date.getMilliseconds();\n        case 'TIMEZONE':\n            return isGMT ? 0 : -date.getTimezoneOffset()/60;\n    }\n}\n    ")])+"("+t+","+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.addHTMLElement={init:function(){this.appendDummyInput().appendField("add HTML elem").appendField(new BlocklyExt.Fields.Dropdown([["a","a"],["b","b"],["br","br"],["button","button"],["canvas","canvas"],["div","div"],["form","form"],["h1","h1"],["h2","h2"],["h3","h3"],["h4","h4"],["h5","h5"],["h6","h6  "],["iframe","iframe"],["img","img"],["input","input"],["li","li"],["link","link"],["ol","ol"],["option","option"],["p","p"],["script","script"],["select","select"],["span","span"],["style","style"],["table","table"],["td","td"],["th","th"],["tr","tr"],["textarea","textarea"],["ul","ul"],["video","video"]]),"ELEMENT");this.appendValueInput("ID").appendField("with id").setCheck("String");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["to","TO"],["before","BEFORE"],["after","AFTER"]]),"MODE");this.appendValueInput("TARGET_ID").setCheck("String");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Creates an HTML element with a specified type and identifier\n            (corresponds to "id" attribute) and adds it to, right before or right\n            after the specified existing HTML element.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#add_HTML_element");this.setOnChange(function(e){var t=this.getInput("TARGET_ID");if(t&&!t.connection.getShadowDom()){var n=createBlockOfType(this.workspace,"DOMObjectSelector");n.setShadow(!0);n.setFieldValue("BODY","DOM_OBJECT");connectBlockToEmptyInput(n,t)}this.setOnChange(!1)})}};Blockly.JavaScript.addHTMLElement=function(e){var t="'"+e.getFieldValue("ELEMENT")+"'",n=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",o="'".concat(e.getFieldValue("MODE"),"'"),i=Blockly.JavaScript.valueToCode(e,"TARGET_ID",Blockly.JavaScript.ORDER_NONE)||"''",r=e.getField("PARENT"),e="TRUE"==(e=r?r.getValue():"FALSE");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);r=Blockly.JavaScript.provideFunction_("addHTMLElement",["\n// addHTMLElement puzzle\nfunction ".concat(BFUN$2,"(elemType, id, mode, targetId, isParent) {\n\n    var win = isParent ? window.parent : window;\n\n    var elem = win.document.createElement(elemType);\n    if (id !== '')\n        elem.id = id;\n\n    var targetElem = getElement(targetId, isParent);\n    if (targetElem instanceof win.Element) {\n        switch (mode) {\n            case 'TO':\n                targetElem.appendChild(elem);\n                break;\n            case 'BEFORE':\n                targetElem.insertAdjacentElement('beforebegin', elem);\n                break;\n            case 'AFTER':\n                targetElem.insertAdjacentElement('afterend', elem);\n                break;\n        }\n    }\n}\n    ")]);return"".concat(r,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(e,");\n")};Blockly.Blocks.setHTMLElemAttribute={init:function(){this.appendDummyInput().appendField("set prop").appendField(new BlocklyExt.Fields.Dropdown([["alt","alt"],["checked","checked"],["className","className"],["disabled","disabled"],["height","height"],["href","href"],["id","id"],["innerHTML","innerHTML"],["loop","loop"],["muted","muted"],["rel","rel"],["scrollLeft","scrollLeft"],["scrollTop","scrollTop"],["src","src"],["style","style"],["target","target"],["title","title"],["type","type"],["value","value"],["volume","volume"],["width","width"]]),"ATTRIBUTE");this.appendValueInput("VALUE").appendField("to").setCheck(["String","Number","Boolean"]);this.appendValueInput("ID").appendField("for elem").setCheck(["String","Array"]);this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Sets a property for an HTML element with a specified id.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).\n            Also works with lists of element ids.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#set_attribute")}};Blockly.JavaScript.setHTMLElemAttribute=function(e){var t="'"+e.getFieldValue("ATTRIBUTE")+"'",n=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",e=e.getField("PARENT"),e="TRUE"==(e=e?e.getValue():"FALSE");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("setHTMLElemAttribute",["\n// setHTMLElemAttribute puzzle\nfunction ".concat(BFUN$2,"(attr, value, ids, isParent) {\n    var elems = getElements(ids, isParent);\n    for (var i = 0; i < elems.length; i++) {\n        var elem = elems[i];\n        if (!elem) continue;\n\n        if (attr === 'style') {\n            // NOTE: setting an attribute 'style' instead of a property 'style'\n            // fixes IE11 worng behavior\n            elem.setAttribute(attr, value);\n        } else {\n            elem[attr] = value;\n        }\n    }\n}\n    ")])+"("+t+", "+n+", "+o+", "+e+");\n"};Blockly.Blocks.getHTMLElemAttribute={init:function(){this.appendDummyInput().appendField("get prop").appendField(new BlocklyExt.Fields.Dropdown([["alt","alt"],["checked","checked"],["className","className"],["clientHeight","clientHeight"],["clientWidth","clientWidth"],["disabled","disabled"],["duration","duration"],["ended","ended"],["height","height"],["href","href"],["id","id"],["innerHTML","innerHTML"],["innerHeight","innerHeight"],["innerWidth","innerWidth"],["offsetHeight","offsetHeight"],["offsetWidth","offsetWidth"],["paused","paused"],["placeholder","placeholder"],["rel","rel"],["scrollHeight","scrollHeight"],["scrollLeft","scrollLeft"],["scrollTop","scrollTop"],["scrollWidth","scrollWidth"],["scrollX","scrollX"],["scrollY","scrollY"],["src","src"],["style","style"],["target","target"],["title","title"],["type","type"],["value","value"],["volume","volume"],["width","width"]]),"ATTRIBUTE");this.appendValueInput("ID").appendField("from elem").setCheck(["String"]);this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setOutput(!0,["String","Number","Boolean"]);this.setColour(COLOR_HTML);this.setTooltip('Gets a property from an HTML element with a specified id.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#get_attribute")}};Blockly.JavaScript.getHTMLElemAttribute=function(e){var t="'"+e.getFieldValue("ATTRIBUTE")+"'",n=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",o=e.getField("PARENT"),e="TRUE"==(e=o?o.getValue():"FALSE");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);o=Blockly.JavaScript.provideFunction_("getHTMLElemAttribute",["\n// getHTMLElemAttribute puzzle\nfunction ".concat(BFUN$2,"(attr, id, isParent) {\n    var elem = getElement(id, isParent);\n    return elem ? elem[attr]: '';\n}\n    ")]);return["".concat(o,"(").concat(t,", ").concat(n,", ").concat(e,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};var c=[["align-content","alignContent"],["align-items","alignItems"],["align-self","alignSelf"],["animation","animation"],["animation-delay","animationDelay"],["animation-direction","animationDirection"],["animation-duration","animationDuration"],["animation-fill-mode","animationFillMode"],["animation-iteration-count","animationIterationCount"],["animation-name","animationName"],["animation-play-state","animationPlayState"],["animation-timing-function","animationTimingFunction"],["backface-visibility","backfaceVisibility"],["background","background"],["background-attachment","backgroundAttachment"],["background-clip","backgroundClip"],["background-color","backgroundColor"],["background-image","backgroundImage"],["background-origin","backgroundOrigin"],["background-position","backgroundPosition"],["background-repeat","backgroundRepeat"],["background-size","backgroundSize"],["border","border"],["border-bottom","borderBottom"],["border-bottom-color","borderBottomColor"],["border-bottom-left-radius","borderBottomLeftRadius"],["border-bottom-right-radius","borderBottomRightRadius"],["border-bottom-style","borderBottomStyle"],["border-bottom-width","borderBottomWidth"],["border-collapse","borderCollapse"],["border-color","borderColor"],["border-image","borderImage"],["border-image-outset","borderImageOutset"],["border-image-repeat","borderImageRepeat"],["border-image-slice","borderImageSlice"],["border-image-source","borderImageSource"],["border-image-width","borderImageWidth"],["border-left","borderLeft"],["border-left-color","borderLeftColor"],["border-left-style","borderLeftStyle"],["border-left-width","borderLeftWidth"],["border-radius","borderRadius"],["border-right","borderRight"],["border-right-color","borderRightColor"],["border-right-style","borderRightStyle"],["border-right-width","borderRightWidth"],["border-spacing","borderSpacing"],["border-style","borderStyle"],["border-top","borderTop"],["border-top-color","borderTopColor"],["border-top-left-radius","borderTopLeftRadius"],["border-top-right-radius","borderTopRightRadius"],["border-top-style","borderTopStyle"],["border-top-width","borderTopWidth"],["border-width","borderWidth"],["bottom","bottom"],["box-decoration-break","boxDecorationBreak"],["box-shadow","boxShadow"],["box-sizing","boxSizing"],["caption-side","captionSide"],["clear","clear"],["clip","clip"],["color","color"],["column-count","columnCount"],["column-fill","columnFill"],["column-gap","columnGap"],["column-rule","columnRule"],["column-rule-color","columnRuleColor"],["column-rule-style","columnRuleStyle"],["column-rule-width","columnRuleWidth"],["column-span","columnSpan"],["column-width","columnWidth"],["columns","columns"],["content","content"],["counter-increment","counterIncrement"],["counter-reset","counterReset"],["cursor","cursor"],["direction","direction"],["display","display"],["empty-cells","emptyCells"],["filter","filter"],["flex","flex"],["flex-basis","flexBasis"],["flex-direction","flexDirection"],["flex-flow","flexFlow"],["flex-grow","flexGrow"],["flex-shrink","flexShrink"],["flex-wrap","flexWrap"],["font","font"],["font-family","fontFamily"],["font-size","fontSize"],["font-style","fontStyle"],["font-variant","fontVariant"],["font-weight","fontWeight"],["font-size-adjust","fontSizeAdjust"],["font-stretch","fontStretch"],["hanging-punctuation","hangingPunctuation"],["height","height"],["hyphens","hyphens"],["isolation","isolation"],["justify-content","justifyContent"],["left","left"],["letter-spacing","letterSpacing"],["line-height","lineHeight"],["list-style","listStyle"],["list-style-image","listStyleImage"],["list-style-position","listStylePosition"],["list-style-type","listStyleType"],["margin","margin"],["margin-bottom","marginBottom"],["margin-left","marginLeft"],["margin-right","marginRight"],["margin-top","marginTop"],["max-height","maxHeight"],["max-width","maxWidth"],["min-height","minHeight"],["min-width","minWidth"],["object-fit","objectFit"],["object-position","objectPosition"],["opacity","opacity"],["order","order"],["orphans","orphans"],["outline","outline"],["outline-color","outlineColor"],["outline-offset","outlineOffset"],["outline-style","outlineStyle"],["outline-width","outlineWidth"],["overflow","overflow"],["overflow-x","overflowX"],["overflow-y","overflowY"],["padding","padding"],["padding-bottom","paddingBottom"],["padding-left","paddingLeft"],["padding-right","paddingRight"],["padding-top","paddingTop"],["page-break-after","pageBreakAfter"],["page-break-before","pageBreakBefore"],["page-break-inside","pageBreakInside"],["perspective","perspective"],["perspective-origin","perspectiveOrigin"],["position","position"],["quotes","quotes"],["resize","resize"],["right","right"],["tab-size","tabSize"],["table-layout","tableLayout"],["text-align","textAlign"],["text-align-last","textAlignLast"],["text-decoration","textDecoration"],["text-decoration-color","textDecorationColor"],["text-decoration-line","textDecorationLine"],["text-decoration-style","textDecorationStyle"],["text-indent","textIndent"],["text-justify","textJustify"],["text-overflow","textOverflow"],["text-shadow","textShadow"],["text-transform","textTransform"],["top","top"],["transform","transform"],["transform-origin","transformOrigin"],["transform-style","transformStyle"],["transition","transition"],["transition-delay","transitionDelay"],["transition-duration","transitionDuration"],["transition-property","transitionProperty"],["transition-timing-function","transitionTimingFunction"],["unicode-bidi","unicodeBidi"],["user-select","userSelect"],["vertical-align","verticalAlign"],["visibility","visibility"],["white-space","whiteSpace"],["widows","widows"],["width","width"],["word-break","wordBreak"],["word-spacing","wordSpacing"],["word-wrap","wordWrap"],["z-index","zIndex"]];Blockly.Blocks.createCSSRule={init:function(){this.appendDummyInput().appendField("create CSS rule");this.appendValueInput("CSS_RULE").setCheck(["String"]);this.appendValueInput("CSS_RULE_CONT").appendField("{").setCheck(["String"]);this.appendDummyInput().appendField("}");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip("Sets a CSS rule with optional content.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#create_css_rule")}};Blockly.JavaScript.createCSSRule=function(e){var t=Blockly.JavaScript.valueToCode(e,"CSS_RULE",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"CSS_RULE_CONT",Blockly.JavaScript.ORDER_NONE)||"''",o=e.getField("PARENT"),e="TRUE"==(e=o?o.getValue():"FALSE"),o=Blockly.JavaScript.provideFunction_("createCSSRule",["\n// createCSSRule puzzle\nfunction ".concat(BFUN$2,"(cssRule, cssRuleCont, isParent) {\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    style.innerHTML = cssRule + ' { ' + cssRuleCont + ' } ';\n\n    var styles = (isParent) ? parent.document.getElementsByTagName('head')[0] :\n                              document.getElementsByTagName('head')[0];\n    styles.appendChild(style)\n}\n    ")]);return"".concat(o,"(").concat(t,", ").concat(n,", ").concat(e,");\n")};Blockly.Blocks.setHTMLElemStyle={init:function(){this.appendDummyInput().appendField("set style").appendField(new BlocklyExt.Fields.Dropdown(c),"PROPERTY");this.appendValueInput("VALUE").appendField("to").setCheck(["String"]);this.appendValueInput("ID").appendField("for elem").setCheck(["String","Array"]);this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Sets a CSS property for an HTML element with a specified id.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).\n            Also works with lists of element ids.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#set_style")}};Blockly.JavaScript.setHTMLElemStyle=function(e){var t="'"+e.getFieldValue("PROPERTY")+"'",n=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",e=e.getField("PARENT"),e="TRUE"==(e=e?e.getValue():"FALSE");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("setHTMLElemStyle",["\n// setHTMLElemStyle puzzle\nfunction ".concat(BFUN$2,"(prop, value, ids, isParent) {\n    var elems = getElements(ids, isParent);\n    for (var i = 0; i < elems.length; i++) {\n        var elem = elems[i];\n        if (!elem || !elem.style)\n            continue;\n        elem.style[prop] = value;\n    }\n}\n    ")])+"("+t+", "+n+", "+o+", "+e+");\n"};Blockly.Blocks.setCSSRuleStyle={init:function(){this.appendDummyInput().appendField("set style").appendField(new BlocklyExt.Fields.Dropdown(c),"PROPERTY");this.appendValueInput("VALUE").appendField("to").setCheck(["String"]);this.appendValueInput("ID").appendField("for CSS rule").setCheck("String");this.appendDummyInput("PARENT").appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Sets a CSS property for a specified CSS rule\n            (found in .css files of an application).\n            The "in parent doc" checkbox should be enabled if the style sheets belong to an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#set_css_rule");this.setMutator(new Blockly.Mutator(["invisibleBlock"]));this.mixin(e([["mediaRuleSlot","add CSS @media slot",!1]],COLOR_HTML,function(e){this.updateShape_();e&&this.getInput("MEDIA_RULE")&&Blockly.Mutator.reconnect(e.mediaRuleSlotConnection_,this,"MEDIA_RULE")}));this.updateShape_()},saveConnections:function(e){var t=this.getInput("MEDIA_RULE");t&&(e.mediaRuleSlotConnection_=t.connection.targetConnection)},updateShape_:function(){var e=this._boolOptValues;if(e.mediaRuleSlot&&!this.getInput("MEDIA_RULE")){this.appendValueInput("MEDIA_RULE").appendField("@media").setCheck(["String"]);this.moveInputBefore("MEDIA_RULE","PARENT")}else!e.mediaRuleSlot&&this.getInput("MEDIA_RULE")&&this.removeInput("MEDIA_RULE")}};Blockly.JavaScript.setCSSRuleStyle=function(e){var t="'"+e.getFieldValue("PROPERTY")+"'",n=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",i="''";e.getInput("MEDIA_RULE")&&(i=Blockly.JavaScript.valueToCode(e,"MEDIA_RULE",Blockly.JavaScript.ORDER_NONE)||"''");e=e.getField("PARENT"),e="TRUE"==(e=e?e.getValue():"FALSE");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("setCSSRuleStyle",["\n// setCSSRuleStyle puzzle\nfunction ".concat(BFUN$2,"(prop, value, id, isParent, mediaRule) {\n    var styles = (isParent) ? parent.document.styleSheets : document.styleSheets;\n    for (var i = 0; i < styles.length; i++) {\n        /**\n         * workaround for \"DOMException: Failed to read the 'cssRules' property\n         * from 'CSSStyleSheet': Cannot access rules\"\n         */\n        try { var cssRules = styles[i].cssRules; }\n        catch (e) { continue; }\n\n        for (var j = 0; j < cssRules.length; j++) {\n            var cssRule = cssRules[j];\n            if (!mediaRule && cssRule.selectorText == id)\n                cssRule.style[prop] = value;\n            else if (mediaRule && cssRule.media && cssRule.media.mediaText == mediaRule) {\n                var cssRulesMedia = cssRule.cssRules;\n                for (var k = 0; k < cssRulesMedia.length; k++) {\n                    if (cssRulesMedia[k].selectorText == id)\n                        cssRulesMedia[k].style[prop] = value;\n                }\n            }\n        }\n    }\n}\n    ")])+"("+t+", "+n+", "+o+", "+e+","+i+");\n"};Blockly.Blocks.eventHTMLElem={init:function(){this.appendDummyInput().appendField("on event of").appendField(new BlocklyExt.Fields.Dropdown([["blur","blur"],["change","change"],["click","click"],["dblclick","dblclick"],["ended","ended"],["focus","focus"],["fullscreenchange","fullscreenchange"],["input","input"],["keydown","keydown"],["keypress","keypress"],["keyup","keyup"],["mousedown","mousedown"],["mouseenter","mouseenter"],["mouseleave","mouseleave"],["mousemove","mousemove"],["mouseout","mouseout"],["mouseover","mouseover"],["mouseup","mouseup"],["pointercancel","pointercancel"],["pointerdown","pointerdown"],["pointerenter","pointerenter"],["pointerleave","pointerleave"],["pointermove","pointermove"],["pointerout","pointerout"],["pointerover","pointerover"],["pointerup","pointerup"],["resize","resize"],["scroll","scroll"],["touchend","touchend"],["touchmove","touchmove"],["touchstart","touchstart"],["wheel","wheel"]]),"EVENT");this.appendValueInput("ID").setCheck(["String","Array"]).appendField("for elem");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Registers an event listener for an HTML element with a specified id.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).\n            Once an event occurs, the puzzles placed in the "do" slot are triggered.\n            Also works with lists of element ids.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#event")}};Blockly.JavaScript.eventHTMLElem=function(e){var t="'"+e.getFieldValue("EVENT")+"'",n=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",o=e.getField("PARENT"),o="TRUE"==(o=o?o.getValue():"FALSE"),e=Blockly.JavaScript.statementToCode(e,"DO");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("eventHTMLElem",["\n// eventHTMLElem puzzle\nfunction ".concat(BFUN$2,"(eventType, ids, isParent, callback) {\n    var elems = getElements(ids, isParent);\n    for (var i = 0; i < elems.length; i++) {\n        var elem = elems[i];\n        if (!elem)\n            continue;\n        elem.addEventListener(eventType, callback, false);\n    }\n}\n    ")])+"("+t+", "+n+", "+o+", "+d(e,"event")+");\n"};Blockly.Blocks.getEventProperty={init:function(){this.appendDummyInput().appendField("get event property").appendField(new BlocklyExt.Fields.Dropdown([["button","button"],["code","code"],["deltaY","deltaY"],["isPrimary","isPrimary"],["pageX","pageX"],["pageY","pageY"],["key","key"],["offsetX","offsetX"],["offsetY","offsetY"],["pointerType","pointerType"],["target.id","target.id"],["target.value","target.value"],["touches.length","touches.length"],["touches[0].pageX","touches[0].pageX"],["touches[0].pageY","touches[0].pageY"],["touches[1].pageX","touches[1].pageX"],["touches[1].pageY","touches[1].pageY"],["which","which"]]),"PROPERTY");this.setOutput(!0);this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_HTML);this.setTooltip('Outputs the value of a property of an event generated by the "event" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#get_event_property")}};Blockly.JavaScript.getEventProperty=function(e){e="'"+e.getFieldValue("PROPERTY")+"'";return[Blockly.JavaScript.provideFunction_("getEventProperty",["\n// getEventProperty puzzle\nfunction ".concat(BFUN$2,"(prop, event) {\n    if (typeof event != \"undefined\") {\n        switch (prop) {\n            case 'target.id':\n                return event.target.id;\n            case 'target.value':\n                return event.target.value;\n            case 'touches.length':\n                return event.touches ? event.touches.length : 0;\n            case 'touches[0].pageX':\n                return event.touches[0].pageX;\n            case 'touches[0].pageY':\n                return event.touches[0].pageY;\n            case 'touches[1].pageX':\n                return event.touches[1].pageX;\n            case 'touches[1].pageY':\n                return event.touches[1].pageY;\n            default:\n                return event[prop];\n        }\n    }\n}\n    ")])+"("+e+", event)",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.DOMObjectSelector={init:function(){this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["container","CONTAINER"],["window","WINDOW"],["document","DOCUMENT"],["body","BODY"]]),"DOM_OBJECT");this.setColour(COLOR_HTML_DOCUMENT);this.setOutput(!0,"String");this.setTooltip("Represents the canvas container, window, document or body DOM object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#DOM_object_selector")}};Blockly.JavaScript.DOMObjectSelector=function(e){return["['"+e.getFieldValue("DOM_OBJECT")+"']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.querySelector={init:function(){this.appendValueInput("QUERY").setCheck("String").appendField("query selector");this.setColour(COLOR_HTML_DOCUMENT);this.setOutput(!0,"String");this.setTooltip("Returns the first HTML element that matches a specified CSS selector.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#query_selector")}};Blockly.JavaScript.querySelector=function(e){return["['QUERYSELECTOR', "+(Blockly.JavaScript.valueToCode(e,"QUERY",Blockly.JavaScript.ORDER_NONE)||"''")+"]",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.HTMLWindow={init:function(){this.appendDummyInput().appendField("window");this.setColour(COLOR_HTML_DOCUMENT);this.setOutput(!0,"String");this.setTooltip("Represents the DOM window object - a browser tab or an iframe to which an HTML document is loaded.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#window");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new DOM object selector puzzle from the toolbox.")}};Blockly.JavaScript.HTMLWindow=function(e){return["['WINDOW']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.HTMLDocument={init:function(){this.appendDummyInput().appendField("document");this.setColour(COLOR_HTML_DOCUMENT);this.setOutput(!0,"String");this.setTooltip("Represents the DOM document object - the root node of an HTML document.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#document");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new DOM object selector puzzle from the toolbox.")}};Blockly.JavaScript.HTMLDocument=function(e){return["['DOCUMENT']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.HTMLBody={init:function(){this.appendDummyInput().appendField("body");this.setColour(COLOR_HTML_DOCUMENT);this.setOutput(!0,"String");this.setTooltip("Represents the DOM body object - the <body> element of an HTML document.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#body");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new DOM object selector puzzle from the toolbox.")}};Blockly.JavaScript.HTMLBody=function(e){return["['BODY']",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.createCanvasElem={init:function(){this.appendValueInput("ID").setCheck("String").appendField("create canvas elem with id");this.appendValueInput("WIDTH").setCheck("Number").appendField("width");this.appendValueInput("HEIGHT").setCheck("Number").appendField("height");this.setInputsInline(!0);this.setColour(COLOR_HTML);this.setOutput(!0,"Canvas");this.setTooltip("Creates a canvas element.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#create_canvas_elem")}};Blockly.JavaScript.createCanvasElem=function(e){var t=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"WIDTH",Blockly.JavaScript.ORDER_NONE)||"0",o=Blockly.JavaScript.valueToCode(e,"HEIGHT",Blockly.JavaScript.ORDER_NONE)||"0",e=Blockly.JavaScript.provideFunction_("createCanvasElem",["\n// createCanvasElem puzzle\nfunction ".concat(BFUN$2,"(id, width, height) {\n    var elem = document.createElement('canvas');\n\n    elem.id = id;\n    elem.width = width;\n    elem.height = height;\n\n    return elem;\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.drawLineObjectHTML={init:function(){this.appendValueInput("OBJECTINPUT").appendField("draw line from obj").setCheck(["Object3D","String","Array"]);this.appendValueInput("ID").appendField("to elem").setCheck("String");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.appendValueInput("WIDTH").appendField("with width").setCheck("Number");this.appendValueInput("COLOR").appendField("color").setCheck(["Number","String"]);this.appendValueInput("OFFSET").appendField("offset").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Connects a specified 3D object with a specified HTML element by a dynamically updated line.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).\n            You can also set the width, color and offset for the line.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#draw_line")}};Blockly.Blocks.removeLineObjectHTML={init:function(){this.appendValueInput("OBJECTINPUT").appendField("remove line from obj").setCheck(["Object3D","String","Array"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip("Removes a previously created line from a specified object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#remove_line")}};Blockly.JavaScript.drawLineObjectHTML=function(e){return u(e,"DRAW")};Blockly.JavaScript.removeLineObjectHTML=function(e){return u(e,"REMOVE")};function u(e,t){var n=Blockly.JavaScript.valueToCode(e,"OBJECTINPUT",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",i=e.getField("PARENT"),r="TRUE"==(r=i?i.getValue():"FALSE"),s=Blockly.JavaScript.valueToCode(e,"WIDTH",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"COLOR",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"OFFSET",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("operateLineObjectHTML",["\n// drawLineObjectHTML and removeLineObjectHTML puzzles\nfunction ".concat(BFUN$2,'(objNames, id, isParent, width, color, offset, op) {\n    var elem = getElement(id, isParent);\n    if (!elem && (op == "DRAW"))\n        return;\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n    for (var i = 0; i < objNames.length; i++) {\n        var objName = objNames[i];\n        var obj = getObjectByName(objName);\n        if (!obj) continue;\n\n        for (var j = obj.children.length - 1; j >= 0; j--) {\n            var child = obj.children[j];\n            if (child.isLineHTML) {\n                obj.remove(child);\n                child.geometry.dispose();\n                child.material.dispose();\n            }\n        }\n\n        if (op == "DRAW") {\n            var line = new v3d.LineHTML(new v3d.Color(color).convertSRGBToLinear(),\n                    width);\n            line.offset = offset;\n            line.elemHTML = elem;\n            obj.add(line);\n        }\n    }\n}\n    ')])+"("+n+", "+o+", "+r+", "+s+", "+i+", "+e+", '"+t+"');\n"}Blockly.Blocks.bindHTMLObject={init:function(){this.appendValueInput("ID").appendField("bind elem").setCheck("String");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.appendValueInput("OBJECTINPUT").appendField("to object").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip('Makes a specified HTML element follow the center of a specified 3D object in screen space.\n            The "in parent doc" checkbox should be enabled if the HTML element is located in an external HTML document\n            (in which Verge3D application\'s .html file is embedded using iframe).\n            A more customizable variant of the "add annotation" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#bind_element")}};Blockly.JavaScript.bindHTMLObject=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECTINPUT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",e=e.getField("PARENT"),e="TRUE"==(e=e?e.getValue():"FALSE");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("bindHTMLObject",["\n\n// bindHTMLObject puzzle\nfunction ".concat(BFUN$2,'(objName, id, isParent) {\n    if (!objName)\n        return;\n    var elem = getElement(id, isParent);\n    if (!elem)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n    var projected = new v3d.Vector3();\n    elem.style.top = 0;\n    elem.style.left = 0;\n    appInstance.renderCallbacks.push(function() {\n        appInstance.camera.updateMatrixWorld();\n        obj.getWorldPosition(projected).project(appInstance.camera);\n        projected.x = (0.5 + projected.x / 2) * appInstance.container.offsetWidth;\n        projected.y = (0.5 - projected.y / 2) * appInstance.container.offsetHeight;\n        elem.style.transform = "translate(" + projected.x + "px, " + projected.y + "px)";\n    });\n}\n    ')])+"("+t+", "+n+", "+e+");\n"};Blockly.Blocks.initFullscreen={init:function(){this.appendValueInput("ID").setCheck("String").appendField("init fullscreen for elem");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.appendStatementInput("DO_ENTER").appendField("on enter do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_EXIT").appendField("on exit do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_UNAVAIL").appendField("if unavailable do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setColour(COLOR_HTML);this.setTooltip('Makes a specified HTML element behave as a fullscreen mode button -\n            the first click on it triggers entering the fullscreen mode, the second click exits fullscreen.\n            Puzzles placed in the "on enter do" and "on exit do" slots are triggered upon entering or exiting the fullscreen mode.\n            Puzzles placed in the "if unavailable do" are triggered if fullscreen is not supported by the browser (e.g. iOS Safari).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#init_fullscreen")}};Blockly.JavaScript.initFullscreen=function(e){var t=Blockly.JavaScript.valueToCode(e,"ID",Blockly.JavaScript.ORDER_NONE)||"''",n=e.getField("PARENT"),o="TRUE"==(n?n.getValue():"FALSE"),i=Blockly.JavaScript.statementToCode(e,"DO_ENTER"),n=Blockly.JavaScript.statementToCode(e,"DO_EXIT"),e=Blockly.JavaScript.statementToCode(e,"DO_UNAVAIL");Blockly.JavaScript.provideFunction_("getHTMLElementCode",[runtimeChunks.getHTMLElement]);return Blockly.JavaScript.provideFunction_("initFullscreen",["\n// initFullscreen puzzle\nfunction ".concat(BFUN$2,'(id, isParent, cb_enter, cb_exit, cb_unavail) {\n    var elem = getElement(id, isParent);\n    if (!elem)\n        return;\n    var doc = isParent ? parent.document: document;\n    if (!(doc.fullscreenEnabled ||\n        doc.webkitFullscreenEnabled ||\n        doc.mozFullScreenEnabled ||\n        doc.msFullscreenEnabled)) {\n            cb_unavail();\n            return;\n    }\n    elem.addEventListener("click", function(event) {\n        event.stopPropagation();\n        if (doc.fullscreenElement ||\n            doc.webkitFullscreenElement ||\n            doc.mozFullScreenElement ||\n            doc.msFullscreenElement) {\n            exitFullscreen();\n        } else {\n            requestFullscreen(doc.body);\n        }\n    });\n    function changeFullscreen(event) {\n        if (doc.fullscreenElement ||\n            doc.webkitFullscreenElement ||\n            doc.mozFullScreenElement ||\n            doc.msFullscreenElement)\n            cb_enter(event);\n        else\n            cb_exit(event);\n    }\n    doc.addEventListener("webkitfullscreenchange", changeFullscreen);\n    doc.addEventListener("mozfullscreenchange", changeFullscreen);\n    doc.addEventListener("msfullscreenchange", changeFullscreen);\n    doc.addEventListener("fullscreenchange", changeFullscreen);\n    function requestFullscreen(fselem) {\n        if (fselem.requestFullscreen)\n            fselem.requestFullscreen();\n        else if (fselem.mozRequestFullScreen)\n            fselem.mozRequestFullScreen();\n        else if (fselem.webkitRequestFullscreen)\n            fselem.webkitRequestFullscreen();\n        else if (fselem.msRequestFullscreen)\n            fselem.msRequestFullscreen();\n    }\n    function exitFullscreen() {\n        if (doc.exitFullscreen)\n            doc.exitFullscreen();\n        else if (doc.mozCancelFullScreen)\n            doc.mozCancelFullScreen();\n        else if (doc.webkitExitFullscreen)\n            doc.webkitExitFullscreen();\n        else if (doc.msExitFullscreen)\n            doc.msExitFullscreen();\n    }\n}\n    ')])+"("+t+", "+o+", "+d(i)+", "+d(n)+", "+d(e)+");\n"};Blockly.Blocks.openWebPage={init:function(){this.appendDummyInput().appendField("open web page");this.appendValueInput("URL").setCheck("String");this.appendDummyInput().appendField("in").appendField(new BlocklyExt.Fields.Dropdown([["a new tab","NEW"],["the same tab","SAME"],["the same tab (ignore frames)","TOP"],["the same tab (parent frame)","PARENT"],["replace URL (no reload)","NO_RELOAD"]]),"MODE");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip("When this puzzle is triggered, a specified URL is opened\n            in a new or in the same browser tab depending on the drop-down selection.\n            When triggered from the Puzzles editor, it will ask for a user confirmation before leaving the tab.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#open_web_page")}};Blockly.JavaScript.openWebPage=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e="'"+e.getFieldValue("MODE")+"'";return Blockly.JavaScript.provideFunction_("openWebPage",["\n// openWebPage puzzle\nfunction ".concat(BFUN$2,'(url, mode) {\n\n    if (appInstance && appInstance.controls) {\n        appInstance.controls.forceMouseUp();\n    }\n\n    if (mode == "NEW") {\n        window.open(url);\n    } else if (mode == "NO_RELOAD") {\n        history.pushState(\'verge3d state\', \'verge3d page\', url);\n    } else {\n        var target;\n        switch (mode) {\n            case "SAME":\n                target = "_self";\n                break;\n            case "TOP":\n                target = "_top";\n                break;\n            case "PARENT":\n                target = "_parent";\n                break;\n        }\n        if (typeof window.PE != "undefined") {\n            if (window.confirm("Are you sure you want to leave Puzzles?"))\n                window.open(url, target);\n        } else {\n            window.open(url, target);\n        }\n    }\n}\n    ')])+"("+t+", "+e+");\n"};Blockly.Blocks.socialShareLink={init:function(){this.appendDummyInput().appendField("sharing link for").appendField(new BlocklyExt.Fields.Dropdown([["Twitter","TWITTER"],["Facebook","FB"],["Reddit","REDDIT"],["LinkedIn","LINKEDIN"],["VK","VK"],["Weibo","WEIBO"]]),"MEDIA");this.appendValueInput("TITLE").appendField("title").setCheck("String");this.appendValueInput("TEXT").appendField("text").setCheck("String");this.setOutput(!0,"String");this.setColour(COLOR_HTML);this.setTooltip("Generates a link for sharing your application in popular social media.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#social_share_link")}};Blockly.JavaScript.socialShareLink=function(e){var t="'"+e.getFieldValue("MEDIA")+"'",n=Blockly.JavaScript.valueToCode(e,"TITLE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("socialShareLink",["\n// socialShareLink puzzle\nfunction ".concat(BFUN$2,"(media, title, text) {\n\n    function fixedEncodeURIComponent(str) {\n        return encodeURIComponent(str).replace(/[!'()*]/g, function(c) {\n            return '%' + c.charCodeAt(0).toString(16);\n        });\n    }\n\n    switch(media) {\n    case 'TWITTER':\n        return 'https://twitter.com/intent/tweet?url=' +\n            fixedEncodeURIComponent(window.location.href) +\n            '&text=' + fixedEncodeURIComponent(title);\n    case 'FB':\n        return 'http://www.facebook.com/sharer.php?u=' +\n            fixedEncodeURIComponent(window.location.href);\n    case 'REDDIT':\n        return 'https://reddit.com/submit?url=' +\n            fixedEncodeURIComponent(window.location.href) +\n            '&title=' + fixedEncodeURIComponent(title);\n    case 'LINKEDIN':\n        return 'https://www.linkedin.com/shareArticle?mini=true&url=' +\n            fixedEncodeURIComponent(window.location.href) +\n             '&title=' + fixedEncodeURIComponent(title) +\n             '&summary=' + fixedEncodeURIComponent(text);\n    case 'VK':\n        return 'http://vk.com/share.php?url=' +\n            fixedEncodeURIComponent(window.location.href) +\n            '&title=' + fixedEncodeURIComponent(title) +\n            '&comment=' + fixedEncodeURIComponent(text);\n    case 'WEIBO':\n        return 'http://service.weibo.com/share/share.php?url=' +\n            fixedEncodeURIComponent(window.location.href) +\n            '&title=' + fixedEncodeURIComponent(title);\n    }\n}\n    ")])+"("+t+", "+n+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setUrlParam={init:function(){this.appendValueInput("URL").setCheck("String").appendField("set URL");this.appendValueInput("NAME").setCheck("String").appendField("param");this.appendValueInput("VALUE").setCheck("String").appendField("with value");this.setInputsInline(!0);this.setOutput(!0,"String");this.setColour(COLOR_HTML);this.setTooltip("Assigns or updates a value of a parameter in a specified URL\n            by automatically forming a valid query string if necessary,\n            and returns the updated URL.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#set_url_param")}};Blockly.JavaScript.setUrlParam=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"NAME",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("setUrlParam",["\n// setUrlParam puzzle\nfunction ".concat(BFUN$2,"(url, name, value) {\n\n    return v3d.AppUtils.updatePageParam(url, name, value);\n\n}\n    ")])+"(".concat(t,", ").concat(n,", ").concat(e,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getUrlData={init:function(){this.appendDummyInput().appendField("get URL data");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["Entire URL","URL"],["Parameters","PARAMS"],["Hostname","HOSTNAME"]]),"KIND");this.appendDummyInput().appendField("in parent doc").appendField(new Blockly.FieldCheckbox("FALSE"),"PARENT");this.setColour(COLOR_HTML);this.setInputsInline(!0);this.setOutput(!0,["String","Dictionary"]);this.setTooltip('Retrieves URL data of the window to which an application\n            is loaded. The "in parent doc" checkbox should be enabled if the window\n            of an external HTML document is required (in which Verge3D application\'s\n            .html file is embedded using iframe).');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#get_url_data")}};Blockly.JavaScript.getUrlData=function(e){var t="'"+e.getFieldValue("KIND")+"'",n="TRUE"===e.getField("PARENT").getValue(),e=Blockly.JavaScript.provideFunction_("getUrlData",["\n// getUrlData puzzle\nfunction ".concat(BFUN$2,"(kind, isParent) {\n\n    var targetWindow = isParent ? window.parent : window;\n    switch (kind) {\n    case 'URL':\n        return targetWindow.location.href;\n    case 'PARAMS':\n        return v3d.AppUtils.getPageParams(targetWindow);\n    case 'HOSTNAME':\n        return targetWindow.location.hostname;\n    default:\n        console.error('getUrlData: option does not exists.');\n        return '';\n    }\n\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.takeScreenshot={init:function(){this.appendDummyInput().appendField("take screenshot as").appendField(new BlocklyExt.Fields.Dropdown([["png","png"],["jpeg","jpeg"]]),"TYPE");this.setColour(COLOR_HTML);this.setOutput(!0,"String");this.setTooltip("Takes a screenshot of the viewport and outputs it in Data URI format.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#take_screenshot")}};Blockly.JavaScript.takeScreenshot=function(e){return["appInstance.renderer.domElement.toDataURL('image/"+e.getFieldValue("TYPE")+"')",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.downloadFile={init:function(){this.appendValueInput("CONTENTS").appendField("download file").setCheck(["String","Promise"]);this.appendValueInput("FILENAME").appendField("as").setCheck("String");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip("Downloads content specified in Data URI format to a file.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#download_file")}};Blockly.JavaScript.downloadFile=function(e){var t=Blockly.JavaScript.valueToCode(e,"CONTENTS",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"FILENAME",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("downloadFile",["\n\n// downloadFile puzzle\nfunction ".concat(BFUN$2,"(contents, filename) {\n    if (!filename)\n        return;\n\n    if (contents instanceof Promise) {\n\n        contents.then(function(response) {\n\n            doDownload(response, filename);\n\n        }, function(error) {});\n\n    } else {\n\n        doDownload(contents, filename);\n\n    }\n\n    function doDownload(contents, filename) {\n        var link = document.createElement('a');\n        link.href = contents;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n    }\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.openFile={init:function(){this.appendDummyInput().appendField("open file");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_HTML);this.setTooltip("Invokes the browser's native dialog window for selecting files from the user's device.\n            Once the user have selected a file, returns the file's contents in Data URI format.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#open_file")}};Blockly.JavaScript.openFile=function(e){e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("openFile",["\n// openFile puzzle\nfunction ".concat(BFUN$2,"(callback) {\n\n    _pGlob.openedFile = '';\n\n    var input = document.createElement('input');\n    input.type = 'file';\n    input.style = 'display: none';\n    // NOTE: fixes iOS event issue\n    document.body.appendChild(input);\n\n    input.addEventListener('change', function(event) {\n        var file = event.target.files[0];\n\n        var reader = new FileReader();\n\n        reader.addEventListener('load', function () {\n            _pGlob.openedFile = reader.result;\n            callback();\n            document.body.removeChild(input);\n        }, false);\n\n        reader.readAsDataURL(file);\n    });\n\n    if (appInstance.controls) {\n        appInstance.controls.forceMouseUp();\n    }\n\n    input.click();\n}\n    ")])+"("+d(e)+");\n"};Blockly.Blocks.openedFile={init:function(){this.appendDummyInput().appendField("opened file");this.setColour(COLOR_HTML);this.setOutput(!0,"String");this.setTooltip('Returns the contents of a file loaded with the "open file" puzzle in Data URI format.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/HTML.html#open_file")}};Blockly.JavaScript.openedFile=function(e){return["_pGlob.openedFile",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.checkVRMode={init:function(){this.appendDummyInput().appendField("check VR mode");this.appendStatementInput("DO_AVAIL").appendField("if available do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_UNAVAIL").appendField("if unavailable do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip('Check the virtual reality system.\n            If successful, the puzzles in the "if available do" are triggered.\n            Otherwise, if the browser does not support VR or VR hardware not found, the puzzles in the "if unavailable do" slot are triggered.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#check_vr_mode")}};Blockly.JavaScript.checkVRMode=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO_AVAIL"),e=Blockly.JavaScript.statementToCode(e,"DO_UNAVAIL");return Blockly.JavaScript.provideFunction_("checkVRMode",["\n// checkVRMode puzzle\nfunction ".concat(BFUN$2,"(availableCb, unAvailableCb) {\n    // COMPAT: < 2.13.1\n    if (v3d.Detector.checkWebXR)\n        v3d.Detector.checkWebXR('immersive-vr', availableCb, unAvailableCb);\n    else\n        appInstance.checkWebXR('immersive-vr', availableCb, unAvailableCb);\n}\n    ")])+"("+d(t)+", "+d(e)+");\n"};Blockly.Blocks.enterVRMode={init:function(){this.appendDummyInput().appendField("enter VR mode");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["looking around","ORIGIN"],["sitting or standing","SITTING"],["room","ROOM"],["walking","WALKING"],["viewer locked","VIEWER"]]),"REF_SPACE");this.appendStatementInput("DO_ENTER").appendField("on enter do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_EXIT").appendField("on exit do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_UNAVAIL").appendField("if unavailable do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip('Enters the virtual reality mode.\n            Puzzles placed in the "on enter do" and "on exit do" slots are triggered upon entering or exiting the VR mode.\n            Puzzles placed in the "if unavailable do" are triggered if a VR session could not be established.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#enter_vr_mode")}};Blockly.JavaScript.enterVRMode=function(e){var t="'"+e.getFieldValue("REF_SPACE")+"'",n=Blockly.JavaScript.statementToCode(e,"DO_ENTER"),o=Blockly.JavaScript.statementToCode(e,"DO_EXIT"),e=Blockly.JavaScript.statementToCode(e,"DO_UNAVAIL");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);Blockly.JavaScript.provideFunction_("xrUtilsCode",[runtimeChunks.xrUtils]);return Blockly.JavaScript.provideFunction_("enterVRMode",["\n// enterVRMode puzzle\nfunction ".concat(BFUN$2,"(refSpace, enterCb, exitCb, unAvailableCb) {\n\n    var DEFAULT_DEPTH = 10;\n\n    var _rayReticleDepth = [];\n    var _hoveredObjects = [];\n\n    function onControllerHover() {\n\n        var controllers = appInstance.xrControllers;\n\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n\n            var intersections = _pGlob.xrGetIntersections(controller);\n\n            if (intersections.length > 0) {\n                var intersection = intersections[0];\n                var obj = intersection.object;\n                _rayReticleDepth[i] = intersection.distance;\n            } else {\n                var obj = null;\n                _rayReticleDepth[i] = DEFAULT_DEPTH;\n            }\n\n            controller.children.forEach(function(child) {\n                if (child.name.indexOf('_RAY') > -1) {\n                    child.scale.z = _rayReticleDepth[i];\n                } else if (child.name.indexOf('_RETICLE') > -1) {\n                    // reduces crossing artefacts\n                    child.position.z = -0.95 * _rayReticleDepth[i];\n                }\n            });\n\n            var prevHovered = _hoveredObjects[i];\n            var currHovered = obj ? getPickedObjectName(obj) : '';\n\n            if (prevHovered == currHovered) {\n                continue;\n            }\n\n            // first - all \"out\" callbacks, then - all \"over\"\n            _pGlob.objHoverInfo.forEach(function(el) {\n                if (objectsIncludeObj(el.objNames, prevHovered)) {\n                    // ensure the correct value of the hoveredObject block\n                    _pGlob.hoveredObject = prevHovered;\n                    el.callbacks[1]();\n                }\n            });\n\n            _pGlob.objHoverInfo.forEach(function(el) {\n                if (objectsIncludeObj(el.objNames, currHovered)) {\n                    // ensure the correct value of the hoveredObject block\n                    _pGlob.hoveredObject = currHovered;\n                    el.callbacks[0]();\n                }\n            });\n\n            _hoveredObjects[i] = currHovered;\n        }\n    }\n\n    switch (refSpace) {\n        case 'SITTING':\n            var referenceSpace = 'local-floor';\n            break;\n        case 'WALKING':\n            var referenceSpace = 'unbounded';\n            break;\n        case 'ORIGIN':\n            var referenceSpace = 'local';\n            break;\n        case 'ROOM':\n            var referenceSpace = 'bounded-floor';\n            break;\n        case 'VIEWER':\n            var referenceSpace = 'viewer';\n            break;\n        default:\n            console.error('puzzles: Wrong VR reference space');\n            return;\n    }\n\n    appInstance.initWebXR('immersive-vr', referenceSpace, function() {\n\n        var controllers = appInstance.xrControllers;\n\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n\n            // clicks\n            controller.addEventListener('select', _pGlob.xrOnSelect);\n\n            _pGlob.xrSessionCallbacks.forEach(function(pair) {\n                controller.addEventListener(pair[0], pair[1]);\n            });\n        }\n\n        // hovers\n        if (_pGlob.objHoverInfo.length && appInstance.renderCallbacks.indexOf(onControllerHover) == -1)\n            appInstance.renderCallbacks.push(onControllerHover);\n\n        _pGlob.xrSessionAcquired = true;\n\n        enterCb();\n\n    }, unAvailableCb, function() {\n\n        var controllers = appInstance.xrControllers;\n\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n\n            controller.removeEventListener('select', _pGlob.xrOnSelect);\n\n            _pGlob.xrSessionCallbacks.forEach(function(pair) {\n                controller.removeEventListener(pair[0], pair[1]);\n            });\n        }\n\n        var cbIdx = appInstance.renderCallbacks.indexOf(onControllerHover);\n        if (cbIdx != -1)\n            appInstance.renderCallbacks.splice(cbIdx, 1);\n\n        _pGlob.xrSessionAcquired = false;\n\n        exitCb();\n    });\n}\n    ")])+"("+t+", "+d(n)+", "+d(o)+", "+d(e)+");\n"};Blockly.Blocks.endVRMode={init:function(){this.appendDummyInput().appendField("end VR session");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip("Ends a virtual reality session.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#end_vr_session")}};Blockly.JavaScript.endVRMode=function(e){return"appInstance.endWebXR();\n"};Blockly.Blocks.checkARMode={init:function(){this.appendDummyInput().appendField("check AR mode");this.appendStatementInput("DO_AVAIL").appendField("if available do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_UNAVAIL").appendField("if unavailable do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip('Check the augmented reality system.\n            If successful, the puzzles in the "if available do" are triggered.\n            Otherwise, if the browser does not support AR or AR hardware not found, the puzzles in the "if unavailable do" slot are triggered.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#check_ar_mode")}};Blockly.JavaScript.checkARMode=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO_AVAIL"),e=Blockly.JavaScript.statementToCode(e,"DO_UNAVAIL");return Blockly.JavaScript.provideFunction_("checkARMode",["\n// checkARMode puzzle\nfunction ".concat(BFUN$2,"(availableCb, unAvailableCb) {\n    // COMPAT: < 2.13.1\n    if (v3d.Detector.checkWebXR)\n        v3d.Detector.checkWebXR('immersive-ar', availableCb, unAvailableCb);\n    else\n        appInstance.checkWebXR('immersive-ar', availableCb, unAvailableCb);\n}\n    ")])+"("+d(t)+", "+d(e)+");\n"};Blockly.Blocks.enterARMode={init:function(){this.appendDummyInput().appendField("enter AR mode");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["looking around","ORIGIN"],["sitting or standing","SITTING"],["room","ROOM"],["walking","WALKING"],["viewer locked","VIEWER"]]),"REF_SPACE");this.appendStatementInput("DO_ENTER").appendField("on enter do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_EXIT").appendField("on exit do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_UNAVAIL").appendField("on failure do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip('Enter the augmented reality mode.\n            Puzzles placed in the "on enter do" and "on exit do" slots are triggered upon entering or exiting the AR mode.\n            Puzzles placed in the "if unavailable do" are triggered if an AR session could not be established.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#enter_ar_mode")}};Blockly.JavaScript.enterARMode=function(e){var t="'"+e.getFieldValue("REF_SPACE")+"'",n=Blockly.JavaScript.statementToCode(e,"DO_ENTER"),o=Blockly.JavaScript.statementToCode(e,"DO_EXIT"),i=Blockly.JavaScript.statementToCode(e,"DO_UNAVAIL");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);Blockly.JavaScript.provideFunction_("xrUtilsCode",[runtimeChunks.xrUtils]);e=Blockly.JavaScript.provideFunction_("enterARMode",["\n// enterARMode puzzle\nfunction ".concat(BFUN$2,"(refSpace, enterCb, exitCb, unAvailableCb) {\n\n    switch (refSpace) {\n        case 'SITTING':\n            var referenceSpace = 'local-floor';\n            break;\n        case 'WALKING':\n            var referenceSpace = 'unbounded';\n            break;\n        case 'ORIGIN':\n            var referenceSpace = 'local';\n            break;\n        case 'ROOM':\n            var referenceSpace = 'bounded-floor';\n            break;\n        case 'VIEWER':\n            var referenceSpace = 'viewer';\n            break;\n        default:\n            console.error('puzzles: Wrong VR reference space');\n            return;\n    }\n\n\n    appInstance.initWebXR('immersive-ar', referenceSpace, function() {\n\n        var controllers = appInstance.xrControllers;\n\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n\n            controller.addEventListener('select', _pGlob.xrOnSelect);\n\n            _pGlob.xrSessionCallbacks.forEach(function(pair) {\n                controller.addEventListener(pair[0], pair[1]);\n            });\n        }\n\n        _pGlob.xrSessionAcquired = true;\n\n        enterCb();\n\n    }, unAvailableCb, function() {\n\n        var controllers = appInstance.xrControllers;\n\n        for (var i = 0; i < controllers.length; i++) {\n            var controller = controllers[i];\n\n            controller.removeEventListener('select', _pGlob.xrOnSelect);\n\n            _pGlob.xrSessionCallbacks.forEach(function(pair) {\n                controller.removeEventListener(pair[0], pair[1]);\n            });\n        }\n\n        _pGlob.xrSessionAcquired = false;\n\n        exitCb();\n\n    });\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(d(n),", ").concat(d(o),", ")+"".concat(d(i),");\n")};Blockly.Blocks.arHitTest={init:function(){this.appendDummyInput().appendField("detect horizontal surface AR");this.appendValueInput("SMOOTH").appendField("smooth").setCheck(["Number"]);this.appendStatementInput("DO_HIT").appendField("on intersection do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_MISS").appendField("if missed do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip('Cast an imaginary ray from the camera to the center of the screen.\n            If the ray intersects a horizontal surface in the real world, the puzzles in the "on intersection do" slot are triggered.\n            Otherwise, the puzzles in the "on missed do" slot are triggered.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#ar_hit_test")}};Blockly.JavaScript.arHitTest=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO_HIT"),n=Blockly.JavaScript.statementToCode(e,"DO_MISS"),e=Blockly.JavaScript.valueToCode(e,"SMOOTH",Blockly.JavaScript.ORDER_NONE)||"0";return Blockly.JavaScript.provideFunction_("arHitTest",["\n// arHitTest puzzle\nfunction ".concat(BFUN$2,"(cbHit, cbMiss, smooth) {\n    appInstance.renderer.xr.arHitTest(0, 0, function(point) {\n\n        smooth = v3d.Math.clamp(smooth, 0, 1);\n\n        var x = point.x;\n        var y = point.y;\n        var z = point.z;\n\n        _pGlob.arHitPoint.x = _pGlob.arHitPoint.x * smooth + (1 - smooth) * x;\n        _pGlob.arHitPoint.y = _pGlob.arHitPoint.y * smooth + (1 - smooth) * y;\n        _pGlob.arHitPoint.z = _pGlob.arHitPoint.z * smooth + (1 - smooth) * z;\n\n        cbHit();\n    }, cbMiss);\n}\n    ")])+"("+d(t)+", "+d(n)+", "+e+");\n"};Blockly.Blocks.arHitPoint={init:function(){this.appendDummyInput().appendField("AR hit point").appendField(new BlocklyExt.Fields.Dropdown([["X","x"],["Y","y"],["Z","z"],["XYZ","xyz"]]),"COORD");this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(COLOR_VR);this.setTooltip("Retrieves position of the last AR hit point.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#ar_hit_point")}};Blockly.JavaScript.arHitPoint=function(e){e="'"+e.getFieldValue("COORD")+"'";Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);return[Blockly.JavaScript.provideFunction_("arHitPoint",["\n// arHitPoint puzzle\nfunction ".concat(BFUN$2,"(coord) {\n\n    var hitPoint = coordsTransform(_pGlob.vec3Tmp.copy(_pGlob.arHitPoint), 'Y_UP_RIGHT', getCoordSystem());\n\n    if (coord == 'xyz')\n        return hitPoint.toArray();\n    else\n        return hitPoint[coord];\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.xrSessionEvent={init:function(){this.appendDummyInput().appendField("on session event").appendField(new BlocklyExt.Fields.Dropdown([["select","select"],["selectstart","selectstart"],["selectend","selectend"],["squeeze","squeeze"],["squeezestart","squeezestart"],["squeezeend","squeezeend"],["connected","connected"],["disconnected","disconnected"]]),"EVENT");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip("Captures an AR/VR session event generated by a AN/VR device\n            (e.g. a headset or controller button)\n            and triggers puzzles specified in the *do* slot.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#session_event")}};Blockly.JavaScript.xrSessionEvent=function(e){var t="'"+e.getFieldValue("EVENT")+"'",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("xrSessionEvent",["\n// xrSessionEvent puzzle\nfunction ".concat(BFUN$2,"(eventType, callback) {\n\n    var eventHandler = function(event) {\n        var ctrlObj = event.target;\n        // set gamepad index to controller index\n        _pGlob.gamepadIndex = appInstance.xrControllers.indexOf(ctrlObj);\n        callback(event);\n    }\n\n    _pGlob.xrSessionCallbacks.push([eventType, eventHandler]);\n\n    // register controller event here if executed after XR session acquisition\n    if (_pGlob.xrSessionAcquired) {\n        appInstance.xrControllers.forEach(function(controller) {\n            controller.addEventListener(eventType, eventHandler);\n        });\n    }\n\n}\n    ")])+"("+t+", "+d(e,"event")+");\n"};Blockly.Blocks.traverseControllers={init:function(){this.appendDummyInput().appendField("traverse controllers");this.setInputsInline(!0);this.appendStatementInput("DO").appendField("do").setCheck(null);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_VR);this.setTooltip("Traverse VR controllers");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#traverse_controllers")}};Blockly.JavaScript.traverseControllers=function(e){e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("traverseControllers",["\n// traverseControllers puzzle\nfunction ".concat(BFUN$2,"(callback) {\n    if (_pGlob.xrSessionAcquired) {\n        for (var i = 0; i < appInstance.xrControllers.length; i++) {\n\n            var controller = appInstance.xrControllers[i];\n            var inputSource = _pGlob.getInputSource(controller);\n\n            if (controller && inputSource) {\n                _pGlob.gamepadIndex = i;\n                callback();\n            }\n        }\n    }\n}\n    ")])+"("+d(e)+");\n"};Blockly.Blocks.xrControllerProp={init:function(){this.appendDummyInput().appendField("get controller");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["object","OBJECT"],["ray/reticle","RAY_RETICLE"],["handedness","HANDEDNESS"],["target ray mode","TARGET_RAY_MODE"],["profiles","PROFILES"],["gamepad index","GAMEPAD_INDEX"]]),"PROPERTY");this.setOutput(!0,["Boolean","Number","String"]);this.setInputsInline(!0);this.setColour(COLOR_VR);this.setTooltip("Get controller property");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/AR_VR.html#get_controller_prop")}};Blockly.JavaScript.xrControllerProp=function(e){e="'"+e.getFieldValue("PROPERTY")+"'";return[Blockly.JavaScript.provideFunction_("xrControllerProp",["\n// xrControllerProp puzzle\nfunction ".concat(BFUN$2,"(prop) {\n\n    if (_pGlob.xrSessionAcquired) {\n        var controller = appInstance.xrControllers[_pGlob.gamepadIndex];\n        var inputSource = _pGlob.getInputSource(controller);\n    } else {\n        var controller = undefined;\n        var inputSource = undefined;\n    }\n\n    switch (prop) {\n    case 'OBJECT':\n        if (controller)\n            return controller.name;\n        else\n            return '';\n\n    case 'RAY_RETICLE':\n        if (controller && controller.children.length)\n            return controller.children[0].name;\n        else\n            return '';\n\n    case 'HANDEDNESS':\n        if (controller && inputSource)\n            return inputSource.handedness;\n        else\n            return '';\n\n    case 'TARGET_RAY_MODE':\n        if (controller && inputSource)\n            return inputSource.targetRayMode;\n        else\n            return '';\n\n    case 'PROFILES':\n        if (controller && inputSource)\n            return inputSource.profiles;\n        else\n            return [];\n\n    case 'GAMEPAD_INDEX':\n        if (controller && inputSource && inputSource.gamepad)\n            return _pGlob.gamepadIndex;\n        else\n            return 0;\n    }\n\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.loadSound={init:function(){var e=new Blockly.FieldTextInput("");e.setSpellcheck(!1);this.appendDummyInput().appendField(e,"URL");this.setColour(COLOR_SOUND_LOAD);this.setOutput(!0,"Sound");this.setTooltip("Loads an audio file using a specified URL. This puzzle\n            also adds the loaded audio to a memory cache so that any subsequent\n            uses of this puzzle with the same URL do not load the same audio\n            file again. Using .mp3 format is recommended as it is supported by\n            most web browsers.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#load_sound");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *sound* puzzle from the toolbox.")}};Blockly.JavaScript.loadSound=function(e){e=e.getFieldValue("URL");return e?[Blockly.JavaScript.provideFunction_("loadSound",["\n// loadSound puzzle\nfunction ".concat(BFUN$2,"(url) {\n    var elems = _pGlob.mediaElements;\n    if (!(url in elems)) {\n        elems[url] = new ").concat(Runtime.use("MediaHTML5"),"().load(url);\n    }\n    return elems[url];\n}\n    ")])+"('"+e+"')",Blockly.JavaScript.ORDER_FUNCTION_CALL]:null};Blockly.Blocks.loadSoundAdv={init:function(){this.appendValueInput("URL").appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-sound.svg",16,16,"*"));this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["music","MUSIC"],["sound","SOUND"]]),"TYPE");this.setColour(COLOR_SOUND_LOAD);this.setOutput(!0,"Sound");this.setTooltip('Loads an audio file using a specified URL. The type\n            ("music" or "sound") defines how the audio is handled internally.\n            See the Puzzles Manual for more information regarding the "type" option.\n            This puzzles also adds the loaded audio to a memory cache so that any subsequent\n            uses of this puzzle with the same URL do not load the same audio\n            file again. Using .mp3 format is recommended as it is supported by\n            most web browsers.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#load_sound")}};Blockly.JavaScript.loadSoundAdv=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",n=e.getFieldValue("TYPE"),o="loadMedia_".concat("MUSIC"===n?"HTML5":"WebAudio"),e="MUSIC"===n?Runtime.use("MediaHTML5"):Runtime.use("AudioWebAudio"),e=Blockly.JavaScript.provideFunction_(o,["\n// loadMedia puzzle\nfunction ".concat(BFUN$2,"(url) {\n    ").concat("SOUND"===n?"if (!v3d.Detector.checkWebAudio()) {\n        if (!_noWebAudioReported) {\n            _noWebAudioReported = true;\n            console.warn('v3d.puzzles: Web Audio API not supported');\n        }\n        return null;\n    }\n":"","\n    var elems = _pGlob.mediaElements;\n    if (!(url in elems)) {\n        elems[url] = new ").concat(e,"().load(url);\n    }\n    return elems[url];\n}\n    ")]);return["".concat(e,"(").concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.loadVideo={init:function(){this.appendValueInput("URL").appendField(new Blockly.FieldImage(getMediaDir(this)+"puzzle-video.svg",16,16,"*"));this.setColour(COLOR_SOUND_LOAD);this.setOutput(!0,"Video");this.setTooltip("Creates an HTML5 video element and loads a sound file using a specified URL.\n            This puzzle also adds the created video element to a memory cache so that\n            any subsequent uses of this puzzle with the same URL do not load the same sound file again.\n            Using .mp4 format is recommended as it is supported by most web browsers.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#load_video")}};Blockly.JavaScript.loadVideo=function(e){var t=Blockly.JavaScript.valueToCode(e,"URL",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("loadVideo",["\n// loadVideo puzzle\nfunction ".concat(BFUN$2,"(url) {\n    var elems = _pGlob.mediaElements;\n    if (!(url in elems)) {\n        elems[url] = new ").concat(Runtime.use("MediaHTML5"),"().load(url, true);\n    }\n    return elems[url];\n}\n    ")]);return["".concat(e,"(").concat(t,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.playSound={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("play");this.appendDummyInput().appendField("loop").appendField(new Blockly.FieldCheckbox("FALSE"),"LOOP");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Starts audio or video playback. The loop checkbox repeats playback if enabled.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#play")}};Blockly.JavaScript.playSound=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e="TRUE"==e.getFieldValue("LOOP");return Blockly.JavaScript.provideFunction_("playSound",["\n// playSound puzzle\nfunction ".concat(BFUN$2,"(mediaElem, loop) {\n    if (!mediaElem)\n        return;\n    mediaElem.setLoop(loop);\n    mediaElem.play();\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.pauseSound={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("pause");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Pauses audio or video playback.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#pause")}};Blockly.JavaScript.pauseSound=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("pauseSound",["\n// pauseSound puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem)\n        return;\n    mediaElem.pause();\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.stopSound={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("stop");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Stops audio or video playback (pause + rewind).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#stop")}};Blockly.JavaScript.stopSound=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("stopSound",["\n// stopSound puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem) {\n        return;\n    }\n    mediaElem.stop();\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.rewindSound={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("rewind");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Sets the audio/video to play from the start.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#rewind")}};Blockly.JavaScript.rewindSound=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("rewindSound",["\n// rewindSound puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem)\n        return;\n    mediaElem.rewind();\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.setPlaybackRate={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("set playback rate");this.appendValueInput("RATE").setCheck("Number").appendField("to");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Sets the audio/video playback rate.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#set_playback_rate")}};Blockly.JavaScript.setPlaybackRate=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"RATE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("setPlaybackRate",["\n// setPlaybackRate puzzle\nfunction ".concat(BFUN$2,"(mediaElem, rate) {\n    if (!mediaElem)\n        return;\n\n    rate = Number(rate);\n    if (Number.isNaN(rate)) {\n        return;\n    }\n\n    mediaElem.setPlaybackRate(rate);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,");\n")};Blockly.Blocks.isSoundPlaying={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("is playing");this.setOutput(!0,"Boolean");this.setColour(COLOR_SOUND);this.setTooltip("Checks if a sound or video is currently being played back.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#is_playing")}};Blockly.JavaScript.isSoundPlaying=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("isSoundPlaying",["\n// isSoundPlaying puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem)\n        return false;\n    return mediaElem.isPlaying();\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.volume={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("set volume");this.appendValueInput("VOLUME").setCheck("Number").appendField("to");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Sets the sound volume. Input volume is clamped to the 0.0-1.0 range.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#set_volume")}};Blockly.JavaScript.volume=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"VOLUME",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("volume",["\n// volume puzzle\nfunction ".concat(BFUN$2,"(mediaElem, volume) {\n    if (!mediaElem)\n        return;\n\n    volume = Number(volume);\n    if (Number.isNaN(volume)) {\n        return;\n    }\n\n    mediaElem.setVolume(v3d.Math.clamp(volume, 0.0, 1.0));\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.soundVideoMute={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("mute");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Mute audio or video");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#mute")}};Blockly.JavaScript.soundVideoMute=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("soundVideoMute",["\n// soundVideoMute puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem) {\n        return;\n    }\n    mediaElem.setMuted(true);\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.soundVideoUnmute={init:function(){this.appendValueInput("VALUE").setCheck(["Sound","Video"]).appendField("unmute");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SOUND);this.setTooltip("Unmute audio or video");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Sound.html#unmute")}};Blockly.JavaScript.soundVideoUnmute=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("soundVideoUnmute",["\n// soundVideoUnmute puzzle\nfunction ".concat(BFUN$2,"(mediaElem) {\n    if (!mediaElem) {\n        return;\n    }\n    mediaElem.setMuted(false);\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.createPhysicsWorld={init:function(){this.appendDummyInput().appendField("create physics world");this.appendValueInput("GRAVITY").appendField("with gravity").setCheck("Number");this.appendValueInput("FPS").appendField("and fps").setCheck("Number");this.appendDummyInput().appendField("soft body").appendField(new Blockly.FieldCheckbox("FALSE"),"SOFT_BODY");this.setInputsInline(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Create physics world.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#create_physics_world");h(this)}};function h(e){window.Ammo||e.setWarningText("Physics module not found!")}Blockly.JavaScript.createPhysicsWorld=function(e){var t=Blockly.JavaScript.valueToCode(e,"GRAVITY",Blockly.JavaScript.ORDER_NONE)||"0",n=Blockly.JavaScript.valueToCode(e,"FPS",Blockly.JavaScript.ORDER_NONE)||"120",e="TRUE"==e.getField("SOFT_BODY").getValue();Blockly.JavaScript.provideFunction_("initObjectPickingCode",[runtimeChunks.initObjectPicking]);return"\n// createPhysicsWorld puzzle\n\n// TEMPORARY MEASURE TO PREVENT CRASH [TODO]\nif (window.Ammo) {\n\nvar CF_STATIC_OBJECT = 1;\nvar CF_KINEMATIC_OBJECT = 2;\nvar CF_NO_CONTACT_RESPONSE = 4;\n\nvar ACTIVE_TAG = 1;\nvar ISLAND_SLEEPING = 2;\nvar DISABLE_DEACTIVATION = 4;\nvar DISABLE_SIMULATION = 5;\n\nvar RO_XYZ = 0;\n\n// collision filter groups\nvar DefaultFilter = 1;\nvar StaticFilter = 2;\nvar KinematicFilter = 4;\nvar DebrisFilter = 8;\nvar SensorTrigger = 16;\nvar CharacterFilter = 32;\nvar AllFilter = -1;\n\nif (".concat(e,") {\n\n    _pPhysics.collisionConfiguration = new Ammo.btSoftBodyRigidBodyCollisionConfiguration();\n    _pPhysics.dispatcher = new Ammo.btCollisionDispatcher(_pPhysics.collisionConfiguration);\n    _pPhysics.broadphase = new Ammo.btDbvtBroadphase();\n    _pPhysics.solver = new Ammo.btSequentialImpulseConstraintSolver();\n    _pPhysics.softBodySolver = new Ammo.btDefaultSoftBodySolver();\n    _pPhysics.world = new Ammo.btSoftRigidDynamicsWorld(_pPhysics.dispatcher, _pPhysics.broadphase,\n            _pPhysics.solver, _pPhysics.collisionConfiguration, _pPhysics.softBodySolver);\n    _pPhysics.world.getWorldInfo().set_m_gravity(new Ammo.btVector3(0, -").concat(t,", 0));\n\n    _pPhysics.softBodyHelpers = new Ammo.btSoftBodyHelpers();\n\n} else {\n\n    _pPhysics.collisionConfiguration = new Ammo.btDefaultCollisionConfiguration();\n    _pPhysics.dispatcher = new Ammo.btCollisionDispatcher(_pPhysics.collisionConfiguration);\n    _pPhysics.broadphase = new Ammo.btDbvtBroadphase();\n    _pPhysics.solver = new Ammo.btSequentialImpulseConstraintSolver();\n    _pPhysics.world = new Ammo.btDiscreteDynamicsWorld(_pPhysics.dispatcher, _pPhysics.broadphase,\n            _pPhysics.solver, _pPhysics.collisionConfiguration);\n\n}\n\n_pPhysics.world.setGravity( new Ammo.btVector3( 0, -").concat(t,", 0 ) );\n_pPhysics.fps = ").concat(n,";\n_pPhysics.transTmp = new Ammo.btTransform();\n_pPhysics.transTmp2 = new Ammo.btTransform();\n\n// external physics interface\nif (v3d.PL) {\n    v3d.PL.physics = v3d.PL.physics || {};\n    v3d.PL.physics.world = _pPhysics.world;\n    v3d.PL.physics.bodies = {};\n    v3d.PL.physics.constraints = {};\n    v3d.PL.physics.addToSyncList = function(obj, body, type) {\n        _pPhysics.syncList.push({\n            obj: obj,\n            body: body,\n            type: type,\n            simulated: true,\n            mass: (body.getInvMass() !==0) ? 1.0/body.getInvMass() : 0\n        });\n        v3d.PL.physics.bodies[obj.name] = body;\n    }\n    v3d.PL.physics.removeFromSyncList = function(obj, body) {\n        _pPhysics.findRemovePhysicsBody(obj);\n        delete v3d.PL.physics.bodies[obj.name];\n    }\n}\n\nfunction tick(dt) {\n\n    var DISTANCE_EPSILON = 0.000001;\n\n    if (_pPhysics.collisionData.length) {\n\n        var numManifolds = _pPhysics.world.getDispatcher().getNumManifolds();\n\n        for (var i = 0; i < numManifolds; i++) {\n            var contactManifold = _pPhysics.world.getDispatcher().getManifoldByIndexInternal(i);\n\n            var bodyA = Ammo.castObject(contactManifold.getBody0(), Ammo.btRigidBody);\n            var bodyB = Ammo.castObject(contactManifold.getBody1(), Ammo.btRigidBody);\n\n            var collDataMatch = null;\n            var objsSwapped = false;\n\n            for (var j = 0; j < _pPhysics.collisionData.length; j++) {\n                var cd = _pPhysics.collisionData[j];\n\n                if (cd.bodyA == bodyA && cd.bodyB == bodyB) {\n                    collDataMatch = cd;\n                    break;\n                }\n\n                if (cd.bodyA == bodyB && cd.bodyB == bodyA) {\n                    collDataMatch = cd;\n                    objsSwapped = true;\n                    break;\n                }\n            }\n\n            if (!collDataMatch)\n                continue;\n\n            var numContacts = contactManifold.getNumContacts();\n\n            for (var j = 0; j < numContacts; j++) {\n                var pt = contactManifold.getContactPoint(j);\n\n                if (pt.getDistance() < DISTANCE_EPSILON) {\n                    var ptA = pt.getPositionWorldOnA();\n                    var ptB = pt.getPositionWorldOnB();\n                    var noB = pt.get_m_normalWorldOnB();\n\n                    _pPhysics.collisionInfo.objectA = collDataMatch.objA ? getPickedObjectName(collDataMatch.objA) : '';\n                    _pPhysics.collisionInfo.objectB = collDataMatch.objB ? getPickedObjectName(collDataMatch.objB) : '';\n\n                    _pPhysics.collisionInfo.distance = pt.getDistance();\n\n                    if (!objsSwapped) {\n                        _pPhysics.collisionInfo.positionOnA[0] = ptA.x();\n                        _pPhysics.collisionInfo.positionOnA[1] = ptA.y();\n                        _pPhysics.collisionInfo.positionOnA[2] = ptA.z();\n\n                        _pPhysics.collisionInfo.positionOnB[0] = ptB.x();\n                        _pPhysics.collisionInfo.positionOnB[1] = ptB.y();\n                        _pPhysics.collisionInfo.positionOnB[2] = ptB.z();\n\n                        _pPhysics.collisionInfo.normalOnB[0] = noB.x();\n                        _pPhysics.collisionInfo.normalOnB[1] = noB.y();\n                        _pPhysics.collisionInfo.normalOnB[2] = noB.z();\n                    } else {\n                        _pPhysics.collisionInfo.positionOnA[0] = ptB.x();\n                        _pPhysics.collisionInfo.positionOnA[1] = ptB.y();\n                        _pPhysics.collisionInfo.positionOnA[2] = ptB.z();\n\n                        _pPhysics.collisionInfo.positionOnB[0] = ptA.x();\n                        _pPhysics.collisionInfo.positionOnB[1] = ptA.y();\n                        _pPhysics.collisionInfo.positionOnB[2] = ptA.z();\n\n                        _pPhysics.collisionInfo.normalOnB[0] = -noB.x();\n                        _pPhysics.collisionInfo.normalOnB[1] = -noB.y();\n                        _pPhysics.collisionInfo.normalOnB[2] = -noB.z();\n                    }\n\n                    collDataMatch.collideCb();\n\n                    // mark as collided all collision data from the same exec instance\n                    for (var k = 0; k < _pPhysics.collisionData.length; k++) {\n                        var cd = _pPhysics.collisionData[k];\n                        if (cd.execInstanceID == collDataMatch.execInstanceID) {\n                            cd.collideFlag = true;\n                        }\n                    }\n                }\n            }\n        }\n\n        for (var i = 0; i < _pPhysics.collisionData.length; i++) {\n            var cd = _pPhysics.collisionData[i];\n\n            if (!cd.collideFlag) {\n                _pPhysics.collisionInfo.objectA = '';\n                _pPhysics.collisionInfo.objectB = '';\n\n                _pPhysics.collisionInfo.distance = 0;\n\n                _pPhysics.collisionInfo.positionOnA[0] = 0;\n                _pPhysics.collisionInfo.positionOnA[1] = 0;\n                _pPhysics.collisionInfo.positionOnA[2] = 0;\n\n                _pPhysics.collisionInfo.positionOnB[0] = 0;\n                _pPhysics.collisionInfo.positionOnB[1] = 0;\n                _pPhysics.collisionInfo.positionOnB[2] = 0;\n\n                _pPhysics.collisionInfo.normalOnB[0] = 0;\n                _pPhysics.collisionInfo.normalOnB[1] = 0;\n                _pPhysics.collisionInfo.normalOnB[2] = 0;\n\n                cd.noCollideCb();\n\n                // no need to process other collision data from the same exec instance\n                for (var j = i+1; j < _pPhysics.collisionData.length; j++) {\n                    var cdj = _pPhysics.collisionData[j];\n                    if (cdj.execInstanceID == cd.execInstanceID) {\n                        cdj.collideFlag = true;\n                    }\n                }\n            }\n\n            cd.collideFlag = false;\n        }\n    }\n\n    _pPhysics.world.stepSimulation(dt, 10, 1/").concat(n,");\n\n    // sync physics and graphics\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData = _pPhysics.syncList[i];\n        if (!syncData.simulated)\n            continue;\n\n        var body = syncData.body;\n\n        if (syncData.type == 'SOFT_BODY') {\n\n            var geometry = syncData.obj.geometry;\n            var volumePositions = geometry.attributes.position.array;\n            var volumeNormals = geometry.ammoNeedNormals ? geometry.attributes.normal.array : null;\n\n            var association = geometry.ammoIndexAssociation;\n            var numVerts = association.length;\n            var nodes = body.get_m_nodes();\n\n            for (var j = 0; j < numVerts; j++) {\n\n                var node = nodes.at(j);\n\n                var nodePos = node.get_m_x();\n                var x = nodePos.x();\n                var y = nodePos.y();\n                var z = nodePos.z();\n\n                if (volumeNormals) {\n                    var nodeNormal = node.get_m_n();\n                    var nx = nodeNormal.x();\n                    var ny = nodeNormal.y();\n                    var nz = nodeNormal.z();\n                }\n\n                var assocVertex = association[j];\n\n                for (var k = 0, kl = assocVertex.length; k < kl; k++) {\n\n                    var indexVertex = assocVertex[k];\n                    volumePositions[indexVertex] = x;\n                    if (volumeNormals)\n                        volumeNormals[indexVertex] = nx;\n\n                    indexVertex++;\n                    volumePositions[indexVertex] = y;\n                    if (volumeNormals)\n                        volumeNormals[indexVertex] = ny;\n\n                    indexVertex++;\n                    volumePositions[indexVertex] = z;\n                    if (volumeNormals)\n                        volumeNormals[indexVertex] = nz;\n\n                }\n\n            }\n\n            geometry.attributes.position.needsUpdate = true;\n            if (volumeNormals)\n                geometry.attributes.normal.needsUpdate = true;\n\n            if (geometry.attributes.previous) {\n                v3d.MeshLine.updateAttributes(geometry);\n            }\n\n        } else if (!body.isStaticOrKinematicObject()) {\n            var ms = body.getMotionState();\n            if (ms) {\n                ms.getWorldTransform(_pPhysics.transTmp);\n                var p = _pPhysics.transTmp.getOrigin();\n                var q = _pPhysics.transTmp.getRotation();\n                // dynamic objects can't be parented to something\n                syncData.obj.position.set(p.x(), p.y(), p.z());\n                syncData.obj.quaternion.set(q.x(), q.y(), q.z(), q.w());\n            }\n\n        } else if (body.isKinematicObject()) {\n\n            var pos = syncData.obj.getWorldPosition(_pGlob.vec3Tmp);\n            var quat = syncData.obj.getWorldQuaternion(_pGlob.quatTmp);\n\n            _pPhysics.transTmp.setIdentity();\n            _pPhysics.transTmp.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));\n            _pPhysics.transTmp.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n\n            body.setWorldTransform(_pPhysics.transTmp);\n\n            // needed to calculate interpolated velocity\n            body.getMotionState().setWorldTransform(_pPhysics.transTmp);\n\n        }\n    }\n\n}\n\nappInstance.renderCallbacks.push(tick);\n\n// END OF TEMPORARY MEASURE TO PREVENT CRASH [TODO]\n}\n\n    ")};Blockly.Blocks.createPhysicsBody={init:function(){this.appendDummyInput().appendField("create rigid body").appendField(new BlocklyExt.Fields.Dropdown([["dynamic","DYNAMIC"],["kinematic","KINEMATIC"],["static","STATIC"],["ghost","GHOST"]]),"TYPE");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("from object");this.appendDummyInput().appendField("with shape").appendField(new BlocklyExt.Fields.Dropdown([["box","BOX"],["sphere","SPHERE"],["mesh","MESH"],["capsule","CAPSULE"],["cone","CONE"],["cylinder","CYLINDER"],["empty","EMPTY"]]),"SHAPE");this.appendValueInput("MASS").setCheck("Number").appendField("mass");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Create physics body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#create_rigid_body");h(this);var t=this.onchange;"function"==typeof t?this.setOnChange(function(e){t.call(this,e);this.updateShape_()}):this.setOnChange(function(e){this.updateShape_()})},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("body_type",this.getFieldValue("TYPE"));return e},domToMutation:function(e){e=e.getAttribute("body_type");this.updateShape_(e)},updateShape_:function(e){"DYNAMIC"!=(e=e||this.getFieldValue("TYPE"))||this.getInput("MASS")?"DYNAMIC"!=e&&this.getInput("MASS")&&this.removeInput("MASS"):updateShadowBlockStr(this.appendValueInput("MASS").setCheck("Number").appendField("mass"),'\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            ')}};Blockly.JavaScript.createPhysicsBody=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",o="'"+e.getFieldValue("SHAPE")+"'",e=Blockly.JavaScript.valueToCode(e,"MASS",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("physicsUtilsCode",[runtimeChunks.physicsUtils]);return Blockly.JavaScript.provideFunction_("createPhysicsBody",["\n// createPhysicsBody puzzle\nfunction ".concat(BFUN$2,"(type, objNames, shape, mass) {\n\n    if (!window.Ammo)\n        return;\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        _pPhysics.findRemovePhysicsBody(obj);\n\n        switch (shape) {\n        case 'BOX':\n        case 'CAPSULE':\n        case 'CONE':\n        case 'CYLINDER':\n\n            var box = new v3d.Box3();\n\n            obj.resolveMultiMaterial().forEach(function(objR) {\n                if (objR.geometry) {\n                    if (objR.geometry.boundingBox == null)\n                        objR.geometry.computeBoundingBox();\n\n                    box.union(objR.geometry.boundingBox);\n                }\n            });\n\n            var size = box.getSize(new v3d.Vector3());\n\n            // do not allow empty-sized shapes\n            size.x = size.x || 0.5;\n            size.y = size.y || 0.5;\n            size.z = size.z || 0.5;\n\n            if (shape == 'BOX') {\n                var geometry = new Ammo.btBoxShape(new Ammo.btVector3(\n                        size.x * 0.5, size.y * 0.5, size.z * 0.5));\n            } else if (shape == 'CAPSULE') {\n                var radius = Math.max(size.x, size.z) * 0.5;\n                var height = size.y - 2 * radius;\n                var geometry = new Ammo.btCapsuleShape(radius, height);\n            } else if (shape == 'CONE') {\n                var radius = Math.max(size.x, size.z) * 0.5;\n                var height = size.y;\n                var geometry = new Ammo.btConeShape(radius, height);\n            } else {\n                var geometry = new Ammo.btCylinderShape(new Ammo.btVector3(\n                        size.x * 0.5, size.y * 0.5, size.z * 0.5));\n            }\n\n            break;\n        case 'SPHERE':\n\n            var sphere = new v3d.Sphere();\n\n            obj.resolveMultiMaterial().forEach(function(objR) {\n\n                if (objR.geometry) {\n                    if (objR.geometry.boundingSphere === null)\n                        objR.geometry.computeBoundingSphere();\n\n                    sphere.union(objR.geometry.boundingSphere);\n                }\n            });\n\n            var geometry = new Ammo.btSphereShape(sphere.radius || 0.5);\n\n            break;\n        case 'MESH':\n\n            var objsR = obj.resolveMultiMaterial();\n\n            if (!objsR[0].geometry || !objsR[0].isMesh) {\n                console.error('create rigid body: incorrect mesh object');\n                var geometry = new Ammo.btEmptyShape();\n                break;\n            }\n\n            // allow complex triangle shapes for KINEMATIC objects\n            if (type == 'DYNAMIC' || type == 'GHOST') {\n\n                var geometry = new Ammo.btConvexHullShape();\n\n                objsR.forEach(function(objR) {\n                    var positions = objR.geometry.attributes.position.array;\n\n                    for (var i = 0; i < positions.length; i+=3) {\n                        var x = positions[i];\n                        var y = positions[i+1];\n                        var z = positions[i+2];\n\n                        var v = new Ammo.btVector3(x, y, z);\n\n                        geometry.addPoint(v);\n\n                        Ammo.destroy(v);\n                    }\n                });\n\n            } else {\n\n                var triIdxVertArray = new Ammo.btTriangleMesh();\n\n                objsR.forEach(function(objR) {\n                    var positions = objR.geometry.attributes.position.array;\n                    var indices = objR.geometry.index.array;\n\n                    for (var i = 0; i < indices.length; i+=3) {\n\n                        var i1 = indices[i];\n                        var i2 = indices[i+1];\n                        var i3 = indices[i+2];\n\n                        var v1 = new Ammo.btVector3(positions[3*i1], positions[3*i1+1], positions[3*i1+2]);\n                        var v2 = new Ammo.btVector3(positions[3*i2], positions[3*i2+1], positions[3*i2+2]);\n                        var v3 = new Ammo.btVector3(positions[3*i3], positions[3*i3+1], positions[3*i3+2]);\n\n                        triIdxVertArray.addTriangle(v1, v2, v3, false);\n\n                        Ammo.destroy(v1);\n                        Ammo.destroy(v2);\n                        Ammo.destroy(v3);\n                    }\n                });\n\n                var geometry = new Ammo.btBvhTriangleMeshShape(triIdxVertArray, true);\n\n            }\n\n            break;\n        case 'EMPTY':\n            var geometry = new Ammo.btEmptyShape();\n            break;\n        }\n\n        var pos = obj.getWorldPosition(_pGlob.vec3Tmp);\n        var quat = obj.getWorldQuaternion(_pGlob.quatTmp);\n\n        var transform = new Ammo.btTransform();\n        transform.setIdentity();\n        transform.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));\n        transform.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n        var motionState = new Ammo.btDefaultMotionState(transform);\n\n        if (type == 'STATIC' || type == 'KINEMATIC' || type == 'GHOST')\n            var bodyMass = 0;\n        else\n            var bodyMass = mass;\n\n        var localInertia = new Ammo.btVector3(0, 0, 0);\n        geometry.calculateLocalInertia(bodyMass, localInertia);\n\n        var rbInfo = new Ammo.btRigidBodyConstructionInfo(bodyMass, motionState, geometry, localInertia);\n        var body = new Ammo.btRigidBody(rbInfo);\n\n        // CF_STATIC_OBJECT is set automatically\n\n        if (type == 'KINEMATIC' || type == 'GHOST') {\n            body.setCollisionFlags(body.getCollisionFlags() | CF_KINEMATIC_OBJECT);\n            body.setActivationState(DISABLE_DEACTIVATION);\n        }\n\n        if (type == 'GHOST') {\n\n            body.setCollisionFlags(body.getCollisionFlags() | CF_NO_CONTACT_RESPONSE);\n            _pPhysics.world.addRigidBody(body, SensorTrigger, AllFilter);\n\n        } else {\n\n            _pPhysics.world.addRigidBody(body);\n\n        }\n\n\n        //body.setDamping(0.1, 0.1);\n\n        _pPhysics.syncList.push({\n            obj: obj,\n            body: body,\n            type: type,\n            simulated: true,\n            mass: mass\n        });\n\n        // external physics interface\n        if (v3d.PL) {\n            v3d.PL.physics.bodies[objName] = body;\n        }\n    });\n\n\n}\n    ")])+"("+t+", "+n+", "+o+", "+e+");\n"};Blockly.Blocks.createSoftBody={init:function(){this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("create soft body from object");this.appendDummyInput().appendField("with shape").appendField(new BlocklyExt.Fields.Dropdown([["volume","VOLUME"],["rope","ROPE"],["patch","PATCH"]]),"SHAPE");this.appendValueInput("MASS").setCheck("Number").appendField("mass");this.appendValueInput("PRESSURE").setCheck("Number").appendField("pressure");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Create soft body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#create_soft_body");h(this);var t=this.onchange;"function"==typeof t?this.setOnChange(function(e){t.call(this,e);this.updateShape_()}):this.setOnChange(function(e){this.updateShape_()})},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("body_shape",this.getFieldValue("SHAPE"));return e},domToMutation:function(e){e=e.getAttribute("body_shape");this.updateShape_(e)},updateShape_:function(e){"VOLUME"!=(e=e||this.getFieldValue("SHAPE"))||this.getInput("PRESSURE")?"VOLUME"!=e&&this.getInput("PRESSURE")&&this.removeInput("PRESSURE"):updateShadowBlockStr(this.appendValueInput("PRESSURE").setCheck("Number").appendField("pressure"),'\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            ')}};Blockly.JavaScript.createSoftBody=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",n="'"+e.getFieldValue("SHAPE")+"'",o=Blockly.JavaScript.valueToCode(e,"MASS",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(e,"PRESSURE",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("physicsUtilsCode",[runtimeChunks.physicsUtils]);e=Blockly.JavaScript.provideFunction_("createSoftBody",["\n// createSoftBody puzzle\nfunction ".concat(BFUN$2,"(objNames, shape, mass, pressure) {\n\n    if (!window.Ammo)\n        return;\n\n    if (!_pPhysics.softBodyHelpers) {\n        console.error('create soft body: please activate soft body on the physics world');\n        return;\n    }\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n\n    function processGeometry(bufGeometry) {\n\n        // Ony consider the position values when merging the vertices\n        var posOnlyBufGeometry = new v3d.BufferGeometry();\n        posOnlyBufGeometry.setAttribute('position', bufGeometry.getAttribute('position'));\n        posOnlyBufGeometry.setIndex(bufGeometry.getIndex());\n\n        // Merge the vertices so the triangle soup is converted to indexed triangles\n        var indexedBufferGeom = v3d.BufferGeometryUtils.mergeVertices(posOnlyBufGeometry);\n\n        // Create index arrays mapping the indexed vertices to bufGeometry vertices\n        mapIndices(bufGeometry, indexedBufferGeom);\n\n    }\n\n    function isEqual(x1, y1, z1, x2, y2, z2) {\n\n        //var delta = 0.000001;\n        var delta = 0.001;\n        return Math.abs(x2 - x1) < delta &&\n        Math.abs(y2 - y1) < delta &&\n        Math.abs(z2 - z1) < delta;\n\n    }\n\n    function mapIndices(bufGeometry, indexedBufferGeom) {\n\n        // Creates ammoVertices, ammoIndices and ammoIndexAssociation in bufGeometry\n\n        var vertices = bufGeometry.attributes.position.array;\n        var idxVertices = indexedBufferGeom.attributes.position.array;\n        var indices = indexedBufferGeom.index.array;\n\n        var numIdxVertices = idxVertices.length / 3;\n        var numVertices = vertices.length / 3;\n\n        bufGeometry.ammoVertices = idxVertices;\n        bufGeometry.ammoIndices = indices;\n        bufGeometry.ammoIndexAssociation = [];\n\n        for (var i = 0; i < numIdxVertices; i++) {\n\n            var association = [];\n            bufGeometry.ammoIndexAssociation.push(association);\n\n            var i3 = i * 3;\n\n            for (var j = 0; j < numVertices; j ++) {\n\n                var j3 = j * 3;\n                if (isEqual(idxVertices[i3], idxVertices[i3 + 1], idxVertices[i3 + 2],\n                        vertices[j3], vertices[j3 + 1], vertices[j3 + 2])) {\n\n                    association.push(j3);\n\n                }\n\n            }\n\n        }\n\n    }\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        _pPhysics.findRemovePhysicsBody(obj);\n\n        var bufferGeom = obj.geometry;\n\n        if (shape == 'ROPE') {\n            mapIndices(bufferGeom, obj.userData.originalLineGeom);\n\n            bufferGeom.ammoNeedNormals = false;\n\n            var nodes = bufferGeom.ammoVertices;\n            var nNodes = nodes.length / 3;\n\n            var softBody = new Ammo.btSoftBody(_pPhysics.world.getWorldInfo());\n\n            for (var i = 0; i < nNodes; i++) {\n                softBody.appendNode(new Ammo.btVector3(nodes[3*i], nodes[3*i+1], nodes[3*i+2]), 1.0);\n            }\n\n            for (var i = 1; i < nNodes; i++) {\n                softBody.appendLink(i-1, i, false);\n            }\n\n            var sbConfig = softBody.get_m_cfg();\n            sbConfig.set_viterations(10);\n            sbConfig.set_piterations(10);\n\n        } else if (shape == 'PATCH') {\n            processGeometry(bufferGeom);\n\n            bufferGeom.ammoNeedNormals = true;\n\n            var ammoVertices = bufferGeom.ammoVertices;\n            var softBody = new Ammo.btSoftBody(_pPhysics.world.getWorldInfo());\n\n            for (var i = 0; i < ammoVertices.length / 3; i++) {\n                softBody.appendNode(new Ammo.btVector3(ammoVertices[3*i], ammoVertices[3*i+1], ammoVertices[3*i+2]), 1.0);\n            }\n\n            var ammoVertices = bufferGeom.ammoVertices;\n            var ammoIndices = bufferGeom.ammoIndices;\n\n            for (var i = 0; i < ammoIndices.length; i+=3) {\n                var ind0 = ammoIndices[i];\n                var ind1 = ammoIndices[i+1];\n                var ind2 = ammoIndices[i+2];\n\n                softBody.appendLink(ind0, ind1, false);\n                softBody.appendLink(ind0, ind2, false);\n                softBody.appendLink(ind1, ind2, false);\n\n                softBody.appendFace(ind0, ind1, ind2);\n            }\n\n            var sbConfig = softBody.get_m_cfg();\n            sbConfig.set_viterations(10);\n            sbConfig.set_piterations(10);\n\n            // Soft-soft and soft-rigid collisions\n            sbConfig.set_collisions(0x11);\n\n        } else {\n            processGeometry(bufferGeom);\n\n            bufferGeom.ammoNeedNormals = true;\n\n            var softBody = _pPhysics.softBodyHelpers.CreateFromTriMesh(\n                  _pPhysics.world.getWorldInfo(),\n                  bufferGeom.ammoVertices,\n                  bufferGeom.ammoIndices,\n                  bufferGeom.ammoIndices.length / 3,\n                  true);\n\n            var sbConfig = softBody.get_m_cfg();\n            sbConfig.set_viterations(40);\n            sbConfig.set_piterations(40);\n\n            // Soft-soft and soft-rigid collisions\n            sbConfig.set_collisions(0x11);\n\n            // Friction\n            sbConfig.set_kDF(0.1);\n\n            // Damping\n            sbConfig.set_kDP(0.01);\n\n            // Pressure\n            sbConfig.set_kPR(pressure);\n\n            // Stiffness\n            softBody.get_m_materials().at(0).set_m_kLST(0.9);\n            softBody.get_m_materials().at(0).set_m_kAST(0.9);\n        }\n\n        softBody.setTotalMass(mass, false);\n\n        var margin = 0.05;\n        Ammo.castObject(softBody, Ammo.btCollisionObject).getCollisionShape().setMargin(margin);\n\n\n        // apply and reset initial object transform\n\n        var pos = obj.getWorldPosition(_pGlob.vec3Tmp);\n        var quat = obj.getWorldQuaternion(_pGlob.quatTmp);\n\n        _pPhysics.transTmp.setIdentity();\n        _pPhysics.transTmp.setOrigin(new Ammo.btVector3(pos.x, pos.y, pos.z));\n        _pPhysics.transTmp.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n\n        softBody.transform(_pPhysics.transTmp);\n\n        obj.position.set(0, 0, 0);\n        obj.quaternion.set(0, 0, 0, 1);\n\n        _pPhysics.world.addSoftBody(softBody, 1, -1);\n\n        _pPhysics.syncList.push({\n            obj: obj,\n            body: softBody,\n            type: 'SOFT_BODY',\n            simulated: true,\n            mass: mass\n        });\n\n        // external physics interface\n        if (v3d.PL) {\n            v3d.PL.physics.bodies[objName] = softBody;\n        }\n\n    });\n\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,");\n")};Blockly.Blocks.removePhysicsBody={init:function(){this.appendDummyInput().appendField("remove physics body");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("from object");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Remove physics body from the given object.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#remove_physics_body");h(this)}};Blockly.JavaScript.removePhysicsBody=function(e){e=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("physicsUtilsCode",[runtimeChunks.physicsUtils]);return Blockly.JavaScript.provideFunction_("removePhysicsBody",["\n// removePhysicsBody puzzle\nfunction ".concat(BFUN$2,"(objNames) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        _pPhysics.findRemovePhysicsBody(obj);\n\n    });\n\n}\n    ")])+"("+e+");\n"};Blockly.Blocks.physicsBodyApplyParam={init:function(){this.appendDummyInput().appendField("apply").appendField(new BlocklyExt.Fields.Dropdown([["angular damping","ANGULAR_DAMPING"],["angular factor","ANGULAR_FACTOR"],["angular velocity","ANGULAR_VELOCITY"],["force","FORCE"],["friction","FRICTION"],["gravity","GRAVITY"],["impulse","IMPULSE"],["linear damping","LINEAR_DAMPING"],["linear factor","LINEAR_FACTOR"],["linear velocity","LINEAR_VELOCITY"],["position","POSITION"],["restitution","RESTITUTION"],["stiffness","STIFFNESS"],["torque","TORQUE"],["torque impulse","TORQUE_IMPULSE"]]),"TYPE");this.appendValueInput("PARAM").setCheck(["Number","Array"]).appendField("");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("to body");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Apply parameter (vector or value) to a physics body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#apply_body_param");h(this);function t(e){var t=this.getFieldValue("TYPE"),n=this.getInput("PARAM");switch(t){case"ANGULAR_DAMPING":case"FRICTION":case"LINEAR_DAMPING":case"RESTITUTION":case"STIFFNESS":n.setCheck("Number");break;case"GRAVITY":n.setCheck(["Number","Array"]);break;default:n.setCheck("Array")}}var n=this.onchange;"function"==typeof n?this.setOnChange(function(e){n.call(this,e);t.call(this,e)}):this.setOnChange(t)}};Blockly.JavaScript.physicsBodyApplyParam=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"PARAM",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("physicsBodyApplyParam",["\n// physicsBodyApplyParam puzzle\nfunction ".concat(BFUN$2,"(type, objNames, param) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    if (Array.isArray(param)) {\n        var vec = _pGlob.vec3Tmp.fromArray(param);\n        var noSignChange = (type == 'LINEAR_FACTOR' || type == 'ANGULAR_FACTOR');\n        coordsTransform(vec, getCoordSystem(), 'Y_UP_RIGHT', noSignChange);\n    }\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        var btVec;\n\n        for (var i = 0; i < _pPhysics.syncList.length; i++) {\n            var syncData = _pPhysics.syncList[i];\n\n            if (syncData.obj == obj) {\n\n                var body = syncData.body;\n\n                if (Array.isArray(param))\n                    btVec = new Ammo.btVector3(vec.x, vec.y, vec.z);\n                else if (type == 'GRAVITY')\n                    btVec = new Ammo.btVector3(0, 0, 0);\n\n                switch (type) {\n                case 'ANGULAR_DAMPING':\n                    body.setDamping(body.getLinearDamping(), param);\n                    break;\n                case 'ANGULAR_FACTOR':\n                    body.setAngularFactor(btVec);\n                    break;\n                case 'ANGULAR_VELOCITY':\n                    body.setAngularVelocity(btVec);\n                    break;\n                case 'FORCE':\n                    body.applyCentralForce(btVec);\n                    break;\n                case 'FRICTION':\n                    if (syncData.type != 'SOFT_BODY') {\n                        body.setFriction(param);\n                    } else {\n                        var sbConfig = body.get_m_cfg();\n                        sbConfig.set_kDF(param);\n                    }\n                    break;\n                case 'GRAVITY':\n                    if (Array.isArray(param)) {\n                        body.setGravity(btVec);\n                    } else {\n                        btVec.setY(-param);\n                        body.setGravity(btVec);\n                    }\n                    break;\n                case 'IMPULSE':\n                    body.applyCentralImpulse(btVec);\n                    break;\n                case 'LINEAR_DAMPING':\n                    if (syncData.type != 'SOFT_BODY') {\n                        body.setDamping(param, body.getAngularDamping());\n                    } else {\n                        var sbConfig = body.get_m_cfg();\n                        sbConfig.set_kDP(param);\n                    }\n                    break;\n                case 'LINEAR_FACTOR':\n                    body.setLinearFactor(btVec);\n                    break;\n                case 'LINEAR_VELOCITY':\n                    body.setLinearVelocity(btVec);\n                    break;\n                case 'POSITION':\n                    _pPhysics.transTmp.setIdentity();\n                    _pPhysics.transTmp.setOrigin(btVec);\n\n                    var quat = obj.quaternion;\n                    _pPhysics.transTmp.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n\n                    body.setWorldTransform(_pPhysics.transTmp);\n                    break;\n                case 'RESTITUTION':\n                    body.setRestitution(param);\n                    break;\n                case 'STIFFNESS':\n                    if (syncData.type == 'SOFT_BODY') {\n                        body.get_m_materials().at(0).set_m_kLST(param);\n                        body.get_m_materials().at(0).set_m_kAST(param);\n                    } else {\n                        console.error('apply body param: Stiffness param is not applicable for rigid bodies');\n                    }\n                    break;\n                case 'TORQUE':\n                    body.applyTorque(btVec);\n                    break;\n                case 'TORQUE_IMPULSE':\n                    body.applyTorqueImpulse(btVec);\n                    break;\n                }\n\n                if (btVec)\n                    Ammo.destroy(btVec);\n            }\n        }\n\n    });\n\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.physicsBodyGetParam={init:function(){this.appendDummyInput().appendField("get").appendField(new BlocklyExt.Fields.Dropdown([["angular damping","ANGULAR_DAMPING"],["angular factor","ANGULAR_FACTOR"],["angular velocity","ANGULAR_VELOCITY"],["friction","FRICTION"],["force","FORCE"],["gravity","GRAVITY"],["linear damping","LINEAR_DAMPING"],["linear factor","LINEAR_FACTOR"],["linear velocity","LINEAR_VELOCITY"],["position","POSITION"],["restitution","RESTITUTION"],["stiffness","STIFFNESS"],["torque","TORQUE"]]),"TYPE");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("from body");this.setInputsInline(!0);this.setOutput(!0,["Number","Array"]);this.setColour(COLOR_PHYSICS);this.setTooltip("Get parameter (vector or value) from a physics body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#get_body_param");h(this)}};Blockly.JavaScript.physicsBodyGetParam=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.valueToCode(e,"PARAM",Blockly.JavaScript.ORDER_NONE);Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("physicsBodyGetParam",["\n// physicsBodyGetParam puzzle\nfunction ".concat(BFUN$2,"(type, objName) {\n    if (!objName)\n        return;\n    var obj = getObjectByName(objName);\n    if (!obj)\n        return;\n\n    var btVec = null;\n    var param = 0;\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData = _pPhysics.syncList[i];\n\n        if (syncData.obj == obj) {\n\n            switch (type) {\n            case 'ANGULAR_DAMPING':\n                param = syncData.body.getAngularDamping();\n                break;\n            case 'ANGULAR_FACTOR':\n                btVec = syncData.body.getAngularFactor();\n                break;\n            case 'ANGULAR_VELOCITY':\n                btVec = syncData.body.getAngularVelocity();\n                break;\n            case 'FORCE':\n                btVec = syncData.body.getTotalForce();\n                break;\n            case 'FRICTION':\n                param = syncData.body.getFriction(param);\n                break;\n            case 'GRAVITY':\n                btVec = syncData.body.getGravity();\n                break;\n            case 'LINEAR_DAMPING':\n                param = syncData.body.getLinearDamping();\n                break;\n            case 'LINEAR_FACTOR':\n                btVec = syncData.body.getLinearFactor();\n                break;\n            case 'LINEAR_VELOCITY':\n                btVec = syncData.body.getLinearVelocity();\n                break;\n            case 'POSITION':\n                var ms = syncData.body.getMotionState();\n                ms.getWorldTransform(_pPhysics.transTmp);\n                btVec = _pPhysics.transTmp.getOrigin();\n                break;\n            case 'RESTITUTION':\n                param = syncData.body.getRestitution(param);\n                break;\n            case 'STIFFNESS':\n                if (syncData.type == 'SOFT_BODY')\n                    param = syncData.body.get_m_materials().at(0).get_m_kLST(param);\n                else\n                    console.error('get body param: Stiffness param is not applicable for rigid bodies');\n                break;\n            case 'TORQUE':\n                btVec = syncData.body.getTotalTorque();\n                break;\n            }\n\n            if (btVec) {\n                var vec = _pGlob.vec3Tmp.set(btVec.x(), btVec.y(), btVec.z());\n                var noSignChange = (type == 'LINEAR_FACTOR' || type == 'ANGULAR_FACTOR');\n                return coordsTransform(vec, 'Y_UP_RIGHT', getCoordSystem(), noSignChange).toArray();\n            } else {\n                return param;\n            }\n        }\n    }\n\n}\n    ")]);return["".concat(e,"(").concat(t,", ").concat(n,")"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.physicsBodyParams={init:function(){this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("physics body params");this.appendValueInput("FRICTION").setCheck("Number").appendField("friction");this.appendValueInput("LINEAR_DAMPING").setCheck("Number").appendField("linear damping");this.appendValueInput("ANGULAR_DAMPING").setCheck("Number").appendField("angular damping");this.appendValueInput("RESTITUTION").setCheck("Number").appendField("restitution");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Set various physics parameters on the body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#physics_body_params");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *apply param* puzzle from the toolbox.")}};Blockly.JavaScript.physicsBodyParams=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"FRICTION",Blockly.JavaScript.ORDER_NONE)||"0.5",o=Blockly.JavaScript.valueToCode(e,"LINEAR_DAMPING",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(e,"ANGULAR_DAMPING",Blockly.JavaScript.ORDER_NONE)||"0",e=Blockly.JavaScript.valueToCode(e,"RESTITUTION",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("physicsBodyParams",["\n// physicsBodyParams puzzle\nfunction ".concat(BFUN$2,"(objNames, friction, linearDamping, angularDamping, restitution) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        for (var i = 0; i < _pPhysics.syncList.length; i++) {\n            var syncData = _pPhysics.syncList[i];\n\n            if (syncData.obj == obj) {\n                syncData.body.setFriction(friction);\n                syncData.body.setDamping(linearDamping, angularDamping);\n                syncData.body.setRestitution(restitution);\n            }\n        }\n\n    });\n\n\n}\n    ")])+"("+t+", "+n+", "+o+", "+i+", "+e+");\n"};Blockly.Blocks.physicsApplyVector={init:function(){this.appendDummyInput().appendField("apply").appendField(new BlocklyExt.Fields.Dropdown([["force","FORCE"],["gravity","GRAVITY"],["linear velocity","LINEAR_VELOCITY"],["angular velocity","ANGULAR_VELOCITY"],["impulse","IMPULSE"],["torque","TORQUE"],["torque impulse","TORQUE_IMPULSE"],["linear factor","LINEAR_FACTOR"],["angular factor","ANGULAR_FACTOR"],["position","POSITION"]]),"TYPE");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]).appendField("to body");this.appendValueInput("X").setCheck("Number").appendField("x");this.appendValueInput("Y").setCheck("Number").appendField("y");this.appendValueInput("Z").setCheck("Number").appendField("z");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Apply vector to physics body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#apply_vector");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *apply param* puzzle from the toolbox.")}};Blockly.JavaScript.physicsApplyVector=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"X",Blockly.JavaScript.ORDER_NONE)||"0",i=Blockly.JavaScript.valueToCode(e,"Y",Blockly.JavaScript.ORDER_NONE)||"0",e=Blockly.JavaScript.valueToCode(e,"Z",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);return Blockly.JavaScript.provideFunction_("physicsApplyVector",["\n// physicsApplyVector puzzle\nfunction ".concat(BFUN$2,"(type, objNames, x, y, z) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    var vec = _pGlob.vec3Tmp.set(x, y, z);\n\n    var noSignChange = (type == 'LINEAR_FACTOR' || type == 'ANGULAR_FACTOR');\n    coordsTransform(vec, getCoordSystem(), 'Y_UP_RIGHT', noSignChange);\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        for (var i = 0; i < _pPhysics.syncList.length; i++) {\n            var syncData = _pPhysics.syncList[i];\n\n            if (syncData.obj == obj) {\n\n                var btVec = new Ammo.btVector3(vec.x, vec.y, vec.z);\n\n                switch (type) {\n                case 'FORCE':\n                    syncData.body.applyCentralForce(btVec);\n                    break;\n                case 'GRAVITY':\n                    syncData.body.setGravity(btVec);\n                    break;\n                case 'LINEAR_VELOCITY':\n                    syncData.body.setLinearVelocity(btVec);\n                    break;\n                case 'ANGULAR_VELOCITY':\n                    syncData.body.setAngularVelocity(btVec);\n                    break;\n                case 'IMPULSE':\n                    syncData.body.applyCentralImpulse(btVec);\n                    break;\n                case 'TORQUE':\n                    syncData.body.applyTorque(btVec);\n                    break;\n                case 'TORQUE_IMPULSE':\n                    syncData.body.applyTorqueImpulse(btVec);\n                    break;\n                case 'LINEAR_FACTOR':\n                    syncData.body.setLinearFactor(btVec);\n                    break;\n                case 'ANGULAR_FACTOR':\n                    syncData.body.setAngularFactor(btVec);\n                    break;\n                case 'POSITION':\n                    _pPhysics.transTmp.setIdentity();\n                    _pPhysics.transTmp.setOrigin(btVec);\n\n                    var quat = obj.quaternion;\n                    _pPhysics.transTmp.setRotation(new Ammo.btQuaternion(quat.x, quat.y, quat.z, quat.w));\n\n                    syncData.body.setWorldTransform(_pPhysics.transTmp);\n\n                    break;\n                }\n\n                Ammo.destroy(btVec);\n            }\n        }\n\n    });\n\n\n}\n    ")])+"("+t+", "+n+", "+o+", "+i+", "+e+");\n"};Blockly.Blocks.setBodyState={init:function(){this.appendDummyInput().appendField("body");this.appendValueInput("OBJECT").setCheck(["Object3D","String","Array"]);this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["activate","ACTIVATE"],["sleep","SLEEP"],["enable simulation","ENABLE_SIMULATION"],["disable simulation","DISABLE_SIMULATION"],["reset","RESET"],["enable contact response","ENABLE_CONTACT_RESP"],["disable contact response","DISABLE_CONTACT_RESP"],["make dynamic","MAKE_DYNAMIC"],["make kinematic","MAKE_KINEMATIC"],["make static","MAKE_STATIC"],["enable deactivation","ENABLE_DEACTIVATION"],["disable deactivation","DISABLE_DEACTIVATION"]]),"NEW_STATE");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Apply state change to physics body.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#set_body_state");h(this)}};Blockly.JavaScript.setBodyState=function(e){var t="'"+e.getFieldValue("NEW_STATE")+"'",e=Blockly.JavaScript.valueToCode(e,"OBJECT",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("setBodyState",["\n// setBodyState puzzle\nfunction ".concat(BFUN$2,"(newState, objNames) {\n\n    objNames = retrieveObjectNames(objNames);\n    if (!objNames)\n        return;\n\n    objNames.forEach(function(objName) {\n        if (!objName)\n            return;\n\n        var obj = getObjectByName(objName);\n        if (!obj)\n            return;\n\n        for (var i = 0; i < _pPhysics.syncList.length; i++) {\n            var syncData = _pPhysics.syncList[i];\n\n            if (syncData.obj == obj) {\n\n                var body = syncData.body;\n\n                switch (newState) {\n                case 'ACTIVATE':\n                    body.activate();\n                    break;\n                case 'SLEEP':\n                    body.setActivationState(ISLAND_SLEEPING);\n                    break;\n                case 'ENABLE_SIMULATION':\n                    body.setCollisionFlags(body.getCollisionFlags() & ~CF_NO_CONTACT_RESPONSE);\n                    body.forceActivationState(ACTIVE_TAG);\n                    body.activate();\n\n                    _pPhysics.setObjToBodyTransform(syncData.obj, body);\n\n                    syncData.simulated = true;\n                    break;\n                case 'DISABLE_SIMULATION':\n                    body.setCollisionFlags(body.getCollisionFlags() | CF_NO_CONTACT_RESPONSE);\n                    body.forceActivationState(DISABLE_SIMULATION);\n                    syncData.simulated = false;\n                    break;\n                case 'RESET':\n                    _pPhysics.resetBody(body);\n                    break;\n                case 'ENABLE_CONTACT_RESP':\n                    body.setCollisionFlags(body.getCollisionFlags() & ~CF_NO_CONTACT_RESPONSE);\n                    break;\n                case 'DISABLE_CONTACT_RESP':\n                    body.setCollisionFlags(body.getCollisionFlags() | CF_NO_CONTACT_RESPONSE);\n                    break;\n                case 'MAKE_DYNAMIC':\n                    body.setCollisionFlags(body.getCollisionFlags() & ~CF_KINEMATIC_OBJECT);\n                    body.setCollisionFlags(body.getCollisionFlags() & ~CF_STATIC_OBJECT);\n\n                    var localInertia = new Ammo.btVector3(0, 0, 0);\n                    body.getCollisionShape().calculateLocalInertia(syncData.mass, localInertia);\n                    body.setMassProps(syncData.mass, localInertia);\n\n                    // enable deactivation\n                    body.forceActivationState(ACTIVE_TAG);\n                    body.activate();\n\n                    break;\n                case 'MAKE_KINEMATIC':\n                    body.setCollisionFlags(body.getCollisionFlags() | CF_KINEMATIC_OBJECT);\n                    body.setActivationState(DISABLE_DEACTIVATION);\n                    break;\n                case 'MAKE_STATIC':\n                    body.setCollisionFlags(body.getCollisionFlags() | CF_STATIC_OBJECT);\n                    break;\n                case 'ENABLE_DEACTIVATION':\n                    body.forceActivationState(ACTIVE_TAG);\n                    break;\n                case 'DISABLE_DEACTIVATION':\n                    body.setActivationState(DISABLE_DEACTIVATION);\n                    break;\n                }\n\n                // add / remove\n\n            }\n\n        }\n\n    });\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.snapBody={init:function(){this.appendValueInput("SNAPWHAT").appendField("snap body").setCheck(["Object3D","String"]);this.appendValueInput("SNAPTO").appendField("to object").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip('Moves a body to the position of another object\n            by copying its transform data. Also copies rotation.\n            Does not work with lists, groups or the "all objects" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#snap_body");h(this)}};Blockly.JavaScript.snapBody=function(e){var t=Blockly.JavaScript.valueToCode(e,"SNAPWHAT",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"SNAPTO",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("snapBody",["\n// snapBody puzzle\nfunction ".concat(BFUN$2,"(objName, targetObjName) {\n    if (!objName || !targetObjName)\n        return;\n\n    var obj = getObjectByName(objName);\n    var targetObj = getObjectByName(targetObjName);\n    if (!obj || !targetObj)\n        return;\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData = _pPhysics.syncList[i];\n\n        if (syncData.obj == obj) {\n\n            // snap verge3d object itself\n            obj.copyTransform(targetObj);\n\n            _pPhysics.setObjToBodyTransform(obj, syncData.body);\n\n        }\n    }\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.addPhysicsConstraint={init:function(){this.appendValueInput("OBJ1").appendField("add constraint to").setCheck(["Object3D","String"]);this.appendValueInput("OBJ2").appendField("and").setCheck(["Object3D","String"]);this.appendDummyInput().appendField("of type").appendField(new BlocklyExt.Fields.Dropdown([["hinge","HINGE"],["ball","BALL"],["slider","SLIDER"],["spring","SPRING"],["fixed","FIXED"]]),"TYPE");this.appendValueInput("PIVOT").appendField("with pivot").setCheck("Array");this.appendValueInput("AXIS").appendField("axis").setCheck("Array");this.appendValueInput("STIFFNESS").appendField("stiffness").setCheck("Number");this.appendValueInput("DAMPING").appendField("damping").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Add constraint between two physics bodies.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#add_physics_constraint");h(this);var t=this.onchange;"function"==typeof t?this.setOnChange(function(e){t.call(this,e);this.updateShape_()}):this.setOnChange(function(e){this.updateShape_()})},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("block_type",this.getFieldValue("TYPE"));return e},domToMutation:function(e){e=e.getAttribute("block_type");this.updateShape_(e)},updateShape_:function(e){"FIXED"==(e=e||this.getFieldValue("TYPE"))||this.getInput("PIVOT")?"FIXED"==e&&this.getInput("PIVOT")&&this.removeInput("PIVOT"):this.appendValueInput("PIVOT").appendField("with pivot").setCheck("Array");"HINGE"!=e||this.getInput("AXIS")?"HINGE"!=e&&this.getInput("AXIS")&&this.removeInput("AXIS"):this.appendValueInput("AXIS").appendField("axis").setCheck("Array");"SPRING"!=e||this.getInput("STIFFNESS")?"SPRING"!=e&&this.getInput("STIFFNESS")&&this.removeInput("STIFFNESS"):updateShadowBlockStr(this.appendValueInput("STIFFNESS").appendField("stiffness").setCheck("Number"),'\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            ');"SPRING"!=e||this.getInput("DAMPING")?"SPRING"!=e&&this.getInput("DAMPING")&&this.removeInput("DAMPING"):updateShadowBlockStr(this.appendValueInput("DAMPING").appendField("damping").setCheck("Number"),'\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            ')}};Blockly.JavaScript.addPhysicsConstraint=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ1",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"OBJ2",Blockly.JavaScript.ORDER_NONE)||"''",o="'"+e.getFieldValue("TYPE")+"'",i=Blockly.JavaScript.valueToCode(e,"PIVOT",Blockly.JavaScript.ORDER_NONE)||"[0, 0, 0]",r=Blockly.JavaScript.valueToCode(e,"AXIS",Blockly.JavaScript.ORDER_NONE)||"[0, 0, 0]",s=Blockly.JavaScript.valueToCode(e,"STIFFNESS",Blockly.JavaScript.ORDER_NONE)||"[0, 0, 0]",a=Blockly.JavaScript.valueToCode(e,"DAMPING",Blockly.JavaScript.ORDER_NONE)||"[0, 0, 0]";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);Blockly.JavaScript.provideFunction_("physicsUtilsCode",[runtimeChunks.physicsUtils]);e=Blockly.JavaScript.provideFunction_("addPhysicsConstraint",["\n// addPhysicsConstraint puzzle\nfunction ".concat(BFUN$2,"(obj1, obj2, type, pivot, axis, stiffness, damping) {\n    if (!obj1 || !obj2)\n        return;\n\n    var obj1 = getObjectByName(obj1);\n    var obj2 = getObjectByName(obj2);\n    if (!obj1 || !obj2)\n        return;\n\n    _pPhysics.findRemovePhysicsConstraint(obj1, obj2);\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData1 = _pPhysics.syncList[i];\n\n        if (syncData1.obj == obj1) {\n            for (var j = 0; j < _pPhysics.syncList.length; j++) {\n                var syncData2 = _pPhysics.syncList[j];\n\n                if (syncData2.obj == obj2) {\n\n                    var pivot1 = _pGlob.vec3Tmp.fromArray(pivot);\n                    pivot1 = coordsTransform(pivot1, getCoordSystem(), 'Y_UP_RIGHT');\n\n                    var pivot2 = _pGlob.vec3Tmp2.copy(pivot1)\n\n                    obj1.worldToLocal(pivot1);\n                    obj2.worldToLocal(pivot2);\n\n                    var btPivot1 = new Ammo.btVector3(pivot1.x, pivot1.y, pivot1.z);\n                    var btPivot2 = new Ammo.btVector3(pivot2.x, pivot2.y, pivot2.z);\n\n                    var axis1 = _pGlob.vec3Tmp.fromArray(axis);\n                    axis1 = coordsTransform(axis1, getCoordSystem(), 'Y_UP_RIGHT');\n\n                    var axis2 = _pGlob.vec3Tmp2.copy(axis1)\n\n                    axis1 = axis1.applyMatrix4(_pGlob.mat4Tmp.copy(obj1.matrixWorld).transpose());\n                    axis2 = axis2.applyMatrix4(_pGlob.mat4Tmp.copy(obj2.matrixWorld).transpose());\n\n                    var btAxis1 = new Ammo.btVector3(axis1.x, axis1.y, axis1.z);\n                    var btAxis2 = new Ammo.btVector3(axis2.x, axis2.y, axis2.z);\n\n                    var body1 = syncData1.body;\n                    var body2 = syncData2.body;\n\n                    switch (type) {\n                        case 'HINGE':\n                            var cons = new Ammo.btHingeConstraint(body1, body2, btPivot1, btPivot2, btAxis1, btAxis2, true);\n                            break;\n                        case 'BALL':\n                            var cons = new Ammo.btPoint2PointConstraint(body1, body2, btPivot1, btPivot2);\n                            break;\n                        case 'SLIDER':\n                            var trans1 = _pPhysics.transTmp;\n                            trans1.setIdentity();\n                            trans1.setOrigin(btPivot1);\n\n                            var trans2 = _pPhysics.transTmp2;\n                            trans2.setIdentity();\n                            trans2.setOrigin(btPivot2);\n\n                            var cons = new Ammo.btSliderConstraint(body1, body2, trans1, trans2, true);\n                            break;\n\n                        case 'SPRING':\n                            var trans1 = _pPhysics.transTmp;\n                            trans1.setIdentity();\n                            trans1.setOrigin(btPivot1);\n\n                            var trans2 = _pPhysics.transTmp2;\n                            trans2.setIdentity();\n                            trans2.setOrigin(btPivot2);\n\n                            var cons = new Ammo.btGeneric6DofSpringConstraint(body1, body2, trans1, trans2, true);\n\n                            // no limits\n                            cons.setLinearUpperLimit(new Ammo.btVector3(-1.0, -1.0, -1.0));\n                            cons.setLinearLowerLimit(new Ammo.btVector3(1.0, 1.0, 1.0));\n\n                            // no rotation\n                            cons.setAngularLowerLimit(new Ammo.btVector3(0.0, 0.0, 0));\n                            cons.setAngularUpperLimit(new Ammo.btVector3(0.0, 0.0, 0));\n\n                            cons.enableSpring(0, true);\n                            cons.enableSpring(1, true);\n                            cons.enableSpring(2, true);\n                            cons.setStiffness(0, stiffness);\n                            cons.setStiffness(1, stiffness);\n                            cons.setStiffness(2, stiffness);\n                            cons.setDamping(0, damping);\n                            cons.setDamping(1, damping);\n                            cons.setDamping(2, damping);\n\n                            cons.setEquilibriumPoint();\n\n                            break;\n\n                        case 'FIXED':\n                            var trans1 = _pPhysics.transTmp;\n                            var transMat = _pGlob.mat4Tmp.getInverse(obj1.matrixWorld).multiply(obj2.matrixWorld);\n                            trans1.setFromOpenGLMatrix(transMat.elements);\n\n                            var trans2 = _pPhysics.transTmp2;\n                            trans2.setIdentity();\n\n                            var cons = new Ammo.btFixedConstraint(body1, body2, trans1, trans2);\n                            break;\n                    }\n\n                    _pPhysics.world.addConstraint(cons, true);\n\n                    _pPhysics.consList.push({\n                        cons: cons,\n                        obj1: obj1,\n                        obj2: obj2,\n                        body1: body1,\n                        body2: body2\n                    });\n\n                    if (v3d.PL) {\n                        v3d.PL.physics.constraints[obj1.name] = v3d.PL.physics.constraints[obj1.name] || {};\n                        v3d.PL.physics.constraints[obj1.name][obj2.name] = cons;\n                    }\n\n                }\n            }\n        }\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,", ").concat(r,", ").concat(s,", ").concat(a,");\n")};Blockly.Blocks.removePhysicsConstraint={init:function(){this.appendValueInput("OBJ1").appendField("remove constraint from").setCheck(["Object3D","String"]);this.appendValueInput("OBJ2").appendField("and").setCheck(["Object3D","String"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Remove body constraint between two physics bodies.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#remove_physics_constraint");h(this)}};Blockly.JavaScript.removePhysicsConstraint=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJ1",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"OBJ2",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("physicsUtilsCode",[runtimeChunks.physicsUtils]);e=Blockly.JavaScript.provideFunction_("removePhysicsConstraint",["\n// removePhysicsConstraint puzzle\nfunction ".concat(BFUN$2,"(obj1, obj2) {\n    if (!obj1 || !obj2)\n        return;\n\n    var obj1 = getObjectByName(obj1);\n    var obj2 = getObjectByName(obj2);\n    if (!obj1 || !obj2)\n        return;\n\n    _pPhysics.findRemovePhysicsConstraint(obj1, obj2);\n\n    if (v3d.PL) {\n        if (v3d.PL.physics.constraints[obj1.name] && v3d.PL.physics.constraints[obj1.name][obj2.name])\n            delete v3d.PL.physics.constraints[obj1.name][obj2.name];\n    }\n\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,");\n")};Blockly.Blocks.softBodyAnchor={init:function(){this.appendValueInput("ANCHORWHAT").appendField("anchor soft body").setCheck(["Object3D","String"]);this.appendValueInput("ANCHORTO").appendField("to body").setCheck(["Object3D","String"]);this.appendValueInput("AT").appendField("at").setCheck(["Array","Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip("Append soft body anchor to the rigid body passed as a second parameter.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#soft_body_anchor");h(this)}};Blockly.JavaScript.softBodyAnchor=function(e){var t=Blockly.JavaScript.valueToCode(e,"ANCHORWHAT",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"ANCHORTO",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"AT",Blockly.JavaScript.ORDER_NONE)||"0";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);Blockly.JavaScript.provideFunction_("coordsTransformCode",[coordsTransformCode()]);e=Blockly.JavaScript.provideFunction_("softBodyAnchor",["\n// softBodyAnchor puzzle\nfunction ".concat(BFUN$2,"(objName, targetObjName, at) {\n    if (!objName || !targetObjName)\n        return;\n\n    var obj = getObjectByName(objName);\n    var targetObj = getObjectByName(targetObjName);\n    if (!obj || !targetObj)\n        return;\n\n    for (var i = 0; i < _pPhysics.syncList.length; i++) {\n        var syncData = _pPhysics.syncList[i];\n\n        if (syncData.obj == obj) {\n            for (var j = 0; j < _pPhysics.syncList.length; j++) {\n                var syncDataTarget = _pPhysics.syncList[j];\n\n                if (syncDataTarget.obj == targetObj) {\n\n                    // find soft body node closest to the given point\n                    if (Array.isArray(at)) {\n\n                        var at = _pGlob.vec3Tmp.fromArray(at);\n                        at = coordsTransform(at, getCoordSystem(), 'Y_UP_RIGHT');\n                        obj.worldToLocal(at);\n\n                        var positions = obj.geometry.ammoVertices;\n                        var closestDistSq = Infinity;\n                        var nodeIndex = 0;\n\n                        for (var k = 0; k < positions.length/3; k++) {\n\n                            var p = _pGlob.vec3Tmp2.set(positions[3*k], positions[3*k+1], positions[3*k+2]);\n                            var dist = p.distanceToSquared(at);\n\n                            if (dist < closestDistSq) {\n                                closestDistSq = dist;\n                                nodeIndex = k;\n                            }\n                        }\n\n                        at = nodeIndex;\n                    }\n\n                    syncData.body.appendAnchor(at, syncDataTarget.body, true, 1.0);\n\n                }\n            }\n        }\n    }\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.detectCollision={init:function(){this.appendValueInput("OBJECT_A").setCheck(["Object3D","String","Array"]).appendField("detect collisions of");this.appendValueInput("OBJECT_B").setCheck(["Object3D","String","Array"]).appendField("with");this.appendStatementInput("COLLIDE_DO").appendField("if touching do");this.appendStatementInput("NO_COLLIDE_DO").appendField("if not touching do");this.setInputsInline(!0);this.setColour(COLOR_PHYSICS);this.setTooltip('Detects if there is a collision at the moment of a specified body with another body (or any body from a list or a group). If there is a collision, the puzzles in the "if touching do" slot are triggered, otherwise in the "if not touching do".');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#detect_collisions");h(this)}};Blockly.JavaScript.detectCollision=function(e){var t=Blockly.JavaScript.valueToCode(e,"OBJECT_A",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"OBJECT_B",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.statementToCode(e,"COLLIDE_DO"),e=Blockly.JavaScript.statementToCode(e,"NO_COLLIDE_DO");Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);return Blockly.JavaScript.provideFunction_("detectCollision",["\n// detectCollision puzzle\nfunction ".concat(BFUN$2,"(objNamesA, objNamesB, collideCb, noCollideCb) {\n\n    objNamesA = retrieveObjectNames(objNamesA);\n    if (!objNamesA)\n        return;\n\n    objNamesB = retrieveObjectNames(objNamesB);\n    if (!objNamesB)\n        return;\n\n    var objA = getObjectByName(objNamesA[0]);\n    var execInstanceID = v3d.MathUtils.generateUUID();\n\n    for (var i = 0; i < objNamesB.length; i++) {\n        var objB = getObjectByName(objNamesB[i]);\n\n        var bodyA = null;\n        var bodyB = null;\n\n        for (var j = 0; j < _pPhysics.syncList.length; j++) {\n            var syncData = _pPhysics.syncList[j];\n\n            if (syncData.obj == objA)\n                bodyA = syncData.body;\n\n            if (syncData.obj == objB)\n                bodyB = syncData.body;\n        }\n\n        if (objA && objB && bodyA && bodyB) {\n            _pPhysics.collisionData.push({\n                objA: objA,\n                objB: objB,\n                bodyA: bodyA,\n                bodyB: bodyB,\n                collideCb: collideCb,\n                noCollideCb: noCollideCb,\n                collideFlag: true,\n                execInstanceID: execInstanceID\n            });\n        }\n    }\n\n}\n    ")])+"("+t+", "+n+", "+d(o)+", "+d(e)+");\n"};Blockly.Blocks.collisionInfo={init:function(){this.appendDummyInput().appendField("collision info");this.setColour(COLOR_PHYSICS);this.setOutput(!0,"Dictionary");this.setTooltip('Returns the collision info dictionary retrieved by the "detect collisions" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#detect_collisions");h(this)}};Blockly.JavaScript.collisionInfo=function(e){return["_pPhysics.collisionInfo",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.onSimulationTick={init:function(){this.appendDummyInput().appendField("on").appendField(new BlocklyExt.Fields.Dropdown([["before","BEFORE"],["after","AFTER"]]),"TYPE").appendField("simulation");this.appendStatementInput("DO").appendField("do").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PHYSICS);this.setTooltip('Run puzzles in the "do" slot just before or after\n                         physics simulation step. Use this puzzle to apply\n                         forces, velocities and do collision detection for\n                         your physics bodies to improve stability of your\n                         physics simulations.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Physics.html#on_simulation_tick")}};Blockly.JavaScript.onSimulationTick=function(e){var t="'"+e.getFieldValue("TYPE")+"'",e=Blockly.JavaScript.statementToCode(e,"DO");return Blockly.JavaScript.provideFunction_("onSimulationTick",["\n// onSimulationTick puzzle\nfunction ".concat(BFUN$2,"(tickType, tickCallback) {\n\n    if (!_pPhysics.tickCallbacks.length) {\n        var preTickCb = function(worldPtr, timeStep) {\n            _pPhysics.tickCallbacks.forEach(function(pair) {\n                if (pair[0] == 'BEFORE')\n                    pair[1]();\n            });\n        }\n\n        var tickCb = function(worldPtr, timeStep) {\n            _pPhysics.tickCallbacks.forEach(function(pair) {\n                if (pair[0] == 'AFTER')\n                    pair[1]();\n            });\n        }\n\n        _pPhysics.world.setInternalTickCallback(Ammo.addFunction(preTickCb, 'vif'), 0, true);\n        _pPhysics.world.setInternalTickCallback(Ammo.addFunction(tickCb, 'vif'), 0, false);\n    }\n\n    _pPhysics.tickCallbacks.push([tickType, tickCallback]);\n\n}\n    ")])+"("+t+", "+d(e)+");\n"};Blockly.Blocks.bloom={init:function(){this.appendDummyInput().appendField("bloom:");this.appendValueInput("THRESHOLD").appendField("threshold").setCheck(["Number"]);this.appendValueInput("STRENGTH").appendField("strength").setCheck(["Number"]);this.appendValueInput("RADIUS").appendField("radius").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable bloom effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#bloom");enablePPLivePreview(this)}};Blockly.JavaScript.bloom=function(e){var t=Blockly.JavaScript.valueToCode(e,"THRESHOLD",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"STRENGTH",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"RADIUS",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("bloom",["\n// bloom puzzle\nfunction ".concat(BFUN$2,"(threshold, strength, radius) {\n    appInstance.enablePostprocessing([{\n        type: 'bloom',\n        threshold: threshold,\n        strength: strength,\n        radius: radius\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.brightnessContrast={init:function(){this.appendValueInput("BRIGHTNESS").appendField("brightness").setCheck(["Number"]);this.appendValueInput("CONTRAST").appendField("contrast").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable brightness/contrast effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#brightness_contrast");enablePPLivePreview(this)}};Blockly.JavaScript.brightnessContrast=function(e){var t=Blockly.JavaScript.valueToCode(e,"BRIGHTNESS",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"CONTRAST",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("brightnessContrast",["\n// brightnessContrast puzzle\nfunction ".concat(BFUN$2,"(brightness, contrast) {\n    appInstance.enablePostprocessing([{\n        type: 'brightnessContrast',\n        brightness: brightness,\n        contrast: contrast\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,");\n")};Blockly.Blocks.dof={init:function(){this.appendDummyInput().appendField("depth of field:");this.appendValueInput("FOCUS").appendField("focus").setCheck(["Number"]);this.appendValueInput("APERTURE").appendField("aperture").setCheck(["Number"]);this.appendValueInput("MAXBLUR").appendField("maxblur").setCheck(["Number"]);this.appendValueInput("DEPTH_LEAK_THRESH").appendField("depth leak threshold").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable depth of field (DOF) effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#dof");enablePPLivePreview(this)}};Blockly.JavaScript.dof=function(e){var t=Blockly.JavaScript.valueToCode(e,"FOCUS",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"APERTURE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"MAXBLUR",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"DEPTH_LEAK_THRESH",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("dof",["\n// dof puzzle\nfunction ".concat(BFUN$2,"(focus, aperture, maxblur, depthLeakThreshold) {\n    appInstance.enablePostprocessing([{\n        type: 'dof',\n        focus: focus,\n        aperture: aperture,\n        maxblur: maxblur,\n        depthLeakThreshold: depthLeakThreshold\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,");\n")};Blockly.Blocks.grayscale={init:function(){this.appendDummyInput().appendField("grayscale");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable grayscale effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#grayscale")}};Blockly.JavaScript.grayscale=function(e){var t=Blockly.JavaScript.provideFunction_("grayscale",["\n// grayscale puzzle\nfunction ".concat(BFUN$2,"() {\n    appInstance.enablePostprocessing([{\n        type: 'grayscale'\n    }]);\n}\n    ")]);return"".concat(t,"();\n")};Blockly.Blocks.ssao={init:function(){this.appendDummyInput().appendField("ambient occlusion:");this.appendValueInput("RADIUS").appendField("radius").setCheck(["Number"]);this.appendValueInput("AO_CLAMP").appendField("clamp").setCheck(["Number"]);this.appendValueInput("LUM_INFLUENCE").appendField("luminance influence").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable screen space ambient occlusion (SSAO) effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#ssao");this.setWarningText(Blockly.Msg.DEPRECATED_PUZZLE_WARNING+" Replace it with the new *ambient occlusion* puzzle from the toolbox.")}};Blockly.JavaScript.ssao=function(e){var t=Blockly.JavaScript.valueToCode(e,"RADIUS",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"AO_CLAMP",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"LUM_INFLUENCE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("ssao",["\n// ssao puzzle\nfunction ".concat(BFUN$2,"(radius, aoClamp, lumInfluence) {\n    appInstance.enablePostprocessing([{\n        type: 'ssao',\n        // NOTE: approx. multiplier to match new implementation\n        radius: radius / 10\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.ssaoAdv={init:function(){this.appendDummyInput().appendField("ambient occlusion:");this.appendValueInput("RADIUS").appendField("radius").setCheck(["Number"]);this.appendValueInput("MIN_DIST").appendField("min distance").setCheck(["Number"]);this.appendValueInput("MAX_DIST").appendField("max distance").setCheck(["Number"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable screen space ambient occlusion (SSAO) effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#ssao");enablePPLivePreview(this)}};Blockly.JavaScript.ssaoAdv=function(e){var t=Blockly.JavaScript.valueToCode(e,"RADIUS",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"MIN_DIST",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"MAX_DIST",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.provideFunction_("ssaoAdv",["\n// ssaoAdv puzzle\nfunction ".concat(BFUN$2,"(radius, minDist, maxDist) {\n    appInstance.enablePostprocessing([{\n        type: 'ssao',\n        radius: radius,\n        minDistance: minDist,\n        maxDistance: maxDist\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.ssaa={init:function(){this.appendDummyInput().appendField("supersampling").appendField(new BlocklyExt.Fields.Dropdown([["Off","0"],["2x","1"],["4x","2"],["8x","3"],["16x","4"]]),"LEVEL");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enable supersample anti-aliasing (SSAA) effect.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#ssaa")}};Blockly.JavaScript.ssaa=function(e){var t="'"+e.getFieldValue("LEVEL")+"'",e=Blockly.JavaScript.provideFunction_("ssaa",["\n// ssaa puzzle\nfunction ".concat(BFUN$2,"(level) {\n    appInstance.enableSSAA(Number(level), false);\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.refraction={init:function(){this.appendDummyInput().appendField("simple refraction:");this.appendValueInput("MATERIAL").appendField("material(s)").setCheck(["Material","String","Array"]);this.appendValueInput("DISTANCE").appendField("distance").setCheck(["Number"]);this.appendValueInput("RENDER_AFTER").appendField("render after refraction").setCheck(["Object3D","String","Array"]);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enables an easy refraction effect for a specified material.\n        Parameters:\n        *material* - material used to assign the effect to;\n        *distance* - maximum length of the refracted ray;\n        *render after refraction* - object(s) to be excluded from the normal rendering queue\n        and to be rendered after the refraction effect is applied.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#simple_refraction");enablePPLivePreview(this)}};Blockly.JavaScript.refraction=function(e){var t=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''",n=Blockly.JavaScript.valueToCode(e,"DISTANCE",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"RENDER_AFTER",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("refraction",["\n// refraction puzzle\nfunction ".concat(BFUN$2,"(matName, distance, renderAfterNames) {\n\n    var matNames = Array.isArray(matName) ? matName : [matName];\n    var mats = [];\n\n    matNames.forEach(function(name) {\n        mats = mats.concat(v3d.SceneUtils.getMaterialsByName(appInstance, name));\n    });\n\n    var objects = [];\n\n    for (var i = 0; i < mats.length; i++) {\n        var mat = mats[i];\n\n        appInstance.scene.traverse(function(obj) {\n            if (obj.material && obj.material == mat)\n                objects.push(obj);\n        });\n    }\n\n    // no need\n    if (!objects.length)\n        return;\n\n    var renderAfter = [];\n\n    renderAfterNames = retrieveObjectNames(renderAfterNames);\n    if (!renderAfterNames)\n        return;\n\n    for (var i = 0; i < renderAfterNames.length; i++) {\n        var obj = getObjectByName(renderAfterNames[i]);\n        if (obj)\n            renderAfter.push(obj);\n    }\n\n    appInstance.enablePostprocessing([{\n        type: 'ssr',\n        useRefract: true,\n        simpleRefraction: true,\n        objects: objects,\n        maxDistance: distance,\n        renderAfter: renderAfter\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,");\n")};Blockly.Blocks.ssr={init:function(){this.appendDummyInput().appendField("screen space").appendField(new BlocklyExt.Fields.Dropdown([["reflection","REFLECT"],["refraction","REFRACT"]]),"TYPE");this.appendValueInput("MATERIAL").appendField("for material(s)").setCheck(["Material","String","Array"]);this.appendValueInput("STEPS").appendField("steps").setCheck(["Number"]);this.appendValueInput("STRIDE").appendField("stride").setCheck(["Number"]);this.appendValueInput("BINARY_SEARCH_STEPS").appendField("binary search steps").setCheck(["Number"]);this.appendValueInput("THICKNESS").appendField("thickness").setCheck(["Number"]);this.appendValueInput("MAX_DISTANCE").appendField("max distance").setCheck(["Number"]);this.appendValueInput("RESOLUTION").appendField("resolution").setCheck(["Number"]);this.appendValueInput("JITTER").appendField("jitter").setCheck(["Number"]);this.appendValueInput("RENDER_AFTER").appendField("render after").setCheck(["Object3D","String","Array"]);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Enables screen space reflection/refraction (SSR) effect.\n        See the Puzzles reference for parameter description.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#ssr");enablePPLivePreview(this)}};Blockly.JavaScript.ssr=function(e){var t="'"+e.getFieldValue("TYPE")+"'",n=Blockly.JavaScript.valueToCode(e,"MATERIAL",Blockly.JavaScript.ORDER_NONE)||"''",o=Blockly.JavaScript.valueToCode(e,"STEPS",Blockly.JavaScript.ORDER_NONE)||"''",i=Blockly.JavaScript.valueToCode(e,"STRIDE",Blockly.JavaScript.ORDER_NONE)||"''",r=Blockly.JavaScript.valueToCode(e,"BINARY_SEARCH_STEPS",Blockly.JavaScript.ORDER_NONE)||"''",s=Blockly.JavaScript.valueToCode(e,"THICKNESS",Blockly.JavaScript.ORDER_NONE)||"''",a=Blockly.JavaScript.valueToCode(e,"MAX_DISTANCE",Blockly.JavaScript.ORDER_NONE)||"''",l=Blockly.JavaScript.valueToCode(e,"RESOLUTION",Blockly.JavaScript.ORDER_NONE)||"''",c=Blockly.JavaScript.valueToCode(e,"JITTER",Blockly.JavaScript.ORDER_NONE)||"''",u=Blockly.JavaScript.valueToCode(e,"RENDER_AFTER",Blockly.JavaScript.ORDER_NONE)||"''";Blockly.JavaScript.provideFunction_("retrieveObjCode",[retrieveObjCode()]);e=Blockly.JavaScript.provideFunction_("ssr",["\n// ssr puzzle\nfunction ".concat(BFUN$2,"(type, matName, steps, stride, binarySearchSteps, thickness,\n        maxDistance, resolution, jitter, renderAfterNames) {\n\n    var useRefract = (type == 'REFRACT') ? true : false;\n\n    var matNames = Array.isArray(matName) ? matName : [matName];\n    var mats = [];\n\n    matNames.forEach(function(name) {\n        mats = mats.concat(v3d.SceneUtils.getMaterialsByName(appInstance, name));\n    });\n\n    var objects = [];\n\n    for (var i = 0; i < mats.length; i++) {\n        var mat = mats[i];\n\n        appInstance.scene.traverse(function(obj) {\n            if (obj.material && obj.material == mat)\n                objects.push(obj);\n        });\n    }\n\n    // no need\n    if (!objects.length)\n        return;\n\n    var renderAfter = [];\n\n    renderAfterNames = retrieveObjectNames(renderAfterNames);\n    if (!renderAfterNames)\n        return;\n\n    for (var i = 0; i < renderAfterNames.length; i++) {\n        var obj = getObjectByName(renderAfterNames[i]);\n        if (obj)\n            renderAfter.push(obj);\n    }\n\n    appInstance.enablePostprocessing([{\n        type: 'ssr',\n        useRefract: useRefract,\n        objects: objects,\n        steps: steps,\n        stride: stride,\n        binarySearchSteps: binarySearchSteps,\n        thickness: thickness,\n        maxDistance: maxDistance,\n        renderTargetScale: resolution,\n        jitter: jitter,\n        renderAfter: renderAfter\n    }]);\n}\n    ")]);return"".concat(e,"(").concat(t,", ").concat(n,", ").concat(o,", ").concat(i,",\n            ").concat(r,", ").concat(s,", ").concat(a,", ").concat(l,",\n            ").concat(c,", ").concat(u,");\n")};Blockly.Blocks.removePostprocessing={init:function(){this.appendDummyInput().appendField("remove post-processing effects");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_PP);this.setTooltip("Remove all postprocessing effects.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Postprocessing.html#remove_postprocessing")}};Blockly.JavaScript.removePostprocessing=function(e){var t=Blockly.JavaScript.provideFunction_("removePostprocessing",["\n// removePostprocessing puzzle\nfunction ".concat(BFUN$2,"() {\n    // keep outline\n    appInstance.disablePostprocessing(true);\n}\n    ")]);return"".concat(t,"();\n")};Blockly.Blocks.textMultiline={init:function(){var n=new BlocklyExt.Fields.MultilineInputAdvanced("Hello, Verge!");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["<no highlight>","text"],["CSS","css"],["HTML","html"],["JavaScript","javascript"]]),"HIGHLIGHT_MODE");this.appendDummyInput().appendField(n,"TEXT");this.setOutput(!0,"String");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setInputsInline(!1);this.setColour(COLOR_TEXT);this.setTooltip('A text editor puzzle. Suits better for multi-line texts\n                than the "text" puzzle.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#text_multiline");this.setOnChange(function(e){e.blockId===this.id&&"change"===e.type&&"field"===e.element&&"HIGHLIGHT_MODE"===e.name&&n.setHighlighting(e.newValue);"change"===e.type&&"collapsed"===e.element&&n.forceRerender();if("move"===e.type){var t=this.workspace.getBlockById(e.blockId);null!==t&&"execScript"===t.type&&t.getChildren()[0]===this&&n.forceRerender()}(e.type===BlocklyExt.Events.BLOCK_BRING_TO_FRONT||e.type===BlocklyExt.Events.BLOCK_DRAG_HIDE||e.type===BlocklyExt.Events.BLOCK_DRAG_SHOW||e.type===BlocklyExt.Events.WS_DRAG_SHOW||e.type===BlocklyExt.Events.WS_DRAG_HIDE||"change"===e.type&&"collapsed"===e.element)&&n.fixScrollBars()});this.isInFlyout?setTimeout(function(){n.setHighlighting(this.getFieldValue("HIGHLIGHT_MODE"))}.bind(this),0):blockReady(this,function(e,t){n.setHighlighting(e.getFieldValue("HIGHLIGHT_MODE"))})}};Blockly.JavaScript.textMultiline=function(e){e=Blockly.JavaScript.multiline_quote_(e.getFieldValue("TEXT"));e.includes("\n")&&(e="("+e+")");return[e,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.textNewLine={init:function(){this.appendDummyInput().appendField("new line");this.setOutput(!0,"String");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_TEXT);this.setTooltip("Output newline character");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#new_line")}};Blockly.JavaScript.textNewLine=function(e){return["'\\n'",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.convertToNumber={init:function(){this.appendValueInput("VALUE").appendField("convert to number");this.setOutput(!0,"Number");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_TEXT);this.setTooltip("Tries to convert the specified text to number. If conversion fails, returns 0.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Text.html#convert_to_number")}};Blockly.JavaScript.convertToNumber=function(e){e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("toNumber",["\n// convertToNumber puzzle\nfunction ".concat(BFUN$2,"(text) {\n    var num = Number(text);\n    if (isNaN(num))\n        num = 0;\n    return num;\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.angle={init:function(){this.appendDummyInput().appendField(new Blockly.FieldAngle(90),"ANGLE");this.setOutput(!0,"Number");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_NUMBERS);this.setTooltip("Angle selector.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#angle")}};Blockly.JavaScript.angle=function(e){return[e.getFieldValue("ANGLE"),Blockly.JavaScript.ORDER_NONE]};Blockly.Blocks.number_slider={init:function(){this.appendDummyInput().appendField(new BlocklyExt.Fields.NumberSlider(.5,0,1,.1),"NUM");this.setOutput(!0,"Number");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_NUMBERS);this.setTooltip("Number with a range slider widget.")}};Blockly.JavaScript.number_slider=function(e){e=Number(e.getFieldValue("NUM"));return[e,0<=e?Blockly.JavaScript.ORDER_ATOMIC:Blockly.JavaScript.ORDER_UNARY_NEGATION]};Blockly.Blocks.toFixedPoint={init:function(){this.appendValueInput("VALUE").setCheck("Number").appendField("round");this.appendValueInput("PRECISION").setCheck("Number").appendField("precision");this.setInputsInline(!0);this.setOutput(!0,"Number");this.setPreviousStatement(!1);this.setNextStatement(!1);this.setColour(COLOR_NUMBERS);this.setTooltip("Rounds a given number using the specified precision.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#round_with_precision")}};Blockly.JavaScript.toFixedPoint=function(e){var t=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"PRECISION",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("toFixedPoint",["\n// toFixedPoint puzzle\nfunction ".concat(BFUN$2,"(num, prec) {\n    prec = Math.pow(10, prec);\n    return Math.round(num * prec)/prec;\n}\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.createVector={init:function(){this.appendDummyInput().appendField("create vector");this.appendValueInput("X").setCheck("Number");this.appendValueInput("Y").setCheck("Number");this.appendValueInput("Z").setCheck("Number");this.setInputsInline(!0);this.setOutput(!0,["Array"]);this.setColour(COLOR_NUMBERS);this.setTooltip("Create a new 3-dimensional vector.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#create_vector")}};Blockly.JavaScript.createVector=function(e){var t=Blockly.JavaScript.valueToCode(e,"X",Blockly.JavaScript.ORDER_NONE)||"0",n=Blockly.JavaScript.valueToCode(e,"Y",Blockly.JavaScript.ORDER_NONE)||"0",e=Blockly.JavaScript.valueToCode(e,"Z",Blockly.JavaScript.ORDER_NONE)||"0";return[Blockly.JavaScript.provideFunction_("createVector",["\n// createVector puzzle\nfunction ".concat(BFUN$2,"(x, y, z) {\n    return [x, y, z];\n};\n    ")])+"("+t+", "+n+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setVectorValue={init:function(){this.appendValueInput("VECTOR").appendField("set vector").setCheck(["Array"]);this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["x","X"],["y","Y"],["z","Z"],["length","LENGTH"]]),"VALUE_NAME").appendField("to");this.appendValueInput("VALUE").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_NUMBERS);this.setTooltip("Set a vector value.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#set_vector_value")}};Blockly.JavaScript.setVectorValue=function(e){var t=Blockly.JavaScript.valueToCode(e,"VECTOR",Blockly.JavaScript.ORDER_NONE)||"[0, 0, 0]",n="'"+e.getFieldValue("VALUE_NAME")+"'",e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"0";return Blockly.JavaScript.provideFunction_("setVectorValue",["\n// setVectorValue puzzle\nfunction ".concat(BFUN$2,"(vector, valueName, value) {\n    switch (valueName) {\n    case 'X':\n        vector[0] = value;\n        break;\n    case 'Y':\n        vector[1] = value;\n        break;\n    case 'Z':\n        vector[2] = value;\n        break;\n    case 'LENGTH':\n        _pGlob.vec3Tmp.fromArray(vector).setLength(value).toArray(vector);\n        break;\n    }\n}\n    ")])+"("+t+", "+n+", "+e+");\n"};Blockly.Blocks.getVectorValue={init:function(){this.appendValueInput("VECTOR").setCheck("Array").appendField("get vector");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["x","X"],["y","Y"],["z","Z"],["is zero","IS_ZERO"],["length","LENGTH"],["negated","NEGATED"],["normalized","NORMALIZED"]]),"VALUE_NAME");this.setInputsInline(!0);this.setOutput(!0,["Number","Array","Boolean"]);this.setColour(COLOR_NUMBERS);this.setTooltip("Extract the specified value (or vector) from the given vector.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#get_vector_value")}};Blockly.JavaScript.getVectorValue=function(e){var t=Blockly.JavaScript.valueToCode(e,"VECTOR",Blockly.JavaScript.ORDER_NONE)||"[0,0,0]",e="'"+e.getFieldValue("VALUE_NAME")+"'";return[Blockly.JavaScript.provideFunction_("getVectorValue",["\n// getVectorValue puzzle\nfunction ".concat(BFUN$2,"(vector, value) {\n\n    var vector = _pGlob.vec3Tmp.fromArray(vector);\n\n    switch (value) {\n    case 'X':\n        return vector.x;\n    case 'Y':\n        return vector.y;\n    case 'Z':\n        return vector.z;\n    case 'IS_ZERO':\n        return Boolean(vector.length() <= Number.EPSILON);\n    case 'LENGTH':\n        return vector.length();\n    case 'NEGATED':\n        return [-vector.x, -vector.y, -vector.z];\n    case 'NORMALIZED':\n        return vector.normalize().toArray();\n    default:\n        console.error('get value from vector: Wrong value');\n        return;\n    }\n};\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.vectorMath={init:function(){this.appendValueInput("VECTOR").setCheck("Array").appendField("vector");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["+","ADD"],["-","SUBTRACT"],["×","MULTIPLY"],["/","DIVIDE"],["dot","DOT"],["cross","CROSS"],["rotate","ROTATE"]]),"VALUE_NAME");this.appendValueInput("VECTOR2").setCheck(["Array"]);this.setInputsInline(!0);this.setOutput(!0,["Array"]);this.setColour(COLOR_NUMBERS);this.setTooltip("Perform vector math on two vectors.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Numbers.html#vector_math")}};Blockly.JavaScript.vectorMath=function(e){var t=Blockly.JavaScript.valueToCode(e,"VECTOR",Blockly.JavaScript.ORDER_NONE)||"[0,0,0]",n="'"+e.getFieldValue("VALUE_NAME")+"'",e=Blockly.JavaScript.valueToCode(e,"VECTOR2",Blockly.JavaScript.ORDER_NONE)||"[0,0,0]";return[Blockly.JavaScript.provideFunction_("vectorMath",["\n// vectorMath puzzle\nfunction ".concat(BFUN$2,"(vec1, operation, vec2) {\n\n    var vec1 = _pGlob.vec3Tmp.fromArray(vec1);\n    var vec2 = _pGlob.vec3Tmp2.fromArray(vec2);\n\n    switch (operation) {\n    case 'ADD':\n        return vec1.add(vec2).toArray();\n    case 'SUBTRACT':\n        return vec1.sub(vec2).toArray();\n    case 'MULTIPLY':\n        return vec1.multiply(vec2).toArray();\n    case 'DIVIDE':\n        return vec1.divide(vec2).toArray();\n    case 'DOT':\n        return vec1.dot(vec2);\n    case 'CROSS':\n        return vec1.cross(vec2).toArray();\n    case 'ROTATE':\n        var euler = _pGlob.eulerTmp;\n        vec2.multiplyScalar(Math.PI/180)\n        return vec1.applyEuler(euler.setFromVector3(vec2)).toArray();\n    default:\n        console.error('vector math: Wrong operation');\n        return;\n    }\n};\n    ")])+"("+t+", "+n+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.listsCheckItem={init:function(){this.appendValueInput("LIST").setCheck("Array").appendField("in list");this.appendValueInput("ITEM").setCheck(null).appendField("check occurence of item");this.setInputsInline(!0);this.setPreviousStatement(!1);this.setOutput(!0,"Boolean");this.setNextStatement(!1);this.setColour(COLOR_LISTS);this.setTooltip("Checks if a specified item is present in a list,\n                and returns the Boolean-typed result true or false.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Lists.html#check_item")}};Blockly.JavaScript.listsCheckItem=function(e){var t=Blockly.JavaScript.valueToCode(e,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",e=Blockly.JavaScript.valueToCode(e,"ITEM",Blockly.JavaScript.ORDER_NONE)||"''";return["".concat(t,".indexOf(").concat(e,") > -1"),Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.dictCreateEmpty={init:function(){this.appendDummyInput().appendField("create empty dict");this.setColour(COLOR_DICTS);this.setOutput(!0,"Dictionary");this.setTooltip("Returns a dictionary containing no data records.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#create_empty_dict")}};Blockly.JavaScript.dictCreateEmpty=function(e){return["{}",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.dictSet={init:function(){this.appendValueInput("DICT").setCheck("Dictionary").appendField("in dict");this.appendValueInput("KEY").setCheck("String").appendField("set key");this.appendValueInput("VALUE").appendField("as");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_DICTS);this.setTooltip("Sets the item to be associated with a specified key in a dictionary. The key must be a text, while the assigned value may be of any type (text, number, list, other dictionary, etc).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#dict_set_key")}};Blockly.JavaScript.dictSet=function(e){var t=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_NONE)||"{}",n=Blockly.JavaScript.valueToCode(e,"KEY",Blockly.JavaScript.ORDER_NONE)||"''",e=Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"null";return Blockly.JavaScript.provideFunction_("dictSet",["\n// dictSet puzzle\nfunction ".concat(BFUN$2,"(dict, key, value) {\n    if (dict && typeof dict == 'object')\n        dict[key] = value;\n}\n    ")])+"("+t+", "+n+", "+e+");\n"};Blockly.Blocks.dictGet={init:function(){this.appendValueInput("DICT").setCheck("Dictionary").appendField("in dict");this.appendValueInput("KEY").setCheck("String").appendField("get key");this.setInputsInline(!0);this.setPreviousStatement(!1);this.setOutput(!0);this.setNextStatement(!1);this.setColour(COLOR_DICTS);this.setTooltip("Returns the item associated with a specified key in a dictionary.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#dict_get_key")}};Blockly.JavaScript.dictGet=function(e){var t=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_NONE)||"{}",e=Blockly.JavaScript.valueToCode(e,"KEY",Blockly.JavaScript.ORDER_NONE)||"''";return[Blockly.JavaScript.provideFunction_("dictGet",["\n// dictGet puzzle\nfunction ".concat(BFUN$2,"(dict, key) {\n    if (dict && typeof dict == 'object')\n        return dict[key];\n}\n    ")])+"("+t+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.dictGetKeys={init:function(){this.appendDummyInput().appendField("get keys");this.appendValueInput("DICT").setCheck("Dictionary");this.setInputsInline(!0);this.setPreviousStatement(!1);this.setOutput(!0,"Array");this.setNextStatement(!1);this.setColour(COLOR_DICTS);this.setTooltip("Returns a list of all keys present in a dictionary.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#get_keys")}};Blockly.JavaScript.dictGetKeys=function(e){e=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_TYPEOF)||"{}";return["typeof ".concat(e," == 'object' ? Object.keys(").concat(e,") : []"),Blockly.JavaScript.ORDER_CONDITIONAL]};Blockly.Blocks.dictCheck={init:function(){this.appendValueInput("DICT").setCheck("Dictionary").appendField("in dict");this.appendValueInput("KEY").setCheck("String").appendField("check key");this.setInputsInline(!0);this.setPreviousStatement(!1);this.setOutput(!0,"Boolean");this.setNextStatement(!1);this.setColour(COLOR_DICTS);this.setTooltip("Checks if a specified key is present in a dictionary,\n            and returns the Boolean-typed result true or false.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#dict_check_key")}};Blockly.JavaScript.dictCheck=function(e){var t=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_MEMBER)||"{}",e=Blockly.JavaScript.valueToCode(e,"KEY",Blockly.JavaScript.ORDER_NONE)||"''";return["typeof ".concat(t," == 'object' && ").concat(t,".hasOwnProperty(").concat(e,")"),Blockly.JavaScript.ORDER_LOGICAL_AND]};Blockly.Blocks.dictRemove={init:function(){this.appendValueInput("DICT").setCheck("Dictionary").appendField("in dict");this.appendValueInput("KEY").setCheck("String").appendField("remove key");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_DICTS);this.setTooltip("Removes the item associated with a specified key in a dictionary, and deletes the key itself.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#dict_remove_key")}};Blockly.JavaScript.dictRemove=function(e){var t=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_NONE)||"{}",e=Blockly.JavaScript.valueToCode(e,"KEY",Blockly.JavaScript.ORDER_NONE)||"''";return Blockly.JavaScript.provideFunction_("dictRemove",["\n// dictRemove puzzle\nfunction ".concat(BFUN$2,"(dict, key) {\n    if (dict && typeof dict == 'object')\n        delete dict[key];\n}\n    ")])+"("+t+", "+e+");\n"};Blockly.Blocks.dictIsEmpty={init:function(){this.appendDummyInput().appendField("is empty");this.appendValueInput("DICT").setCheck("Dictionary");this.setInputsInline(!0);this.setPreviousStatement(!1);this.setOutput(!0,"Boolean");this.setNextStatement(!1);this.setColour(COLOR_DICTS);this.setTooltip("Checks if a specified dictionary contains no keys,\n            and returns the Boolean-typed result true or false.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/Dictionaries.html#is_empty")}};Blockly.JavaScript.dictIsEmpty=function(e){e=Blockly.JavaScript.valueToCode(e,"DICT",Blockly.JavaScript.ORDER_TYPEOF)||"{}";return["typeof ".concat(e," == 'object' ? !Object.keys(").concat(e,").length : true"),Blockly.JavaScript.ORDER_CONDITIONAL]};Blockly.Blocks["console.log"]={init:function(){this.appendValueInput("VALUE").appendField("print to console (F12)");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SYSTEM);this.setTooltip("Prints data of any type to the browser console.\n            The latter can usually be opened with the F12 key (Chrome, Firefox on Windows, Linux).\n            On Mac use Option-Cmd-J (Chrome) or Option-Cmd-C (Safari) to open the browser console.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#print_to_console")}};Blockly.JavaScript["console.log"]=function(e){return"console.log("+(Blockly.JavaScript.valueToCode(e,"VALUE",Blockly.JavaScript.ORDER_NONE)||"''")+");\n"};Blockly.Blocks.printPerformanceInfo={init:function(){this.appendDummyInput().appendField("print performance info (F12)");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SYSTEM);this.setTooltip("Records a performance profile during 1 second and prints it to the browser console.\n            The latter can usually be opened with the F12 key (Chrome, Firefox on Windows, Linux).\n            On Mac use Option-Cmd-J (Chrome) or Option-Cmd-C (Safari) to open the browser console.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#print_performance_info")}};Blockly.JavaScript.printPerformanceInfo=function(e){return"appInstance.printPerformanceInfo();\n"};Blockly.Blocks.featureAvailable={init:function(){this.appendDummyInput().appendField("feature available").appendField(new BlocklyExt.Fields.Dropdown([["Mobile Device","MOBILE"],["Android","ANDROID"],["iOS","IOS"],["Windows","WINDOWS"],["macOS","MACOS"],["Linux","LINUX"],["Google Chrome","CHROME"],["Firefox","FIREFOX"],["Internet Explorer","IE"],["Microsoft Edge","EDGE"],["Safari","SAFARI"],["Touch Screen","TOUCH"],["Retina Display (HiDPI)","RETINA"],["High Dynamic Range (HDR)","HDR"],["Web Audio API","WEBAUDIO"],["WebGL 2.0","WEBGL2"],["WooCommerce","WOOCOMMERCE"]]),"FEATURE");this.setInputsInline(!0);this.setOutput(!0,"Boolean");this.setColour(COLOR_SYSTEM);this.setTooltip("Check if a feature selected from the drop-down is available in the user's browser.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#feature_available")}};Blockly.JavaScript.featureAvailable=function(e){e="'"+e.getFieldValue("FEATURE")+"'";return[Blockly.JavaScript.provideFunction_("featureAvailable",["\n// featureAvailable puzzle\nfunction ".concat(BFUN$2,"(feature) {\n\n    var userAgent = window.navigator.userAgent;\n    var platform = window.navigator.platform;\n\n    switch (feature) {\n    case 'LINUX':\n        return /Linux/.test(platform);\n    case 'WINDOWS':\n        return ['Win32', 'Win64', 'Windows', 'WinCE'].indexOf(platform) !== -1;\n    case 'MACOS':\n        return (['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].indexOf(platform) !== -1 && !v3d.Detector.checkIOS());\n    case 'IOS':\n        return v3d.Detector.checkIOS();\n    case 'ANDROID':\n        return /Android/i.test(userAgent);\n    case 'MOBILE':\n        return (/Android|webOS|BlackBerry/i.test(userAgent) || v3d.Detector.checkIOS());\n\n    case 'CHROME':\n        // Chromium based\n        return (!!window.chrome && !/Edge/.test(navigator.userAgent));\n    case 'FIREFOX':\n        return /Firefox/.test(navigator.userAgent);\n    case 'IE':\n        return /Trident/.test(navigator.userAgent);\n    case 'EDGE':\n        return /Edge/.test(navigator.userAgent);\n    case 'SAFARI':\n        return (/Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent));\n\n    case 'TOUCH':\n        return !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\n    case 'RETINA':\n        return window.devicePixelRatio >= 2;\n    case 'HDR':\n        return appInstance.useHDR;\n    case 'WEBAUDIO':\n        return v3d.Detector.checkWebAudio();\n    case 'WEBGL2':\n        var canvas = document.createElement('canvas');\n        var gl = canvas.getContext('webgl2')\n        return !!gl;\n    case 'WOOCOMMERCE':\n        var woo_fun = window.parent.v3d_woo_get_product_info || window.parent.parent.v3d_woo_get_product_info;\n        return !!woo_fun;\n    default:\n        return false;\n    }\n\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.getGPU={init:function(){this.appendDummyInput().appendField("get GPU").appendField(new BlocklyExt.Fields.Dropdown([["vendor","VENDOR"],["model","MODEL"]]),"FEATURE");this.setInputsInline(!0);this.setOutput(!0,"String");this.setColour(COLOR_SYSTEM);this.setTooltip("Outputs the user's GPU info - vendor, for example: NVIDIA Corporation, Apple Inc., Qualcomm,\n            and GPU model, for example: GeForce GTX 1060 3GB/PCIe/SSE2, Apple A9 GPU, Adreno (TM) 330.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#get_GPU")}};Blockly.JavaScript.getGPU=function(e){e="'"+e.getFieldValue("FEATURE")+"'";return[Blockly.JavaScript.provideFunction_("getGPU",["\n// getGPU puzzle\nfunction ".concat(BFUN$2,"(feature) {\n\n    switch (feature) {\n    case 'VENDOR':\n        return v3d.Detector.getGPUVendor(appInstance.renderer);\n    case 'MODEL':\n        return v3d.Detector.getGPUModel(appInstance.renderer);\n    }\n}\n    ")])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Blocks.setScreenScale={init:function(){this.appendValueInput("FACTOR").appendField("set screen scale").setCheck(["Number"]);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SYSTEM);this.setTooltip("Set scaling factor (device pixel ratio).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#set_screen_scale")}};Blockly.JavaScript.setScreenScale=function(e){var t=Blockly.JavaScript.valueToCode(e,"FACTOR",Blockly.JavaScript.ORDER_NONE)||"'1'",e=Blockly.JavaScript.provideFunction_("setScreenScale",["\nfunction ".concat(BFUN$2,"(factor) {\n    appInstance.renderer.setPixelRatio(factor);\n    // to update possible post-processing passes\n    appInstance.onResize();\n}\n    ")]);return"".concat(e,"(").concat(t,");\n")};Blockly.Blocks.nativeScreenScale={init:function(){this.appendDummyInput().appendField("native screen scale");this.setColour(COLOR_SYSTEM);this.setOutput(!0,"Number");this.setTooltip("Returns native scaling factor (device pixel ratio).");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#native_screen_scale")}};Blockly.JavaScript.nativeScreenScale=function(e){return["window.devicePixelRatio",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.detectGamepad={init:function(){this.appendDummyInput().appendField("detect gamepad device");this.appendStatementInput("DO_CONNECTED").appendField("once connected do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.appendStatementInput("DO_DISCONNECTED").appendField("once disconnected do").setCheck(null).setAlign(Blockly.ALIGN_RIGHT);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(COLOR_SYSTEM);this.setTooltip('Detect gamepad device.\n            When connected, the puzzles in the "once connnected do" are triggered.\n            when disconnected, the puzzles in the "once disconnected do" slot are triggered.');this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#detect_gamepad")}};Blockly.JavaScript.detectGamepad=function(e){var t=Blockly.JavaScript.statementToCode(e,"DO_CONNECTED"),e=Blockly.JavaScript.statementToCode(e,"DO_DISCONNECTED");return Blockly.JavaScript.provideFunction_("detectGamepad",["\n// detectGamepad puzzle\nfunction ".concat(BFUN$2,'(connCb, disconnCb) {\n\n    // TODO: implement detection of VR controllers\n\n    window.addEventListener("gamepadconnected", function(e) {\n        _pGlob.gamepadIndex = e.gamepad.index;\n        connCb();\n    });\n\n    window.addEventListener("gamepaddisconnected", function(e) {\n        _pGlob.gamepadIndex = e.gamepad.index;\n        disconnCb();\n    });\n\n}\n    ')])+"("+d(t)+", "+d(e)+");\n"};Blockly.Blocks.gamepadIndex={init:function(){this.appendDummyInput().appendField("gamepad index");this.setColour(COLOR_SYSTEM);this.setOutput(!0,"Number");this.setTooltip("Returns connected/disconnected gamepad index.");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#gamepad_index")}};Blockly.JavaScript.gamepadIndex=function(e){return["_pGlob.gamepadIndex",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.Blocks.getGamepadProp={init:function(){this.appendDummyInput().appendField("get gamepad");this.appendValueInput("INDEX").setCheck(["Number"]).appendField("");this.appendDummyInput().appendField(new BlocklyExt.Fields.Dropdown([["connection status","CONNECTION_STATUS"],["axis","AXIS"],["button","BUTTON"],["analog button","ANALOG_BUTTON"],["id","ID"],["timestamp","TIMESTAMP"],["debug info","DEBUG_INFO"]]),"PROPERTY");this.appendDummyInput().appendField("#","CONTROL_INDEX_LABEL").appendField(new Blockly.FieldNumber(0,0,50,1),"CONTROL_INDEX");this.setOnChange(function(e){var t=this.getFieldValue("PROPERTY");if("AXIS"==t||"BUTTON"==t||"ANALOG_BUTTON"==t){this.getField("CONTROL_INDEX_LABEL").setVisible(!0);this.getField("CONTROL_INDEX").setVisible(!0)}else{this.getField("CONTROL_INDEX_LABEL").setVisible(!1);this.getField("CONTROL_INDEX").setVisible(!1)}this.getField("CONTROL_INDEX").forceRerender()});this.setOutput(!0,["Boolean","Number","String"]);this.setInputsInline(!0);this.setColour(COLOR_SYSTEM);this.setTooltip("Get gamepad property");this.setHelpUrl("https://www.soft8soft.com/docs/manual/en/puzzles/System.html#get_gamepad_prop")}};Blockly.JavaScript.getGamepadProp=function(e){var t=Blockly.JavaScript.valueToCode(e,"INDEX",Blockly.JavaScript.ORDER_NONE)||"0",n="'"+e.getFieldValue("PROPERTY")+"'",e="'"+e.getFieldValue("CONTROL_INDEX")+"'"||"0";Blockly.JavaScript.provideFunction_("xrUtilsCode",[runtimeChunks.xrUtils]);return[Blockly.JavaScript.provideFunction_("getGamepadProp",["\n// getGamepadProp puzzle\nfunction ".concat(BFUN$2,"(index, prop, controlIndex) {\n\n    if (_pGlob.xrSessionAcquired) {\n        var controller = appInstance.xrControllers[index];\n\n        if (controller && controller.userData.v3d && controller.userData.v3d.inputSource &&\n                controller.userData.v3d.inputSource.gamepad)\n            var gamepad = controller.userData.v3d.inputSource.gamepad;\n        else\n            var gamepad = undefined;\n\n    } else {\n        var gamepad = navigator.getGamepads()[index];\n    }\n\n    switch (prop) {\n    case 'AXIS':\n        if (gamepad)\n            return (gamepad.axes[controlIndex] || 0);\n        else\n            return 0;\n\n    case 'BUTTON':\n        if (gamepad) {\n            var button = gamepad.buttons[controlIndex];\n\n            if (button)\n                return button.pressed;\n            else\n                return false;\n        } else {\n            return false;\n        }\n\n    case 'ANALOG_BUTTON':\n        if (gamepad) {\n            var button = gamepad.buttons[controlIndex];\n\n            if (button)\n                return button.value;\n            else\n                return 0.0;\n        } else {\n            return 0.0;\n        }\n\n    case 'ID':\n        if (gamepad)\n            return gamepad.id;\n        else\n            return '';\n\n    case 'CONNECTION_STATUS':\n        if (gamepad)\n            return gamepad.connected;\n        else\n            return false;\n\n    case 'TIMESTAMP':\n        if (gamepad)\n            return gamepad.timestamp;\n        else\n            return 0.0;\n\n    case 'DEBUG_INFO':\n        if (gamepad) {\n\n            var axes = gamepad.axes;\n            var axesValues = []\n\n            for (var i = 0; i < axes.length; i++) {\n                axesValues.push(Math.round(axes[i] * 1000) / 1000);\n            }\n\n            var buttons = gamepad.buttons;\n            var btnsPressed = [];\n            var btnsValues = [];\n\n            for (var i = 0; i < buttons.length; i++) {\n                btnsPressed.push(buttons[i].pressed ? '☑' : '☐');\n                btnsValues.push(Math.round(buttons[i].value * 1000) / 1000);\n            }\n\n            return 'Index: ' + index + '\\n' +\n                   'Connected: ' + (gamepad.connected ? 'Yes' : 'No') + '\\n' +\n                   'ID: ' + (gamepad.id ? gamepad.id : 'N/A') + '\\n' +\n                   'Axes: ' + String(axesValues) + '\\n' +\n                   'Buttons: ' + String(btnsPressed) + '\\n' +\n                   'Analog Buttons: ' + String(btnsValues) + '\\n' +\n                   'Timestamp: ' + gamepad.timestamp.toFixed(3);\n        } else {\n            return 'Gamepad not available';\n        }\n    }\n\n}\n    ")])+"("+t+", "+n+", "+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]}}function updateBlocksCompat(){_tabCollection.tabs.forEach(function(e){for(var t=e.ws.getAllBlocks(),n=0;n<t.length;n++){var o=t[n];o.type in deprecatedBlocks&&(o.type=deprecatedBlocks[o.type])}})}function replaceDeprecated(e,t){Blockly.Blocks[t]=Blockly.Blocks[e];Blockly.JavaScript[t]=Blockly.JavaScript[e];deprecatedBlocks[t]=e}function reformDeprecatedFields(r,s){var e,t=r.appendDummyInput(TMP_DEPRECATED_INPUT_NAME);for(e in s){t.appendField(DEPRECATED_FIELD_INIT_VALUE,e);t.setVisible(!1)}r.setOnChange(function(e){if(e.blockId==r.id){if(e instanceof Blockly.Events.Create)for(var t in s){var n=s[t],o=r.getField(t),i=r.getField(n);if(o&&i){i=r.getFieldValue(t);i!=DEPRECATED_FIELD_INIT_VALUE&&r.setFieldValue(i,n)}}if(!r.workspace.isDragging()){r.removeInput(TMP_DEPRECATED_INPUT_NAME);r.setOnChange(!1)}}})}var PLUGIN_LIST_URL="/puzzles/plugin_list",domParser=new DOMParser;function Plugin(e){this.name=e||"";this.categoryXML=null;this.codeFun=function(){return""};this.blocks=[]}Object.assign(Plugin,{parseInitPlugFile:function(e){var t=domParser.parseFromString("<xml>".concat(e,"</xml>"),"text/xml"),e=getXMLParserError(t);if(null!==e)throw e;e=t.getElementsByTagName("category")[0],t=t.getElementsByTagName("script")[0];return{categoryXML:e,code:Plugin.parseScriptElem(t).code}},parseScriptElem:function(e){e=void 0===e?"":e.innerHTML;return new Function("\n            var code;\n            ".concat(e,"\n            return { code: code || null };\n        "))()}});Object.assign(Plugin.prototype,{fromInitPlugFile:function(e){var n=this;return fetch(e).then(function(e){return e.text()}).then(function(e){var t=Plugin.parseInitPlugFile(e),e=t.categoryXML,t=t.code;n.categoryXML=e||null;null!==t&&(n.codeFun=t);return n})},getCategoryXMLString:function(){return null===this.categoryXML?"":this.categoryXML.outerHTML},getCategoryXMLBlockElements:function(){return null===this.categoryXML?[]:Array.from(this.categoryXML.getElementsByTagName("block"))},getCategoryXMLBlockTypes:function(){return null===this.categoryXML?[]:Array.from(this.categoryXML.getElementsByTagName("block")).map(function(e){return e.getAttribute("type")})}});function Block(e){this.type=e||"";this.templateObj=null;this.codeFun=function(){return""}}Object.assign(Block,{parseBlockFile:function(e){var t=domParser.parseFromString("<xml>".concat(e,"</xml>"),"text/xml"),e=getXMLParserError(t);if(null!==e)throw e;t=t.getElementsByTagName("script")[0];return Block.parseScriptElem(t)},parseScriptElem:function(e){e=void 0===e?"":e.innerHTML;return new Function("\n            var template, code;\n            ".concat(e,"\n            return { template: template || null, code: code || null };\n        "))()}});Object.assign(Block.prototype,{fromBlockFile:function(e){var n=this;return fetch(e).then(function(e){return e.text()}).then(function(e){var e=Block.parseBlockFile(e),t=e.template,e=e.code;null!==t&&(n.templateObj={init:function(){return t.call(this,this)}});null!==e&&(n.codeFun=e);return n})}});function loadPluginList(){return fetch(PLUGIN_LIST_URL).then(function(e){return e.json()}).then(function(e){return e.pluginList})}function getPluginBlockType(e,t){return"".concat(e,".").concat(t)}function loadPlugins(i){return loadPluginList().then(function(e){var o=[];e.forEach(function(e){var t=new Plugin(e.name),n=t.fromInitPlugFile("".concat(i).concat(e.url)).catch(function(e){throw new PluginError(t,"error parsing init.plug file [".concat(e,"]"))}).then(function(n){var o=[],t=n.getCategoryXMLBlockTypes();e.blocks.filter(function(e){return t.includes(e.type)}).forEach(function(e){var t=new Block(getPluginBlockType(n.name,e.type)),e=t.fromBlockFile("".concat(i).concat(e.url)).catch(function(e){throw new BlockError(t,"error parsing block file [".concat(e,"]"))}).then(function(e){n.blocks.push(e)});o.push(e)});return Promise.all(o).then(function(){return n})});o.push(n)});return Promise.all(o)}).then(function(e){e.forEach(function(o){o.getCategoryXMLBlockElements().forEach(function(e){var t=e.getAttribute("type"),n=getPluginBlockType(o.name,t);void 0!==o.blocks.find(function(e){return e.type===n})&&e.setAttribute("type",n)})});return e})}function getXMLParserError(e){return 0<e.getElementsByTagName("parsererror").length?e.getElementsByTagName("xml")[0].textContent:null}function PluginError(e,t){this.name="PluginError";this.message="".concat(e.name,": ").concat(t)}function BlockError(e,t){this.name="BlockError";this.message="".concat(e.type,": ").concat(t)}function variableCreateSync(e,t,n,o){e.forEach(function(e){Blockly.Variables.getOrCreateVariablePackage(e,t,n,o);e.refreshToolboxSelection()})}function variableRenameSync(e,n,o){e.forEach(function(e){var t=e.getVariableById(n);if(t&&t.name!==o){e.renameVariableById(n,o);e.refreshToolboxSelection()}})}function variableDeleteSync(e,o){e.forEach(function(e){var t=e.getVariableById(o);if(t){var n=e.getVariableUsesById(o);e.deleteVariableInternal_(t,n);e.refreshToolboxSelection()}})}function procedureCreateSync(e,n){e.forEach(function(e){if(n.workspace!==e)if(void 0===e.getTopBlocks().find(function(e){return e.id===n.id&&e.isProxyProcDefBlock_})){var t=BlocklyExt.Procedures.ProxyDefBlock(n,e);e.addTopBlock(t);e.refreshToolboxSelection()}})}function procedureChangeSync(e,n,o){e.forEach(function(e){var t=e.getTopBlocks().find(function(e){return e.id===n.id&&e.isProxyProcDefBlock_});if(void 0!==t){"field"===o.element?Blockly.Procedures.getCallers(o.oldValue,e).forEach(function(e){e.renameProcedure(o.oldValue,o.newValue)}):"disabled"===o.element?Blockly.Procedures.getCallers(t.getProcedureDef()[0],e).forEach(function(e){e.onchange(o)}):"mutation"===o.element&&Blockly.Procedures.mutateCallers(t);e.refreshToolboxSelection()}})}function procedureDeleteSync(e,n,o){e.forEach(function(e){var t=e.getTopBlocks().find(function(e){return e.id===n&&e.isProxyProcDefBlock_});if(void 0!==t){e.removeTopBlock(t);e.getAllBlocks().forEach(function(e){e.getProcedureCall&&e.onchange&&e.onchange(o)});e.refreshToolboxSelection()}})}function combineSharedWorkspaces(e){var n=new Blockly.Workspace;e.forEach(function(e,t){e.getTopBlocks(!0).forEach(function(e){n.addTopBlock(e)});0===t&&(n.variableMap_=e.getVariableMap())});var t=n.getTopBlocks;n.getTopBlocks=function(){return t.call(this,!1)};return n}function disposeCombinedWorkspace(e){e.topBlocks_=[];e.variableMap_=new Blockly.VariableMap(this);e.dispose()}var MIN_WIDTH=30,MIN_HEIGHT=20;function FloatWindow(e){var t=e.x,n=void 0===t?0:t,o=e.y,i=void 0===o?0:o,r=e.width,s=void 0===r?MIN_WIDTH:r,t=e.height,o=void 0===t?MIN_HEIGHT:t,r=e.restrictElem,t=e.minWidth,t=void 0===t?MIN_WIDTH:t,e=e.minHeight,e=void 0===e?MIN_HEIGHT:e;this.autoFitContent=!0;this.root=document.createElement("div");this.root.classList.add("float-window");this.root.innerHTML='\n        <div class="float-window__topbar"></div>\n        <div class="float-window__content-fit-wrapper">\n            <div class="float-window__content"></div>\n        </div>\n        <div class="float-window__resizer">\n            <div class="float-window__resizer-border float-window__resizer-border--top"></div>\n            <div class="float-window__resizer-border float-window__resizer-border--bottom"></div>\n            <div class="float-window__resizer-border float-window__resizer-border--left"></div>\n            <div class="float-window__resizer-border float-window__resizer-border--right"></div>\n        </div>\n    ';this.topbar=this.root.querySelector(".float-window__topbar");this.content=this.root.querySelector(".float-window__content");this.contentFitWrapper=this.root.querySelector(".float-window__content-fit-wrapper");this.resizer=this.root.querySelector(".float-window__resizer");this.moveCb=null;this.resizeCb=null;this.resizeEndCb=null;this.setPosition(n,i).setWidth(s).setHeight(o);makeInteractive(this,{restrictElem:r,minWidth:t,minHeight:e})}Object.assign(FloatWindow.prototype,{getWidth:function(){return parseFloat(this.root.style.width)||0},setWidth:function(e){this.root.style.width="".concat(e,"px");null!==this.resizeCb&&this.resizeCb(null);return this},getHeight:function(){return parseFloat(this.root.style.height)||0},setHeight:function(e){this.root.style.height="".concat(e,"px");null!==this.resizeCb&&this.resizeCb(null);return this},getPosX:function(){return parseFloat(this.root.getAttribute("data-x"))||0},getPosY:function(){return parseFloat(this.root.getAttribute("data-y"))||0},setPosition:function(e,t){this.root.style.webkitTransform=this.root.style.transform="translate(".concat(e,"px, ").concat(t,"px)");this.root.setAttribute("data-x",e);this.root.setAttribute("data-y",t);return this},moveBy:function(e,t){this.setPosition(this.getPosX()+e,this.getPosY()+t);return this},getContentOffsets:function(){return{x:parseFloat(this.content.getAttribute("data-offset-x"))||0,y:parseFloat(this.content.getAttribute("data-offset-y"))||0,width:parseFloat(this.content.getAttribute("data-offset-width"))||0,height:parseFloat(this.content.getAttribute("data-offset-height"))||0}},setContentOffsets:function(e){var t=e.x,n=e.y,o=e.width,e=e.height;this.content.setAttribute("data-offset-x",t);this.content.setAttribute("data-offset-y",n);this.content.setAttribute("data-offset-width",o);this.content.setAttribute("data-offset-height",e);this.content.style.transform="translate(".concat(t,"px, ").concat(n,"px)");this.content.style.width="calc(100% - ".concat(o,"px)");this.content.style.height="calc(100% - ".concat(e,"px)")},fitContentToWrapper:function(){this.setContentOffsets({x:0,y:0,width:0,height:0})}});function makeInteractive(n,e){var t=e.restrictElem,o=e.minWidth,i=e.minHeight,r=[],e=[];if(t){r.push(interact.modifiers.restrict({restriction:t}));e.push(interact.modifiers.restrict({restriction:t}))}e.push(interact.modifiers.restrictSize({min:{width:o,height:i}}));interact(n.topbar).draggable({modifiers:r}).on("dragmove",function(e){n.moveBy(e.dx,e.dy);null!==n.moveCb&&n.moveCb(e)});interact(n.resizer).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},modifiers:e}).on("resizemove",function(e){n.setWidth(e.rect.width).setHeight(e.rect.height).moveBy(e.deltaRect.left,e.deltaRect.top);if(!n.autoFitContent){var t=n.getContentOffsets();t.x-=e.deltaRect.left;t.y-=e.deltaRect.top;t.width-=e.deltaRect.left-e.deltaRect.right;t.height-=e.deltaRect.top-e.deltaRect.bottom;n.setContentOffsets(t)}null!==n.resizeCb&&n.resizeCb(e)}).on("resizeend",function(e){n.fitContentToWrapper();null!==n.resizeEndCb&&n.resizeEndCb(e)})}var script$1={props:{baseText:{type:String,default:"Viewport"},isPaused:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},isRendering:{type:Boolean,default:!1},loadPercentage:{type:Number,default:0},fps:{type:Number,default:0}}},__vue_script__$1=script$1,__vue_render__$1=function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"viewport-window__title"},[t("span",[e._v(e._s(e.baseText))]),e._v(" "),e.isPaused?t("span",[e._v("(paused)")]):e.isLoading?t("span",[e._v(e._s("("+e.loadPercentage+")%"))]):e.isRendering?t("span",[e._v(e._s("(FPS: "+e.fps+")"))]):e._e()])},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;var __vue_inject_styles__$1=function(e){e&&e("data-v-0b3f37ff_0",{source:".viewport-window__title{position:absolute;height:100%;line-height:20px;left:25px}",map:void 0,media:void 0})},__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1,__vue_component__$1=normalizeComponent({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},__vue_inject_styles__$1,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,!1,createInjector,void 0,void 0),OFFSET_RIGHT=18,OFFSET_TOP=28,SCALE_X=.4,SCALE_Y=.5;function ViewportWindow(e){var t=e.x,n=void 0===t?0:t,o=e.y,i=void 0===o?0:o,r=e.width,t=e.height,o=e.viewportElem,o=void 0===o?null:o,e=e.restrictElem,s=this;FloatWindow.call(s,{x:n,y:i,width:r,height:t,restrictElem:e,minWidth:300,minHeight:150});s._paused=!1;s._hidden=!1;s.appInstance=null;s.pauseCb=null;s.playCb=null;s.hideCb=null;s.showCb=null;s.autoFitContent=!1;s.resizeEndCb=function(){null!==s.appInstance&&s.appInstance.onResize()};s.contentFitWrapper.classList.add("float-window__content-fit-wrapper--checkered");s.resizeCb=function(e){if(null!==e){var t=s.contentFitWrapper,n=parseFloat(t.getAttribute("bkg-offset-x"))||0,o=parseFloat(t.getAttribute("bkg-offset-y"))||0;n-=e.deltaRect.left;o-=e.deltaRect.top;t.style.setProperty("background-position","".concat(n,"px ").concat(o,"px"));t.setAttribute("bkg-offset-x",n);t.setAttribute("bkg-offset-y",o)}};null!==o&&s.content.appendChild(o);s.topbar.innerHTML='\n        <div class="viewport-window__button viewport-window__button--pause js-viewport-button-play-pause"></div>\n        <viewport-window-title></viewport-window-title>\n        <div class="viewport-window__button viewport-window__button--close js-viewport-button-close"></div>\n    ';s.title=new Vue(__vue_component__$1).$mount(s.topbar.querySelector("viewport-window-title"));s.buttonPlayPause=s.topbar.querySelector(".js-viewport-button-play-pause");s.buttonClose=s.topbar.querySelector(".js-viewport-button-close");s.buttonPlayPause.addEventListener("click",function(){s._paused?s.play():s.pause()});s.buttonClose.addEventListener("click",function(){s.hide()});s.resetDimensions()}ViewportWindow.prototype=Object.assign(Object.create(FloatWindow.prototype),{constructor:ViewportWindow,_appDisposeListener:function(){this.setAppInstance(null)},resetDimensions:function(){this.setWidth(SCALE_X*window.innerWidth).setHeight(SCALE_Y*window.innerHeight);this.setPosition(window.innerWidth-SCALE_X*window.innerWidth-OFFSET_RIGHT,OFFSET_TOP);null!==this.appInstance&&this.appInstance.onResize()},pause:function(){this._paused=!0;this.title.isPaused=!0;this.buttonPlayPause.classList.remove("viewport-window__button--pause");this.buttonPlayPause.classList.add("viewport-window__button--play");null!==this.appInstance&&this.appInstance.disableRendering();null!==this.pauseCb&&this.pauseCb()},play:function(){this._paused=!1;this.title.isPaused=!1;this.buttonPlayPause.classList.remove("viewport-window__button--play");this.buttonPlayPause.classList.add("viewport-window__button--pause");null!==this.appInstance&&this.appInstance.enableRendering();null!==this.playCb&&this.playCb()},isPaused:function(){return this._paused},hide:function(){this._hidden=!0;this.root.classList.add("float-window--hidden");null!==this.hideCb&&this.hideCb()},show:function(){this._hidden=!1;this.root.classList.remove("float-window--hidden");null!==this.appInstance&&this.appInstance.onResize();null!==this.showCb&&this.showCb()},isHidden:function(){return this._hidden},setAppInstance:function(e){var n=this;null!==this.appInstance&&this.appInstance.removeEventListener&&this.appInstance.removeEventListener("dispose",function(){n._appDisposeListener()});this.appInstance=e;if(null!==this.appInstance){this.appInstance.addEventListener&&this.appInstance.addEventListener("dispose",function(){n._appDisposeListener()});this.content.innerHTML="";this.content.appendChild(this.appInstance.container);this.appInstance.onResize();this.isPaused()?this.appInstance.disableRendering():this.appInstance.enableRendering();var o=0;this.appInstance.renderCallbacks.push(function(e,t){n.title.isRendering=!0;if(0<e){o=v3d.MathUtils.expAverage(o,1/e,e,1);n.title.fps=Math.round(o)}})}}});var script$2={data:function(){return{isLibraryEntry:!1,isLibraryEntryStock:!1,categoryBkgColor:"#ffffff",selected:!1}},computed:{classes:function(){var e=["blocklyTreeRow__custom-icon","blocklyTreeRow__custom-icon--".concat(this.isLibraryEntry?"library":"category")];this.isLibraryEntry&&e.push("blocklyTreeRow__custom-icon--library-".concat(this.isLibraryEntryStock?"stock":"user"));return e},inlineStyles:function(){return this.isLibraryEntry?"":"background-color: ".concat(this.categoryBkgColor)},isLibraryEntryUser:function(){return this.isLibraryEntry&&!this.isLibraryEntryStock}},methods:{onClick:function(e){e.stopPropagation();this.clickCb&&this.clickCb()}}},__vue_script__$2=script$2,__vue_render__$2=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classes,style:t.inlineStyles,on:{click:function(e){t.isLibraryEntryUser&&t.selected&&t.onClick(e)}}})},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;var __vue_inject_styles__$2=function(e){e&&e("data-v-2e8543a8_0",{source:".blocklyTreeRow__custom-icon{position:absolute}.blocklyTreeRow__custom-icon--category{width:12px;height:12px;top:6px;left:4px;border-radius:12px}.blocklyTreeIconClosedLtr+.blocklyTreeLabel+.blocklyTreeRow__custom-icon--category,.blocklyTreeIconOpen+.blocklyTreeLabel+.blocklyTreeRow__custom-icon--category{display:none}.blocklyTreeRow__custom-icon--library{width:6px;height:6px;top:9px;left:10px;background-color:#b9b9b9;border-radius:6px}.blocklyTreeSelected>.blocklyTreeRow__custom-icon--library-stock{background:url(/puzzles/media/ui/puzzles_library_stock.svg) #fff}.blocklyTreeSelected>.blocklyTreeRow__custom-icon--library-user{background:url(/puzzles/media/ui/puzzles_library_delete.svg) #fff;cursor:pointer}.blocklyTreeSelected>.blocklyTreeRow__custom-icon--library{width:16px;height:16px;top:4px;left:5px;border-radius:3px;box-shadow:inset 0 0 0 #000}.blocklyTreeRow:not(.blocklyTreeSelected):hover>.blocklyTreeRow__custom-icon--library{background-color:#fff}",map:void 0,media:void 0})},__vue_scope_id__$2=void 0,__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1,__vue_component__$2=normalizeComponent({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},__vue_inject_styles__$2,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,!1,createInjector,void 0,void 0),_entryIconsPerWorkspace={},BLOCKLY_CATEGORY_DEFAULT_HEX_COLOR="#57e";function cleanupEntryIcons(e){if(e in _entryIconsPerWorkspace){for(var t in _entryIconsPerWorkspace[e])_entryIconsPerWorkspace[e][t].$destroy();delete _entryIconsPerWorkspace[e]}}function customizeToolboxLayout(o,e,r,s){cleanupEntryIcons(o.workspace_.id);var a=_entryIconsPerWorkspace[o.workspace_.id]={},l=r;o.tree_.forEachChild(function(e){var t=e.getElement(),n=e.getRowElement(),o=e.getText();if(n.classList.contains("blocklyTreeSeparator"))l=!1;else{var i=new Vue(__vue_component__$2).$mount();i.isLibraryEntry=r;i.isLibraryEntryStock=l;i.categoryBkgColor=e.hexColour||BLOCKLY_CATEGORY_DEFAULT_HEX_COLOR;i.clickCb=function(){s(o)};a[o]=i;n.appendChild(i.$el);if(r){t.classList.add("blocklyTreeRoot__row-wrapper--library");l?t.classList.add("blocklyTreeRoot__row-wrapper--library-stock"):t.classList.add("blocklyTreeRoot__row-wrapper--library-user");e.getLabelElement().classList.add("blocklyTreeLabel--library")}else t.classList.add("blocklyTreeRoot__row-wrapper--category")}});var i=o.tree_.onAfterSelected_||function(){};o.tree_.onAfterSelected(function(e,t){if(null!==e){var n=e.getText();n in a&&(a[n].selected=!1)}if(null!==t){n=t.getText();n in a&&(a[n].selected=!0)}i.call(o,e,t)})}var script$3={props:{render:{type:Boolean,default:!1},message:{type:String,default:""},undoStack:{type:Array,default:function(){return[]}},redoStack:{type:Array,default:function(){return[]}}},data:function(){return{showLibrary:!1,minimizeToolbox:!1,showViewport:!0,hasUnupdatedLogic:!1,hasUnsavedChanges:!1,hasUndoActions:!1,hasRedoActions:!1}},computed:{classesSwitch:function(){return["task-bar__control-button","task-bar__control-button--switch","task-bar__control-button--switch-".concat(this.showLibrary?"categories":"library")]},classesToolbox:function(){return["task-bar__control-button","task-bar__control-button--toolbox","task-bar__control-button--toolbox-".concat(this.minimizeToolbox?"maximize":"minimize")]},classesViewport:function(){return["task-bar__control-button","task-bar__control-button--viewport","task-bar__control-button--viewport-".concat(this.showViewport?"active":"inactive")]},classesCenter:function(){return["task-bar__control-button","task-bar__control-button--center"]},classesRun:function(){return["task-bar__control-button","task-bar__control-button--run","task-bar__control-button--run-".concat(this.hasUnupdatedLogic?"active":"inactive")]},classesSave:function(){return["task-bar__control-button","task-bar__control-button--save","task-bar__control-button--save-".concat(this.hasUnsavedChanges?"active":"inactive")]},classesUndo:function(){return["task-bar__control-button","task-bar__control-button--undo","task-bar__control-button--undo-".concat(this.hasUndoActions?"active":"inactive")]},classesRedo:function(){return["task-bar__control-button","task-bar__control-button--redo","task-bar__control-button--redo-".concat(this.hasRedoActions?"active":"inactive")]},classesHelp:function(){return["task-bar__control-button","task-bar__control-button--help"]}},watch:{"undoStack.length":function(e,t){this.hasUndoActions=0<e},"redoStack.length":function(e,t){this.hasRedoActions=0<e}},methods:{onSwitch:function(){this.showLibrary=!this.showLibrary;this.switchCb&&this.switchCb()},onToolbox:function(){this.minimizeToolbox=!this.minimizeToolbox;this.toolboxCb&&this.toolboxCb()},onViewport:function(){this.showViewport=!this.showViewport;this.viewportCb&&this.viewportCb()},onCenter:function(){this.centerCb&&this.centerCb()},onRun:function(){this.hasUnupdatedLogic=!1;this.runCb&&this.runCb()},onSave:function(){this.hasUnsavedChanges=!1;this.saveCb&&this.saveCb()},onUndo:function(){this.undoCb&&this.undoCb()},onRedo:function(){this.redoCb&&this.redoCb()},onHelp:function(){this.helpCb&&this.helpCb()}}},__vue_script__$3=script$3,__vue_render__$3=function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"task-bar",class:e.render?"":"u-none"},[t("div",{class:e.classesSwitch,attrs:{title:"Switch Between Puzzles Library and Puzzles Categories"},on:{click:e.onSwitch}}),e._v(" "),t("div",{class:e.classesToolbox,attrs:{title:"Minimize/Maximize Puzzles Toolbox"},on:{click:e.onToolbox}}),e._v(" "),t("div",{class:e.classesViewport,attrs:{title:"Show/Hide Viewport Window"},on:{click:e.onViewport}}),e._v(" "),t("div",{class:e.classesCenter,attrs:{title:"Center Puzzles Workspace"},on:{click:e.onCenter}}),e._v(" "),t("div",{staticClass:"task-bar__divider task-bar__divider--left"}),e._v(" "),t("div",{staticClass:"task-bar__message-container"},[t("div",{staticClass:"task-bar__message",domProps:{innerHTML:e._s(e.message)}})]),e._v(" "),t("div",{class:e.classesRun,attrs:{title:"Run Your Puzzles (Ctrl-Space)"},on:{click:e.onRun}}),e._v(" "),t("div",{class:e.classesSave,attrs:{title:"Save Your Puzzles (Ctrl-S)"},on:{click:e.onSave}}),e._v(" "),t("div",{staticClass:"task-bar__divider task-bar__divider--middle"}),e._v(" "),t("div",{class:e.classesUndo,attrs:{title:"Undo the Last Action (Ctrl-Z)"},on:{click:e.onUndo}}),e._v(" "),t("div",{class:e.classesRedo,attrs:{title:"Redo the Last Action (Ctrl-Shift-Z)"},on:{click:e.onRedo}}),e._v(" "),t("div",{class:e.classesHelp,attrs:{title:"Open the Puzzles Manual"},on:{click:e.onHelp}})])},__vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=!0;var __vue_inject_styles__$3=function(e){e&&e("data-v-6118bbba_0",{source:"body,body.theme-light{--task-bar-backgroundColor:#444;--task-bar__message-color:#fff}body.theme-dark{--task-bar-backgroundColor:#282828;--task-bar__message-color:#e3e3e3}.task-bar{position:fixed;width:100%;height:50px;bottom:0;left:0;background-color:var(--task-bar-backgroundColor)}.task-bar__divider{position:absolute;top:7px;height:36px;border-left:1px solid #fff}.task-bar__divider--left{left:184px}.task-bar__divider--middle{left:calc(50% + .5px)}.task-bar__control-button{position:absolute;top:7px;width:36px;height:36px;cursor:pointer}.task-bar__control-button--switch{left:8px}.task-bar__control-button--switch-library{background-image:url(/puzzles/media/ui/puzzles_library_button.svg)}.task-bar__control-button--switch-categories{background-image:url(/puzzles/media/ui/puzzles_puzzles_button.svg)}.task-bar__control-button--toolbox{left:52px}.task-bar__control-button--toolbox-minimize{background-image:url(/puzzles/media/ui/puzzles_minimize_left_button.svg)}.task-bar__control-button--toolbox-maximize{background-image:url(/puzzles/media/ui/puzzles_maximize_left_button.svg)}.task-bar__control-button--viewport{left:96px}.task-bar__control-button--viewport-active{background-image:url(/puzzles/media/ui/puzzles_viewport_active_button.svg)}.task-bar__control-button--viewport-inactive{background-image:url(/puzzles/media/ui/puzzles_viewport_inactive_button.svg)}.task-bar__control-button--center{left:140px;background-image:url(/puzzles/media/ui/puzzles_center_button.svg)}.task-bar__control-button--run{left:calc(50% - 87px)}.task-bar__control-button--run-active{background-image:url(/puzzles/media/ui/puzzles_runcode_active_button.svg)}.task-bar__control-button--run-inactive{background-image:url(/puzzles/media/ui/puzzles_runcode_inactive_button.svg)}.task-bar__control-button--save{left:calc(50% - 43px)}.task-bar__control-button--save-active{background-image:url(/puzzles/media/ui/puzzles_savecode_active_button.svg)}.task-bar__control-button--save-inactive{background-image:url(/puzzles/media/ui/puzzles_savecode_inactive_button.svg)}.task-bar__control-button--undo{left:calc(50% + 9px)}.task-bar__control-button--undo-active{background-image:url(/puzzles/media/ui/puzzles_undo_active_button.svg)}.task-bar__control-button--undo-inactive{background-image:url(/puzzles/media/ui/puzzles_undo_inactive_button.svg)}.task-bar__control-button--redo{left:calc(50% + 53px)}.task-bar__control-button--redo-active{background-image:url(/puzzles/media/ui/puzzles_redo_active_button.svg)}.task-bar__control-button--redo-inactive{background-image:url(/puzzles/media/ui/puzzles_redo_inactive_button.svg)}.task-bar__control-button--help{right:8px;background-image:url(/puzzles/media/ui/puzzles_help_button.svg)}.task-bar__message-container{display:flex;align-items:center;position:absolute;height:100%;max-width:calc(50% - 303px);top:0;left:200px;line-height:18px}.task-bar__message{font-size:.83vw;color:var(--task-bar__message-color)}@media screen and (min-width:1920px){.task-bar__message{font-size:12pt}}",map:void 0,media:void 0})},__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1,__vue_component__$3=normalizeComponent({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},__vue_inject_styles__$3,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,!1,createInjector,void 0,void 0),script$4={props:{render:{type:Boolean,default:!1}}},__vue_script__$4=script$4,__vue_render__$4=function(){var e=this.$createElement,e=this._self._c||e;return e("div",{staticClass:"puzzles-preloader",class:this.render?"":"u-none"},[e("div",{staticClass:"puzzles-preloader__logo"}),this._v(" "),e("div",{staticClass:"puzzles-preloader__title"},[this._v("Puzzles loading...")])])},__vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=!0;var __vue_inject_styles__$4=function(e){e&&e("data-v-77bbc8a4_0",{source:"body,body.theme-light{--puzzles-preloader-backgroundColor:#fff;--puzzles-preloader-backgroundImage:url(/puzzles/media/ui/puzzles_background_pattern.svg);--puzzles-preloader-backgroundGradientColorTo:#fff;--puzzles-preloader__logo-backgroundImage:url(/puzzles/media/ui/puzzles_preloader_icon.svg);--puzzles-preloader__logo-filter:none;--puzzles-preloader__title-color:#000}body,body.theme-dark,body.theme-light{--puzzles-preloader-backgroundGradientColorFrom:transparent}body.theme-dark{--puzzles-preloader-backgroundColor:#000;--puzzles-preloader-backgroundImage:url(/puzzles/media/ui/puzzles_background_pattern_dark.svg);--puzzles-preloader-backgroundGradientColorTo:#000;--puzzles-preloader__logo-backgroundImage:url(/puzzles/media/ui/puzzles_preloader_icon_dark.svg);--puzzles-preloader__logo-filter:drop-shadow(0 0 10px #8c8c8c);--puzzles-preloader__title-color:#c8c8c8}.puzzles-preloader{position:absolute;width:100%;height:100%;top:0;left:0;background:radial-gradient(circle 350px at center,var(--puzzles-preloader-backgroundGradientColorFrom),var(--puzzles-preloader-backgroundGradientColorTo)),var(--puzzles-preloader-backgroundImage) 50% repeat;background-color:var(--puzzles-preloader-backgroundColor);font-family:Rubik;z-index:999}.puzzles-preloader__logo{position:absolute;width:110px;height:110px;top:calc(50% - 55px);left:calc(50% - 55px);background:var(--puzzles-preloader__logo-backgroundImage) 50% no-repeat;filter:var(--puzzles-preloader__logo-filter)}.puzzles-preloader__title{position:absolute;width:100%;top:calc(50% + 79px);text-align:center;font-size:14pt;color:var(--puzzles-preloader__title-color)}",map:void 0,media:void 0})},__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1,__vue_component__$4=normalizeComponent({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},__vue_inject_styles__$4,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,!1,createInjector,void 0,void 0);function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";"top"===n&&o.firstChild?o.insertBefore(t,o.firstChild):o.appendChild(t);t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}}var css_248z='body,body.theme-light{--title-bar-backgroundColor:#444;--blocklyToolboxDiv-backgroundColor:#fbfbfb;--blocklyToolboxDiv-scrollbarThumbColor:#ccc;--blocklyTreeLabel-color:#000;--blocklyTreeRow--notSelected-onHover-backgroundColor:#dee1e5;--blocklyScrollbarHandle-fill:#ccc;--blocklyScrollbarHandle-onHover-fill:#bbb;--blocklySvg-backgroundColor:#fff;--float-window-borderColor:#9b9b9b;--blocklySvg__defsPatternLine-strokeColor:#ccc;--blocklyFlyoutBackground-fill:#ddd;--blocklyFlyoutButton-fill:#888;--blocklyFlyoutButton-onHover-fill:#aaa;--blocklyFlyoutLabelText-fill:#000}body.theme-dark{--title-bar-backgroundColor:#282828;--blocklyToolboxDiv-backgroundColor:#141414;--blocklyToolboxDiv-scrollbarThumbColor:#454545;--blocklyTreeLabel-color:#c8c8c8;--blocklyTreeRow--notSelected-onHover-backgroundColor:#272c32;--blocklyScrollbarHandle-fill:#454545;--blocklyScrollbarHandle-onHover-fill:#777;--blocklySvg-backgroundColor:#0f0f0f;--float-window-borderColor:#444;--blocklySvg__defsPatternLine-strokeColor:#656565;--blocklyFlyoutBackground-fill:#202020;--blocklyFlyoutButton-fill:#454545;--blocklyFlyoutButton-onHover-fill:#777;--blocklyFlyoutLabelText-fill:#c8c8c8}@font-face{font-family:Rubik;font-style:normal;font-weight:400;src:local("Rubik"),local("Rubik-Regular"),url(/puzzles/media/fonts/Rubik-Regular.woff) format("woff")}div#blocklyCont{all:initial;position:fixed;top:0;bottom:0;left:0;right:0;user-select:none;background-color:#444;overflow:hidden;padding-top:26px;padding-bottom:50px;font-family:Rubik;z-index:100}div#blocklyCont.withWarnMessage{padding-top:39px}.title-bar{position:fixed;width:100%;height:26px;top:0;left:0;background-color:var(--title-bar-backgroundColor)}.title-bar__title-puzzles{position:absolute;width:140px;height:26px;top:0;left:0;padding-left:30px;line-height:26px;color:#fff;font-size:12pt;background:url(/puzzles/media/ui/puzzles_head_icon.svg) 6px no-repeat}.tabHeader--right-border:after,.title-bar__title-puzzles--right-border:after{content:"";position:absolute;top:2px;right:0;width:1px;height:22px;border-right:1px solid #ccc}div#tabButtons{position:absolute;height:26px;top:0;left:170px;white-space:nowrap}div#tabButtons .tabHeader{position:relative;display:inline-block;width:110px;height:100%;padding:0 26px 0 8px;cursor:pointer;font-size:12pt;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:26px}div#tabButtons .tabHeader--active{background-color:#fff;color:#444}div#tabButtons .tabHeader--inactive{background-color:inherit;color:#fff}div#tabButtons .tabHeader .tabHeaderClose{position:absolute;top:5px;right:6px;width:16px;height:16px;background:url(/puzzles/media/ui/puzzles_delete_tab_button.svg) 50% no-repeat}div#tabButtons .tabHeader--active .tabHeaderClose{display:block}div#tabButtons .tabHeader--inactive .tabHeaderClose{display:none}div#tabButtons .tabAdd{float:right;height:16px;width:16px;margin:5px 0 0 6px;cursor:pointer;background:url(/puzzles/media/ui/add_template_button_icon.svg) no-repeat;background-size:cover}div#blocklyTabs,div#blocklyTabs .tabBody{height:100%;width:100%}div#blocklyTabs .tabBody-inactive{position:absolute;visibility:hidden}.blocklyTabs--no-toolbox .blocklyToolboxDiv{visibility:hidden;width:0!important;height:0!important;left:-10000px!important;top:-10000px!important;min-width:0!important}.blocklyWidgetDiv .goog-menu{max-height:220px}#warnMessage{height:20px;overflow:hidden;width:100%;margin-top:-20px;background-color:#ecb9b9;color:red;text-align:center;font-size:18px;text-shadow:1px 1px #800}.livePreviewDisabled .blocklyIconShape{fill:#3e5164}.blocklyDropDownDiv .goog-menuitem{padding:5px 15px}.blocklyMainBackground{stroke-width:0}.blocklyHtmlTextAreaInput{border:1px solid #9b9b9b}.float-window{position:absolute;top:0;left:0;border:1px solid var(--float-window-borderColor);z-index:999;user-select:none;display:flex;flex-direction:column;font-family:Rubik}.float-window--hidden{visibility:hidden}.float-window--hidden *{visibility:hidden!important}.float-window__topbar{position:relative;min-height:21px;border-bottom:1px solid #656565;color:#fff;background-color:#444;touch-action:none;font-size:10pt}.float-window__content{width:100%;height:100%}.float-window__content-fit-wrapper{position:relative;height:100%;overflow:hidden}.float-window__content-fit-wrapper--checkered{background:url(/puzzles/media/ui/checker.png) repeat}.float-window__resizer{position:absolute;z-index:999;width:100%;height:100%;top:0;pointer-events:none;box-sizing:border-box;touch-action:none}.float-window__resizer-border{position:absolute;pointer-events:all}.float-window__resizer-border--top{top:0;left:0;width:100%;height:5px}.float-window__resizer-border--bottom{bottom:0;left:0;width:100%;height:5px}.float-window__resizer-border--left{top:0;left:0;width:5px;height:100%}.float-window__resizer-border--right{top:0;right:0;width:5px;height:100%}.viewport-window__button{position:absolute;width:16px;height:14px;top:3px;cursor:pointer}.viewport-window__button--pause{left:5px;background:url(/puzzles/media/ui/puzzles_pause_render_small_button.svg) 50% no-repeat}.viewport-window__button--play{left:5px;background:url(/puzzles/media/ui/puzzles_render_small_button.svg) 50% no-repeat}.viewport-window__button--close{right:5px;background:url(/puzzles/media/ui/window_close_button.svg) 50% no-repeat}.blocklySvg{background-color:var(--blocklySvg-backgroundColor)}.blocklySvg>defs>pattern>line{stroke:var(--blocklySvg__defsPatternLine-strokeColor)}.blocklyToolboxDiv{min-width:170px;max-width:240px;background-color:var(--blocklyToolboxDiv-backgroundColor);scrollbar-width:thin;scrollbar-color:var(--blocklyToolboxDiv-scrollbarThumbColor) transparent}.blocklyToolboxDiv::-webkit-scrollbar{width:6px}.blocklyToolboxDiv::-webkit-scrollbar-thumb{background-color:var(--blocklyToolboxDiv-scrollbarThumbColor)}.blocklyTreeRoot{padding:0}.blocklyFlyoutBackground{fill-opacity:1;fill:var(--blocklyFlyoutBackground-fill)}.blocklyFlyoutButton{fill:var(--blocklyFlyoutButton-fill)}.blocklyFlyoutButton:hover{fill:var(--blocklyFlyoutButton-onHover-fill)}.blocklyFlyoutLabelText{fill:var(--blocklyFlyoutLabelText-fill)}.blocklyScrollbarHandle{fill:var(--blocklyScrollbarHandle-fill)}.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,.blocklyScrollbarHandle:hover{fill:var(--blocklyScrollbarHandle-onHover-fill)}.blocklyTreeRow{position:relative;height:21px;padding-bottom:3px;margin-bottom:0;border-left:none!important}.blocklyTreeRow:not(.blocklyTreeSelected):hover{background-color:var(--blocklyTreeRow--notSelected-onHover-backgroundColor)}.blocklyTreeLabel{display:inline-block;padding-left:5px;overflow:hidden;text-overflow:ellipsis;max-width:209px;font-family:inherit;font-size:12pt;color:var(--blocklyTreeLabel-color)}.blocklyTreeLabel--library{padding-left:12px}.blocklyTreeIcon{width:14px;margin-left:2px}.blocklyTreeSeparator{border-bottom:1px solid #d1d1d1;margin:3px 5px}.blocklyTreeRoot__row-wrapper--library>.blocklyTreeSelected{background-color:#444!important}.blocklyTreeRoot__row-wrapper--library-stock,.u-italic{font-style:italic}.u-none{display:none}.u-flex{display:flex}.u-text-center{text-align:center}';styleInject(css_248z);var domParser$1=new DOMParser,_tabCollection=null,_viewportWindow=null,_preloader=null,_taskBar=null,_titleBar=null,_msgTimeout,_logicXMLPath,_libraryXML,_libraryXMLStr="",_libraryStockXML,_libraryStockXMLStr="",_pluginsToolboxXMLStr="",_pluginsGlobalCodeStr="",_paths={mediaDir:"media/",libXMLPath:"my_library.xml",libStockXMLPath:"library.xml"},ALLOW_INIT_ATTR="allowInit",CONNECTION_ERROR_MSG="Connection error! Make sure that the development server is actually running.",DEFAULT_LOGIC_XML_STR='\n<xml xmlns="http://www.w3.org/1999/xhtml">\n<tab name="'.concat(LABEL_INIT,'" type="').concat(TAB_INIT,'" active="false"></tab>\n<tab name="').concat(LABEL_MAIN,'" type="').concat(TAB_MAIN,'" active="true"></tab>\n</xml>\n'),DEFAULT_LIBRARY_XML_STR='<?xml version="1.0" ?><xml/>',_runCb=null;function getSharedWSGroup(t){var n=[];if(_tabCollection){var e=_tabCollection.getTabByWS(t),o=e?e.type:null;_tabCollection.tabs.forEach(function(e){if(e.ws!=t)switch(o){case TAB_INIT:e.type==TAB_INIT&&n.push(e.ws);break;case TAB_MAIN:case TAB_SECONDARY:e.type!=TAB_MAIN&&e.type!=TAB_SECONDARY||n.push(e.ws)}})}n.push(t);return n}function createBaseUI(){var e=document.createElement("div");e.id="blocklyCont";e.innerHTML='\n        <div id="preloader-mount"></div>\n        <div class="title-bar u-none">\n            <div class="title-bar__title-puzzles js-title-puzzles">Verge3D Puzzles</div>\n            <div id="tabButtons"></div>\n        </div>\n        <div id="blocklyTabs"></div>\n        <div id="task-bar-mount"></div>\n    ';return e}function createPreloader(){return new Vue(__vue_component__$4)}function createTitleBar(){return document.getElementsByClassName("title-bar")[0]}function createTaskBar(){return new Vue(__vue_component__$3)}function preloadPreloaderResources(e,t){var n=new createjs.LoadQueue(!0,e),e=["media/fonts/Rubik-Regular.woff"];if("dark"===t){e.push("media/ui/puzzles_background_pattern_dark.svg");e.push("media/ui/puzzles_preloader_icon_dark.svg")}else{e.push("media/ui/puzzles_background_pattern.svg");e.push("media/ui/puzzles_preloader_icon.svg")}n.loadManifest(e);return new Promise(function(e){return n.on("complete",e)})}function preloadTitleBarResources(e){var t=new createjs.LoadQueue(!0,e);t.loadManifest(["media/ui/puzzles_head_icon.svg"]);return new Promise(function(e){return t.on("complete",e)})}function preloadTaskBarResources(e){var t=new createjs.LoadQueue(!0,e);t.loadManifest(["media/ui/puzzles_library_button.svg","media/ui/puzzles_puzzles_button.svg","media/ui/puzzles_minimize_left_button.svg","media/ui/puzzles_maximize_left_button.svg","media/ui/puzzles_viewport_active_button.svg","media/ui/puzzles_viewport_inactive_button.svg","media/ui/puzzles_center_button.svg","media/ui/puzzles_runcode_active_button.svg","media/ui/puzzles_runcode_inactive_button.svg","media/ui/puzzles_savecode_active_button.svg","media/ui/puzzles_savecode_inactive_button.svg","media/ui/puzzles_undo_active_button.svg","media/ui/puzzles_undo_inactive_button.svg","media/ui/puzzles_redo_active_button.svg","media/ui/puzzles_redo_inactive_button.svg","media/ui/puzzles_help_button.svg"]);return new Promise(function(e){return t.on("complete",e)})}function init(a,e,l){var t=Array.prototype.slice.call(arguments);if(5==t.length){a=t[0].replace(/media\/$/,"");e=t[3];var n=t[1],o=t[2];l=function(e){updateAppInstance(o);n(e)}}else if(4==t.length){a=t[0].replace(/media\/$/,"");e=t[2];l=t[1]}var t=v3d.AppUtils.getPageParams(),g=a+_paths.mediaDir;_libraryXML=a+_paths.libXMLPath;_libraryStockXML=a+_paths.libStockXMLPath;_logicXMLPath=e||t.logic;ace.config.set("basePath","".concat(a,"/lib/ace"));ace.config.set("theme","ace/theme/".concat("dark"===t.theme?"monokai":"eclipse"));document.body.classList.add("theme-".concat(t.theme));var f=createBaseUI();document.body.appendChild(f);preloadPreloaderResources(a,t.theme).then(function(){(_preloader=createPreloader()).render=!0;_preloader.$mount("#preloader-mount")}).then(function(){var e=libraryXMLLoadPromise(_libraryStockXML).then(function(e){return _libraryStockXMLStr=e}),t=loadUserLibraryXML(_libraryXML),o=!1,n=logicXMLLoadPromise().then(function(e){o=!0;return parseLogicXMLStr(e)},function(){o=!1;msg("Logic file not found. Create one by clicking <b>Save</b> button.");return parseLogicXMLStr(DEFAULT_LOGIC_XML_STR)}),i=loadPlugins(a).then(function(e){_pluginsGlobalCodeStr=_pluginsToolboxXMLStr="";e.forEach(function(t){_pluginsToolboxXMLStr+=t.getCategoryXMLString();try{var e=t.codeFun();""!==e&&void 0!==e&&(_pluginsGlobalCodeStr+="".concat(e,"\n"))}catch(e){console.error(e);throw new PluginError(t,"error calling code() function [".concat(e,"]"))}t.blocks.forEach(function(t){if(null!==t.templateObj){Blockly.Blocks[t.type]=t.templateObj;var e=Blockly.Blocks[t.type].init;Blockly.Blocks[t.type].init=function(){try{return e.call(this)}catch(e){console.error(e);throw new BlockError(t,"error calling init() function [".concat(e,"]"))}}}null!==t.codeFun&&(Blockly.JavaScript[t.type]=function(e){try{return t.codeFun(e)}catch(e){console.error(e);throw new BlockError(t,"error calling code() function [".concat(e,"]"))}})});if("E-Commerce"===t.name){replaceDeprecated("E-Commerce.placeOrder","placeOrder");replaceDeprecated("E-Commerce.wooGetProductInfo","wooGetProductInfo");replaceDeprecated("E-Commerce.wooProductAttribute","wooProductAttribute");replaceDeprecated("E-Commerce.wooProductInfo","wooProductInfo")}});return e}).catch(function(e){console.error(e);return[]}),r=preloadTitleBarResources(a),s=preloadTaskBarResources(a);setupBlocklyExtensions();initBlocks();_titleBar=createTitleBar();_taskBar=createTaskBar();i=Promise.all([e,t,n,i]).then(function(e){var t=_slicedToArray(e,4),n=t[0],o=t[1],e=t[2],t=t[3];function i(t){t.addChangeListener(function(e){"create"===e.type&&(e.ids||[e.blockId]).forEach(function(e){e=t.getBlockById(e),e=new BlocklyExt.Events.Ready(e);e.recordUndo=!1;Blockly.Events.fire(e)});setupVariableEventsSync(t,e);setupProcedureEventsSync(t,e);if(e.type!=Blockly.Events.UI){_taskBar.hasUnupdatedLogic=!0;_taskBar.hasUnsavedChanges=!0}})}function r(t){var e=_tabCollection.tabs.find(function(e){return typesCanBeShared(t.type,e.type)&&e.ws!==t.ws});if(void 0!==e){e.ws.getVariableMap().getAllVariables().forEach(function(e){variableCreateSync([t.ws],e.getId(),e.name,e.type)});e.ws.getTopBlocks().forEach(function(e){"procedures_defnoreturn"!==e.type&&"procedures_defreturn"!==e.type||procedureCreateSync([t.ws],e)})}}function s(){BlocklyExt.Procedures.stripWorkspaceProxies(this.ws);var t=getSharedWSGroup(this.ws);this.ws.getTopBlocks().forEach(function(e){"procedures_defnoreturn"!==e.type&&"procedures_defreturn"!==e.type||e.isProxyProcDefBlock_||procedureDeleteSync(t,e.id,new Blockly.Events.BlockDelete(e))})}var a=createXMLElement("xml");e.tabData.forEach(function(e){return a.appendChild(e.logicXML)});a.appendChild(domParser$1.parseFromString(n,"text/xml").childNodes[0]);a.appendChild(domParser$1.parseFromString(o,"text/xml").childNodes[0]);t.forEach(function(e){null!==e.categoryXML&&a.appendChild(e.categoryXML)});var l,t=collectMissingBlockDefsInfo(a);addDummyMissingBlockDefs(t);for(l in t)console.error('Puzzle "'.concat(l,'" is not defined properly. Replaced with a dummy block.'));_tabCollection=initTabs(document.getElementById("tabButtons"),document.getElementById("blocklyTabs"),function(e){i(e.ws);r(e)},s,g);var c="";e.tabData.forEach(function(e){var t=getToolbox(e.type,_taskBar.showLibrary),t=createTabWithWS(e.name,e.type,t,g);i(t.ws);t.onBeforeDispose=s;_tabCollection.add(t);Blockly.Xml.domToWorkspace(e.logicXML,t.ws);t.ws.clearUndo();t.reset();if(e.metrics){t.ws.setScale(e.metrics.scale);t.ws.scroll(e.metrics.scrollX,e.metrics.scrollY)}else workspaceSvgScrollTop(t.ws);e.active&&(c=t.id)});_tabCollection.tabs.forEach(function(e){r(e)});_tabCollection.setActive(c);function u(){var e=_tabCollection.getActive();e&&e.ws.getAudioManager().play("disconnect");event.stopPropagation();evalBlocklyCode();_taskBar.hasUnupdatedLogic=!1;_runCb&&_runCb()}document.addEventListener("keydown",function(e){if(32==e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)){u();e.preventDefault();e.stopPropagation();return!1}});function d(){var e=_tabCollection.getActive();e&&e.ws.getAudioManager().play("disconnect");_tabCollection.tabs.forEach(function(e){e.setActive(!0)});var t=generateCode(!1),n=_tabCollection.tabs.map(function(e){return BlocklyExt.Procedures.stripWorkspaceProxies(e.ws)}),o=isAbs(_logicXMLPath)?_logicXMLPath:getDir(decodeURIComponent(location.pathname))+_logicXMLPath,i=o.replace(".xml",".js");BlocklyStorage.link(o,i,t,_tabCollection,getEditorSettings(),function(){msg("Saved Puzzles and JS code. The previous version of your <b>visual_logic.xml</b> file has been backed up in your app folder.");_taskBar.hasUnsavedChanges=!1},function(){msg(CONNECTION_ERROR_MSG)});_tabCollection.tabs.forEach(function(t,e){n[e].forEach(function(e){t.ws.addTopBlock(e)})});e&&_tabCollection.setActive(e.id)}document.addEventListener("keydown",function(e){if(83==e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)){d();e.preventDefault();e.stopPropagation();return!1}});updateBlocksCompat();document.addEventListener("keydown",function(e){e.target!=document.body&&e.stopPropagation()},!1);evalBlocklyCode();(_viewportWindow=new ViewportWindow({restrictElem:f})).hide();var h=!1;_viewportWindow.hideCb=function(){h=_viewportWindow.isPaused();_viewportWindow.pause();_taskBar.showViewport=!1};_viewportWindow.showCb=function(){h||_viewportWindow.play();_taskBar.showViewport=!0};e=e.editorSettings;"viewportX"in e&&"viewportY"in e&&_viewportWindow.setPosition(e.viewportX,e.viewportY);"viewportW"in e&&_viewportWindow.setWidth(e.viewportW);"viewportH"in e&&_viewportWindow.setHeight(e.viewportH);document.body.appendChild(_viewportWindow.root);_taskBar.switchCb=function(){_taskBar.hasUnsavedChanges=!0;_tabCollection.tabs.forEach(function(e){updateTabToolbox(e,_taskBar.showLibrary)})};var p=document.getElementById("blocklyTabs");_taskBar.toolboxCb=function(){_taskBar.hasUnsavedChanges=!0;_taskBar.minimizeToolbox?p.classList.add("blocklyTabs--no-toolbox"):p.classList.remove("blocklyTabs--no-toolbox");_tabCollection.tabs.forEach(function(e){e.ws.toolbox_.clearSelection();var t=e.ws.getToolbox().width;e.ws.resize();var n=e.ws.getToolbox().width;e.ws.scroll(e.ws.scrollX+t-n,e.ws.scrollY)})};_taskBar.viewportCb=function(){if(null!==_viewportWindow){_taskBar.hasUnsavedChanges=!0;_viewportWindow[this.showViewport?"show":"hide"]()}};_taskBar.centerCb=function(){_taskBar.hasUnsavedChanges=!0;resetWorkspaceZoomPos(_tabCollection.getActiveWS())};_taskBar.runCb=u;_taskBar.saveCb=d;_taskBar.undoCb=function(){_tabCollection.getActiveWS().undo(!1)};_taskBar.redoCb=function(){_tabCollection.getActiveWS().undo(!0)};_taskBar.helpCb=function(){window.open("https://www.soft8soft.com/docs/manual/en/introduction/Puzzles-Visual-Logic-Editor.html")};return{showLibrary:"toolboxLibraryMode"in e&&e.toolboxLibraryMode,minimizeToolbox:"toolboxMinimizedMode"in e&&e.toolboxMinimizedMode,viewportHidden:"viewportHidden"in e&&e.viewportHidden}}).catch(function(e){console.error(e);return{}});Promise.all([r,s,i]).then(function(e){var t=_slicedToArray(e,3)[2],n=t.showLibrary,e=t.minimizeToolbox,t=t.viewportHidden;_preloader.render=!1;_titleBar.classList.remove("u-none");_taskBar.render=!0;_taskBar.$mount("#task-bar-mount");n!==_taskBar.showLibrary&&_taskBar.onSwitch();e!==_taskBar.minimizeToolbox&&_taskBar.onToolbox();t?_viewportWindow.hide():_viewportWindow.show();l(o)})})}function viewportUseAppInstance(e){null!==_viewportWindow&&_viewportWindow.setAppInstance(e)}function setupBlocklyExtensions(){BlocklyExt.extendWorkspaceContextMenu(function(e){e.push({text:Blockly.Msg.RESET_VIEWPORT_DIMENSIONS,enabled:!0,callback:function(){_viewportWindow&&_viewportWindow.resetDimensions()}})});BlocklyExt.extendBlockContextMenu(function(e){var t=this.getDescendants(!0).length,t={text:1==t?Blockly.Msg.SAVE_BLOCK_TO_LIBRARY:Blockly.Msg.SAVE_X_BLOCKS_TO_LIBRARY.replace("%1",String(t)),enabled:!0,callback:function(){processLibrarySave(this.workspace)}};e.splice(-1,0,t)});function e(e){if(void 0!==(e=e.find(function(e){return e.text===Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF}))){var t=this.getProcedureCall(),n=this.workspace;e.callback=function(){var e=Blockly.Procedures.getDefinition(t,n);if(e){e.isProxyProcDefBlock_&&(e=e.proxyTarget_);_tabCollection.setActiveWS(e.workspace);e.workspace.centerOnBlock(e.id);e.select()}}}}BlocklyExt.extendProcedureCallCustomMenu(e,e);BlocklyExt.extendFieldVariableContextMenu(function(e){e.forEach(function(e){switch(e[1]){case Blockly.DELETE_VARIABLE_ID:e[1]=BlocklyExt.DELETE_VARIABLE_ID_MULTI_WS;break;case Blockly.RENAME_VARIABLE_ID:e[1]=BlocklyExt.RENAME_VARIABLE_ID_MULTI_WS}})},function(e){if(e===BlocklyExt.DELETE_VARIABLE_ID_MULTI_WS){if(this.sourceBlock_&&this.sourceBlock_.workspace){for(var n=this.sourceBlock_.workspace,t=(d=getSharedWSGroup(n)).indexOf(n),o=this.variable_,i=d.map(function(e){return e.getVariableUsesById(o.getId())}),r=i.reduce(function(e,t){e.push.apply(e,t);return e},[]),s=!0,a=0;a<r.length;a++){var l=r[a];if("procedures_defnoreturn"==l.type||"procedures_defreturn"==l.type){l=l.getFieldValue("NAME"),l=Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o.name).replace("%2",l);Blockly.alert(l);s=!1;break}}if(s)if(1<r.length){var c=[];d.forEach(function(e,t){if(n!==e&&i[t].length){e=_tabCollection.getTabByWS(e);e&&c.push(e.name)}});var u=Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o.name);c.length&&(u+=" (also used in tabs: ".concat(c.join(","),")"));Blockly.confirm(u,function(e){if(e){n.deleteVariableInternal_(o,i[t]);Blockly.Events.disable();variableDeleteSync(d,o.getId());Blockly.Events.enable()}})}else{n.deleteVariableInternal_(o,i[t]);Blockly.Events.disable();variableDeleteSync(d,o.getId());Blockly.Events.enable()}return!0}}else if(e===BlocklyExt.RENAME_VARIABLE_ID_MULTI_WS&&this.sourceBlock_&&this.sourceBlock_.workspace){var d=getSharedWSGroup(n=this.sourceBlock_.workspace),o=this.variable_;Blockly.Variables.renameVariable(n,o,function(e){if(null!==e){Blockly.Events.disable();variableRenameSync(d,o.getId(),e);Blockly.Events.enable()}});return!0}});BlocklyExt.overridePaste(function(){var e=_tabCollection.getActiveWS(),t=_tabCollection.getTabByWS(Blockly.clipboardSource_),n=_tabCollection.getTabByWS(e);typesCanBeShared(t.type,n.type)||msg('It could be dangerous to share puzzles between "init" and the other tabs. Use at your own risk!');pasteBlockXMLToWorkspace(Blockly.clipboardXml_,e)});BlocklyExt.overrideAlert(function(e,t){openAlertDialog(e,t)});BlocklyExt.overrideConfirm(function(e,t){openConfirmDialog(e,function(){t(!1)},function(){t(!0)})});BlocklyExt.overridePrompt(function(e,t,n){openPromptDialog(e,t,function(){n(null)},function(e){n(e)})});BlocklyExt.set_BlockDragSurfaceSvg_ClearAndHideCb(function(){var e=new BlocklyExt.Events.BlockDragHide(Blockly.selected);Blockly.Events.fire(e)});BlocklyExt.set_BlockDragSurfaceSvg_SetBlocksAndShowCb(function(){var e=new BlocklyExt.Events.BlockDragShow(Blockly.selected);Blockly.Events.fire(e)});BlocklyExt.set_BlockSvg_BringToFrontCb(function(){var e=new BlocklyExt.Events.BlockBringToFront(this);Blockly.Events.fire(e)});BlocklyExt.set_WorkspaceDragSurfaceSvg_ClearAndHideCb(function(){var e=new BlocklyExt.Events.WsDragHide(_tabCollection.getActiveWS());Blockly.Events.fire(e)});BlocklyExt.set_WorkspaceDragSurfaceSvg_SetContentsAndShowCb(function(){var e=new BlocklyExt.Events.WsDragShow(_tabCollection.getActiveWS());Blockly.Events.fire(e)})}function setupVariableEventsSync(e,t){Blockly.Events.disable();t.type===Blockly.Events.VAR_CREATE?variableCreateSync(getSharedWSGroup(e),t.varId,t.varName,t.varType):t.type===Blockly.Events.VAR_RENAME?variableRenameSync(getSharedWSGroup(e),t.varId,t.newName):t.type===Blockly.Events.VAR_DELETE&&variableDeleteSync(getSharedWSGroup(e),t.varId);Blockly.Events.enable()}function setupProcedureEventsSync(t,n){n.type===Blockly.Events.BLOCK_CREATE?(n.ids||[n.blockId]).forEach(function(e){e=t.getBlockById(e);null!==e&&("procedures_defnoreturn"!==e.type&&"procedures_defreturn"!==e.type||procedureCreateSync(getSharedWSGroup(t),e))}):n.type===Blockly.Events.BLOCK_DELETE?(n.ids||[n.blockId]).forEach(function(e){procedureDeleteSync(getSharedWSGroup(t),e,n)}):n.type===Blockly.Events.BLOCK_CHANGE&&(n.ids||[n.blockId]).forEach(function(e){e=t.getBlockById(e);"procedures_defnoreturn"!==e.type&&"procedures_defreturn"!==e.type||procedureChangeSync(getSharedWSGroup(t),e,n)})}function initTabs(r,s,n,o,i){var a=new TabCollection,l=document.createElement("div");l.classList.add("tabAdd");l.addEventListener("click",function(e){openTabAddDialog(null,function(e){var t=getToolbox(TAB_SECONDARY,_taskBar.showLibrary),t=createTabWithWS(e,TAB_SECONDARY,t,i);n&&n(t);o&&(t.onBeforeDispose=o);a.add(t);a.setActive(t.id);a.resetTab(t.id);_taskBar.hasUnupdatedLogic=!0;_taskBar.hasUnsavedChanges=!0})});r.appendChild(l);a.onAdd=function(n){var t=a.getTabById(n),e=document.createElement("div");e.setAttribute("tabid",n);e.classList.add("tabHeader");e.innerHTML=t.name;t.type!==TAB_INIT&&t.type!==TAB_MAIN||e.classList.add("u-italic");if(t.type!=TAB_INIT&&t.type!=TAB_MAIN){var o=document.createElement("div");o.classList.add("tabHeaderClose");o.addEventListener("click",function(e){e.stopPropagation();openTabDeleteDialog(t.name,null,function(e){var t=a.getNext(n)||a.getPrev(n);a.remove(n);if(t){a.setActive(t.id);a.resetTab(t.id)}_taskBar.hasUnupdatedLogic=!0;_taskBar.hasUnsavedChanges=!0})});e.appendChild(o)}o=t.wsWrapperElem;o.setAttribute("tabid",n);o.classList.add("tabBody");r.insertBefore(e,l);s.appendChild(o);e.addEventListener("click",function(e){if(a.activeTabId!=n){a.setActive(n);a.resetTab(n)}})};a.onRemove=function(t){r.childNodes.forEach(function(e){e.getAttribute("tabid")==t&&r.removeChild(e)});s.childNodes.forEach(function(e){e.getAttribute("tabid")==t&&s.removeChild(e)})};var c=document.getElementsByClassName("js-title-puzzles")[0];a.onSetActive=function(e,i){a.tabs[0].id===i?c.classList.remove("title-bar__title-puzzles--right-border"):c.classList.add("title-bar__title-puzzles--right-border");r.childNodes.forEach(function(e,t,n){if(e.hasAttribute("tabid")){var o=e.getAttribute("tabid")==i;if(o){e.classList.remove("tabHeader--inactive");e.classList.add("tabHeader--active")}else{e.classList.remove("tabHeader--active");e.classList.add("tabHeader--inactive")}t=t!==n.length-1&&n[t+1].getAttribute("tabid")===i;o||t?e.classList.remove("tabHeader--right-border"):e.classList.add("tabHeader--right-border")}});s.childNodes.forEach(function(e){if(e.hasAttribute("tabid"))if(e.getAttribute("tabid")==i){e.classList.remove("tabBody-inactive");e.classList.add("tabBody-active")}else{e.classList.remove("tabBody-active");e.classList.add("tabBody-inactive")}});var t=a.getActiveWS();_taskBar.undoStack=t.undoStack_;_taskBar.redoStack=t.redoStack_};return a}function createTabWithWS(e,t,n,o){e=new Tab(e);e.type=t;document.body.appendChild(e.wsWrapperElem);e.ws=initWorkspace(e.wsWrapperElem.id,n,o);customizeToolboxLayout(e.ws.getToolbox(),e.type,_taskBar.showLibrary,wsProcessLibraryDelete.bind(null,e.ws));return e}function libraryXMLLoadPromise(n){return new Promise(function(t,e){n?(new v3d.FileLoader).load(n,function(e){t(e)},function(){},function(){t(DEFAULT_LIBRARY_XML_STR)}):t(DEFAULT_LIBRARY_XML_STR)})}function logicXMLLoadPromise(){return new Promise(function(t,e){(new v3d.FileLoader).load(_logicXMLPath,function(e){t(e)},function(){},function(){e("")})})}function parseLogicXMLStr(e){e=Blockly.Xml.textToDom(e);e instanceof Node&&"xml"==e.nodeName||(e=createXMLElement("xml"));return{tabData:logicXMLGetTabData(e),editorSettings:logicXMLGetEditorSettings(e)}}function initTabDataProperties(){return{name:"",type:"",active:!1,metrics:null,logicXML:""}}function logicXMLGetTabData(e){var t=Array.from(e.getElementsByTagName("tab"));if(!t.length){var n=createXMLElement("tab");n.setAttribute("name","Main");n.setAttribute("type",TAB_MAIN);n.setAttribute("active",!0);for(var o=0;o<e.children.length;o++)n.appendChild(e.children[o].cloneNode(!0));t=[n]}var i=t.map(function(e){var t=createXMLElement("xml");Array.from(e.children).forEach(function(e){t.appendChild(e.cloneNode(!0))});var n=e.getAttribute("name"),o=e.getAttribute("type");o==TAB_INIT?n=LABEL_INIT:o==TAB_MAIN&&(n=LABEL_MAIN);o=Object.assign(initTabDataProperties(),{name:n,type:o,active:"true"==e.getAttribute("active"),logicXML:t});e.hasAttribute("scrollx")&&e.hasAttribute("scrolly")&&e.hasAttribute("scale")&&(o.metrics={scrollX:parseFloat(e.getAttribute("scrollx")),scrollY:parseFloat(e.getAttribute("scrolly")),scale:parseFloat(e.getAttribute("scale"))});return o}),r=i.find(function(e){return e.type==TAB_INIT})||Object.assign(initTabDataProperties(),{name:LABEL_INIT,type:TAB_INIT,logicXML:createXMLElement("xml")}),t=i.find(function(e){return e.type==TAB_MAIN})||Object.assign(initTabDataProperties(),{name:LABEL_MAIN,type:TAB_MAIN,logicXML:createXMLElement("xml")}),i=i.filter(function(e){return e.type==TAB_SECONDARY}),t=[r,t];t.push.apply(t,i);t.find(function(e){return e.active})||((t.find(function(e){return e.type==TAB_MAIN})||t[0]).active=!0);return t}function logicXMLGetEditorSettings(e){var t=e.getElementsByTagName("editorsettings")[0],e={};if(t){t.hasAttribute("viewport-x")&&(e.viewportX=parseFloat(t.getAttribute("viewport-x")));t.hasAttribute("viewport-y")&&(e.viewportY=parseFloat(t.getAttribute("viewport-y")));t.hasAttribute("viewport-w")&&(e.viewportW=parseFloat(t.getAttribute("viewport-w")));t.hasAttribute("viewport-h")&&(e.viewportH=parseFloat(t.getAttribute("viewport-h")));t.hasAttribute("viewport-hidden")&&(e.viewportHidden="true"===t.getAttribute("viewport-hidden"));t.hasAttribute("viewport-hidden")&&(e.viewportHidden="true"===t.getAttribute("viewport-hidden"));t.hasAttribute("toolbox-library-mode")&&(e.toolboxLibraryMode="true"===t.getAttribute("toolbox-library-mode"));t.hasAttribute("toolbox-minimized-mode")&&(e.toolboxMinimizedMode="true"===t.getAttribute("toolbox-minimized-mode"))}return e}function getEditorSettings(){var e={};if(null!==_viewportWindow){e.viewportX=_viewportWindow.getPosX();e.viewportY=_viewportWindow.getPosY();e.viewportW=_viewportWindow.getWidth();e.viewportH=_viewportWindow.getHeight();e.viewportHidden=_viewportWindow.isHidden()}if(null!==_taskBar){e.toolboxLibraryMode=_taskBar.showLibrary;e.toolboxMinimizedMode=_taskBar.minimizeToolbox}return e}function initWorkspace(e,t,n){return Blockly.inject(e,{toolbox:t,grid:{spacing:20,length:3,colour:"#ccc",snap:!0},zoom:{wheel:!0,startScale:.9,maxScale:1,minScale:.3,scaleSpeed:1.05},trashcan:!1,media:n,oneBasedIndex:!1,scrollbars:!0})}function filterInitToolbox(e){var o=createXMLElement("xml");Blockly.Xml.textToDom("<xml>".concat(e,"</xml>")).childNodes.forEach(function(e){if("category"===e.tagName){var t=e.cloneNode();e.childNodes.forEach(function(e){e instanceof Element&&"true"===e.getAttribute(ALLOW_INIT_ATTR)&&t.appendChild(e.cloneNode(!0))});var n=t.getAttribute("custom");!t.childNodes.length&&"VARIABLE"!==n&&"PROCEDURE"!==n||o.appendChild(t)}else e instanceof Element&&"true"===e.getAttribute(ALLOW_INIT_ATTR)&&o.appendChild(e.cloneNode())});return Blockly.Xml.domToPrettyText(o).replace(/^<xml>([\s\S]*)<\/xml>$/,"$1")}function loadUserLibraryXML(e){return libraryXMLLoadPromise(e).then(function(e){return _libraryXMLStr=xmlStrRemoveDeleteButton(e)})}function getToolbox(e,t){var n="",n=t?"\n            ".concat(getLibraryCategories(_libraryStockXMLStr),'\n            <sep gap="40"></sep>\n            ').concat(getLibraryCategories(_libraryXMLStr),"\n        "):e===TAB_INIT?filterInitToolbox("\n            ".concat(getInitPuzzles(),"\n            ").concat(getMainPuzzles({INIT_TAB:!0}),'\n            <sep gap="40" allowInit="true"></sep>\n            ').concat(getPluginPuzzles(),"\n        ")):"\n            ".concat(getMainPuzzles(),'\n            <sep gap="40"></sep>\n            ').concat(getPluginPuzzles(),"\n        ");return"<xml>".concat(n,"</xml>")}function getPluginPuzzles(){return _pluginsToolboxXMLStr}function getLibraryCategories(e){return(e=e&&((e=e.split("<xml>")[1]||"").split("</xml>")[0]||""))||""}function xmlStrRemoveDeleteButton(e){var t=Blockly.Xml.textToDom(e),e=Array.prototype.find.call(t.getElementsByTagName("button"),function(e){var t=e.getAttribute("callbackKey"),e=e.getAttribute("text");return t&&t.startsWith("delete:")&&e&&"Delete this item"===e});void 0!==e&&e.parentNode.removeChild(e);return Blockly.Xml.domToPrettyText(t)}function updateTabToolbox(e,t){var n=getToolbox(e.type,t);e.ws.toolbox_.clearSelection();e.ws.updateToolbox(n);customizeToolboxLayout(e.ws.getToolbox(),e.type,t,wsProcessLibraryDelete.bind(null,e.ws))}function updateAppInstance(t){AppAdapter.update(t);_tabCollection.tabs.forEach(function(e){updateTabToolbox(e,_taskBar.showLibrary)});_runCb=function(){if(v3d.PL){var e=t.container.getAttribute("id"),e=v3d.PL.execInitPuzzles({container:e}).initOptions;v3d.PL.init(t,e)}};viewportUseAppInstance(t)}function loadingUpdateCb(e){if(_viewportWindow){_viewportWindow.title.isLoading=!0;_viewportWindow.title.loadPercentage=e.toFixed()}}function loadingFinishCb(){_viewportWindow&&(_viewportWindow.title.isLoading=!1)}function msg(e){_msgTimeout&&clearTimeout(_msgTimeout);_taskBar.message=e;_msgTimeout=setTimeout(function(){_taskBar.message=""},7e3)}function generateCode(e){Blockly.JavaScript.INFINITE_LOOP_TRAP=null;Blockly.Blocks.execScript.scopeInfo_={};var t=_tabCollection.tabs.find(function(e){return e.type==TAB_INIT}),r={},n=Blockly.JavaScript.workspaceToCode(t.ws,function(){Object.assign(r,Blockly.JavaScript.variableDB_.db_)});Blockly.Blocks.execScript.scopeInfo_={};var o=combineSharedWorkspaces(_tabCollection.tabs.filter(function(e){return e.type==TAB_MAIN||e.type==TAB_SECONDARY}).map(function(e){return e.ws}));BlocklyExt.Procedures.stripWorkspaceProxies(o);var s={},i=Blockly.JavaScript.workspaceToCode(o,function(){Object.assign(s,Blockly.JavaScript.variableDB_.db_)});disposeCombinedWorkspace(o);var a={},l={},c={},u={};_tabCollection.tabs.forEach(function(e){var n=e.type===TAB_INIT?r:s,o=e.type===TAB_INIT?a:l,i=e.type===TAB_INIT?c:u;getWorkspaceVariablesNames(e.ws).forEach(function(e){var t="".concat(e.toLowerCase(),"_").concat(Blockly.VARIABLE_CATEGORY_NAME);t in n&&(o[e]=n[t])});getWorkspaceProceduresNames(e.ws).forEach(function(e){var t="".concat(e.toLowerCase(),"_").concat(Blockly.PROCEDURE_CATEGORY_NAME);t in n&&(i[e]=n[t])})});var d=procedureNameMapToCode(c),t=procedureNameMapToCode(u),o=new RegExp(__EXEC_SCRIPT_VARS_BUILTIN__,"g"),n=n.replace(o,generateVarAccessorObject(a)),i=i.replace(o,generateVarAccessorObject(l));n="var ".concat(__EXEC_SCRIPT_PROC_ID__," = ").concat(generateProcAccessorObject(c),";\n\n").concat(n);i="var ".concat(__EXEC_SCRIPT_PROC_ID__," = ").concat(generateProcAccessorObject(u),";\n\n").concat(i);return"/**\n * Generated by Verge3D Puzzles v.".concat(v3d.REVISION,"\n * ").concat(new Date,"\n * Prefer not editing this file as your changes may get overridden once Puzzles are saved.\n * Check out https://www.soft8soft.com/docs/manual/en/introduction/Using-JavaScript.html\n * for the information on how to add your own JavaScript to Verge3D apps.\n */\n\n'use strict';\n\n(function() {\n").concat(getGlobalVars(),'\nvar PL = v3d.PL = v3d.PL || {};\n\n// a more readable alias for PL (stands for "Puzzle Logic")\nv3d.puzzles = PL;\n\nPL.procedures = PL.procedures || {};\n\n').concat(_pluginsGlobalCodeStr,'\n\nPL.execInitPuzzles = function(options) {\n    // always null, should not be available in "init" puzzles\n    var appInstance = null;\n    // app is more conventional than appInstance (used in exec script and app templates)\n    var app = null;\n\n    var _initGlob = {};\n    _initGlob.percentage = 0;\n    _initGlob.output = {\n        initOptions: {\n            fadeAnnotations: true,\n            useBkgTransp: false,\n            preserveDrawBuf: false,\n            useCompAssets: false,\n            useFullscreen: true,\n            useCustomPreloader: false,\n            preloaderStartCb: function() {},\n            preloaderProgressCb: function() {},\n            preloaderEndCb: function() {},\n        }\n    }\n\n    // provide the container\'s id to puzzles that need access to the container\n    _initGlob.container = options !== undefined && \'container\' in options\n            ? options.container : "";\n\n    ').concat(d,"\n\n    ").concat(n,"\n    return _initGlob.output;\n}\n\nPL.init = function(appInstance, initOptions) {\n\n// app is more conventional than appInstance (used in exec script and app templates)\nvar app = appInstance;\n\ninitOptions = initOptions || {};\n\nif ('fadeAnnotations' in initOptions) {\n    _pGlob.fadeAnnotations = initOptions.fadeAnnotations;\n}\n\n").concat(t,"\n\n").concat(i,"\n\n").concat(e?"\nPL.eval = function(expr) {\n    eval(expr);\n}\n":"","\n} // end of PL.init function\n\n})(); // end of closure\n\n/* ================================ end of code ============================= */\n")}function generateVarAccessorObject(n){var e=Object.keys(n).map(function(e){var t=n[e];return'"'.concat(e,'": { get: function() { return ').concat(t,"; }, set: function(val) { ").concat(t," = val; } },")});return"Object.defineProperties({}, {\n    ".concat(e.join("\n    "),"\n})")}function generateProcAccessorObject(t){var e=Object.keys(t).map(function(e){return'"'.concat(e,'": ').concat(t[e],",")});return"{\n    ".concat(e.join("\n    "),"\n}")}function procedureNameMapToCode(t){return Object.keys(t).map(function(e){return'this.procedures["'.concat(e.replace(/"/g,'\\"'),'"] = ').concat(t[e],";")}).join("\n")}function evalBlocklyCode(){var code=generateCode(!0);try{eval(code)}catch(e){console.error(e);msg("There was an error in the code generated by Puzzles. Check the browser console for more details (<b>F12</b>).");return}msg("Puzzles are running. To completely reset your application state, reload your browser tab (<b>F5</b>). All unsaved changes will be lost.")}function getDir(e){e=(e=e.split("?")[0]).split("/").slice(0,-1).join("/");return e?e+"/":""}function isAbs(e){return/^https?:\/\/|^\//i.test(e)}function processLibrarySave(o){_libraryXML&&openLibraryAddDialog(null,function(e){var t=Blockly.Xml.blockToDom(Blockly.selected,!0),n='\n        <category name="'.concat(e,'">\n        ').concat(Blockly.Xml.domToPrettyText(t),"\n        </category>\n        "),t=isAbs(_libraryXML)?_libraryXML:getDir(decodeURIComponent(location.pathname))+_libraryXML;BlocklyStorage.linkLibrary(t,e,n,o,function(){loadUserLibraryXML("".concat(_libraryXML,"?v=").concat(Date.now())).then(function(){_tabCollection.tabs.forEach(function(e){updateTabToolbox(e,_taskBar.showLibrary)})});msg("Saved puzzles to the library.")},function(){msg(CONNECTION_ERROR_MSG)})})}function wsProcessLibraryDelete(t,n){n&&openLibraryDeleteDialog(n,null,function(){var e=isAbs(_libraryXML)?_libraryXML:getDir(decodeURIComponent(location.pathname))+_libraryXML;BlocklyStorage.linkLibraryDelete(e,n,"",t,function(){loadUserLibraryXML("".concat(_libraryXML,"?v=").concat(Date.now())).then(function(){_tabCollection.tabs.forEach(function(e){updateTabToolbox(e,_taskBar.showLibrary)})});msg('Entry "'.concat(n,'" deleted from the library.'))},function(){msg(CONNECTION_ERROR_MSG)})})}exports.init=init;exports.loadingFinishCb=loadingFinishCb;exports.loadingUpdateCb=loadingUpdateCb;exports.updateAppInstance=updateAppInstance;exports.viewportUseAppInstance=viewportUseAppInstance;return exports}({},this.v3d,ace,createjs,Blockly,interact);window.PE=this.v3d.PE;